{"version":3,"sources":["./node_modules/bcdice/lib/bcdice/game_system/BarnaKronika.js"],"names":["require","Opal","$rb_plus","lhs","rhs","$rb_gt","$rb_minus","$rb_times","$rb_lt","self","top","$nesting","nil","$$$","$$","$module","module","$klass","klass","$send2","send2","$send","send","$truthy","truthy","$base","$parent_nesting","concat","$super","$BarnaKronika_initialize$1","$BarnaKronika_replace_text$2","$BarnaKronika_eval_game_system_specific_command$7","$BarnaKronika_roll_barna_kronika$8","$BarnaKronika_isCriticalCall$12","$BarnaKronika_isNomalAttack$13","$BarnaKronika_getAttackStringWhenCriticalCall$14","$BarnaKronika_getAttackStringWhenNomal$15","$BarnaKronika_getAttackHitLocation$16","$$prototype","isBattleMode","const_set","$register_prefix","def","$$initialize","command","$iter","$$p","$yield","find_super_dispatcher","sort_add_dice","sort_barabara_dice","$$arity","$$replace_text","string","$$3","$$4","$$5","$$6","$$s","$last_match","$$eval_game_system_specific_command","$a","$b","option","dice_n","$ret_or_1","criticalCallDice","battleModeText","dice_str","suc","set","at_str","output","$replace_text","$split","$to_proc","to_ary","$debug","$roll_barna_kronika","$$roll_barna_kronika","$$9","$$10","diceCountList","c_cnt","$ret_or_2","$to_i","_i","index","$writer","randomizer","$roll_index","to_a","i","$$11","diceCount","_j","$isCriticalCall","$getAttackStringWhenCriticalCall","$isNomalAttack","$getAttackStringWhenNomal","$sub","$$isCriticalCall","$$isNomalAttack","$$getAttackStringWhenCriticalCall","hitLocation","attackValue","result","$getAttackHitLocation","$$getAttackStringWhenNomal","$$getAttackHitLocation","num","table","$get_table_by_number"],"mappings":"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","file":"default~BarnaKronika~index.js","sourcesContent":["require('./../opal');\n\n/* Generated by Opal 1.1.1 */\n(function(Opal) {\n  function $rb_plus(lhs, rhs) {\n    return (typeof(lhs) === 'number' && typeof(rhs) === 'number') ? lhs + rhs : lhs['$+'](rhs);\n  }\n  function $rb_gt(lhs, rhs) {\n    return (typeof(lhs) === 'number' && typeof(rhs) === 'number') ? lhs > rhs : lhs['$>'](rhs);\n  }\n  function $rb_minus(lhs, rhs) {\n    return (typeof(lhs) === 'number' && typeof(rhs) === 'number') ? lhs - rhs : lhs['$-'](rhs);\n  }\n  function $rb_times(lhs, rhs) {\n    return (typeof(lhs) === 'number' && typeof(rhs) === 'number') ? lhs * rhs : lhs['$*'](rhs);\n  }\n  function $rb_lt(lhs, rhs) {\n    return (typeof(lhs) === 'number' && typeof(rhs) === 'number') ? lhs < rhs : lhs['$<'](rhs);\n  }\n  var self = Opal.top, $nesting = [], nil = Opal.nil, $$$ = Opal.$$$, $$ = Opal.$$, $module = Opal.module, $klass = Opal.klass, $send2 = Opal.send2, $send = Opal.send, $truthy = Opal.truthy;\n\n  return (function($base, $parent_nesting) {\n    var self = $module($base, 'BCDice');\n\n    var $nesting = [self].concat($parent_nesting);\n\n    (function($base, $parent_nesting) {\n      var self = $module($base, 'GameSystem');\n\n      var $nesting = [self].concat($parent_nesting);\n\n      (function($base, $super, $parent_nesting) {\n        var self = $klass($base, $super, 'BarnaKronika');\n\n        var $nesting = [self].concat($parent_nesting), $BarnaKronika_initialize$1, $BarnaKronika_replace_text$2, $BarnaKronika_eval_game_system_specific_command$7, $BarnaKronika_roll_barna_kronika$8, $BarnaKronika_isCriticalCall$12, $BarnaKronika_isNomalAttack$13, $BarnaKronika_getAttackStringWhenCriticalCall$14, $BarnaKronika_getAttackStringWhenNomal$15, $BarnaKronika_getAttackHitLocation$16;\n\n        self.$$prototype.isBattleMode = nil;\n        \n        Opal.const_set($nesting[0], 'ID', \"BarnaKronika\");\n        Opal.const_set($nesting[0], 'NAME', \"バルナ・クロニカ\");\n        Opal.const_set($nesting[0], 'SORT_KEY', \"はるなくろにか\");\n        Opal.const_set($nesting[0], 'HELP_MESSAGE', \"\" + \"・通常判定　nBK\\n\" + \"　ダイス数nで判定ロールを行います。\\n\" + \"　セット数が1以上の時はセット数も表示します。\\n\" + \"・攻撃判定　nBA\\n\" + \"　ダイス数nで判定ロールを行い、攻撃値と命中部位も表示します。\\n\" + \"・クリティカルコール　nBKCt　nBACt\\n\" + \"　判定コマンドの後ろに「Ct」を付けるとクリティカルコールです。\\n\" + \"　ダイス数n,コール数tで判定ロールを行います。\\n\" + \"　ダイス数nで判定ロールを行います。\\n\" + \"　セット数が1以上の時はセット数も表示し、攻撃判定の場合は命中部位も表示します。\\n\");\n        self.$register_prefix(\"\\\\d+BK\", \"\\\\d+BA\", \"\\\\d+BKC\", \"\\\\d+BAC\", \"\\\\d+R6\");\n        \n        Opal.def(self, '$initialize', $BarnaKronika_initialize$1 = function $$initialize(command) {\n          var $iter = $BarnaKronika_initialize$1.$$p, $yield = $iter || nil, self = this;\n\n          if ($iter) $BarnaKronika_initialize$1.$$p = null;\n          \n          $send2(self, Opal.find_super_dispatcher(self, 'initialize', $BarnaKronika_initialize$1, false, true), 'initialize', [command], null);\n          self.sort_add_dice = true;\n          return (self.sort_barabara_dice = true);\n        }, $BarnaKronika_initialize$1.$$arity = 1);\n        \n        Opal.def(self, '$replace_text', $BarnaKronika_replace_text$2 = function $$replace_text(string) {\n          var $$3, $$4, $$5, $$6, self = this;\n\n          \n          string = $send(string, 'gsub', [/(\\d+)BKC(\\d)/], ($$3 = function(){var self = $$3.$$s == null ? this : $$3.$$s;\n\n          return \"\" + ($$($nesting, 'Regexp').$last_match(1)) + \"R6[0,\" + ($$($nesting, 'Regexp').$last_match(2)) + \"]\"}, $$3.$$s = self, $$3.$$arity = 0, $$3));\n          string = $send(string, 'gsub', [/(\\d+)BAC(\\d)/], ($$4 = function(){var self = $$4.$$s == null ? this : $$4.$$s;\n\n          return \"\" + ($$($nesting, 'Regexp').$last_match(1)) + \"R6[1,\" + ($$($nesting, 'Regexp').$last_match(2)) + \"]\"}, $$4.$$s = self, $$4.$$arity = 0, $$4));\n          string = $send(string, 'gsub', [/(\\d+)BK/], ($$5 = function(){var self = $$5.$$s == null ? this : $$5.$$s;\n\n          return \"\" + ($$($nesting, 'Regexp').$last_match(1)) + \"R6[0,0]\"}, $$5.$$s = self, $$5.$$arity = 0, $$5));\n          string = $send(string, 'gsub', [/(\\d+)BA/], ($$6 = function(){var self = $$6.$$s == null ? this : $$6.$$s;\n\n          return \"\" + ($$($nesting, 'Regexp').$last_match(1)) + \"R6[1,0]\"}, $$6.$$s = self, $$6.$$arity = 0, $$6));\n          return string;\n        }, $BarnaKronika_replace_text$2.$$arity = 1);\n        \n        Opal.def(self, '$eval_game_system_specific_command', $BarnaKronika_eval_game_system_specific_command$7 = function $$eval_game_system_specific_command(string) {\n          var $a, $b, self = this, option = nil, dice_n = nil, $ret_or_1 = nil, criticalCallDice = nil, battleModeText = nil, dice_str = nil, suc = nil, set = nil, at_str = nil, output = nil;\n\n          \n          string = self.$replace_text(string);\n          if ($truthy(/(^|\\s)S?((\\d+)[rR]6(\\[([,\\d]+)\\])?)(\\s|$)/i['$=~'](string))) {\n          } else {\n            return nil\n          };\n          string = $$($nesting, 'Regexp').$last_match(2);\n          option = $$($nesting, 'Regexp').$last_match(5);\n          dice_n = $$($nesting, 'Regexp').$last_match(3);\n          dice_n = (function() {if ($truthy(($ret_or_1 = dice_n))) {\n            return $ret_or_1\n          } else {\n            return 1\n          }; return nil; })();\n          self.isBattleMode = false;\n          criticalCallDice = 0;\n          if ($truthy(option)) {\n            \n            $b = $send(option.$split(\",\"), 'map', [], \"to_i\".$to_proc()), $a = Opal.to_ary($b), (battleModeText = ($a[0] == null ? nil : $a[0])), (criticalCallDice = ($a[1] == null ? nil : $a[1])), $b;\n            self.isBattleMode = battleModeText['$=='](1);};\n          self.$debug(\"@isBattleMode\", self.isBattleMode);\n          $b = self.$roll_barna_kronika(dice_n, criticalCallDice), $a = Opal.to_ary($b), (dice_str = ($a[0] == null ? nil : $a[0])), (suc = ($a[1] == null ? nil : $a[1])), (set = ($a[2] == null ? nil : $a[2])), (at_str = ($a[3] == null ? nil : $a[3])), $b;\n          output = \"\" + \"(\" + (string) + \") ＞ [\" + (dice_str) + \"] ＞ \";\n          if ($truthy(self.isBattleMode)) {\n            output = $rb_plus(output, at_str)\n          } else {\n            \n            self.$debug(\"suc\", suc);\n            if ($truthy($rb_gt(suc, 1))) {\n              output = $rb_plus(output, \"\" + \"成功数\" + (suc))\n            } else {\n              output = $rb_plus(output, \"失敗\")\n            };\n            self.$debug(\"set\", set);\n            if ($truthy($rb_gt(set, 0))) {\n              output = $rb_plus(output, \"\" + \",セット\" + (set))};\n          };\n          return output;\n        }, $BarnaKronika_eval_game_system_specific_command$7.$$arity = 1);\n        \n        Opal.def(self, '$roll_barna_kronika', $BarnaKronika_roll_barna_kronika$8 = function $$roll_barna_kronika(dice_n, criticalCallDice) {\n          var $$9, $$10, self = this, output = nil, suc = nil, set = nil, at_str = nil, diceCountList = nil, c_cnt = nil, $ret_or_2 = nil;\n\n          \n          dice_n = dice_n.$to_i();\n          output = \"\";\n          suc = 0;\n          set = 0;\n          at_str = \"\";\n          diceCountList = [0, 0, 0, 0, 0, 0];\n          $send(dice_n, 'times', [], ($$9 = function(_i){var self = $$9.$$s == null ? this : $$9.$$s, index = nil, $writer = nil;\n            if (self.randomizer == null) self.randomizer = nil;\n\n          \n            \n            if (_i == null) {\n              _i = nil;\n            };\n            index = self.randomizer.$roll_index(6);\n            \n            $writer = [index, $rb_plus(diceCountList['$[]'](index), 1)];\n            $send(diceCountList, '[]=', Opal.to_a($writer));\n            $writer[$rb_minus($writer[\"length\"], 1)];;\n            if ($truthy($rb_gt(diceCountList['$[]'](index), suc))) {\n              return (suc = diceCountList['$[]'](index))\n            } else {\n              return nil\n            };}, $$9.$$s = self, $$9.$$arity = 1, $$9));\n          $send((6), 'times', [], ($$10 = function(i){var self = $$10.$$s == null ? this : $$10.$$s, $$11, diceCount = nil;\n\n          \n            \n            if (i == null) {\n              i = nil;\n            };\n            diceCount = diceCountList['$[]'](i);\n            if (diceCount['$=='](0)) {\n              return nil;};\n            $send(diceCount, 'times', [], ($$11 = function(_j){var self = $$11.$$s == null ? this : $$11.$$s;\n\n            \n              \n              if (_j == null) {\n                _j = nil;\n              };\n              return (output = $rb_plus(output, \"\" + ($rb_plus(i, 1)) + \",\"));}, $$11.$$s = self, $$11.$$arity = 1, $$11));\n            if ($truthy(self.$isCriticalCall(i, criticalCallDice))) {\n              \n              self.$debug(\"isCriticalCall\");\n              at_str = $rb_plus(at_str, self.$getAttackStringWhenCriticalCall(i, diceCount));\n            } else if ($truthy(self.$isNomalAttack(criticalCallDice, diceCount))) {\n              \n              self.$debug(\"isNomalAttack\");\n              at_str = $rb_plus(at_str, self.$getAttackStringWhenNomal(i, diceCount));};\n            if ($truthy($rb_gt(diceCount, 1))) {\n              return (set = $rb_plus(set, 1))\n            } else {\n              return nil\n            };}, $$10.$$s = self, $$10.$$arity = 1, $$10));\n          if ($truthy(criticalCallDice['$!='](0))) {\n            \n            c_cnt = diceCountList['$[]']($rb_minus(criticalCallDice, 1));\n            suc = $rb_times(c_cnt, 2);\n            if ($truthy(c_cnt['$!='](0))) {\n              set = 1\n            } else {\n              set = 0\n            };};\n          if ($truthy((function() {if ($truthy(($ret_or_2 = self.isBattleMode))) {\n            \n            return $rb_lt(suc, 2);\n          } else {\n            return $ret_or_2\n          }; return nil; })())) {\n            at_str = \"失敗\"};\n          output = output.$sub(/,$/, \"\");\n          at_str = at_str.$sub(/,$/, \"\");\n          return [output, suc, set, at_str];\n        }, $BarnaKronika_roll_barna_kronika$8.$$arity = 2);\n        \n        Opal.def(self, '$isCriticalCall', $BarnaKronika_isCriticalCall$12 = function $$isCriticalCall(index, criticalCallDice) {\n          var self = this;\n\n          \n          if ($truthy(self.isBattleMode)) {\n          } else {\n            return false\n          };\n          if (criticalCallDice['$=='](0)) {\n            return false};\n          return criticalCallDice['$==']($rb_plus(index, 1));\n        }, $BarnaKronika_isCriticalCall$12.$$arity = 2);\n        \n        Opal.def(self, '$isNomalAttack', $BarnaKronika_isNomalAttack$13 = function $$isNomalAttack(criticalCallDice, diceCount) {\n          var self = this;\n\n          \n          if ($truthy(self.isBattleMode)) {\n          } else {\n            return false\n          };\n          if ($truthy(criticalCallDice['$!='](0))) {\n            return false};\n          return $rb_gt(diceCount, 1);\n        }, $BarnaKronika_isNomalAttack$13.$$arity = 2);\n        \n        Opal.def(self, '$getAttackStringWhenCriticalCall', $BarnaKronika_getAttackStringWhenCriticalCall$14 = function $$getAttackStringWhenCriticalCall(index, diceCount) {\n          var self = this, hitLocation = nil, attackValue = nil, result = nil;\n\n          \n          hitLocation = self.$getAttackHitLocation($rb_plus(index, 1));\n          attackValue = $rb_times(diceCount, 2);\n          result = $rb_plus(hitLocation, \"\" + \":攻撃値\" + (attackValue) + \",\");\n          return result;\n        }, $BarnaKronika_getAttackStringWhenCriticalCall$14.$$arity = 2);\n        \n        Opal.def(self, '$getAttackStringWhenNomal', $BarnaKronika_getAttackStringWhenNomal$15 = function $$getAttackStringWhenNomal(index, diceCount) {\n          var self = this, hitLocation = nil, attackValue = nil, result = nil;\n\n          \n          hitLocation = self.$getAttackHitLocation($rb_plus(index, 1));\n          attackValue = diceCount;\n          result = $rb_plus(hitLocation, \"\" + \":攻撃値\" + (attackValue) + \",\");\n          return result;\n        }, $BarnaKronika_getAttackStringWhenNomal$15.$$arity = 2);\n        return (Opal.def(self, '$getAttackHitLocation', $BarnaKronika_getAttackHitLocation$16 = function $$getAttackHitLocation(num) {\n          var self = this, table = nil;\n\n          \n          table = [[1, \"頭部\"], [2, \"右腕\"], [3, \"左腕\"], [4, \"右脚\"], [5, \"左脚\"], [6, \"胴体\"]];\n          return self.$get_table_by_number(num, table);\n        }, $BarnaKronika_getAttackHitLocation$16.$$arity = 1), nil) && 'getAttackHitLocation';\n      })($nesting[0], $$($nesting, 'Base'), $nesting)\n    })($nesting[0], $nesting)\n  })($nesting[0], $nesting)\n})(Opal);\n"],"sourceRoot":"webpack:///"}