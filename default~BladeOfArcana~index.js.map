{"version":3,"sources":["./node_modules/bcdice/lib/bcdice/game_system/BladeOfArcana.js"],"names":["require","Opal","$rb_lt","lhs","rhs","$rb_le","$rb_gt","$rb_minus","$rb_plus","$rb_ge","self","top","$nesting","nil","$$$","$$","$module","module","$klass","klass","$send2","send2","$truthy","truthy","$send","send","$base","$parent_nesting","concat","$super","$BladeOfArcana_initialize$1","$BladeOfArcana_eval_game_system_specific_command$2","$BladeOfArcana_rollAct$3","$BladeOfArcana_tableText$4","$$prototype","randomizer","const_set","$register_prefix","def","$$initialize","command","$iter","$$p","$yield","find_super_dispatcher","sort_add_dice","$$arity","$$eval_game_system_specific_command","$case","counts","judgment","option1","argument1","option2","argument2","$ret_or_1","$ret_or_2","$ret_or_3","critical","fumble","sign","title","table","$upcase","$last_match","$to_i","$rollAct","$tableText","$$rollAct","dice_list","value","string","text","$roll_barabara","$sort","$sum","$join","$split","$to_proc","$min","$$tableText","number","index","$roll_once"],"mappings":"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","file":"default~BladeOfArcana~index.js","sourcesContent":["require('./../opal');\n\n/* Generated by Opal 1.1.1 */\n(function(Opal) {\n  function $rb_lt(lhs, rhs) {\n    return (typeof(lhs) === 'number' && typeof(rhs) === 'number') ? lhs < rhs : lhs['$<'](rhs);\n  }\n  function $rb_le(lhs, rhs) {\n    return (typeof(lhs) === 'number' && typeof(rhs) === 'number') ? lhs <= rhs : lhs['$<='](rhs);\n  }\n  function $rb_gt(lhs, rhs) {\n    return (typeof(lhs) === 'number' && typeof(rhs) === 'number') ? lhs > rhs : lhs['$>'](rhs);\n  }\n  function $rb_minus(lhs, rhs) {\n    return (typeof(lhs) === 'number' && typeof(rhs) === 'number') ? lhs - rhs : lhs['$-'](rhs);\n  }\n  function $rb_plus(lhs, rhs) {\n    return (typeof(lhs) === 'number' && typeof(rhs) === 'number') ? lhs + rhs : lhs['$+'](rhs);\n  }\n  function $rb_ge(lhs, rhs) {\n    return (typeof(lhs) === 'number' && typeof(rhs) === 'number') ? lhs >= rhs : lhs['$>='](rhs);\n  }\n  var self = Opal.top, $nesting = [], nil = Opal.nil, $$$ = Opal.$$$, $$ = Opal.$$, $module = Opal.module, $klass = Opal.klass, $send2 = Opal.send2, $truthy = Opal.truthy, $send = Opal.send;\n\n  return (function($base, $parent_nesting) {\n    var self = $module($base, 'BCDice');\n\n    var $nesting = [self].concat($parent_nesting);\n\n    (function($base, $parent_nesting) {\n      var self = $module($base, 'GameSystem');\n\n      var $nesting = [self].concat($parent_nesting);\n\n      (function($base, $super, $parent_nesting) {\n        var self = $klass($base, $super, 'BladeOfArcana');\n\n        var $nesting = [self].concat($parent_nesting), $BladeOfArcana_initialize$1, $BladeOfArcana_eval_game_system_specific_command$2, $BladeOfArcana_rollAct$3, $BladeOfArcana_tableText$4;\n\n        self.$$prototype.randomizer = nil;\n        \n        Opal.const_set($nesting[0], 'ID', \"BladeOfArcana\");\n        Opal.const_set($nesting[0], 'NAME', \"ブレイド・オブ・アルカナ\");\n        Opal.const_set($nesting[0], 'SORT_KEY', \"ふれいとおふあるかな\");\n        Opal.const_set($nesting[0], 'HELP_MESSAGE', \"\" + \"■行為判定　nA[m][Cx][Fy]\\n\" + \"　n：ダイス数　　m：判定値(省略時はクリティカル値と同じ)\\n\" + \"　x：クリティカル値(省略時は1)　　y：ファンブル値(省略時は20)\\n\" + \"　注）[m]、[Cx]、[Fy]は省略可能。\\n\" + \"　　例）3A12C4F15→3個振り12以下で成功。C値4、F値は15。\\n\" + \"　　例）3A12→3個振り12以下で成功。C値1、F値は20。\\n\" + \"\\n\" + \"■各種表　(+：出目2～21に変更　-：出目0～19に変更)\\n\" + \"●リインカーネイション\\n\" + \"　因縁表　CTR[+/-]　　前世邂逅表　DJV[-]\\n\" + \"　悪徳シーン表　AKST[+/-]\\n\" + \"●The 3rd（第三版）\\n\" + \"　因縁表　CT3[+/-]\\n\" + \"　注）[]内は省略可能。\\n\" + \"　　例）CTR→因縁表（R版）を出目1～20でロールする。\\n\" + \"　　例）CTR+→因縁表（R版）を出目2～21でロールする。\\n\");\n        self.$register_prefix(\"\\\\d+A\", \"CT3[\\\\+\\\\-]?\", \"CTR[\\\\+\\\\-]?\", \"DJV\\\\-?\", \"AKST[\\\\+\\\\-]?\");\n        \n        Opal.def(self, '$initialize', $BladeOfArcana_initialize$1 = function $$initialize(command) {\n          var $iter = $BladeOfArcana_initialize$1.$$p, $yield = $iter || nil, self = this;\n\n          if ($iter) $BladeOfArcana_initialize$1.$$p = null;\n          \n          $send2(self, Opal.find_super_dispatcher(self, 'initialize', $BladeOfArcana_initialize$1, false, true), 'initialize', [command], null);\n          return (self.sort_add_dice = true);\n        }, $BladeOfArcana_initialize$1.$$arity = 1);\n        \n        Opal.def(self, '$eval_game_system_specific_command', $BladeOfArcana_eval_game_system_specific_command$2 = function $$eval_game_system_specific_command(command) {\n          var self = this, $case = nil, counts = nil, judgment = nil, option1 = nil, argument1 = nil, option2 = nil, argument2 = nil, $ret_or_1 = nil, $ret_or_2 = nil, $ret_or_3 = nil, critical = nil, fumble = nil, sign = nil, title = nil, table = nil;\n\n          \n          $case = command.$upcase();\n          if (/^(\\d+)A(\\d*)([CF]?)(\\d*)([CF]?)(\\d*)$/['$===']($case)) {\n          counts = $$($nesting, 'Regexp').$last_match(1).$to_i();\n          judgment = $$($nesting, 'Regexp').$last_match(2).$to_i();\n          option1 = $$($nesting, 'Regexp').$last_match(3);\n          argument1 = $$($nesting, 'Regexp').$last_match(4);\n          option2 = $$($nesting, 'Regexp').$last_match(5);\n          argument2 = $$($nesting, 'Regexp').$last_match(6);\n          if ($truthy((function() {if ($truthy(($ret_or_1 = (function() {if ($truthy(($ret_or_2 = option1['$empty?']()['$!='](argument1['$empty?']())))) {\n            return $ret_or_2\n          } else {\n            \n            return option2['$empty?']()['$!='](argument2['$empty?']());\n          }; return nil; })()))) {\n            return $ret_or_1\n          } else {\n            \n            if ($truthy(($ret_or_3 = option2['$empty?']()['$!']()))) {\n              \n              return option1['$=='](option2);\n            } else {\n              return $ret_or_3\n            };\n          }; return nil; })())) {\n            return nil};\n          if (option1['$=='](\"C\")) {\n            \n            critical = argument1.$to_i();\n            fumble = argument2.$to_i();\n          } else {\n            \n            critical = argument2.$to_i();\n            fumble = argument1.$to_i();\n          };\n          return self.$rollAct(counts, judgment, critical, fumble);}\n          else if (/^CT3([+\\-]?)$/['$===']($case)) {\n          sign = $$($nesting, 'Regexp').$last_match(1);\n          title = \"因縁表(The 3rd)　『BoA3』P292\";\n          table = [\"【他生】\", \"【師弟】\", \"【忘却】\", \"【兄姉】\", \"【貸し】\", \"【慕情】\", \"【主従】\", \"【強敵】\", \"【秘密】\", \"【恩人】\", \"【告発】\", \"【友人】\", \"【仇敵】\", \"【父母】\", \"【借り】\", \"【信頼】\", \"【幼子】\", \"【取引】\", \"【地縁】\", \"【同志】\", \"【不審】\", \"【自身】\"];\n          return self.$tableText(title, table, sign);}\n          else if (/^CTR([+\\-]?)$/['$===']($case)) {\n          sign = $$($nesting, 'Regexp').$last_match(1);\n          title = \"因縁表(リインカーネイション)　『BAR』P51、299\";\n          table = [\"【他生】\", \"【師弟】\", \"【忘却】\", \"【兄姉】\", \"【貸し】\", \"【憧憬】\", \"【主従】\", \"【強敵】\", \"【秘密】\", \"【恩人】\", \"【取引】\", \"【友人】\", \"【怨敵】\", \"【後援】\", \"【借り】\", \"【信頼】\", \"【弟妹】\", \"【商売】\", \"【奇縁】\", \"【同志】\", \"【有為】\", \"【自身】\"];\n          return self.$tableText(title, table, sign);}\n          else if (/^DJV(-?)$/['$===']($case)) {\n          sign = $$($nesting, 'Regexp').$last_match(1);\n          title = \"前世邂逅表（デジャブ）　『BAR』P235\";\n          table = [\"【鮮烈な風】\\n風は懐かしい匂いを、香りを運んでくる。それは……。\", \"【薄暗い影】\\nまるで時が止まってしまっているかのようだ。\", \"【操りの糸】\\nそれはあなたを導く蜘蛛の糸。\", \"【天上の光】\\n偉大なるものがもたらす、天上からの御しるし。\", \"【温もり】\\n春のひなたのような温かさを感じる。\", \"【鋭いナイフ】\\n鋭いナイフのような視線を感じる。これは……。\", \"【共鳴】\\n同じ感覚を感じる、ふたりは通じ合っている。\", \"【城壁】\\n厳しく高い城壁のように重く堅く厚い。\", \"【砕ける器】\\n落ちれば砕ける。砕ければそれは器ではない。\", \"【陽炎】\\n求めれば揺らいで消える。\", \"【終わりなき円環】\\nそれはあなたを捉え巡る輪廻の輪。\", \"【天秤】\\n揺れるバランス、揺れ続ける安定。\", \"【流れる水】\\nひとつ所にとどまらず、姿を固めることはない\", \"【光る刃】\\n鋭く光る刃のような、鋭いまなざし。\", \"【悪魔】\\nあまりにも危険な魅力、それは悪魔的だった。\", \"【牙】\\n獲物を引き裂く鋭く長い、牙。\", \"【輝く星】\\n星は暗く小さい。だがそこに輝く。\", \"【冴え渡る月光】\\n冷たさと安らかさが同居している。\", \"【照りつける太陽】\\n暑い。\", \"【燃えさかる炎】\\n炎はすべてを破壊し、すべてを滅ぼす。\", \"【世界】\\nすべてはこの世界の中で起こり、終わる。\", \"【なし】\"];\n          return self.$tableText(title, table, sign);}\n          else if (/^AKST([+\\-]?)$/['$===']($case)) {\n          sign = $$($nesting, 'Regexp').$last_match(1);\n          title = \"悪徳シーン表　『GoV』P16、164\";\n          table = [\"▼ウェントス／止まない風\\n【行動】殺戮者の狂気に当てられたのか、通り魔的殺人者が現れる。切り裂かれた人々の悲鳴が響き渡る。\", \"▼エフェクトス／原初の力\\n【行動】殺戮者の配下が無法を働く。店先で金品を要求したり、暴力を振るったりしている。\", \"▼クレアータ／傀儡人形の王\\n【行動】殺戮者の配下が人々の行動を監視している。違反した者には即座に罰が与えられる。\", \"▼マーテル／生ける神\\n【行動】殺戮者の配下が人々に殺戮者への信仰を告白し、忠誠を宣誓するように強要している。\", \"▼コロナ／簒奪者\\n【行動】嘆き悲しんでいる者がいる。殺戮者によって、財産、地位、家族あるいは、恋人を奪い取られたという。\", \"▼フィニス／永遠の人\\n【行動】怪物が人々を虐殺している。この地には人間が多すぎるのだという。それが彼らの主の決定だ。\", \"▼エルス／無私なる愛\\n【行動】殺戮者の配下が略奪を働いている。どうやら、殺戮者に献上するものを争っているようだ。\", \"▼アダマス／万物の保護者\\n【行動】反逆者と名指しされる。人々は君たちに接触しようとしない。情報を集めるにも苦労しそうだ。\", \"▼アルドール／終わりなき戦い\\n【行動】ならず者の集団が人々を襲っている。力を示さなければ切り捨てられるのは彼らなのだ。\", \"▼ファンタスマ／謀略の渦\\n【行動】人々は君を見るなり逃げ出した。どうやら恐ろしい殺人者だと思われているようだ。\", \"▼アクシス／真理の探究者\\n【行動】殺戮者の配下の手によって、人々が連れ去られている。誰ひとりもどってこない。\", \"▼レクス／捕縛者\\n【行動】殺戮者への恐怖に駆られた人々はその命令にしたがって徒党を組み、PCたちを捜索している。\", \"▼アクア／澱んだ水\\n【行動】人々は獣のように生きている。言葉は通じない。有効なのは力、暴力だけだ。\", \"▼グラディウス／暗き死の刃\\n【行動】殺戮者とその配下によって虐殺が行なわれている。見渡す限り、死者ばかりだ。\", \"▼アングルス／純白の恐怖\\n【行動】遊びとして人間狩りが行なわれている。人々は逃げ惑い、殺戮者は愉悦に笑う。\", \"▼ディアボルス／悪魔の囁き\\n【行動】殺戮者は少年少女を召し上げている。召し上げられた者たちは音信不通となってしまう。\", \"▼フルキフェル／裏切り者\\n【行動】人々は猜疑の目で君を見る。嘘を吐くのが普通の場所で真実を見いだせるだろうか。\", \"▼ステラ／破滅への愛\\n【行動】街や村落が破壊されている。焼け野原の中、人々は力なくうずくまる。ここには絶望だけがあった。\", \"▼ルナ／奪う者\\n【行動】君たちの目の前に略奪が繰り返される。略奪のために略奪を行なう殺戮者の配下たち。\", \"▼デクストラ／邪悪な技\\n【行動】殺戮者による非道な人体実験が繰り返されている。そのための実験材料が集められている。\", \"▼イグニス／根源たる炎\\n【行動】街や集落、あるいは店舗や住宅が焼き討ちに合う。人々は互いに陥れ、磔刑が行なわれている。\", \"▼オービス／闇の鎖\\n【行動】世界の完全なる破滅、人類の絶滅、無作為で広範囲な虐殺が行なわれる。\"];\n          return self.$tableText(title, table, sign);};\n          return nil;\n        }, $BladeOfArcana_eval_game_system_specific_command$2.$$arity = 1);\n        \n        Opal.def(self, '$rollAct', $BladeOfArcana_rollAct$3 = function $$rollAct(counts, judgment, critical, fumble) {\n          var self = this, dice_list = nil, value = nil, string = nil, text = nil;\n\n          \n          \n          if (judgment == null) {\n            judgment = 0;\n          };\n          \n          if (critical == null) {\n            critical = 0;\n          };\n          \n          if (fumble == null) {\n            fumble = 0;\n          };\n          if ($truthy($rb_lt(critical, 1))) {\n            critical = 1};\n          if ($truthy($rb_le(judgment, 0))) {\n            judgment = critical\n          } else if ($truthy($rb_gt(critical, judgment))) {\n            critical = judgment};\n          if ($truthy($rb_le(fumble, 0))) {\n            fumble = 20};\n          if ($truthy($rb_le(counts, 0))) {\n            \n            counts = 1;\n            fumble = $rb_minus(fumble, 5);};\n          if ($truthy($rb_lt(fumble, 2))) {\n            fumble = 2\n          } else if ($truthy($rb_gt(fumble, 20))) {\n            fumble = 20};\n          dice_list = self.randomizer.$roll_barabara(counts, 20).$sort();\n          value = dice_list.$sum();\n          string = dice_list.$join(\",\");\n          text = \"\" + \"(\" + (counts) + \"A\" + (judgment) + \"C\" + (critical) + \"F\" + (fumble) + \") ＞ \" + (string) + \" ＞ \";\n          if (counts['$=='](1)) {\n          } else {\n            \n            value = $send(string.$split(\",\"), 'map', [], \"to_i\".$to_proc()).$min();\n            text = $rb_plus(text, \"\" + (value) + \" ＞ \");\n          };\n          if ($truthy($rb_ge(value, fumble))) {\n            text = $rb_plus(text, \"ファンブル\")\n          } else if ($truthy($rb_le(value, critical))) {\n            text = $rb_plus(text, \"クリティカル\")\n          } else if ($truthy($rb_gt(value, judgment))) {\n            text = $rb_plus(text, \"失敗\")\n          } else {\n            text = $rb_plus(text, \"成功\")\n          };\n          return text;\n        }, $BladeOfArcana_rollAct$3.$$arity = -2);\n        return (Opal.def(self, '$tableText', $BladeOfArcana_tableText$4 = function $$tableText(title, table, sign) {\n          var self = this, number = nil, index = nil, text = nil;\n\n          \n          \n          if (sign == null) {\n            sign = \"\";\n          };\n          number = self.randomizer.$roll_once(20);\n          index = number;\n          if (sign['$=='](\"+\")) {\n            index = $rb_plus(index, 1)\n          } else if (sign['$=='](\"-\")) {\n            index = $rb_minus(index, 1)};\n          text = \"\" + (title) + \" ＞ \" + (index);\n          if ($truthy(sign['$empty?']())) {\n          } else {\n            text = $rb_plus(text, \"\" + \"[\" + (number) + (sign) + \"1]\")\n          };\n          return $rb_plus($rb_plus(text, \" ＞ \"), table['$[]'](index));\n        }, $BladeOfArcana_tableText$4.$$arity = -3), nil) && 'tableText';\n      })($nesting[0], $$($nesting, 'Base'), $nesting)\n    })($nesting[0], $nesting)\n  })($nesting[0], $nesting)\n})(Opal);\n"],"sourceRoot":"webpack:///"}