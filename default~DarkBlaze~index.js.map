{"version":3,"sources":["./node_modules/bcdice/lib/bcdice/game_system/DarkBlaze.js"],"names":["require","Opal","modules","self","top","$nesting","nil","$$$","$$","$module","module","$base","$parent_nesting","concat","$Normalize_comparison_operator$1","$Normalize_target_number$2","$module_function","def","$$comparison_operator","op","$case","$$arity","$$target_number","val","$to_i","$rb_gt","lhs","rhs","$truthy","truthy","$Format_comparison_operator$1","$Format_modifier$2","$to_s","$$modifier","number","$rb_plus","$rb_lt","$rb_minus","$rb_le","$rb_ge","$rb_divide","$klass","klass","$send","send","$require","$super","$DarkBlaze_replace_text$1","$DarkBlaze_check_roll$7","$DarkBlaze_get_dice$8","$DarkBlaze_eval_game_system_specific_command$10","$DarkBlaze_get_horidasibukuro_table$11","$$prototype","randomizer","const_set","$register_prefix","$$replace_text","string","$$2","$$3","$$4","$$5","$$6","$$s","$last_match","$$check_roll","$a","$b","m","mod","abl","skl","signOfInequality","diff","cmp_op","total","out_str","output","$replace_text","$match","$eval","$comparison_operator","$get_dice","to_ary","$$get_dice","$$9","crit","fumble","dice_c","dice_arr","dice_str","resultText","$abs","$roll_barabara","$sort","$join","i","ch","$$eval_game_system_specific_command","command","dice","$ret_or_1","$get_horidasibukuro_table","$check_roll","$$get_horidasibukuro_table","material_kind","magic_stone","num1","num2","magic_stone_result","type","$roll_sum","$debug","$roll_once"],"mappings":";;;;;;;;;AAAAA,mBAAO,CAAC,uBAAD,CAAP;AAEA;;;AACAC,IAAI,CAACC,OAAL,CAAa,kBAAb,IAAmC,UAASD,IAAT,EAAe;AAChD,MAAIE,IAAI,GAAGF,IAAI,CAACG,GAAhB;AAAA,MAAqBC,QAAQ,GAAG,EAAhC;AAAA,MAAoCC,GAAG,GAAGL,IAAI,CAACK,GAA/C;AAAA,MAAoDC,GAAG,GAAGN,IAAI,CAACM,GAA/D;AAAA,MAAoEC,EAAE,GAAGP,IAAI,CAACO,EAA9E;AAAA,MAAkFC,OAAO,GAAGR,IAAI,CAACS,MAAjG;AAEA,SAAQ,UAASC,KAAT,EAAgBC,eAAhB,EAAiC;AACvC,QAAIT,IAAI,GAAGM,OAAO,CAACE,KAAD,EAAQ,QAAR,CAAlB;AAEA,QAAIN,QAAQ,GAAG,CAACF,IAAD,EAAOU,MAAP,CAAcD,eAAd,CAAf;;AAEA,KAAC,UAASD,KAAT,EAAgBC,eAAhB,EAAiC;AAChC,UAAIT,IAAI,GAAGM,OAAO,CAACE,KAAD,EAAQ,WAAR,CAAlB;AAEA,UAAIN,QAAQ,GAAG,CAACF,IAAD,EAAOU,MAAP,CAAcD,eAAd,CAAf;AAAA,UAA+CE,gCAA/C;AAAA,UAAiFC,0BAAjF;AAGAZ,UAAI,CAACa,gBAAL;AAEAf,UAAI,CAACgB,GAAL,CAASd,IAAT,EAAe,sBAAf,EAAuCW,gCAAgC,GAAG,SAASI,qBAAT,CAA+BC,EAA/B,EAAmC;AAC3G,YAAIhB,IAAI,GAAG,IAAX;AAAA,YAAiBiB,KAAK,GAAGd,GAAzB;AAEA,eAAQ,YAAW;AAACc,eAAK,GAAGD,EAAR;;AACpB,cAAI,QAAQ,MAAR,EAAgBC,KAAhB,CAAJ,EAA4B;AAAC,mBAAO,IAAP;AAAY,WAAzC,MACK,IAAI,QAAQ,MAAR,EAAgBA,KAAhB,CAAJ,EAA4B;AAAC,mBAAO,IAAP;AAAY,WAAzC,MACA,IAAI,WAAW,MAAX,EAAmBA,KAAnB,CAAJ,EAA+B;AAAC,mBAAO,IAAP;AAAY,WAA5C,MACA,IAAI,IAAI,MAAJ,EAAYA,KAAZ,CAAJ,EAAwB;AAAC,mBAAO,GAAP;AAAW,WAApC,MACA,IAAI,IAAI,MAAJ,EAAYA,KAAZ,CAAJ,EAAwB;AAAC,mBAAO,GAAP;AAAW,WAApC,MACA,IAAI,IAAI,MAAJ,EAAYA,KAAZ,CAAJ,EAAwB;AAAC,mBAAO,IAAP;AAAY,WAArC,MACA;AAAE,mBAAOd,GAAP;AAAY;AAAC,SAPb,EAAP;AAQD,OAXD,EAWGQ,gCAAgC,CAACO,OAAjC,GAA2C,CAX9C;AAaApB,UAAI,CAACgB,GAAL,CAASd,IAAT,EAAe,gBAAf,EAAiCY,0BAA0B,GAAG,SAASO,eAAT,CAAyBC,GAAzB,EAA8B;AAC1F,YAAIpB,IAAI,GAAG,IAAX;;AAEA,YAAIoB,GAAG,CAAC,KAAD,CAAH,CAAW,GAAX,CAAJ,EAAqB;AACnB,iBAAOA,GAAP;AACD,SAFD,MAEO;AACL,iBAAOA,GAAG,CAACC,KAAJ,EAAP;AACD;AACF,OARD,EAQGT,0BAA0B,CAACM,OAA3B,GAAqC,CARxC;AASD,KA9BD,EA8BGhB,QAAQ,CAAC,CAAD,CA9BX,EA8BgBA,QA9BhB;AA+BD,GApCM,CAoCJA,QAAQ,CAAC,CAAD,CApCJ,EAoCSA,QApCT,CAAP;AAqCD,CAxCD;AA0CA;;;AACAJ,IAAI,CAACC,OAAL,CAAa,eAAb,IAAgC,UAASD,IAAT,EAAe;AAC7C,WAASwB,MAAT,CAAgBC,GAAhB,EAAqBC,GAArB,EAA0B;AACxB,WAAQ,OAAOD,GAAP,KAAgB,QAAhB,IAA4B,OAAOC,GAAP,KAAgB,QAA7C,GAAyDD,GAAG,GAAGC,GAA/D,GAAqED,GAAG,CAAC,IAAD,CAAH,CAAUC,GAAV,CAA5E;AACD;;AACD,MAAIxB,IAAI,GAAGF,IAAI,CAACG,GAAhB;AAAA,MAAqBC,QAAQ,GAAG,EAAhC;AAAA,MAAoCC,GAAG,GAAGL,IAAI,CAACK,GAA/C;AAAA,MAAoDC,GAAG,GAAGN,IAAI,CAACM,GAA/D;AAAA,MAAoEC,EAAE,GAAGP,IAAI,CAACO,EAA9E;AAAA,MAAkFC,OAAO,GAAGR,IAAI,CAACS,MAAjG;AAAA,MAAyGkB,OAAO,GAAG3B,IAAI,CAAC4B,MAAxH;AAEA,SAAQ,UAASlB,KAAT,EAAgBC,eAAhB,EAAiC;AACvC,QAAIT,IAAI,GAAGM,OAAO,CAACE,KAAD,EAAQ,QAAR,CAAlB;AAEA,QAAIN,QAAQ,GAAG,CAACF,IAAD,EAAOU,MAAP,CAAcD,eAAd,CAAf;;AAEA,KAAC,UAASD,KAAT,EAAgBC,eAAhB,EAAiC;AAChC,UAAIT,IAAI,GAAGM,OAAO,CAACE,KAAD,EAAQ,QAAR,CAAlB;AAEA,UAAIN,QAAQ,GAAG,CAACF,IAAD,EAAOU,MAAP,CAAcD,eAAd,CAAf;AAAA,UAA+CkB,6BAA/C;AAAA,UAA8EC,kBAA9E;AAGA5B,UAAI,CAACa,gBAAL;AAEAf,UAAI,CAACgB,GAAL,CAASd,IAAT,EAAe,sBAAf,EAAuC2B,6BAA6B,GAAG,SAASZ,qBAAT,CAA+BC,EAA/B,EAAmC;AACxG,YAAIhB,IAAI,GAAG,IAAX;AAAA,YAAiBiB,KAAK,GAAGd,GAAzB;AAEA,eAAQ,YAAW;AAACc,eAAK,GAAGD,EAAR;;AACpB,cAAI,KAAK,MAAL,EAAaC,KAAb,CAAJ,EAAyB;AAAC,mBAAO,GAAP;AAAW,WAArC,MACK,IAAI,KAAK,MAAL,EAAaA,KAAb,CAAJ,EAAyB;AAAC,mBAAO,IAAP;AAAY,WAAtC,MACA,IAAIZ,EAAE,CAACH,QAAD,EAAW,QAAX,CAAF,CAAuB,MAAvB,EAA+Be,KAA/B,CAAJ,EAA2C;AAAC,mBAAOD,EAAE,CAACa,KAAH,EAAP;AAAkB,WAA9D,MACA;AAAE,mBAAO1B,GAAP;AAAY;AAAC,SAJb,EAAP;AAKD,OARD,EAQGwB,6BAA6B,CAACT,OAA9B,GAAwC,CAR3C;AAUApB,UAAI,CAACgB,GAAL,CAASd,IAAT,EAAe,WAAf,EAA4B4B,kBAAkB,GAAG,SAASE,UAAT,CAAoBC,MAApB,EAA4B;AAC3E,YAAI/B,IAAI,GAAG,IAAX;;AAEA,YAAIyB,OAAO,CAACM,MAAM,CAAC,OAAD,CAAN,EAAD,CAAX,EAAgC;AAC9B,iBAAO5B,GAAP;AACD,SAFD,MAEO,IAAI4B,MAAM,CAAC,KAAD,CAAN,CAAc,CAAd,CAAJ,EAAsB;AAC3B,iBAAO,EAAP;AACD,SAFM,MAEA,IAAIN,OAAO,CAACH,MAAM,CAACS,MAAD,EAAS,CAAT,CAAP,CAAX,EAAgC;AACrC,iBAAO,KAAK,GAAL,GAAYA,MAAnB;AACD,SAFM,MAEA;AACL,iBAAOA,MAAM,CAACF,KAAP,EAAP;AACD;AACF,OAZD,EAYGD,kBAAkB,CAACV,OAAnB,GAA6B,CAZhC;AAaD,KA/BD,EA+BGhB,QAAQ,CAAC,CAAD,CA/BX,EA+BgBA,QA/BhB;AAgCD,GArCM,CAqCJA,QAAQ,CAAC,CAAD,CArCJ,EAqCSA,QArCT,CAAP;AAsCD,CA5CD;AA8CA;;;AACA,CAAC,UAASJ,IAAT,EAAe;AACd,WAASkC,QAAT,CAAkBT,GAAlB,EAAuBC,GAAvB,EAA4B;AAC1B,WAAQ,OAAOD,GAAP,KAAgB,QAAhB,IAA4B,OAAOC,GAAP,KAAgB,QAA7C,GAAyDD,GAAG,GAAGC,GAA/D,GAAqED,GAAG,CAAC,IAAD,CAAH,CAAUC,GAAV,CAA5E;AACD;;AACD,WAASS,MAAT,CAAgBV,GAAhB,EAAqBC,GAArB,EAA0B;AACxB,WAAQ,OAAOD,GAAP,KAAgB,QAAhB,IAA4B,OAAOC,GAAP,KAAgB,QAA7C,GAAyDD,GAAG,GAAGC,GAA/D,GAAqED,GAAG,CAAC,IAAD,CAAH,CAAUC,GAAV,CAA5E;AACD;;AACD,WAASU,SAAT,CAAmBX,GAAnB,EAAwBC,GAAxB,EAA6B;AAC3B,WAAQ,OAAOD,GAAP,KAAgB,QAAhB,IAA4B,OAAOC,GAAP,KAAgB,QAA7C,GAAyDD,GAAG,GAAGC,GAA/D,GAAqED,GAAG,CAAC,IAAD,CAAH,CAAUC,GAAV,CAA5E;AACD;;AACD,WAASW,MAAT,CAAgBZ,GAAhB,EAAqBC,GAArB,EAA0B;AACxB,WAAQ,OAAOD,GAAP,KAAgB,QAAhB,IAA4B,OAAOC,GAAP,KAAgB,QAA7C,GAAyDD,GAAG,IAAIC,GAAhE,GAAsED,GAAG,CAAC,KAAD,CAAH,CAAWC,GAAX,CAA7E;AACD;;AACD,WAASY,MAAT,CAAgBb,GAAhB,EAAqBC,GAArB,EAA0B;AACxB,WAAQ,OAAOD,GAAP,KAAgB,QAAhB,IAA4B,OAAOC,GAAP,KAAgB,QAA7C,GAAyDD,GAAG,IAAIC,GAAhE,GAAsED,GAAG,CAAC,KAAD,CAAH,CAAWC,GAAX,CAA7E;AACD;;AACD,WAASa,UAAT,CAAoBd,GAApB,EAAyBC,GAAzB,EAA8B;AAC5B,WAAQ,OAAOD,GAAP,KAAgB,QAAhB,IAA4B,OAAOC,GAAP,KAAgB,QAA7C,GAAyDD,GAAG,GAAGC,GAA/D,GAAqED,GAAG,CAAC,IAAD,CAAH,CAAUC,GAAV,CAA5E;AACD;;AACD,MAAIxB,IAAI,GAAGF,IAAI,CAACG,GAAhB;AAAA,MAAqBC,QAAQ,GAAG,EAAhC;AAAA,MAAoCC,GAAG,GAAGL,IAAI,CAACK,GAA/C;AAAA,MAAoDC,GAAG,GAAGN,IAAI,CAACM,GAA/D;AAAA,MAAoEC,EAAE,GAAGP,IAAI,CAACO,EAA9E;AAAA,MAAkFC,OAAO,GAAGR,IAAI,CAACS,MAAjG;AAAA,MAAyG+B,MAAM,GAAGxC,IAAI,CAACyC,KAAvH;AAAA,MAA8Hd,OAAO,GAAG3B,IAAI,CAAC4B,MAA7I;AAAA,MAAqJc,KAAK,GAAG1C,IAAI,CAAC2C,IAAlK;AAGAzC,MAAI,CAAC0C,QAAL,CAAc,kBAAd;AACA1C,MAAI,CAAC0C,QAAL,CAAc,eAAd;AACA,SAAQ,UAASlC,KAAT,EAAgBC,eAAhB,EAAiC;AACvC,QAAIT,IAAI,GAAGM,OAAO,CAACE,KAAD,EAAQ,QAAR,CAAlB;AAEA,QAAIN,QAAQ,GAAG,CAACF,IAAD,EAAOU,MAAP,CAAcD,eAAd,CAAf;;AAEA,KAAC,UAASD,KAAT,EAAgBC,eAAhB,EAAiC;AAChC,UAAIT,IAAI,GAAGM,OAAO,CAACE,KAAD,EAAQ,YAAR,CAAlB;AAEA,UAAIN,QAAQ,GAAG,CAACF,IAAD,EAAOU,MAAP,CAAcD,eAAd,CAAf;;AAEA,OAAC,UAASD,KAAT,EAAgBmC,MAAhB,EAAwBlC,eAAxB,EAAyC;AACxC,YAAIT,IAAI,GAAGsC,MAAM,CAAC9B,KAAD,EAAQmC,MAAR,EAAgB,WAAhB,CAAjB;AAEA,YAAIzC,QAAQ,GAAG,CAACF,IAAD,EAAOU,MAAP,CAAcD,eAAd,CAAf;AAAA,YAA+CmC,yBAA/C;AAAA,YAA0EC,uBAA1E;AAAA,YAAmGC,qBAAnG;AAAA,YAA0HC,+CAA1H;AAAA,YAA2KC,sCAA3K;AAEAhD,YAAI,CAACiD,WAAL,CAAiBC,UAAjB,GAA8B/C,GAA9B;AAEAL,YAAI,CAACqD,SAAL,CAAejD,QAAQ,CAAC,CAAD,CAAvB,EAA4B,IAA5B,EAAkC,WAAlC;AACAJ,YAAI,CAACqD,SAAL,CAAejD,QAAQ,CAAC,CAAD,CAAvB,EAA4B,MAA5B,EAAoC,SAApC;AACAJ,YAAI,CAACqD,SAAL,CAAejD,QAAQ,CAAC,CAAD,CAAvB,EAA4B,UAA5B,EAAwC,SAAxC;AACAJ,YAAI,CAACqD,SAAL,CAAejD,QAAQ,CAAC,CAAD,CAAvB,EAA4B,cAA5B,EAA4C,KAAK,kBAAL,GAA0B,mBAA1B,GAAgD,kEAAhD,GAAqH,4BAArH,GAAoJ,iCAApJ,GAAwL,oEAAxL,GAA+P,IAA/P,GAAsQ,iBAAtQ,GAA0R,wCAA1R,GAAqU,4BAAjX;AACAF,YAAI,CAACoD,gBAAL,CAAsB,IAAtB,EAA4B,IAA5B,EAAkC,KAAlC;AAEAtD,YAAI,CAACgB,GAAL,CAASd,IAAT,EAAe,eAAf,EAAgC4C,yBAAyB,GAAG,SAASS,cAAT,CAAwBC,MAAxB,EAAgC;AAC1F,cAAIC,GAAJ;AAAA,cAASC,IAAT;AAAA,cAAcC,IAAd;AAAA,cAAmBC,IAAnB;AAAA,cAAwBC,IAAxB;AAAA,cAA6B3D,IAAI,GAAG,IAApC;;AAGA,cAAIyB,OAAO,CAAC6B,MAAM,CAAC,KAAD,CAAN,CAAc,KAAd,CAAD,CAAX,EAAmC,CAClC,CADD,MACO;AACL,mBAAOA,MAAP;AACD;;AAAA;AACDA,gBAAM,GAAGd,KAAK,CAACc,MAAD,EAAS,MAAT,EAAiB,CAAC,aAAD,CAAjB,GAAmCC,GAAG,GAAG,eAAU;AAAC,gBAAIvD,IAAI,GAAGuD,GAAG,CAACK,GAAJ,IAAW,IAAX,GAAkB,IAAlB,GAAyBL,GAAG,CAACK,GAAxC;AAElE,mBAAO,KAAK,IAAL,GAAavD,EAAE,CAACH,QAAD,EAAW,QAAX,CAAF,CAAuB2D,WAAvB,CAAmC,CAAnC,CAAb,GAAuDxD,EAAE,CAACH,QAAD,EAAW,QAAX,CAAF,CAAuB2D,WAAvB,CAAmC,CAAnC,CAA9D;AAAqG,WAFpD,EAEsDN,GAAG,CAACK,GAAJ,GAAU5D,IAFhE,EAEsEuD,GAAG,CAACrC,OAAJ,GAAc,CAFpF,EAEuFqC,GAF1H,EAAd;AAGAD,gBAAM,GAAGd,KAAK,CAACc,MAAD,EAAS,MAAT,EAAiB,CAAC,cAAD,CAAjB,GAAoCE,IAAG,GAAG,eAAU;AAAC,gBAAIxD,IAAI,GAAGwD,IAAG,CAACI,GAAJ,IAAW,IAAX,GAAkB,IAAlB,GAAyBJ,IAAG,CAACI,GAAxC;AAEnE,mBAAO,KAAK,IAAL,GAAavD,EAAE,CAACH,QAAD,EAAW,QAAX,CAAF,CAAuB2D,WAAvB,CAAmC,CAAnC,CAAb,GAAuDxD,EAAE,CAACH,QAAD,EAAW,QAAX,CAAF,CAAuB2D,WAAvB,CAAmC,CAAnC,CAA9D;AAAqG,WAFnD,EAEqDL,IAAG,CAACI,GAAJ,GAAU5D,IAF/D,EAEqEwD,IAAG,CAACtC,OAAJ,GAAc,CAFnF,EAEsFsC,IAF1H,EAAd;AAGAF,gBAAM,GAAGd,KAAK,CAACc,MAAD,EAAS,MAAT,EAAiB,CAAC,2BAAD,CAAjB,GAAiDG,IAAG,GAAG,eAAU;AAAC,gBAAIzD,IAAI,GAAGyD,IAAG,CAACG,GAAJ,IAAW,IAAX,GAAkB,IAAlB,GAAyBH,IAAG,CAACG,GAAxC;AAEhF,mBAAO,KAAK,MAAL,GAAevD,EAAE,CAACH,QAAD,EAAW,QAAX,CAAF,CAAuB2D,WAAvB,CAAmC,CAAnC,CAAf,GAAwD,GAAxD,GAA+DxD,EAAE,CAACH,QAAD,EAAW,QAAX,CAAF,CAAuB2D,WAAvB,CAAmC,CAAnC,CAA/D,GAAwG,GAAxG,GAA+GxD,EAAE,CAACH,QAAD,EAAW,QAAX,CAAF,CAAuB2D,WAAvB,CAAmC,CAAnC,CAA/G,GAAwJ,GAA/J;AAAmK,WAFpG,EAEsGJ,IAAG,CAACG,GAAJ,GAAU5D,IAFhH,EAEsHyD,IAAG,CAACvC,OAAJ,GAAc,CAFpI,EAEuIuC,IAFxL,EAAd;AAGAH,gBAAM,GAAGd,KAAK,CAACc,MAAD,EAAS,MAAT,EAAiB,CAAC,yBAAD,CAAjB,GAA+CI,IAAG,GAAG,eAAU;AAAC,gBAAI1D,IAAI,GAAG0D,IAAG,CAACE,GAAJ,IAAW,IAAX,GAAkB,IAAlB,GAAyBF,IAAG,CAACE,GAAxC;AAE9E,mBAAO,KAAK,KAAL,GAAcvD,EAAE,CAACH,QAAD,EAAW,QAAX,CAAF,CAAuB2D,WAAvB,CAAmC,CAAnC,CAAd,GAAuD,GAAvD,GAA8DxD,EAAE,CAACH,QAAD,EAAW,QAAX,CAAF,CAAuB2D,WAAvB,CAAmC,CAAnC,CAA9D,GAAuG,GAAvG,GAA8GxD,EAAE,CAACH,QAAD,EAAW,QAAX,CAAF,CAAuB2D,WAAvB,CAAmC,CAAnC,CAA9G,GAAuJ,GAA9J;AAAkK,WAFrG,EAEuGH,IAAG,CAACE,GAAJ,GAAU5D,IAFjH,EAEuH0D,IAAG,CAACxC,OAAJ,GAAc,CAFrI,EAEwIwC,IAFvL,EAAd;AAGAJ,gBAAM,GAAGd,KAAK,CAACc,MAAD,EAAS,MAAT,EAAiB,CAAC,YAAD,CAAjB,GAAkCK,IAAG,GAAG,eAAU;AAAC,gBAAI3D,IAAI,GAAG2D,IAAG,CAACC,GAAJ,IAAW,IAAX,GAAkB,IAAlB,GAAyBD,IAAG,CAACC,GAAxC;AAEjE,mBAAO,KAAK,MAAL,GAAevD,EAAE,CAACH,QAAD,EAAW,QAAX,CAAF,CAAuB2D,WAAvB,CAAmC,CAAnC,CAAf,GAAwD,GAAxD,GAA+DxD,EAAE,CAACH,QAAD,EAAW,QAAX,CAAF,CAAuB2D,WAAvB,CAAmC,CAAnC,CAA/D,GAAwG,GAA/G;AAAmH,WAFnE,EAEqEF,IAAG,CAACC,GAAJ,GAAU5D,IAF/E,EAEqF2D,IAAG,CAACzC,OAAJ,GAAc,CAFnG,EAEsGyC,IAFxI,EAAd;AAGA,iBAAOL,MAAP;AACD,SAxBD,EAwBGV,yBAAyB,CAAC1B,OAA1B,GAAoC,CAxBvC;AA0BApB,YAAI,CAACgB,GAAL,CAASd,IAAT,EAAe,aAAf,EAA8B6C,uBAAuB,GAAG,SAASiB,YAAT,CAAsBR,MAAtB,EAA8B;AACpF,cAAIS,EAAJ;AAAA,cAAQC,EAAR;AAAA,cAAYhE,IAAI,GAAG,IAAnB;AAAA,cAAyBiE,CAAC,GAAG9D,GAA7B;AAAA,cAAkC+D,GAAG,GAAG/D,GAAxC;AAAA,cAA6CgE,GAAG,GAAGhE,GAAnD;AAAA,cAAwDiE,GAAG,GAAGjE,GAA9D;AAAA,cAAmEkE,gBAAgB,GAAGlE,GAAtF;AAAA,cAA2FmE,IAAI,GAAGnE,GAAlG;AAAA,cAAuGoE,MAAM,GAAGpE,GAAhH;AAAA,cAAqHqE,KAAK,GAAGrE,GAA7H;AAAA,cAAkIsE,OAAO,GAAGtE,GAA5I;AAAA,cAAiJuE,MAAM,GAAGvE,GAA1J;AAGAmD,gBAAM,GAAGtD,IAAI,CAAC2E,aAAL,CAAmBrB,MAAnB,CAAT;;AACA,cAAI7B,OAAO,CAAEwC,CAAC,GAAG,qEAAqEW,MAArE,CAA4EtB,MAA5E,CAAN,CAAX,EAAwG,CACvG,CADD,MACO;AACL,mBAAOnD,GAAP;AACD;;AAAA;AACDmD,gBAAM,GAAGW,CAAC,CAAC,KAAD,CAAD,CAAS,CAAT,CAAT;AACAC,aAAG,GAAG,CAAN;AACAC,aAAG,GAAG,CAAN;AACAC,aAAG,GAAG,CAAN;AACAC,0BAAgB,GAAG,EAAnB;AACAC,cAAI,GAAG,CAAP;;AACA,cAAI7C,OAAO,CAACwC,CAAC,CAAC,KAAD,CAAD,CAAS,CAAT,CAAD,CAAX,EAA0B;AACxBC,eAAG,GAAG7D,EAAE,CAACH,QAAD,EAAW,qBAAX,CAAF,CAAoC2E,KAApC,CAA0CZ,CAAC,CAAC,KAAD,CAAD,CAAS,CAAT,CAA1C,CAAN;AAA6D;;AAAA;;AAC/D,cAAIxC,OAAO,CAACwC,CAAC,CAAC,KAAD,CAAD,CAAS,CAAT,CAAD,CAAX,EAA0B;AAExBE,eAAG,GAAGF,CAAC,CAAC,KAAD,CAAD,CAAS,CAAT,EAAY5C,KAAZ,EAAN;AACA+C,eAAG,GAAGH,CAAC,CAAC,KAAD,CAAD,CAAS,CAAT,EAAY5C,KAAZ,EAAN;AAA2B;;AAAA;;AAC7B,cAAII,OAAO,CAACwC,CAAC,CAAC,KAAD,CAAD,CAAS,CAAT,CAAD,CAAX,EAA0B;AAExBM,kBAAM,GAAGlE,EAAE,CAACH,QAAD,EAAW,WAAX,CAAF,CAA0B4E,oBAA1B,CAA+Cb,CAAC,CAAC,KAAD,CAAD,CAAS,CAAT,CAA/C,CAAT;AACAI,4BAAgB,GAAGhE,EAAE,CAACH,QAAD,EAAW,QAAX,CAAF,CAAuB4E,oBAAvB,CAA4CP,MAA5C,CAAnB;AACAD,gBAAI,GAAGL,CAAC,CAAC,KAAD,CAAD,CAAS,CAAT,EAAY5C,KAAZ,EAAP;AAA4B;;AAAA;AAC9B2C,YAAE,GAAGhE,IAAI,CAAC+E,SAAL,CAAeb,GAAf,EAAoBC,GAApB,EAAyBC,GAAzB,CAAL,EAAoCL,EAAE,GAAGjE,IAAI,CAACkF,MAAL,CAAYhB,EAAZ,CAAzC,EAA2DQ,KAAK,GAAIT,EAAE,CAAC,CAAD,CAAF,IAAS,IAAT,GAAgB5D,GAAhB,GAAsB4D,EAAE,CAAC,CAAD,CAA5F,EAAoGU,OAAO,GAAIV,EAAE,CAAC,CAAD,CAAF,IAAS,IAAT,GAAgB5D,GAAhB,GAAsB4D,EAAE,CAAC,CAAD,CAAvI,EAA8IC,EAA9I;AACAU,gBAAM,GAAG,KAAK,GAAL,GAAYpB,MAAZ,GAAsB,MAAtB,GAAgCmB,OAAzC;;AACA,cAAIhD,OAAO,CAAC4C,gBAAgB,CAAC,KAAD,CAAhB,CAAwB,EAAxB,CAAD,CAAX,EAA0C;AAExCE,kBAAM,GAAGlE,EAAE,CAACH,QAAD,EAAW,WAAX,CAAF,CAA0B4E,oBAA1B,CAA+CT,gBAA/C,CAAT;AACAK,kBAAM,GAAG1C,QAAQ,CAAC0C,MAAD,EAAU,YAAW;AAAC,kBAAIjD,OAAO,CAAC+C,KAAK,CAAChC,KAAN,CAAY+B,MAAZ,EAAoBD,IAApB,CAAD,CAAX,EAAwC;AAC7E,uBAAO,OAAP;AACD,eAFsC,MAEhC;AACL,uBAAO,OAAP;AACD;;AAAA;AAAE,qBAAOnE,GAAP;AAAa,aAJU,EAAT,CAAjB;AAIsB;;AAAA;AACxB,iBAAOuE,MAAP;AACD,SArCD,EAqCG7B,uBAAuB,CAAC3B,OAAxB,GAAkC,CArCrC;AAuCApB,YAAI,CAACgB,GAAL,CAASd,IAAT,EAAe,WAAf,EAA4B8C,qBAAqB,GAAG,SAASmC,UAAT,CAAoBf,GAApB,EAAyBC,GAAzB,EAA8BC,GAA9B,EAAmC;AACrF,cAAIc,IAAJ;AAAA,cAASlF,IAAI,GAAG,IAAhB;AAAA,cAAsBwE,KAAK,GAAGrE,GAA9B;AAAA,cAAmCgF,IAAI,GAAGhF,GAA1C;AAAA,cAA+CiF,MAAM,GAAGjF,GAAxD;AAAA,cAA6DkF,MAAM,GAAGlF,GAAtE;AAAA,cAA2EmF,QAAQ,GAAGnF,GAAtF;AAAA,cAA2FoF,QAAQ,GAAGpF,GAAtG;AAAA,cAA2GqF,UAAU,GAAGrF,GAAxH;AAAA,cAA6HuE,MAAM,GAAGvE,GAAtI;;AAGAqE,eAAK,GAAG,CAAR;AACAW,cAAI,GAAG,CAAP;AACAC,gBAAM,GAAG,CAAT;AACAC,gBAAM,GAAGrD,QAAQ,CAAC,CAAD,EAAIkC,GAAG,CAACuB,IAAJ,EAAJ,CAAjB;AACAH,kBAAQ,GAAGtF,IAAI,CAACkD,UAAL,CAAgBwC,cAAhB,CAA+BL,MAA/B,EAAuC,CAAvC,EAA0CM,KAA1C,EAAX;AACAJ,kBAAQ,GAAGD,QAAQ,CAACM,KAAT,CAAe,GAAf,CAAX;AACApD,eAAK,CAAE,CAAF,EAAM,OAAN,EAAe,EAAf,GAAoB0C,IAAG,GAAG,aAASW,CAAT,EAAW;AAAC,gBAAI7F,IAAI,GAAGkF,IAAG,CAACtB,GAAJ,IAAW,IAAX,GAAkB,IAAlB,GAAyBsB,IAAG,CAACtB,GAAxC;AAAA,gBAA6CkC,EAAE,GAAG3F,GAAlD;;AAIzC,gBAAI0F,CAAC,IAAI,IAAT,EAAe;AACbA,eAAC,GAAG1F,GAAJ;AACD;;AAAA;AACD2F,cAAE,GAAGR,QAAQ,CAAC,KAAD,CAAR,CAAgBO,CAAhB,CAAL;;AACA,gBAAIpE,OAAO,CAACQ,MAAM,CAACiC,GAAD,EAAM,CAAN,CAAP,CAAX,EAA6B;AAC3B4B,gBAAE,GAAGR,QAAQ,CAAC,KAAD,CAAR,CAAgBpD,SAAS,CAACA,SAAS,CAACmD,MAAD,EAASQ,CAAT,CAAV,EAAuB,CAAvB,CAAzB,CAAL;AAAyD;;AAAA;;AAC3D,gBAAIpE,OAAO,CAACU,MAAM,CAAC2D,EAAD,EAAK3B,GAAL,CAAP,CAAX,EAA8B;AAC5BK,mBAAK,GAAGxC,QAAQ,CAACwC,KAAD,EAAQ,CAAR,CAAhB;AAA2B;;AAAA;;AAC7B,gBAAI/C,OAAO,CAACU,MAAM,CAAC2D,EAAD,EAAK1B,GAAL,CAAP,CAAX,EAA8B;AAC5BI,mBAAK,GAAGxC,QAAQ,CAACwC,KAAD,EAAQ,CAAR,CAAhB;AAA2B;;AAAA;;AAC7B,gBAAI/C,OAAO,CAACU,MAAM,CAAC2D,EAAD,EAAK,CAAL,CAAP,CAAX,EAA4B;AAC1BX,kBAAI,GAAGnD,QAAQ,CAACmD,IAAD,EAAO,CAAP,CAAf;AAAyB;;AAAA;;AAC3B,gBAAI1D,OAAO,CAACW,MAAM,CAAC0D,EAAD,EAAK,CAAL,CAAP,CAAX,EAA4B;AAC1B,qBAAQV,MAAM,GAAGpD,QAAQ,CAACoD,MAAD,EAAS,CAAT,CAAzB;AACD,aAFD,MAEO;AACL,qBAAOjF,GAAP;AACD;;AAAA;AAAE,WApBoB,EAoBlB+E,IAAG,CAACtB,GAAJ,GAAU5D,IApBQ,EAoBFkF,IAAG,CAAChE,OAAJ,GAAc,CApBZ,EAoBegE,IApBnC,EAAL;AAqBAM,oBAAU,GAAG,EAAb;;AACA,cAAI/D,OAAO,CAACW,MAAM,CAAC+C,IAAD,EAAO,CAAP,CAAP,CAAX,EAA8B;AAE5BK,sBAAU,GAAG,WAAb;AACAhB,iBAAK,GAAGxC,QAAQ,CAAC,CAAD,EAAIoC,GAAJ,CAAhB;AAA0B;;AAAA;;AAC5B,cAAI3C,OAAO,CAACW,MAAM,CAACgD,MAAD,EAAS,CAAT,CAAP,CAAX,EAAgC;AAE9BI,sBAAU,GAAG,UAAb;AACAhB,iBAAK,GAAG,CAAR;AAAW;;AAAA;AACbE,gBAAM,GAAG,KAAMF,KAAN,GAAe,GAAf,GAAsBe,QAAtB,GAAkC,GAAlC,GAAyCC,UAAlD;AACA,iBAAO,CAAChB,KAAD,EAAQE,MAAR,CAAP;AACD,SA1CD,EA0CG5B,qBAAqB,CAAC5B,OAAtB,GAAgC,CA1CnC;AA4CApB,YAAI,CAACgB,GAAL,CAASd,IAAT,EAAe,oCAAf,EAAqD+C,+CAA+C,GAAG,SAASgD,mCAAT,CAA6CC,OAA7C,EAAsD;AAC3J,cAAIjC,EAAJ;AAAA,cAAQ/D,IAAI,GAAG,IAAf;AAAA,cAAqBiE,CAAC,GAAG9D,GAAzB;AAAA,cAA8B8F,IAAI,GAAG9F,GAArC;AAAA,cAA0C+F,SAAS,GAAG/F,GAAtD;;AAGA,cAAIsB,OAAO,CAAEwC,CAAC,GAAG,aAAaW,MAAb,CAAoBoB,OAApB,CAAN,CAAX,EAAiD;AAE/CC,gBAAI,GAAI,YAAW;AAAC,kBAAIxE,OAAO,CAAEyE,SAAS,IAAInC,EAAE,GAAGE,CAAC,CAAC,KAAD,CAAD,CAAS,CAAT,CAAL,EAAmBF,EAAE,KAAK5D,GAAP,IAAc4D,EAAE,IAAI,IAArB,GAA6B5D,GAA7B,GAAmCqC,KAAK,CAACuB,EAAD,EAAK,MAAL,EAAa,EAAb,CAA9D,CAAX,CAAX,EAAyG;AAC3H,uBAAOmC,SAAP;AACD,eAFmB,MAEb;AACL,uBAAO,CAAP;AACD;;AAAA;AAAE,qBAAO/F,GAAP;AAAa,aAJT,EAAP;;AAKA,mBAAOH,IAAI,CAACmG,yBAAL,CAA+BF,IAA/B,CAAP;AAA6C;;AAAA;AAC/C,iBAAOjG,IAAI,CAACoG,WAAL,CAAiBJ,OAAjB,CAAP;AACD,SAbD,EAaGjD,+CAA+C,CAAC7B,OAAhD,GAA0D,CAb7D;AAcA,eAAO,CAACpB,IAAI,CAACgB,GAAL,CAASd,IAAT,EAAe,2BAAf,EAA4CgD,sCAAsC,GAAG,SAASqD,0BAAT,CAAoCJ,IAApC,EAA0C;AACrI,cAAIjG,IAAI,GAAG,IAAX;AAAA,cAAiB0E,MAAM,GAAGvE,GAA1B;AAAA,cAA+BmG,aAAa,GAAGnG,GAA/C;AAAA,cAAoDoG,WAAW,GAAGpG,GAAlE;AAAA,cAAuEqG,IAAI,GAAGrG,GAA9E;AAAA,cAAmFsG,IAAI,GAAGtG,GAA1F;AAAA,cAA+FuG,kBAAkB,GAAGvG,GAApH;AAAA,cAAyHwG,IAAI,GAAGxG,GAAhI;AAGAuE,gBAAM,GAAG,GAAT;AACA4B,uBAAa,GAAG,CAAC,IAAD,EAAO,IAAP,EAAa,IAAb,EAAmB,IAAnB,EAAyB,IAAzB,EAA+B,IAA/B,EAAqC,MAArC,EAA6C,MAA7C,CAAhB;AACAC,qBAAW,GAAG,CAAC,KAAD,EAAQ,KAAR,EAAe,KAAf,CAAd;AACAC,cAAI,GAAGxG,IAAI,CAACkD,UAAL,CAAgB0D,SAAhB,CAA0B,CAA1B,EAA6B,CAA7B,CAAP;AACAH,cAAI,GAAGzG,IAAI,CAACkD,UAAL,CAAgB0D,SAAhB,CAA0BX,IAA1B,EAAgC,CAAhC,CAAP;AACAjG,cAAI,CAAC6G,MAAL,CAAY,MAAZ,EAAoBZ,IAApB;AACAjG,cAAI,CAAC6G,MAAL,CAAY,MAAZ,EAAoBL,IAApB;AACAxG,cAAI,CAAC6G,MAAL,CAAY,MAAZ,EAAoBJ,IAApB;;AACA,cAAIhF,OAAO,CAACU,MAAM,CAACqE,IAAD,EAAO,CAAP,CAAP,CAAX,EAA8B;AAE5BC,gBAAI,GAAGzG,IAAI,CAACkD,UAAL,CAAgB4D,UAAhB,CAA2B,CAA3B,CAAP;AACAJ,8BAAkB,GAAGH,WAAW,CAAC,KAAD,CAAX,CAAmBrE,SAAS,CAACG,UAAU,CAACoE,IAAD,EAAO,CAAP,CAAV,CAAoBpF,KAApB,EAAD,EAA8B,CAA9B,CAA5B,CAArB;AACAqD,kBAAM,GAAG,KAAK,GAAL,GAAYgC,kBAAZ,GAAkC,IAAlC,GAA0CT,IAA1C,GAAkD,KAA3D;AACD,WALD,MAKO,IAAIO,IAAI,CAAC,KAAD,CAAJ,CAAY,CAAZ,CAAJ,EAAoB;AACzB9B,kBAAM,GAAG,KAAK,OAAL,GAAgB+B,IAAhB,GAAwB,KAAjC;AACD,WAFM,MAEA;AAELE,gBAAI,GAAGL,aAAa,CAAC,KAAD,CAAb,CAAqBpE,SAAS,CAACsE,IAAD,EAAO,CAAP,CAA9B,CAAP;;AACA,gBAAI/E,OAAO,CAACU,MAAM,CAACsE,IAAD,EAAO,CAAP,CAAP,CAAX,EAA8B;AAC5B/B,oBAAM,GAAG,KAAK,GAAL,GAAYiC,IAAZ,GAAoB,UAA7B;AACD,aAFD,MAEO,IAAIlF,OAAO,CAACU,MAAM,CAACsE,IAAD,EAAO,CAAP,CAAP,CAAX,EAA8B;AACnC/B,oBAAM,GAAG,KAAK,GAAL,GAAYiC,IAAZ,GAAoB,UAA7B;AACD,aAFM,MAEA,IAAIlF,OAAO,CAACU,MAAM,CAACsE,IAAD,EAAO,CAAP,CAAP,CAAX,EAA8B;AACnC/B,oBAAM,GAAG,KAAK,GAAL,GAAYiC,IAAZ,GAAoB,UAA7B;AACD,aAFM,MAEA,IAAIlF,OAAO,CAACU,MAAM,CAACsE,IAAD,EAAO,CAAP,CAAP,CAAX,EAA8B;AACnC/B,oBAAM,GAAG,KAAK,GAAL,GAAYiC,IAAZ,GAAoB,WAA7B;AACD,aAFM,MAEA,IAAIlF,OAAO,CAACU,MAAM,CAACsE,IAAD,EAAO,EAAP,CAAP,CAAX,EAA+B;AACpC/B,oBAAM,GAAG,KAAK,GAAL,GAAYiC,IAAZ,GAAoB,SAApB,GAAiCA,IAAjC,GAAyC,WAAlD;AACD,aAFM,MAEA,IAAIlF,OAAO,CAACU,MAAM,CAACsE,IAAD,EAAO,EAAP,CAAP,CAAX,EAA+B;AACpC/B,oBAAM,GAAG,KAAK,GAAL,GAAYiC,IAAZ,GAAoB,SAApB,GAAiCA,IAAjC,GAAyC,WAAlD;AACD,aAFM,MAEA,IAAIlF,OAAO,CAACU,MAAM,CAACsE,IAAD,EAAO,EAAP,CAAP,CAAX,EAA+B;AACpC/B,oBAAM,GAAG,KAAK,GAAL,GAAYiC,IAAZ,GAAoB,YAA7B;AACD,aAFM,MAEA,IAAIlF,OAAO,CAACU,MAAM,CAACsE,IAAD,EAAO,EAAP,CAAP,CAAX,EAA+B;AACpC/B,oBAAM,GAAG,KAAK,GAAL,GAAYiC,IAAZ,GAAoB,UAApB,GAAkCA,IAAlC,GAA0C,YAAnD;AACD,aAFM,MAEA;AACLjC,oBAAM,GAAG,KAAK,GAAL,GAAYiC,IAAZ,GAAoB,UAApB,GAAkCA,IAAlC,GAA0C,YAAnD;AACD;;AAAA;AACF;;AAAA;;AACD,cAAIlF,OAAO,CAACiD,MAAM,CAAC,KAAD,CAAN,CAAc,GAAd,CAAD,CAAX,EAAiC;AAC/BA,kBAAM,GAAG,KAAK,SAAL,GAAkB8B,IAAlB,GAA0B,GAA1B,GAAiCC,IAAjC,GAAyC,MAAzC,GAAmD/B,MAA5D;AAAoE;;AAAA;AACtE,iBAAOA,MAAP;AACD,SA7CO,EA6CL1B,sCAAsC,CAAC9B,OAAvC,GAAiD,CA7C5C,GA6CgDf,GA7CjD,KA6CyD,0BA7ChE;AA8CD,OAtLD,EAsLGD,QAAQ,CAAC,CAAD,CAtLX,EAsLgBG,EAAE,CAACH,QAAD,EAAW,MAAX,CAtLlB,EAsLsCA,QAtLtC;AAuLD,KA5LD,EA4LGA,QAAQ,CAAC,CAAD,CA5LX,EA4LgBA,QA5LhB;AA6LD,GAlMM,CAkMJA,QAAQ,CAAC,CAAD,CAlMJ,EAkMSA,QAlMT,CAAP;AAmMD,CA3ND,EA2NGJ,IA3NH,E","file":"default~DarkBlaze~index.js","sourcesContent":["require('./../opal');\n\n/* Generated by Opal 1.1.1 */\nOpal.modules[\"bcdice/normalize\"] = function(Opal) {\n  var self = Opal.top, $nesting = [], nil = Opal.nil, $$$ = Opal.$$$, $$ = Opal.$$, $module = Opal.module;\n\n  return (function($base, $parent_nesting) {\n    var self = $module($base, 'BCDice');\n\n    var $nesting = [self].concat($parent_nesting);\n\n    (function($base, $parent_nesting) {\n      var self = $module($base, 'Normalize');\n\n      var $nesting = [self].concat($parent_nesting), $Normalize_comparison_operator$1, $Normalize_target_number$2;\n\n      \n      self.$module_function();\n      \n      Opal.def(self, '$comparison_operator', $Normalize_comparison_operator$1 = function $$comparison_operator(op) {\n        var self = this, $case = nil;\n\n        return (function() {$case = op;\n        if (/<=|=</['$===']($case)) {return \"<=\"}\n        else if (/>=|=>/['$===']($case)) {return \">=\"}\n        else if (/<>|!=|=!/['$===']($case)) {return \"!=\"}\n        else if (/</['$===']($case)) {return \"<\"}\n        else if (/>/['$===']($case)) {return \">\"}\n        else if (/=/['$===']($case)) {return \"==\"}\n        else { return nil }})()\n      }, $Normalize_comparison_operator$1.$$arity = 1);\n      \n      Opal.def(self, '$target_number', $Normalize_target_number$2 = function $$target_number(val) {\n        var self = this;\n\n        if (val['$=='](\"?\")) {\n          return val\n        } else {\n          return val.$to_i()\n        }\n      }, $Normalize_target_number$2.$$arity = 1);\n    })($nesting[0], $nesting)\n  })($nesting[0], $nesting)\n};\n\n/* Generated by Opal 1.1.1 */\nOpal.modules[\"bcdice/format\"] = function(Opal) {\n  function $rb_gt(lhs, rhs) {\n    return (typeof(lhs) === 'number' && typeof(rhs) === 'number') ? lhs > rhs : lhs['$>'](rhs);\n  }\n  var self = Opal.top, $nesting = [], nil = Opal.nil, $$$ = Opal.$$$, $$ = Opal.$$, $module = Opal.module, $truthy = Opal.truthy;\n\n  return (function($base, $parent_nesting) {\n    var self = $module($base, 'BCDice');\n\n    var $nesting = [self].concat($parent_nesting);\n\n    (function($base, $parent_nesting) {\n      var self = $module($base, 'Format');\n\n      var $nesting = [self].concat($parent_nesting), $Format_comparison_operator$1, $Format_modifier$2;\n\n      \n      self.$module_function();\n      \n      Opal.def(self, '$comparison_operator', $Format_comparison_operator$1 = function $$comparison_operator(op) {\n        var self = this, $case = nil;\n\n        return (function() {$case = op;\n        if (\"==\"['$===']($case)) {return \"=\"}\n        else if (\"!=\"['$===']($case)) {return \"<>\"}\n        else if ($$($nesting, 'Symbol')['$===']($case)) {return op.$to_s()}\n        else { return nil }})()\n      }, $Format_comparison_operator$1.$$arity = 1);\n      \n      Opal.def(self, '$modifier', $Format_modifier$2 = function $$modifier(number) {\n        var self = this;\n\n        if ($truthy(number['$nil?']())) {\n          return nil\n        } else if (number['$=='](0)) {\n          return \"\"\n        } else if ($truthy($rb_gt(number, 0))) {\n          return \"\" + \"+\" + (number)\n        } else {\n          return number.$to_s()\n        }\n      }, $Format_modifier$2.$$arity = 1);\n    })($nesting[0], $nesting)\n  })($nesting[0], $nesting)\n};\n\n/* Generated by Opal 1.1.1 */\n(function(Opal) {\n  function $rb_plus(lhs, rhs) {\n    return (typeof(lhs) === 'number' && typeof(rhs) === 'number') ? lhs + rhs : lhs['$+'](rhs);\n  }\n  function $rb_lt(lhs, rhs) {\n    return (typeof(lhs) === 'number' && typeof(rhs) === 'number') ? lhs < rhs : lhs['$<'](rhs);\n  }\n  function $rb_minus(lhs, rhs) {\n    return (typeof(lhs) === 'number' && typeof(rhs) === 'number') ? lhs - rhs : lhs['$-'](rhs);\n  }\n  function $rb_le(lhs, rhs) {\n    return (typeof(lhs) === 'number' && typeof(rhs) === 'number') ? lhs <= rhs : lhs['$<='](rhs);\n  }\n  function $rb_ge(lhs, rhs) {\n    return (typeof(lhs) === 'number' && typeof(rhs) === 'number') ? lhs >= rhs : lhs['$>='](rhs);\n  }\n  function $rb_divide(lhs, rhs) {\n    return (typeof(lhs) === 'number' && typeof(rhs) === 'number') ? lhs / rhs : lhs['$/'](rhs);\n  }\n  var self = Opal.top, $nesting = [], nil = Opal.nil, $$$ = Opal.$$$, $$ = Opal.$$, $module = Opal.module, $klass = Opal.klass, $truthy = Opal.truthy, $send = Opal.send;\n\n  \n  self.$require(\"bcdice/normalize\");\n  self.$require(\"bcdice/format\");\n  return (function($base, $parent_nesting) {\n    var self = $module($base, 'BCDice');\n\n    var $nesting = [self].concat($parent_nesting);\n\n    (function($base, $parent_nesting) {\n      var self = $module($base, 'GameSystem');\n\n      var $nesting = [self].concat($parent_nesting);\n\n      (function($base, $super, $parent_nesting) {\n        var self = $klass($base, $super, 'DarkBlaze');\n\n        var $nesting = [self].concat($parent_nesting), $DarkBlaze_replace_text$1, $DarkBlaze_check_roll$7, $DarkBlaze_get_dice$8, $DarkBlaze_eval_game_system_specific_command$10, $DarkBlaze_get_horidasibukuro_table$11;\n\n        self.$$prototype.randomizer = nil;\n        \n        Opal.const_set($nesting[0], 'ID', \"DarkBlaze\");\n        Opal.const_set($nesting[0], 'NAME', \"ダークブレイズ\");\n        Opal.const_set($nesting[0], 'SORT_KEY', \"たあくふれいす\");\n        Opal.const_set($nesting[0], 'HELP_MESSAGE', \"\" + \"・行為判定　(DBxy#n)\\n\" + \"　行為判定専用のコマンドです。\\n\" + \"　\\\"DB(能力)(技能)#(修正)\\\"でロールします。Rコマンド(3R6+n[x,y]>=m mは難易度)に読替をします。\\n\" + \"　クリティカルとファンブルも自動で処理されます。\\n\" + \"　DB@x@y#m と DBx,y#m にも対応しました。\\n\" + \"　例）DB33　　　DB32#-1　　　DB@3@1#1　　　DB3,2　　　DB23#1>=4　　　3R6+1[3,3]>=4\\n\" + \"\\n\" + \"・掘り出し袋表　(BTx)\\n\" + \"　\\\"BT(ダイス数)\\\"で掘り出し袋表を自動で振り、結果を表示します。\\n\" + \"　例）BT1　　　BT2　　　BT[1...3]\\n\");\n        self.$register_prefix(\"DB\", \"BT\", \"3R6\");\n        \n        Opal.def(self, '$replace_text', $DarkBlaze_replace_text$1 = function $$replace_text(string) {\n          var $$2, $$3, $$4, $$5, $$6, self = this;\n\n          \n          if ($truthy(string['$=~'](/DB/i))) {\n          } else {\n            return string\n          };\n          string = $send(string, 'gsub', [/DB(\\d),(\\d)/], ($$2 = function(){var self = $$2.$$s == null ? this : $$2.$$s;\n\n          return \"\" + \"DB\" + ($$($nesting, 'Regexp').$last_match(1)) + ($$($nesting, 'Regexp').$last_match(2))}, $$2.$$s = self, $$2.$$arity = 0, $$2));\n          string = $send(string, 'gsub', [/DB@(\\d)@(\\d)/], ($$3 = function(){var self = $$3.$$s == null ? this : $$3.$$s;\n\n          return \"\" + \"DB\" + ($$($nesting, 'Regexp').$last_match(1)) + ($$($nesting, 'Regexp').$last_match(2))}, $$3.$$s = self, $$3.$$arity = 0, $$3));\n          string = $send(string, 'gsub', [/DB(\\d)(\\d)(#(\\d[+\\-\\d]*))/], ($$4 = function(){var self = $$4.$$s == null ? this : $$4.$$s;\n\n          return \"\" + \"3R6+\" + ($$($nesting, 'Regexp').$last_match(4)) + \"[\" + ($$($nesting, 'Regexp').$last_match(1)) + \",\" + ($$($nesting, 'Regexp').$last_match(2)) + \"]\"}, $$4.$$s = self, $$4.$$arity = 0, $$4));\n          string = $send(string, 'gsub', [/DB(\\d)(\\d)(#([+\\-\\d]*))/], ($$5 = function(){var self = $$5.$$s == null ? this : $$5.$$s;\n\n          return \"\" + \"3R6\" + ($$($nesting, 'Regexp').$last_match(4)) + \"[\" + ($$($nesting, 'Regexp').$last_match(1)) + \",\" + ($$($nesting, 'Regexp').$last_match(2)) + \"]\"}, $$5.$$s = self, $$5.$$arity = 0, $$5));\n          string = $send(string, 'gsub', [/DB(\\d)(\\d)/], ($$6 = function(){var self = $$6.$$s == null ? this : $$6.$$s;\n\n          return \"\" + \"3R6[\" + ($$($nesting, 'Regexp').$last_match(1)) + \",\" + ($$($nesting, 'Regexp').$last_match(2)) + \"]\"}, $$6.$$s = self, $$6.$$arity = 0, $$6));\n          return string;\n        }, $DarkBlaze_replace_text$1.$$arity = 1);\n        \n        Opal.def(self, '$check_roll', $DarkBlaze_check_roll$7 = function $$check_roll(string) {\n          var $a, $b, self = this, m = nil, mod = nil, abl = nil, skl = nil, signOfInequality = nil, diff = nil, cmp_op = nil, total = nil, out_str = nil, output = nil;\n\n          \n          string = self.$replace_text(string);\n          if ($truthy((m = /(^|\\s)S?(3[rR]6([+\\-\\d]+)?(\\[(\\d+),(\\d+)\\])(([>=]+)(\\d+))?)(\\s|$)/i.$match(string)))) {\n          } else {\n            return nil\n          };\n          string = m['$[]'](2);\n          mod = 0;\n          abl = 1;\n          skl = 1;\n          signOfInequality = \"\";\n          diff = 0;\n          if ($truthy(m['$[]'](3))) {\n            mod = $$($nesting, 'ArithmeticEvaluator').$eval(m['$[]'](3))};\n          if ($truthy(m['$[]'](4))) {\n            \n            abl = m['$[]'](5).$to_i();\n            skl = m['$[]'](6).$to_i();};\n          if ($truthy(m['$[]'](7))) {\n            \n            cmp_op = $$($nesting, 'Normalize').$comparison_operator(m['$[]'](8));\n            signOfInequality = $$($nesting, 'Format').$comparison_operator(cmp_op);\n            diff = m['$[]'](9).$to_i();};\n          $b = self.$get_dice(mod, abl, skl), $a = Opal.to_ary($b), (total = ($a[0] == null ? nil : $a[0])), (out_str = ($a[1] == null ? nil : $a[1])), $b;\n          output = \"\" + \"(\" + (string) + \") ＞ \" + (out_str);\n          if ($truthy(signOfInequality['$!='](\"\"))) {\n            \n            cmp_op = $$($nesting, 'Normalize').$comparison_operator(signOfInequality);\n            output = $rb_plus(output, (function() {if ($truthy(total.$send(cmp_op, diff))) {\n              return \" ＞ 成功\"\n            } else {\n              return \" ＞ 失敗\"\n            }; return nil; })());};\n          return output;\n        }, $DarkBlaze_check_roll$7.$$arity = 1);\n        \n        Opal.def(self, '$get_dice', $DarkBlaze_get_dice$8 = function $$get_dice(mod, abl, skl) {\n          var $$9, self = this, total = nil, crit = nil, fumble = nil, dice_c = nil, dice_arr = nil, dice_str = nil, resultText = nil, output = nil;\n\n          \n          total = 0;\n          crit = 0;\n          fumble = 0;\n          dice_c = $rb_plus(3, mod.$abs());\n          dice_arr = self.randomizer.$roll_barabara(dice_c, 6).$sort();\n          dice_str = dice_arr.$join(\",\");\n          $send((3), 'times', [], ($$9 = function(i){var self = $$9.$$s == null ? this : $$9.$$s, ch = nil;\n\n          \n            \n            if (i == null) {\n              i = nil;\n            };\n            ch = dice_arr['$[]'](i);\n            if ($truthy($rb_lt(mod, 0))) {\n              ch = dice_arr['$[]']($rb_minus($rb_minus(dice_c, i), 1))};\n            if ($truthy($rb_le(ch, abl))) {\n              total = $rb_plus(total, 1)};\n            if ($truthy($rb_le(ch, skl))) {\n              total = $rb_plus(total, 1)};\n            if ($truthy($rb_le(ch, 2))) {\n              crit = $rb_plus(crit, 1)};\n            if ($truthy($rb_ge(ch, 5))) {\n              return (fumble = $rb_plus(fumble, 1))\n            } else {\n              return nil\n            };}, $$9.$$s = self, $$9.$$arity = 1, $$9));\n          resultText = \"\";\n          if ($truthy($rb_ge(crit, 3))) {\n            \n            resultText = \" ＞ クリティカル\";\n            total = $rb_plus(6, skl);};\n          if ($truthy($rb_ge(fumble, 3))) {\n            \n            resultText = \" ＞ ファンブル\";\n            total = 0;};\n          output = \"\" + (total) + \"[\" + (dice_str) + \"]\" + (resultText);\n          return [total, output];\n        }, $DarkBlaze_get_dice$8.$$arity = 3);\n        \n        Opal.def(self, '$eval_game_system_specific_command', $DarkBlaze_eval_game_system_specific_command$10 = function $$eval_game_system_specific_command(command) {\n          var $a, self = this, m = nil, dice = nil, $ret_or_1 = nil;\n\n          \n          if ($truthy((m = /^BT(\\d)?$/i.$match(command)))) {\n            \n            dice = (function() {if ($truthy(($ret_or_1 = ($a = m['$[]'](1), ($a === nil || $a == null) ? nil : $send($a, 'to_i', []))))) {\n              return $ret_or_1\n            } else {\n              return 1\n            }; return nil; })();\n            return self.$get_horidasibukuro_table(dice);};\n          return self.$check_roll(command);\n        }, $DarkBlaze_eval_game_system_specific_command$10.$$arity = 1);\n        return (Opal.def(self, '$get_horidasibukuro_table', $DarkBlaze_get_horidasibukuro_table$11 = function $$get_horidasibukuro_table(dice) {\n          var self = this, output = nil, material_kind = nil, magic_stone = nil, num1 = nil, num2 = nil, magic_stone_result = nil, type = nil;\n\n          \n          output = \"1\";\n          material_kind = [\"蟲甲\", \"金属\", \"金貨\", \"植物\", \"獣皮\", \"竜鱗\", \"レアモノ\", \"レアモノ\"];\n          magic_stone = [\"火炎石\", \"雷撃石\", \"氷結石\"];\n          num1 = self.randomizer.$roll_sum(2, 6);\n          num2 = self.randomizer.$roll_sum(dice, 6);\n          self.$debug(\"dice\", dice);\n          self.$debug(\"num1\", num1);\n          self.$debug(\"num2\", num2);\n          if ($truthy($rb_le(num1, 4))) {\n            \n            num2 = self.randomizer.$roll_once(6);\n            magic_stone_result = magic_stone['$[]']($rb_minus($rb_divide(num2, 2).$to_i(), 1));\n            output = \"\" + \"《\" + (magic_stone_result) + \"》を\" + (dice) + \"個獲得\";\n          } else if (num1['$=='](7)) {\n            output = \"\" + \"《金貨》を\" + (num2) + \"枚獲得\"\n          } else {\n            \n            type = material_kind['$[]']($rb_minus(num1, 5));\n            if ($truthy($rb_le(num2, 3))) {\n              output = \"\" + \"《\" + (type) + \" I》を1個獲得\"\n            } else if ($truthy($rb_le(num2, 5))) {\n              output = \"\" + \"《\" + (type) + \" I》を2個獲得\"\n            } else if ($truthy($rb_le(num2, 7))) {\n              output = \"\" + \"《\" + (type) + \" I》を3個獲得\"\n            } else if ($truthy($rb_le(num2, 9))) {\n              output = \"\" + \"《\" + (type) + \" II》を1個獲得\"\n            } else if ($truthy($rb_le(num2, 11))) {\n              output = \"\" + \"《\" + (type) + \" I》を2個《\" + (type) + \" II》を1個獲得\"\n            } else if ($truthy($rb_le(num2, 13))) {\n              output = \"\" + \"《\" + (type) + \" I》を2個《\" + (type) + \" II》を2個獲得\"\n            } else if ($truthy($rb_le(num2, 15))) {\n              output = \"\" + \"《\" + (type) + \" III》を1個獲得\"\n            } else if ($truthy($rb_le(num2, 17))) {\n              output = \"\" + \"《\" + (type) + \" II》を2個《\" + (type) + \" III》を1個獲得\"\n            } else {\n              output = \"\" + \"《\" + (type) + \" II》を2個《\" + (type) + \" III》を2個獲得\"\n            };\n          };\n          if ($truthy(output['$!='](\"1\"))) {\n            output = \"\" + \"掘り出し袋表[\" + (num1) + \",\" + (num2) + \"] ＞ \" + (output)};\n          return output;\n        }, $DarkBlaze_get_horidasibukuro_table$11.$$arity = 1), nil) && 'get_horidasibukuro_table';\n      })($nesting[0], $$($nesting, 'Base'), $nesting)\n    })($nesting[0], $nesting)\n  })($nesting[0], $nesting);\n})(Opal);\n"],"sourceRoot":"webpack:///"}