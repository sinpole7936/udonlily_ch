{"version":3,"sources":["./node_modules/bcdice/lib/bcdice/game_system/Dracurouge.js"],"names":["require","Opal","$rb_plus","lhs","rhs","$rb_divide","$rb_le","$rb_minus","$rb_lt","$rb_times","self","top","$nesting","nil","$$$","$$","$module","module","$klass","klass","$send2","send2","$truthy","truthy","$send","send","$hash2","hash2","$base","$parent_nesting","concat","$super","$Dracurouge_initialize$1","$Dracurouge_eval_game_system_specific_command$2","$Dracurouge_roll_conduct_dice$3","$Dracurouge_count_glory_dice$4","$Dracurouge_apply_thirsty_point$5","$Dracurouge_roll_resist_dice$7","$Dracurouge_getReactionDiceCommandResult$8","$Dracurouge_getHeresyReactionDiceCommandResult$9","$Dracurouge_getReactionText$10","$Dracurouge_checkTypeText$11","$Dracurouge_getReactionTextFull$12","$Dracurouge_getReactionTex$14","$Dracurouge_getCorruptionDiceCommandResult$15","$$prototype","randomizer","const_set","def","$$initialize","command","$iter","$$p","$yield","find_super_dispatcher","d66_sort_type","$$arity","$$eval_game_system_specific_command","$ret_or_1","$ret_or_2","$ret_or_3","$ret_or_4","$ret_or_5","$roll_conduct_dice","$roll_resist_dice","$getReactionDiceCommandResult","$getHeresyReactionDiceCommandResult","$getCorruptionDiceCommandResult","$roll_tables","$class","$private","$$roll_conduct_dice","$a","m","dice_count","$ret_or_6","thirsty_point","dice_list","glory_dice","calculation_process","sequence","$match","$to_i","$roll_barabara","$sort","$count_glory_dice","$new","$apply_thirsty_point","$modifier","$join","$compact","$$count_glory_dice","one_count","six_count","$count","$$apply_thirsty_point","$$6","idx","text_list","$writer","i","$$s","$to_proc","to_a","$$roll_resist_dice","$$getReactionDiceCommandResult","typeText1","typeText2","name","blood","style","$last_match","$translate","$getReactionText","$$getHeresyReactionDiceCommandResult","$$getReactionText","infos1","infos2","ten_value","one_value","number","isBefore","infos","typeText","index","resultText","info","$checkTypeText","$roll_once","$debug","$getReactionTextFull","$to_sym","$getReactionTex","$$checkTypeText","$keys","$$getReactionTextFull","$$13","resultTexts","$$getReactionTex","typeName","text","$$getCorruptionDiceCommandResult","modify","table","number_text","$sum","$get_table_by_number","$YearTable_from_i18n$16","$YearTable_initialize$17","$YearTable_roll$18","$YearTable_roll_d6x$20","items","year_title","defs","$$from_i18n","key","locale","years","$zip","$freeze","$$roll","$b","$$19","tens","ones","year_expr","interim_expr","year","to_ary","expr","$roll_d6x","$eval","$gsub","$$roll_d6x","$$21","times","sides","list","$split","$$22","$length","$reverse","$map","x","$translate_tables$23","$$translate_tables","$from_i18n","get_singleton_class","$translate_tables","$register_prefix"],"mappings":";;;;;;;;;AAAAA,mBAAO,CAAC,uBAAD,CAAP;AAEA;;;AACA,CAAC,UAASC,IAAT,EAAe;AACd,WAASC,QAAT,CAAkBC,GAAlB,EAAuBC,GAAvB,EAA4B;AAC1B,WAAQ,OAAOD,GAAP,KAAgB,QAAhB,IAA4B,OAAOC,GAAP,KAAgB,QAA7C,GAAyDD,GAAG,GAAGC,GAA/D,GAAqED,GAAG,CAAC,IAAD,CAAH,CAAUC,GAAV,CAA5E;AACD;;AACD,WAASC,UAAT,CAAoBF,GAApB,EAAyBC,GAAzB,EAA8B;AAC5B,WAAQ,OAAOD,GAAP,KAAgB,QAAhB,IAA4B,OAAOC,GAAP,KAAgB,QAA7C,GAAyDD,GAAG,GAAGC,GAA/D,GAAqED,GAAG,CAAC,IAAD,CAAH,CAAUC,GAAV,CAA5E;AACD;;AACD,WAASE,MAAT,CAAgBH,GAAhB,EAAqBC,GAArB,EAA0B;AACxB,WAAQ,OAAOD,GAAP,KAAgB,QAAhB,IAA4B,OAAOC,GAAP,KAAgB,QAA7C,GAAyDD,GAAG,IAAIC,GAAhE,GAAsED,GAAG,CAAC,KAAD,CAAH,CAAWC,GAAX,CAA7E;AACD;;AACD,WAASG,SAAT,CAAmBJ,GAAnB,EAAwBC,GAAxB,EAA6B;AAC3B,WAAQ,OAAOD,GAAP,KAAgB,QAAhB,IAA4B,OAAOC,GAAP,KAAgB,QAA7C,GAAyDD,GAAG,GAAGC,GAA/D,GAAqED,GAAG,CAAC,IAAD,CAAH,CAAUC,GAAV,CAA5E;AACD;;AACD,WAASI,MAAT,CAAgBL,GAAhB,EAAqBC,GAArB,EAA0B;AACxB,WAAQ,OAAOD,GAAP,KAAgB,QAAhB,IAA4B,OAAOC,GAAP,KAAgB,QAA7C,GAAyDD,GAAG,GAAGC,GAA/D,GAAqED,GAAG,CAAC,IAAD,CAAH,CAAUC,GAAV,CAA5E;AACD;;AACD,WAASK,SAAT,CAAmBN,GAAnB,EAAwBC,GAAxB,EAA6B;AAC3B,WAAQ,OAAOD,GAAP,KAAgB,QAAhB,IAA4B,OAAOC,GAAP,KAAgB,QAA7C,GAAyDD,GAAG,GAAGC,GAA/D,GAAqED,GAAG,CAAC,IAAD,CAAH,CAAUC,GAAV,CAA5E;AACD;;AACD,MAAIM,IAAI,GAAGT,IAAI,CAACU,GAAhB;AAAA,MAAqBC,QAAQ,GAAG,EAAhC;AAAA,MAAoCC,GAAG,GAAGZ,IAAI,CAACY,GAA/C;AAAA,MAAoDC,GAAG,GAAGb,IAAI,CAACa,GAA/D;AAAA,MAAoEC,EAAE,GAAGd,IAAI,CAACc,EAA9E;AAAA,MAAkFC,OAAO,GAAGf,IAAI,CAACgB,MAAjG;AAAA,MAAyGC,MAAM,GAAGjB,IAAI,CAACkB,KAAvH;AAAA,MAA8HC,MAAM,GAAGnB,IAAI,CAACoB,KAA5I;AAAA,MAAmJC,OAAO,GAAGrB,IAAI,CAACsB,MAAlK;AAAA,MAA0KC,KAAK,GAAGvB,IAAI,CAACwB,IAAvL;AAAA,MAA6LC,MAAM,GAAGzB,IAAI,CAAC0B,KAA3M;AAEA,SAAQ,UAASC,KAAT,EAAgBC,eAAhB,EAAiC;AACvC,QAAInB,IAAI,GAAGM,OAAO,CAACY,KAAD,EAAQ,QAAR,CAAlB;AAEA,QAAIhB,QAAQ,GAAG,CAACF,IAAD,EAAOoB,MAAP,CAAcD,eAAd,CAAf;;AAEA,KAAC,UAASD,KAAT,EAAgBC,eAAhB,EAAiC;AAChC,UAAInB,IAAI,GAAGM,OAAO,CAACY,KAAD,EAAQ,YAAR,CAAlB;AAEA,UAAIhB,QAAQ,GAAG,CAACF,IAAD,EAAOoB,MAAP,CAAcD,eAAd,CAAf;;AAEA,OAAC,UAASD,KAAT,EAAgBG,MAAhB,EAAwBF,eAAxB,EAAyC;AACxC,YAAInB,IAAI,GAAGQ,MAAM,CAACU,KAAD,EAAQG,MAAR,EAAgB,YAAhB,CAAjB;AAEA,YAAInB,QAAQ,GAAG,CAACF,IAAD,EAAOoB,MAAP,CAAcD,eAAd,CAAf;AAAA,YAA+CG,wBAA/C;AAAA,YAAyEC,+CAAzE;AAAA,YAA0HC,+BAA1H;AAAA,YAA2JC,8BAA3J;AAAA,YAA2LC,iCAA3L;AAAA,YAA8NC,8BAA9N;AAAA,YAA8PC,0CAA9P;AAAA,YAA0SC,gDAA1S;AAAA,YAA4VC,8BAA5V;AAAA,YAA4XC,4BAA5X;AAAA,YAA0ZC,kCAA1Z;AAAA,YAA8bC,6BAA9b;AAAA,YAA6dC,6CAA7d;AAEAlC,YAAI,CAACmC,WAAL,CAAiBC,UAAjB,GAA8BjC,GAA9B;AAEAZ,YAAI,CAAC8C,SAAL,CAAenC,QAAQ,CAAC,CAAD,CAAvB,EAA4B,IAA5B,EAAkC,YAAlC;AACAX,YAAI,CAAC8C,SAAL,CAAenC,QAAQ,CAAC,CAAD,CAAvB,EAA4B,MAA5B,EAAoC,SAApC;AACAX,YAAI,CAAC8C,SAAL,CAAenC,QAAQ,CAAC,CAAD,CAAvB,EAA4B,UAA5B,EAAwC,SAAxC;AACAX,YAAI,CAAC8C,SAAL,CAAenC,QAAQ,CAAC,CAAD,CAAvB,EAA4B,cAA5B,EAA4C,KAAK,gBAAL,GAAwB,kCAAxB,GAA6D,yBAA7D,GAAyF,eAAzF,GAA2G,eAA3G,GAA6H,YAA7H,GAA4I,wCAA5I,GAAuL,uCAAvL,GAAiO,0BAAjO,GAA8P,8BAA9P,GAA+R,eAA/R,GAAiT,gCAAjT,GAAoV,yCAApV,GAAgY,4CAAhY,GAA+a,oCAA/a,GAAsd,8CAAtd,GAAugB,iBAAvgB,GAA2hB,8CAA3hB,GAA4kB,oCAA5kB,GAAmnB,yCAAnnB,GAA+pB,uCAA/pB,GAAysB,0CAAzsB,GAAsvB,0CAAtvB,GAAmyB,oCAAnyB,GAA00B,gDAA10B,GAA63B,aAAz6B;AAEAX,YAAI,CAAC+C,GAAL,CAAStC,IAAT,EAAe,aAAf,EAA8BsB,wBAAwB,GAAG,SAASiB,YAAT,CAAsBC,OAAtB,EAA+B;AACtF,cAAIC,KAAK,GAAGnB,wBAAwB,CAACoB,GAArC;AAAA,cAA0CC,MAAM,GAAGF,KAAK,IAAItC,GAA5D;AAAA,cAAiEH,IAAI,GAAG,IAAxE;AAEA,cAAIyC,KAAJ,EAAWnB,wBAAwB,CAACoB,GAAzB,GAA+B,IAA/B;AAEXhC,gBAAM,CAACV,IAAD,EAAOT,IAAI,CAACqD,qBAAL,CAA2B5C,IAA3B,EAAiC,YAAjC,EAA+CsB,wBAA/C,EAAyE,KAAzE,EAAgF,IAAhF,CAAP,EAA8F,YAA9F,EAA4G,CAACkB,OAAD,CAA5G,EAAuH,IAAvH,CAAN;AACA,iBAAQxC,IAAI,CAAC6C,aAAL,GAAqBzC,GAAG,CAACC,EAAE,CAACH,QAAD,EAAW,aAAX,CAAH,EAA8B,SAA9B,CAAhC;AACD,SAPD,EAOGoB,wBAAwB,CAACwB,OAAzB,GAAmC,CAPtC;AASAvD,YAAI,CAAC+C,GAAL,CAAStC,IAAT,EAAe,oCAAf,EAAqDuB,+CAA+C,GAAG,SAASwB,mCAAT,CAA6CP,OAA7C,EAAsD;AAC3J,cAAIxC,IAAI,GAAG,IAAX;AAAA,cAAiBgD,SAAS,GAAG7C,GAA7B;AAAA,cAAkC8C,SAAS,GAAG9C,GAA9C;AAAA,cAAmD+C,SAAS,GAAG/C,GAA/D;AAAA,cAAoEgD,SAAS,GAAGhD,GAAhF;AAAA,cAAqFiD,SAAS,GAAGjD,GAAjG;;AAEA,cAAIS,OAAO,CAAEoC,SAAS,GAAI,YAAW;AAAC,gBAAIpC,OAAO,CAAEqC,SAAS,GAAI,YAAW;AAAC,kBAAIrC,OAAO,CAAEsC,SAAS,GAAI,YAAW;AAAC,oBAAItC,OAAO,CAAEuC,SAAS,GAAI,YAAW;AAAC,sBAAIvC,OAAO,CAAEwC,SAAS,GAAGpD,IAAI,CAACqD,kBAAL,CAAwBb,OAAxB,CAAd,CAAX,EAA6D;AACnN,2BAAOY,SAAP;AACD,mBAFuJ,MAEjJ;AACL,2BAAOpD,IAAI,CAACsD,iBAAL,CAAuBd,OAAvB,CAAP;AACD;;AAAA;AAAE,yBAAOrC,GAAP;AAAa,iBAJ2H,EAAd,CAAX,EAI3F;AACrB,yBAAOgD,SAAP;AACD,iBANiH,MAM3G;AACL,yBAAOnD,IAAI,CAACuD,6BAAL,CAAmCf,OAAnC,CAAP;AACD;;AAAA;AAAE,uBAAOrC,GAAP;AAAa,eARqF,EAAd,CAAX,EAQrD;AACrB,uBAAO+C,SAAP;AACD,eAV2E,MAUrE;AACL,uBAAOlD,IAAI,CAACwD,mCAAL,CAAyChB,OAAzC,CAAP;AACD;;AAAA;AAAE,qBAAOrC,GAAP;AAAa,aAZ+C,EAAd,CAAX,EAYf;AACrB,qBAAO8C,SAAP;AACD,aAdqC,MAc/B;AACL,qBAAOjD,IAAI,CAACyD,+BAAL,CAAqCjB,OAArC,CAAP;AACD;;AAAA;AAAE,mBAAOrC,GAAP;AAAa,WAhBS,EAAd,CAAX,EAgBuB;AACrB,mBAAO6C,SAAP;AACD,WAlBD,MAkBO;AACL,mBAAOhD,IAAI,CAAC0D,YAAL,CAAkBlB,OAAlB,EAA2BpC,GAAG,CAACJ,IAAI,CAAC2D,MAAL,EAAD,EAAgB,QAAhB,CAA9B,CAAP;AACD;AACF,SAxBD,EAwBGpC,+CAA+C,CAACuB,OAAhD,GAA0D,CAxB7D;AAyBA9C,YAAI,CAAC4D,QAAL;AAEArE,YAAI,CAAC+C,GAAL,CAAStC,IAAT,EAAe,oBAAf,EAAqCwB,+BAA+B,GAAG,SAASqC,mBAAT,CAA6BrB,OAA7B,EAAsC;AAC3G,cAAIsB,EAAJ;AAAA,cAAQ9D,IAAI,GAAG,IAAf;AAAA,cAAqB+D,CAAC,GAAG5D,GAAzB;AAAA,cAA8B6D,UAAU,GAAG7D,GAA3C;AAAA,cAAgD8D,SAAS,GAAG9D,GAA5D;AAAA,cAAiE+D,aAAa,GAAG/D,GAAjF;AAAA,cAAsFgE,SAAS,GAAGhE,GAAlG;AAAA,cAAuGiE,UAAU,GAAGjE,GAApH;AAAA,cAAyHkE,mBAAmB,GAAGlE,GAA/I;AAAA,cAAoJmE,QAAQ,GAAGnE,GAA/J;AAGA4D,WAAC,GAAG,0BAA0BQ,MAA1B,CAAiC/B,OAAjC,CAAJ;;AACA,cAAI5B,OAAO,CAACmD,CAAD,CAAX,EAAgB,CACf,CADD,MACO;AACL,mBAAO5D,GAAP;AACD;;AAAA;;AACD6D,oBAAU,GAAI,YAAW;AAAC,gBAAIpD,OAAO,CAAEqD,SAAS,IAAIH,EAAE,GAAGC,CAAC,CAAC,KAAD,CAAD,CAAS,CAAT,CAAL,EAAmBD,EAAE,KAAK3D,GAAP,IAAc2D,EAAE,IAAI,IAArB,GAA6B3D,GAA7B,GAAmCW,KAAK,CAACgD,EAAD,EAAK,MAAL,EAAa,EAAb,CAA9D,CAAX,CAAX,EAAyG;AACjI,qBAAOG,SAAP;AACD,aAFyB,MAEnB;AACL,qBAAO,CAAP;AACD;;AAAA;AAAE,mBAAO9D,GAAP;AAAa,WAJH,EAAb;;AAKA+D,uBAAa,GAAGH,CAAC,CAAC,KAAD,CAAD,CAAS,CAAT,EAAYS,KAAZ,EAAhB;AACAL,mBAAS,GAAGnE,IAAI,CAACoC,UAAL,CAAgBqC,cAAhB,CAA+BT,UAA/B,EAA2C,CAA3C,EAA8CU,KAA9C,EAAZ;AACAN,oBAAU,GAAGpE,IAAI,CAAC2E,iBAAL,CAAuBR,SAAvB,CAAb;AACAA,mBAAS,GAAG3E,QAAQ,CAAC2E,SAAD,EAAY9D,EAAE,CAACH,QAAD,EAAW,OAAX,CAAF,CAAsB0E,IAAtB,CAA2BR,UAA3B,EAAuC,EAAvC,CAAZ,CAApB;AACAC,6BAAmB,GAAGrE,IAAI,CAAC6E,oBAAL,CAA0BV,SAA1B,EAAqCD,aAArC,CAAtB;AACAI,kBAAQ,GAAG,CAAC,KAAK,GAAL,GAAY9B,OAAZ,GAAuB,GAAxB,EAA6B,KAAMwB,UAAN,GAAoB,IAApB,GAA4B3D,EAAE,CAACH,QAAD,EAAW,QAAX,CAAF,CAAuB4E,SAAvB,CAAiCZ,aAAjC,CAAzD,EAA2GG,mBAA3G,EAAgI,KAAK,IAAL,GAAaF,SAAS,CAACY,KAAV,CAAgB,IAAhB,CAAb,GAAsC,IAAtK,EAA4KC,QAA5K,EAAX;AACA,iBAAOV,QAAQ,CAACS,KAAT,CAAe,KAAf,CAAP;AACD,SArBD,EAqBGvD,+BAA+B,CAACsB,OAAhC,GAA0C,CArB7C;AAuBAvD,YAAI,CAAC+C,GAAL,CAAStC,IAAT,EAAe,mBAAf,EAAoCyB,8BAA8B,GAAG,SAASwD,kBAAT,CAA4Bd,SAA5B,EAAuC;AAC1G,cAAInE,IAAI,GAAG,IAAX;AAAA,cAAiBkF,SAAS,GAAG/E,GAA7B;AAAA,cAAkCgF,SAAS,GAAGhF,GAA9C;AAGA+E,mBAAS,GAAGf,SAAS,CAACiB,MAAV,CAAiB,CAAjB,CAAZ;AACAD,mBAAS,GAAGhB,SAAS,CAACiB,MAAV,CAAiB,CAAjB,CAAZ;AACA,iBAAO5F,QAAQ,CAACG,UAAU,CAACuF,SAAD,EAAY,CAAZ,CAAV,CAAyBV,KAAzB,EAAD,EAAmC7E,UAAU,CAACwF,SAAD,EAAY,CAAZ,CAAV,CAAyBX,KAAzB,EAAnC,CAAf;AACD,SAPD,EAOG/C,8BAA8B,CAACqB,OAA/B,GAAyC,CAP5C;AASAvD,YAAI,CAAC+C,GAAL,CAAStC,IAAT,EAAe,sBAAf,EAAuC0B,iCAAiC,GAAG,SAAS2D,qBAAT,CAA+BlB,SAA/B,EAA0CD,aAA1C,EAAyD;AAClI,cAAIoB,GAAJ;AAAA,cAAStF,IAAI,GAAG,IAAhB;AAAA,cAAsBuF,GAAG,GAAGpF,GAA5B;AAAA,cAAiCqF,SAAS,GAAGrF,GAA7C;AAAA,cAAkDsF,OAAO,GAAGtF,GAA5D;;AAGA,cAAI+D,aAAa,CAAC,KAAD,CAAb,CAAqB,CAArB,CAAJ,EAA6B;AAC3B,mBAAO/D,GAAP;AAAW;;AAAA;AACboF,aAAG,GAAGzE,KAAK,CAACqD,SAAD,EAAY,QAAZ,EAAsB,EAAtB,GAA2BmB,GAAG,GAAG,aAASI,CAAT,EAAW;AAAC,gBAAI1F,IAAI,GAAGsF,GAAG,CAACK,GAAJ,IAAW,IAAX,GAAkB,IAAlB,GAAyBL,GAAG,CAACK,GAAxC;;AAItD,gBAAID,CAAC,IAAI,IAAT,EAAe;AACbA,eAAC,GAAGvF,GAAJ;AACD;;AAAA;AACD,mBAAOP,MAAM,CAAC8F,CAAD,EAAI,CAAJ,CAAb;AAAqB,WAPe,EAObJ,GAAG,CAACK,GAAJ,GAAU3F,IAPG,EAOGsF,GAAG,CAACxC,OAAJ,GAAc,CAPjB,EAOoBwC,GAP/C,EAAX;AAQAE,mBAAS,GAAG1E,KAAK,CAACqD,SAAD,EAAY,KAAZ,EAAmB,EAAnB,EAAuB,OAAOyB,QAAP,EAAvB,CAAjB;AAEAH,iBAAO,GAAG,CAACF,GAAD,EAAM/F,QAAQ,CAACgG,SAAS,CAAC,KAAD,CAAT,CAAiBD,GAAjB,CAAD,EAAwB,KAAK,GAAL,GAAYrB,aAApC,CAAd,CAAV;AACApD,eAAK,CAAC0E,SAAD,EAAY,KAAZ,EAAmBjG,IAAI,CAACsG,IAAL,CAAUJ,OAAV,CAAnB,CAAL;AACAA,iBAAO,CAAC5F,SAAS,CAAC4F,OAAO,CAAC,QAAD,CAAR,EAAoB,CAApB,CAAV,CAAP;AAAyC;AAEzCA,iBAAO,GAAG,CAACF,GAAD,EAAM/F,QAAQ,CAAC2E,SAAS,CAAC,KAAD,CAAT,CAAiBoB,GAAjB,CAAD,EAAwBrB,aAAxB,CAAd,CAAV;AACApD,eAAK,CAACqD,SAAD,EAAY,KAAZ,EAAmB5E,IAAI,CAACsG,IAAL,CAAUJ,OAAV,CAAnB,CAAL;AACAA,iBAAO,CAAC5F,SAAS,CAAC4F,OAAO,CAAC,QAAD,CAAR,EAAoB,CAApB,CAAV,CAAP;AAAyC;AACzC,iBAAO,KAAK,IAAL,GAAaD,SAAS,CAACT,KAAV,CAAgB,IAAhB,CAAb,GAAsC,IAA7C;AACD,SAxBD,EAwBGrD,iCAAiC,CAACoB,OAAlC,GAA4C,CAxB/C;AA0BAvD,YAAI,CAAC+C,GAAL,CAAStC,IAAT,EAAe,mBAAf,EAAoC2B,8BAA8B,GAAG,SAASmE,kBAAT,CAA4BtD,OAA5B,EAAqC;AACxG,cAAIxC,IAAI,GAAG,IAAX;AAAA,cAAiB+D,CAAC,GAAG5D,GAArB;AAAA,cAA0B6D,UAAU,GAAG7D,GAAvC;AAAA,cAA4CgE,SAAS,GAAGhE,GAAxD;AAGA4D,WAAC,GAAG,aAAaQ,MAAb,CAAoB/B,OAApB,CAAJ;;AACA,cAAI5B,OAAO,CAACmD,CAAD,CAAX,EAAgB,CACf,CADD,MACO;AACL,mBAAO5D,GAAP;AACD;;AAAA;AACD6D,oBAAU,GAAGD,CAAC,CAAC,KAAD,CAAD,CAAS,CAAT,EAAYS,KAAZ,EAAb;;AACA,cAAIR,UAAU,CAAC,KAAD,CAAV,CAAkB,CAAlB,CAAJ,EAA0B;AACxBA,sBAAU,GAAG,CAAb;AAAe;;AAAA;AACjBG,mBAAS,GAAGnE,IAAI,CAACoC,UAAL,CAAgBqC,cAAhB,CAA+BT,UAA/B,EAA2C,CAA3C,EAA8CU,KAA9C,EAAZ;AACA,iBAAO,KAAK,GAAL,GAAYlC,OAAZ,GAAuB,MAAvB,GAAiCwB,UAAjC,GAA+C,SAA/C,GAA4DG,SAAS,CAACY,KAAV,CAAgB,IAAhB,CAA5D,GAAqF,IAA5F;AACD,SAdD,EAcGpD,8BAA8B,CAACmB,OAA/B,GAAyC,CAd5C;AAgBAvD,YAAI,CAAC+C,GAAL,CAAStC,IAAT,EAAe,+BAAf,EAAgD4B,0CAA0C,GAAG,SAASmE,8BAAT,CAAwCvD,OAAxC,EAAiD;AAC5I,cAAIxC,IAAI,GAAG,IAAX;AAAA,cAAiBgG,SAAS,GAAG7F,GAA7B;AAAA,cAAkC8F,SAAS,GAAG9F,GAA9C;AAAA,cAAmD+F,IAAI,GAAG/F,GAA1D;AAAA,cAA+DgG,KAAK,GAAGhG,GAAvE;AAAA,cAA4EiG,KAAK,GAAGjG,GAApF;;AAGA,cAAIS,OAAO,CAAC4B,OAAO,CAAC,KAAD,CAAP,CAAe,sBAAf,CAAD,CAAX,EAAqD,CACpD,CADD,MACO;AACL,mBAAOrC,GAAP;AACD;;AAAA;AACD6F,mBAAS,GAAG3F,EAAE,CAACH,QAAD,EAAW,QAAX,CAAF,CAAuBmG,WAAvB,CAAmC,CAAnC,CAAZ;AACAJ,mBAAS,GAAG5F,EAAE,CAACH,QAAD,EAAW,QAAX,CAAF,CAAuBmG,WAAvB,CAAmC,CAAnC,CAAZ;AACAH,cAAI,GAAGlG,IAAI,CAACsG,UAAL,CAAgB,oBAAhB,CAAP;AACAH,eAAK,GAAGnG,IAAI,CAACsG,UAAL,CAAgB,qBAAhB,CAAR;AACAF,eAAK,GAAGpG,IAAI,CAACsG,UAAL,CAAgB,qBAAhB,CAAR;AACA,iBAAOtG,IAAI,CAACuG,gBAAL,CAAsBL,IAAtB,EAA4BF,SAA5B,EAAuCC,SAAvC,EAAkDE,KAAlD,EAAyDC,KAAzD,CAAP;AACD,SAdD,EAcGxE,0CAA0C,CAACkB,OAA3C,GAAqD,CAdxD;AAgBAvD,YAAI,CAAC+C,GAAL,CAAStC,IAAT,EAAe,qCAAf,EAAsD6B,gDAAgD,GAAG,SAAS2E,oCAAT,CAA8ChE,OAA9C,EAAuD;AAC9J,cAAIxC,IAAI,GAAG,IAAX;AAAA,cAAiBgG,SAAS,GAAG7F,GAA7B;AAAA,cAAkC8F,SAAS,GAAG9F,GAA9C;AAAA,cAAmD+F,IAAI,GAAG/F,GAA1D;AAAA,cAA+DgG,KAAK,GAAGhG,GAAvE;AAAA,cAA4EiG,KAAK,GAAGjG,GAApF;;AAGA,cAAIS,OAAO,CAAC4B,OAAO,CAAC,KAAD,CAAP,CAAe,uBAAf,CAAD,CAAX,EAAsD,CACrD,CADD,MACO;AACL,mBAAOrC,GAAP;AACD;;AAAA;AACD6F,mBAAS,GAAG3F,EAAE,CAACH,QAAD,EAAW,QAAX,CAAF,CAAuBmG,WAAvB,CAAmC,CAAnC,CAAZ;AACAJ,mBAAS,GAAG5F,EAAE,CAACH,QAAD,EAAW,QAAX,CAAF,CAAuBmG,WAAvB,CAAmC,CAAnC,CAAZ;AACAH,cAAI,GAAGlG,IAAI,CAACsG,UAAL,CAAgB,qBAAhB,CAAP;AACAH,eAAK,GAAGnG,IAAI,CAACsG,UAAL,CAAgB,sBAAhB,CAAR;AACAF,eAAK,GAAGpG,IAAI,CAACsG,UAAL,CAAgB,sBAAhB,CAAR;AACA,iBAAOtG,IAAI,CAACuG,gBAAL,CAAsBL,IAAtB,EAA4BF,SAA5B,EAAuCC,SAAvC,EAAkDE,KAAlD,EAAyDC,KAAzD,CAAP;AACD,SAdD,EAcGvE,gDAAgD,CAACiB,OAAjD,GAA2D,CAd9D;AAgBAvD,YAAI,CAAC+C,GAAL,CAAStC,IAAT,EAAe,kBAAf,EAAmC8B,8BAA8B,GAAG,SAAS2E,iBAAT,CAA2BP,IAA3B,EAAiCF,SAAjC,EAA4CC,SAA5C,EAAuDS,MAAvD,EAA+DC,MAA/D,EAAuE;AACzI,cAAI3G,IAAI,GAAG,IAAX;AAAA,cAAiB4G,SAAS,GAAGzG,GAA7B;AAAA,cAAkC0G,SAAS,GAAG1G,GAA9C;AAAA,cAAmD2G,MAAM,GAAG3G,GAA5D;AAAA,cAAiE4G,QAAQ,GAAG5G,GAA5E;AAAA,cAAiF6G,KAAK,GAAG7G,GAAzF;AAAA,cAA8F8G,QAAQ,GAAG9G,GAAzG;AAAA,cAA8G+G,KAAK,GAAG/G,GAAtH;AAAA,cAA2HgH,UAAU,GAAGhH,GAAxI;AAAA,cAA6IiH,IAAI,GAAGjH,GAApJ;;AAGA,cAAIS,OAAO,CAACZ,IAAI,CAACqH,cAAL,CAAoBrB,SAApB,EAA+BU,MAA/B,CAAD,CAAX,EAAqD,CACpD,CADD,MACO;AACL,mBAAOvG,GAAP;AACD;;AAAA;;AACD,cAAIS,OAAO,CAACZ,IAAI,CAACqH,cAAL,CAAoBpB,SAApB,EAA+BU,MAA/B,CAAD,CAAX,EAAqD,CACpD,CADD,MACO;AACL,mBAAOxG,GAAP;AACD;;AAAA;AACDyG,mBAAS,GAAG5G,IAAI,CAACoC,UAAL,CAAgBkF,UAAhB,CAA2B,CAA3B,CAAZ;AACAT,mBAAS,GAAG7G,IAAI,CAACoC,UAAL,CAAgBkF,UAAhB,CAA2B,CAA3B,CAAZ;AACAR,gBAAM,GAAG,KAAMF,SAAN,GAAoBC,SAA7B;AACAE,kBAAQ,GAAGjH,MAAM,CAAC8G,SAAD,EAAY,CAAZ,CAAjB;;AACAI,eAAK,GAAI,YAAW;AAAC,gBAAIpG,OAAO,CAACmG,QAAD,CAAX,EAAuB;AAC1C,qBAAOL,MAAP;AACD,aAFoB,MAEd;AACL,qBAAOC,MAAP;AACD;;AAAA;AAAE,mBAAOxG,GAAP;AAAa,WAJR,EAAR;;AAKA8G,kBAAQ,GAAI,YAAW;AAAC,gBAAIrG,OAAO,CAACmG,QAAD,CAAX,EAAuB;AAC7C,qBAAOf,SAAP;AACD,aAFuB,MAEjB;AACL,qBAAOC,SAAP;AACD;;AAAA;AAAE,mBAAO9F,GAAP;AAAa,WAJL,EAAX;;AAKA+G,eAAK,GAAG1H,QAAQ,CAACK,SAAS,CAACgH,SAAD,EAAY,CAAZ,CAAV,EAA0B9G,SAAS,CAAE,YAAW;AAAC,gBAAIa,OAAO,CAACmG,QAAD,CAAX,EAAuB;AAEtF,qBAAOlH,SAAS,CAAC+G,SAAD,EAAY,CAAZ,CAAhB;AACD,aAHgE,MAG1D;AAEL,qBAAO/G,SAAS,CAAC+G,SAAD,EAAY,CAAZ,CAAhB;AACD;;AAAA;AAAE,mBAAOzG,GAAP;AAAa,WANoC,EAAD,EAM9B,CAN8B,CAAnC,CAAhB;AAOAH,cAAI,CAACuH,MAAL,CAAY,OAAZ,EAAqBL,KAArB;;AACA,cAAItG,OAAO,CAACqG,QAAQ,CAAC,OAAD,CAAR,EAAD,CAAX,EAAkC;AAChCE,sBAAU,GAAGnH,IAAI,CAACwH,oBAAL,CAA0BR,KAA1B,EAAiCE,KAAjC,CAAb;AACD,WAFD,MAEO;AAELE,gBAAI,GAAGJ,KAAK,CAAC,KAAD,CAAL,CAAaC,QAAQ,CAACQ,OAAT,EAAb,CAAP;;AACA,gBAAI7G,OAAO,CAACwG,IAAI,CAAC,OAAD,CAAJ,EAAD,CAAX,EAA8B;AAC5B,qBAAOjH,GAAP;AAAW;;AAAA;AACbgH,sBAAU,GAAGnH,IAAI,CAAC0H,eAAL,CAAqBN,IAArB,EAA2BF,KAA3B,CAAb;AACD;;AAAA;AACD,iBAAO,KAAMhB,IAAN,GAAc,GAAd,GAAqBY,MAArB,GAA+B,MAA/B,GAAyCK,UAAhD;AACD,SA5CD,EA4CGrF,8BAA8B,CAACgB,OAA/B,GAAyC,CA5C5C;AA8CAvD,YAAI,CAAC+C,GAAL,CAAStC,IAAT,EAAe,gBAAf,EAAiC+B,4BAA4B,GAAG,SAAS4F,eAAT,CAAyBV,QAAzB,EAAmCD,KAAnC,EAA0C;AACxG,cAAIhH,IAAI,GAAG,IAAX;;AAGA,cAAIY,OAAO,CAACqG,QAAQ,CAAC,OAAD,CAAR,EAAD,CAAX,EAAkC;AAChC,mBAAO,IAAP;AAAY;;AAAA;AACd,iBAAOD,KAAK,CAACY,KAAN,GAAc,WAAd,EAA2BX,QAAQ,CAACQ,OAAT,EAA3B,CAAP;AACD,SAPD,EAOG1F,4BAA4B,CAACe,OAA7B,GAAuC,CAP1C;AASAvD,YAAI,CAAC+C,GAAL,CAAStC,IAAT,EAAe,sBAAf,EAAuCgC,kCAAkC,GAAG,SAAS6F,qBAAT,CAA+Bb,KAA/B,EAAsCE,KAAtC,EAA6C;AACvH,cAAIY,IAAJ;AAAA,cAAU9H,IAAI,GAAG,IAAjB;AAAA,cAAuB+H,WAAW,GAAG5H,GAArC;;AAGA4H,qBAAW,GAAG,EAAd;AACAjH,eAAK,CAACkG,KAAD,EAAQ,YAAR,EAAsB,EAAtB,GAA2Bc,IAAI,GAAG,cAASV,IAAT,EAAc;AAAC,gBAAIpH,IAAI,GAAG8H,IAAI,CAACnC,GAAL,IAAY,IAAZ,GAAmB,IAAnB,GAA0BmC,IAAI,CAACnC,GAA1C;;AAIpD,gBAAIyB,IAAI,IAAI,IAAZ,EAAkB;AAChBA,kBAAI,GAAGjH,GAAP;AACD;;AAAA;AACD,mBAAO4H,WAAW,CAAC,KAAD,CAAX,CAAmB/H,IAAI,CAAC0H,eAAL,CAAqBN,IAArB,EAA2BF,KAA3B,CAAnB,CAAP;AAA8D,WAPhC,EAOkCY,IAAI,CAACnC,GAAL,GAAW3F,IAP7C,EAOmD8H,IAAI,CAAChF,OAAL,GAAe,CAPlE,EAOqEgF,IAPhG,EAAL;AAQA,iBAAOC,WAAW,CAAChD,KAAZ,CAAkB,GAAlB,CAAP;AACD,SAdD,EAcG/C,kCAAkC,CAACc,OAAnC,GAA6C,CAdhD;AAgBAvD,YAAI,CAAC+C,GAAL,CAAStC,IAAT,EAAe,iBAAf,EAAkCiC,6BAA6B,GAAG,SAAS+F,gBAAT,CAA0BZ,IAA1B,EAAgCF,KAAhC,EAAuC;AACvG,cAAIlH,IAAI,GAAG,IAAX;AAAA,cAAiBiI,QAAQ,GAAG9H,GAA5B;AAAA,cAAiC+H,IAAI,GAAG/H,GAAxC;AAGA8H,kBAAQ,GAAGb,IAAI,CAAC,KAAD,CAAJ,CAAY,MAAZ,CAAX;AACAc,cAAI,GAAGd,IAAI,CAAC,KAAD,CAAJ,CAAY,OAAZ,EAAqB,KAArB,EAA4BF,KAA5B,CAAP;AACA,iBAAO,KAAMe,QAAN,GAAkB,GAAlB,GAAyBC,IAAhC;AACD,SAPD,EAOGjG,6BAA6B,CAACa,OAA9B,GAAwC,CAP3C;AASAvD,YAAI,CAAC+C,GAAL,CAAStC,IAAT,EAAe,iCAAf,EAAkDkC,6CAA6C,GAAG,SAASiG,gCAAT,CAA0C3F,OAA1C,EAAmD;AACnJ,cAAIxC,IAAI,GAAG,IAAX;AAAA,cAAiBoI,MAAM,GAAGjI,GAA1B;AAAA,cAA+B+F,IAAI,GAAG/F,GAAtC;AAAA,cAA2CkI,KAAK,GAAGlI,GAAnD;AAAA,cAAwDgE,SAAS,GAAGhE,GAApE;AAAA,cAAyE2G,MAAM,GAAG3G,GAAlF;AAAA,cAAuFmI,WAAW,GAAGnI,GAArG;AAAA,cAA0G+G,KAAK,GAAG/G,GAAlH;AAAA,cAAuH+H,IAAI,GAAG/H,GAA9H;;AAGA,cAAIS,OAAO,CAAC4B,OAAO,CAAC,KAAD,CAAP,CAAe,WAAf,CAAD,CAAX,EAA0C,CACzC,CADD,MACO;AACL,mBAAOrC,GAAP;AACD;;AAAA;AACDiI,gBAAM,GAAG/H,EAAE,CAACH,QAAD,EAAW,QAAX,CAAF,CAAuBmG,WAAvB,CAAmC,CAAnC,EAAsC7B,KAAtC,EAAT;AACA0B,cAAI,GAAGlG,IAAI,CAACsG,UAAL,CAAgB,oBAAhB,CAAP;AACA+B,eAAK,GAAG,CAAC,CAAC,CAAD,EAAIrI,IAAI,CAACsG,UAAL,CAAgB,uBAAhB,CAAJ,CAAD,EAAgD,CAAC,CAAD,EAAItG,IAAI,CAACsG,UAAL,CAAgB,uBAAhB,CAAJ,CAAhD,EAA+F,CAAC,CAAD,EAAItG,IAAI,CAACsG,UAAL,CAAgB,uBAAhB,CAAJ,CAA/F,EAA8I,CAAC,CAAD,EAAItG,IAAI,CAACsG,UAAL,CAAgB,uBAAhB,CAAJ,CAA9I,EAA6L,CAAC,CAAD,EAAItG,IAAI,CAACsG,UAAL,CAAgB,uBAAhB,CAAJ,CAA7L,EAA4O,CAAC,CAAD,EAAItG,IAAI,CAACsG,UAAL,CAAgB,uBAAhB,CAAJ,CAA5O,EAA2R,CAAC,CAAD,EAAItG,IAAI,CAACsG,UAAL,CAAgB,uBAAhB,CAAJ,CAA3R,EAA0U,CAAC,EAAD,EAAKtG,IAAI,CAACsG,UAAL,CAAgB,wBAAhB,CAAL,CAA1U,CAAR;AACAnC,mBAAS,GAAGnE,IAAI,CAACoC,UAAL,CAAgBqC,cAAhB,CAA+B,CAA/B,EAAkC,CAAlC,CAAZ;AACAqC,gBAAM,GAAG3C,SAAS,CAACoE,IAAV,EAAT;AACAD,qBAAW,GAAGnE,SAAS,CAACY,KAAV,CAAgB,GAAhB,CAAd;AACAmC,eAAK,GAAGrH,SAAS,CAACiH,MAAD,EAASsB,MAAT,CAAjB;AACApI,cAAI,CAACuH,MAAL,CAAY,OAAZ,EAAqBL,KAArB;AACAgB,cAAI,GAAGlI,IAAI,CAACwI,oBAAL,CAA0BtB,KAA1B,EAAiCmB,KAAjC,CAAP;AACA,iBAAO,KAAK,MAAL,GAAeC,WAAf,GAA8B,IAA9B,GAAsCF,MAAtC,GAAgD,MAAhD,GAA0DlC,IAA1D,GAAkE,GAAlE,GAAyEgB,KAAzE,GAAkF,MAAlF,GAA4FgB,IAAnG;AACD,SAlBD,EAkBGhG,6CAA6C,CAACY,OAA9C,GAAwD,CAlB3D;;AAmBA,SAAC,UAAS5B,KAAT,EAAgBG,MAAhB,EAAwBF,eAAxB,EAAyC;AACxC,cAAInB,IAAI,GAAGQ,MAAM,CAACU,KAAD,EAAQG,MAAR,EAAgB,WAAhB,CAAjB;AAEA,cAAInB,QAAQ,GAAG,CAACF,IAAD,EAAOoB,MAAP,CAAcD,eAAd,CAAf;AAAA,cAA+CsH,uBAA/C;AAAA,cAAwEC,wBAAxE;AAAA,cAAkGC,kBAAlG;AAAA,cAAsHC,sBAAtH;AAEA5I,cAAI,CAACmC,WAAL,CAAiB0G,KAAjB,GAAyB7I,IAAI,CAACmC,WAAL,CAAiB+D,IAAjB,GAAwBlG,IAAI,CAACmC,WAAL,CAAiB2G,UAAjB,GAA8B3I,GAA/E;AAEAZ,cAAI,CAACwJ,IAAL,CAAU/I,IAAV,EAAgB,YAAhB,EAA8ByI,uBAAuB,GAAG,SAASO,WAAT,CAAqBC,GAArB,EAA0BC,MAA1B,EAAkCC,KAAlC,EAAyC;AAC/F,gBAAInJ,IAAI,GAAG,IAAX;AAAA,gBAAiBqI,KAAK,GAAGlI,GAAzB;AAAA,gBAA8B0I,KAAK,GAAG1I,GAAtC;AAGAkI,iBAAK,GAAGhI,EAAE,CAACH,QAAD,EAAW,MAAX,CAAF,CAAqBoG,UAArB,CAAgC2C,GAAhC,EAAqCjI,MAAM,CAAC,CAAC,QAAD,EAAW,OAAX,CAAD,EAAsB;AAAC,wBAAUkI,MAAX;AAAmB,uBAAS;AAA5B,aAAtB,CAA3C,CAAR;AACAL,iBAAK,GAAGR,KAAK,CAAC,KAAD,CAAL,CAAa,OAAb,EAAsBe,IAAtB,CAA2BD,KAA3B,CAAR;AACA,mBAAOnJ,IAAI,CAAC4E,IAAL,CAAUyD,KAAK,CAAC,KAAD,CAAL,CAAa,MAAb,CAAV,EAAgCA,KAAK,CAAC,KAAD,CAAL,CAAa,YAAb,CAAhC,EAA4DQ,KAA5D,CAAP;AACD,WAPD,EAOGJ,uBAAuB,CAAC3F,OAAxB,GAAkC,CAPrC;AASAvD,cAAI,CAAC+C,GAAL,CAAStC,IAAT,EAAe,aAAf,EAA8B0I,wBAAwB,GAAG,SAASnG,YAAT,CAAsB2D,IAAtB,EAA4B4C,UAA5B,EAAwCD,KAAxC,EAA+C;AACtG,gBAAI7I,IAAI,GAAG,IAAX;AAGAA,gBAAI,CAACkG,IAAL,GAAYA,IAAZ;AACAlG,gBAAI,CAAC8I,UAAL,GAAkBA,UAAlB;AACA,mBAAQ9I,IAAI,CAAC6I,KAAL,GAAaA,KAAK,CAACQ,OAAN,EAArB;AACD,WAPD,EAOGX,wBAAwB,CAAC5F,OAAzB,GAAmC,CAPtC;AASAvD,cAAI,CAAC+C,GAAL,CAAStC,IAAT,EAAe,OAAf,EAAwB2I,kBAAkB,GAAG,SAASW,MAAT,CAAgBlH,UAAhB,EAA4B;AACvE,gBAAI0B,EAAJ;AAAA,gBAAQyF,EAAR;AAAA,gBAAYC,IAAZ;AAAA,gBAAkBxJ,IAAI,GAAG,IAAzB;AAAA,gBAA+ByJ,IAAI,GAAGtJ,GAAtC;AAAA,gBAA2CuJ,IAAI,GAAGvJ,GAAlD;AAAA,gBAAuD+G,KAAK,GAAG/G,GAA/D;AAAA,gBAAoE+H,IAAI,GAAG/H,GAA3E;AAAA,gBAAgFwJ,SAAS,GAAGxJ,GAA5F;AAAA,gBAAiGyJ,YAAY,GAAGzJ,GAAhH;AAAA,gBAAqH0J,IAAI,GAAG1J,GAA5H;;AAGAoJ,cAAE,GAAGnH,UAAU,CAACqC,cAAX,CAA0B,CAA1B,EAA6B,CAA7B,CAAL,EAAsCX,EAAE,GAAGvE,IAAI,CAACuK,MAAL,CAAYP,EAAZ,CAA3C,EAA6DE,IAAI,GAAI3F,EAAE,CAAC,CAAD,CAAF,IAAS,IAAT,GAAgB3D,GAAhB,GAAsB2D,EAAE,CAAC,CAAD,CAA7F,EAAqG4F,IAAI,GAAI5F,EAAE,CAAC,CAAD,CAAF,IAAS,IAAT,GAAgB3D,GAAhB,GAAsB2D,EAAE,CAAC,CAAD,CAArI,EAA4IyF,EAA5I;AACArC,iBAAK,GAAG1H,QAAQ,CAACO,SAAS,CAACF,SAAS,CAAC4J,IAAD,EAAO,CAAP,CAAV,EAAqB,CAArB,CAAV,EAAmC5J,SAAS,CAAC6J,IAAD,EAAO,CAAP,CAA5C,CAAhB;AACAH,cAAE,GAAGvJ,IAAI,CAAC6I,KAAL,CAAW,KAAX,EAAkB3B,KAAlB,CAAL,EAA+BpD,EAAE,GAAGvE,IAAI,CAACuK,MAAL,CAAYP,EAAZ,CAApC,EAAsDrB,IAAI,GAAIpE,EAAE,CAAC,CAAD,CAAF,IAAS,IAAT,GAAgB3D,GAAhB,GAAsB2D,EAAE,CAAC,CAAD,CAAtF,EAA8F6F,SAAS,GAAI7F,EAAE,CAAC,CAAD,CAAF,IAAS,IAAT,GAAgB3D,GAAhB,GAAsB2D,EAAE,CAAC,CAAD,CAAnI,EAA0IyF,EAA1I;AACAK,wBAAY,GAAG9I,KAAK,CAAC6I,SAAD,EAAY,MAAZ,EAAoB,CAAC,QAAD,CAApB,GAAiCH,IAAI,GAAG,cAASO,IAAT,EAAc;AAAC,kBAAI/J,IAAI,GAAGwJ,IAAI,CAAC7D,GAAL,IAAY,IAAZ,GAAmB,IAAnB,GAA0B6D,IAAI,CAAC7D,GAA1C;;AAIzE,kBAAIoE,IAAI,IAAI,IAAZ,EAAkB;AAChBA,oBAAI,GAAG5J,GAAP;AACD;;AAAA;AACD,qBAAOH,IAAI,CAACgK,SAAL,CAAeD,IAAf,EAAqB3H,UAArB,CAAP;AAAyC,aAPU,EAORoH,IAAI,CAAC7D,GAAL,GAAW3F,IAPH,EAOSwJ,IAAI,CAAC1G,OAAL,GAAe,CAPxB,EAO2B0G,IAP5D,EAApB;AAQAK,gBAAI,GAAGxJ,EAAE,CAACH,QAAD,EAAW,qBAAX,CAAF,CAAoC+J,KAApC,CAA0CL,YAAY,CAACM,KAAb,CAAmB,GAAnB,EAAwB,GAAxB,CAA1C,CAAP;AACA,mBAAO,KAAMlK,IAAI,CAACkG,IAAX,GAAmB,GAAnB,GAA0BuD,IAA1B,GAAmCC,IAAnC,GAA2C,MAA3C,GAAqDxB,IAArD,GAA6D,KAA7D,GAAsElI,IAAI,CAAC8I,UAA3E,GAAyF,GAAzF,GAAgGa,SAAhG,GAA6G,MAA7G,GAAuHC,YAAvH,GAAuI,MAAvI,GAAiJ5J,IAAI,CAAC8I,UAAtJ,GAAoK,GAApK,GAA2Ke,IAA3K,GAAmL,GAA1L;AACD,WAjBD,EAiBGlB,kBAAkB,CAAC7F,OAAnB,GAA6B,CAjBhC;AAkBA9C,cAAI,CAAC4D,QAAL;AACA,iBAAO,CAACrE,IAAI,CAAC+C,GAAL,CAAStC,IAAT,EAAe,WAAf,EAA4B4I,sBAAsB,GAAG,SAASuB,UAAT,CAAoBJ,IAApB,EAA0B3H,UAA1B,EAAsC;AACjG,gBAAI0B,EAAJ;AAAA,gBAAQyF,EAAR;AAAA,gBAAYa,IAAZ;AAAA,gBAAkBpK,IAAI,GAAG,IAAzB;AAAA,gBAA+BqK,KAAK,GAAGlK,GAAvC;AAAA,gBAA4CmK,KAAK,GAAGnK,GAApD;AAAA,gBAAyDoK,IAAI,GAAGpK,GAAhE;;AAGAoJ,cAAE,GAAGQ,IAAI,CAACS,MAAL,CAAY,GAAZ,EAAiB,CAAjB,CAAL,EAA0B1G,EAAE,GAAGvE,IAAI,CAACuK,MAAL,CAAYP,EAAZ,CAA/B,EAAiDc,KAAK,GAAIvG,EAAE,CAAC,CAAD,CAAF,IAAS,IAAT,GAAgB3D,GAAhB,GAAsB2D,EAAE,CAAC,CAAD,CAAlF,EAA0FwG,KAAK,GAAIxG,EAAE,CAAC,CAAD,CAAF,IAAS,IAAT,GAAgB3D,GAAhB,GAAsB2D,EAAE,CAAC,CAAD,CAA3H,EAAkIyF,EAAlI;AACAc,iBAAK,GAAGA,KAAK,CAAC7F,KAAN,EAAR;AACA+F,gBAAI,GAAGzJ,KAAK,CAACT,EAAE,CAACH,QAAD,EAAW,OAAX,CAAH,EAAwB,KAAxB,EAA+B,CAACmK,KAAD,CAA/B,GAAyCD,IAAI,GAAG,gBAAU;AAAC,kBAAIpK,IAAI,GAAGoK,IAAI,CAACzE,GAAL,IAAY,IAAZ,GAAmB,IAAnB,GAA0ByE,IAAI,CAACzE,GAA1C;AAAA,kBAA+C8E,IAA/C;;AAEvE,qBAAO3J,KAAK,CAACsB,UAAU,CAACqC,cAAX,CAA0B6F,KAAK,CAACI,OAAN,EAA1B,EAA2C,CAA3C,EAA8CC,QAA9C,GAAyDC,IAAzD,EAAD,EAAkE,YAAlE,EAAgF,EAAhF,GAAqFH,IAAI,GAAG,cAASI,CAAT,EAAYtF,GAAZ,EAAgB;AAAC,oBAAIvF,IAAI,GAAGyK,IAAI,CAAC9E,GAAL,IAAY,IAAZ,GAAmB,IAAnB,GAA0B8E,IAAI,CAAC9E,GAA1C;;AAIrH,oBAAIkF,CAAC,IAAI,IAAT,EAAe;AACbA,mBAAC,GAAG1K,GAAJ;AACD;;AAAA;;AAED,oBAAIoF,GAAG,IAAI,IAAX,EAAiB;AACfA,qBAAG,GAAGpF,GAAN;AACD;;AAAA;AACD,uBAAOJ,SAAS,CAAC8K,CAAD,EAAK,EAAD,CAAK,KAAL,EAAYtF,GAAZ,EAAiBf,KAAjB,EAAJ,CAAhB;AAA+C,eAX8C,EAW5CiG,IAAI,CAAC9E,GAAL,GAAW3F,IAXiC,EAW3ByK,IAAI,CAAC3H,OAAL,GAAe,CAXY,EAWT2H,IAX5E,EAAL,CAWwFlC,IAXxF,EAAP;AAWsG,aAbjD,EAamD6B,IAAI,CAACzE,GAAL,GAAW3F,IAb9D,EAaoEoK,IAAI,CAACtH,OAAL,GAAe,CAbnF,EAasFsH,IAb/H,EAAZ;AAcA,mBAAOG,IAAI,CAAChC,IAAL,EAAP;AACD,WArBO,EAqBLK,sBAAsB,CAAC9F,OAAvB,GAAiC,CArB5B,GAqBgC3C,GArBjC,KAqByC,UArBhD;AAsBD,SAlED,EAkEGD,QAAQ,CAAC,CAAD,CAlEX,EAkEgB,IAlEhB,EAkEsBA,QAlEtB;;AAmEA,SAAC,UAASF,IAAT,EAAemB,eAAf,EAAgC;AAC/B,cAAIjB,QAAQ,GAAG,CAACF,IAAD,EAAOoB,MAAP,CAAcD,eAAd,CAAf;AAAA,cAA+C2J,oBAA/C;AAGA9K,cAAI,CAAC4D,QAAL;AACA,iBAAO,CAACrE,IAAI,CAAC+C,GAAL,CAAStC,IAAT,EAAe,mBAAf,EAAoC8K,oBAAoB,GAAG,SAASC,kBAAT,CAA4B7B,MAA5B,EAAoC;AACrG,gBAAIlJ,IAAI,GAAG,IAAX;AAEA,mBAAOgB,MAAM,CAAC,CAAC,IAAD,EAAO,IAAP,EAAa,IAAb,EAAmB,IAAnB,EAAyB,IAAzB,EAA+B,IAA/B,EAAqC,IAArC,EAA2C,IAA3C,EAAiD,IAAjD,EAAuD,KAAvD,EAA8D,IAA9D,CAAD,EAAsE;AAAC,oBAAMX,EAAE,CAACH,QAAD,EAAW,WAAX,CAAF,CAA0B8K,UAA1B,CAAqC,qBAArC,EAA4D9B,MAA5D,EAAoE,CAAC,WAAD,EAAc,WAAd,EAA2B,WAA3B,EAAwC,WAAxC,EAAqD,WAArD,EAAkE,WAAlE,EAA+E,WAA/E,EAA4F,QAA5F,EAAsG,WAAtG,EAAmH,YAAnH,EAAiI,WAAjI,EAA8I,YAA9I,EAA4J,WAA5J,EAAyK,QAAzK,EAAmL,WAAnL,EAAgM,YAAhM,EAA8M,QAA9M,EAAwN,WAAxN,EAAqO,YAArO,EAAmP,YAAnP,EAAiQ,QAAjQ,EAA2Q,WAA3Q,EAAwR,WAAxR,EAAqS,WAArS,EAAkT,WAAlT,EAA+T,YAA/T,EAA6U,YAA7U,EAA2V,WAA3V,EAAwW,YAAxW,EAAsX,QAAtX,EAAgY,YAAhY,EAA8Y,YAA9Y,EAA4Z,OAA5Z,EAAqa,YAAra,EAAmb,WAAnb,EAAgc,WAAhc,CAApE,CAAP;AAA0hB,oBAAM7I,EAAE,CAACH,QAAD,EAAW,WAAX,CAAF,CAA0B8K,UAA1B,CAAqC,qBAArC,EAA4D9B,MAA5D,EAAoE,CAAC,QAAD,EAAW,SAAX,EAAsB,SAAtB,EAAiC,OAAjC,EAA0C,QAA1C,EAAoD,SAApD,EAA+D,QAA/D,EAAyE,OAAzE,EAAkF,QAAlF,EAA4F,OAA5F,EAAqG,SAArG,EAAgH,SAAhH,EAA2H,QAA3H,EAAqI,QAArI,EAA+I,QAA/I,EAAyJ,QAAzJ,EAAmK,QAAnK,EAA6K,SAA7K,EAAwL,OAAxL,EAAiM,SAAjM,EAA4M,OAA5M,EAAqN,QAArN,EAA+N,SAA/N,EAA0O,QAA1O,EAAoP,KAApP,EAA2P,SAA3P,EAAsQ,KAAtQ,EAA6Q,SAA7Q,EAAwR,QAAxR,EAAkS,QAAlS,EAA4S,SAA5S,EAAuT,QAAvT,EAAiU,QAAjU,EAA2U,SAA3U,EAAsV,OAAtV,EAA+V,SAA/V,CAApE,CAAhiB;AAAg9B,oBAAM7I,EAAE,CAACH,QAAD,EAAW,WAAX,CAAF,CAA0B8K,UAA1B,CAAqC,qBAArC,EAA4D9B,MAA5D,EAAoE,CAAC,WAAD,EAAc,OAAd,EAAuB,OAAvB,EAAgC,OAAhC,EAAyC,WAAzC,EAAsD,OAAtD,EAA+D,SAA/D,EAA0E,SAA1E,EAAqF,WAArF,EAAkG,OAAlG,EAA2G,SAA3G,EAAsH,SAAtH,EAAiI,WAAjI,EAA8I,SAA9I,EAAyJ,UAAzJ,EAAqK,OAArK,EAA8K,OAA9K,EAAuL,OAAvL,EAAgM,WAAhM,EAA6M,SAA7M,EAAwN,OAAxN,EAAiO,SAAjO,EAA4O,SAA5O,EAAuP,SAAvP,EAAkQ,SAAlQ,EAA6Q,SAA7Q,EAAwR,WAAxR,EAAqS,UAArS,EAAiT,MAAjT,EAAyT,SAAzT,EAAoU,SAApU,EAA+U,SAA/U,EAA0V,SAA1V,EAAqW,SAArW,EAAgX,WAAhX,EAA6X,WAA7X,CAApE,CAAt9B;AAAs6C,oBAAM7I,EAAE,CAACH,QAAD,EAAW,WAAX,CAAF,CAA0B8K,UAA1B,CAAqC,qBAArC,EAA4D9B,MAA5D,EAAoE,CAAC,WAAD,EAAc,WAAd,EAA2B,WAA3B,EAAwC,WAAxC,EAAqD,WAArD,EAAkE,WAAlE,EAA+E,WAA/E,EAA4F,WAA5F,EAAyG,WAAzG,EAAsH,YAAtH,EAAoI,WAApI,EAAiJ,YAAjJ,EAA+J,WAA/J,EAA4K,YAA5K,EAA0L,YAA1L,EAAwM,YAAxM,EAAsN,WAAtN,EAAmO,WAAnO,EAAgP,YAAhP,EAA8P,WAA9P,EAA2Q,YAA3Q,EAAyR,OAAzR,EAAkS,WAAlS,EAA+S,WAA/S,EAA4T,YAA5T,EAA0U,YAA1U,EAAwV,OAAxV,EAAiW,YAAjW,EAA+W,OAA/W,EAAwX,OAAxX,EAAiY,WAAjY,EAA8Y,OAA9Y,EAAuZ,WAAvZ,EAAoa,WAApa,EAAib,YAAjb,EAA+b,WAA/b,CAApE,CAA56C;AAA87D,oBAAM7I,EAAE,CAACH,QAAD,EAAW,WAAX,CAAF,CAA0B8K,UAA1B,CAAqC,qBAArC,EAA4D9B,MAA5D,EAAoE,CAAC,QAAD,EAAW,SAAX,EAAsB,SAAtB,EAAiC,SAAjC,EAA4C,QAA5C,EAAsD,QAAtD,EAAgE,QAAhE,EAA0E,QAA1E,EAAoF,QAApF,EAA8F,QAA9F,EAAwG,QAAxG,EAAkH,SAAlH,EAA6H,SAA7H,EAAwI,SAAxI,EAAmJ,GAAnJ,EAAwJ,QAAxJ,EAAkK,QAAlK,EAA4K,SAA5K,EAAuL,SAAvL,EAAkM,QAAlM,EAA4M,QAA5M,EAAsN,SAAtN,EAAiO,QAAjO,EAA2O,QAA3O,EAAqP,SAArP,EAAgQ,SAAhQ,EAA2Q,SAA3Q,EAAsR,SAAtR,EAAiS,QAAjS,EAA2S,QAA3S,EAAqT,QAArT,EAA+T,SAA/T,EAA0U,QAA1U,EAAoV,QAApV,EAA8V,SAA9V,EAAyW,QAAzW,CAApE,CAAp8D;AAA63E,oBAAM7I,EAAE,CAACH,QAAD,EAAW,WAAX,CAAF,CAA0B8K,UAA1B,CAAqC,qBAArC,EAA4D9B,MAA5D,EAAoE,CAAC,OAAD,EAAU,OAAV,EAAmB,WAAnB,EAAgC,YAAhC,EAA8C,WAA9C,EAA2D,WAA3D,EAAwE,WAAxE,EAAqF,WAArF,EAAkG,WAAlG,EAA+G,WAA/G,EAA4H,WAA5H,EAAyI,WAAzI,EAAsJ,OAAtJ,EAA+J,WAA/J,EAA4K,OAA5K,EAAqL,YAArL,EAAmM,OAAnM,EAA4M,WAA5M,EAAyN,YAAzN,EAAuO,OAAvO,EAAgP,OAAhP,EAAyP,OAAzP,EAAkQ,OAAlQ,EAA2Q,WAA3Q,EAAwR,WAAxR,EAAqS,WAArS,EAAkT,OAAlT,EAA2T,YAA3T,EAAyU,WAAzU,EAAsV,YAAtV,EAAoW,YAApW,EAAkX,OAAlX,EAA2X,WAA3X,EAAwY,WAAxY,EAAqZ,WAArZ,EAAka,QAAla,CAApE,CAAn4E;AAAq3F,oBAAM9I,GAAG,CAACC,EAAE,CAACH,QAAD,EAAW,WAAX,CAAH,EAA4B,UAA5B,CAAH,CAA2C8K,UAA3C,CAAsD,qBAAtD,EAA6E9B,MAA7E,CAA33F;AAAi9F,oBAAM9I,GAAG,CAACC,EAAE,CAACH,QAAD,EAAW,WAAX,CAAH,EAA4B,UAA5B,CAAH,CAA2C8K,UAA3C,CAAsD,qBAAtD,EAA6E9B,MAA7E,CAAv9F;AAA6iG,oBAAM9I,GAAG,CAACC,EAAE,CAACH,QAAD,EAAW,WAAX,CAAH,EAA4B,OAA5B,CAAH,CAAwC8K,UAAxC,CAAmD,qBAAnD,EAA0E9B,MAA1E,CAAnjG;AAAsoG,qBAAO9I,GAAG,CAACC,EAAE,CAACH,QAAD,EAAW,WAAX,CAAH,EAA4B,UAA5B,CAAH,CAA2C8K,UAA3C,CAAsD,sBAAtD,EAA8E9B,MAA9E,CAA7oG;AAAouG,oBAAM9I,GAAG,CAACC,EAAE,CAACH,QAAD,EAAW,WAAX,CAAH,EAA4B,OAA5B,CAAH,CAAwC8K,UAAxC,CAAmD,qBAAnD,EAA0E9B,MAA1E;AAA1uG,aAAtE,CAAb;AACD,WAJO,EAIL4B,oBAAoB,CAAChI,OAArB,GAA+B,CAJ1B,GAI8B3C,GAJ/B,KAIuC,kBAJ9C;AAKD,SAVD,EAUGZ,IAAI,CAAC0L,mBAAL,CAAyBjL,IAAzB,CAVH,EAUmCE,QAVnC;;AAWAX,YAAI,CAAC8C,SAAL,CAAenC,QAAQ,CAAC,CAAD,CAAvB,EAA4B,QAA5B,EAAsCF,IAAI,CAACkL,iBAAL,CAAuB,OAAvB,CAAtC;AACA,eAAOlL,IAAI,CAACmL,gBAAL,CAAsB,IAAtB,EAA4B,IAA5B,EAAkC,KAAlC,EAAyC,IAAzC,EAA+C9K,EAAE,CAACH,QAAD,EAAW,QAAX,CAAF,CAAuB0H,KAAvB,EAA/C,CAAP;AACD,OA7UD,EA6UG1H,QAAQ,CAAC,CAAD,CA7UX,EA6UgBG,EAAE,CAACH,QAAD,EAAW,MAAX,CA7UlB,EA6UsCA,QA7UtC;AA8UD,KAnVD,EAmVGA,QAAQ,CAAC,CAAD,CAnVX,EAmVgBA,QAnVhB;AAoVD,GAzVM,CAyVJA,QAAQ,CAAC,CAAD,CAzVJ,EAyVSA,QAzVT,CAAP;AA0VD,CA/WD,EA+WGX,IA/WH,E","file":"default~Dracurouge~index.js","sourcesContent":["require('./../opal');\n\n/* Generated by Opal 1.1.1 */\n(function(Opal) {\n  function $rb_plus(lhs, rhs) {\n    return (typeof(lhs) === 'number' && typeof(rhs) === 'number') ? lhs + rhs : lhs['$+'](rhs);\n  }\n  function $rb_divide(lhs, rhs) {\n    return (typeof(lhs) === 'number' && typeof(rhs) === 'number') ? lhs / rhs : lhs['$/'](rhs);\n  }\n  function $rb_le(lhs, rhs) {\n    return (typeof(lhs) === 'number' && typeof(rhs) === 'number') ? lhs <= rhs : lhs['$<='](rhs);\n  }\n  function $rb_minus(lhs, rhs) {\n    return (typeof(lhs) === 'number' && typeof(rhs) === 'number') ? lhs - rhs : lhs['$-'](rhs);\n  }\n  function $rb_lt(lhs, rhs) {\n    return (typeof(lhs) === 'number' && typeof(rhs) === 'number') ? lhs < rhs : lhs['$<'](rhs);\n  }\n  function $rb_times(lhs, rhs) {\n    return (typeof(lhs) === 'number' && typeof(rhs) === 'number') ? lhs * rhs : lhs['$*'](rhs);\n  }\n  var self = Opal.top, $nesting = [], nil = Opal.nil, $$$ = Opal.$$$, $$ = Opal.$$, $module = Opal.module, $klass = Opal.klass, $send2 = Opal.send2, $truthy = Opal.truthy, $send = Opal.send, $hash2 = Opal.hash2;\n\n  return (function($base, $parent_nesting) {\n    var self = $module($base, 'BCDice');\n\n    var $nesting = [self].concat($parent_nesting);\n\n    (function($base, $parent_nesting) {\n      var self = $module($base, 'GameSystem');\n\n      var $nesting = [self].concat($parent_nesting);\n\n      (function($base, $super, $parent_nesting) {\n        var self = $klass($base, $super, 'Dracurouge');\n\n        var $nesting = [self].concat($parent_nesting), $Dracurouge_initialize$1, $Dracurouge_eval_game_system_specific_command$2, $Dracurouge_roll_conduct_dice$3, $Dracurouge_count_glory_dice$4, $Dracurouge_apply_thirsty_point$5, $Dracurouge_roll_resist_dice$7, $Dracurouge_getReactionDiceCommandResult$8, $Dracurouge_getHeresyReactionDiceCommandResult$9, $Dracurouge_getReactionText$10, $Dracurouge_checkTypeText$11, $Dracurouge_getReactionTextFull$12, $Dracurouge_getReactionTex$14, $Dracurouge_getCorruptionDiceCommandResult$15;\n\n        self.$$prototype.randomizer = nil;\n        \n        Opal.const_set($nesting[0], 'ID', \"Dracurouge\");\n        Opal.const_set($nesting[0], 'NAME', \"ドラクルージュ\");\n        Opal.const_set($nesting[0], 'SORT_KEY', \"とらくるうしゆ\");\n        Opal.const_set($nesting[0], 'HELP_MESSAGE', \"\" + \"・行い判定（DRx+y）\\n\" + \"　x：振るサイコロの数（省略時４）、y：渇き修正（省略時０）\\n\" + \"　例） DR　DR6　DR+1　DR5+2\\n\" + \"・抗い判定（DRRx）\\n\" + \"　x：振るサイコロの数\\n\" + \"　例） DRR3\\n\" + \"・原風景表（ST）、叙勲表（CO）、叙勲後表（CA）、遥か過去表（EP）\\n\" + \"　原罪表（OS）、受難表（PN）、近況表（RS）、平和な過去表（PP）\\n\" + \"・堕落表（CTx） x：渇き （例） CT3\\n\" + \"・堕落の兆し表（CS）、拡張・堕落の兆し表（ECS）\\n\" + \"・絆内容決定表（BT）\\n\" + \"・反応表（RTxy）x：血統、y：道　xy省略で一括表示\\n\" + \"　血統　D：ドラク、R：ローゼンブルク、H：ヘルズガルド、M：ダストハイム\\n\" + \"　　　　A：アヴァローム　N：ノスフェラス、G：ゲイズヴァルト、K：カインシルト\\n\" + \"　道　F：領主、G：近衛、R：遍歴、W：賢者、J：狩人、N：夜獣\\n\" + \"　　　E：将軍、B：僧正、H：空駆、K：船長、L：寵童、V：仲立、U：技師、D：博士\\n\" + \"　　　S：星読、G2：後見\\n\" + \"　例）RT（一括表示）、RTDF（ドラクの領主）、RTAG2（アヴァロームの後見人）\\n\" + \"・異端の反応表（HRTxy）x：血統、y：道　xy省略で一括表示\\n\" + \"　血統　L：異端卿、V：ヴルコラク、N：ナハツェーラ、K：カルンシュタイン\\n\" + \"　　　　G：グリマルキン、S：ストリガ、M：メリュジーヌ、F：フォーン\\n\" + \"　　　　H：ホムンクルス、E：エナメルム、S2：サングィナリエ、A：アールヴ\\n\" + \"　　　　V2：ヴィーヴル、L2：ルーガルー、A2：アルラウネ、F2：フリッガ\\n\" + \"　道　W：野伏、N：流浪、S：密使、H：魔女、F：剣士、X：検体\\n\" + \"　例）HRT（一括表示）、HRTVW（ヴルコラクの野伏）、HRTF2X（フリッガの検体）\\n\" + \"・D66ダイスあり\\n\");\n        \n        Opal.def(self, '$initialize', $Dracurouge_initialize$1 = function $$initialize(command) {\n          var $iter = $Dracurouge_initialize$1.$$p, $yield = $iter || nil, self = this;\n\n          if ($iter) $Dracurouge_initialize$1.$$p = null;\n          \n          $send2(self, Opal.find_super_dispatcher(self, 'initialize', $Dracurouge_initialize$1, false, true), 'initialize', [command], null);\n          return (self.d66_sort_type = $$$($$($nesting, 'D66SortType'), 'NO_SORT'));\n        }, $Dracurouge_initialize$1.$$arity = 1);\n        \n        Opal.def(self, '$eval_game_system_specific_command', $Dracurouge_eval_game_system_specific_command$2 = function $$eval_game_system_specific_command(command) {\n          var self = this, $ret_or_1 = nil, $ret_or_2 = nil, $ret_or_3 = nil, $ret_or_4 = nil, $ret_or_5 = nil;\n\n          if ($truthy(($ret_or_1 = (function() {if ($truthy(($ret_or_2 = (function() {if ($truthy(($ret_or_3 = (function() {if ($truthy(($ret_or_4 = (function() {if ($truthy(($ret_or_5 = self.$roll_conduct_dice(command)))) {\n            return $ret_or_5\n          } else {\n            return self.$roll_resist_dice(command)\n          }; return nil; })()))) {\n            return $ret_or_4\n          } else {\n            return self.$getReactionDiceCommandResult(command)\n          }; return nil; })()))) {\n            return $ret_or_3\n          } else {\n            return self.$getHeresyReactionDiceCommandResult(command)\n          }; return nil; })()))) {\n            return $ret_or_2\n          } else {\n            return self.$getCorruptionDiceCommandResult(command)\n          }; return nil; })()))) {\n            return $ret_or_1\n          } else {\n            return self.$roll_tables(command, $$$(self.$class(), 'TABLES'))\n          }\n        }, $Dracurouge_eval_game_system_specific_command$2.$$arity = 1);\n        self.$private();\n        \n        Opal.def(self, '$roll_conduct_dice', $Dracurouge_roll_conduct_dice$3 = function $$roll_conduct_dice(command) {\n          var $a, self = this, m = nil, dice_count = nil, $ret_or_6 = nil, thirsty_point = nil, dice_list = nil, glory_dice = nil, calculation_process = nil, sequence = nil;\n\n          \n          m = /^DR(\\d*[1-9])?(\\+\\d+)?$/.$match(command);\n          if ($truthy(m)) {\n          } else {\n            return nil\n          };\n          dice_count = (function() {if ($truthy(($ret_or_6 = ($a = m['$[]'](1), ($a === nil || $a == null) ? nil : $send($a, 'to_i', []))))) {\n            return $ret_or_6\n          } else {\n            return 4\n          }; return nil; })();\n          thirsty_point = m['$[]'](2).$to_i();\n          dice_list = self.randomizer.$roll_barabara(dice_count, 6).$sort();\n          glory_dice = self.$count_glory_dice(dice_list);\n          dice_list = $rb_plus(dice_list, $$($nesting, 'Array').$new(glory_dice, 10));\n          calculation_process = self.$apply_thirsty_point(dice_list, thirsty_point);\n          sequence = [\"\" + \"(\" + (command) + \")\", \"\" + (dice_count) + \"D6\" + ($$($nesting, 'Format').$modifier(thirsty_point)), calculation_process, \"\" + \"[ \" + (dice_list.$join(\", \")) + \" ]\"].$compact();\n          return sequence.$join(\" ＞ \");\n        }, $Dracurouge_roll_conduct_dice$3.$$arity = 1);\n        \n        Opal.def(self, '$count_glory_dice', $Dracurouge_count_glory_dice$4 = function $$count_glory_dice(dice_list) {\n          var self = this, one_count = nil, six_count = nil;\n\n          \n          one_count = dice_list.$count(1);\n          six_count = dice_list.$count(6);\n          return $rb_plus($rb_divide(one_count, 2).$to_i(), $rb_divide(six_count, 2).$to_i());\n        }, $Dracurouge_count_glory_dice$4.$$arity = 1);\n        \n        Opal.def(self, '$apply_thirsty_point', $Dracurouge_apply_thirsty_point$5 = function $$apply_thirsty_point(dice_list, thirsty_point) {\n          var $$6, self = this, idx = nil, text_list = nil, $writer = nil;\n\n          \n          if (thirsty_point['$=='](0)) {\n            return nil};\n          idx = $send(dice_list, 'rindex', [], ($$6 = function(i){var self = $$6.$$s == null ? this : $$6.$$s;\n\n          \n            \n            if (i == null) {\n              i = nil;\n            };\n            return $rb_le(i, 6);}, $$6.$$s = self, $$6.$$arity = 1, $$6));\n          text_list = $send(dice_list, 'map', [], \"to_s\".$to_proc());\n          \n          $writer = [idx, $rb_plus(text_list['$[]'](idx), \"\" + \"+\" + (thirsty_point))];\n          $send(text_list, '[]=', Opal.to_a($writer));\n          $writer[$rb_minus($writer[\"length\"], 1)];;\n          \n          $writer = [idx, $rb_plus(dice_list['$[]'](idx), thirsty_point)];\n          $send(dice_list, '[]=', Opal.to_a($writer));\n          $writer[$rb_minus($writer[\"length\"], 1)];;\n          return \"\" + \"[ \" + (text_list.$join(\", \")) + \" ]\";\n        }, $Dracurouge_apply_thirsty_point$5.$$arity = 2);\n        \n        Opal.def(self, '$roll_resist_dice', $Dracurouge_roll_resist_dice$7 = function $$roll_resist_dice(command) {\n          var self = this, m = nil, dice_count = nil, dice_list = nil;\n\n          \n          m = /^DRR(\\d+)$/.$match(command);\n          if ($truthy(m)) {\n          } else {\n            return nil\n          };\n          dice_count = m['$[]'](1).$to_i();\n          if (dice_count['$=='](0)) {\n            dice_count = 4};\n          dice_list = self.randomizer.$roll_barabara(dice_count, 6).$sort();\n          return \"\" + \"(\" + (command) + \") ＞ \" + (dice_count) + \"D6 ＞ [ \" + (dice_list.$join(\", \")) + \" ]\";\n        }, $Dracurouge_roll_resist_dice$7.$$arity = 1);\n        \n        Opal.def(self, '$getReactionDiceCommandResult', $Dracurouge_getReactionDiceCommandResult$8 = function $$getReactionDiceCommandResult(command) {\n          var self = this, typeText1 = nil, typeText2 = nil, name = nil, blood = nil, style = nil;\n\n          \n          if ($truthy(command['$=~'](/^RT((\\w\\d*)(\\w\\d*))?/))) {\n          } else {\n            return nil\n          };\n          typeText1 = $$($nesting, 'Regexp').$last_match(2);\n          typeText2 = $$($nesting, 'Regexp').$last_match(3);\n          name = self.$translate(\"Dracurouge.RT.name\");\n          blood = self.$translate(\"Dracurouge.RT.blood\");\n          style = self.$translate(\"Dracurouge.RT.style\");\n          return self.$getReactionText(name, typeText1, typeText2, blood, style);\n        }, $Dracurouge_getReactionDiceCommandResult$8.$$arity = 1);\n        \n        Opal.def(self, '$getHeresyReactionDiceCommandResult', $Dracurouge_getHeresyReactionDiceCommandResult$9 = function $$getHeresyReactionDiceCommandResult(command) {\n          var self = this, typeText1 = nil, typeText2 = nil, name = nil, blood = nil, style = nil;\n\n          \n          if ($truthy(command['$=~'](/^HRT((\\w\\d*)(\\w\\d*))?/))) {\n          } else {\n            return nil\n          };\n          typeText1 = $$($nesting, 'Regexp').$last_match(2);\n          typeText2 = $$($nesting, 'Regexp').$last_match(3);\n          name = self.$translate(\"Dracurouge.HRT.name\");\n          blood = self.$translate(\"Dracurouge.HRT.blood\");\n          style = self.$translate(\"Dracurouge.HRT.style\");\n          return self.$getReactionText(name, typeText1, typeText2, blood, style);\n        }, $Dracurouge_getHeresyReactionDiceCommandResult$9.$$arity = 1);\n        \n        Opal.def(self, '$getReactionText', $Dracurouge_getReactionText$10 = function $$getReactionText(name, typeText1, typeText2, infos1, infos2) {\n          var self = this, ten_value = nil, one_value = nil, number = nil, isBefore = nil, infos = nil, typeText = nil, index = nil, resultText = nil, info = nil;\n\n          \n          if ($truthy(self.$checkTypeText(typeText1, infos1))) {\n          } else {\n            return nil\n          };\n          if ($truthy(self.$checkTypeText(typeText2, infos2))) {\n          } else {\n            return nil\n          };\n          ten_value = self.randomizer.$roll_once(6);\n          one_value = self.randomizer.$roll_once(6);\n          number = \"\" + (ten_value) + (one_value);\n          isBefore = $rb_lt(ten_value, 4);\n          infos = (function() {if ($truthy(isBefore)) {\n            return infos1\n          } else {\n            return infos2\n          }; return nil; })();\n          typeText = (function() {if ($truthy(isBefore)) {\n            return typeText1\n          } else {\n            return typeText2\n          }; return nil; })();\n          index = $rb_plus($rb_minus(one_value, 1), $rb_times((function() {if ($truthy(isBefore)) {\n            \n            return $rb_minus(ten_value, 1);\n          } else {\n            \n            return $rb_minus(ten_value, 4);\n          }; return nil; })(), 6));\n          self.$debug(\"index\", index);\n          if ($truthy(typeText['$nil?']())) {\n            resultText = self.$getReactionTextFull(infos, index)\n          } else {\n            \n            info = infos['$[]'](typeText.$to_sym());\n            if ($truthy(info['$nil?']())) {\n              return nil};\n            resultText = self.$getReactionTex(info, index);\n          };\n          return \"\" + (name) + \"(\" + (number) + \") ＞ \" + (resultText);\n        }, $Dracurouge_getReactionText$10.$$arity = 5);\n        \n        Opal.def(self, '$checkTypeText', $Dracurouge_checkTypeText$11 = function $$checkTypeText(typeText, infos) {\n          var self = this;\n\n          \n          if ($truthy(typeText['$nil?']())) {\n            return true};\n          return infos.$keys()['$include?'](typeText.$to_sym());\n        }, $Dracurouge_checkTypeText$11.$$arity = 2);\n        \n        Opal.def(self, '$getReactionTextFull', $Dracurouge_getReactionTextFull$12 = function $$getReactionTextFull(infos, index) {\n          var $$13, self = this, resultTexts = nil;\n\n          \n          resultTexts = [];\n          $send(infos, 'each_value', [], ($$13 = function(info){var self = $$13.$$s == null ? this : $$13.$$s;\n\n          \n            \n            if (info == null) {\n              info = nil;\n            };\n            return resultTexts['$<<'](self.$getReactionTex(info, index));}, $$13.$$s = self, $$13.$$arity = 1, $$13));\n          return resultTexts.$join(\"／\");\n        }, $Dracurouge_getReactionTextFull$12.$$arity = 2);\n        \n        Opal.def(self, '$getReactionTex', $Dracurouge_getReactionTex$14 = function $$getReactionTex(info, index) {\n          var self = this, typeName = nil, text = nil;\n\n          \n          typeName = info['$[]'](\"name\");\n          text = info['$[]'](\"table\")['$[]'](index);\n          return \"\" + (typeName) + \"：\" + (text);\n        }, $Dracurouge_getReactionTex$14.$$arity = 2);\n        \n        Opal.def(self, '$getCorruptionDiceCommandResult', $Dracurouge_getCorruptionDiceCommandResult$15 = function $$getCorruptionDiceCommandResult(command) {\n          var self = this, modify = nil, name = nil, table = nil, dice_list = nil, number = nil, number_text = nil, index = nil, text = nil;\n\n          \n          if ($truthy(command['$=~'](/^CT(\\d+)$/))) {\n          } else {\n            return nil\n          };\n          modify = $$($nesting, 'Regexp').$last_match(1).$to_i();\n          name = self.$translate(\"Dracurouge.CT.name\");\n          table = [[0, self.$translate(\"Dracurouge.CT.table.0\")], [1, self.$translate(\"Dracurouge.CT.table.1\")], [3, self.$translate(\"Dracurouge.CT.table.3\")], [5, self.$translate(\"Dracurouge.CT.table.5\")], [6, self.$translate(\"Dracurouge.CT.table.6\")], [7, self.$translate(\"Dracurouge.CT.table.7\")], [8, self.$translate(\"Dracurouge.CT.table.8\")], [99, self.$translate(\"Dracurouge.CT.table.99\")]];\n          dice_list = self.randomizer.$roll_barabara(2, 6);\n          number = dice_list.$sum();\n          number_text = dice_list.$join(\",\");\n          index = $rb_minus(number, modify);\n          self.$debug(\"index\", index);\n          text = self.$get_table_by_number(index, table);\n          return \"\" + \"2D6[\" + (number_text) + \"]-\" + (modify) + \" ＞  \" + (name) + \"(\" + (index) + \") ＞ \" + (text);\n        }, $Dracurouge_getCorruptionDiceCommandResult$15.$$arity = 1);\n        (function($base, $super, $parent_nesting) {\n          var self = $klass($base, $super, 'YearTable');\n\n          var $nesting = [self].concat($parent_nesting), $YearTable_from_i18n$16, $YearTable_initialize$17, $YearTable_roll$18, $YearTable_roll_d6x$20;\n\n          self.$$prototype.items = self.$$prototype.name = self.$$prototype.year_title = nil;\n          \n          Opal.defs(self, '$from_i18n', $YearTable_from_i18n$16 = function $$from_i18n(key, locale, years) {\n            var self = this, table = nil, items = nil;\n\n            \n            table = $$($nesting, 'I18n').$translate(key, $hash2([\"locale\", \"raise\"], {\"locale\": locale, \"raise\": true}));\n            items = table['$[]'](\"items\").$zip(years);\n            return self.$new(table['$[]'](\"name\"), table['$[]'](\"year_title\"), items);\n          }, $YearTable_from_i18n$16.$$arity = 3);\n          \n          Opal.def(self, '$initialize', $YearTable_initialize$17 = function $$initialize(name, year_title, items) {\n            var self = this;\n\n            \n            self.name = name;\n            self.year_title = year_title;\n            return (self.items = items.$freeze());\n          }, $YearTable_initialize$17.$$arity = 3);\n          \n          Opal.def(self, '$roll', $YearTable_roll$18 = function $$roll(randomizer) {\n            var $a, $b, $$19, self = this, tens = nil, ones = nil, index = nil, text = nil, year_expr = nil, interim_expr = nil, year = nil;\n\n            \n            $b = randomizer.$roll_barabara(2, 6), $a = Opal.to_ary($b), (tens = ($a[0] == null ? nil : $a[0])), (ones = ($a[1] == null ? nil : $a[1])), $b;\n            index = $rb_plus($rb_times($rb_minus(tens, 1), 6), $rb_minus(ones, 1));\n            $b = self.items['$[]'](index), $a = Opal.to_ary($b), (text = ($a[0] == null ? nil : $a[0])), (year_expr = ($a[1] == null ? nil : $a[1])), $b;\n            interim_expr = $send(year_expr, 'gsub', [/\\d+D6+/], ($$19 = function(expr){var self = $$19.$$s == null ? this : $$19.$$s;\n\n            \n              \n              if (expr == null) {\n                expr = nil;\n              };\n              return self.$roll_d6x(expr, randomizer);}, $$19.$$s = self, $$19.$$arity = 1, $$19));\n            year = $$($nesting, 'ArithmeticEvaluator').$eval(interim_expr.$gsub(\"×\", \"*\"));\n            return \"\" + (self.name) + \"(\" + (tens) + (ones) + \") ＞ \" + (text) + \" ＞ \" + (self.year_title) + \"：\" + (year_expr) + \" ＞ (\" + (interim_expr) + \") ＞ \" + (self.year_title) + \"：\" + (year) + \"年\";\n          }, $YearTable_roll$18.$$arity = 1);\n          self.$private();\n          return (Opal.def(self, '$roll_d6x', $YearTable_roll_d6x$20 = function $$roll_d6x(expr, randomizer) {\n            var $a, $b, $$21, self = this, times = nil, sides = nil, list = nil;\n\n            \n            $b = expr.$split(\"D\", 2), $a = Opal.to_ary($b), (times = ($a[0] == null ? nil : $a[0])), (sides = ($a[1] == null ? nil : $a[1])), $b;\n            times = times.$to_i();\n            list = $send($$($nesting, 'Array'), 'new', [times], ($$21 = function(){var self = $$21.$$s == null ? this : $$21.$$s, $$22;\n\n            return $send(randomizer.$roll_barabara(sides.$length(), 6).$reverse().$map(), 'with_index', [], ($$22 = function(x, idx){var self = $$22.$$s == null ? this : $$22.$$s;\n\n              \n                \n                if (x == null) {\n                  x = nil;\n                };\n                \n                if (idx == null) {\n                  idx = nil;\n                };\n                return $rb_times(x, (10)['$**'](idx).$to_i());}, $$22.$$s = self, $$22.$$arity = 2, $$22)).$sum()}, $$21.$$s = self, $$21.$$arity = 0, $$21));\n            return list.$sum();\n          }, $YearTable_roll_d6x$20.$$arity = 2), nil) && 'roll_d6x';\n        })($nesting[0], null, $nesting);\n        (function(self, $parent_nesting) {\n          var $nesting = [self].concat($parent_nesting), $translate_tables$23;\n\n          \n          self.$private();\n          return (Opal.def(self, '$translate_tables', $translate_tables$23 = function $$translate_tables(locale) {\n            var self = this;\n\n            return $hash2([\"CO\", \"CA\", \"EP\", \"OS\", \"RS\", \"PP\", \"ST\", \"PN\", \"CS\", \"ECS\", \"BT\"], {\"CO\": $$($nesting, 'YearTable').$from_i18n(\"Dracurouge.table.CO\", locale, [\"7+1D6×1D6\", \"7+1D6×1D6\", \"7+1D6×1D6\", \"7+1D6×1D6\", \"7+1D6×1D6\", \"7+1D6×1D6\", \"7+1D6×1D6\", \"10+2D6\", \"7+1D6×1D6\", \"14+1D6×1D6\", \"7+1D6×1D6\", \"10+1D6×1D6\", \"7+1D6×1D6\", \"10+2D6\", \"7+1D6×1D6\", \"14+1D6×1D6\", \"10+2D6\", \"7+1D6×1D6\", \"14+1D6×1D6\", \"18+1D6×1D6\", \"10+2D6\", \"7+1D6×1D6\", \"7+1D6×1D6\", \"7+1D6×1D6\", \"7+1D6×1D6\", \"30+1D6×1D6\", \"14+1D6×1D6\", \"7+1D6×1D6\", \"14+1D6×1D6\", \"10+2D6\", \"14+1D6×1D6\", \"14+1D6×1D6\", \"7+4D6\", \"14+1D6×1D6\", \"7+1D6×1D6\", \"7+1D6×1D6\"]), \"CA\": $$($nesting, 'YearTable').$from_i18n(\"Dracurouge.table.CA\", locale, [\"2D6×10\", \"1D6×1D6\", \"1D6×1D6\", \"2D6×5\", \"2D6×10\", \"1D6×1D6\", \"2D6×10\", \"1D6×5\", \"2D6×10\", \"2D6×3\", \"1D6×1D6\", \"1D6×1D6\", \"2D6×10\", \"2D6×10\", \"2D6×20\", \"2D6×10\", \"2D6×20\", \"1D6×1D6\", \"1D6×3\", \"1D6×1D6\", \"1D6×5\", \"2D6×10\", \"1D6×1D6\", \"2D6×10\", \"2D6\", \"1D6×1D6\", \"2D6\", \"1D6×1D6\", \"2D6×20\", \"2D6×10\", \"1D6×1D6\", \"2D6×50\", \"2D6×10\", \"1D6×1D6\", \"2D6×5\", \"1D6×1D6\"]), \"EP\": $$($nesting, 'YearTable').$from_i18n(\"Dracurouge.table.EP\", locale, [\"1D66+1300\", \"1D666\", \"1D666\", \"1D666\", \"1D66+1250\", \"1D666\", \"3D6×100\", \"2D6×100\", \"1D66+1210\", \"1D666\", \"2D6×100\", \"3D6×100\", \"1D66+1300\", \"2D6×100\", \"1D6+1250\", \"1D666\", \"1D666\", \"1D666\", \"1D66+1250\", \"2D6×100\", \"1D666\", \"3D6×100\", \"2D6×100\", \"2D6×100\", \"1D6×150\", \"2D6×100\", \"1D66+1250\", \"1D66+400\", \"1212\", \"2D6×100\", \"2D6×100\", \"1D66×10\", \"3D6×100\", \"3D6×100\", \"1D66+1300\", \"1D66+1833\"]), \"OS\": $$($nesting, 'YearTable').$from_i18n(\"Dracurouge.table.OS\", locale, [\"7+1D6×1D6\", \"7+1D6×1D6\", \"7+1D6×1D6\", \"7+1D6×1D6\", \"7+1D6×1D6\", \"7+1D6×1D6\", \"7+1D6×1D6\", \"7+1D6×1D6\", \"7+1D6×1D6\", \"13+1D6×1D6\", \"7+1D6×1D6\", \"13+1D6×1D6\", \"7+1D6×1D6\", \"13+1D6×1D6\", \"13+1D6×1D6\", \"13+1D6×1D6\", \"7+1D6×1D6\", \"7+1D6×1D6\", \"10+1D6×1D6\", \"7+1D6×1D6\", \"15+1D6×1D6\", \"6+2D6\", \"7+1D6×1D6\", \"7+1D6×1D6\", \"13+1D6×1D6\", \"35+1D6×1D6\", \"9+2D6\", \"13+1D6×1D6\", \"9+2D6\", \"6+2D6\", \"7+1D6×1D6\", \"7+2D6\", \"7+1D6×1D5\", \"7+1D6×1D6\", \"13+1D6×1D6\", \"7+1D6×1D6\"]), \"RS\": $$($nesting, 'YearTable').$from_i18n(\"Dracurouge.table.RS\", locale, [\"2D6×10\", \"1D6×1D6\", \"1D6×1D6\", \"1D6×1D6\", \"3D6×30\", \"3D6×30\", \"2D6×10\", \"2D6×10\", \"2D6×10\", \"2D6×10\", \"2D6×20\", \"1D6×1D6\", \"1D6×1D6\", \"1D6×1D6\", \"1\", \"2D6×10\", \"2D6×20\", \"1D6×1D6\", \"1D6×1D6\", \"3D6×30\", \"3D6×20\", \"1D6×1D6\", \"3D6×30\", \"3D6×20\", \"1D6×1D6\", \"1D6×1D6\", \"1D6×1D6\", \"1D6×1D6\", \"1D6×10\", \"2D6×10\", \"3D6×50\", \"1D6×1D6\", \"3D6×20\", \"2D6×10\", \"1D6×1D6\", \"3D6×50\"]), \"PP\": $$($nesting, 'YearTable').$from_i18n(\"Dracurouge.table.PP\", locale, [\"8+2D6\", \"6+2D6\", \"7+1D6×1D6\", \"15+1D6×1D6\", \"7+1D6×1D6\", \"7+1D6×1D6\", \"7+1D6×1D6\", \"7+1D6×1D6\", \"7+1D6×1D6\", \"7+1D6×1D6\", \"7+1D6×1D6\", \"7+1D6×1D6\", \"6+2D6\", \"7+1D6×1D6\", \"9+2D6\", \"15+1D6×1D6\", \"9+3D6\", \"7+1D6×1D6\", \"10+1D6×1D6\", \"9+2D6\", \"9+2D6\", \"9+3D6\", \"6+2D6\", \"7+1D6×1D6\", \"7+1D6×1D6\", \"7+1D6×1D6\", \"6+2D6\", \"10+1D6×1D6\", \"7+1D6×1D6\", \"12+1D6×1D6\", \"15+1D6×1D6\", \"9+3D6\", \"7+1D6×1D6\", \"7+1D6×1D6\", \"7+1D6×1D6\", \"12+4D6\"]), \"ST\": $$$($$($nesting, 'DiceTable'), 'D66Table').$from_i18n(\"Dracurouge.table.ST\", locale), \"PN\": $$$($$($nesting, 'DiceTable'), 'D66Table').$from_i18n(\"Dracurouge.table.PN\", locale), \"CS\": $$$($$($nesting, 'DiceTable'), 'Table').$from_i18n(\"Dracurouge.table.CS\", locale), \"ECS\": $$$($$($nesting, 'DiceTable'), 'D66Table').$from_i18n(\"Dracurouge.table.ECS\", locale), \"BT\": $$$($$($nesting, 'DiceTable'), 'Table').$from_i18n(\"Dracurouge.table.BT\", locale)})\n          }, $translate_tables$23.$$arity = 1), nil) && 'translate_tables';\n        })(Opal.get_singleton_class(self), $nesting);\n        Opal.const_set($nesting[0], 'TABLES', self.$translate_tables(\"ja_jp\"));\n        return self.$register_prefix(\"DR\", \"RT\", \"HRT\", \"CT\", $$($nesting, 'TABLES').$keys());\n      })($nesting[0], $$($nesting, 'Base'), $nesting)\n    })($nesting[0], $nesting)\n  })($nesting[0], $nesting)\n})(Opal);\n"],"sourceRoot":"webpack:///"}