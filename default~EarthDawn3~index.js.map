{"version":3,"sources":["./node_modules/bcdice/lib/bcdice/game_system/EarthDawn3.js"],"names":["require","Opal","modules","$rb_gt","lhs","rhs","$rb_lt","$rb_minus","$rb_plus","$rb_ge","self","top","$nesting","nil","$$$","$$","$module","module","$klass","klass","$send2","send2","$truthy","truthy","$send","send","$base","$parent_nesting","concat","$super","$EarthDawn_initialize$1","$EarthDawn_eval_game_system_specific_command$2","$EarthDawn_ed_step$3","$EarthDawn_getStepResult$4","$EarthDawn_getStepTable$5","$EarthDawn_rollStep$6","$$prototype","string","isFailed","const_set","$register_prefix","def","$$initialize","command","$iter","$$p","$yield","find_super_dispatcher","sort_add_dice","$$arity","$$eval_game_system_specific_command","$ed_step","$$ed_step","str","output","$getStepResult","$$getStepResult","stepTotal","step","targetNumber","hasKarmaDice","karmaDiceCount","karmaDiceType","stable","nmod","d20step","d12step","d10step","d8step","d6step","d4step","$case","excelentSuccessNumber","superSuccessNumber","goodSuccessNumber","failedNumber","$last_match","$to_i","$getStepTable","$debug","$rollStep","$to_s","$$getStepTable","mod","d20","d12","d10","d8","d6","d4","exsuc","ssuc","gsuc","nsuc","fsuc","$$rollStep","diceType","diceCount","$$7","i","$$s","$a","dice_now","dice_in","randomizer","$roll_once","$rb_le","$rb_divide","$require","$EarthDawn3_initialize$1","$EarthDawn3_eval_game_system_specific_command$2","$EarthDawn3_ed_step$3","$EarthDawn3_getStepResult$4","$EarthDawn3_getModifyText$7","$EarthDawn3_getBaseStepTable$8","$EarthDawn3_getStepInfo$9","$EarthDawn3_addStepToResult$11","$EarthDawn3_getSuccess$13","$EarthDawn3_getSuccessTable$14","$EarthDawn3_rollStep$15","$$5","$$6","diceModify","karmaDiceInfo","$writer","stepInfo","diceTypes","modify","$min","$max","$new","to_a","$getStepInfo","type","$shift","$getModifyText","$getSuccess","$$getModifyText","$$getBaseStepTable","stepTable","$$getStepInfo","$$10","baseStepTable","baseMaxStep","baseStepInfo","overStep","stepRythm","result","loopCount","index","restStepInfo","$getBaseStepTable","$last","$first","$get_table_by_number","$size","$addStepToResult","$$addStepToResult","$$12","$$getSuccess","$b","successTable","successInfo","pathetic","poor","average","good","excelent","extraordinary","$getSuccessTable","to_ary","$$getSuccessTable","$$16"],"mappings":"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","file":"default~EarthDawn3~index.js","sourcesContent":["require('./../opal');\n\n/* Generated by Opal 1.1.1 */\nOpal.modules[\"bcdice/game_system/EarthDawn\"] = function(Opal) {\n  function $rb_gt(lhs, rhs) {\n    return (typeof(lhs) === 'number' && typeof(rhs) === 'number') ? lhs > rhs : lhs['$>'](rhs);\n  }\n  function $rb_lt(lhs, rhs) {\n    return (typeof(lhs) === 'number' && typeof(rhs) === 'number') ? lhs < rhs : lhs['$<'](rhs);\n  }\n  function $rb_minus(lhs, rhs) {\n    return (typeof(lhs) === 'number' && typeof(rhs) === 'number') ? lhs - rhs : lhs['$-'](rhs);\n  }\n  function $rb_plus(lhs, rhs) {\n    return (typeof(lhs) === 'number' && typeof(rhs) === 'number') ? lhs + rhs : lhs['$+'](rhs);\n  }\n  function $rb_ge(lhs, rhs) {\n    return (typeof(lhs) === 'number' && typeof(rhs) === 'number') ? lhs >= rhs : lhs['$>='](rhs);\n  }\n  var self = Opal.top, $nesting = [], nil = Opal.nil, $$$ = Opal.$$$, $$ = Opal.$$, $module = Opal.module, $klass = Opal.klass, $send2 = Opal.send2, $truthy = Opal.truthy, $send = Opal.send;\n\n  return (function($base, $parent_nesting) {\n    var self = $module($base, 'BCDice');\n\n    var $nesting = [self].concat($parent_nesting);\n\n    (function($base, $parent_nesting) {\n      var self = $module($base, 'GameSystem');\n\n      var $nesting = [self].concat($parent_nesting);\n\n      (function($base, $super, $parent_nesting) {\n        var self = $klass($base, $super, 'EarthDawn');\n\n        var $nesting = [self].concat($parent_nesting), $EarthDawn_initialize$1, $EarthDawn_eval_game_system_specific_command$2, $EarthDawn_ed_step$3, $EarthDawn_getStepResult$4, $EarthDawn_getStepTable$5, $EarthDawn_rollStep$6;\n\n        self.$$prototype.string = self.$$prototype.isFailed = nil;\n        \n        Opal.const_set($nesting[0], 'ID', \"EarthDawn\");\n        Opal.const_set($nesting[0], 'NAME', \"アースドーン\");\n        Opal.const_set($nesting[0], 'SORT_KEY', \"ああすとおん\");\n        Opal.const_set($nesting[0], 'HELP_MESSAGE', \"\" + \"ステップダイス　(xEn+k)\\n\" + \"ステップx、目標値n(省略可能）、カルマダイスk(D2-D20)でステップダイスをロールします。\\n\" + \"振り足しも自動。\\n\" + \"例）9E　10E8　10E+D12\\n\");\n        self.$register_prefix(\"\\\\d+e\");\n        \n        Opal.def(self, '$initialize', $EarthDawn_initialize$1 = function $$initialize(command) {\n          var $iter = $EarthDawn_initialize$1.$$p, $yield = $iter || nil, self = this;\n\n          if ($iter) $EarthDawn_initialize$1.$$p = null;\n          \n          $send2(self, Opal.find_super_dispatcher(self, 'initialize', $EarthDawn_initialize$1, false, true), 'initialize', [command], null);\n          return (self.sort_add_dice = true);\n        }, $EarthDawn_initialize$1.$$arity = 1);\n        \n        Opal.def(self, '$eval_game_system_specific_command', $EarthDawn_eval_game_system_specific_command$2 = function $$eval_game_system_specific_command(command) {\n          var self = this;\n\n          return self.$ed_step(command)\n        }, $EarthDawn_eval_game_system_specific_command$2.$$arity = 1);\n        \n        Opal.def(self, '$ed_step', $EarthDawn_ed_step$3 = function $$ed_step(str) {\n          var self = this, output = nil;\n\n          \n          output = self.$getStepResult(str);\n          return output;\n        }, $EarthDawn_ed_step$3.$$arity = 1);\n        \n        Opal.def(self, '$getStepResult', $EarthDawn_getStepResult$4 = function $$getStepResult(str) {\n          var self = this, stepTotal = nil, step = nil, targetNumber = nil, hasKarmaDice = nil, karmaDiceCount = nil, karmaDiceType = nil, stable = nil, nmod = nil, d20step = nil, d12step = nil, d10step = nil, d8step = nil, d6step = nil, d4step = nil, $case = nil, output = nil, excelentSuccessNumber = nil, superSuccessNumber = nil, goodSuccessNumber = nil, failedNumber = nil;\n\n          \n          if ($truthy(/(\\d+)E(\\d+)?(\\+)?(\\d+)?(d\\d+)?/i['$=~'](str))) {\n          } else {\n            return nil\n          };\n          stepTotal = 0;\n          self.isFailed = true;\n          step = $$($nesting, 'Regexp').$last_match(1).$to_i();\n          targetNumber = 0;\n          hasKarmaDice = false;\n          karmaDiceCount = 0;\n          karmaDiceType = 0;\n          if ($truthy($rb_gt(step, 40))) {\n            step = 40};\n          if ($truthy($$($nesting, 'Regexp').$last_match(2))) {\n            \n            targetNumber = $$($nesting, 'Regexp').$last_match(2).$to_i();\n            if ($truthy($rb_gt(targetNumber, 43))) {\n              targetNumber = 42};};\n          if ($truthy($$($nesting, 'Regexp').$last_match(3))) {\n            hasKarmaDice = $$($nesting, 'Regexp').$last_match(3).$to_i()};\n          if ($truthy($$($nesting, 'Regexp').$last_match(4))) {\n            karmaDiceCount = $$($nesting, 'Regexp').$last_match(4).$to_i()};\n          if ($truthy($$($nesting, 'Regexp').$last_match(5))) {\n            karmaDiceType = $$($nesting, 'Regexp').$last_match(5)};\n          if ($truthy($rb_lt(targetNumber, 0))) {\n            return nil};\n          stable = self.$getStepTable();\n          nmod = stable['$[]'](0)['$[]']($rb_minus(step, 1));\n          d20step = stable['$[]'](1)['$[]']($rb_minus(step, 1));\n          d12step = stable['$[]'](2)['$[]']($rb_minus(step, 1));\n          d10step = stable['$[]'](3)['$[]']($rb_minus(step, 1));\n          d8step = stable['$[]'](4)['$[]']($rb_minus(step, 1));\n          d6step = stable['$[]'](5)['$[]']($rb_minus(step, 1));\n          d4step = stable['$[]'](6)['$[]']($rb_minus(step, 1));\n          if ($truthy(hasKarmaDice)) {\n            $case = karmaDiceType;\n            if (/d20/i['$===']($case)) {d20step = $rb_plus(d20step, karmaDiceCount)}\n            else if (/d12/i['$===']($case)) {d12step = $rb_plus(d12step, karmaDiceCount)}\n            else if (/d10/i['$===']($case)) {d10step = $rb_plus(d10step, karmaDiceCount)}\n            else if (/d8/i['$===']($case)) {d8step = $rb_plus(d8step, karmaDiceCount)}\n            else if (/d6/i['$===']($case)) {d6step = $rb_plus(d6step, karmaDiceCount)}\n            else if (/d4/i['$===']($case)) {d4step = $rb_plus(d4step, karmaDiceCount)}\n            else {nmod = $rb_plus(nmod, karmaDiceCount)}};\n          self.string = \"\";\n          self.$debug(\"d20step, d12step, d10step, d8step, d6step, d4step\", d20step, d12step, d10step, d8step, d6step, d4step);\n          stepTotal = $rb_plus(stepTotal, self.$rollStep(20, d20step));\n          stepTotal = $rb_plus(stepTotal, self.$rollStep(12, d12step));\n          stepTotal = $rb_plus(stepTotal, self.$rollStep(10, d10step));\n          stepTotal = $rb_plus(stepTotal, self.$rollStep(8, d8step));\n          stepTotal = $rb_plus(stepTotal, self.$rollStep(6, d6step));\n          stepTotal = $rb_plus(stepTotal, self.$rollStep(4, d4step));\n          if ($truthy($rb_gt(nmod, 0))) {\n            self.string = $rb_plus(self.string, \"+\")};\n          if ($truthy(nmod['$!='](0))) {\n            \n            self.string = $rb_plus(self.string, nmod.$to_s());\n            stepTotal = $rb_plus(stepTotal, nmod);};\n          self.string = $rb_plus(self.string, \"\" + \" ＞ \" + (stepTotal));\n          output = \"\" + \"ステップ\" + (step) + \" ＞ \" + (self.string);\n          if (targetNumber['$=='](0)) {\n            return output};\n          self.string = $rb_plus(self.string, \" ＞ \");\n          excelentSuccessNumber = stable['$[]'](7)['$[]']($rb_minus(targetNumber, 1));\n          superSuccessNumber = stable['$[]'](8)['$[]']($rb_minus(targetNumber, 1));\n          goodSuccessNumber = stable['$[]'](9)['$[]']($rb_minus(targetNumber, 1));\n          failedNumber = stable['$[]'](11)['$[]']($rb_minus(targetNumber, 1));\n          if ($truthy(self.isFailed)) {\n            self.string = $rb_plus(self.string, \"自動失敗\")\n          } else if ($truthy($rb_ge(stepTotal, excelentSuccessNumber))) {\n            self.string = $rb_plus(self.string, \"最良成功\")\n          } else if ($truthy($rb_ge(stepTotal, superSuccessNumber))) {\n            self.string = $rb_plus(self.string, \"優成功\")\n          } else if ($truthy($rb_ge(stepTotal, goodSuccessNumber))) {\n            self.string = $rb_plus(self.string, \"良成功\")\n          } else if ($truthy($rb_ge(stepTotal, targetNumber))) {\n            self.string = $rb_plus(self.string, \"成功\")\n          } else if ($truthy($rb_lt(stepTotal, failedNumber))) {\n            self.string = $rb_plus(self.string, \"大失敗\")\n          } else {\n            self.string = $rb_plus(self.string, \"失敗\")\n          };\n          output = \"\" + \"ステップ\" + (step) + \">=\" + (targetNumber) + \" ＞ \" + (self.string);\n          return output;\n        }, $EarthDawn_getStepResult$4.$$arity = 1);\n        \n        Opal.def(self, '$getStepTable', $EarthDawn_getStepTable$5 = function $$getStepTable() {\n          var self = this, mod = nil, d20 = nil, d12 = nil, d10 = nil, d8 = nil, d6 = nil, d4 = nil, exsuc = nil, ssuc = nil, gsuc = nil, nsuc = nil, fsuc = nil, stable = nil;\n\n          \n          mod = [-2, -1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\n          d20 = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 2, 2, 2, 2, 2, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\n          d12 = [0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1];\n          d10 = [0, 0, 0, 0, 0, 1, 0, 0, 0, 1, 1, 2, 1, 0, 0, 0, 1, 0, 0, 0, 1, 1, 2, 1, 1, 1, 1, 2, 1, 1, 1, 2, 3, 2, 1, 1, 1, 2, 1, 1, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 1, 2, 1];\n          d8 = [0, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0, 0, 1, 1, 2, 1, 1, 1, 2, 2, 1, 1, 1, 1, 2, 1, 1, 1, 0, 0, 1, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0, 0];\n          d6 = [0, 0, 0, 1, 0, 0, 0, 2, 1, 1, 0, 0, 0, 0, 1, 0, 0, 0, 2, 1, 1, 0, 0, 0, 0, 1, 0, 0, 0, 2, 1, 0, 0, 0, 0, 1, 0, 0, 0, 2, 0, 0, 0, 0, 1, 0, 0, 0, 2, 1, 1, 0, 0, 0];\n          d4 = [1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\n          exsuc = [6, 8, 10, 12, 14, 17, 19, 20, 22, 24, 25, 27, 29, 32, 33, 35, 37, 38, 39, 41, 42, 44, 45, 47, 48, 49, 51, 52, 54, 55, 56, 58, 59, 60, 62, 64, 65, 67, 68, 70, 71, 72];\n          ssuc = [4, 6, 8, 10, 11, 13, 15, 16, 18, 19, 21, 22, 24, 26, 27, 29, 30, 32, 33, 34, 35, 37, 38, 40, 41, 42, 43, 45, 46, 47, 48, 49, 51, 52, 53, 55, 56, 58, 59, 60, 61, 62];\n          gsuc = [2, 4, 6, 7, 9, 10, 12, 13, 14, 15, 17, 18, 20, 21, 22, 24, 25, 26, 27, 28, 29, 31, 32, 33, 34, 35, 36, 38, 39, 40, 41, 42, 43, 45, 46, 47, 48, 50, 51, 52, 53, 54];\n          nsuc = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42];\n          fsuc = [0, 1, 1, 1, 1, 2, 2, 3, 4, 5, 5, 6, 6, 7, 8, 8, 9, 10, 11, 12, 13, 13, 14, 15, 16, 17, 18, 18, 18, 20, 21, 22, 23, 23, 24, 25, 26, 26, 27, 28, 29, 30];\n          stable = [mod, d20, d12, d10, d8, d6, d4, exsuc, ssuc, gsuc, nsuc, fsuc];\n          return stable;\n        }, $EarthDawn_getStepTable$5.$$arity = 0);\n        return (Opal.def(self, '$rollStep', $EarthDawn_rollStep$6 = function $$rollStep(diceType, diceCount) {\n          var $$7, self = this, stepTotal = nil;\n\n          \n          self.$debug(\"rollStep diceType, diceCount, @string\", diceType, diceCount, self.string);\n          stepTotal = 0;\n          if ($truthy($rb_gt(diceCount, 0))) {\n          } else {\n            return stepTotal\n          };\n          if ($truthy(self.string['$empty?']())) {\n          } else {\n            self.string = $rb_plus(self.string, \"+\")\n          };\n          self.string = $rb_plus(self.string, \"\" + (diceCount) + \"d\" + (diceType) + \"[\");\n          self.$debug(\"rollStep @string\", self.string);\n          $send(diceCount, 'times', [], ($$7 = function(i){var self = $$7.$$s == null ? this : $$7.$$s, $a, dice_now = nil, dice_in = nil;\n            if (self.randomizer == null) self.randomizer = nil;\n            if (self.string == null) self.string = nil;\n\n          \n            \n            if (i == null) {\n              i = nil;\n            };\n            dice_now = self.randomizer.$roll_once(diceType);\n            if ($truthy(dice_now['$!='](1))) {\n              self.isFailed = false};\n            dice_in = dice_now;\n            while (dice_now['$=='](diceType)) {\n              \n              dice_now = self.randomizer.$roll_once(diceType);\n              dice_in = $rb_plus(dice_in, dice_now);\n            };\n            stepTotal = $rb_plus(stepTotal, dice_in);\n            if ($truthy(i['$!='](0))) {\n              self.string = $rb_plus(self.string, \",\")};\n            return (self.string = $rb_plus(self.string, dice_in.$to_s()));}, $$7.$$s = self, $$7.$$arity = 1, $$7));\n          self.string = $rb_plus(self.string, \"]\");\n          return stepTotal;\n        }, $EarthDawn_rollStep$6.$$arity = 2), nil) && 'rollStep';\n      })($nesting[0], $$($nesting, 'Base'), $nesting)\n    })($nesting[0], $nesting)\n  })($nesting[0], $nesting)\n};\n\n/* Generated by Opal 1.1.1 */\n(function(Opal) {\n  function $rb_minus(lhs, rhs) {\n    return (typeof(lhs) === 'number' && typeof(rhs) === 'number') ? lhs - rhs : lhs['$-'](rhs);\n  }\n  function $rb_lt(lhs, rhs) {\n    return (typeof(lhs) === 'number' && typeof(rhs) === 'number') ? lhs < rhs : lhs['$<'](rhs);\n  }\n  function $rb_plus(lhs, rhs) {\n    return (typeof(lhs) === 'number' && typeof(rhs) === 'number') ? lhs + rhs : lhs['$+'](rhs);\n  }\n  function $rb_gt(lhs, rhs) {\n    return (typeof(lhs) === 'number' && typeof(rhs) === 'number') ? lhs > rhs : lhs['$>'](rhs);\n  }\n  function $rb_le(lhs, rhs) {\n    return (typeof(lhs) === 'number' && typeof(rhs) === 'number') ? lhs <= rhs : lhs['$<='](rhs);\n  }\n  function $rb_divide(lhs, rhs) {\n    return (typeof(lhs) === 'number' && typeof(rhs) === 'number') ? lhs / rhs : lhs['$/'](rhs);\n  }\n  function $rb_ge(lhs, rhs) {\n    return (typeof(lhs) === 'number' && typeof(rhs) === 'number') ? lhs >= rhs : lhs['$>='](rhs);\n  }\n  var self = Opal.top, $nesting = [], nil = Opal.nil, $$$ = Opal.$$$, $$ = Opal.$$, $module = Opal.module, $klass = Opal.klass, $send2 = Opal.send2, $truthy = Opal.truthy, $send = Opal.send;\n\n  \n  self.$require(\"bcdice/game_system/EarthDawn\");\n  return (function($base, $parent_nesting) {\n    var self = $module($base, 'BCDice');\n\n    var $nesting = [self].concat($parent_nesting);\n\n    (function($base, $parent_nesting) {\n      var self = $module($base, 'GameSystem');\n\n      var $nesting = [self].concat($parent_nesting);\n\n      (function($base, $super, $parent_nesting) {\n        var self = $klass($base, $super, 'EarthDawn3');\n\n        var $nesting = [self].concat($parent_nesting), $EarthDawn3_initialize$1, $EarthDawn3_eval_game_system_specific_command$2, $EarthDawn3_ed_step$3, $EarthDawn3_getStepResult$4, $EarthDawn3_getModifyText$7, $EarthDawn3_getBaseStepTable$8, $EarthDawn3_getStepInfo$9, $EarthDawn3_addStepToResult$11, $EarthDawn3_getSuccess$13, $EarthDawn3_getSuccessTable$14, $EarthDawn3_rollStep$15;\n\n        self.$$prototype.string = self.$$prototype.isFailed = nil;\n        \n        Opal.const_set($nesting[0], 'ID', \"EarthDawn3\");\n        Opal.const_set($nesting[0], 'NAME', \"アースドーン3版\");\n        Opal.const_set($nesting[0], 'SORT_KEY', \"ああすとおん3\");\n        Opal.const_set($nesting[0], 'HELP_MESSAGE', \"\" + \"ステップダイス　(xEn+k)\\n\" + \"ステップx、目標値n(省略可能）、カルマダイスk(D2～D20)でステップダイスをロールします。\\n\" + \"振り足しも自動。\\n\" + \"例）ステップ10：10E\\n\" + \"　　ステップ10、目標値8：10E8\\n\" + \"　　ステップ12、目標値8、カルマダイスD12：10E8+1D6\\n\");\n        self.$register_prefix(\"\\\\d+e\");\n        \n        Opal.def(self, '$initialize', $EarthDawn3_initialize$1 = function $$initialize(command) {\n          var $iter = $EarthDawn3_initialize$1.$$p, $yield = $iter || nil, self = this;\n\n          if ($iter) $EarthDawn3_initialize$1.$$p = null;\n          \n          $send2(self, Opal.find_super_dispatcher(self, 'initialize', $EarthDawn3_initialize$1, false, true), 'initialize', [command], null);\n          return (self.sort_add_dice = true);\n        }, $EarthDawn3_initialize$1.$$arity = 1);\n        \n        Opal.def(self, '$eval_game_system_specific_command', $EarthDawn3_eval_game_system_specific_command$2 = function $$eval_game_system_specific_command(command) {\n          var self = this;\n\n          return self.$ed_step(command)\n        }, $EarthDawn3_eval_game_system_specific_command$2.$$arity = 1);\n        \n        Opal.def(self, '$ed_step', $EarthDawn3_ed_step$3 = function $$ed_step(str) {\n          var self = this, output = nil;\n\n          \n          output = self.$getStepResult(str);\n          return output;\n        }, $EarthDawn3_ed_step$3.$$arity = 1);\n        \n        Opal.def(self, '$getStepResult', $EarthDawn3_getStepResult$4 = function $$getStepResult(str) {\n          var $$5, $$6, self = this, stepTotal = nil, step = nil, targetNumber = nil, hasKarmaDice = nil, karmaDiceCount = nil, karmaDiceType = nil, diceModify = nil, karmaDiceInfo = nil, $writer = nil, stepInfo = nil, diceTypes = nil, modify = nil, output = nil;\n\n          \n          if ($truthy(/^(\\d+)E(\\d+)?(\\+(\\d*)D(\\d+))?(\\+\\d)?/i['$=~'](str))) {\n          } else {\n            return nil\n          };\n          stepTotal = 0;\n          self.isFailed = true;\n          step = $$($nesting, 'Regexp').$last_match(1).$to_i();\n          targetNumber = [$$($nesting, 'Regexp').$last_match(2).$to_i(), 20].$min();\n          hasKarmaDice = $$($nesting, 'Regexp').$last_match(3)['$nil?']()['$!']();\n          karmaDiceCount = [1, $$($nesting, 'Regexp').$last_match(4).$to_i()].$max();\n          karmaDiceType = $$($nesting, 'Regexp').$last_match(5).$to_i();\n          diceModify = $$($nesting, 'Regexp').$last_match(6).$to_i();\n          karmaDiceInfo = $$($nesting, 'Hash').$new(0);\n          if ($truthy(hasKarmaDice)) {\n            \n            $writer = [karmaDiceType, karmaDiceCount];\n            $send(karmaDiceInfo, '[]=', Opal.to_a($writer));\n            $writer[$rb_minus($writer[\"length\"], 1)];};\n          if ($truthy($rb_lt(targetNumber, 0))) {\n            return nil};\n          stepInfo = self.$getStepInfo(step);\n          self.$debug(\"stepInfo\", stepInfo);\n          self.string = \"\";\n          diceTypes = [20, 12, 10, 8, 6, 4];\n          $send(diceTypes, 'each', [], ($$5 = function(type){var self = $$5.$$s == null ? this : $$5.$$s;\n\n          \n            \n            if (type == null) {\n              type = nil;\n            };\n            return (stepTotal = $rb_plus(stepTotal, self.$rollStep(type, stepInfo.$shift())));}, $$5.$$s = self, $$5.$$arity = 1, $$5));\n          modify = stepInfo.$shift();\n          $send(karmaDiceInfo, 'each', [], ($$6 = function(diceType, diceCount){var self = $$6.$$s == null ? this : $$6.$$s;\n\n          \n            \n            if (diceType == null) {\n              diceType = nil;\n            };\n            \n            if (diceCount == null) {\n              diceCount = nil;\n            };\n            return (stepTotal = $rb_plus(stepTotal, self.$rollStep(diceType, diceCount)));}, $$6.$$s = self, $$6.$$arity = 2, $$6));\n          self.string = $rb_plus(self.string, $rb_plus(self.$getModifyText(modify), self.$getModifyText(diceModify)));\n          stepTotal = $rb_plus(stepTotal, $rb_plus(modify, diceModify));\n          self.string = $rb_plus(self.string, \"\" + \" ＞ \" + (stepTotal));\n          output = \"\" + \"ステップ\" + (step) + \" ＞ \" + (self.string);\n          if (targetNumber['$=='](0)) {\n            return output};\n          self.string = $rb_plus(self.string, $rb_plus(\" ＞ \", self.$getSuccess(targetNumber, stepTotal)));\n          output = \"\" + \"ステップ\" + (step) + \">=\" + (targetNumber) + \" ＞ \" + (self.string);\n          return output;\n        }, $EarthDawn3_getStepResult$4.$$arity = 1);\n        \n        Opal.def(self, '$getModifyText', $EarthDawn3_getModifyText$7 = function $$getModifyText(modify) {\n          var self = this;\n\n          \n          self.string = \"\";\n          if (modify['$=='](0)) {\n            return self.string};\n          if ($truthy($rb_gt(modify, 0))) {\n            self.string = $rb_plus(self.string, \"+\")};\n          self.string = $rb_plus(self.string, modify.$to_s());\n          return self.string;\n        }, $EarthDawn3_getModifyText$7.$$arity = 1);\n        \n        Opal.def(self, '$getBaseStepTable', $EarthDawn3_getBaseStepTable$8 = function $$getBaseStepTable() {\n          var self = this, stepTable = nil;\n\n          \n          stepTable = [[1, [0, 0, 0, 0, 1, 0, -3]], [2, [0, 0, 0, 0, 1, 0, -2]], [3, [0, 0, 0, 0, 1, 0, -1]], [4, [0, 0, 0, 0, 1, 0, 0]], [5, [0, 0, 0, 1, 0, 0, 0]], [6, [0, 0, 1, 0, 0, 0, 0]], [7, [0, 1, 0, 0, 0, 0, 0]]];\n          return stepTable;\n        }, $EarthDawn3_getBaseStepTable$8.$$arity = 0);\n        \n        Opal.def(self, '$getStepInfo', $EarthDawn3_getStepInfo$9 = function $$getStepInfo(step) {\n          var $$10, self = this, baseStepTable = nil, baseMaxStep = nil, baseStepInfo = nil, overStep = nil, stepRythm = nil, result = nil, loopCount = nil, index = nil, restStepInfo = nil;\n\n          \n          baseStepTable = self.$getBaseStepTable();\n          baseMaxStep = baseStepTable.$last().$first();\n          if ($truthy($rb_le(step, baseMaxStep))) {\n            return self.$get_table_by_number(step, baseStepTable)};\n          baseStepInfo = [0, 1, 0, 0, 0, 0, 0];\n          overStep = $rb_minus($rb_minus(step, baseMaxStep), 1);\n          stepRythm = [[0, 0, 0, 0, 2, 0, 0], [0, 0, 0, 1, 1, 0, 0], [0, 0, 0, 2, 0, 0, 0], [0, 0, 1, 1, 0, 0, 0], [0, 0, 2, 0, 0, 0, 0], [0, 1, 1, 0, 0, 0, 0], [0, 2, 0, 0, 0, 0, 0]];\n          result = [0, 0, 0, 0, 0, 0, 0];\n          loopCount = $rb_divide(overStep, stepRythm.$size()).$to_i();\n          $send(loopCount, 'times', [], ($$10 = function(){var self = $$10.$$s == null ? this : $$10.$$s;\n\n          return self.$addStepToResult(result, baseStepInfo)}, $$10.$$s = self, $$10.$$arity = 0, $$10));\n          index = overStep['$%'](stepRythm.$size());\n          restStepInfo = stepRythm['$[]'](index);\n          self.$addStepToResult(result, restStepInfo);\n          return result;\n        }, $EarthDawn3_getStepInfo$9.$$arity = 1);\n        \n        Opal.def(self, '$addStepToResult', $EarthDawn3_addStepToResult$11 = function $$addStepToResult(result, step) {\n          var $$12, self = this;\n\n          \n          $send(result.$size(), 'times', [], ($$12 = function(i){var self = $$12.$$s == null ? this : $$12.$$s, $writer = nil;\n\n          \n            \n            if (i == null) {\n              i = nil;\n            };\n            $writer = [i, $rb_plus(result['$[]'](i), step['$[]'](i))];\n            $send(result, '[]=', Opal.to_a($writer));\n            return $writer[$rb_minus($writer[\"length\"], 1)];}, $$12.$$s = self, $$12.$$arity = 1, $$12));\n          return result;\n        }, $EarthDawn3_addStepToResult$11.$$arity = 2);\n        \n        Opal.def(self, '$getSuccess', $EarthDawn3_getSuccess$13 = function $$getSuccess(targetNumber, stepTotal) {\n          var $a, $b, self = this, successTable = nil, successInfo = nil, pathetic = nil, poor = nil, average = nil, good = nil, excelent = nil, extraordinary = nil;\n\n          \n          if ($truthy(self.isFailed)) {\n            return \"自動失敗\"};\n          successTable = self.$getSuccessTable();\n          successInfo = self.$get_table_by_number(targetNumber, successTable);\n          $b = successInfo, $a = Opal.to_ary($b), (pathetic = ($a[0] == null ? nil : $a[0])), (poor = ($a[1] == null ? nil : $a[1])), (average = ($a[2] == null ? nil : $a[2])), (good = ($a[3] == null ? nil : $a[3])), (excelent = ($a[4] == null ? nil : $a[4])), (extraordinary = ($a[5] == null ? nil : $a[5])), $b;\n          if ($truthy($rb_ge(stepTotal, extraordinary))) {\n            return \"Extraordinary(極上)\"};\n          if ($truthy($rb_ge(stepTotal, excelent))) {\n            return \"Excelent(最高)\"};\n          if ($truthy($rb_ge(stepTotal, good))) {\n            return \"Good(上出来)\"};\n          if ($truthy($rb_ge(stepTotal, average))) {\n            return \"Average(そこそこ)\"};\n          if ($truthy($rb_ge(stepTotal, poor))) {\n            return \"Poor(お粗末)\"};\n          if ($truthy($rb_ge(stepTotal, pathetic))) {\n            return \"Pathetic(惨め)\"\n          } else {\n            return nil\n          };\n        }, $EarthDawn3_getSuccess$13.$$arity = 2);\n        \n        Opal.def(self, '$getSuccessTable', $EarthDawn3_getSuccessTable$14 = function $$getSuccessTable() {\n          var self = this, successTable = nil;\n\n          \n          successTable = [[2, [0, 1, 2, 5, 7, 9]], [3, [0, 1, 3, 6, 8, 10]], [4, [0, 1, 4, 7, 10, 12]], [5, [1, 2, 5, 8, 11, 14]], [6, [1, 2, 6, 9, 13, 17]], [7, [1, 3, 7, 11, 15, 19]], [8, [1, 4, 8, 13, 16, 20]], [9, [1, 5, 9, 15, 18, 22]], [10, [1, 6, 10, 16, 20, 24]], [11, [1, 6, 11, 17, 21, 25]], [12, [1, 7, 12, 18, 23, 27]], [13, [1, 7, 13, 20, 25, 29]], [14, [1, 8, 14, 21, 26, 31]], [15, [1, 9, 15, 23, 27, 31]], [16, [1, 10, 16, 24, 28, 33]], [17, [1, 11, 17, 25, 30, 34]], [18, [1, 12, 18, 26, 31, 36]], [19, [1, 12, 19, 28, 33, 37]], [20, [1, 13, 20, 29, 34, 39]], [21, [1, 14, 21, 30, 36, 41]], [22, [1, 15, 22, 31, 37, 42]], [23, [1, 16, 23, 33, 38, 43]], [24, [1, 16, 24, 34, 39, 44]], [25, [1, 17, 25, 35, 41, 46]], [26, [1, 18, 26, 36, 42, 47]], [27, [1, 19, 27, 37, 43, 49]], [28, [1, 19, 28, 39, 45, 50]], [29, [1, 21, 29, 40, 46, 51]], [30, [1, 21, 30, 41, 47, 53]], [31, [1, 22, 31, 42, 48, 54]], [32, [1, 23, 32, 43, 49, 55]], [33, [1, 24, 33, 45, 51, 57]], [34, [1, 24, 34, 46, 52, 58]], [35, [1, 25, 35, 47, 53, 60]], [36, [1, 26, 36, 48, 54, 60]], [37, [1, 27, 37, 49, 56, 62]], [38, [1, 28, 38, 51, 57, 63]], [39, [1, 29, 39, 52, 58, 64]], [40, [1, 30, 40, 53, 59, 66]]];\n          return successTable;\n        }, $EarthDawn3_getSuccessTable$14.$$arity = 0);\n        return (Opal.def(self, '$rollStep', $EarthDawn3_rollStep$15 = function $$rollStep(diceType, diceCount) {\n          var $$16, self = this, stepTotal = nil;\n\n          \n          self.$debug(\"rollStep diceType, diceCount, @string\", diceType, diceCount, self.string);\n          stepTotal = 0;\n          if ($truthy($rb_gt(diceCount, 0))) {\n          } else {\n            return stepTotal\n          };\n          if ($truthy(self.string['$empty?']())) {\n          } else {\n            self.string = $rb_plus(self.string, \"+\")\n          };\n          self.string = $rb_plus(self.string, \"\" + (diceCount) + \"d\" + (diceType) + \"[\");\n          self.$debug(\"rollStep @string\", self.string);\n          $send(diceCount, 'times', [], ($$16 = function(i){var self = $$16.$$s == null ? this : $$16.$$s, $a, dice_now = nil, dice_in = nil;\n            if (self.randomizer == null) self.randomizer = nil;\n            if (self.string == null) self.string = nil;\n\n          \n            \n            if (i == null) {\n              i = nil;\n            };\n            dice_now = self.randomizer.$roll_once(diceType);\n            if ($truthy(dice_now['$!='](1))) {\n              self.isFailed = false};\n            dice_in = dice_now;\n            while (dice_now['$=='](diceType)) {\n              \n              dice_now = self.randomizer.$roll_once(diceType);\n              dice_in = $rb_plus(dice_in, dice_now);\n            };\n            stepTotal = $rb_plus(stepTotal, dice_in);\n            if ($truthy(i['$!='](0))) {\n              self.string = $rb_plus(self.string, \",\")};\n            return (self.string = $rb_plus(self.string, dice_in.$to_s()));}, $$16.$$s = self, $$16.$$arity = 1, $$16));\n          self.string = $rb_plus(self.string, \"]\");\n          return stepTotal;\n        }, $EarthDawn3_rollStep$15.$$arity = 2), nil) && 'rollStep';\n      })($nesting[0], $$($nesting, 'EarthDawn'), $nesting)\n    })($nesting[0], $nesting)\n  })($nesting[0], $nesting);\n})(Opal);\n"],"sourceRoot":"webpack:///"}