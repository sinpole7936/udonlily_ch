{"version":3,"sources":["./node_modules/bcdice/lib/bcdice/game_system/EmbryoMachine.js"],"names":["require","Opal","$rb_le","lhs","rhs","$rb_ge","$rb_plus","$rb_gt","$rb_lt","$rb_minus","self","top","$nesting","nil","$$$","$$","$module","module","$klass","klass","$send2","send2","$send","send","$truthy","truthy","$base","$parent_nesting","concat","$super","$EmbryoMachine_initialize$1","$EmbryoMachine_replace_text$2","$EmbryoMachine_result_nd10$11","$EmbryoMachine_checkRoll$12","$EmbryoMachine_eval_game_system_specific_command$13","$EmbryoMachine_get_hit_location_table$14","$EmbryoMachine_get_shoot_fumble_table$15","$EmbryoMachine_get_melee_fumble_table$16","$EmbryoMachine_get_hit_level_table$17","$$prototype","randomizer","const_set","$register_prefix","def","$$initialize","command","$iter","$$p","$yield","find_super_dispatcher","sort_add_dice","$$arity","$$replace_text","string","$$3","$$4","$$5","$$6","$$7","$$8","$$9","$$10","$$s","$last_match","$$result_nd10","total","dice_total","_dice_list","cmp_op","target","$fumble","$critical","$nothing","$success","$failure","$$checkRoll","diff","crit","fumble","mod","modText","dice_arr","dice_now","dice_str","dice_loc","big_dice","output","total_n","$replace_text","$to_i","$eval","$roll_barabara","$sort","$sum","$join","$roll_sum","$to_s","$get_hit_level_table","$get_hit_location_table","$$eval_game_system_specific_command","result","type","number","$case","$debug","$checkRoll","$get_shoot_fumble_table","$get_melee_fumble_table","$$get_hit_location_table","num","table","$get_table_by_number","$$get_shoot_fumble_table","dc","$$get_melee_fumble_table","$$get_hit_level_table"],"mappings":"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","file":"default~EmbryoMachine~index.js","sourcesContent":["require('./../opal');\n\n/* Generated by Opal 1.1.1 */\n(function(Opal) {\n  function $rb_le(lhs, rhs) {\n    return (typeof(lhs) === 'number' && typeof(rhs) === 'number') ? lhs <= rhs : lhs['$<='](rhs);\n  }\n  function $rb_ge(lhs, rhs) {\n    return (typeof(lhs) === 'number' && typeof(rhs) === 'number') ? lhs >= rhs : lhs['$>='](rhs);\n  }\n  function $rb_plus(lhs, rhs) {\n    return (typeof(lhs) === 'number' && typeof(rhs) === 'number') ? lhs + rhs : lhs['$+'](rhs);\n  }\n  function $rb_gt(lhs, rhs) {\n    return (typeof(lhs) === 'number' && typeof(rhs) === 'number') ? lhs > rhs : lhs['$>'](rhs);\n  }\n  function $rb_lt(lhs, rhs) {\n    return (typeof(lhs) === 'number' && typeof(rhs) === 'number') ? lhs < rhs : lhs['$<'](rhs);\n  }\n  function $rb_minus(lhs, rhs) {\n    return (typeof(lhs) === 'number' && typeof(rhs) === 'number') ? lhs - rhs : lhs['$-'](rhs);\n  }\n  var self = Opal.top, $nesting = [], nil = Opal.nil, $$$ = Opal.$$$, $$ = Opal.$$, $module = Opal.module, $klass = Opal.klass, $send2 = Opal.send2, $send = Opal.send, $truthy = Opal.truthy;\n\n  return (function($base, $parent_nesting) {\n    var self = $module($base, 'BCDice');\n\n    var $nesting = [self].concat($parent_nesting);\n\n    (function($base, $parent_nesting) {\n      var self = $module($base, 'GameSystem');\n\n      var $nesting = [self].concat($parent_nesting);\n\n      (function($base, $super, $parent_nesting) {\n        var self = $klass($base, $super, 'EmbryoMachine');\n\n        var $nesting = [self].concat($parent_nesting), $EmbryoMachine_initialize$1, $EmbryoMachine_replace_text$2, $EmbryoMachine_result_nd10$11, $EmbryoMachine_checkRoll$12, $EmbryoMachine_eval_game_system_specific_command$13, $EmbryoMachine_get_hit_location_table$14, $EmbryoMachine_get_shoot_fumble_table$15, $EmbryoMachine_get_melee_fumble_table$16, $EmbryoMachine_get_hit_level_table$17;\n\n        self.$$prototype.randomizer = nil;\n        \n        Opal.const_set($nesting[0], 'ID', \"EmbryoMachine\");\n        Opal.const_set($nesting[0], 'NAME', \"エムブリオマシンRPG\");\n        Opal.const_set($nesting[0], 'SORT_KEY', \"えむふりおましんRPG\");\n        Opal.const_set($nesting[0], 'HELP_MESSAGE', \"\" + \"・判定ロール(EMt+m@c#f)\\n\" + \"　目標値t、修正値m、クリティカル値c(省略時は20)、ファンブル値f(省略時は2)で攻撃判定を行います。\\n\" + \"　命中した場合は命中レベルと命中部位も自動出力します。\\n\" + \"　Rコマンドに読み替えされます。\\n\" + \"・各種表\\n\" + \"　・命中部位表　HLT\\n\" + \"　・白兵攻撃ファンブル表　MFT\\n\" + \"　・射撃攻撃ファンブル表　SFT\\n\");\n        self.$register_prefix(\"EM\", \"HLT\", \"MFT\", \"SFT\", \"2R10\");\n        \n        Opal.def(self, '$initialize', $EmbryoMachine_initialize$1 = function $$initialize(command) {\n          var $iter = $EmbryoMachine_initialize$1.$$p, $yield = $iter || nil, self = this;\n\n          if ($iter) $EmbryoMachine_initialize$1.$$p = null;\n          \n          $send2(self, Opal.find_super_dispatcher(self, 'initialize', $EmbryoMachine_initialize$1, false, true), 'initialize', [command], null);\n          return (self.sort_add_dice = true);\n        }, $EmbryoMachine_initialize$1.$$arity = 1);\n        \n        Opal.def(self, '$replace_text', $EmbryoMachine_replace_text$2 = function $$replace_text(string) {\n          var $$3, $$4, $$5, $$6, $$7, $$8, $$9, $$10, self = this;\n\n          return $send($send($send($send($send($send($send($send(string, 'gsub', [/EM(\\d+)([+\\-][+\\-\\d]+)(@(\\d+))(\\#(\\d+))/i], ($$3 = function(){var self = $$3.$$s == null ? this : $$3.$$s;\n\n          return \"\" + \"2R10\" + ($$($nesting, 'Regexp').$last_match(2)) + \">=\" + ($$($nesting, 'Regexp').$last_match(1)) + \"[\" + ($$($nesting, 'Regexp').$last_match(4)) + \",\" + ($$($nesting, 'Regexp').$last_match(6)) + \"]\"}, $$3.$$s = self, $$3.$$arity = 0, $$3)), 'gsub', [/EM(\\d+)([+\\-][+\\-\\d]+)(\\#(\\d+))/i], ($$4 = function(){var self = $$4.$$s == null ? this : $$4.$$s;\n\n          return \"\" + \"2R10\" + ($$($nesting, 'Regexp').$last_match(2)) + \">=\" + ($$($nesting, 'Regexp').$last_match(1)) + \"[20,\" + ($$($nesting, 'Regexp').$last_match(4)) + \"]\"}, $$4.$$s = self, $$4.$$arity = 0, $$4)), 'gsub', [/EM(\\d+)([+\\-][+\\-\\d]+)(@(\\d+))/i], ($$5 = function(){var self = $$5.$$s == null ? this : $$5.$$s;\n\n          return \"\" + \"2R10\" + ($$($nesting, 'Regexp').$last_match(2)) + \">=\" + ($$($nesting, 'Regexp').$last_match(1)) + \"[\" + ($$($nesting, 'Regexp').$last_match(4)) + \",2]\"}, $$5.$$s = self, $$5.$$arity = 0, $$5)), 'gsub', [/EM(\\d+)([+\\-][+\\-\\d]+)/i], ($$6 = function(){var self = $$6.$$s == null ? this : $$6.$$s;\n\n          return \"\" + \"2R10\" + ($$($nesting, 'Regexp').$last_match(2)) + \">=\" + ($$($nesting, 'Regexp').$last_match(1)) + \"[20,2]\"}, $$6.$$s = self, $$6.$$arity = 0, $$6)), 'gsub', [/EM(\\d+)(@(\\d+))(\\#(\\d+))/i], ($$7 = function(){var self = $$7.$$s == null ? this : $$7.$$s;\n\n          return \"\" + \"2R10>=\" + ($$($nesting, 'Regexp').$last_match(1)) + \"[\" + ($$($nesting, 'Regexp').$last_match(3)) + \",\" + ($$($nesting, 'Regexp').$last_match(5)) + \"]\"}, $$7.$$s = self, $$7.$$arity = 0, $$7)), 'gsub', [/EM(\\d+)(\\#(\\d+))/i], ($$8 = function(){var self = $$8.$$s == null ? this : $$8.$$s;\n\n          return \"\" + \"2R10>=\" + ($$($nesting, 'Regexp').$last_match(1)) + \"[20,\" + ($$($nesting, 'Regexp').$last_match(3)) + \"]\"}, $$8.$$s = self, $$8.$$arity = 0, $$8)), 'gsub', [/EM(\\d+)(@(\\d+))/i], ($$9 = function(){var self = $$9.$$s == null ? this : $$9.$$s;\n\n          return \"\" + \"2R10>=\" + ($$($nesting, 'Regexp').$last_match(1)) + \"[\" + ($$($nesting, 'Regexp').$last_match(3)) + \",2]\"}, $$9.$$s = self, $$9.$$arity = 0, $$9)), 'gsub', [/EM(\\d+)/i], ($$10 = function(){var self = $$10.$$s == null ? this : $$10.$$s;\n\n          return \"\" + \"2R10>=\" + ($$($nesting, 'Regexp').$last_match(1)) + \"[20,2]\"}, $$10.$$s = self, $$10.$$arity = 0, $$10))\n        }, $EmbryoMachine_replace_text$2.$$arity = 1);\n        \n        Opal.def(self, '$result_nd10', $EmbryoMachine_result_nd10$11 = function $$result_nd10(total, dice_total, _dice_list, cmp_op, target) {\n          var self = this;\n\n          \n          if (cmp_op['$=='](\">=\")) {\n          } else {\n            return nil\n          };\n          if ($truthy($rb_le(dice_total, 2))) {\n            return $$($nesting, 'Result').$fumble(\"ファンブル\")\n          } else if ($truthy($rb_ge(dice_total, 20))) {\n            return $$($nesting, 'Result').$critical(\"クリティカル\")\n          } else if (target['$=='](\"?\")) {\n            return $$($nesting, 'Result').$nothing()\n          } else if ($truthy($rb_ge(total, target))) {\n            return $$($nesting, 'Result').$success(\"成功\")\n          } else {\n            return $$($nesting, 'Result').$failure(\"失敗\")\n          };\n        }, $EmbryoMachine_result_nd10$11.$$arity = 5);\n        \n        Opal.def(self, '$checkRoll', $EmbryoMachine_checkRoll$12 = function $$checkRoll(string) {\n          var self = this, diff = nil, crit = nil, fumble = nil, mod = nil, modText = nil, dice_arr = nil, dice_now = nil, dice_str = nil, dice_loc = nil, big_dice = nil, output = nil, total_n = nil;\n\n          \n          string = self.$replace_text(string);\n          if ($truthy(/(^|\\s)S?(2[rR]10([+\\-\\d]+)?([>=]+(\\d+))(\\[(\\d+),(\\d+)\\]))(\\s|$)/i['$=~'](string))) {\n          } else {\n            return nil\n          };\n          string = $$($nesting, 'Regexp').$last_match(2);\n          diff = 0;\n          crit = 20;\n          fumble = 2;\n          mod = 0;\n          modText = $$($nesting, 'Regexp').$last_match(3);\n          if ($truthy($$($nesting, 'Regexp').$last_match(5))) {\n            diff = $$($nesting, 'Regexp').$last_match(5).$to_i()};\n          if ($truthy($$($nesting, 'Regexp').$last_match(7))) {\n            crit = $$($nesting, 'Regexp').$last_match(7).$to_i()};\n          if ($truthy($$($nesting, 'Regexp').$last_match(8))) {\n            fumble = $$($nesting, 'Regexp').$last_match(8).$to_i()};\n          if ($truthy(modText)) {\n            mod = $$($nesting, 'ArithmeticEvaluator').$eval(modText)};\n          dice_arr = self.randomizer.$roll_barabara(2, 10).$sort();\n          dice_now = dice_arr.$sum();\n          dice_str = dice_arr.$join(\",\");\n          dice_loc = self.randomizer.$roll_sum(2, 10);\n          big_dice = dice_arr['$[]'](1);\n          output = \"\" + (dice_now) + \"[\" + (dice_str) + \"]\";\n          total_n = $rb_plus(dice_now, mod);\n          if ($truthy($rb_gt(mod, 0))) {\n            output = $rb_plus(output, \"\" + \"+\" + (mod))\n          } else if ($truthy($rb_lt(mod, 0))) {\n            output = $rb_plus(output, mod.$to_s())};\n          if ($truthy(output['$=~'](/[^\\d\\[\\]]+/))) {\n            output = \"\" + \"(\" + (string) + \") ＞ \" + (output) + \" ＞ \" + (total_n)\n          } else {\n            output = \"\" + \"(\" + (string) + \") ＞ \" + (output)\n          };\n          if ($truthy($rb_le(dice_now, fumble))) {\n            output = $rb_plus(output, \" ＞ ファンブル\")\n          } else if ($truthy($rb_ge(dice_now, crit))) {\n            output = $rb_plus(output, $rb_plus($rb_plus(\" ＞ クリティカル ＞ \", self.$get_hit_level_table(big_dice)), \"\" + \"(ダメージ+10) ＞ [\" + (dice_loc) + \"]\" + (self.$get_hit_location_table(dice_loc))))\n          } else if ($truthy($rb_ge(total_n, diff))) {\n            output = $rb_plus(output, $rb_plus($rb_plus(\" ＞ 成功 ＞ \", self.$get_hit_level_table(big_dice)), \"\" + \" ＞ [\" + (dice_loc) + \"]\" + (self.$get_hit_location_table(dice_loc))))\n          } else {\n            output = $rb_plus(output, \" ＞ 失敗\")\n          };\n          return output;\n        }, $EmbryoMachine_checkRoll$12.$$arity = 1);\n        \n        Opal.def(self, '$eval_game_system_specific_command', $EmbryoMachine_eval_game_system_specific_command$13 = function $$eval_game_system_specific_command(command) {\n          var self = this, result = nil, output = nil, type = nil, number = nil, $case = nil;\n\n          \n          self.$debug(\"eval_game_system_specific_command command\", command);\n          if ($truthy((result = self.$checkRoll(command)))) {\n            return result};\n          output = \"1\";\n          type = \"\";\n          number = 0;\n          $case = command;\n          if (/HLT/i['$===']($case)) {\n          type = \"命中部位\";\n          number = self.randomizer.$roll_sum(2, 10);\n          output = self.$get_hit_location_table(number);}\n          else if (/SFT/i['$===']($case)) {\n          type = \"射撃ファンブル\";\n          number = self.randomizer.$roll_sum(2, 10);\n          output = self.$get_shoot_fumble_table(number);}\n          else if (/MFT/i['$===']($case)) {\n          type = \"白兵ファンブル\";\n          number = self.randomizer.$roll_sum(2, 10);\n          output = self.$get_melee_fumble_table(number);};\n          if ($truthy(output['$!='](\"1\"))) {\n            output = \"\" + (type) + \"表(\" + (number) + \") ＞ \" + (output)};\n          return output;\n        }, $EmbryoMachine_eval_game_system_specific_command$13.$$arity = 1);\n        \n        Opal.def(self, '$get_hit_location_table', $EmbryoMachine_get_hit_location_table$14 = function $$get_hit_location_table(num) {\n          var self = this, table = nil;\n\n          \n          table = [[4, \"頭\"], [7, \"左脚\"], [9, \"左腕\"], [12, \"胴\"], [14, \"右腕\"], [17, \"右脚\"], [20, \"頭\"]];\n          return self.$get_table_by_number(num, table);\n        }, $EmbryoMachine_get_hit_location_table$14.$$arity = 1);\n        \n        Opal.def(self, '$get_shoot_fumble_table', $EmbryoMachine_get_shoot_fumble_table$15 = function $$get_shoot_fumble_table(num) {\n          var self = this, output = nil, table = nil, dc = nil;\n\n          \n          output = \"1\";\n          table = [\"暴発した。使用した射撃武器が搭載されている部位に命中レベルAで命中する。\", \"あまりに無様な誤射をした。パイロットの精神的負傷が2段階上昇する。\", \"誤射をした。自機に最も近い味方機体に命中レベルAで命中する。\", \"誤射をした。対象に最も近い味方機体に命中レベルAで命中する。\", \"武装が暴発した。使用した射撃武器が破損する。ダメージは発生しない。\", \"転倒した。次のセグメントのアクションが待機に変更される。\", \"弾詰まりを起こした。使用した射撃武器は戦闘終了まで使用できなくなる。\", \"砲身が大きく歪んだ。使用した射撃武器による射撃攻撃の命中値が戦闘終了まで-3される。\", \"熱量が激しく増大した。使用した射撃武器の消費弾薬が戦闘終了まで+3される。\", \"暴発した。使用した射撃武器が搭載されている部位に命中レベルBで命中する。\", \"弾薬が劣化した。使用した射撃武器の全てのダメージが戦闘終了まで-2される。\", \"無様な誤射をした。パイロットの精神的負傷が1段階上昇する。\", \"誤射をした。対象に最も近い味方機体に命中レベルBで命中する。\", \"誤射をした。自機に最も近い味方機体に命中レベルBで命中する。\", \"砲身が歪んだ。使用した射撃武器による射撃攻撃の命中値が戦闘終了まで-2される。\", \"熱量が増大した。使用した射撃武器の消費弾薬が戦闘終了まで+2される。\", \"砲身がわずかに歪んだ。使用した射撃武器による射撃攻撃の命中値が戦闘終了まで-1される。\", \"熱量がやや増大した。使用した射撃武器の消費弾薬が戦闘終了まで+1される。\", \"何も起きなかった。\"];\n          dc = 2;\n          if ($truthy(table['$[]']($rb_minus(num, dc)))) {\n            output = table['$[]']($rb_minus(num, dc))};\n          return output;\n        }, $EmbryoMachine_get_shoot_fumble_table$15.$$arity = 1);\n        \n        Opal.def(self, '$get_melee_fumble_table', $EmbryoMachine_get_melee_fumble_table$16 = function $$get_melee_fumble_table(num) {\n          var self = this, output = nil, table = nil, dc = nil;\n\n          \n          output = \"1\";\n          table = [\"大振りしすぎた。使用した白兵武器が搭載されている部位の反対の部位(右腕に搭載されているなら左側)に命中レベルAで命中する。\", \"激しく頭を打った。パイロットの肉体的負傷が2段階上昇する。\", \"過負荷で部位が爆発した。使用した白兵武器が搭載されている部位が全壊する。ダメージは発生せず、搭載されている武装も破損しない。\", \"大振りしすぎた。使用した白兵武器が搭載されている部位の反対の部位(右腕に搭載されているなら左側)に命中レベルBで命中する。\", \"武装が爆発した。使用した白兵武器が破損する。ダメージは発生しない。\", \"部分的に機能停止した。使用した白兵武器は戦闘終了まで使用できなくなる。\", \"転倒した。次のセグメントのアクションが待機に変更される。\", \"激しい刃こぼれを起こした。使用した白兵武器の全てのダメージが戦闘終了まで-3される。\", \"地面の凹凸にはまった。次の2セグメントは移動を行うことができない。\", \"刃こぼれを起こした。使用した白兵武器の全てのダメージが戦闘終了まで-2される。\", \"大振りしすぎた。使用した白兵武器が搭載されている部位の反対の部位(右腕に搭載されているなら左側)に命中レベルCで命中する。\", \"頭を打った。パイロットの肉体的負傷が1段階上昇する。\", \"駆動系が損傷した。移動力が戦闘終了まで-2される(最低1)。\", \"間合いを取り損ねた。隣接している機体(複数の場合は1機をランダムに決定)に激突する。\", \"機体ごと突っ込んだ。機体が向いている方角へ移動力をすべて消費するまで移動する。\", \"制御系が損傷した。回避値が戦闘終了まで-1される(最低1)。\", \"踏み誤った。機体が向いている方角へ移動力の半分を消費するまで移動する。\", \"たたらを踏んだ。機体が向いている方角へ1の移動力で移動する。\", \"何も起きなかった。\"];\n          dc = 2;\n          if ($truthy(table['$[]']($rb_minus(num, dc)))) {\n            output = table['$[]']($rb_minus(num, dc))};\n          return output;\n        }, $EmbryoMachine_get_melee_fumble_table$16.$$arity = 1);\n        return (Opal.def(self, '$get_hit_level_table', $EmbryoMachine_get_hit_level_table$17 = function $$get_hit_level_table(num) {\n          var self = this, table = nil;\n\n          \n          table = [[6, \"命中レベルC\"], [9, \"命中レベルB\"], [10, \"命中レベルA\"]];\n          return self.$get_table_by_number(num, table);\n        }, $EmbryoMachine_get_hit_level_table$17.$$arity = 1), nil) && 'get_hit_level_table';\n      })($nesting[0], $$($nesting, 'Base'), $nesting)\n    })($nesting[0], $nesting)\n  })($nesting[0], $nesting)\n})(Opal);\n"],"sourceRoot":"webpack:///"}