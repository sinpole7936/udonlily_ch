{"version":3,"sources":["./node_modules/bcdice/lib/bcdice/game_system/FutariSousa.js"],"names":["require","Opal","$rb_le","lhs","rhs","$rb_ge","self","top","$nesting","nil","$$$","$$","$module","module","$klass","klass","$send2","send2","$truthy","truthy","$send","send","$hash2","hash2","$base","$parent_nesting","concat","$super","$FutariSousa_initialize$1","$FutariSousa_eval_game_system_specific_command$2","$FutariSousa_roll_dt$3","$FutariSousa_roll_as$4","$$prototype","randomizer","const_set","def","$$initialize","command","$iter","$$p","$yield","find_super_dispatcher","d66_sort_type","$$arity","$register_prefix","$$eval_game_system_specific_command","$a","$b","m","count","$ret_or_1","$ret_or_2","$match","$roll_dt","$roll_as","$roll_tables","$class","$private","$$roll_dt","dice_list","max","result","$roll_barabara","$max","$translate","$join","$$roll_as","$translate_tables$5","$$translate_tables","locale","$from_i18n","get_singleton_class","$translate_tables","$keys"],"mappings":"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","file":"default~FutariSousa~index.js","sourcesContent":["require('./../opal');\n\n/* Generated by Opal 1.1.1 */\n(function(Opal) {\n  function $rb_le(lhs, rhs) {\n    return (typeof(lhs) === 'number' && typeof(rhs) === 'number') ? lhs <= rhs : lhs['$<='](rhs);\n  }\n  function $rb_ge(lhs, rhs) {\n    return (typeof(lhs) === 'number' && typeof(rhs) === 'number') ? lhs >= rhs : lhs['$>='](rhs);\n  }\n  var self = Opal.top, $nesting = [], nil = Opal.nil, $$$ = Opal.$$$, $$ = Opal.$$, $module = Opal.module, $klass = Opal.klass, $send2 = Opal.send2, $truthy = Opal.truthy, $send = Opal.send, $hash2 = Opal.hash2;\n\n  return (function($base, $parent_nesting) {\n    var self = $module($base, 'BCDice');\n\n    var $nesting = [self].concat($parent_nesting);\n\n    (function($base, $parent_nesting) {\n      var self = $module($base, 'GameSystem');\n\n      var $nesting = [self].concat($parent_nesting);\n\n      (function($base, $super, $parent_nesting) {\n        var self = $klass($base, $super, 'FutariSousa');\n\n        var $nesting = [self].concat($parent_nesting), $FutariSousa_initialize$1, $FutariSousa_eval_game_system_specific_command$2, $FutariSousa_roll_dt$3, $FutariSousa_roll_as$4;\n\n        self.$$prototype.randomizer = nil;\n        \n        Opal.const_set($nesting[0], 'ID', \"FutariSousa\");\n        Opal.const_set($nesting[0], 'NAME', \"フタリソウサ\");\n        Opal.const_set($nesting[0], 'SORT_KEY', \"ふたりそうさ\");\n        Opal.const_set($nesting[0], 'HELP_MESSAGE', \"\" + \"・判定用コマンド\\n\" + \"探偵用：【DT】…10面ダイスを2つ振って判定します。『有利』なら【3DT】、『不利』なら【1DT】を使います。\\n\" + \"助手用：【AS】…6面ダイスを2つ振って判定します。『有利』なら【3AS】、『不利』なら【1AS】を使います。\\n\" + \"・各種表\\n\" + \"【調査時】\\n\" + \"異常な癖決定表 SHRD\\n\" + \"　口から出る表 SHFM／強引な捜査表　　　 SHBT／すっとぼけ表　 SHPI\\n\" + \"　事件に夢中表 SHEG／パートナーと……表 SHWP／何かしている表 SHDS\\n\" + \"　奇想天外表　 SHFT／急なひらめき表　　 SHIN／喜怒哀楽表　　 SHEM\\n\" + \"イベント表\\n\" + \"　現場にて　 EVS／なぜ？　 EVW／協力者と共に EVN\\n\" + \"　向こうから EVC／VS容疑者 EVV\\n\" + \"調査の障害表 OBT　　変調表 ACT　　目撃者表 EWT　　迷宮入り表 WMT\\n\" + \"【設定時】\\n\" + \"背景表\\n\" + \"　探偵　運命の血統 BGDD／天性の才能 BGDG／マニア　　　　 BGDM\\n\" + \"　助手　正義の人　 BGAJ／情熱の人　 BGAP／巻き込まれの人 BGAI\\n\" + \"身長表 HT　　たまり場表 BT　　関係表 GRT　　思い出の品決定表 MIT\\n\" + \"職業表A・B　　JBT66・JBT10　　ファッション特徴表A・B　　　　FST66・FST10\\n\" + \"感情表A／B　　FLT66・FLT10　　好きなもの／嫌いなもの表A・B　LDT66・LDT10\\n\" + \"呼び名表A・B　NCT66・NCT10\\n\");\n        \n        Opal.def(self, '$initialize', $FutariSousa_initialize$1 = function $$initialize(command) {\n          var $iter = $FutariSousa_initialize$1.$$p, $yield = $iter || nil, self = this;\n\n          if ($iter) $FutariSousa_initialize$1.$$p = null;\n          \n          $send2(self, Opal.find_super_dispatcher(self, 'initialize', $FutariSousa_initialize$1, false, true), 'initialize', [command], null);\n          return (self.d66_sort_type = $$$($$($nesting, 'D66SortType'), 'ASC'));\n        }, $FutariSousa_initialize$1.$$arity = 1);\n        self.$register_prefix(\"(\\\\d+)?DT\", \"(\\\\d+)?AS\");\n        \n        Opal.def(self, '$eval_game_system_specific_command', $FutariSousa_eval_game_system_specific_command$2 = function $$eval_game_system_specific_command(command) {\n          var $a, $b, self = this, m = nil, count = nil, $ret_or_1 = nil, $ret_or_2 = nil;\n\n          \n          if ($truthy((m = /^(\\d+)?DT$/i.$match(command)))) {\n            \n            count = (function() {if ($truthy(($ret_or_1 = ($a = m['$[]'](1), ($a === nil || $a == null) ? nil : $send($a, 'to_i', []))))) {\n              return $ret_or_1\n            } else {\n              return 2\n            }; return nil; })();\n            return self.$roll_dt(command, count);\n          } else if ($truthy((m = /^(\\d+)?AS$/i.$match(command)))) {\n            \n            count = (function() {if ($truthy(($ret_or_2 = ($b = m['$[]'](1), ($b === nil || $b == null) ? nil : $send($b, 'to_i', []))))) {\n              return $ret_or_2\n            } else {\n              return 2\n            }; return nil; })();\n            return self.$roll_as(command, count);};\n          return self.$roll_tables(command, $$$(self.$class(), 'TABLES'));\n        }, $FutariSousa_eval_game_system_specific_command$2.$$arity = 1);\n        self.$private();\n        Opal.const_set($nesting[0], 'SUCCESS_THRESHOLD', 4);\n        Opal.const_set($nesting[0], 'SPECIAL_DICE', 6);\n        \n        Opal.def(self, '$roll_dt', $FutariSousa_roll_dt$3 = function $$roll_dt(command, count) {\n          var self = this, dice_list = nil, max = nil, result = nil;\n\n          \n          dice_list = self.randomizer.$roll_barabara(count, 10);\n          max = dice_list.$max();\n          result = (function() {if ($truthy($rb_le(max, 1))) {\n            return self.$translate(\"FutariSousa.DT.fumble\")\n          } else if ($truthy(dice_list['$include?']($$($nesting, 'SPECIAL_DICE')))) {\n            return self.$translate(\"FutariSousa.DT.special\")\n          } else if ($truthy($rb_ge(max, $$($nesting, 'SUCCESS_THRESHOLD')))) {\n            return self.$translate(\"success\")\n          } else {\n            return self.$translate(\"failure\")\n          }; return nil; })();\n          return \"\" + (command) + \"(\" + (dice_list.$join(\",\")) + \") ＞ \" + (result);\n        }, $FutariSousa_roll_dt$3.$$arity = 2);\n        \n        Opal.def(self, '$roll_as', $FutariSousa_roll_as$4 = function $$roll_as(command, count) {\n          var self = this, dice_list = nil, max = nil, result = nil;\n\n          \n          dice_list = self.randomizer.$roll_barabara(count, 6);\n          max = dice_list.$max();\n          result = (function() {if ($truthy($rb_le(max, 1))) {\n            return self.$translate(\"FutariSousa.AS.fumble\")\n          } else if ($truthy(dice_list['$include?']($$($nesting, 'SPECIAL_DICE')))) {\n            return self.$translate(\"FutariSousa.AS.special\")\n          } else if ($truthy($rb_ge(max, $$($nesting, 'SUCCESS_THRESHOLD')))) {\n            return self.$translate(\"FutariSousa.AS.success\")\n          } else {\n            return self.$translate(\"failure\")\n          }; return nil; })();\n          return \"\" + (command) + \"(\" + (dice_list.$join(\",\")) + \") ＞ \" + (result);\n        }, $FutariSousa_roll_as$4.$$arity = 2);\n        (function(self, $parent_nesting) {\n          var $nesting = [self].concat($parent_nesting), $translate_tables$5;\n\n          \n          self.$private();\n          return (Opal.def(self, '$translate_tables', $translate_tables$5 = function $$translate_tables(locale) {\n            var self = this;\n\n            return $hash2([\"SHRD\", \"SHFM\", \"SHBT\", \"SHPI\", \"SHEG\", \"SHWP\", \"SHDS\", \"SHFT\", \"SHIN\", \"SHEM\", \"EVS\", \"EVW\", \"EVN\", \"EVC\", \"EVV\", \"OBT\", \"ACT\", \"EWT\", \"WMT\", \"BGDD\", \"BGDG\", \"BGDM\", \"BGAJ\", \"BGAP\", \"BGAI\", \"HT\", \"BT\", \"GRT\", \"MIT\", \"JBT66\", \"JBT10\", \"FST66\", \"FST10\", \"LDT66\", \"LDT10\", \"FLT66\", \"FLT10\", \"NCT66\", \"NCT10\"], {\"SHRD\": $$$($$($nesting, 'DiceTable'), 'Table').$from_i18n(\"FutariSousa.table.SHRD\", locale), \"SHFM\": $$$($$($nesting, 'DiceTable'), 'Table').$from_i18n(\"FutariSousa.table.SHFM\", locale), \"SHBT\": $$$($$($nesting, 'DiceTable'), 'Table').$from_i18n(\"FutariSousa.table.SHBT\", locale), \"SHPI\": $$$($$($nesting, 'DiceTable'), 'Table').$from_i18n(\"FutariSousa.table.SHPI\", locale), \"SHEG\": $$$($$($nesting, 'DiceTable'), 'Table').$from_i18n(\"FutariSousa.table.SHEG\", locale), \"SHWP\": $$$($$($nesting, 'DiceTable'), 'Table').$from_i18n(\"FutariSousa.table.SHWP\", locale), \"SHDS\": $$$($$($nesting, 'DiceTable'), 'Table').$from_i18n(\"FutariSousa.table.SHDS\", locale), \"SHFT\": $$$($$($nesting, 'DiceTable'), 'Table').$from_i18n(\"FutariSousa.table.SHFT\", locale), \"SHIN\": $$$($$($nesting, 'DiceTable'), 'Table').$from_i18n(\"FutariSousa.table.SHIN\", locale), \"SHEM\": $$$($$($nesting, 'DiceTable'), 'Table').$from_i18n(\"FutariSousa.table.SHEM\", locale), \"EVS\": $$$($$($nesting, 'DiceTable'), 'Table').$from_i18n(\"FutariSousa.table.EVS\", locale), \"EVW\": $$$($$($nesting, 'DiceTable'), 'Table').$from_i18n(\"FutariSousa.table.EVW\", locale), \"EVN\": $$$($$($nesting, 'DiceTable'), 'Table').$from_i18n(\"FutariSousa.table.EVN\", locale), \"EVC\": $$$($$($nesting, 'DiceTable'), 'Table').$from_i18n(\"FutariSousa.table.EVC\", locale), \"EVV\": $$$($$($nesting, 'DiceTable'), 'Table').$from_i18n(\"FutariSousa.table.EVV\", locale), \"OBT\": $$$($$($nesting, 'DiceTable'), 'D66Table').$from_i18n(\"FutariSousa.table.OBT\", locale), \"ACT\": $$$($$($nesting, 'DiceTable'), 'Table').$from_i18n(\"FutariSousa.table.ACT\", locale), \"EWT\": $$$($$($nesting, 'DiceTable'), 'Table').$from_i18n(\"FutariSousa.table.EWT\", locale), \"WMT\": $$$($$($nesting, 'DiceTable'), 'Table').$from_i18n(\"FutariSousa.table.WMT\", locale), \"BGDD\": $$$($$($nesting, 'DiceTable'), 'Table').$from_i18n(\"FutariSousa.table.BGDD\", locale), \"BGDG\": $$$($$($nesting, 'DiceTable'), 'Table').$from_i18n(\"FutariSousa.table.BGDG\", locale), \"BGDM\": $$$($$($nesting, 'DiceTable'), 'Table').$from_i18n(\"FutariSousa.table.BGDM\", locale), \"BGAJ\": $$$($$($nesting, 'DiceTable'), 'Table').$from_i18n(\"FutariSousa.table.BGAJ\", locale), \"BGAP\": $$$($$($nesting, 'DiceTable'), 'Table').$from_i18n(\"FutariSousa.table.BGAP\", locale), \"BGAI\": $$$($$($nesting, 'DiceTable'), 'Table').$from_i18n(\"FutariSousa.table.BGAI\", locale), \"HT\": $$$($$($nesting, 'DiceTable'), 'Table').$from_i18n(\"FutariSousa.table.HT\", locale), \"BT\": $$$($$($nesting, 'DiceTable'), 'Table').$from_i18n(\"FutariSousa.table.BT\", locale), \"GRT\": $$$($$($nesting, 'DiceTable'), 'D66Table').$from_i18n(\"FutariSousa.table.GRT\", locale), \"MIT\": $$$($$($nesting, 'DiceTable'), 'D66Table').$from_i18n(\"FutariSousa.table.MIT\", locale), \"JBT66\": $$$($$($nesting, 'DiceTable'), 'D66Table').$from_i18n(\"FutariSousa.table.JBT66\", locale), \"JBT10\": $$$($$($nesting, 'DiceTable'), 'Table').$from_i18n(\"FutariSousa.table.JBT10\", locale), \"FST66\": $$$($$($nesting, 'DiceTable'), 'D66Table').$from_i18n(\"FutariSousa.table.FST66\", locale), \"FST10\": $$$($$($nesting, 'DiceTable'), 'Table').$from_i18n(\"FutariSousa.table.FST10\", locale), \"LDT66\": $$$($$($nesting, 'DiceTable'), 'D66Table').$from_i18n(\"FutariSousa.table.LDT66\", locale), \"LDT10\": $$$($$($nesting, 'DiceTable'), 'Table').$from_i18n(\"FutariSousa.table.LDT10\", locale), \"FLT66\": $$$($$($nesting, 'DiceTable'), 'D66Table').$from_i18n(\"FutariSousa.table.FLT66\", locale), \"FLT10\": $$$($$($nesting, 'DiceTable'), 'Table').$from_i18n(\"FutariSousa.table.FLT10\", locale), \"NCT66\": $$$($$($nesting, 'DiceTable'), 'D66Table').$from_i18n(\"FutariSousa.table.NCT66\", locale), \"NCT10\": $$$($$($nesting, 'DiceTable'), 'Table').$from_i18n(\"FutariSousa.table.NCT10\", locale)})\n          }, $translate_tables$5.$$arity = 1), nil) && 'translate_tables';\n        })(Opal.get_singleton_class(self), $nesting);\n        Opal.const_set($nesting[0], 'TABLES', self.$translate_tables(\"ja_jp\"));\n        return self.$register_prefix($$($nesting, 'TABLES').$keys());\n      })($nesting[0], $$($nesting, 'Base'), $nesting)\n    })($nesting[0], $nesting)\n  })($nesting[0], $nesting)\n})(Opal);\n"],"sourceRoot":"webpack:///"}