{"version":3,"sources":["./node_modules/bcdice/lib/bcdice/game_system/GehennaAn.js"],"names":["require","Opal","$rb_lt","lhs","rhs","$rb_ge","$rb_plus","$rb_gt","$rb_times","$rb_minus","$rb_divide","self","top","$nesting","nil","$$$","$$","$module","module","$klass","klass","$send2","send2","$send","send","$truthy","truthy","$base","$parent_nesting","concat","$super","$GehennaAn_initialize$1","$GehennaAn_replace_text$2","$GehennaAn_eval_game_system_specific_command$7","$GehennaAn_getAnastasisBonusText$9","$GehennaAn_getTougiBonus$10","$$prototype","randomizer","const_set","$register_prefix","def","$$initialize","command","$iter","$$p","$yield","find_super_dispatcher","sort_add_dice","sort_barabara_dice","$$arity","$private","$$replace_text","string","$$3","$$4","$$5","$$6","$$s","$last_match","$public","$$eval_game_system_specific_command","$$8","diceCount","modText","diff","mode","mod","diceArray","diceValue","diceText","dice_1st","isLuck","$ret_or_2","output","success","failed","$replace_text","$to_i","$eval","$roll_barabara","$sort","$sum","$join","i","$ret_or_1","$to_s","$getAnastasisBonusText","$$getAnastasisBonusText","ma_bonus","bonus_str","$getTougiBonus","$$getTougiBonus","table","$get_table_by_number"],"mappings":"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","file":"default~GehennaAn~index.js","sourcesContent":["require('./../opal');\n\n/* Generated by Opal 1.1.1 */\n(function(Opal) {\n  function $rb_lt(lhs, rhs) {\n    return (typeof(lhs) === 'number' && typeof(rhs) === 'number') ? lhs < rhs : lhs['$<'](rhs);\n  }\n  function $rb_ge(lhs, rhs) {\n    return (typeof(lhs) === 'number' && typeof(rhs) === 'number') ? lhs >= rhs : lhs['$>='](rhs);\n  }\n  function $rb_plus(lhs, rhs) {\n    return (typeof(lhs) === 'number' && typeof(rhs) === 'number') ? lhs + rhs : lhs['$+'](rhs);\n  }\n  function $rb_gt(lhs, rhs) {\n    return (typeof(lhs) === 'number' && typeof(rhs) === 'number') ? lhs > rhs : lhs['$>'](rhs);\n  }\n  function $rb_times(lhs, rhs) {\n    return (typeof(lhs) === 'number' && typeof(rhs) === 'number') ? lhs * rhs : lhs['$*'](rhs);\n  }\n  function $rb_minus(lhs, rhs) {\n    return (typeof(lhs) === 'number' && typeof(rhs) === 'number') ? lhs - rhs : lhs['$-'](rhs);\n  }\n  function $rb_divide(lhs, rhs) {\n    return (typeof(lhs) === 'number' && typeof(rhs) === 'number') ? lhs / rhs : lhs['$/'](rhs);\n  }\n  var self = Opal.top, $nesting = [], nil = Opal.nil, $$$ = Opal.$$$, $$ = Opal.$$, $module = Opal.module, $klass = Opal.klass, $send2 = Opal.send2, $send = Opal.send, $truthy = Opal.truthy;\n\n  return (function($base, $parent_nesting) {\n    var self = $module($base, 'BCDice');\n\n    var $nesting = [self].concat($parent_nesting);\n\n    (function($base, $parent_nesting) {\n      var self = $module($base, 'GameSystem');\n\n      var $nesting = [self].concat($parent_nesting);\n\n      (function($base, $super, $parent_nesting) {\n        var self = $klass($base, $super, 'GehennaAn');\n\n        var $nesting = [self].concat($parent_nesting), $GehennaAn_initialize$1, $GehennaAn_replace_text$2, $GehennaAn_eval_game_system_specific_command$7, $GehennaAn_getAnastasisBonusText$9, $GehennaAn_getTougiBonus$10;\n\n        self.$$prototype.randomizer = nil;\n        \n        Opal.const_set($nesting[0], 'ID', \"GehennaAn\");\n        Opal.const_set($nesting[0], 'NAME', \"ゲヘナ・アナスタシス\");\n        Opal.const_set($nesting[0], 'SORT_KEY', \"けへなあなすたしす\");\n        Opal.const_set($nesting[0], 'HELP_MESSAGE', \"\" + \"戦闘判定と通常判定に対応。幸運の助け、連撃増加値(戦闘判定)、闘技チット(戦闘判定)を自動表示します。\\n\" + \"・戦闘判定　(nGAt+m)\\n\" + \"　ダイス数n、目標値t、修正値mで戦闘判定を行います。\\n\" + \"　幸運の助け、連撃増加値、闘技チットを自動処理します。\\n\" + \"・通常判定　(nGt+m)\\n\" + \"　ダイス数n、目標値t、修正値mで通常判定を行います。\\n\" + \"　幸運の助けを自動処理します。(連撃増加値、闘技チットを表示抑制します)\\n\");\n        self.$register_prefix(\"\\\\d+G\\\\d+\", \"\\\\d+GA\\\\d+\", \"\\\\d+R6\");\n        \n        Opal.def(self, '$initialize', $GehennaAn_initialize$1 = function $$initialize(command) {\n          var $iter = $GehennaAn_initialize$1.$$p, $yield = $iter || nil, self = this;\n\n          if ($iter) $GehennaAn_initialize$1.$$p = null;\n          \n          $send2(self, Opal.find_super_dispatcher(self, 'initialize', $GehennaAn_initialize$1, false, true), 'initialize', [command], null);\n          self.sort_add_dice = true;\n          return (self.sort_barabara_dice = true);\n        }, $GehennaAn_initialize$1.$$arity = 1);\n        self.$private();\n        \n        Opal.def(self, '$replace_text', $GehennaAn_replace_text$2 = function $$replace_text(string) {\n          var $$3, $$4, $$5, $$6, self = this;\n\n          return $send($send($send($send(string, 'gsub', [/(\\d+)GA(\\d+)([+\\-][+\\-\\d]+)/], ($$3 = function(){var self = $$3.$$s == null ? this : $$3.$$s;\n\n          return \"\" + ($$($nesting, 'Regexp').$last_match(1)) + \"R6\" + ($$($nesting, 'Regexp').$last_match(3)) + \">=\" + ($$($nesting, 'Regexp').$last_match(2)) + \"[1]\"}, $$3.$$s = self, $$3.$$arity = 0, $$3)), 'gsub', [/(\\d+)GA(\\d+)/], ($$4 = function(){var self = $$4.$$s == null ? this : $$4.$$s;\n\n          return \"\" + ($$($nesting, 'Regexp').$last_match(1)) + \"R6>=\" + ($$($nesting, 'Regexp').$last_match(2)) + \"[1]\"}, $$4.$$s = self, $$4.$$arity = 0, $$4)), 'gsub', [/(\\d+)G(\\d+)([+\\-][+\\-\\d]+)/], ($$5 = function(){var self = $$5.$$s == null ? this : $$5.$$s;\n\n          return \"\" + ($$($nesting, 'Regexp').$last_match(1)) + \"R6\" + ($$($nesting, 'Regexp').$last_match(3)) + \">=\" + ($$($nesting, 'Regexp').$last_match(2)) + \"[0]\"}, $$5.$$s = self, $$5.$$arity = 0, $$5)), 'gsub', [/(\\d+)G(\\d+)/], ($$6 = function(){var self = $$6.$$s == null ? this : $$6.$$s;\n\n          return \"\" + ($$($nesting, 'Regexp').$last_match(1)) + \"R6>=\" + ($$($nesting, 'Regexp').$last_match(2)) + \"[0]\"}, $$6.$$s = self, $$6.$$arity = 0, $$6))\n        }, $GehennaAn_replace_text$2.$$arity = 1);\n        self.$public();\n        \n        Opal.def(self, '$eval_game_system_specific_command', $GehennaAn_eval_game_system_specific_command$7 = function $$eval_game_system_specific_command(string) {\n          var $$8, self = this, diceCount = nil, modText = nil, diff = nil, mode = nil, mod = nil, diceArray = nil, diceValue = nil, diceText = nil, dice_1st = nil, isLuck = nil, $ret_or_2 = nil, output = nil, success = nil, failed = nil;\n\n          \n          string = self.$replace_text(string);\n          if ($truthy(/(^|\\s)S?((\\d+)[rR]6([+\\-\\d]+)?([>=]+(\\d+))(\\[(\\d)\\]))(\\s|$)/i['$=~'](string))) {\n          } else {\n            return nil\n          };\n          string = $$($nesting, 'Regexp').$last_match(2);\n          diceCount = $$($nesting, 'Regexp').$last_match(3).$to_i();\n          modText = $$($nesting, 'Regexp').$last_match(4);\n          diff = $$($nesting, 'Regexp').$last_match(6).$to_i();\n          mode = $$($nesting, 'Regexp').$last_match(8).$to_i();\n          mod = $$($nesting, 'ArithmeticEvaluator').$eval(modText);\n          diceArray = self.randomizer.$roll_barabara(diceCount, 6).$sort();\n          diceValue = diceArray.$sum();\n          diceText = diceArray.$join(\",\");\n          dice_1st = \"\";\n          isLuck = true;\n          diceValue = 0;\n          $send(diceArray, 'each', [], ($$8 = function(i){var self = $$8.$$s == null ? this : $$8.$$s, $ret_or_1 = nil;\n\n          \n            \n            if (i == null) {\n              i = nil;\n            };\n            if ($truthy(dice_1st['$!='](\"\"))) {\n              if ($truthy((function() {if ($truthy(($ret_or_1 = dice_1st['$!='](i)))) {\n                return $ret_or_1\n              } else {\n                \n                return $rb_lt(i, diff);\n              }; return nil; })())) {\n                isLuck = false}\n            } else {\n              dice_1st = i\n            };\n            if ($truthy($rb_ge(i, diff))) {\n              return (diceValue = $rb_plus(diceValue, 1))\n            } else {\n              return nil\n            };}, $$8.$$s = self, $$8.$$arity = 1, $$8));\n          if ($truthy((function() {if ($truthy(($ret_or_2 = isLuck))) {\n            \n            return $rb_gt(diceCount, 1);\n          } else {\n            return $ret_or_2\n          }; return nil; })())) {\n            diceValue = $rb_times(diceValue, 2)};\n          output = \"\" + (diceValue) + \"[\" + (diceText) + \"]\";\n          success = $rb_plus(diceValue, mod);\n          if ($truthy($rb_lt(success, 0))) {\n            success = 0};\n          failed = $rb_minus(diceCount, diceValue);\n          if ($truthy($rb_lt(failed, 0))) {\n            failed = 0};\n          if ($truthy($rb_gt(mod, 0))) {\n            output = $rb_plus(output, \"\" + \"+\" + (mod))\n          } else if ($truthy($rb_lt(mod, 0))) {\n            output = $rb_plus(output, mod.$to_s())};\n          if ($truthy(/[^\\d\\[\\]]+/['$=~'](output))) {\n            output = \"\" + \"(\" + (string) + \") ＞ \" + (output) + \" ＞ 成功\" + (success) + \"、失敗\" + (failed)\n          } else {\n            output = \"\" + \"(\" + (string) + \") ＞ \" + (output)\n          };\n          output = $rb_plus(output, self.$getAnastasisBonusText(mode, success));\n          return output;\n        }, $GehennaAn_eval_game_system_specific_command$7.$$arity = 1);\n        self.$private();\n        \n        Opal.def(self, '$getAnastasisBonusText', $GehennaAn_getAnastasisBonusText$9 = function $$getAnastasisBonusText(mode, success) {\n          var self = this, ma_bonus = nil, bonus_str = nil;\n\n          \n          if (mode['$=='](0)) {\n            return \"\"};\n          ma_bonus = $rb_divide($rb_minus(success, 1), 2).$to_i();\n          if ($truthy($rb_gt(ma_bonus, 7))) {\n            ma_bonus = 7};\n          bonus_str = \"\";\n          if ($truthy($rb_gt(ma_bonus, 0))) {\n            bonus_str = $rb_plus(bonus_str, \"\" + \"連撃[+\" + (ma_bonus) + \"]/\")};\n          bonus_str = $rb_plus(bonus_str, \"\" + \"闘技[\" + (self.$getTougiBonus(success)) + \"]\");\n          return \"\" + \" ＞ \" + (bonus_str);\n        }, $GehennaAn_getAnastasisBonusText$9.$$arity = 2);\n        return (Opal.def(self, '$getTougiBonus', $GehennaAn_getTougiBonus$10 = function $$getTougiBonus(success) {\n          var self = this, table = nil;\n\n          \n          table = [[6, \"1\"], [13, \"2\"], [18, \"3\"], [22, \"4\"], [99, \"5\"]];\n          return self.$get_table_by_number(success, table);\n        }, $GehennaAn_getTougiBonus$10.$$arity = 1), nil) && 'getTougiBonus';\n      })($nesting[0], $$($nesting, 'Base'), $nesting)\n    })($nesting[0], $nesting)\n  })($nesting[0], $nesting)\n})(Opal);\n"],"sourceRoot":"webpack:///"}