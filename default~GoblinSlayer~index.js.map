{"version":3,"sources":["./node_modules/bcdice/lib/bcdice/game_system/GoblinSlayer.js"],"names":["require","Opal","$rb_le","lhs","rhs","$rb_plus","$rb_ge","$rb_lt","$rb_gt","self","top","$nesting","nil","$$$","$$","$module","module","$klass","klass","$send2","send2","$truthy","truthy","$base","$parent_nesting","concat","$super","$GoblinSlayer_initialize$1","$GoblinSlayer_eval_game_system_specific_command$2","$GoblinSlayer_getCheckResult$3","$GoblinSlayer_murmurChantPrayInvoke$4","$GoblinSlayer_damageBonus$5","$GoblinSlayer_resultStr$6","$$prototype","randomizer","const_set","$register_prefix","def","$$initialize","command","$iter","$$p","$yield","find_super_dispatcher","round_type","$$arity","$$eval_game_system_specific_command","$case","$getCheckResult","$murmurChantPrayInvoke","$damageBonus","$$getCheckResult","m","basis","target","without_compare","$ret_or_1","cmp_op","dice_list","total","diceText","achievement","fumble","critical","result","$ret_or_2","$ret_or_3","basis_str","$match","$to_i","$roll_barabara","$sum","$join","$resultStr","$$murmurChantPrayInvoke","luck","volition","luck_str","$$damageBonus","num","fmt","times","$$resultStr"],"mappings":"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","file":"default~GoblinSlayer~index.js","sourcesContent":["require('./../opal');\n\n/* Generated by Opal 1.1.1 */\n(function(Opal) {\n  function $rb_le(lhs, rhs) {\n    return (typeof(lhs) === 'number' && typeof(rhs) === 'number') ? lhs <= rhs : lhs['$<='](rhs);\n  }\n  function $rb_plus(lhs, rhs) {\n    return (typeof(lhs) === 'number' && typeof(rhs) === 'number') ? lhs + rhs : lhs['$+'](rhs);\n  }\n  function $rb_ge(lhs, rhs) {\n    return (typeof(lhs) === 'number' && typeof(rhs) === 'number') ? lhs >= rhs : lhs['$>='](rhs);\n  }\n  function $rb_lt(lhs, rhs) {\n    return (typeof(lhs) === 'number' && typeof(rhs) === 'number') ? lhs < rhs : lhs['$<'](rhs);\n  }\n  function $rb_gt(lhs, rhs) {\n    return (typeof(lhs) === 'number' && typeof(rhs) === 'number') ? lhs > rhs : lhs['$>'](rhs);\n  }\n  var self = Opal.top, $nesting = [], nil = Opal.nil, $$$ = Opal.$$$, $$ = Opal.$$, $module = Opal.module, $klass = Opal.klass, $send2 = Opal.send2, $truthy = Opal.truthy;\n\n  return (function($base, $parent_nesting) {\n    var self = $module($base, 'BCDice');\n\n    var $nesting = [self].concat($parent_nesting);\n\n    (function($base, $parent_nesting) {\n      var self = $module($base, 'GameSystem');\n\n      var $nesting = [self].concat($parent_nesting);\n\n      (function($base, $super, $parent_nesting) {\n        var self = $klass($base, $super, 'GoblinSlayer');\n\n        var $nesting = [self].concat($parent_nesting), $GoblinSlayer_initialize$1, $GoblinSlayer_eval_game_system_specific_command$2, $GoblinSlayer_getCheckResult$3, $GoblinSlayer_murmurChantPrayInvoke$4, $GoblinSlayer_damageBonus$5, $GoblinSlayer_resultStr$6;\n\n        self.$$prototype.randomizer = nil;\n        \n        Opal.const_set($nesting[0], 'ID', \"GoblinSlayer\");\n        Opal.const_set($nesting[0], 'NAME', \"ゴブリンスレイヤーTRPG\");\n        Opal.const_set($nesting[0], 'SORT_KEY', \"こふりんすれいやあTRPG\");\n        Opal.const_set($nesting[0], 'HELP_MESSAGE', \"\" + \"・判定　GS(x)>=y\\n\" + \"　2d6の判定を行い、達成値を出力します。\\n\" + \"　xは基準値、yは目標値です。いずれも省略可能です。\\n\" + \"　yが設定されている場合、大成功/成功/失敗/大失敗を自動判定します。\\n\" + \"　例）GS>=12　GS>10　GS(10)>14　GS+10>=15　GS10>=15　GS(10)　GS+10　GS10　GS\\n\" + \"\\n\" + \"・祈念　MCPI(n)$m\\n\" + \"　祈念を行います。\\n\" + \"　nは【幸運】などによるボーナスです。この値は省略可能です。\\n\" + \"　mは因果点の現在値です。\\n\" + \"　因果点の現在値を使用して祈念を行い、成功/失敗を自動判定します。\\n\" + \"　例）MCPI$3　MCPI(1)$4　MCPI+2$5　MCPI2$6\\n\" + \"\\n\" + \"・命中判定の効力値によるボーナス　DB(n)\\n\" + \"　ダメージ効力表による威力へのボーナスを自動で求めます。\\n\" + \"　nは命中判定の効力値です。\\n\" + \"　例）DB(15)　DB12\\n\" + \"\\n\" + \"※上記コマンドの計算内で割り算を行った場合、小数点以下は切り上げされます。\\n\" + \"　ただしダイス出目を割り算した場合、小数点以下は切り捨てされます。\\n\" + \"　例）入力：GS(8+3/2)　実行結果：(GS10) ＞ 10 + 3[1,2] ＞ 13\\n\" + \"　　　入力：2d6/2    　実行結果：(2D6/2) ＞ 3[1,2]/2 ＞ 1\\n\" + \"\\n\" + \"※MCPIでは、シークレットダイスを使用できません。\\n\");\n        self.$register_prefix(\"GS\", \"^MCPI.*$\", \"DB\");\n        \n        Opal.def(self, '$initialize', $GoblinSlayer_initialize$1 = function $$initialize(command) {\n          var $iter = $GoblinSlayer_initialize$1.$$p, $yield = $iter || nil, self = this;\n\n          if ($iter) $GoblinSlayer_initialize$1.$$p = null;\n          \n          $send2(self, Opal.find_super_dispatcher(self, 'initialize', $GoblinSlayer_initialize$1, false, true), 'initialize', [command], null);\n          return (self.round_type = $$$($$($nesting, 'RoundType'), 'CEIL'));\n        }, $GoblinSlayer_initialize$1.$$arity = 1);\n        \n        Opal.def(self, '$eval_game_system_specific_command', $GoblinSlayer_eval_game_system_specific_command$2 = function $$eval_game_system_specific_command(command) {\n          var self = this, $case = nil;\n\n          return (function() {$case = command;\n          if (/^GS/i['$===']($case)) {return self.$getCheckResult(command)}\n          else if (/^MCPI/i['$===']($case)) {return self.$murmurChantPrayInvoke(command)}\n          else if (/^DB/i['$===']($case)) {return self.$damageBonus(command)}\n          else {return nil}})()\n        }, $GoblinSlayer_eval_game_system_specific_command$2.$$arity = 1);\n        \n        Opal.def(self, '$getCheckResult', $GoblinSlayer_getCheckResult$3 = function $$getCheckResult(command) {\n          var self = this, m = nil, basis = nil, target = nil, without_compare = nil, $ret_or_1 = nil, cmp_op = nil, dice_list = nil, total = nil, diceText = nil, achievement = nil, fumble = nil, critical = nil, result = nil, $ret_or_2 = nil, $ret_or_3 = nil, basis_str = nil;\n\n          \n          m = /^GS([-+]?\\d+)?((>=?)(\\d+))?$/i.$match(command);\n          if ($truthy(m)) {\n          } else {\n            return nil\n          };\n          basis = m['$[]'](1).$to_i();\n          target = m['$[]'](4).$to_i();\n          without_compare = (function() {if ($truthy(($ret_or_1 = m['$[]'](2)['$nil?']()))) {\n            return $ret_or_1\n          } else {\n            return $rb_le(target, 0)\n          }; return nil; })();\n          cmp_op = m['$[]'](3);\n          dice_list = self.randomizer.$roll_barabara(2, 6);\n          total = dice_list.$sum();\n          diceText = dice_list.$join(\",\");\n          achievement = $rb_plus(basis, total);\n          fumble = diceText['$=='](\"1,1\");\n          critical = diceText['$=='](\"6,6\");\n          result = \"\" + \" ＞ \" + (self.$resultStr(achievement, target, cmp_op, fumble, critical));\n          if ($truthy((function() {if ($truthy(($ret_or_2 = (function() {if ($truthy(($ret_or_3 = without_compare))) {\n            return fumble['$!']()\n          } else {\n            return $ret_or_3\n          }; return nil; })()))) {\n            return critical['$!']()\n          } else {\n            return $ret_or_2\n          }; return nil; })())) {\n            result = \"\"};\n          basis_str = (function() {if (basis['$=='](0)) {\n            return \"\"\n          } else {\n            return \"\" + (basis) + \" + \"\n          }; return nil; })();\n          return \"\" + \"(\" + (command) + \") ＞ \" + (basis_str) + (total) + \"[\" + (diceText) + \"] ＞ \" + (achievement) + (result);\n        }, $GoblinSlayer_getCheckResult$3.$$arity = 1);\n        \n        Opal.def(self, '$murmurChantPrayInvoke', $GoblinSlayer_murmurChantPrayInvoke$4 = function $$murmurChantPrayInvoke(command) {\n          var self = this, m = nil, luck = nil, volition = nil, dice_list = nil, total = nil, diceText = nil, achievement = nil, result = nil, luck_str = nil;\n\n          \n          m = /^MCPI(\\+?\\d+)?\\$(\\d+)$/i.$match(command);\n          if ($truthy(m)) {\n          } else {\n            return nil\n          };\n          luck = m['$[]'](1).$to_i();\n          volition = m['$[]'](2).$to_i();\n          if ($truthy($rb_ge(volition, 12))) {\n            return \"因果点が12点以上の場合、因果点は使用できません。\"};\n          dice_list = self.randomizer.$roll_barabara(2, 6);\n          total = dice_list.$sum();\n          diceText = dice_list.$join(\",\");\n          achievement = $rb_plus(total, luck);\n          result = \"\" + \" ＞ \" + (self.$resultStr(achievement, volition, \">=\", false, false));\n          luck_str = (function() {if (luck['$=='](0)) {\n            return \"\"\n          } else {\n            return \"\" + \"+\" + (luck)\n          }; return nil; })();\n          return \"\" + \"祈念(2d6\" + (luck_str) + \") ＞ \" + (total) + \"[\" + (diceText) + \"]\" + (luck_str) + \" ＞ \" + (achievement) + (result) + \", 因果点：\" + (volition) + \"点 → \" + ($rb_plus(volition, 1)) + \"点\";\n        }, $GoblinSlayer_murmurChantPrayInvoke$4.$$arity = 1);\n        \n        Opal.def(self, '$damageBonus', $GoblinSlayer_damageBonus$5 = function $$damageBonus(command) {\n          var self = this, m = nil, num = nil, fmt = nil, times = nil, dice_list = nil, total = nil, diceText = nil;\n\n          \n          m = /^DB(\\d+)$/i.$match(command);\n          if ($truthy(m)) {\n          } else {\n            return nil\n          };\n          num = m['$[]'](1).$to_i();\n          fmt = \"命中判定の効力値によるボーナス ＞ \";\n          if ($truthy($rb_lt(num, 15))) {\n            return $rb_plus(fmt, \"なし\")};\n          times = (function() {if ($truthy($rb_ge(num, 40))) {\n            return 5\n          } else if ($truthy($rb_ge(num, 30))) {\n            return 4\n          } else if ($truthy($rb_ge(num, 25))) {\n            return 3\n          } else if ($truthy($rb_ge(num, 20))) {\n            return 2\n          } else {\n            return 1\n          }; return nil; })();\n          dice_list = self.randomizer.$roll_barabara(times, 6);\n          total = dice_list.$sum();\n          diceText = dice_list.$join(\",\");\n          return $rb_plus(fmt, \"\" + (total) + \"[\" + (diceText) + \"] ＞ \" + (total));\n        }, $GoblinSlayer_damageBonus$5.$$arity = 1);\n        return (Opal.def(self, '$resultStr', $GoblinSlayer_resultStr$6 = function $$resultStr(achievement, target, cmp_op, fumble, critical) {\n          var self = this;\n\n          \n          if ($truthy(fumble)) {\n            return \"大失敗\"};\n          if ($truthy(critical)) {\n            return \"大成功\"};\n          if (cmp_op['$=='](\">=\")) {\n            return (function() {if ($truthy($rb_ge(achievement, target))) {\n              return \"成功\"\n            } else {\n              return \"失敗\"\n            }; return nil; })()\n          } else {\n            return (function() {if ($truthy($rb_gt(achievement, target))) {\n              return \"成功\"\n            } else {\n              return \"失敗\"\n            }; return nil; })()\n          };\n        }, $GoblinSlayer_resultStr$6.$$arity = 5), nil) && 'resultStr';\n      })($nesting[0], $$($nesting, 'Base'), $nesting)\n    })($nesting[0], $nesting)\n  })($nesting[0], $nesting)\n})(Opal);\n"],"sourceRoot":"webpack:///"}