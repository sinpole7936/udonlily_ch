{"version":3,"sources":["./node_modules/bcdice/lib/bcdice/game_system/GundogRevised.js"],"names":["require","Opal","modules","$rb_ge","lhs","rhs","$rb_le","$rb_divide","$rb_minus","$rb_times","$rb_plus","self","top","$nesting","nil","$$$","$$","$module","module","$klass","klass","$send2","send2","$truthy","truthy","$base","$parent_nesting","concat","$super","$Gundog_initialize$1","$Gundog_result_1d100$2","const_set","def","$$initialize","command","$iter","$$p","$yield","find_super_dispatcher","enabled_d9","$$arity","$$result_1d100","total","_dice_total","cmp_op","target","dig10","dig1","$fumble","$critical","$nothing","$to_i","$success","$failure","$rb_lt","$rb_gt","$send","send","$require","$GundogRevised_initialize$1","$GundogRevised_result_1d100$2","$GundogRevised_eval_game_system_specific_command$3","$GundogRevised_getDamageTypeAndTable$5","$GundogRevised_getFumbleTypeAndTable$6","$$prototype","randomizer","$register_prefix","$$eval_game_system_specific_command","$a","$b","$$4","string","table","ttype","type","mod","head","diceArray","dice","diceOriginalText","output","$upcase","$last_match","$eval","$getDamageTypeAndTable","to_ary","$getFumbleTypeAndTable","$roll_barabara","x","$$s","$sum","$$getDamageTypeAndTable","$case","$$getFumbleTypeAndTable"],"mappings":"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","file":"default~GundogRevised~index.js","sourcesContent":["require('./../opal');\n\n/* Generated by Opal 1.1.1 */\nOpal.modules[\"bcdice/game_system/Gundog\"] = function(Opal) {\n  function $rb_ge(lhs, rhs) {\n    return (typeof(lhs) === 'number' && typeof(rhs) === 'number') ? lhs >= rhs : lhs['$>='](rhs);\n  }\n  function $rb_le(lhs, rhs) {\n    return (typeof(lhs) === 'number' && typeof(rhs) === 'number') ? lhs <= rhs : lhs['$<='](rhs);\n  }\n  function $rb_divide(lhs, rhs) {\n    return (typeof(lhs) === 'number' && typeof(rhs) === 'number') ? lhs / rhs : lhs['$/'](rhs);\n  }\n  function $rb_minus(lhs, rhs) {\n    return (typeof(lhs) === 'number' && typeof(rhs) === 'number') ? lhs - rhs : lhs['$-'](rhs);\n  }\n  function $rb_times(lhs, rhs) {\n    return (typeof(lhs) === 'number' && typeof(rhs) === 'number') ? lhs * rhs : lhs['$*'](rhs);\n  }\n  function $rb_plus(lhs, rhs) {\n    return (typeof(lhs) === 'number' && typeof(rhs) === 'number') ? lhs + rhs : lhs['$+'](rhs);\n  }\n  var self = Opal.top, $nesting = [], nil = Opal.nil, $$$ = Opal.$$$, $$ = Opal.$$, $module = Opal.module, $klass = Opal.klass, $send2 = Opal.send2, $truthy = Opal.truthy;\n\n  return (function($base, $parent_nesting) {\n    var self = $module($base, 'BCDice');\n\n    var $nesting = [self].concat($parent_nesting);\n\n    (function($base, $parent_nesting) {\n      var self = $module($base, 'GameSystem');\n\n      var $nesting = [self].concat($parent_nesting);\n\n      (function($base, $super, $parent_nesting) {\n        var self = $klass($base, $super, 'Gundog');\n\n        var $nesting = [self].concat($parent_nesting), $Gundog_initialize$1, $Gundog_result_1d100$2;\n\n        \n        Opal.const_set($nesting[0], 'ID', \"Gundog\");\n        Opal.const_set($nesting[0], 'NAME', \"ガンドッグ\");\n        Opal.const_set($nesting[0], 'SORT_KEY', \"かんとつく\");\n        Opal.const_set($nesting[0], 'HELP_MESSAGE', \"\" + \"失敗、成功、クリティカル、ファンブルとロールの達成値の自動判定を行います。\\n\" + \"nD9ロールも対応。\\n\");\n        \n        Opal.def(self, '$initialize', $Gundog_initialize$1 = function $$initialize(command) {\n          var $iter = $Gundog_initialize$1.$$p, $yield = $iter || nil, self = this;\n\n          if ($iter) $Gundog_initialize$1.$$p = null;\n          \n          $send2(self, Opal.find_super_dispatcher(self, 'initialize', $Gundog_initialize$1, false, true), 'initialize', [command], null);\n          return (self.enabled_d9 = true);\n        }, $Gundog_initialize$1.$$arity = 1);\n        return (Opal.def(self, '$result_1d100', $Gundog_result_1d100$2 = function $$result_1d100(total, _dice_total, cmp_op, target) {\n          var self = this, dig10 = nil, dig1 = nil;\n\n          \n          if (cmp_op['$=='](\"<=\")) {\n          } else {\n            return nil\n          };\n          if ($truthy($rb_ge(total, 100))) {\n            return $$($nesting, 'Result').$fumble(\"ファンブル\")\n          } else if ($truthy($rb_le(total, 1))) {\n            return $$($nesting, 'Result').$critical(\"絶対成功(達成値1+SL)\")\n          } else if (target['$=='](\"?\")) {\n            return $$($nesting, 'Result').$nothing()\n          } else if ($truthy($rb_le(total, target))) {\n            \n            dig10 = $rb_divide(total, 10).$to_i();\n            dig1 = $rb_minus(total, $rb_times(dig10, 10));\n            if ($truthy($rb_ge(dig10, 10))) {\n              dig10 = 0};\n            if ($truthy($rb_ge(dig1, 10))) {\n              dig1 = 0};\n            if ($truthy($rb_le(dig1, 0))) {\n              return $$($nesting, 'Result').$critical(\"クリティカル(達成値20+SL)\")\n            } else {\n              return $$($nesting, 'Result').$success(\"\" + \"成功(達成値\" + ($rb_plus(dig10, dig1)) + \"+SL)\")\n            };\n          } else {\n            return $$($nesting, 'Result').$failure(\"失敗\")\n          };\n        }, $Gundog_result_1d100$2.$$arity = 4), nil) && 'result_1d100';\n      })($nesting[0], $$($nesting, 'Base'), $nesting)\n    })($nesting[0], $nesting)\n  })($nesting[0], $nesting)\n};\n\n/* Generated by Opal 1.1.1 */\n(function(Opal) {\n  function $rb_ge(lhs, rhs) {\n    return (typeof(lhs) === 'number' && typeof(rhs) === 'number') ? lhs >= rhs : lhs['$>='](rhs);\n  }\n  function $rb_le(lhs, rhs) {\n    return (typeof(lhs) === 'number' && typeof(rhs) === 'number') ? lhs <= rhs : lhs['$<='](rhs);\n  }\n  function $rb_divide(lhs, rhs) {\n    return (typeof(lhs) === 'number' && typeof(rhs) === 'number') ? lhs / rhs : lhs['$/'](rhs);\n  }\n  function $rb_minus(lhs, rhs) {\n    return (typeof(lhs) === 'number' && typeof(rhs) === 'number') ? lhs - rhs : lhs['$-'](rhs);\n  }\n  function $rb_times(lhs, rhs) {\n    return (typeof(lhs) === 'number' && typeof(rhs) === 'number') ? lhs * rhs : lhs['$*'](rhs);\n  }\n  function $rb_plus(lhs, rhs) {\n    return (typeof(lhs) === 'number' && typeof(rhs) === 'number') ? lhs + rhs : lhs['$+'](rhs);\n  }\n  function $rb_lt(lhs, rhs) {\n    return (typeof(lhs) === 'number' && typeof(rhs) === 'number') ? lhs < rhs : lhs['$<'](rhs);\n  }\n  function $rb_gt(lhs, rhs) {\n    return (typeof(lhs) === 'number' && typeof(rhs) === 'number') ? lhs > rhs : lhs['$>'](rhs);\n  }\n  var self = Opal.top, $nesting = [], nil = Opal.nil, $$$ = Opal.$$$, $$ = Opal.$$, $module = Opal.module, $klass = Opal.klass, $send2 = Opal.send2, $truthy = Opal.truthy, $send = Opal.send;\n\n  \n  self.$require(\"bcdice/game_system/Gundog\");\n  return (function($base, $parent_nesting) {\n    var self = $module($base, 'BCDice');\n\n    var $nesting = [self].concat($parent_nesting);\n\n    (function($base, $parent_nesting) {\n      var self = $module($base, 'GameSystem');\n\n      var $nesting = [self].concat($parent_nesting);\n\n      (function($base, $super, $parent_nesting) {\n        var self = $klass($base, $super, 'GundogRevised');\n\n        var $nesting = [self].concat($parent_nesting), $GundogRevised_initialize$1, $GundogRevised_result_1d100$2, $GundogRevised_eval_game_system_specific_command$3, $GundogRevised_getDamageTypeAndTable$5, $GundogRevised_getFumbleTypeAndTable$6;\n\n        self.$$prototype.randomizer = nil;\n        \n        Opal.const_set($nesting[0], 'ID', \"GundogRevised\");\n        Opal.const_set($nesting[0], 'NAME', \"ガンドッグ・リヴァイズド\");\n        Opal.const_set($nesting[0], 'SORT_KEY', \"かんとつくりうあいすと\");\n        Opal.const_set($nesting[0], 'HELP_MESSAGE', \"\" + \"失敗、成功、クリティカル、ファンブルとロールの達成値の自動判定を行います。\\n\" + \"nD9ロールも対応。\\n\" + \"・ダメージペナルティ表　　(～DPTx) (x:修正)\\n\" + \"　射撃(SDPT)、格闘(MDPT)、車両(VDPT)、汎用(GDPT)の各表を引くことが出来ます。\\n\" + \"　修正を後ろに書くことも出来ます。\\n\" + \"・ファンブル表　　　　　　(～FTx)  (x:修正)\\n\" + \"　射撃(SFT)、格闘(MFT)、投擲(TFT)の各表を引くことが出来ます。\\n\" + \"　修正を後ろに書くことも出来ます。\\n\");\n        self.$register_prefix(\".DPT\", \".FT\");\n        \n        Opal.def(self, '$initialize', $GundogRevised_initialize$1 = function $$initialize(command) {\n          var $iter = $GundogRevised_initialize$1.$$p, $yield = $iter || nil, self = this;\n\n          if ($iter) $GundogRevised_initialize$1.$$p = null;\n          \n          $send2(self, Opal.find_super_dispatcher(self, 'initialize', $GundogRevised_initialize$1, false, true), 'initialize', [command], null);\n          return (self.enabled_d9 = true);\n        }, $GundogRevised_initialize$1.$$arity = 1);\n        \n        Opal.def(self, '$result_1d100', $GundogRevised_result_1d100$2 = function $$result_1d100(total, _dice_total, cmp_op, target) {\n          var self = this, dig10 = nil, dig1 = nil;\n\n          \n          if (cmp_op['$=='](\"<=\")) {\n          } else {\n            return nil\n          };\n          if ($truthy($rb_ge(total, 100))) {\n            return $$($nesting, 'Result').$fumble(\"ファンブル\")\n          } else if ($truthy($rb_le(total, 1))) {\n            return $$($nesting, 'Result').$critical(\"ベアリー(達成値1+SL)\")\n          } else if (target['$=='](\"?\")) {\n            return $$($nesting, 'Result').$nothing()\n          } else if ($truthy($rb_le(total, target))) {\n            \n            dig10 = $rb_divide(total, 10).$to_i();\n            dig1 = $rb_minus(total, $rb_times(dig10, 10));\n            if ($truthy($rb_ge(dig10, 10))) {\n              dig10 = 0};\n            if ($truthy($rb_ge(dig1, 10))) {\n              dig1 = 0};\n            if ($truthy($rb_le(dig1, 0))) {\n              return $$($nesting, 'Result').$critical(\"クリティカル(達成値20+SL)\")\n            } else {\n              return $$($nesting, 'Result').$success(\"\" + \"成功(達成値\" + ($rb_plus(dig10, dig1)) + \"+SL)\")\n            };\n          } else {\n            return $$($nesting, 'Result').$failure(\"失敗\")\n          };\n        }, $GundogRevised_result_1d100$2.$$arity = 4);\n        \n        Opal.def(self, '$eval_game_system_specific_command', $GundogRevised_eval_game_system_specific_command$3 = function $$eval_game_system_specific_command(command) {\n          var $a, $b, $$4, self = this, string = nil, table = nil, ttype = nil, type = nil, mod = nil, head = nil, diceArray = nil, dice = nil, diceOriginalText = nil, output = nil;\n\n          \n          string = command.$upcase();\n          table = [];\n          ttype = \"\";\n          type = \"\";\n          mod = 0;\n          if ($truthy(/(\\w)DPT([+\\-\\d]*)/i['$=~'](string))) {\n            \n            ttype = \"ダメージペナルティー\";\n            head = $$($nesting, 'Regexp').$last_match(1);\n            if ($truthy($$($nesting, 'Regexp').$last_match(2))) {\n              mod = $$($nesting, 'ArithmeticEvaluator').$eval($$($nesting, 'Regexp').$last_match(2))};\n            $b = self.$getDamageTypeAndTable(head), $a = Opal.to_ary($b), (type = ($a[0] == null ? nil : $a[0])), (table = ($a[1] == null ? nil : $a[1])), $b;};\n          if ($truthy(/(\\w)FT([+\\-\\d]*)/i['$=~'](string))) {\n            \n            ttype = \"ファンブル\";\n            head = $$($nesting, 'Regexp').$last_match(1);\n            if ($truthy($$($nesting, 'Regexp').$last_match(2))) {\n              mod = $$($nesting, 'ArithmeticEvaluator').$eval($$($nesting, 'Regexp').$last_match(2))};\n            $b = self.$getFumbleTypeAndTable(head), $a = Opal.to_ary($b), (type = ($a[0] == null ? nil : $a[0])), (table = ($a[1] == null ? nil : $a[1])), $b;};\n          if ($truthy(type['$empty?']())) {\n            return \"1\"};\n          diceArray = self.randomizer.$roll_barabara(2, 10);\n          dice = $rb_plus(mod, $send(diceArray, 'select', [], ($$4 = function(x){var self = $$4.$$s == null ? this : $$4.$$s;\n\n          \n            \n            if (x == null) {\n              x = nil;\n            };\n            return $rb_lt(x, 10);}, $$4.$$s = self, $$4.$$arity = 1, $$4)).$sum());\n          diceOriginalText = dice;\n          if ($truthy($rb_lt(dice, 0))) {\n            dice = 0};\n          if ($truthy($rb_gt(dice, 18))) {\n            dice = 18};\n          output = \"\" + (type) + (ttype) + \"表[\" + (diceOriginalText) + \"] ＞ \" + (table['$[]'](dice));\n          return output;\n        }, $GundogRevised_eval_game_system_specific_command$3.$$arity = 1);\n        \n        Opal.def(self, '$getDamageTypeAndTable', $GundogRevised_getDamageTypeAndTable$5 = function $$getDamageTypeAndTable(head) {\n          var $a, $b, self = this, $case = nil, type = nil, table = nil;\n\n          \n          $case = head;\n          if (\"S\"['$===']($case)) {\n          type = \"射撃\";\n          table = [\"対象は[死亡]\", \"[追加D]4D6/[出血]2D6/[重傷]-40％/[朦朧判定]15\", \"[追加D]3D6/[出血]2D6/[重傷]-30％/[朦朧判定]14\", \"[追加D]3D6/[出血]2D6/[重傷]-30％/[朦朧判定]13\", \"[追加D]3D6/[出血]1D6/[重傷]-20％/[朦朧判定]12\", \"[追加D]2D6/[出血]1D6/[重傷]-20％/[朦朧判定]11\", \"[追加D]2D6/[軽傷]-20％/[朦朧判定]11\", \"[追加D]2D6/[軽傷]-20％/[朦朧判定]10\", \"[追加D]2D6/[軽傷]-20％/[朦朧判定]8\", \"[追加D]2D6/[軽傷]-20％/[朦朧判定]6\", \"[追加D]2D6/[軽傷]-10％/[朦朧判定]4\", \"[追加D]2D6/[軽傷]-20％\", \"[追加D]1D6/[軽傷]-20％\", \"[追加D]1D6/[軽傷]-10％\", \"[ショック]-20％\", \"[ショック]-10％\", \"[不安定]\", \"手に持った武器を落とす。複数ある場合はランダム\", \"ペナルティー無し\"];}\n          else if (\"M\"['$===']($case)) {\n          type = \"格闘\";\n          table = [\"対象は[死亡]\", \"[追加D]4D6/[出血]2D6/[重傷]-40％/[朦朧判定]15\", \"[追加D]3D6/[出血]2D6/[重傷]-30％/[朦朧判定]14\", \"[追加D]3D6/[出血]1D6/[重傷]-20％/[朦朧判定]14/[不安定]\", \"[追加D]2D6/[出血]1D6/[重傷]-20％/[朦朧判定]14\", \"[追加D]2D6/[重傷]-20％/[朦朧判定]12/[不安定]\", \"[追加D]2D6/[軽傷]-20％/[朦朧判定]11\", \"[追加D]2D6/[軽傷]-20％/[朦朧判定]10\", \"[追加D]2D6/[軽傷]-20％/[朦朧判定]8\", \"[追加D]2D6/[軽傷]-20％/[朦朧判定]6\", \"[追加D]1D6/[軽傷]-20％/[朦朧判定]6\", \"[追加D]1D6/[軽傷]-10％/[朦朧判定]6\", \"[追加D]1D6/[軽傷]-10％/[不安定]\", \"[追加D]1D6/[軽傷]-10％\", \"[ショック]-20％\", \"[ショック]-10％\", \"[不安定]\", \"手に持った武器を落とす。複数ある場合はランダム\", \"ペナルティー無し\"];}\n          else if (\"V\"['$===']($case)) {\n          type = \"車両\";\n          table = [\"[クラッシュ]する。[チェイス]から除外\", \"[車両D]4D6/[乗員D]3D6/[操作性]-40%/[スピン判定]\", \"[車両D]3D6/[乗員D]3D6/[操作性]-30%/[スピン判定]\", \"[乗員D]3D6/[操作性]-20%/[スピン判定]\", \"[乗員D]3D6/[操作性]-20%/[スピン判定]\", \"[乗員D]3D6/[操作性]-10%/[スピン判定]\", \"[乗員D]3D6/[操作性]-10%/[スピン判定]\", \"[乗員D]2D6/[スピード]-2/[スピン判定]\", \"[乗員D]2D6/[スピード]-2/[スピン判定]\", \"[乗員D]2D6/[操縦判定]-20%/[スピン判定]\", \"[乗員D]2D6/[操縦判定]-20%/[スピン判定]\", \"[乗員D]2D6/[操縦判定]-20%\", \"[乗員D]2D6/[操縦判定]-20%\", \"[乗員D]1D6/[操縦判定]-20%\", \"[乗員D]1D6/[操縦判定]-10%\", \"攻撃が乗員をかすめる。ランダムな乗員1人に[ショック]-20％\", \"攻撃が乗員に当たりかける。ランダムな乗員1人に[ショック]-10％\", \"車両が蛇行。乗員全員は〈運動〉判定。失敗で[不安定]\", \"ペナルティー無し\"];}\n          else if (\"G\"['$===']($case)) {\n          type = \"汎用\";\n          table = [\"対象は[死亡]\", \"[追加D]4D6/[出血]2D6/[重傷]-40％/[朦朧判定]15\", \"[追加D]3D6/[出血]2D6/[重傷]-30％/[朦朧判定]14\", \"[追加D]2D6/[出血]1D6/[重傷]-30％/[朦朧判定]13/[不安定]\", \"[追加D]2D6/[出血]1D6/[重傷]-30％/[朦朧判定]12\", \"[追加D]2D6/[重傷]-20％/[朦朧判定]12/[不安定]\", \"[追加D]1D6/[重傷]-20％/[朦朧判定]11\", \"[追加D]1D6/[軽傷]-30％/[朦朧判定]10\", \"[追加D]1D6/[軽傷]-30％/[朦朧判定]8\", \"[追加D]1D6/[軽傷]-30％/[朦朧判定]6\", \"[追加D]1D6/[軽傷]-20％/[朦朧判定]6\", \"[軽傷]-20％/[朦朧判定]6\", \"[軽傷]-20％/[不安定]\", \"[軽傷]-20％\", \"[軽傷]-10％\", \"[ショック]-20％\", \"[ショック]-10％\", \"[不安定]\", \"ペナルティー無し\"];}\n          else {\n          head = \"S\";\n          $b = self.$getDamageTypeAndTable(head), $a = Opal.to_ary($b), (type = ($a[0] == null ? nil : $a[0])), (table = ($a[1] == null ? nil : $a[1])), $b;};\n          return [type, table];\n        }, $GundogRevised_getDamageTypeAndTable$5.$$arity = 1);\n        return (Opal.def(self, '$getFumbleTypeAndTable', $GundogRevised_getFumbleTypeAndTable$6 = function $$getFumbleTypeAndTable(head) {\n          var $a, $b, self = this, $case = nil, type = nil, table = nil;\n\n          \n          $case = head;\n          if (\"S\"['$===']($case)) {\n          type = \"射撃\";\n          table = [\"銃器が暴発、自分に命中。[貫通D]。武装喪失\", \"銃器が暴発、自分に命中。[非貫通D]。武装喪失\", \"誤射。射線に最も近い味方に命中。[貫通D]\", \"誤射。射線に最も近い味方に命中。[非貫通D]\", \"銃器が完全に故障。直せない\", \"故障。30分かけて〈メカニック〉判定に成功するまで使用不可。\", \"故障。〈メカニック〉-20％の判定に成功するまで使用不可。\", \"故障。〈メカニック〉判定に成功するまで射撃不可\", \"作動不良。[アイテム使用]を2回行って修理するまで射撃不可\", \"作動不良。[アイテム使用]を行って修理するまで射撃不可\", \"足がもつれて倒れる。[転倒]\", \"無理な射撃姿勢で腕を痛める。[軽傷]-20％\", \"無理な射撃姿勢でどこかの筋を痛める。[軽傷]-10％\", \"武装を落とす。スリング（肩ひも）も切れる\", \"武装を落とす。スリング（肩ひも）があれば落とさない\", \"排莢された薬莢が服の中に。[ショック]-20％\", \"排莢された薬莢が顔に当たる。[ショック]-10％\", \"薬莢を踏んで態勢を崩す。[不安定]\", \"ペナルティー無し\"];}\n          else if (\"M\"['$===']($case)) {\n          type = \"格闘\";\n          table = [\"自分に命中。[貫通D]\", \"自分に命中。[非貫通D]\", \"最も近い味方（射程内にいなければ自分）に[貫通D]\", \"最も近い味方（射程内にいなければ自分）に[非貫通D]\", \"頭を強く打ちつける。[朦朧]\", \"武装が壊れる。直せない。[格闘タイプ]なら[重傷]-20％\", \"武装がすっぽ抜ける。グレネードの誤差で落下先を決定\", \"武装が損傷。30分かけて〈手先〉判定に成功するまで使用不可。[格闘タイプ]なら[重傷]-10％\", \"武装がガタつく。〈手先〉判定（[格闘タイプ]なら〈強靭〉）に成功するまで使用不可。\", \"武装に違和感。[アイテム使用]を行って調整するまで、命中率-20％\", \"足がもつれる。[転倒]\", \"足がつる。2[ラウンド]の間、移動距離1/2\", \"無理な体勢で腕（あるいは脚）を痛める。[軽傷]-20％\", \"無理な体勢でどこかの筋を痛める。[軽傷]-10％\", \"武装を落とす\", \"武装で自分が負傷。[ショック]-20％\", \"武装の扱いを間違える。[ショック]-10％\", \"攻撃を避けられて体勢を崩す。[不安定]\", \"ペナルティー無し\"];}\n          else if (\"T\"['$===']($case)) {\n          type = \"投擲\";\n          table = [\"勢いをつけすぎて転倒し、頭を打つ。[気絶]\", \"自分に命中。（手榴弾なら自分の足元に落ちる）[貫通D]\", \"自分に命中。（手榴弾なら自分の足元に落ちる）[非貫通D]\", \"暴投。射線に最も近い味方に命中。[貫通D]。手榴弾なら新たな中心点からさらに誤差が生じる\", \"暴投。射線に最も近い味方に命中。[非貫通D]。手榴弾なら新たな中心点からさらに誤差が生じる\", \"頭を強く打ちつける。[朦朧]\", \"肩の筋肉断裂。この腕を使う判定に、[重傷]-20％\", \"ヒジの筋肉断裂。この腕を使う判定に、[重傷]-10％\", \"肩の筋をひどく痛める。〈医療〉判定に成功するまで、この腕を使う判定に-20％\", \"肩の筋を痛める。[行動]を使って休めるまで、この腕を使う判定に-20％\", \"腰を痛める。[軽傷]-30％\", \"足がもつれて倒れる。[転倒]\", \"足がつる。2[ラウンド]の間、移動距離1/2\", \"無理な投擲体勢で腕（あるいは脚）を痛める。[軽傷]-20％\", \"無理な投擲体勢でどこかの筋を痛める。[軽傷]-10％\", \"肩に違和感。[ショック]-20％\", \"ヒジに違和感。[ショック]-10％\", \"つまずいて姿勢を崩す。[不安定]\", \"ペナルティー無し\"];}\n          else {\n          head = \"S\";\n          $b = self.$getFumbleTypeAndTable(head), $a = Opal.to_ary($b), (type = ($a[0] == null ? nil : $a[0])), (table = ($a[1] == null ? nil : $a[1])), $b;};\n          return [type, table];\n        }, $GundogRevised_getFumbleTypeAndTable$6.$$arity = 1), nil) && 'getFumbleTypeAndTable';\n      })($nesting[0], $$($nesting, 'Base'), $nesting)\n    })($nesting[0], $nesting)\n  })($nesting[0], $nesting);\n})(Opal);\n"],"sourceRoot":"webpack:///"}