{"version":3,"sources":["./node_modules/bcdice/lib/bcdice/game_system/KurayamiCrying.js"],"names":["require","Opal","self","top","$nesting","nil","$$$","$$","$module","module","$klass","klass","$truthy","truthy","$hash2","hash2","$base","$parent_nesting","concat","$super","$KurayamiCrying_eval_game_system_specific_command$1","const_set","def","$$eval_game_system_specific_command","command","m","number","$match","$to_i","$choice","$to_s","$roll_tables","$$arity","$new","$freeze","$register_prefix","$keys"],"mappings":"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","file":"default~KurayamiCrying~index.js","sourcesContent":["require('./../opal');\n\n/* Generated by Opal 1.1.1 */\n(function(Opal) {\n  var self = Opal.top, $nesting = [], nil = Opal.nil, $$$ = Opal.$$$, $$ = Opal.$$, $module = Opal.module, $klass = Opal.klass, $truthy = Opal.truthy, $hash2 = Opal.hash2;\n\n  return (function($base, $parent_nesting) {\n    var self = $module($base, 'BCDice');\n\n    var $nesting = [self].concat($parent_nesting);\n\n    (function($base, $parent_nesting) {\n      var self = $module($base, 'GameSystem');\n\n      var $nesting = [self].concat($parent_nesting);\n\n      (function($base, $super, $parent_nesting) {\n        var self = $klass($base, $super, 'KurayamiCrying');\n\n        var $nesting = [self].concat($parent_nesting), $KurayamiCrying_eval_game_system_specific_command$1;\n\n        \n        Opal.const_set($nesting[0], 'ID', \"KurayamiCrying\");\n        Opal.const_set($nesting[0], 'NAME', \"クラヤミクライン\");\n        Opal.const_set($nesting[0], 'SORT_KEY', \"くらやみくらいん\");\n        Opal.const_set($nesting[0], 'HELP_MESSAGE', \"\" + \"・アクシデント表（ACT）\\n\" + \"・感情表（EMO）\\n\" + \"・幕間シーン表（情景）（SST）\\n\" + \"・幕間シーン表（関係）（SRT）\\n\");\n        \n        Opal.def(self, '$eval_game_system_specific_command', $KurayamiCrying_eval_game_system_specific_command$1 = function $$eval_game_system_specific_command(command) {\n          var self = this, m = nil, number = nil;\n\n          if ($truthy((m = /^ACT(\\d+)$/i.$match(command)))) {\n            \n            number = m['$[]'](1).$to_i();\n            return $$($nesting, 'TABLES')['$[]'](\"ACT\").$choice(number).$to_s();\n          } else {\n            return self.$roll_tables(command, $$($nesting, 'TABLES'))\n          }\n        }, $KurayamiCrying_eval_game_system_specific_command$1.$$arity = 1);\n        Opal.const_set($nesting[0], 'TABLES', $hash2([\"ACT\", \"EMO\", \"SST\", \"SRT\"], {\"ACT\": $$$($$($nesting, 'DiceTable'), 'Table').$new(\"アクシデント表\", \"1D10\", [\"頭の中が黒く染まってゆく、怖い、苦しい。気持ち悪い！でも…なんだか少しだけ、すがすがしい。あなたは「発狂」する。すでに「発狂」している場合、「理性」を2点失う。\", \"待って、今のはナシ！調子が愚かったっていうか、ちょっと違うことしちゃったからさ…もう1回やらせてよ、ね？失敗した「判定」を再度やり直す。ただし、前回と同じ「能力値」を使うことはできす、進行役と「交渉」を行った扱いとなる（代替判定により「浸食」が2点増加する）。\", \"こっちは必死にやってるってのに、まったく、アイツめ……！ あなたが「ツナガリ」を結んでいる主人公を任意に1人選び、「感情」を変更する。この際、必す「負の惑情」を選ばなければならない。「ツナガリ」を結んでいる主人公がいない場合、ダイスを振り直し、再度「アクシデント表」に当てはめる。\", \"不意を突かれたあなたは、とっさに化物を攻撃する！……確かに化物に見えたのだ。しかし、あなたが手にかけたのは見知った顔だった。あなたが正の「ツナガリ」を結んでいる主人公をランダムに1人選び、2点のダメージを与える。正の「ツナガリ」を結んでいる主人公がいない場合、ダイスを振り直し、再度「アクシデント表」に当てはめる。\", \"さっきからずっと、不気味な視線を感じる……どうやら、良くない存在に目をつけられてしまったようだ。「怪異」があなたに一方的な「ツナガリ」を獲得する。すでに「怪異」から「ツナガリ」を獲得されている場合、ダイスを振り直し、再度「アクシデント表」に当てはめる。\", \"ぶつんと頭の中で音がする。あれっ？誰かのことを考えていたような……なんだか記憶が霞んで、思い出せない。あなたが獲得している「ツナガリ」をランダムに1つ失う（「継続的なツナガリ」である場合、セッション終了後に再度獲得する）。「ツナガリ」が1つもない場合、ダイスを振り直し、再度「アクシデント表」に当てはめる。\", \"ぞわりと背中に懇寒が走る。自分を取り巻く「流れ」──運命に似た何かが歪んでしまったような、おぞましい予感が胸を走る。「確保」しているダイスの目が「10」になる。ダイスを「確保」していない場合、新たに「10」を「確保」する。すでに「10」の目を「確保」している場合、ダイスを振り直し、再度「アクシデント表」に当てはめる。\", \"違う……違う、違う。これは自分のせいじゃない。いや、きっと何かの間違いだ。そう、あいつのせいに決まってる！進行役があなた以外の主人公をランダムに1人選ぷ（誰を選んだか参加者に教えてはならない） 。選ばれた主人公が次に判定を行った際、進行役は、最も低い数字を示しているダイスの目を「10」に変更する。\", \"あぁ……見つからない。アレがないとダメなのに。一体どうしたら──！「アイテム」をランダムに1つ失う（「継続品」である場合、センョン終了後に再度獲得する）。「アイテム」を1つも所持していない場合、「アイテム」を所持する主人公をランダムに1人選び、2点のダメージを与え、「アイテム」を1つ奪い取る。主人公が誰も「アイテム」を所持していない場合、「理性」を2点失う。\", \"まるで自分を支える何かが失われたように、あなたはその場に立ち尽くす。諦めと絶望が心を支配する。ああ、そうか。これが、「心が折れる」ということか……。あなたは「理性」を4点失う。\"]), \"EMO\": $$$($$($nesting, 'DiceTable'), 'Table').$new(\"感情表\", \"1D10\", [\"(正)信頼／(負)依存\", \"(正)安心／(負)不安\", \"(正)友情／(負)憤怒\", \"(正)尊敬／(負)恐怖\", \"(正)愛情／(負)嫉妬\", \"(正)共感／(負)否定\", \"(正)忠誠／(負)侮蔑\", \"(正)憧憬／(負)劣等感\", \"(正)性愛／(負)拒絶\", \"(正)狂信／(負)殺意\"]), \"SST\": $$$($$($nesting, 'DiceTable'), 'Table').$new(\"幕間シーン表（情景）\", \"1D10\", [\"先が見えない闇の中を、あなたは手探りに進んでいる。暗がりに入り込んでしまったのか、それとも辺りの光が消えたのか———その時、あなたの眼前に、闇から溶け出すように何者かの姿が現れた。\", \"夢を見ていた。かつてあった出来事が、目の前で繰り返される……ハッと気が付き、現実に戻る。心配そうにあなたを覗き込む顔を見て、再び夢の光景がフラッシュバックする。この人、あの時の……！\", \"気が付くと見知らぬ場所を１人歩いている。迷ってしまったのだろうか。辺りを見回していた、その時———あなたは背後に気配を感じた。いつの間にか誰か立っている……！\", \"「危ない！」突然上がった声と同時に、あなたは突き飛ばされ、床を転がった。次の瞬間、不気味で巨大な何かがあなたの頭をかすめてゆく……。あなたは身を起こし、あなたと一緒に倒れ込んだ人物に声をかけた。\", \"不気味な声を上げながら、何かがゆっくりと近づいてくる。あなたが咄嗟に身を隠した場所には、すでに誰かいた。このまま息を殺し、一緒に危険が過ぎ去るのを待つしかない。\", \"むせかえるような臭いが辺りに満ちている。これは血の臭いだろうか。いや、それにしては……。すると、あなたの近くで、誰かが小さく咳き込んだ……\", \"一息つけそうな場所を見つけ、あなたは座りこんだ。不気味なことに巻き込まれているとは思えない、穏やかな時間が流れる。ふと、あなたは隣りに座っている人物に話しかけた。\", \"静寂の中、あなたを呼ぶ声が響く。声の主に対し、あなたは思う。望むところだ。自分の方こそ、確認しなければならないことがある———！あなたは足早に、声のする方へと進んだ。\", \"高い場所に立ち、あなたは異常な世界を見下ろしている。その時、後ろで誰かが地面を踏む音がした。来たか……予想通り、ここでなら会うことができた。あなたは振り返り、相手を見た。\", \"周囲を確認し、あなたは相手に合図を送る。足音静かに、相手があなたの元へと駆け寄る。———他の気配はない。慎重に、密やかに、あなたは相手と話し始めた。\"]), \"SRT\": $$$($$($nesting, 'DiceTable'), 'Table').$new(\"幕間シーン表（関係）\", \"1D10\", [\"微かな香り。ちょっとした仕事。横顔。あの人のすべてが、あなたの胸を高鳴らせる———こんな気持ちは、初めてだ。\", \"頭の中にノイズが走る。あなたは、たしかに、あの人とあったことがある。けれど、詳しく思い出そうとするたびに頭痛が走る……この記憶、確かめなければ。\", \"異常な事態だというのに……いや、異常な事態だからこそ、あの人はあなたに安心感を与えてくれる、とにかく話がしたい。今はまず、あの人を探そう。\", \"今あなたに必要なのは「捨て駒」だ。そう、ピッタリの奴がいるじゃないか！誰を犠牲にしても生き残ってやる。そのためには……。あなたは、あの人の方へと歩み寄った。\", \"こんな時でも、どこか気の合う相手というのは見つかるものだ———安堵するような、弾むような気持ちで、あなたはその人に声をかけた。さぁ、共闘といこうじゃないか。\", \"なんでよりによってこんなヤツと……！？図らずも二人きりになってしまった相手に、あなたは眉をひそめた。会話はない。そもそもこいつが安全かわからない……誰か助けて！\", \"特に理由はない。けれど、一緒に行動すること自体は大事でしょう？仕方ないじゃないか、怖いんだから……！あなたは、いそいそと手近な人間へと寄って行った。\", \"不意に昔のこと———二度と取り戻せない過ちが頭をよぎる。そんなことを思い出したのも、あの人の面影を、あの顔に感じてしまうせいだ。別人とはわかっている。けれど、今度こそ———。\", \"あなたは影に隠れ、その人物を見張っている。怪しい……この人こそが、事件の元凶じゃないか？とはいえ、このままではじり貧だ。あなたは意を決し、影から飛び出して話をかけた。\", \"間違いない……！あなたはその人物をにらみつけた。何という幸運だろう。追い求めた相手が、すぐそこにいるなんて！あなたは荒れ狂う胸の内を気取られぬよう、ゆっくりと近づいた。\"])}).$freeze());\n        return self.$register_prefix($$($nesting, 'TABLES').$keys());\n      })($nesting[0], $$($nesting, 'Base'), $nesting)\n    })($nesting[0], $nesting)\n  })($nesting[0], $nesting)\n})(Opal);\n"],"sourceRoot":"webpack:///"}