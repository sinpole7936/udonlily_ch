{"version":3,"sources":["./node_modules/bcdice/lib/bcdice/game_system/LostRoyal.js"],"names":["require","Opal","$rb_minus","lhs","rhs","$rb_plus","$rb_ge","$rb_gt","self","top","$nesting","nil","$$$","$$","$module","module","$klass","klass","$send2","send2","$send","send","$range","range","$truthy","truthy","$base","$parent_nesting","concat","$super","$LostRoyal_initialize$1","$LostRoyal_eval_game_system_specific_command$2","$LostRoyal_check_lostroyal$3","$LostRoyal_find_sequence$6","$LostRoyal_find_sequence_from_start_key$10","$LostRoyal_fumble_$ques$11","$LostRoyal_roll_fumble_chart$13","$LostRoyal_roll_wind_power_chart$14","$LostRoyal_roll_emotion_chart$16","$LostRoyal_roll_hope$17","$LostRoyal_is_1or2$19","$$prototype","randomizer","const_set","$register_prefix","def","$$initialize","command","$iter","$$p","$yield","find_super_dispatcher","sort_add_dice","d66_sort_type","$$arity","$$eval_game_system_specific_command","$case","$check_lostroyal","$last_match","$to_i","$roll_fumble_chart","$roll_wind_power_chart","$roll_emotion_chart","$roll_hope","$$check_lostroyal","checking_table","$$4","$$5","keys","scores","total_score","chained_sequence","text","$ret_or_1","bonus","_i","$$s","key","$roll_once","k","$to_a","$inject","$find_sequence","$join","$size","$$find_sequence","$$7","$$8","$$9","sequences","$sort","start_key","$find_sequence_from_start_key","x","a","b","$$find_sequence_from_start_key","$a","chained_keys","$ret_or_2","$unshift","$$12","$count","ret","$returner","returner","$v","$$roll_fumble_chart","$$roll_wind_power_chart","$$15","total_bonus","$b","dice","add","current_text","$min","to_ary","$$roll_emotion_chart","$$roll_hope","number_of_dice","$$18","total","d1","d2","$ret_or_3","$is_1or2","$$is_1or2","n"],"mappings":"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","file":"default~LostRoyal~index.js","sourcesContent":["require('./../opal');\n\n/* Generated by Opal 1.1.1 */\n(function(Opal) {\n  function $rb_minus(lhs, rhs) {\n    return (typeof(lhs) === 'number' && typeof(rhs) === 'number') ? lhs - rhs : lhs['$-'](rhs);\n  }\n  function $rb_plus(lhs, rhs) {\n    return (typeof(lhs) === 'number' && typeof(rhs) === 'number') ? lhs + rhs : lhs['$+'](rhs);\n  }\n  function $rb_ge(lhs, rhs) {\n    return (typeof(lhs) === 'number' && typeof(rhs) === 'number') ? lhs >= rhs : lhs['$>='](rhs);\n  }\n  function $rb_gt(lhs, rhs) {\n    return (typeof(lhs) === 'number' && typeof(rhs) === 'number') ? lhs > rhs : lhs['$>'](rhs);\n  }\n  var self = Opal.top, $nesting = [], nil = Opal.nil, $$$ = Opal.$$$, $$ = Opal.$$, $module = Opal.module, $klass = Opal.klass, $send2 = Opal.send2, $send = Opal.send, $range = Opal.range, $truthy = Opal.truthy;\n\n  return (function($base, $parent_nesting) {\n    var self = $module($base, 'BCDice');\n\n    var $nesting = [self].concat($parent_nesting);\n\n    (function($base, $parent_nesting) {\n      var self = $module($base, 'GameSystem');\n\n      var $nesting = [self].concat($parent_nesting);\n\n      (function($base, $super, $parent_nesting) {\n        var self = $klass($base, $super, 'LostRoyal');\n\n        var $nesting = [self].concat($parent_nesting), $LostRoyal_initialize$1, $LostRoyal_eval_game_system_specific_command$2, $LostRoyal_check_lostroyal$3, $LostRoyal_find_sequence$6, $LostRoyal_find_sequence_from_start_key$10, $LostRoyal_fumble_$ques$11, $LostRoyal_roll_fumble_chart$13, $LostRoyal_roll_wind_power_chart$14, $LostRoyal_roll_emotion_chart$16, $LostRoyal_roll_hope$17, $LostRoyal_is_1or2$19;\n\n        self.$$prototype.randomizer = nil;\n        \n        Opal.const_set($nesting[0], 'ID', \"LostRoyal\");\n        Opal.const_set($nesting[0], 'NAME', \"ロストロイヤル\");\n        Opal.const_set($nesting[0], 'SORT_KEY', \"ろすとろいやる\");\n        Opal.const_set($nesting[0], 'HELP_MESSAGE', \"\" + \"・D66ダイスあり\\n\" + \"\\n\" + \"行為判定\\n\" + \"　LR[x,x,x,x,x,x]\\n\" + \"　　x の並びには【判定表】の数値を順番に入力する。\\n\" + \"　　（例： LR[1,3,0,1,2,3] ）\\n\" + \"\\n\" + \"ファンブル表\\n\" + \"　FC\\n\" + \"\\n\" + \"風力決定表\\n\" + \"　WPC\\n\" + \"\\n\" + \"感情決定表\\n\" + \"　EC\\n\" + \"\\n\" + \"希望点の決定\\n\" + \"　HRx\\n\" + \"　　x にはダイスの数（ 1 - 2 ）を指定\\n\");\n        self.$register_prefix(\"LR\\\\[[0-5],[0-5],[0-5],[0-5],[0-5],[0-5]\\\\]\", \"FC\", \"WPC\", \"EC\", \"HR[1-2]\");\n        \n        Opal.def(self, '$initialize', $LostRoyal_initialize$1 = function $$initialize(command) {\n          var $iter = $LostRoyal_initialize$1.$$p, $yield = $iter || nil, self = this;\n\n          if ($iter) $LostRoyal_initialize$1.$$p = null;\n          \n          $send2(self, Opal.find_super_dispatcher(self, 'initialize', $LostRoyal_initialize$1, false, true), 'initialize', [command], null);\n          self.sort_add_dice = true;\n          return (self.d66_sort_type = $$$($$($nesting, 'D66SortType'), 'NO_SORT'));\n        }, $LostRoyal_initialize$1.$$arity = 1);\n        \n        Opal.def(self, '$eval_game_system_specific_command', $LostRoyal_eval_game_system_specific_command$2 = function $$eval_game_system_specific_command(command) {\n          var self = this, $case = nil;\n\n          \n          $case = command;\n          if (/LR\\[([0-5]),([0-5]),([0-5]),([0-5]),([0-5]),([0-5])\\]/i['$===']($case)) {return self.$check_lostroyal([$$($nesting, 'Regexp').$last_match(1).$to_i(), $$($nesting, 'Regexp').$last_match(2).$to_i(), $$($nesting, 'Regexp').$last_match(3).$to_i(), $$($nesting, 'Regexp').$last_match(4).$to_i(), $$($nesting, 'Regexp').$last_match(5).$to_i(), $$($nesting, 'Regexp').$last_match(6).$to_i()])}\n          else if (/FC/['$===']($case)) {return self.$roll_fumble_chart()}\n          else if (/WPC/['$===']($case)) {return self.$roll_wind_power_chart()}\n          else if (/EC/['$===']($case)) {return self.$roll_emotion_chart()}\n          else if (/HR([1-2])/['$===']($case)) {return self.$roll_hope($$($nesting, 'Regexp').$last_match(1).$to_i())};\n          return nil;\n        }, $LostRoyal_eval_game_system_specific_command$2.$$arity = 1);\n        \n        Opal.def(self, '$check_lostroyal', $LostRoyal_check_lostroyal$3 = function $$check_lostroyal(checking_table) {\n          var $$4, $$5, self = this, keys = nil, scores = nil, total_score = nil, chained_sequence = nil, text = nil, $ret_or_1 = nil, bonus = nil;\n\n          \n          keys = [];\n          $send($range(0, 3, true), 'each', [], ($$4 = function(_i){var self = $$4.$$s == null ? this : $$4.$$s, key = nil;\n            if (self.randomizer == null) self.randomizer = nil;\n\n          \n            \n            if (_i == null) {\n              _i = nil;\n            };\n            key = self.randomizer.$roll_once(6);\n            return keys['$<<'](key);}, $$4.$$s = self, $$4.$$arity = 1, $$4));\n          scores = $send(keys, 'map', [], ($$5 = function(k){var self = $$5.$$s == null ? this : $$5.$$s;\n\n          \n            \n            if (k == null) {\n              k = nil;\n            };\n            return checking_table['$[]']($rb_minus(k, 1));}, $$5.$$s = self, $$5.$$arity = 1, $$5)).$to_a();\n          total_score = scores.$inject(\"+\");\n          chained_sequence = self.$find_sequence(keys);\n          text = \"\" + \"3D6 => [\" + (keys.$join(\",\")) + \"] => (\" + (scores.$join(\"+\")) + \") => \" + (total_score);\n          if ($truthy((function() {if ($truthy(($ret_or_1 = chained_sequence['$nil?']()))) {\n            return $ret_or_1\n          } else {\n            return chained_sequence['$empty?']()\n          }; return nil; })())) {\n          } else {\n            \n            bonus = (function() {if ($truthy(self['$fumble_?'](keys, chained_sequence))) {\n              return 3\n            } else {\n              return chained_sequence.$size()\n            }; return nil; })();\n            text = $rb_plus(text, \"\" + \" | \" + (chained_sequence.$size()) + \" chain! (\" + (chained_sequence.$join(\",\")) + \") => \" + ($rb_plus(total_score, bonus)));\n            if ($truthy($rb_ge(chained_sequence.$size(), 3))) {\n              text = $rb_plus(text, \" [スペシャル]\")};\n            if ($truthy(self['$fumble_?'](keys, chained_sequence))) {\n              text = $rb_plus(text, \" [ファンブル]\")};\n          };\n          return text;\n        }, $LostRoyal_check_lostroyal$3.$$arity = 1);\n        \n        Opal.def(self, '$find_sequence', $LostRoyal_find_sequence$6 = function $$find_sequence(keys) {\n          var $$7, $$8, $$9, self = this, sequences = nil;\n\n          \n          keys = keys.$sort();\n          sequences = $send($range(1, 6, true), 'map', [], ($$7 = function(start_key){var self = $$7.$$s == null ? this : $$7.$$s;\n\n          \n            \n            if (start_key == null) {\n              start_key = nil;\n            };\n            return self.$find_sequence_from_start_key(keys, start_key);}, $$7.$$s = self, $$7.$$arity = 1, $$7));\n          return $send($send(sequences, 'select', [], ($$8 = function(x){var self = $$8.$$s == null ? this : $$8.$$s;\n\n          \n            \n            if (x == null) {\n              x = nil;\n            };\n            return $rb_gt(x.$size(), 1);}, $$8.$$s = self, $$8.$$arity = 1, $$8)), 'max', [], ($$9 = function(a, b){var self = $$9.$$s == null ? this : $$9.$$s;\n\n          \n            \n            if (a == null) {\n              a = nil;\n            };\n            \n            if (b == null) {\n              b = nil;\n            };\n            return a.$size()['$<=>'](b.$size());}, $$9.$$s = self, $$9.$$arity = 2, $$9));\n        }, $LostRoyal_find_sequence$6.$$arity = 1);\n        \n        Opal.def(self, '$find_sequence_from_start_key', $LostRoyal_find_sequence_from_start_key$10 = function $$find_sequence_from_start_key(keys, start_key) {\n          var $a, self = this, chained_keys = nil, key = nil, $ret_or_2 = nil;\n\n          \n          chained_keys = [];\n          key = start_key;\n          while ($truthy(keys['$include?'](key))) {\n            \n            chained_keys['$<<'](key);\n            key = $rb_plus(key, 1);\n          };\n          if ($truthy((function() {if ($truthy(($ret_or_2 = chained_keys['$empty?']()['$!']()))) {\n            return chained_keys['$[]'](0)['$=='](1)\n          } else {\n            return $ret_or_2\n          }; return nil; })())) {\n            \n            key = 6;\n            while ($truthy(keys['$include?'](key))) {\n              \n              chained_keys.$unshift(key);\n              key = $rb_minus(key, 1);\n            };};\n          return chained_keys;\n        }, $LostRoyal_find_sequence_from_start_key$10.$$arity = 2);\n        \n        Opal.def(self, '$fumble_?', $LostRoyal_fumble_$ques$11 = function(keys, chained_sequence) {try {\n\n          var $$12, self = this;\n\n          \n          $send(chained_sequence, 'each', [], ($$12 = function(k){var self = $$12.$$s == null ? this : $$12.$$s;\n\n          \n            \n            if (k == null) {\n              k = nil;\n            };\n            if ($truthy($rb_ge(keys.$count(k), 2))) {\n              Opal.ret(true)\n            } else {\n              return nil\n            };}, $$12.$$s = self, $$12.$$arity = 1, $$12));\n          return false;\n          } catch ($returner) { if ($returner === Opal.returner) { return $returner.$v } throw $returner; }\n        }, $LostRoyal_fumble_$ques$11.$$arity = 2);\n        \n        Opal.def(self, '$roll_fumble_chart', $LostRoyal_roll_fumble_chart$13 = function $$roll_fumble_chart() {\n          var self = this, key = nil, text = nil;\n\n          \n          key = self.randomizer.$roll_once(6);\n          text = [\"何かの問題で言い争い、主君に無礼を働いてしまう。あなたは主君の名誉点を１点失うか、【時間】を１点消費して和解の話し合いを持つか選べる。\", \"見過ごせば人々を不幸にする危険に遭遇する。あなたは逃げ出して冒険の名誉点を１点失うか、これに立ち向かい【命数】を２点減らすかを選べる。\", \"あなたが惹かれたのは好意に付け込む人だった。あなたはその場を去って恋慕の名誉点を１点失うか【正義】を１点減らして礼を尽くすかを選べる。\", \"金銭的な問題で、生命と魂の苦しみを背負う人に出会う。あなたは庇護の名誉点を１点失うか出費を３点増やすかを選べる。\", \"襲撃を受ける。苦もなく叩き伏せると、卑屈な態度で命乞いをしてきた。容赦なく命を奪い寛容の名誉点を１点失うか、密告によって【血路】が１Ｄ６点増えるかを選ぶことができる。\", \"風聞により、友が悪に身を貶めたと知る。共に並んだ戦場が色褪せる想いだ。戦友の名誉点を１点減らすか、【酒と歌】すべてを失うかを選べる。\"]['$[]']($rb_minus(key, 1));\n          return \"\" + \"1D6 => [\" + (key) + \"] \" + (text);\n        }, $LostRoyal_roll_fumble_chart$13.$$arity = 0);\n        \n        Opal.def(self, '$roll_wind_power_chart', $LostRoyal_roll_wind_power_chart$14 = function $$roll_wind_power_chart() {try {\n\n          var $$15, self = this, key = nil, total_bonus = nil, text = nil;\n\n          \n          key = 0;\n          total_bonus = 0;\n          text = \"\";\n          return $send(self, 'loop', [], ($$15 = function(){var self = $$15.$$s == null ? this : $$15.$$s, $a, $b, dice = nil, add = nil, bonus = nil, current_text = nil;\n            if (self.randomizer == null) self.randomizer = nil;\n\n          \n            dice = self.randomizer.$roll_once(6);\n            key = $rb_plus(key, dice);\n            $b = [[true, 0, \"ほぼ凪（振り足し）\"], [true, 0, \"弱い風（振り足し）\"], [false, 0, \"ゆるやかな風\"], [false, 0, \"ゆるやかな風\"], [false, 1, \"やや強い風（儀式点プラス１）\"], [false, 2, \"強い風（龍を幻視、儀式点プラス２）\"], [false, 3, \"体が揺らぐほどの風（龍を幻視、儀式点プラス３）\"]]['$[]']($rb_minus([key, 7].$min(), 1)), $a = Opal.to_ary($b), (add = ($a[0] == null ? nil : $a[0])), (bonus = ($a[1] == null ? nil : $a[1])), (current_text = ($a[2] == null ? nil : $a[2])), $b;\n            total_bonus = $rb_plus(total_bonus, bonus);\n            if ($truthy(key['$!='](dice))) {\n              current_text = \"\" + \"1D6[\" + (dice) + \"]+\" + ($rb_minus(key, dice)) + \" \" + (current_text)\n            } else {\n              current_text = \"\" + \"1D6[\" + (dice) + \"] \" + (current_text)\n            };\n            if ($truthy(text['$empty?']())) {\n              text = current_text\n            } else {\n              text = \"\" + (text) + \" => \" + (current_text)\n            };\n            if ($truthy(add)) {\n              return nil\n            } else {\n              \n              text = $rb_plus(text, \"\" + \" [合計：儀式点 +\" + (total_bonus) + \" ]\");\n              Opal.ret(text);\n            };}, $$15.$$s = self, $$15.$$arity = 0, $$15));\n          } catch ($returner) { if ($returner === Opal.returner) { return $returner.$v } throw $returner; }\n        }, $LostRoyal_roll_wind_power_chart$14.$$arity = 0);\n        \n        Opal.def(self, '$roll_emotion_chart', $LostRoyal_roll_emotion_chart$16 = function $$roll_emotion_chart() {\n          var self = this, key = nil, text = nil;\n\n          \n          key = self.randomizer.$roll_once(6);\n          text = [\"愛情／殺意\", \"友情／負目\", \"崇拝／嫌悪\", \"興味／侮蔑\", \"信頼／嫉妬\", \"守護／欲情\"]['$[]']($rb_minus(key, 1));\n          return \"\" + \"1D6 => [\" + (key) + \"] \" + (text);\n        }, $LostRoyal_roll_emotion_chart$16.$$arity = 0);\n        \n        Opal.def(self, '$roll_hope', $LostRoyal_roll_hope$17 = function $$roll_hope(number_of_dice) {try {\n\n          var $$18, self = this, total = nil, text = nil;\n\n          \n          total = 0;\n          text = \"\";\n          return $send(self, 'loop', [], ($$18 = function(){var self = $$18.$$s == null ? this : $$18.$$s, d1 = nil, d2 = nil, $ret_or_3 = nil;\n            if (self.randomizer == null) self.randomizer = nil;\n\n          \n            d1 = self.randomizer.$roll_once(6);\n            d2 = 0;\n            if ($truthy($rb_ge(number_of_dice, 2))) {\n              d2 = self.randomizer.$roll_once(6)};\n            total = $rb_plus(total, $rb_plus(d1, d2));\n            if (number_of_dice['$=='](2)) {\n              text = $rb_plus(text, \"\" + \"2D6[\" + (d1) + \",\" + (d2) + \"]\")\n            } else {\n              text = $rb_plus(text, \"\" + \"1D6[\" + (d1) + \"]\")\n            };\n            if ($truthy((function() {if ($truthy(($ret_or_3 = self.$is_1or2(d1)))) {\n              return $ret_or_3\n            } else {\n              return self.$is_1or2(d2)\n            }; return nil; })())) {\n              return (text = $rb_plus(text, \" （振り足し） => \"))\n            } else {\n              \n              text = $rb_plus(text, \"\" + \" => 合計 \" + (total));\n              Opal.ret(text);\n            };}, $$18.$$s = self, $$18.$$arity = 0, $$18));\n          } catch ($returner) { if ($returner === Opal.returner) { return $returner.$v } throw $returner; }\n        }, $LostRoyal_roll_hope$17.$$arity = 1);\n        return (Opal.def(self, '$is_1or2', $LostRoyal_is_1or2$19 = function $$is_1or2(n) {\n          var self = this;\n\n          return [1, 2]['$include?'](n)\n        }, $LostRoyal_is_1or2$19.$$arity = 1), nil) && 'is_1or2';\n      })($nesting[0], $$($nesting, 'Base'), $nesting)\n    })($nesting[0], $nesting)\n  })($nesting[0], $nesting)\n})(Opal);\n"],"sourceRoot":"webpack:///"}