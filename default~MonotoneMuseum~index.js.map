{"version":3,"sources":["./node_modules/bcdice/lib/bcdice/game_system/MonotoneMuseum.js"],"names":["require","Opal","modules","$rb_minus","lhs","rhs","self","top","$nesting","nil","$$$","$$","$module","module","$klass","klass","$hash2","hash2","$truthy","truthy","$base","$parent_nesting","concat","$super","$Table_from_i18n$1","$Table_initialize$2","$Table_roll$3","$Table_choice$4","$$prototype","times","sides","name","items","defs","$$from_i18n","key","locale","table","$t","$new","$$arity","def","$$initialize","type","m","$freeze","$match","$raise","$to_i","$$roll","bcdice","value","$roll_sum","$choice","$$choice","index","$rb_plus","$rb_times","$send","send","$D66RangeTable_initialize$1","$D66RangeTable_roll$2","randomizer","$$3","dice1","dice2","chosen","$roll_once","row","$$s","$D66GridTable_from_i18n$1","$D66GridTable_initialize$2","$D66GridTable_roll$3","index1","index2","$rb_gt","$Format_comparison_operator$1","$Format_modifier$2","$module_function","$$comparison_operator","op","$case","$to_s","$$modifier","number","$rb_le","$rb_ge","$send2","send2","$range","range","$require","$MonotoneMuseum_initialize$1","$MonotoneMuseum_eval_game_system_specific_command$2","$MonotoneMuseum_check_roll$3","const_set","command","$iter","$$p","$yield","find_super_dispatcher","d66_sort_type","sort_add_dice","$$eval_game_system_specific_command","ret","$check_roll","$roll_tables","$class","$private","$$check_roll","$a","$b","dice_count","modify_number","target","critical","$ret_or_1","fumble","$ret_or_2","dice_list","dice_value","dice_str","total","result","sequence","$writer","$eval","$roll_barabara","$sort","$sum","$join","$fumble","$translate","$critical","$success","$failure","$modifier","$text","to_a","$MMTable_from_i18n$4","$MMTable_initialize$5","items_with_range","$size","$zip","$translate_tables$6","$$translate_tables","$from_i18n","get_singleton_class","$translate_tables","$register_prefix","$keys"],"mappings":"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","file":"default~MonotoneMuseum~index.js","sourcesContent":["require('./../opal');\n\n/* Generated by Opal 1.1.1 */\nOpal.modules[\"bcdice/dice_table/table\"] = function(Opal) {\n  function $rb_minus(lhs, rhs) {\n    return (typeof(lhs) === 'number' && typeof(rhs) === 'number') ? lhs - rhs : lhs['$-'](rhs);\n  }\n  var self = Opal.top, $nesting = [], nil = Opal.nil, $$$ = Opal.$$$, $$ = Opal.$$, $module = Opal.module, $klass = Opal.klass, $hash2 = Opal.hash2, $truthy = Opal.truthy;\n\n  return (function($base, $parent_nesting) {\n    var self = $module($base, 'BCDice');\n\n    var $nesting = [self].concat($parent_nesting);\n\n    (function($base, $parent_nesting) {\n      var self = $module($base, 'DiceTable');\n\n      var $nesting = [self].concat($parent_nesting);\n\n      (function($base, $super, $parent_nesting) {\n        var self = $klass($base, $super, 'Table');\n\n        var $nesting = [self].concat($parent_nesting), $Table_from_i18n$1, $Table_initialize$2, $Table_roll$3, $Table_choice$4;\n\n        self.$$prototype.times = self.$$prototype.sides = self.$$prototype.name = self.$$prototype.items = nil;\n        \n        Opal.defs(self, '$from_i18n', $Table_from_i18n$1 = function $$from_i18n(key, locale) {\n          var self = this, table = nil;\n\n          \n          table = $$($nesting, 'I18n').$t(key, $hash2([\"locale\"], {\"locale\": locale}));\n          return self.$new(table['$[]'](\"name\"), table['$[]'](\"type\"), table['$[]'](\"items\"));\n        }, $Table_from_i18n$1.$$arity = 2);\n        \n        Opal.def(self, '$initialize', $Table_initialize$2 = function $$initialize(name, type, items) {\n          var self = this, m = nil;\n\n          \n          self.name = name;\n          self.items = items.$freeze();\n          m = /(\\d+)D(\\d+)/i.$match(type);\n          if ($truthy(m)) {\n          } else {\n            self.$raise($$($nesting, 'ArgumentError'), \"\" + \"Unexpected table type: \" + (type))\n          };\n          self.times = m['$[]'](1).$to_i();\n          return (self.sides = m['$[]'](2).$to_i());\n        }, $Table_initialize$2.$$arity = 3);\n        \n        Opal.def(self, '$roll', $Table_roll$3 = function $$roll(bcdice) {\n          var self = this, value = nil;\n\n          \n          value = bcdice.$roll_sum(self.times, self.sides);\n          return self.$choice(value);\n        }, $Table_roll$3.$$arity = 1);\n        return (Opal.def(self, '$choice', $Table_choice$4 = function $$choice(value) {\n          var self = this, index = nil;\n\n          \n          index = $rb_minus(value, self.times);\n          return $$($nesting, 'RollResult').$new(self.name, value, self.items['$[]'](index));\n        }, $Table_choice$4.$$arity = 1), nil) && 'choice';\n      })($nesting[0], null, $nesting)\n    })($nesting[0], $nesting)\n  })($nesting[0], $nesting)\n};\n\n/* Generated by Opal 1.1.1 */\nOpal.modules[\"bcdice/dice_table/d66_range_table\"] = function(Opal) {\n  function $rb_plus(lhs, rhs) {\n    return (typeof(lhs) === 'number' && typeof(rhs) === 'number') ? lhs + rhs : lhs['$+'](rhs);\n  }\n  function $rb_times(lhs, rhs) {\n    return (typeof(lhs) === 'number' && typeof(rhs) === 'number') ? lhs * rhs : lhs['$*'](rhs);\n  }\n  var self = Opal.top, $nesting = [], nil = Opal.nil, $$$ = Opal.$$$, $$ = Opal.$$, $module = Opal.module, $klass = Opal.klass, $send = Opal.send;\n\n  return (function($base, $parent_nesting) {\n    var self = $module($base, 'BCDice');\n\n    var $nesting = [self].concat($parent_nesting);\n\n    (function($base, $parent_nesting) {\n      var self = $module($base, 'DiceTable');\n\n      var $nesting = [self].concat($parent_nesting);\n\n      (function($base, $super, $parent_nesting) {\n        var self = $klass($base, $super, 'D66RangeTable');\n\n        var $nesting = [self].concat($parent_nesting), $D66RangeTable_initialize$1, $D66RangeTable_roll$2;\n\n        self.$$prototype.items = self.$$prototype.name = nil;\n        \n        \n        Opal.def(self, '$initialize', $D66RangeTable_initialize$1 = function $$initialize(name, items) {\n          var self = this;\n\n          \n          self.name = name;\n          return (self.items = items.$freeze());\n        }, $D66RangeTable_initialize$1.$$arity = 2);\n        return (Opal.def(self, '$roll', $D66RangeTable_roll$2 = function $$roll(randomizer) {\n          var $$3, self = this, dice1 = nil, dice2 = nil, key = nil, chosen = nil;\n\n          \n          dice1 = randomizer.$roll_once(6);\n          dice2 = randomizer.$roll_once(6);\n          key = $rb_plus($rb_times(dice1, 10), dice2);\n          chosen = $send(self.items, 'find', [], ($$3 = function(row){var self = $$3.$$s == null ? this : $$3.$$s;\n\n          \n            \n            if (row == null) {\n              row = nil;\n            };\n            return row['$[]'](0)['$include?'](key);}, $$3.$$s = self, $$3.$$arity = 1, $$3));\n          return $$($nesting, 'RollResult').$new(self.name, key, chosen['$[]'](1));\n        }, $D66RangeTable_roll$2.$$arity = 1), nil) && 'roll';\n      })($nesting[0], null, $nesting)\n    })($nesting[0], $nesting)\n  })($nesting[0], $nesting)\n};\n\n/* Generated by Opal 1.1.1 */\nOpal.modules[\"bcdice/dice_table/d66_grid_table\"] = function(Opal) {\n  function $rb_plus(lhs, rhs) {\n    return (typeof(lhs) === 'number' && typeof(rhs) === 'number') ? lhs + rhs : lhs['$+'](rhs);\n  }\n  function $rb_times(lhs, rhs) {\n    return (typeof(lhs) === 'number' && typeof(rhs) === 'number') ? lhs * rhs : lhs['$*'](rhs);\n  }\n  function $rb_minus(lhs, rhs) {\n    return (typeof(lhs) === 'number' && typeof(rhs) === 'number') ? lhs - rhs : lhs['$-'](rhs);\n  }\n  var self = Opal.top, $nesting = [], nil = Opal.nil, $$$ = Opal.$$$, $$ = Opal.$$, $module = Opal.module, $klass = Opal.klass, $hash2 = Opal.hash2;\n\n  return (function($base, $parent_nesting) {\n    var self = $module($base, 'BCDice');\n\n    var $nesting = [self].concat($parent_nesting);\n\n    (function($base, $parent_nesting) {\n      var self = $module($base, 'DiceTable');\n\n      var $nesting = [self].concat($parent_nesting);\n\n      (function($base, $super, $parent_nesting) {\n        var self = $klass($base, $super, 'D66GridTable');\n\n        var $nesting = [self].concat($parent_nesting), $D66GridTable_from_i18n$1, $D66GridTable_initialize$2, $D66GridTable_roll$3;\n\n        self.$$prototype.name = self.$$prototype.items = nil;\n        \n        Opal.defs(self, '$from_i18n', $D66GridTable_from_i18n$1 = function $$from_i18n(key, locale) {\n          var self = this, table = nil;\n\n          \n          table = $$($nesting, 'I18n').$t(key, $hash2([\"locale\", \"raise\"], {\"locale\": locale, \"raise\": true}));\n          return self.$new(table['$[]'](\"name\"), table['$[]'](\"items\"));\n        }, $D66GridTable_from_i18n$1.$$arity = 2);\n        \n        Opal.def(self, '$initialize', $D66GridTable_initialize$2 = function $$initialize(name, items) {\n          var self = this;\n\n          \n          self.name = name;\n          return (self.items = items.$freeze());\n        }, $D66GridTable_initialize$2.$$arity = 2);\n        return (Opal.def(self, '$roll', $D66GridTable_roll$3 = function $$roll(randomizer) {\n          var self = this, dice1 = nil, dice2 = nil, value = nil, index1 = nil, index2 = nil;\n\n          \n          dice1 = randomizer.$roll_once(6);\n          dice2 = randomizer.$roll_once(6);\n          value = $rb_plus($rb_times(dice1, 10), dice2);\n          index1 = $rb_minus(dice1, 1);\n          index2 = $rb_minus(dice2, 1);\n          return $$($nesting, 'RollResult').$new(self.name, value, self.items['$[]'](index1)['$[]'](index2));\n        }, $D66GridTable_roll$3.$$arity = 1), nil) && 'roll';\n      })($nesting[0], null, $nesting)\n    })($nesting[0], $nesting)\n  })($nesting[0], $nesting)\n};\n\n/* Generated by Opal 1.1.1 */\nOpal.modules[\"bcdice/format\"] = function(Opal) {\n  function $rb_gt(lhs, rhs) {\n    return (typeof(lhs) === 'number' && typeof(rhs) === 'number') ? lhs > rhs : lhs['$>'](rhs);\n  }\n  var self = Opal.top, $nesting = [], nil = Opal.nil, $$$ = Opal.$$$, $$ = Opal.$$, $module = Opal.module, $truthy = Opal.truthy;\n\n  return (function($base, $parent_nesting) {\n    var self = $module($base, 'BCDice');\n\n    var $nesting = [self].concat($parent_nesting);\n\n    (function($base, $parent_nesting) {\n      var self = $module($base, 'Format');\n\n      var $nesting = [self].concat($parent_nesting), $Format_comparison_operator$1, $Format_modifier$2;\n\n      \n      self.$module_function();\n      \n      Opal.def(self, '$comparison_operator', $Format_comparison_operator$1 = function $$comparison_operator(op) {\n        var self = this, $case = nil;\n\n        return (function() {$case = op;\n        if (\"==\"['$===']($case)) {return \"=\"}\n        else if (\"!=\"['$===']($case)) {return \"<>\"}\n        else if ($$($nesting, 'Symbol')['$===']($case)) {return op.$to_s()}\n        else { return nil }})()\n      }, $Format_comparison_operator$1.$$arity = 1);\n      \n      Opal.def(self, '$modifier', $Format_modifier$2 = function $$modifier(number) {\n        var self = this;\n\n        if ($truthy(number['$nil?']())) {\n          return nil\n        } else if (number['$=='](0)) {\n          return \"\"\n        } else if ($truthy($rb_gt(number, 0))) {\n          return \"\" + \"+\" + (number)\n        } else {\n          return number.$to_s()\n        }\n      }, $Format_modifier$2.$$arity = 1);\n    })($nesting[0], $nesting)\n  })($nesting[0], $nesting)\n};\n\n/* Generated by Opal 1.1.1 */\n(function(Opal) {\n  function $rb_plus(lhs, rhs) {\n    return (typeof(lhs) === 'number' && typeof(rhs) === 'number') ? lhs + rhs : lhs['$+'](rhs);\n  }\n  function $rb_le(lhs, rhs) {\n    return (typeof(lhs) === 'number' && typeof(rhs) === 'number') ? lhs <= rhs : lhs['$<='](rhs);\n  }\n  function $rb_ge(lhs, rhs) {\n    return (typeof(lhs) === 'number' && typeof(rhs) === 'number') ? lhs >= rhs : lhs['$>='](rhs);\n  }\n  function $rb_minus(lhs, rhs) {\n    return (typeof(lhs) === 'number' && typeof(rhs) === 'number') ? lhs - rhs : lhs['$-'](rhs);\n  }\n  var self = Opal.top, $nesting = [], nil = Opal.nil, $$$ = Opal.$$$, $$ = Opal.$$, $module = Opal.module, $klass = Opal.klass, $send2 = Opal.send2, $truthy = Opal.truthy, $send = Opal.send, $hash2 = Opal.hash2, $range = Opal.range;\n\n  \n  self.$require(\"bcdice/dice_table/table\");\n  self.$require(\"bcdice/dice_table/d66_range_table\");\n  self.$require(\"bcdice/dice_table/d66_grid_table\");\n  self.$require(\"bcdice/format\");\n  return (function($base, $parent_nesting) {\n    var self = $module($base, 'BCDice');\n\n    var $nesting = [self].concat($parent_nesting);\n\n    (function($base, $parent_nesting) {\n      var self = $module($base, 'GameSystem');\n\n      var $nesting = [self].concat($parent_nesting);\n\n      (function($base, $super, $parent_nesting) {\n        var self = $klass($base, $super, 'MonotoneMuseum');\n\n        var $nesting = [self].concat($parent_nesting), $MonotoneMuseum_initialize$1, $MonotoneMuseum_eval_game_system_specific_command$2, $MonotoneMuseum_check_roll$3;\n\n        self.$$prototype.randomizer = nil;\n        \n        Opal.const_set($nesting[0], 'ID', \"MonotoneMuseum\");\n        Opal.const_set($nesting[0], 'NAME', \"モノトーンミュージアムRPG\");\n        Opal.const_set($nesting[0], 'SORT_KEY', \"ものとおんみゆうしあむRPG\");\n        Opal.const_set($nesting[0], 'HELP_MESSAGE', \"\" + \"・判定\\n\" + \"　・通常判定　　　　　　2D6+m>=t[c,f]\\n\" + \"　　修正値m,目標値t,クリティカル値c,ファンブル値fで判定ロールを行います。\\n\" + \"　　クリティカル値、ファンブル値は省略可能です。([]ごと省略できます)\\n\" + \"　　自動成功、自動失敗、成功、失敗を自動表示します。\\n\" + \"・各種表\\n\" + \"　・感情表　ET／感情表 2.0　ET2\\n\" + \"　・兆候表　OT／兆候表ver2.0　OT2／兆候表ver3.0　OT3\\n\" + \"　・歪み表　DT／歪み表ver2.0　DT2／歪み表(野外)　DTO／歪み表(海)　DTS／歪み表(館・城)　DTM\\n\" + \"　・世界歪曲表　WDT／世界歪曲表2.0　WDT2\\n\" + \"　・永劫消失表　EDT\\n\" + \"・D66ダイスあり\\n\");\n        \n        Opal.def(self, '$initialize', $MonotoneMuseum_initialize$1 = function $$initialize(command) {\n          var $iter = $MonotoneMuseum_initialize$1.$$p, $yield = $iter || nil, self = this;\n\n          if ($iter) $MonotoneMuseum_initialize$1.$$p = null;\n          \n          $send2(self, Opal.find_super_dispatcher(self, 'initialize', $MonotoneMuseum_initialize$1, false, true), 'initialize', [command], null);\n          self.d66_sort_type = $$$($$($nesting, 'D66SortType'), 'NO_SORT');\n          return (self.sort_add_dice = true);\n        }, $MonotoneMuseum_initialize$1.$$arity = 1);\n        \n        Opal.def(self, '$eval_game_system_specific_command', $MonotoneMuseum_eval_game_system_specific_command$2 = function $$eval_game_system_specific_command(command) {\n          var self = this, ret = nil;\n\n          \n          if ($truthy((ret = self.$check_roll(command)))) {\n            return ret};\n          return self.$roll_tables(command, $$$(self.$class(), 'TABLES'));\n        }, $MonotoneMuseum_eval_game_system_specific_command$2.$$arity = 1);\n        self.$private();\n        \n        Opal.def(self, '$check_roll', $MonotoneMuseum_check_roll$3 = function $$check_roll(command) {\n          var $a, $b, self = this, m = nil, dice_count = nil, modify_number = nil, target = nil, critical = nil, $ret_or_1 = nil, fumble = nil, $ret_or_2 = nil, dice_list = nil, dice_value = nil, dice_str = nil, total = nil, result = nil, sequence = nil, $writer = nil;\n\n          \n          m = /^(\\d+)D6([+\\-\\d]*)>=(\\d+)(\\[(\\d+)?(,(\\d+))?\\])?$/i.$match(command);\n          if ($truthy(m)) {\n          } else {\n            return nil\n          };\n          dice_count = m['$[]'](1).$to_i();\n          modify_number = (function() {if ($truthy(m['$[]'](2))) {\n            return $$($nesting, 'ArithmeticEvaluator').$eval(m['$[]'](2))\n          } else {\n            return 0\n          }; return nil; })();\n          target = m['$[]'](3).$to_i();\n          critical = (function() {if ($truthy(($ret_or_1 = ($a = m['$[]'](5), ($a === nil || $a == null) ? nil : $send($a, 'to_i', []))))) {\n            return $ret_or_1\n          } else {\n            return 12\n          }; return nil; })();\n          fumble = (function() {if ($truthy(($ret_or_2 = ($b = m['$[]'](7), ($b === nil || $b == null) ? nil : $send($b, 'to_i', []))))) {\n            return $ret_or_2\n          } else {\n            return 2\n          }; return nil; })();\n          dice_list = self.randomizer.$roll_barabara(dice_count, 6).$sort();\n          dice_value = dice_list.$sum();\n          dice_str = dice_list.$join(\",\");\n          total = $rb_plus(dice_value, modify_number);\n          result = (function() {if ($truthy($rb_le(dice_value, fumble))) {\n            return $$($nesting, 'Result').$fumble(self.$translate(\"MonotoneMuseum.automatic_failure\"))\n          } else if ($truthy($rb_ge(dice_value, critical))) {\n            return $$($nesting, 'Result').$critical(self.$translate(\"MonotoneMuseum.automatic_success\"))\n          } else if ($truthy($rb_ge(total, target))) {\n            return $$($nesting, 'Result').$success(self.$translate(\"success\"))\n          } else {\n            return $$($nesting, 'Result').$failure(self.$translate(\"failure\"))\n          }; return nil; })();\n          sequence = [\"\" + \"(\" + (command) + \")\", \"\" + (dice_value) + \"[\" + (dice_str) + \"]\" + ($$($nesting, 'Format').$modifier(modify_number)), total.$to_s(), result.$text()];\n          \n          $writer = [sequence.$join(\" ＞ \")];\n          $send(result, 'text=', Opal.to_a($writer));\n          $writer[$rb_minus($writer[\"length\"], 1)];;\n          return result;\n        }, $MonotoneMuseum_check_roll$3.$$arity = 1);\n        (function($base, $super, $parent_nesting) {\n          var self = $klass($base, $super, 'MMTable');\n\n          var $nesting = [self].concat($parent_nesting), $MMTable_from_i18n$4, $MMTable_initialize$5;\n\n          \n          Opal.defs(self, '$from_i18n', $MMTable_from_i18n$4 = function $$from_i18n(key, locale) {\n            var self = this, table = nil;\n\n            \n            table = $$($nesting, 'I18n').$translate(key, $hash2([\"locale\", \"raise\"], {\"locale\": locale, \"raise\": true}));\n            return self.$new(table['$[]'](\"name\"), table['$[]'](\"items\"));\n          }, $MMTable_from_i18n$4.$$arity = 2);\n          \n          Opal.def(self, '$initialize', $MMTable_initialize$5 = function $$initialize(name, items) {\n            var $iter = $MMTable_initialize$5.$$p, $yield = $iter || nil, self = this, items_with_range = nil;\n\n            if ($iter) $MMTable_initialize$5.$$p = null;\n            \n            if ($truthy(items.$size()['$!=']($$($nesting, 'RANGE').$size()))) {\n              self.$raise($$($nesting, 'UnexpectedTableSize').$new(name, items.$size()))};\n            items_with_range = $$($nesting, 'RANGE').$zip(items);\n            return $send2(self, Opal.find_super_dispatcher(self, 'initialize', $MMTable_initialize$5, false, true), 'initialize', [name, items_with_range], null);\n          }, $MMTable_initialize$5.$$arity = 2);\n          return Opal.const_set($nesting[0], 'RANGE', [$range(11, 12, false), $range(13, 14, false), $range(15, 16, false), $range(21, 22, false), $range(23, 24, false), $range(25, 26, false), $range(31, 32, false), $range(33, 34, false), $range(35, 36, false), $range(41, 42, false), $range(43, 44, false), $range(45, 46, false), $range(51, 52, false), $range(53, 54, false), $range(55, 56, false), $range(61, 62, false), $range(63, 64, false), $range(65, 66, false)].$freeze());\n        })($nesting[0], $$$($$($nesting, 'DiceTable'), 'D66RangeTable'), $nesting);\n        (function(self, $parent_nesting) {\n          var $nesting = [self].concat($parent_nesting), $translate_tables$6;\n\n          \n          self.$private();\n          return (Opal.def(self, '$translate_tables', $translate_tables$6 = function $$translate_tables(locale) {\n            var self = this;\n\n            return $hash2([\"ET\", \"ET2\", \"OT\", \"DT\", \"DT2\", \"WDT\", \"WDT2\", \"OT2\", \"DTO\", \"DTS\", \"EDT\", \"DTM\", \"OT3\"], {\"ET\": $$$($$($nesting, 'DiceTable'), 'D66GridTable').$from_i18n(\"MonotoneMuseum.table.ET\", locale), \"ET2\": $$$($$($nesting, 'DiceTable'), 'D66GridTable').$from_i18n(\"MonotoneMuseum.table.ET2\", locale), \"OT\": $$$($$($nesting, 'DiceTable'), 'Table').$from_i18n(\"MonotoneMuseum.table.OT\", locale), \"DT\": $$$($$($nesting, 'DiceTable'), 'Table').$from_i18n(\"MonotoneMuseum.table.DT\", locale), \"DT2\": $$($nesting, 'MMTable').$from_i18n(\"MonotoneMuseum.table.DT2\", locale), \"WDT\": $$$($$($nesting, 'DiceTable'), 'Table').$from_i18n(\"MonotoneMuseum.table.WDT\", locale), \"WDT2\": $$($nesting, 'MMTable').$from_i18n(\"MonotoneMuseum.table.WDT2\", locale), \"OT2\": $$($nesting, 'MMTable').$from_i18n(\"MonotoneMuseum.table.OT2\", locale), \"DTO\": $$($nesting, 'MMTable').$from_i18n(\"MonotoneMuseum.table.DTO\", locale), \"DTS\": $$($nesting, 'MMTable').$from_i18n(\"MonotoneMuseum.table.DTS\", locale), \"EDT\": $$$($$($nesting, 'DiceTable'), 'Table').$from_i18n(\"MonotoneMuseum.table.EDT\", locale), \"DTM\": $$($nesting, 'MMTable').$from_i18n(\"MonotoneMuseum.table.DTM\", locale), \"OT3\": $$$($$($nesting, 'DiceTable'), 'Table').$from_i18n(\"MonotoneMuseum.table.OT3\", locale)})\n          }, $translate_tables$6.$$arity = 1), nil) && 'translate_tables';\n        })(Opal.get_singleton_class(self), $nesting);\n        Opal.const_set($nesting[0], 'TABLES', self.$translate_tables(\"ja_jp\").$freeze());\n        return self.$register_prefix(\"\\\\d+D6\", $$($nesting, 'TABLES').$keys());\n      })($nesting[0], $$($nesting, 'Base'), $nesting)\n    })($nesting[0], $nesting)\n  })($nesting[0], $nesting);\n})(Opal);\n"],"sourceRoot":"webpack:///"}