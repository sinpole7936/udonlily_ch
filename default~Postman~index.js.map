{"version":3,"sources":["./node_modules/bcdice/lib/bcdice/game_system/Postman.js"],"names":["require","Opal","$rb_lt","lhs","rhs","$rb_plus","$rb_gt","$rb_ge","self","top","$nesting","nil","$$$","$$","$module","module","$klass","klass","$send2","send2","$truthy","truthy","$send","send","$base","$parent_nesting","concat","$super","$Postman_initialize$1","$Postman_eval_game_system_specific_command$2","$Postman_checkRoll$5","$Postman_get_weather_table$6","$Postman_get_free_situation_table$7","$$prototype","randomizer","const_set","$register_prefix","def","$$initialize","command","$iter","$$p","$yield","find_super_dispatcher","sort_add_dice","$$arity","$$eval_game_system_specific_command","$$3","$$4","text","$case","diceCount","$ret_or_1","modify","$ret_or_2","modifyAddString","$ret_or_3","type","$ret_or_4","target","$ret_or_5","targetAddString","$ret_or_6","modify_list","target_list","roc","$ret_or_7","$upcase","$last_match","$to_i","$scan","i","$$s","j","$checkRoll","$get_weather_table","$get_free_situation_table","$$checkRoll","diceArray","dice","diceText","dice2","diceText2","criticalCount","modifyText","result","resultText","operatorText","$roll_barabara","$sort","$sum","$join","$count","$to_s","$$get_weather_table","name","table","dice_list","tableText","$get_table_by_number","$$get_free_situation_table"],"mappings":"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","file":"default~Postman~index.js","sourcesContent":["require('./../opal');\n\n/* Generated by Opal 1.1.1 */\n(function(Opal) {\n  function $rb_lt(lhs, rhs) {\n    return (typeof(lhs) === 'number' && typeof(rhs) === 'number') ? lhs < rhs : lhs['$<'](rhs);\n  }\n  function $rb_plus(lhs, rhs) {\n    return (typeof(lhs) === 'number' && typeof(rhs) === 'number') ? lhs + rhs : lhs['$+'](rhs);\n  }\n  function $rb_gt(lhs, rhs) {\n    return (typeof(lhs) === 'number' && typeof(rhs) === 'number') ? lhs > rhs : lhs['$>'](rhs);\n  }\n  function $rb_ge(lhs, rhs) {\n    return (typeof(lhs) === 'number' && typeof(rhs) === 'number') ? lhs >= rhs : lhs['$>='](rhs);\n  }\n  var self = Opal.top, $nesting = [], nil = Opal.nil, $$$ = Opal.$$$, $$ = Opal.$$, $module = Opal.module, $klass = Opal.klass, $send2 = Opal.send2, $truthy = Opal.truthy, $send = Opal.send;\n\n  return (function($base, $parent_nesting) {\n    var self = $module($base, 'BCDice');\n\n    var $nesting = [self].concat($parent_nesting);\n\n    (function($base, $parent_nesting) {\n      var self = $module($base, 'GameSystem');\n\n      var $nesting = [self].concat($parent_nesting);\n\n      (function($base, $super, $parent_nesting) {\n        var self = $klass($base, $super, 'Postman');\n\n        var $nesting = [self].concat($parent_nesting), $Postman_initialize$1, $Postman_eval_game_system_specific_command$2, $Postman_checkRoll$5, $Postman_get_weather_table$6, $Postman_get_free_situation_table$7;\n\n        self.$$prototype.randomizer = nil;\n        \n        Opal.const_set($nesting[0], 'ID', \"Postman\");\n        Opal.const_set($nesting[0], 'NAME', \"壊れた世界のポストマン\");\n        Opal.const_set($nesting[0], 'SORT_KEY', \"こわれたせかいのほすとまん\");\n        Opal.const_set($nesting[0], 'HELP_MESSAGE', \"\" + \"◆判定：[n]PO[+-a][> or >= or @X]　　[]内省略可。\\n\" + \"\\n\" + \"達成値と判定の成否、クリティカル、ファンブルを結果表示します。\\n\" + \"「n」でダイス数を指定。省略時は2D。\\n\" + \"「+-a」で達成値への修正を指定。「+2+1-4」のような複数回指定可。\\n\" + \"「>X」「>=X」「@X」で難易度を指定可。\\n\" + \"「>X」は達成値>難易度、「>=X」「@X」は達成値>=難易度で判定します。\\n\" + \"\\n\" + \"【書式例】\\n\" + \"3PO+2-1 → 3Dで達成値修正+1の判定。達成値のみ表示。\\n\" + \"PO@5+2 → 2Dで目標値7の判定。判定の成否と達成値を表示。\\n\" + \"4PO-2+1>7+2 → 4Dで達成値修正-1、目標値9（同値は失敗）の判定。\\n\" + \"\\n\" + \"\\n\" + \"◆天候チェック：WEA[n]　　[]内省略可。\\n\" + \"\\n\" + \"天候チェック表を参照します。\\n\" + \"「n」を指定すると、指定した結果を表示します。（【幸運点】使用時用）\\n\" + \"\\n\" + \"\\n\" + \"◆自由行動シチュエーション表：FRE\\n\");\n        self.$register_prefix(\"WEA\", \"(\\\\d+)?PO\", \"FRE\");\n        \n        Opal.def(self, '$initialize', $Postman_initialize$1 = function $$initialize(command) {\n          var $iter = $Postman_initialize$1.$$p, $yield = $iter || nil, self = this;\n\n          if ($iter) $Postman_initialize$1.$$p = null;\n          \n          $send2(self, Opal.find_super_dispatcher(self, 'initialize', $Postman_initialize$1, false, true), 'initialize', [command], null);\n          return (self.sort_add_dice = true);\n        }, $Postman_initialize$1.$$arity = 1);\n        \n        Opal.def(self, '$eval_game_system_specific_command', $Postman_eval_game_system_specific_command$2 = function $$eval_game_system_specific_command(command) {\n          var $$3, $$4, self = this, text = nil, $case = nil, diceCount = nil, $ret_or_1 = nil, modify = nil, $ret_or_2 = nil, modifyAddString = nil, $ret_or_3 = nil, type = nil, $ret_or_4 = nil, target = nil, $ret_or_5 = nil, targetAddString = nil, $ret_or_6 = nil, modify_list = nil, target_list = nil, roc = nil, $ret_or_7 = nil;\n\n          \n          text = (function() {$case = command.$upcase();\n          if (/(\\d+)?PO(\\d+)?(([+-]\\d+)*)?((>|>=|@)(\\d+)(([+-]\\d+)*)?)?/i['$===']($case)) {\n          diceCount = (function() {if ($truthy(($ret_or_1 = $$($nesting, 'Regexp').$last_match(1)))) {\n            return $ret_or_1\n          } else {\n            return 2\n          }; return nil; })().$to_i();\n          if ($truthy($rb_lt(diceCount, 2))) {\n            diceCount = 2};\n          modify = (function() {if ($truthy(($ret_or_2 = $$($nesting, 'Regexp').$last_match(2)))) {\n            return $ret_or_2\n          } else {\n            return 0\n          }; return nil; })().$to_i();\n          modifyAddString = (function() {if ($truthy(($ret_or_3 = $$($nesting, 'Regexp').$last_match(3)))) {\n            return $ret_or_3\n          } else {\n            return \"\"\n          }; return nil; })();\n          type = (function() {if ($truthy(($ret_or_4 = $$($nesting, 'Regexp').$last_match(6)))) {\n            return $ret_or_4\n          } else {\n            return \"\"\n          }; return nil; })();\n          target = (function() {if ($truthy(($ret_or_5 = $$($nesting, 'Regexp').$last_match(7)))) {\n            return $ret_or_5\n          } else {\n            return 0\n          }; return nil; })().$to_i();\n          targetAddString = (function() {if ($truthy(($ret_or_6 = $$($nesting, 'Regexp').$last_match(8)))) {\n            return $ret_or_6\n          } else {\n            return \"\"\n          }; return nil; })();\n          modify_list = modifyAddString.$scan(/[+-]\\d+/);\n          $send(modify_list, 'each', [], ($$3 = function(i){var self = $$3.$$s == null ? this : $$3.$$s;\n\n          \n            \n            if (i == null) {\n              i = nil;\n            };\n            return (modify = $rb_plus(modify, i.$to_i()));}, $$3.$$s = self, $$3.$$arity = 1, $$3));\n          if ($truthy(target['$!='](0))) {\n            \n            target_list = targetAddString.$scan(/[+-]\\d+/);\n            $send(target_list, 'each', [], ($$4 = function(j){var self = $$4.$$s == null ? this : $$4.$$s;\n\n            \n              \n              if (j == null) {\n                j = nil;\n              };\n              return (target = $rb_plus(target, j.$to_i()));}, $$4.$$s = self, $$4.$$arity = 1, $$4));};\n          return self.$checkRoll(diceCount, modify, type, target);}\n          else if (/WEA(\\d+)?/i['$===']($case)) {\n          roc = (function() {if ($truthy(($ret_or_7 = $$($nesting, 'Regexp').$last_match(1)))) {\n            return $ret_or_7\n          } else {\n            return 0\n          }; return nil; })().$to_i();\n          return self.$get_weather_table(roc);}\n          else if (\"FRE\"['$===']($case)) {return self.$get_free_situation_table()}\n          else { return nil }})();\n          return text;\n        }, $Postman_eval_game_system_specific_command$2.$$arity = 1);\n        \n        Opal.def(self, '$checkRoll', $Postman_checkRoll$5 = function $$checkRoll(diceCount, modify, type, target) {\n          var self = this, diceArray = nil, dice = nil, diceText = nil, dice2 = nil, diceText2 = nil, criticalCount = nil, modifyText = nil, result = nil, resultText = nil, operatorText = nil, text = nil;\n\n          \n          diceArray = self.randomizer.$roll_barabara(diceCount, 6).$sort();\n          dice = diceArray.$sum();\n          diceText = diceArray.$join(\",\");\n          dice2 = $rb_plus(diceArray['$[]'](-2), diceArray['$[]'](-1));\n          diceText2 = \"\" + (diceArray['$[]'](-2)) + \",\" + (diceArray['$[]'](-1));\n          criticalCount = diceArray.$count(6);\n          if ($truthy(modify['$!='](0))) {\n            \n            modifyText = \"\";\n            if ($truthy($rb_gt(modify, 0))) {\n              modifyText = \"+\"};\n            modifyText = $rb_plus(modifyText, modify.$to_s());};\n          result = $rb_plus(dice2, modify);\n          if ($truthy(type['$!='](\"\"))) {\n            \n            resultText = \" 【失敗】\";\n            operatorText = \">\";\n            if (type['$=='](\">\")) {\n              if ($truthy($rb_gt(result, target))) {\n                resultText = \" 【成功】\"}\n            } else {\n              \n              operatorText = $rb_plus(operatorText, \"=\");\n              if ($truthy($rb_ge(result, target))) {\n                resultText = \" 【成功】\"};\n            };};\n          if ($truthy($rb_ge(criticalCount, 2))) {\n            resultText = \" 【成功】（クリティカル）\"\n          } else if (dice['$=='](diceCount)) {\n            resultText = \" 【失敗】（ファンブル）\"};\n          text = \"\" + (diceCount) + \"D6(\" + (diceText) + \")\" + (modifyText) + \" ＞ \" + (dice2) + \"(\" + (diceText2) + \")\" + (modifyText) + \" = 達成値：\" + (result);\n          if ($truthy($rb_gt(target, 0))) {\n            text = $rb_plus(text, \"\" + (operatorText) + (target) + \" \")};\n          text = $rb_plus(text, resultText.$to_s());\n          return text;\n        }, $Postman_checkRoll$5.$$arity = 4);\n        \n        Opal.def(self, '$get_weather_table', $Postman_get_weather_table$6 = function $$get_weather_table(roc) {\n          var self = this, name = nil, table = nil, dice_list = nil, dice = nil, diceText = nil, tableText = nil, text = nil;\n\n          \n          name = \"天候チェック\";\n          table = [[2, \"大雨と強風。探索判定の難易度に+4。\"], [3, \"風が強い1日になりそう。探索判定の難易度に+2。\"], [4, \"晴れ。特になし。\"], [5, \"夜の間の雨でぬかるむ。探索判定の難易度に+2。\"], [6, \"それなりの雨足。探索判定の難易度に+2。\"], [7, \"晴れ。特になし。\"], [8, \"天気は大荒れ。探索判定の難易度に+4。\"], [9, \"小雨が降る。探索判定の難易度に+1。\"], [10, \"それなりの雨足。探索判定の難易度に+2。\"], [11, \"晴れ。特になし。\"], [12, \"風が強い1日になりそう。探索判定の難易度に+2。\"]];\n          if (roc['$=='](0)) {\n            \n            dice_list = self.randomizer.$roll_barabara(2, 6);\n            dice = dice_list.$sum();\n            diceText = dice_list.$join(\",\");\n          } else {\n            \n            if ($truthy($rb_lt(roc, 2))) {\n              roc = 2};\n            if ($truthy($rb_gt(roc, 12))) {\n              roc = 12};\n            dice = roc;\n            diceText = \"\" + \"Choice:\" + (roc);\n          };\n          tableText = self.$get_table_by_number(dice, table);\n          text = \"\" + (name) + \"(\" + (diceText) + \") ＞ \" + (dice) + \"：\" + (tableText);\n          return text;\n        }, $Postman_get_weather_table$6.$$arity = 1);\n        return (Opal.def(self, '$get_free_situation_table', $Postman_get_free_situation_table$7 = function $$get_free_situation_table() {\n          var self = this, name = nil, table = nil, dice_list = nil, dice = nil, diceText = nil, tableText = nil, text = nil;\n\n          \n          name = \"自由行動シチュエーション表\";\n          table = [[2, \"何をするでもなく、霞がかったような夜空を見上げる。ふと隣に目を向ければ、彼/彼女が居た。彼/彼女は、こうなる前の夜空を知っているのだろうか。\"], [3, \"夢を見た。大戦の最中、街が、人が、世界が焼けていく悪夢を。追い立てられるようにして目を覚ますと、彼/彼女が君を見ていた。　……もしかして、自分はよほどうなされていたのだろうか。\"], [4, \"周囲で見つけたガラクタを使って、ちょっとしたビックリ玩具を作ってみた。「彼/ 彼女」にコイツをけしかけたら、どんな反応をするだろうか？\"], [5, \"使えそうなものがないか探していると、カタンと物音がして何かが落ちた。拾い上げてみたそれは、かつてここで生活していた誰かの名残（写真、家具、玩具等）だった。\"], [6, \"テントの中で夜を過ごしていると、ふと彼/彼女と話したくてたまらない気持ちになった。言ってしまえば、夜の静けさに寂しさを覚えてしまったのだ。\"], [7, \"ここまでの配達の記録をつけていたら、背後から視線を感じる……！　もしや、彼/彼女に覗かれている……！？\"], [8, \"周囲を探索していると、君一人では手の届かないところに金属製の箱か何かがあることに気づいた。彼/彼女に手伝ってもらえば、取れるだろうか……？\"], [9, \"朝まではまだしばらくあるというのに、目が覚めてしまった。二度寝しようにも寝付けずに居ると、隣でもぞもぞと動く気配がする。彼/彼女も、どうやら同じらしい。\"], [10, \"他愛のない話をするうちに、君は彼/彼女に問いかけていた。「何故、ポストマンになろうと思ったのか」　……そういえば、君自身はどうだったろうか。\"], [11, \"保存食にありつこうとしたその時、君は気づいた。一匹のネズミが、彼/彼女の荷物の中に潜り込もうとしている。彼/彼女は気づいていないが、このままでは食料が危ない！\"], [12, \"テントを設営し、落ち着いた頃にふと気づく。　……身体が熱い。少し、だるさもあるような気もする。大したことはないと思うが、彼/彼女に相談しておいた方がいいだろうか。\"]];\n          dice_list = self.randomizer.$roll_barabara(2, 6);\n          dice = dice_list.$sum();\n          diceText = dice_list.$join(\",\");\n          tableText = self.$get_table_by_number(dice, table);\n          text = \"\" + (name) + \"(\" + (diceText) + \") ＞ \" + (dice) + \"：\" + (tableText);\n          return text;\n        }, $Postman_get_free_situation_table$7.$$arity = 0), nil) && 'get_free_situation_table';\n      })($nesting[0], $$($nesting, 'Base'), $nesting)\n    })($nesting[0], $nesting)\n  })($nesting[0], $nesting)\n})(Opal);\n"],"sourceRoot":"webpack:///"}