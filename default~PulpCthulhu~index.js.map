{"version":3,"sources":["./node_modules/bcdice/lib/bcdice/game_system/PulpCthulhu.js"],"names":["require","Opal","modules","$rb_plus","lhs","rhs","$rb_ge","self","top","$nesting","nil","$$$","$$","$module","module","$klass","klass","$send","send","$truthy","truthy","$base","$parent_nesting","concat","$super","$Rollable_roll_ones_d10$1","$Rollable_roll_with_bonus$2","$private","def","$$roll_ones_d10","dice","randomizer","$roll_once","$$arity","$$roll_with_bonus","bonus","$$3","$$4","tens_list","ones","dice_list","$abs","$$s","$roll_tens_d10","$roll_ones_d10","tens","$min","$max","$rb_divide","$rb_gt","$rb_le","$rb_lt","$rb_minus","$range","range","$hash2","hash2","$FullAuto_eval$1","$FullAuto_eval$2","$FullAuto_getFullAutoResult$3","$FullAuto_rollFullAuto$4","$FullAuto_shouldStopRollFullAuto$ques$6","$FullAuto_getHitResultInfos$7","$FullAuto_getHitResultText$8","$FullAuto_getHitType$9","$FullAuto_getBulletResults$10","$FullAuto_getSuccessListImpaleBulletList$11","$FullAuto_getNextDifficultyMessage$12","$FullAuto_getSetOfBullet$13","$FullAuto_getHitBulletCountBase$14","$FullAuto_isLastBulletTurn$15","$FullAuto_getLastHitBulletCount$16","$FullAuto_getFumbleable$17","const_set","$freeze","defs","command","$new","$eval","$getFullAutoResult","$include","$$getFullAutoResult","$a","$b","$c","m","bullet_count","diff","broken_number","bonus_dice_count","$ret_or_1","stop_count","$ret_or_2","bullet_set_count_cap","$ret_or_3","output","bullet_count_limit","$ret_or_4","$ret_or_5","$ret_or_6","$ret_or_7","$ret_or_8","$ret_or_9","$match","$to_i","$rollFullAuto","$$rollFullAuto","dice_num","$$5","loopCount","counts","$brk","new_brk","more_difficulty","hit_result","total","total_list","hit_type","hit_bullet","impale_bullet","lost_bullet","$writer","$getNextDifficultyMessage","$getHitResultInfos","to_ary","$join","ret","$getHitResultText","$getHitType","$getBulletResults","to_a","brk","$$brk","err","$v","$returner","returner","difficulty","difficulty_threshold","$ret_or_10","$$getHitResultInfos","fumbleable","$roll_with_bonus","$getFumbleable","$from_values","$to_s","$$getHitResultText","$$getHitType","successList","impaleBulletList","$getSuccessListImpaleBulletList","$$getBulletResults","bullet_set_count","hit_bullet_count_base","impale_bullet_count_base","lost_bullet_count","hit_bullet_count","impale_bullet_count","$case","$getSetOfBullet","$getHitBulletCountBase","$to_f","$isLastBulletTurn","$floor","$ceil","$getLastHitBulletCount","$$getSuccessListImpaleBulletList","$$getNextDifficultyMessage","$$getSetOfBullet","$ret_or_11","$$getHitBulletCountBase","$ret_or_12","$$isLastBulletTurn","$$getLastHitBulletCount","count","$$getFumbleable","$require","$Cthulhu7th_eval_game_system_specific_command$1","$Cthulhu7th_roll_1d8_table$10","$Cthulhu7th_roll_1d100_table$11","$Cthulhu7th_skill_roll$12","$Cthulhu7th_getFullAutoResult$14","$Cthulhu7th_combine_roll$15","$Cthulhu7th_roll_bmr_table$17","$Cthulhu7th_roll_bms_table$18","$$prototype","$register_prefix","$$eval_game_system_specific_command","$skill_roll","$combine_roll","$roll_bmr_table","$roll_bms_table","$roll_1d8_table","$roll_1d100_table","$ResultLevel_with_difficulty_level$2","$ResultLevel_from_values$3","$ResultLevel_initialize$4","$ResultLevel_success$ques$5","$ResultLevel_failure$ques$6","$ResultLevel_critical$ques$7","$ResultLevel_fumble$ques$8","$ResultLevel_to_s$9","level_index","level","$$with_difficulty_level","fumble","$$from_values","$$initialize","$index","$raise","$$to_s","$$roll_1d8_table","table_name","table","total_n","index","text","$$roll_1d100_table","$$skill_roll","$$13","bonus_dice","difficulty_level","expr","result","sequence","$with_difficulty_level","$compact","r","$$combine_roll","$$16","difficulty_1","difficulty_2","result_1","result_2","rank","$$roll_bmr_table","time_n","$$roll_bms_table","$PulpCthulhu_eval_game_system_specific_command$1","$PulpCthulhu_roll_1d20_table$2","$PulpCthulhu_roll_bmr_table$3","$PulpCthulhu_roll_bms_table$4","$roll_1d20_table","$$roll_1d20_table"],"mappings":"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","file":"default~PulpCthulhu~index.js","sourcesContent":["require('./../opal');\n\n/* Generated by Opal 1.1.1 */\nOpal.modules[\"bcdice/game_system/cthulhu7th/rollable\"] = function(Opal) {\n  function $rb_plus(lhs, rhs) {\n    return (typeof(lhs) === 'number' && typeof(rhs) === 'number') ? lhs + rhs : lhs['$+'](rhs);\n  }\n  function $rb_ge(lhs, rhs) {\n    return (typeof(lhs) === 'number' && typeof(rhs) === 'number') ? lhs >= rhs : lhs['$>='](rhs);\n  }\n  var self = Opal.top, $nesting = [], nil = Opal.nil, $$$ = Opal.$$$, $$ = Opal.$$, $module = Opal.module, $klass = Opal.klass, $send = Opal.send, $truthy = Opal.truthy;\n\n  return (function($base, $parent_nesting) {\n    var self = $module($base, 'BCDice');\n\n    var $nesting = [self].concat($parent_nesting);\n\n    (function($base, $parent_nesting) {\n      var self = $module($base, 'GameSystem');\n\n      var $nesting = [self].concat($parent_nesting);\n\n      (function($base, $super, $parent_nesting) {\n        var self = $klass($base, $super, 'Cthulhu7th');\n\n        var $nesting = [self].concat($parent_nesting);\n\n        return (function($base, $parent_nesting) {\n          var self = $module($base, 'Rollable');\n\n          var $nesting = [self].concat($parent_nesting), $Rollable_roll_ones_d10$1, $Rollable_roll_with_bonus$2;\n\n          \n          self.$private();\n          \n          Opal.def(self, '$roll_ones_d10', $Rollable_roll_ones_d10$1 = function $$roll_ones_d10() {\n            var self = this, dice = nil;\n            if (self.randomizer == null) self.randomizer = nil;\n\n            \n            dice = self.randomizer.$roll_once(10);\n            if (dice['$=='](10)) {\n              return 0};\n            return dice;\n          }, $Rollable_roll_ones_d10$1.$$arity = 0);\n          \n          Opal.def(self, '$roll_with_bonus', $Rollable_roll_with_bonus$2 = function $$roll_with_bonus(bonus) {\n            var $$3, $$4, self = this, tens_list = nil, ones = nil, dice_list = nil, dice = nil;\n\n            \n            tens_list = $send($$($nesting, 'Array'), 'new', [$rb_plus(bonus.$abs(), 1)], ($$3 = function(){var self = $$3.$$s == null ? this : $$3.$$s;\n              if (self.randomizer == null) self.randomizer = nil;\n\n            return self.randomizer.$roll_tens_d10()}, $$3.$$s = self, $$3.$$arity = 0, $$3));\n            ones = self.$roll_ones_d10();\n            dice_list = $send(tens_list, 'map', [], ($$4 = function(tens){var self = $$4.$$s == null ? this : $$4.$$s, dice = nil;\n\n            \n              \n              if (tens == null) {\n                tens = nil;\n              };\n              dice = $rb_plus(tens, ones);\n              if (dice['$=='](0)) {\n                return 100\n              } else {\n                return dice\n              };}, $$4.$$s = self, $$4.$$arity = 1, $$4));\n            dice = (function() {if ($truthy($rb_ge(bonus, 0))) {\n              return dice_list.$min()\n            } else {\n              return dice_list.$max()\n            }; return nil; })();\n            return [dice, dice_list];\n          }, $Rollable_roll_with_bonus$2.$$arity = 1);\n        })($nesting[0], $nesting)\n      })($nesting[0], $$($nesting, 'Base'), $nesting)\n    })($nesting[0], $nesting)\n  })($nesting[0], $nesting)\n};\n\n/* Generated by Opal 1.1.1 */\nOpal.modules[\"bcdice/game_system/cthulhu7th/full_auto\"] = function(Opal) {\n  function $rb_divide(lhs, rhs) {\n    return (typeof(lhs) === 'number' && typeof(rhs) === 'number') ? lhs / rhs : lhs['$/'](rhs);\n  }\n  function $rb_gt(lhs, rhs) {\n    return (typeof(lhs) === 'number' && typeof(rhs) === 'number') ? lhs > rhs : lhs['$>'](rhs);\n  }\n  function $rb_plus(lhs, rhs) {\n    return (typeof(lhs) === 'number' && typeof(rhs) === 'number') ? lhs + rhs : lhs['$+'](rhs);\n  }\n  function $rb_le(lhs, rhs) {\n    return (typeof(lhs) === 'number' && typeof(rhs) === 'number') ? lhs <= rhs : lhs['$<='](rhs);\n  }\n  function $rb_lt(lhs, rhs) {\n    return (typeof(lhs) === 'number' && typeof(rhs) === 'number') ? lhs < rhs : lhs['$<'](rhs);\n  }\n  function $rb_ge(lhs, rhs) {\n    return (typeof(lhs) === 'number' && typeof(rhs) === 'number') ? lhs >= rhs : lhs['$>='](rhs);\n  }\n  function $rb_minus(lhs, rhs) {\n    return (typeof(lhs) === 'number' && typeof(rhs) === 'number') ? lhs - rhs : lhs['$-'](rhs);\n  }\n  var self = Opal.top, $nesting = [], nil = Opal.nil, $$$ = Opal.$$$, $$ = Opal.$$, $module = Opal.module, $klass = Opal.klass, $range = Opal.range, $hash2 = Opal.hash2, $truthy = Opal.truthy, $send = Opal.send;\n\n  return (function($base, $parent_nesting) {\n    var self = $module($base, 'BCDice');\n\n    var $nesting = [self].concat($parent_nesting);\n\n    (function($base, $parent_nesting) {\n      var self = $module($base, 'GameSystem');\n\n      var $nesting = [self].concat($parent_nesting);\n\n      (function($base, $super, $parent_nesting) {\n        var self = $klass($base, $super, 'Cthulhu7th');\n\n        var $nesting = [self].concat($parent_nesting);\n\n        return (function($base, $super, $parent_nesting) {\n          var self = $klass($base, $super, 'FullAuto');\n\n          var $nesting = [self].concat($parent_nesting), $FullAuto_eval$1, $FullAuto_eval$2, $FullAuto_getFullAutoResult$3, $FullAuto_rollFullAuto$4, $FullAuto_shouldStopRollFullAuto$ques$6, $FullAuto_getHitResultInfos$7, $FullAuto_getHitResultText$8, $FullAuto_getHitType$9, $FullAuto_getBulletResults$10, $FullAuto_getSuccessListImpaleBulletList$11, $FullAuto_getNextDifficultyMessage$12, $FullAuto_getSetOfBullet$13, $FullAuto_getHitBulletCountBase$14, $FullAuto_isLastBulletTurn$15, $FullAuto_getLastHitBulletCount$16, $FullAuto_getFumbleable$17;\n\n          \n          Opal.const_set($nesting[0], 'BONUS_DICE_RANGE', $range(-2, 2, false).$freeze());\n          Opal.const_set($nesting[0], 'ROLL_FULL_AUTO_DIFFICULTY_THRESHOLD', $hash2([\"r\", \"h\", \"e\"], {\"r\": 0, \"h\": 1, \"e\": 2}).$freeze());\n          Opal.defs(self, '$eval', $FullAuto_eval$1 = function(command, randomizer) {\n            var self = this;\n\n            return self.$new().$eval(command, randomizer)\n          }, $FullAuto_eval$1.$$arity = 2);\n          \n          Opal.def(self, '$eval', $FullAuto_eval$2 = function(command, randomizer) {\n            var self = this;\n\n            \n            self.randomizer = randomizer;\n            return self.$getFullAutoResult(command);\n          }, $FullAuto_eval$2.$$arity = 2);\n          self.$private();\n          self.$include($$($nesting, 'Rollable'));\n          \n          Opal.def(self, '$getFullAutoResult', $FullAuto_getFullAutoResult$3 = function $$getFullAutoResult(command) {\n            var $a, $b, $c, self = this, m = nil, bullet_count = nil, diff = nil, broken_number = nil, bonus_dice_count = nil, $ret_or_1 = nil, stop_count = nil, $ret_or_2 = nil, bullet_set_count_cap = nil, $ret_or_3 = nil, output = nil, bullet_count_limit = nil, $ret_or_4 = nil, $ret_or_5 = nil, $ret_or_6 = nil, $ret_or_7 = nil, $ret_or_8 = nil, $ret_or_9 = nil;\n\n            \n            m = /^FAR\\((-?\\d+),(-?\\d+),(-?\\d+)(?:,(-?\\d+)?)?(?:,(-?\\w+)?)?(?:,(-?\\d+)?)?\\)$/i.$match(command);\n            if ($truthy(m)) {\n            } else {\n              return nil\n            };\n            bullet_count = m['$[]'](1).$to_i();\n            diff = m['$[]'](2).$to_i();\n            broken_number = m['$[]'](3).$to_i();\n            bonus_dice_count = (function() {if ($truthy(($ret_or_1 = ($a = m['$[]'](4), ($a === nil || $a == null) ? nil : $send($a, 'to_i', []))))) {\n              return $ret_or_1\n            } else {\n              return 0\n            }; return nil; })();\n            stop_count = (function() {if ($truthy(($ret_or_2 = ($b = m['$[]'](5), ($b === nil || $b == null) ? nil : $send($b, 'downcase', []))))) {\n              return $ret_or_2\n            } else {\n              return \"\"\n            }; return nil; })();\n            bullet_set_count_cap = (function() {if ($truthy(($ret_or_3 = ($c = m['$[]'](6), ($c === nil || $c == null) ? nil : $send($c, 'to_i', []))))) {\n              return $ret_or_3\n            } else {\n              return $rb_divide(diff, 10).$to_i()\n            }; return nil; })();\n            output = \"\";\n            bullet_count_limit = 100;\n            if ($truthy($rb_gt(bullet_count, bullet_count_limit))) {\n              \n              output = $rb_plus(output, \"\" + \"\" + (bullet_count_limit) + \"\\n\");\n              bullet_count = bullet_count_limit;};\n            if ($truthy((function() {if ($truthy(($ret_or_4 = (function() {if ($truthy(($ret_or_5 = $rb_gt(bullet_set_count_cap, $rb_divide(diff, 10).$to_i())))) {\n              \n              return $rb_gt(diff, 39);\n            } else {\n              return $ret_or_5\n            }; return nil; })()))) {\n              return m['$[]'](6)['$nil?']()['$!']()\n            } else {\n              return $ret_or_4\n            }; return nil; })())) {\n              \n              bullet_set_count_cap = $rb_divide(diff, 10).$to_i();\n              output = $rb_plus(output, \"\" + \"[10]\" + (bullet_set_count_cap) + \"\\n\");\n            } else if ($truthy((function() {if ($truthy(($ret_or_6 = (function() {if ($truthy(($ret_or_7 = $rb_le(diff, 39)))) {\n              \n              return $rb_gt(bullet_set_count_cap, 3);\n            } else {\n              return $ret_or_7\n            }; return nil; })()))) {\n              return m['$[]'](6)['$nil?']()['$!']()\n            } else {\n              return $ret_or_6\n            }; return nil; })())) {\n              \n              bullet_set_count_cap = 3;\n              output = $rb_plus(output, \"\" + \"393\" + (bullet_set_count_cap) + \"\\n\");};\n            if ($truthy((function() {if ($truthy(($ret_or_8 = $rb_le(bullet_set_count_cap, 0)))) {\n              return m['$[]'](6)['$nil?']()['$!']()\n            } else {\n              return $ret_or_8\n            }; return nil; })())) {\n              return \"\"};\n            if ($truthy((function() {if ($truthy(($ret_or_9 = $rb_lt(bullet_set_count_cap, 3)))) {\n              return m['$[]'](6)['$nil?']()['$!']()\n            } else {\n              return $ret_or_9\n            }; return nil; })())) {\n              \n              bullet_set_count_cap = 3;\n              output = $rb_plus(output, \"33\\n\");};\n            if ($truthy($rb_le(bullet_count, 0))) {\n              return \"\"};\n            if ($truthy($rb_le(diff, 0))) {\n              return \"\"};\n            if ($truthy($rb_lt(broken_number, 0))) {\n              \n              output = $rb_plus(output, \"\\n\");\n              broken_number = broken_number.$abs();};\n            if ($truthy($$($nesting, 'BONUS_DICE_RANGE')['$include?'](bonus_dice_count))) {\n            } else {\n              return \"\" + \"\" + ($$($nesting, 'BONUS_DICE_RANGE').$min()) + \"\" + ($$($nesting, 'BONUS_DICE_RANGE').$max()) + \"\"\n            };\n            output = $rb_plus(output, \"\" + \"[\" + (bonus_dice_count) + \"]\");\n            output = $rb_plus(output, self.$rollFullAuto(bullet_count, diff, broken_number, bonus_dice_count, stop_count, bullet_set_count_cap));\n            return output;\n          }, $FullAuto_getFullAutoResult$3.$$arity = 1);\n          \n          Opal.def(self, '$rollFullAuto', $FullAuto_rollFullAuto$4 = function $$rollFullAuto(bullet_count, diff, broken_number, dice_num, stop_count, bullet_set_count_cap) {try {\n\n            var $$5, self = this, output = nil, loopCount = nil, counts = nil;\n\n            \n            output = \"\";\n            loopCount = 0;\n            counts = $hash2([\"hit_bullet\", \"impale_bullet\", \"bullet\"], {\"hit_bullet\": 0, \"impale_bullet\": 0, \"bullet\": bullet_count});\n            (function(){var $brk = Opal.new_brk(); try {return $send($range(0, 3, false), 'each', [], ($$5 = function(more_difficulty){var self = $$5.$$s == null ? this : $$5.$$s, $a, $b, $c, hit_result = nil, total = nil, total_list = nil, hit_type = nil, hit_bullet = nil, impale_bullet = nil, lost_bullet = nil, $writer = nil;\n\n            \n              \n              if (more_difficulty == null) {\n                more_difficulty = nil;\n              };\n              output = $rb_plus(output, self.$getNextDifficultyMessage(more_difficulty));\n              while ($truthy($rb_ge(dice_num, $$($nesting, 'BONUS_DICE_RANGE').$min()))) {\n                \n                loopCount = $rb_plus(loopCount, 1);\n                $c = self.$getHitResultInfos(dice_num, diff, more_difficulty), $b = Opal.to_ary($c), (hit_result = ($b[0] == null ? nil : $b[0])), (total = ($b[1] == null ? nil : $b[1])), (total_list = ($b[2] == null ? nil : $b[2])), $c;\n                output = $rb_plus(output, \"\" + \"\\n\" + (loopCount) + \":  \" + (total_list.$join(\", \")) + \"  \" + (hit_result));\n                if ($truthy($rb_ge(total, broken_number))) {\n                  \n                  output = $rb_plus(output, \"\");\n                  Opal.ret(self.$getHitResultText(output, counts));};\n                hit_type = self.$getHitType(more_difficulty, hit_result);\n                $c = self.$getBulletResults(counts['$[]'](\"bullet\"), hit_type, diff, bullet_set_count_cap), $b = Opal.to_ary($c), (hit_bullet = ($b[0] == null ? nil : $b[0])), (impale_bullet = ($b[1] == null ? nil : $b[1])), (lost_bullet = ($b[2] == null ? nil : $b[2])), $c;\n                output = $rb_plus(output, \"\" + \"\" + (hit_bullet) + \"\" + (impale_bullet) + \"\");\n                \n                $writer = [\"hit_bullet\", $rb_plus(counts['$[]'](\"hit_bullet\"), hit_bullet)];\n                $send(counts, '[]=', Opal.to_a($writer));\n                $writer[$rb_minus($writer[\"length\"], 1)];;\n                \n                $writer = [\"impale_bullet\", $rb_plus(counts['$[]'](\"impale_bullet\"), impale_bullet)];\n                $send(counts, '[]=', Opal.to_a($writer));\n                $writer[$rb_minus($writer[\"length\"], 1)];;\n                \n                $writer = [\"bullet\", $rb_minus(counts['$[]'](\"bullet\"), lost_bullet)];\n                $send(counts, '[]=', Opal.to_a($writer));\n                $writer[$rb_minus($writer[\"length\"], 1)];;\n                if ($truthy($rb_le(counts['$[]'](\"bullet\"), 0))) {\n                  Opal.ret(self.$getHitResultText(output, counts))};\n                dice_num = $rb_minus(dice_num, 1);\n              };\n              if ($truthy(self['$shouldStopRollFullAuto?'](stop_count, more_difficulty))) {\n                \n                output = $rb_plus(output, \"\\n\");\n                \n                Opal.brk(nil, $brk);};\n              return (dice_num = $rb_plus(dice_num, 1));}, $$5.$$s = self, $$5.$$brk = $brk, $$5.$$arity = 1, $$5))\n            } catch (err) { if (err === $brk) { return err.$v } else { throw err } }})();\n            return self.$getHitResultText(output, counts);\n            } catch ($returner) { if ($returner === Opal.returner) { return $returner.$v } throw $returner; }\n          }, $FullAuto_rollFullAuto$4.$$arity = 6);\n          \n          Opal.def(self, '$shouldStopRollFullAuto?', $FullAuto_shouldStopRollFullAuto$ques$6 = function(stop_count, difficulty) {\n            var self = this, difficulty_threshold = nil, $ret_or_10 = nil;\n\n            \n            difficulty_threshold = $$($nesting, 'ROLL_FULL_AUTO_DIFFICULTY_THRESHOLD')['$[]'](stop_count);\n            return (function() {if ($truthy(($ret_or_10 = difficulty_threshold))) {\n              return $rb_ge(difficulty, difficulty_threshold)\n            } else {\n              return $ret_or_10\n            }; return nil; })();\n          }, $FullAuto_shouldStopRollFullAuto$ques$6.$$arity = 2);\n          \n          Opal.def(self, '$getHitResultInfos', $FullAuto_getHitResultInfos$7 = function $$getHitResultInfos(dice_num, diff, more_difficulty) {\n            var $a, $b, self = this, total = nil, total_list = nil, fumbleable = nil, hit_result = nil;\n\n            \n            $b = self.$roll_with_bonus(dice_num), $a = Opal.to_ary($b), (total = ($a[0] == null ? nil : $a[0])), (total_list = ($a[1] == null ? nil : $a[1])), $b;\n            fumbleable = self.$getFumbleable(more_difficulty);\n            hit_result = $$($nesting, 'ResultLevel').$from_values(total, diff, fumbleable).$to_s();\n            return [hit_result, total, total_list];\n          }, $FullAuto_getHitResultInfos$7.$$arity = 3);\n          \n          Opal.def(self, '$getHitResultText', $FullAuto_getHitResultText$8 = function $$getHitResultText(output, counts) {\n            var self = this;\n\n            return \"\" + (output) + \"\\n \" + (counts['$[]'](\"hit_bullet\")) + \"\" + (counts['$[]'](\"impale_bullet\")) + \"\" + (counts['$[]'](\"bullet\")) + \"\"\n          }, $FullAuto_getHitResultText$8.$$arity = 2);\n          \n          Opal.def(self, '$getHitType', $FullAuto_getHitType$9 = function $$getHitType(more_difficulty, hit_result) {\n            var $a, $b, self = this, successList = nil, impaleBulletList = nil;\n\n            \n            $b = self.$getSuccessListImpaleBulletList(more_difficulty), $a = Opal.to_ary($b), (successList = ($a[0] == null ? nil : $a[0])), (impaleBulletList = ($a[1] == null ? nil : $a[1])), $b;\n            if ($truthy(successList['$include?'](hit_result))) {\n              return \"hit\"};\n            if ($truthy(impaleBulletList['$include?'](hit_result))) {\n              return \"impale\"};\n            return \"\";\n          }, $FullAuto_getHitType$9.$$arity = 2);\n          \n          Opal.def(self, '$getBulletResults', $FullAuto_getBulletResults$10 = function $$getBulletResults(bullet_count, hit_type, diff, bullet_set_count_cap) {\n            var self = this, bullet_set_count = nil, hit_bullet_count_base = nil, impale_bullet_count_base = nil, lost_bullet_count = nil, hit_bullet_count = nil, impale_bullet_count = nil, $case = nil;\n\n            \n            bullet_set_count = self.$getSetOfBullet(diff, bullet_set_count_cap);\n            hit_bullet_count_base = self.$getHitBulletCountBase(diff, bullet_set_count);\n            impale_bullet_count_base = $rb_divide(bullet_set_count, (2).$to_f());\n            lost_bullet_count = 0;\n            hit_bullet_count = 0;\n            impale_bullet_count = 0;\n            if ($truthy(self.$isLastBulletTurn(bullet_count, bullet_set_count)['$!']())) {\n              \n              $case = hit_type;\n              if (\"hit\"['$===']($case)) {hit_bullet_count = hit_bullet_count_base}\n              else if (\"impale\"['$===']($case)) {\n              impale_bullet_count = impale_bullet_count_base.$floor();\n              hit_bullet_count = impale_bullet_count_base.$ceil();};\n              lost_bullet_count = bullet_set_count;\n            } else {\n              \n              $case = hit_type;\n              if (\"hit\"['$===']($case)) {hit_bullet_count = self.$getLastHitBulletCount(bullet_count)}\n              else if (\"impale\"['$===']($case)) {\n              impale_bullet_count = self.$getLastHitBulletCount(bullet_count);\n              hit_bullet_count = $rb_minus(bullet_count, impale_bullet_count);};\n              lost_bullet_count = bullet_count;\n            };\n            return [hit_bullet_count, impale_bullet_count, lost_bullet_count];\n          }, $FullAuto_getBulletResults$10.$$arity = 4);\n          \n          Opal.def(self, '$getSuccessListImpaleBulletList', $FullAuto_getSuccessListImpaleBulletList$11 = function $$getSuccessListImpaleBulletList(more_difficulty) {\n            var self = this, successList = nil, impaleBulletList = nil, $case = nil;\n\n            \n            successList = [];\n            impaleBulletList = [];\n            $case = more_difficulty;\n            if ((0)['$===']($case)) {\n            successList = [\"\", \"\"];\n            impaleBulletList = [\"\", \"\"];}\n            else if ((1)['$===']($case)) {\n            successList = [\"\"];\n            impaleBulletList = [\"\", \"\"];}\n            else if ((2)['$===']($case)) {\n            successList = [];\n            impaleBulletList = [\"\", \"\"];}\n            else if ((3)['$===']($case)) {\n            successList = [\"\"];\n            impaleBulletList = [];};\n            return [successList, impaleBulletList];\n          }, $FullAuto_getSuccessListImpaleBulletList$11.$$arity = 1);\n          \n          Opal.def(self, '$getNextDifficultyMessage', $FullAuto_getNextDifficultyMessage$12 = function $$getNextDifficultyMessage(more_difficulty) {\n            var self = this, $case = nil;\n\n            \n            $case = more_difficulty;\n            if ((1)['$===']($case)) {return \"\\n\"}\n            else if ((2)['$===']($case)) {return \"\\n\"}\n            else if ((3)['$===']($case)) {return \"\\n\"};\n            return \"\";\n          }, $FullAuto_getNextDifficultyMessage$12.$$arity = 1);\n          \n          Opal.def(self, '$getSetOfBullet', $FullAuto_getSetOfBullet$13 = function $$getSetOfBullet(diff, bullet_set_count_cap) {\n            var self = this, bullet_set_count = nil, $ret_or_11 = nil;\n\n            \n            bullet_set_count = $rb_divide(diff, 10).$to_i();\n            if ($truthy($rb_lt(bullet_set_count_cap, bullet_set_count))) {\n              bullet_set_count = bullet_set_count_cap};\n            if ($truthy((function() {if ($truthy(($ret_or_11 = $rb_ge(diff, 1)))) {\n              \n              return $rb_lt(diff, 30);\n            } else {\n              return $ret_or_11\n            }; return nil; })())) {\n              bullet_set_count = 3};\n            return bullet_set_count;\n          }, $FullAuto_getSetOfBullet$13.$$arity = 2);\n          \n          Opal.def(self, '$getHitBulletCountBase', $FullAuto_getHitBulletCountBase$14 = function $$getHitBulletCountBase(diff, bullet_set_count) {\n            var self = this, hit_bullet_count_base = nil, $ret_or_12 = nil;\n\n            \n            hit_bullet_count_base = $rb_divide(bullet_set_count, 2).$to_i();\n            if ($truthy((function() {if ($truthy(($ret_or_12 = $rb_ge(diff, 1)))) {\n              \n              return $rb_lt(diff, 30);\n            } else {\n              return $ret_or_12\n            }; return nil; })())) {\n              hit_bullet_count_base = 1};\n            return hit_bullet_count_base;\n          }, $FullAuto_getHitBulletCountBase$14.$$arity = 2);\n          \n          Opal.def(self, '$isLastBulletTurn', $FullAuto_isLastBulletTurn$15 = function $$isLastBulletTurn(bullet_count, bullet_set_count) {\n            var self = this;\n\n            return $rb_lt($rb_minus(bullet_count, bullet_set_count), 0)\n          }, $FullAuto_isLastBulletTurn$15.$$arity = 2);\n          \n          Opal.def(self, '$getLastHitBulletCount', $FullAuto_getLastHitBulletCount$16 = function $$getLastHitBulletCount(bullet_count) {\n            var self = this, count = nil;\n\n            \n            if (bullet_count['$=='](1)) {\n              return 1};\n            count = $rb_divide(bullet_count, (2).$to_f()).$floor();\n            return count;\n          }, $FullAuto_getLastHitBulletCount$16.$$arity = 1);\n          return (Opal.def(self, '$getFumbleable', $FullAuto_getFumbleable$17 = function $$getFumbleable(more_difficulty) {\n            var self = this;\n\n            return $rb_ge(more_difficulty, 1)\n          }, $FullAuto_getFumbleable$17.$$arity = 1), nil) && 'getFumbleable';\n        })($nesting[0], null, $nesting)\n      })($nesting[0], $$($nesting, 'Base'), $nesting)\n    })($nesting[0], $nesting)\n  })($nesting[0], $nesting)\n};\n\n/* Generated by Opal 1.1.1 */\nOpal.modules[\"bcdice/game_system/Cthulhu7th\"] = function(Opal) {\n  function $rb_lt(lhs, rhs) {\n    return (typeof(lhs) === 'number' && typeof(rhs) === 'number') ? lhs < rhs : lhs['$<'](rhs);\n  }\n  function $rb_le(lhs, rhs) {\n    return (typeof(lhs) === 'number' && typeof(rhs) === 'number') ? lhs <= rhs : lhs['$<='](rhs);\n  }\n  function $rb_ge(lhs, rhs) {\n    return (typeof(lhs) === 'number' && typeof(rhs) === 'number') ? lhs >= rhs : lhs['$>='](rhs);\n  }\n  function $rb_divide(lhs, rhs) {\n    return (typeof(lhs) === 'number' && typeof(rhs) === 'number') ? lhs / rhs : lhs['$/'](rhs);\n  }\n  function $rb_minus(lhs, rhs) {\n    return (typeof(lhs) === 'number' && typeof(rhs) === 'number') ? lhs - rhs : lhs['$-'](rhs);\n  }\n  function $rb_gt(lhs, rhs) {\n    return (typeof(lhs) === 'number' && typeof(rhs) === 'number') ? lhs > rhs : lhs['$>'](rhs);\n  }\n  var self = Opal.top, $nesting = [], nil = Opal.nil, $$$ = Opal.$$$, $$ = Opal.$$, $module = Opal.module, $klass = Opal.klass, $hash2 = Opal.hash2, $truthy = Opal.truthy, $send = Opal.send;\n\n  \n  self.$require(\"bcdice/game_system/cthulhu7th/rollable\");\n  self.$require(\"bcdice/game_system/cthulhu7th/full_auto\");\n  return (function($base, $parent_nesting) {\n    var self = $module($base, 'BCDice');\n\n    var $nesting = [self].concat($parent_nesting);\n\n    (function($base, $parent_nesting) {\n      var self = $module($base, 'GameSystem');\n\n      var $nesting = [self].concat($parent_nesting);\n\n      (function($base, $super, $parent_nesting) {\n        var self = $klass($base, $super, 'Cthulhu7th');\n\n        var $nesting = [self].concat($parent_nesting), $Cthulhu7th_eval_game_system_specific_command$1, $Cthulhu7th_roll_1d8_table$10, $Cthulhu7th_roll_1d100_table$11, $Cthulhu7th_skill_roll$12, $Cthulhu7th_getFullAutoResult$14, $Cthulhu7th_combine_roll$15, $Cthulhu7th_roll_bmr_table$17, $Cthulhu7th_roll_bms_table$18;\n\n        self.$$prototype.randomizer = nil;\n        \n        Opal.const_set($nesting[0], 'ID', \"Cthulhu7th\");\n        Opal.const_set($nesting[0], 'NAME', \"TRPG\");\n        Opal.const_set($nesting[0], 'SORT_KEY', \"TRPG\");\n        Opal.const_set($nesting[0], 'HELP_MESSAGE', \"\" + \"CC(x)<=\\n\" + \"x\\n\" + \"1D100\\n\" + \"\\n\" + \" \\n\" + \"CC<=30CC(2)<=50 CC(+2)<=50 CC(-1)<=75 CC-1<=50 CC1<=65 CC+1<=65 CC\\n\" + \"\\n\" + \"CC(x)<=()()\\n\" + \"\\n\" + \" \\n\" + \"\\n\" + \"r:h:e:c:\\n\" + \"CC<=70r CC1<=60h CC-2<=50e CC2<=99c\\n\" + \"\\n\" + \"(CBR(x,y))\\n\" + \" x  y \\n\" + \"CBR(50,20)\\n\" + \"\\n\" + \"FAR(w,x,y,z,d,v)\\n\" + \"w(1100x1100y\\n\" + \"z(-22)\\n\" + \"dr,h,e\\n\" + \"v\\n\" + \"\\n\" + \"FAR(25,70,98)FAR(50,80,98,-1)far(30,70,99,1,R)\\n\" + \"far(25,88,96,2,h,5)FaR(40,77,100,,e,4)fAr(20,47,100,,,3)\\n\" + \"\\n\" + \"\\n\" + \"\\n\" + \"Bouts of Madness Real TimeBMR\\n\" + \"Bouts of Madness SummaryBMS\\n\" + \"Sample PhobiasPHSample ManiasMA\\n\" + \"\\n\" + \"Casting Roll\\n\" + \"FCLFCM\\n\");\n        self.$register_prefix(\"CC\", \"CBR\", \"FAR\", \"BMR\", \"BMS\", \"FCL\", \"FCM\", \"PH\", \"MA\");\n        \n        Opal.def(self, '$eval_game_system_specific_command', $Cthulhu7th_eval_game_system_specific_command$1 = function $$eval_game_system_specific_command(command) {\n          var self = this, $case = nil;\n\n          return (function() {$case = command;\n          if (/^CC/i['$===']($case)) {return self.$skill_roll(command)}\n          else if (/^CBR/i['$===']($case)) {return self.$combine_roll(command)}\n          else if (/^FAR/i['$===']($case)) {return self.$getFullAutoResult(command)}\n          else if (/^BMR/i['$===']($case)) {return self.$roll_bmr_table()}\n          else if (/^BMS/i['$===']($case)) {return self.$roll_bms_table()}\n          else if (/^FCL/i['$===']($case)) {return self.$roll_1d8_table(\"()\", $$($nesting, 'FAILED_CASTING_L_TABLE'))}\n          else if (/^FCM/i['$===']($case)) {return self.$roll_1d8_table(\"()\", $$($nesting, 'FAILED_CASTING_M_TABLE'))}\n          else if (/^PH/i['$===']($case)) {return self.$roll_1d100_table(\"\", $$($nesting, 'PHOBIAS_TABLE'))}\n          else if (/^MA/i['$===']($case)) {return self.$roll_1d100_table(\"\", $$($nesting, 'MANIAS_TABLE'))}\n          else { return nil }})()\n        }, $Cthulhu7th_eval_game_system_specific_command$1.$$arity = 1);\n        (function($base, $super, $parent_nesting) {\n          var self = $klass($base, $super, 'ResultLevel');\n\n          var $nesting = [self].concat($parent_nesting), $ResultLevel_with_difficulty_level$2, $ResultLevel_from_values$3, $ResultLevel_initialize$4, $ResultLevel_success$ques$5, $ResultLevel_failure$ques$6, $ResultLevel_critical$ques$7, $ResultLevel_fumble$ques$8, $ResultLevel_to_s$9;\n\n          self.$$prototype.level_index = self.$$prototype.level = nil;\n          \n          Opal.const_set($nesting[0], 'LEVEL', [\"fumble\", \"failure\", \"success\", \"regular_success\", \"hard_success\", \"extreme_success\", \"critical\"].$freeze());\n          Opal.const_set($nesting[0], 'LEVEL_TO_S', $hash2([\"critical\", \"extreme_success\", \"hard_success\", \"regular_success\", \"success\", \"fumble\", \"failure\"], {\"critical\": \"\", \"extreme_success\": \"\", \"hard_success\": \"\", \"regular_success\": \"\", \"success\": \"\", \"fumble\": \"\", \"failure\": \"\"}).$freeze());\n          Opal.defs(self, '$with_difficulty_level', $ResultLevel_with_difficulty_level$2 = function $$with_difficulty_level(total, difficulty) {\n            var self = this, fumble = nil;\n\n            \n            fumble = (function() {if ($truthy($rb_lt(difficulty, 50))) {\n              return 96\n            } else {\n              return 100\n            }; return nil; })();\n            if (total['$=='](1)) {\n              return $$($nesting, 'ResultLevel').$new(\"critical\")\n            } else if ($truthy($rb_le(total, difficulty))) {\n              return $$($nesting, 'ResultLevel').$new(\"success\")\n            } else if ($truthy($rb_ge(total, fumble))) {\n              return $$($nesting, 'ResultLevel').$new(\"fumble\")\n            } else {\n              return $$($nesting, 'ResultLevel').$new(\"failure\")\n            };\n          }, $ResultLevel_with_difficulty_level$2.$$arity = 2);\n          Opal.defs(self, '$from_values', $ResultLevel_from_values$3 = function $$from_values(total, difficulty, fumbleable) {\n            var self = this, fumble = nil, $ret_or_1 = nil;\n\n            \n            \n            if (fumbleable == null) {\n              fumbleable = false;\n            };\n            fumble = (function() {if ($truthy((function() {if ($truthy(($ret_or_1 = $rb_lt(difficulty, 50)))) {\n              return $ret_or_1\n            } else {\n              return fumbleable\n            }; return nil; })())) {\n              return 96\n            } else {\n              return 100\n            }; return nil; })();\n            if (total['$=='](1)) {\n              return $$($nesting, 'ResultLevel').$new(\"critical\")\n            } else if ($truthy($rb_le(total, $rb_divide(difficulty, 5).$to_i()))) {\n              return $$($nesting, 'ResultLevel').$new(\"extreme_success\")\n            } else if ($truthy($rb_le(total, $rb_divide(difficulty, 2).$to_i()))) {\n              return $$($nesting, 'ResultLevel').$new(\"hard_success\")\n            } else if ($truthy($rb_le(total, difficulty))) {\n              return $$($nesting, 'ResultLevel').$new(\"regular_success\")\n            } else if ($truthy($rb_ge(total, fumble))) {\n              return $$($nesting, 'ResultLevel').$new(\"fumble\")\n            } else {\n              return $$($nesting, 'ResultLevel').$new(\"failure\")\n            };\n          }, $ResultLevel_from_values$3.$$arity = -3);\n          \n          Opal.def(self, '$initialize', $ResultLevel_initialize$4 = function $$initialize(level) {\n            var self = this;\n\n            \n            self.level = level;\n            self.level_index = $$($nesting, 'LEVEL').$index(level);\n            if ($truthy(self.level_index)) {\n              return nil\n            } else {\n              return self.$raise($$($nesting, 'ArgumentError'))\n            };\n          }, $ResultLevel_initialize$4.$$arity = 1);\n          \n          Opal.def(self, '$success?', $ResultLevel_success$ques$5 = function() {\n            var self = this;\n\n            return $rb_ge(self.level_index, $$($nesting, 'LEVEL').$index(\"success\"))\n          }, $ResultLevel_success$ques$5.$$arity = 0);\n          \n          Opal.def(self, '$failure?', $ResultLevel_failure$ques$6 = function() {\n            var self = this;\n\n            return $rb_le(self.level_index, $$($nesting, 'LEVEL').$index(\"failure\"))\n          }, $ResultLevel_failure$ques$6.$$arity = 0);\n          \n          Opal.def(self, '$critical?', $ResultLevel_critical$ques$7 = function() {\n            var self = this;\n\n            return self.level['$=='](\"critical\")\n          }, $ResultLevel_critical$ques$7.$$arity = 0);\n          \n          Opal.def(self, '$fumble?', $ResultLevel_fumble$ques$8 = function() {\n            var self = this;\n\n            return self.level['$=='](\"fumble\")\n          }, $ResultLevel_fumble$ques$8.$$arity = 0);\n          return (Opal.def(self, '$to_s', $ResultLevel_to_s$9 = function $$to_s() {\n            var self = this;\n\n            return $$($nesting, 'LEVEL_TO_S')['$[]'](self.level)\n          }, $ResultLevel_to_s$9.$$arity = 0), nil) && 'to_s';\n        })($nesting[0], null, $nesting);\n        self.$private();\n        self.$include($$($nesting, 'Rollable'));\n        \n        Opal.def(self, '$roll_1d8_table', $Cthulhu7th_roll_1d8_table$10 = function $$roll_1d8_table(table_name, table) {\n          var self = this, total_n = nil, index = nil, text = nil;\n\n          \n          total_n = self.randomizer.$roll_once(8);\n          index = $rb_minus(total_n, 1);\n          text = table['$[]'](index);\n          return \"\" + (table_name) + \"(\" + (total_n) + \")  \" + (text);\n        }, $Cthulhu7th_roll_1d8_table$10.$$arity = 2);\n        \n        Opal.def(self, '$roll_1d100_table', $Cthulhu7th_roll_1d100_table$11 = function $$roll_1d100_table(table_name, table) {\n          var self = this, total_n = nil, index = nil, text = nil;\n\n          \n          total_n = self.randomizer.$roll_once(100);\n          index = $rb_minus(total_n, 1);\n          text = table['$[]'](index);\n          return \"\" + (table_name) + \"(\" + (total_n) + \")  \" + (text);\n        }, $Cthulhu7th_roll_1d100_table$11.$$arity = 2);\n        \n        Opal.def(self, '$skill_roll', $Cthulhu7th_skill_roll$12 = function $$skill_roll(command) {\n          var $a, $b, $c, $$13, self = this, m = nil, bonus_dice = nil, difficulty = nil, difficulty_level = nil, $ret_or_2 = nil, dice = nil, total = nil, total_list = nil, expr = nil, result = nil, sequence = nil;\n\n          \n          m = /^CC([-+]?\\d+)?(?:<=(\\d+)([RHEC])?)?$/.$match(command);\n          if ($truthy(m)) {\n          } else {\n            return nil\n          };\n          bonus_dice = m['$[]'](1).$to_i();\n          difficulty = ($a = m['$[]'](2), ($a === nil || $a == null) ? nil : $send($a, 'to_i', []));\n          difficulty_level = m['$[]'](3);\n          if (difficulty['$=='](0)) {\n            difficulty = nil\n          } else if (difficulty_level['$=='](\"H\")) {\n            difficulty = $rb_divide(difficulty, 2).$to_i()\n          } else if (difficulty_level['$=='](\"E\")) {\n            difficulty = $rb_divide(difficulty, 5).$to_i()\n          } else if (difficulty_level['$=='](\"C\")) {\n            difficulty = 0};\n          if ($truthy((function() {if ($truthy(($ret_or_2 = bonus_dice['$=='](0)))) {\n            return difficulty['$nil?']()\n          } else {\n            return $ret_or_2\n          }; return nil; })())) {\n            \n            dice = self.randomizer.$roll_once(100);\n            return \"\" + \"1D100  \" + (dice);};\n          if ($truthy($rb_gt(bonus_dice.$abs(), 100))) {\n            return \"-100100\"};\n          $c = self.$roll_with_bonus(bonus_dice), $b = Opal.to_ary($c), (total = ($b[0] == null ? nil : $b[0])), (total_list = ($b[1] == null ? nil : $b[1])), $c;\n          expr = (function() {if ($truthy(difficulty['$nil?']())) {\n            return \"1D100\"\n          } else {\n            return \"\" + \"1D100<=\" + (difficulty)\n          }; return nil; })();\n          result = (function() {if ($truthy(difficulty_level)) {\n            return $$($nesting, 'ResultLevel').$with_difficulty_level(total, difficulty)\n          } else if ($truthy(difficulty)) {\n            return $$($nesting, 'ResultLevel').$from_values(total, difficulty)\n          } else {\n            return nil\n          }; return nil; })();\n          sequence = [\"\" + \"(\" + (expr) + \") [\" + (bonus_dice) + \"]\", total_list.$join(\", \"), total, result].$compact();\n          return $send($$($nesting, 'Result').$new(), 'tap', [], ($$13 = function(r){var self = $$13.$$s == null ? this : $$13.$$s, $writer = nil;\n\n          \n            \n            if (r == null) {\n              r = nil;\n            };\n            \n            $writer = [sequence.$join(\"  \")];\n            $send(r, 'text=', Opal.to_a($writer));\n            $writer[$rb_minus($writer[\"length\"], 1)];;\n            if ($truthy(result)) {\n              \n              \n              $writer = [result['$success?']()];\n              $send(r, 'condition=', Opal.to_a($writer));\n              $writer[$rb_minus($writer[\"length\"], 1)];;\n              \n              $writer = [result['$critical?']()];\n              $send(r, 'critical=', Opal.to_a($writer));\n              $writer[$rb_minus($writer[\"length\"], 1)];;\n              \n              $writer = [result['$fumble?']()];\n              $send(r, 'fumble=', Opal.to_a($writer));\n              return $writer[$rb_minus($writer[\"length\"], 1)];;\n            } else {\n              return nil\n            };}, $$13.$$s = self, $$13.$$arity = 1, $$13));\n        }, $Cthulhu7th_skill_roll$12.$$arity = 1);\n        \n        Opal.def(self, '$getFullAutoResult', $Cthulhu7th_getFullAutoResult$14 = function $$getFullAutoResult(command) {\n          var self = this;\n\n          return $$($nesting, 'FullAuto').$eval(command, self.randomizer)\n        }, $Cthulhu7th_getFullAutoResult$14.$$arity = 1);\n        \n        Opal.def(self, '$combine_roll', $Cthulhu7th_combine_roll$15 = function $$combine_roll(command) {\n          var $$16, self = this, m = nil, difficulty_1 = nil, difficulty_2 = nil, total = nil, result_1 = nil, result_2 = nil, rank = nil, $ret_or_3 = nil, $ret_or_4 = nil;\n\n          \n          m = /^CBR\\((\\d+),(\\d+)\\)$/.$match(command);\n          if ($truthy(m)) {\n          } else {\n            return nil\n          };\n          difficulty_1 = m['$[]'](1).$to_i();\n          difficulty_2 = m['$[]'](2).$to_i();\n          total = self.randomizer.$roll_once(100);\n          result_1 = $$($nesting, 'ResultLevel').$from_values(total, difficulty_1);\n          result_2 = $$($nesting, 'ResultLevel').$from_values(total, difficulty_2);\n          rank = (function() {if ($truthy((function() {if ($truthy(($ret_or_3 = result_1['$success?']()))) {\n            return result_2['$success?']()\n          } else {\n            return $ret_or_3\n          }; return nil; })())) {\n            return \"\"\n          } else if ($truthy((function() {if ($truthy(($ret_or_4 = result_1['$success?']()))) {\n            return $ret_or_4\n          } else {\n            return result_2['$success?']()\n          }; return nil; })())) {\n            return \"\"\n          } else {\n            return \"\"\n          }; return nil; })();\n          return $send($$($nesting, 'Result').$new(), 'tap', [], ($$16 = function(r){var self = $$16.$$s == null ? this : $$16.$$s, $writer = nil, $ret_or_5 = nil, $ret_or_6 = nil;\n\n          \n            \n            if (r == null) {\n              r = nil;\n            };\n            \n            $writer = [\"\" + \"(1d100<=\" + (difficulty_1) + \",\" + (difficulty_2) + \")  \" + (total) + \"[\" + (result_1) + \",\" + (result_2) + \"]  \" + (rank)];\n            $send(r, 'text=', Opal.to_a($writer));\n            $writer[$rb_minus($writer[\"length\"], 1)];;\n            \n            $writer = [(function() {if ($truthy(($ret_or_5 = result_1['$success?']()))) {\n              return result_2['$success?']()\n            } else {\n              return $ret_or_5\n            }; return nil; })()];\n            $send(r, 'success=', Opal.to_a($writer));\n            $writer[$rb_minus($writer[\"length\"], 1)];;\n            \n            $writer = [(function() {if ($truthy(($ret_or_6 = result_1['$failure?']()))) {\n              return result_2['$failure?']()\n            } else {\n              return $ret_or_6\n            }; return nil; })()];\n            $send(r, 'failure=', Opal.to_a($writer));\n            return $writer[$rb_minus($writer[\"length\"], 1)];;}, $$16.$$s = self, $$16.$$arity = 1, $$16));\n        }, $Cthulhu7th_combine_roll$15.$$arity = 1);\n        \n        Opal.def(self, '$roll_bmr_table', $Cthulhu7th_roll_bmr_table$17 = function $$roll_bmr_table() {\n          var self = this, total_n = nil, text = nil, time_n = nil;\n\n          \n          total_n = self.randomizer.$roll_once(10);\n          text = $$($nesting, 'MADNESS_REAL_TIME_TABLE')['$[]']($rb_minus(total_n, 1));\n          time_n = self.randomizer.$roll_once(10);\n          return \"\" + \"(\" + (total_n) + \")  \" + (text) + \"(1D10\" + (time_n) + \")\";\n        }, $Cthulhu7th_roll_bmr_table$17.$$arity = 0);\n        Opal.const_set($nesting[0], 'MADNESS_REAL_TIME_TABLE', [\"1D10\", \"1D101\", \"1D10\", \"1D10\", \"1D10\", \"1D10\", \"1D10\", \"1D10\", \"PH11D10\", \"MA11D10\"].$freeze());\n        \n        Opal.def(self, '$roll_bms_table', $Cthulhu7th_roll_bms_table$18 = function $$roll_bms_table() {\n          var self = this, total_n = nil, text = nil, time_n = nil;\n\n          \n          total_n = self.randomizer.$roll_once(10);\n          text = $$($nesting, 'MADNESS_SUMMARY_TABLE')['$[]']($rb_minus(total_n, 1));\n          time_n = self.randomizer.$roll_once(10);\n          return \"\" + \"(\" + (total_n) + \")  \" + (text) + \"(1D10\" + (time_n) + \")\";\n        }, $Cthulhu7th_roll_bms_table$18.$$arity = 0);\n        Opal.const_set($nesting[0], 'MADNESS_SUMMARY_TABLE', [\"\", \"1D10\", \"1D10\", \"\", \"1\", \"1D10\", \"\", \"\", \"PH11D10\", \"MA1\"].$freeze());\n        Opal.const_set($nesting[0], 'FAILED_CASTING_L_TABLE', [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"].$freeze());\n        Opal.const_set($nesting[0], 'FAILED_CASTING_M_TABLE', [\"\", \"\", \"\", \"\", \"+2D1030\", \"\", \"\", \"\"].$freeze());\n        Opal.const_set($nesting[0], 'PHOBIAS_TABLE', [\"\", \"\", \"\", \"()\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"()\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"()\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"88\", \"\", \"\", \"1\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"1313\", \"\", \"\", \"\", \"\", \"\", \"\"].$freeze());\n        return Opal.const_set($nesting[0], 'MANIAS_TABLE', [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"()\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"/\", \"\", \"\", \"\", \"1\", \"\", \"\", \"\", \"\", \"\", \"\", \"1\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"].$freeze());\n      })($nesting[0], $$($nesting, 'Base'), $nesting)\n    })($nesting[0], $nesting)\n  })($nesting[0], $nesting);\n};\n\n/* Generated by Opal 1.1.1 */\n(function(Opal) {\n  function $rb_minus(lhs, rhs) {\n    return (typeof(lhs) === 'number' && typeof(rhs) === 'number') ? lhs - rhs : lhs['$-'](rhs);\n  }\n  var self = Opal.top, $nesting = [], nil = Opal.nil, $$$ = Opal.$$$, $$ = Opal.$$, $module = Opal.module, $klass = Opal.klass;\n\n  \n  self.$require(\"bcdice/game_system/Cthulhu7th\");\n  return (function($base, $parent_nesting) {\n    var self = $module($base, 'BCDice');\n\n    var $nesting = [self].concat($parent_nesting);\n\n    (function($base, $parent_nesting) {\n      var self = $module($base, 'GameSystem');\n\n      var $nesting = [self].concat($parent_nesting);\n\n      (function($base, $super, $parent_nesting) {\n        var self = $klass($base, $super, 'PulpCthulhu');\n\n        var $nesting = [self].concat($parent_nesting), $PulpCthulhu_eval_game_system_specific_command$1, $PulpCthulhu_roll_1d20_table$2, $PulpCthulhu_roll_bmr_table$3, $PulpCthulhu_roll_bms_table$4;\n\n        self.$$prototype.randomizer = nil;\n        \n        Opal.const_set($nesting[0], 'ID', \"PulpCthulhu\");\n        Opal.const_set($nesting[0], 'NAME', \"\");\n        Opal.const_set($nesting[0], 'SORT_KEY', \"\");\n        Opal.const_set($nesting[0], 'HELP_MESSAGE', \"\" + \"\\n\" + \"\\n\" + \"CC(x)<=\\n\" + \"x (22)\\n\" + \"1D100\\n\" + \"\\n\" + \" \\n\" + \"CC<=30CC(2)<=50CC(-1)<=75 CC-1<=50 CC1<=65 CC\\n\" + \"\\n\" + \"(CBR(x,y))\\n\" + \" x  y \\n\" + \"CBR(50,20)\\n\" + \"\\n\" + \"FAR(w,x,y,z,d)\\n\" + \"w(1100x1100y\\n\" + \"z(-22)\\n\" + \"dr,h,e\\n\" + \"\\n\" + \"FAR(25,70,98)FAR(50,80,98,-1)far(30,70,99,1,R)\\n\" + \"far(25,88,96,2,h)FaR(40,77,100,,e)\\n\" + \"\\n\" + \"\\n\" + \"\\n\" + \"Bouts of Madness Real TimeBMR\\n\" + \"Bouts of Madness SummaryBMS\\n\" + \"Sample PhobiasPHSample ManiasMA\\n\" + \"Insane TalentsIT\\n\" + \"\\n\" + \"Failed Casting EffectsFCE\\n\");\n        self.$register_prefix(\"CC\", \"CBR\", \"FAR\", \"BMR\", \"BMS\", \"FCE\", \"PH\", \"MA\", \"IT\");\n        \n        Opal.def(self, '$eval_game_system_specific_command', $PulpCthulhu_eval_game_system_specific_command$1 = function $$eval_game_system_specific_command(command) {\n          var self = this, $case = nil;\n\n          return (function() {$case = command;\n          if (/^CC/i['$===']($case)) {return self.$skill_roll(command)}\n          else if (/^CBR/i['$===']($case)) {return self.$combine_roll(command)}\n          else if (/^FAR/i['$===']($case)) {return self.$getFullAutoResult(command)}\n          else if (/^BMR/i['$===']($case)) {return self.$roll_bmr_table()}\n          else if (/^BMS/i['$===']($case)) {return self.$roll_bms_table()}\n          else if (/^FCE/i['$===']($case)) {return self.$roll_1d20_table(\"\", $$($nesting, 'FAILED_CASTING_EFFECTS_TABLE'))}\n          else if (/^PH/i['$===']($case)) {return self.$roll_1d100_table(\"\", $$($nesting, 'PHOBIAS_TABLE'))}\n          else if (/^MA/i['$===']($case)) {return self.$roll_1d100_table(\"\", $$($nesting, 'MANIAS_TABLE'))}\n          else if (/^IT/i['$===']($case)) {return self.$roll_1d20_table(\"\", $$($nesting, 'INSANE_TALENTS_TABLE'))}\n          else {return nil}})()\n        }, $PulpCthulhu_eval_game_system_specific_command$1.$$arity = 1);\n        self.$private();\n        \n        Opal.def(self, '$roll_1d20_table', $PulpCthulhu_roll_1d20_table$2 = function $$roll_1d20_table(table_name, table) {\n          var self = this, total_n = nil, index = nil, text = nil;\n\n          \n          total_n = self.randomizer.$roll_once(20);\n          index = $rb_minus(total_n, 1);\n          text = table['$[]'](index);\n          return \"\" + (table_name) + \"(\" + (total_n) + \")  \" + (text);\n        }, $PulpCthulhu_roll_1d20_table$2.$$arity = 2);\n        \n        Opal.def(self, '$roll_bmr_table', $PulpCthulhu_roll_bmr_table$3 = function $$roll_bmr_table() {\n          var self = this, total_n = nil, text = nil, time_n = nil;\n\n          \n          total_n = self.randomizer.$roll_once(10);\n          text = $$($nesting, 'MADNESS_REAL_TIME_TABLE')['$[]']($rb_minus(total_n, 1));\n          time_n = self.randomizer.$roll_once(10);\n          return \"\" + \"(\" + (total_n) + \")  \" + (text) + \"(1D10\" + (time_n) + \")\";\n        }, $PulpCthulhu_roll_bmr_table$3.$$arity = 0);\n        Opal.const_set($nesting[0], 'MADNESS_REAL_TIME_TABLE', [\"1D10\", \"1D10\", \"1D10\", \"1D10\", \"1D10\", \":11D10\", \"1D10\", \"1D10\", \"PH11D10\", \"MA11D10\"].$freeze());\n        \n        Opal.def(self, '$roll_bms_table', $PulpCthulhu_roll_bms_table$4 = function $$roll_bms_table() {\n          var self = this, total_n = nil, text = nil, time_n = nil;\n\n          \n          total_n = self.randomizer.$roll_once(10);\n          text = $$($nesting, 'MADNESS_SUMMARY_TABLE')['$[]']($rb_minus(total_n, 1));\n          time_n = self.randomizer.$roll_once(10);\n          return \"\" + \"(\" + (total_n) + \")  \" + (text) + \"(1D10\" + (time_n) + \")\";\n        }, $PulpCthulhu_roll_bms_table$4.$$arity = 0);\n        Opal.const_set($nesting[0], 'MADNESS_SUMMARY_TABLE', [\"1D10\", \"1D10\", \"1D10\", \"1D10\", \"\", \"1D10\", \"\", \"\", \"PH11D10\", \"MA1\"].$freeze());\n        Opal.const_set($nesting[0], 'FAILED_CASTING_EFFECTS_TABLE', [\"\", \"1D6/1\", \"\", \"0/1D3\", \"\", \"0/1D3\", \"\", \"0/1\", \"1D4/1\", \"\", \"\", \"1D2HPDEXDEX20\", \"1D6\", \"+2D10\", \"1/1D4\", \"1D10POW1D10\", \"\", \"2\", \"\", \"\"].$freeze());\n        return Opal.const_set($nesting[0], 'INSANE_TALENTS_TABLE', [\"1STR11D3+DB\", \"1DEX11D4\", \"1POW1\", \"CON1D3\", \"APP11\", \"EDU1111\", \"1CON1121D3\", \"1\", \"751D6\", \"111\", \"1\", \"1\", \"\", \"\", \"111D101\", \"111D101\", \"11\", \"22111\", \"1\", \"1\"].$freeze());\n      })($nesting[0], $$($nesting, 'Cthulhu7th'), $nesting)\n    })($nesting[0], $nesting)\n  })($nesting[0], $nesting);\n})(Opal);\n"],"sourceRoot":"webpack:///"}