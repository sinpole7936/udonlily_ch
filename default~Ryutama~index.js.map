{"version":3,"sources":["./node_modules/bcdice/lib/bcdice/game_system/Ryutama.js"],"names":["require","Opal","$rb_plus","lhs","rhs","$rb_divide","$rb_ge","$rb_gt","$rb_lt","self","top","$nesting","nil","$$$","$$","$module","module","$klass","klass","$send2","send2","$truthy","truthy","$base","$parent_nesting","concat","$super","$Ryutama_initialize$1","$Ryutama_eval_game_system_specific_command$2","$Ryutama_getDiceType$3","$Ryutama_isValidDice$4","$Ryutama_isValidDiceOne$5","$Ryutama_getDiffculty$6","$Ryutama_getRollValue$7","$Ryutama_getResultText$8","$Ryutama_isFamble$9","$Ryutama_isCritical$10","$Ryutama_getBaseText$11","$Ryutama_getModifyString$12","$$prototype","validDiceTypes","randomizer","const_set","$register_prefix","def","$$initialize","command","$iter","$$p","$yield","find_super_dispatcher","$$arity","$$eval_game_system_specific_command","$a","$b","dice1","dice2","modifyString","difficulty","$ret_or_1","modify","value1","value2","total","result","value1Text","value2Text","modifyText","baseText","output","$debug","$last_match","$to_i","$getDiceType","to_ary","$eval","$getDiffculty","$getRollValue","$getResultText","$getModifyString","$getBaseText","$$getDiceType","diceBase","$isValidDiceOne","$isValidDice","$$isValidDice","$ret_or_2","$$isValidDiceOne","dice","$$getDiffculty","$$getRollValue","value","$roll_once","$$getResultText","$isFamble","$isCritical","$$isFamble","$ret_or_3","$$isCritical","$ret_or_4","$ret_or_5","$$getBaseText","$$getModifyString","$to_s"],"mappings":";;;;;;;;;AAAAA,mBAAO,CAAC,uBAAD,CAAP;AAEA;;;AACA,CAAC,UAASC,IAAT,EAAe;AACd,WAASC,QAAT,CAAkBC,GAAlB,EAAuBC,GAAvB,EAA4B;AAC1B,WAAQ,OAAOD,GAAP,KAAgB,QAAhB,IAA4B,OAAOC,GAAP,KAAgB,QAA7C,GAAyDD,GAAG,GAAGC,GAA/D,GAAqED,GAAG,CAAC,IAAD,CAAH,CAAUC,GAAV,CAA5E;AACD;;AACD,WAASC,UAAT,CAAoBF,GAApB,EAAyBC,GAAzB,EAA8B;AAC5B,WAAQ,OAAOD,GAAP,KAAgB,QAAhB,IAA4B,OAAOC,GAAP,KAAgB,QAA7C,GAAyDD,GAAG,GAAGC,GAA/D,GAAqED,GAAG,CAAC,IAAD,CAAH,CAAUC,GAAV,CAA5E;AACD;;AACD,WAASE,MAAT,CAAgBH,GAAhB,EAAqBC,GAArB,EAA0B;AACxB,WAAQ,OAAOD,GAAP,KAAgB,QAAhB,IAA4B,OAAOC,GAAP,KAAgB,QAA7C,GAAyDD,GAAG,IAAIC,GAAhE,GAAsED,GAAG,CAAC,KAAD,CAAH,CAAWC,GAAX,CAA7E;AACD;;AACD,WAASG,MAAT,CAAgBJ,GAAhB,EAAqBC,GAArB,EAA0B;AACxB,WAAQ,OAAOD,GAAP,KAAgB,QAAhB,IAA4B,OAAOC,GAAP,KAAgB,QAA7C,GAAyDD,GAAG,GAAGC,GAA/D,GAAqED,GAAG,CAAC,IAAD,CAAH,CAAUC,GAAV,CAA5E;AACD;;AACD,WAASI,MAAT,CAAgBL,GAAhB,EAAqBC,GAArB,EAA0B;AACxB,WAAQ,OAAOD,GAAP,KAAgB,QAAhB,IAA4B,OAAOC,GAAP,KAAgB,QAA7C,GAAyDD,GAAG,GAAGC,GAA/D,GAAqED,GAAG,CAAC,IAAD,CAAH,CAAUC,GAAV,CAA5E;AACD;;AACD,MAAIK,IAAI,GAAGR,IAAI,CAACS,GAAhB;AAAA,MAAqBC,QAAQ,GAAG,EAAhC;AAAA,MAAoCC,GAAG,GAAGX,IAAI,CAACW,GAA/C;AAAA,MAAoDC,GAAG,GAAGZ,IAAI,CAACY,GAA/D;AAAA,MAAoEC,EAAE,GAAGb,IAAI,CAACa,EAA9E;AAAA,MAAkFC,OAAO,GAAGd,IAAI,CAACe,MAAjG;AAAA,MAAyGC,MAAM,GAAGhB,IAAI,CAACiB,KAAvH;AAAA,MAA8HC,MAAM,GAAGlB,IAAI,CAACmB,KAA5I;AAAA,MAAmJC,OAAO,GAAGpB,IAAI,CAACqB,MAAlK;AAEA,SAAQ,UAASC,KAAT,EAAgBC,eAAhB,EAAiC;AACvC,QAAIf,IAAI,GAAGM,OAAO,CAACQ,KAAD,EAAQ,QAAR,CAAlB;AAEA,QAAIZ,QAAQ,GAAG,CAACF,IAAD,EAAOgB,MAAP,CAAcD,eAAd,CAAf;;AAEA,KAAC,UAASD,KAAT,EAAgBC,eAAhB,EAAiC;AAChC,UAAIf,IAAI,GAAGM,OAAO,CAACQ,KAAD,EAAQ,YAAR,CAAlB;AAEA,UAAIZ,QAAQ,GAAG,CAACF,IAAD,EAAOgB,MAAP,CAAcD,eAAd,CAAf;;AAEA,OAAC,UAASD,KAAT,EAAgBG,MAAhB,EAAwBF,eAAxB,EAAyC;AACxC,YAAIf,IAAI,GAAGQ,MAAM,CAACM,KAAD,EAAQG,MAAR,EAAgB,SAAhB,CAAjB;AAEA,YAAIf,QAAQ,GAAG,CAACF,IAAD,EAAOgB,MAAP,CAAcD,eAAd,CAAf;AAAA,YAA+CG,qBAA/C;AAAA,YAAsEC,4CAAtE;AAAA,YAAoHC,sBAApH;AAAA,YAA4IC,sBAA5I;AAAA,YAAoKC,yBAApK;AAAA,YAA+LC,uBAA/L;AAAA,YAAwNC,uBAAxN;AAAA,YAAiPC,wBAAjP;AAAA,YAA2QC,mBAA3Q;AAAA,YAAgSC,sBAAhS;AAAA,YAAwTC,uBAAxT;AAAA,YAAiVC,2BAAjV;AAEA7B,YAAI,CAAC8B,WAAL,CAAiBC,cAAjB,GAAkC/B,IAAI,CAAC8B,WAAL,CAAiBE,UAAjB,GAA8B7B,GAAhE;AAEAX,YAAI,CAACyC,SAAL,CAAe/B,QAAQ,CAAC,CAAD,CAAvB,EAA4B,IAA5B,EAAkC,SAAlC;AACAV,YAAI,CAACyC,SAAL,CAAe/B,QAAQ,CAAC,CAAD,CAAvB,EAA4B,MAA5B,EAAoC,OAApC;AACAV,YAAI,CAACyC,SAAL,CAAe/B,QAAQ,CAAC,CAAD,CAAvB,EAA4B,UAA5B,EAAwC,OAAxC;AACAV,YAAI,CAACyC,SAAL,CAAe/B,QAAQ,CAAC,CAAD,CAAvB,EAA4B,cAA5B,EAA4C,KAAK,OAAL,GAAe,+BAAf,GAAiD,6BAAjD,GAAiF,2BAAjF,GAA+G,cAA3J;AACAF,YAAI,CAACkC,gBAAL,CAAsB,GAAtB;AAEA1C,YAAI,CAAC2C,GAAL,CAASnC,IAAT,EAAe,aAAf,EAA8BkB,qBAAqB,GAAG,SAASkB,YAAT,CAAsBC,OAAtB,EAA+B;AACnF,cAAIC,KAAK,GAAGpB,qBAAqB,CAACqB,GAAlC;AAAA,cAAuCC,MAAM,GAAGF,KAAK,IAAInC,GAAzD;AAAA,cAA8DH,IAAI,GAAG,IAArE;AAEA,cAAIsC,KAAJ,EAAWpB,qBAAqB,CAACqB,GAAtB,GAA4B,IAA5B;AAEX7B,gBAAM,CAACV,IAAD,EAAOR,IAAI,CAACiD,qBAAL,CAA2BzC,IAA3B,EAAiC,YAAjC,EAA+CkB,qBAA/C,EAAsE,KAAtE,EAA6E,IAA7E,CAAP,EAA2F,YAA3F,EAAyG,CAACmB,OAAD,CAAzG,EAAoH,IAApH,CAAN;AACA,iBAAQrC,IAAI,CAAC+B,cAAL,GAAsB,CAAC,EAAD,EAAK,EAAL,EAAS,EAAT,EAAa,CAAb,EAAgB,CAAhB,EAAmB,CAAnB,EAAsB,CAAtB,CAA9B;AACD,SAPD,EAOGb,qBAAqB,CAACwB,OAAtB,GAAgC,CAPnC;AASAlD,YAAI,CAAC2C,GAAL,CAASnC,IAAT,EAAe,oCAAf,EAAqDmB,4CAA4C,GAAG,SAASwB,mCAAT,CAA6CN,OAA7C,EAAsD;AACxJ,cAAIO,EAAJ;AAAA,cAAQC,EAAR;AAAA,cAAY7C,IAAI,GAAG,IAAnB;AAAA,cAAyB8C,KAAK,GAAG3C,GAAjC;AAAA,cAAsC4C,KAAK,GAAG5C,GAA9C;AAAA,cAAmD6C,YAAY,GAAG7C,GAAlE;AAAA,cAAuE8C,UAAU,GAAG9C,GAApF;AAAA,cAAyF+C,SAAS,GAAG/C,GAArG;AAAA,cAA0GgD,MAAM,GAAGhD,GAAnH;AAAA,cAAwHiD,MAAM,GAAGjD,GAAjI;AAAA,cAAsIkD,MAAM,GAAGlD,GAA/I;AAAA,cAAoJmD,KAAK,GAAGnD,GAA5J;AAAA,cAAiKoD,MAAM,GAAGpD,GAA1K;AAAA,cAA+KqD,UAAU,GAAGrD,GAA5L;AAAA,cAAiMsD,UAAU,GAAGtD,GAA9M;AAAA,cAAmNuD,UAAU,GAAGvD,GAAhO;AAAA,cAAqOwD,QAAQ,GAAGxD,GAAhP;AAAA,cAAqPyD,MAAM,GAAGzD,GAA9P;AAGAH,cAAI,CAAC6D,MAAL,CAAY,yCAAZ;;AACA,cAAIjD,OAAO,CAACyB,OAAO,CAAC,KAAD,CAAP,CAAe,uCAAf,CAAD,CAAX,EAAsE,CACrE,CADD,MACO;AAELrC,gBAAI,CAAC6D,MAAL,CAAY,YAAZ;AACA,mBAAO,EAAP;AACD;;AAAA;AACD7D,cAAI,CAAC6D,MAAL,CAAY,SAAZ;AACAf,eAAK,GAAGzC,EAAE,CAACH,QAAD,EAAW,QAAX,CAAF,CAAuB4D,WAAvB,CAAmC,CAAnC,EAAsCC,KAAtC,EAAR;AACAhB,eAAK,GAAG1C,EAAE,CAACH,QAAD,EAAW,QAAX,CAAF,CAAuB4D,WAAvB,CAAmC,CAAnC,EAAsCC,KAAtC,EAAR;AACAf,sBAAY,GAAG3C,EAAE,CAACH,QAAD,EAAW,QAAX,CAAF,CAAuB4D,WAAvB,CAAmC,CAAnC,CAAf;AACAb,oBAAU,GAAG5C,EAAE,CAACH,QAAD,EAAW,QAAX,CAAF,CAAuB4D,WAAvB,CAAmC,CAAnC,CAAb;AACAjB,YAAE,GAAG7C,IAAI,CAACgE,YAAL,CAAkBlB,KAAlB,EAAyBC,KAAzB,CAAL,EAAsCH,EAAE,GAAGpD,IAAI,CAACyE,MAAL,CAAYpB,EAAZ,CAA3C,EAA6DC,KAAK,GAAIF,EAAE,CAAC,CAAD,CAAF,IAAS,IAAT,GAAgBzC,GAAhB,GAAsByC,EAAE,CAAC,CAAD,CAA9F,EAAsGG,KAAK,GAAIH,EAAE,CAAC,CAAD,CAAF,IAAS,IAAT,GAAgBzC,GAAhB,GAAsByC,EAAE,CAAC,CAAD,CAAvI,EAA8IC,EAA9I;;AACA,cAAIC,KAAK,CAAC,KAAD,CAAL,CAAa,CAAb,CAAJ,EAAqB;AACnB,mBAAO,EAAP;AAAU;;AAAA;;AACZE,sBAAY,GAAI,YAAW;AAAC,gBAAIpC,OAAO,CAAEsC,SAAS,GAAGF,YAAd,CAAX,EAAyC;AACnE,qBAAOE,SAAP;AACD,aAF2B,MAErB;AACL,qBAAO,EAAP;AACD;;AAAA;AAAE,mBAAO/C,GAAP;AAAa,WAJD,EAAf;;AAKAgD,gBAAM,GAAG9C,EAAE,CAACH,QAAD,EAAW,qBAAX,CAAF,CAAoCgE,KAApC,CAA0ClB,YAA1C,CAAT;AACAC,oBAAU,GAAGjD,IAAI,CAACmE,aAAL,CAAmBlB,UAAnB,CAAb;AACAG,gBAAM,GAAGpD,IAAI,CAACoE,aAAL,CAAmBtB,KAAnB,CAAT;AACAO,gBAAM,GAAGrD,IAAI,CAACoE,aAAL,CAAmBrB,KAAnB,CAAT;AACAO,eAAK,GAAG7D,QAAQ,CAACA,QAAQ,CAAC2D,MAAD,EAASC,MAAT,CAAT,EAA2BF,MAA3B,CAAhB;AACAI,gBAAM,GAAGvD,IAAI,CAACqE,cAAL,CAAoBjB,MAApB,EAA4BC,MAA5B,EAAoCP,KAApC,EAA2CC,KAA3C,EAAkDE,UAAlD,EAA8DK,KAA9D,CAAT;;AACA,cAAI1C,OAAO,CAAC2C,MAAM,CAAC,SAAD,CAAN,EAAD,CAAX,EAAkC,CACjC,CADD,MACO;AACLA,kBAAM,GAAG,KAAK,KAAL,GAAcA,MAAvB;AACD;;AAAA;AACDC,oBAAU,GAAG,KAAMJ,MAAN,GAAgB,GAAhB,GAAuBN,KAAvB,GAAgC,GAA7C;;AACAW,oBAAU,GAAI,YAAW;AAAC,gBAAIJ,MAAM,CAAC,KAAD,CAAN,CAAc,CAAd,CAAJ,EAAsB;AAC9C,qBAAO,EAAP;AACD,aAFyB,MAEnB;AACL,qBAAO,KAAK,GAAL,GAAYA,MAAZ,GAAsB,GAAtB,GAA6BN,KAA7B,GAAsC,GAA7C;AACD;;AAAA;AAAE,mBAAO5C,GAAP;AAAa,WAJH,EAAb;;AAKAuD,oBAAU,GAAG1D,IAAI,CAACsE,gBAAL,CAAsBnB,MAAtB,CAAb;AACAQ,kBAAQ,GAAG3D,IAAI,CAACuE,YAAL,CAAkBzB,KAAlB,EAAyBC,KAAzB,EAAgCI,MAAhC,EAAwCF,UAAxC,CAAX;AACAW,gBAAM,GAAG,KAAK,GAAL,GAAYD,QAAZ,GAAwB,MAAxB,GAAkCH,UAAlC,GAAiDC,UAAjD,GAAgEC,UAAhE,GAA8E,KAA9E,GAAuFJ,KAAvF,GAAiGC,MAA1G;AACA,iBAAOK,MAAP;AACD,SA5CD,EA4CGzC,4CAA4C,CAACuB,OAA7C,GAAuD,CA5C1D;AA8CAlD,YAAI,CAAC2C,GAAL,CAASnC,IAAT,EAAe,cAAf,EAA+BoB,sBAAsB,GAAG,SAASoD,aAAT,CAAuB1B,KAAvB,EAA8BC,KAA9B,EAAqC;AAC3F,cAAI/C,IAAI,GAAG,IAAX;AAAA,cAAiByE,QAAQ,GAAGtE,GAA5B;AAGAH,cAAI,CAAC6D,MAAL,CAAY,mBAAZ;;AACA,cAAIjD,OAAO,CAACmC,KAAK,CAAC,KAAD,CAAL,CAAa,CAAb,CAAD,CAAX,EAA8B;AAC5B,gBAAInC,OAAO,CAACZ,IAAI,CAAC0E,eAAL,CAAqB5B,KAArB,CAAD,CAAX,EAA0C;AACxC,qBAAO,CAACA,KAAD,EAAQC,KAAR,CAAP;AACD,aAFD,MAEO;AACL,qBAAO,CAAC,CAAD,EAAI,CAAJ,CAAP;AACD;AAAC;;AAAA;;AACJ,cAAInC,OAAO,CAACZ,IAAI,CAAC2E,YAAL,CAAkB7B,KAAlB,EAAyBC,KAAzB,CAAD,CAAX,EAA8C;AAC5C,mBAAO,CAACD,KAAD,EAAQC,KAAR,CAAP;AAAsB;;AAAA;AACxB0B,kBAAQ,GAAG3B,KAAX;AACAA,eAAK,GAAGlD,UAAU,CAAC6E,QAAD,EAAW,EAAX,CAAV,CAAyBV,KAAzB,EAAR;AACAhB,eAAK,GAAG0B,QAAQ,CAAC,IAAD,CAAR,CAAe,EAAf,CAAR;;AACA,cAAI7D,OAAO,CAACZ,IAAI,CAAC2E,YAAL,CAAkB7B,KAAlB,EAAyBC,KAAzB,CAAD,CAAX,EAA8C;AAC5C,mBAAO,CAACD,KAAD,EAAQC,KAAR,CAAP;AAAsB;;AAAA;AACxBD,eAAK,GAAGlD,UAAU,CAAC6E,QAAD,EAAW,GAAX,CAAV,CAA0BV,KAA1B,EAAR;AACAhB,eAAK,GAAG0B,QAAQ,CAAC,IAAD,CAAR,CAAe,GAAf,CAAR;;AACA,cAAI7D,OAAO,CAACZ,IAAI,CAAC2E,YAAL,CAAkB7B,KAAlB,EAAyBC,KAAzB,CAAD,CAAX,EAA8C;AAC5C,mBAAO,CAACD,KAAD,EAAQC,KAAR,CAAP;AAAsB;;AAAA;;AACxB,cAAInC,OAAO,CAACZ,IAAI,CAAC0E,eAAL,CAAqBD,QAArB,CAAD,CAAX,EAA6C;AAC3C,mBAAO,CAACA,QAAD,EAAW,CAAX,CAAP;AAAqB;;AAAA;AACvB,iBAAO,CAAC,CAAD,EAAI,CAAJ,CAAP;AACD,SAzBD,EAyBGrD,sBAAsB,CAACsB,OAAvB,GAAiC,CAzBpC;AA2BAlD,YAAI,CAAC2C,GAAL,CAASnC,IAAT,EAAe,cAAf,EAA+BqB,sBAAsB,GAAG,SAASuD,aAAT,CAAuB9B,KAAvB,EAA8BC,KAA9B,EAAqC;AAC3F,cAAI/C,IAAI,GAAG,IAAX;AAAA,cAAiB6E,SAAS,GAAG1E,GAA7B;AAEA,iBAAQ,YAAW;AAAC,gBAAIS,OAAO,CAAEiE,SAAS,GAAG7E,IAAI,CAAC0E,eAAL,CAAqB5B,KAArB,CAAd,CAAX,EAAwD;AAC1E,qBAAO9C,IAAI,CAAC0E,eAAL,CAAqB3B,KAArB,CAAP;AACD,aAFmB,MAEb;AACL,qBAAO8B,SAAP;AACD;;AAAA;AAAE,mBAAO1E,GAAP;AAAa,WAJT,EAAP;AAKD,SARD,EAQGkB,sBAAsB,CAACqB,OAAvB,GAAiC,CARpC;AAUAlD,YAAI,CAAC2C,GAAL,CAASnC,IAAT,EAAe,iBAAf,EAAkCsB,yBAAyB,GAAG,SAASwD,gBAAT,CAA0BC,IAA1B,EAAgC;AAC5F,cAAI/E,IAAI,GAAG,IAAX;AAEA,iBAAOA,IAAI,CAAC+B,cAAL,CAAoB,WAApB,EAAiCgD,IAAjC,CAAP;AACD,SAJD,EAIGzD,yBAAyB,CAACoB,OAA1B,GAAoC,CAJvC;AAMAlD,YAAI,CAAC2C,GAAL,CAASnC,IAAT,EAAe,eAAf,EAAgCuB,uBAAuB,GAAG,SAASyD,cAAT,CAAwB/B,UAAxB,EAAoC;AAC5F,cAAIjD,IAAI,GAAG,IAAX;;AAGA,cAAIY,OAAO,CAACqC,UAAU,CAAC,OAAD,CAAV,EAAD,CAAX,EAAoC,CACnC,CADD,MACO;AACLA,sBAAU,GAAGA,UAAU,CAACc,KAAX,EAAb;AACD;;AAAA;AACD,iBAAOd,UAAP;AACD,SATD,EASG1B,uBAAuB,CAACmB,OAAxB,GAAkC,CATrC;AAWAlD,YAAI,CAAC2C,GAAL,CAASnC,IAAT,EAAe,eAAf,EAAgCwB,uBAAuB,GAAG,SAASyD,cAAT,CAAwBF,IAAxB,EAA8B;AACtF,cAAI/E,IAAI,GAAG,IAAX;AAAA,cAAiBkF,KAAK,GAAG/E,GAAzB;;AAGA,cAAI4E,IAAI,CAAC,KAAD,CAAJ,CAAY,CAAZ,CAAJ,EAAoB;AAClB,mBAAO,CAAP;AAAS;;AAAA;AACXG,eAAK,GAAGlF,IAAI,CAACgC,UAAL,CAAgBmD,UAAhB,CAA2BJ,IAA3B,CAAR;AACA,iBAAOG,KAAP;AACD,SARD,EAQG1D,uBAAuB,CAACkB,OAAxB,GAAkC,CARrC;AAUAlD,YAAI,CAAC2C,GAAL,CAASnC,IAAT,EAAe,gBAAf,EAAiCyB,wBAAwB,GAAG,SAAS2D,eAAT,CAAyBhC,MAAzB,EAAiCC,MAAjC,EAAyCP,KAAzC,EAAgDC,KAAhD,EAAuDE,UAAvD,EAAmEK,KAAnE,EAA0E;AACpI,cAAItD,IAAI,GAAG,IAAX;;AAGA,cAAIY,OAAO,CAACZ,IAAI,CAACqF,SAAL,CAAejC,MAAf,EAAuBC,MAAvB,CAAD,CAAX,EAA6C;AAC3C,mBAAO,gBAAP;AAAwB;;AAAA;;AAC1B,cAAIzC,OAAO,CAACZ,IAAI,CAACsF,WAAL,CAAiBlC,MAAjB,EAAyBC,MAAzB,EAAiCP,KAAjC,EAAwCC,KAAxC,CAAD,CAAX,EAA6D;AAC3D,mBAAO,UAAP;AAAkB;;AAAA;;AACpB,cAAInC,OAAO,CAACqC,UAAU,CAAC,OAAD,CAAV,EAAD,CAAX,EAAoC;AAClC,mBAAO,EAAP;AAAU;;AAAA;;AACZ,cAAIrC,OAAO,CAACf,MAAM,CAACyD,KAAD,EAAQL,UAAR,CAAP,CAAX,EAAwC;AACtC,mBAAO,IAAP;AAAY;;AAAA;AACd,iBAAO,IAAP;AACD,SAbD,EAaGxB,wBAAwB,CAACiB,OAAzB,GAAmC,CAbtC;AAeAlD,YAAI,CAAC2C,GAAL,CAASnC,IAAT,EAAe,WAAf,EAA4B0B,mBAAmB,GAAG,SAAS6D,UAAT,CAAoBnC,MAApB,EAA4BC,MAA5B,EAAoC;AACpF,cAAIrD,IAAI,GAAG,IAAX;AAAA,cAAiBwF,SAAS,GAAGrF,GAA7B;AAEA,iBAAQ,YAAW;AAAC,gBAAIS,OAAO,CAAE4E,SAAS,GAAGpC,MAAM,CAAC,KAAD,CAAN,CAAc,CAAd,CAAd,CAAX,EAA6C;AAE/D,qBAAOC,MAAM,CAAC,KAAD,CAAN,CAAc,CAAd,CAAP;AACD,aAHmB,MAGb;AACL,qBAAOmC,SAAP;AACD;;AAAA;AAAE,mBAAOrF,GAAP;AAAa,WALT,EAAP;AAMD,SATD,EASGuB,mBAAmB,CAACgB,OAApB,GAA8B,CATjC;AAWAlD,YAAI,CAAC2C,GAAL,CAASnC,IAAT,EAAe,aAAf,EAA8B2B,sBAAsB,GAAG,SAAS8D,YAAT,CAAsBrC,MAAtB,EAA8BC,MAA9B,EAAsCP,KAAtC,EAA6CC,KAA7C,EAAoD;AACzG,cAAI/C,IAAI,GAAG,IAAX;AAAA,cAAiB0F,SAAS,GAAGvF,GAA7B;AAAA,cAAkCwF,SAAS,GAAGxF,GAA9C;;AAGA,cAAIkD,MAAM,CAAC,KAAD,CAAN,CAAc,CAAd,CAAJ,EAAsB;AACpB,mBAAO,KAAP;AAAa;;AAAA;;AACf,cAAIzC,OAAO,CAAE,YAAW;AAAC,gBAAIA,OAAO,CAAE8E,SAAS,GAAGtC,MAAM,CAAC,KAAD,CAAN,CAAc,CAAd,CAAd,CAAX,EAA6C;AAEpE,qBAAOC,MAAM,CAAC,KAAD,CAAN,CAAc,CAAd,CAAP;AACD,aAHwB,MAGlB;AACL,qBAAOqC,SAAP;AACD;;AAAA;AAAE,mBAAOvF,GAAP;AAAa,WALJ,EAAD,CAAX,EAKsB;AACpB,mBAAO,IAAP;AAAY;;AAAA;;AACd,cAAIS,OAAO,CAAE,YAAW;AAAC,gBAAIA,OAAO,CAAE+E,SAAS,GAAGvC,MAAM,CAAC,KAAD,CAAN,CAAcN,KAAd,CAAd,CAAX,EAAiD;AAExE,qBAAOO,MAAM,CAAC,KAAD,CAAN,CAAcN,KAAd,CAAP;AACD,aAHwB,MAGlB;AACL,qBAAO4C,SAAP;AACD;;AAAA;AAAE,mBAAOxF,GAAP;AAAa,WALJ,EAAD,CAAX,EAKsB;AACpB,mBAAO,IAAP;AAAY;;AAAA;AACd,iBAAO,KAAP;AACD,SArBD,EAqBGwB,sBAAsB,CAACe,OAAvB,GAAiC,CArBpC;AAuBAlD,YAAI,CAAC2C,GAAL,CAASnC,IAAT,EAAe,cAAf,EAA+B4B,uBAAuB,GAAG,SAASgE,aAAT,CAAuB9C,KAAvB,EAA8BC,KAA9B,EAAqCI,MAArC,EAA6CF,UAA7C,EAAyD;AAChH,cAAIjD,IAAI,GAAG,IAAX;AAAA,cAAiB2D,QAAQ,GAAGxD,GAA5B;AAGAwD,kBAAQ,GAAG,KAAK,GAAL,GAAYb,KAAvB;;AACA,cAAIlC,OAAO,CAACmC,KAAK,CAAC,KAAD,CAAL,CAAa,CAAb,CAAD,CAAX,EAA8B;AAC5BY,oBAAQ,GAAGlE,QAAQ,CAACkE,QAAD,EAAW,KAAK,GAAL,GAAYZ,KAAvB,CAAnB;AAAkD;;AAAA;AACpDY,kBAAQ,GAAGlE,QAAQ,CAACkE,QAAD,EAAW3D,IAAI,CAACsE,gBAAL,CAAsBnB,MAAtB,CAAX,CAAnB;;AACA,cAAIvC,OAAO,CAACqC,UAAU,CAAC,OAAD,CAAV,EAAD,CAAX,EAAoC,CACnC,CADD,MACO;AACLU,oBAAQ,GAAGlE,QAAQ,CAACkE,QAAD,EAAW,KAAK,IAAL,GAAaV,UAAxB,CAAnB;AACD;;AAAA;AACD,iBAAOU,QAAP;AACD,SAbD,EAaG/B,uBAAuB,CAACc,OAAxB,GAAkC,CAbrC;AAcA,eAAO,CAAClD,IAAI,CAAC2C,GAAL,CAASnC,IAAT,EAAe,kBAAf,EAAmC6B,2BAA2B,GAAG,SAASgE,iBAAT,CAA2B1C,MAA3B,EAAmC;AAC1G,cAAInD,IAAI,GAAG,IAAX;;AAGA,cAAIY,OAAO,CAACd,MAAM,CAACqD,MAAD,EAAS,CAAT,CAAP,CAAX,EAAgC;AAC9B,mBAAO1D,QAAQ,CAAC,GAAD,EAAM0D,MAAM,CAAC2C,KAAP,EAAN,CAAf;AACD,WAFD,MAEO,IAAIlF,OAAO,CAACb,MAAM,CAACoD,MAAD,EAAS,CAAT,CAAP,CAAX,EAAgC;AACrC,mBAAOA,MAAM,CAAC2C,KAAP,EAAP;AAAsB;;AAAA;AACxB,iBAAO,EAAP;AACD,SATO,EASLjE,2BAA2B,CAACa,OAA5B,GAAsC,CATjC,GASqCvC,GATtC,KAS8C,iBATrD;AAUD,OA7MD,EA6MGD,QAAQ,CAAC,CAAD,CA7MX,EA6MgBG,EAAE,CAACH,QAAD,EAAW,MAAX,CA7MlB,EA6MsCA,QA7MtC;AA8MD,KAnND,EAmNGA,QAAQ,CAAC,CAAD,CAnNX,EAmNgBA,QAnNhB;AAoND,GAzNM,CAyNJA,QAAQ,CAAC,CAAD,CAzNJ,EAyNSA,QAzNT,CAAP;AA0ND,CA5OD,EA4OGV,IA5OH,E","file":"default~Ryutama~index.js","sourcesContent":["require('./../opal');\n\n/* Generated by Opal 1.1.1 */\n(function(Opal) {\n  function $rb_plus(lhs, rhs) {\n    return (typeof(lhs) === 'number' && typeof(rhs) === 'number') ? lhs + rhs : lhs['$+'](rhs);\n  }\n  function $rb_divide(lhs, rhs) {\n    return (typeof(lhs) === 'number' && typeof(rhs) === 'number') ? lhs / rhs : lhs['$/'](rhs);\n  }\n  function $rb_ge(lhs, rhs) {\n    return (typeof(lhs) === 'number' && typeof(rhs) === 'number') ? lhs >= rhs : lhs['$>='](rhs);\n  }\n  function $rb_gt(lhs, rhs) {\n    return (typeof(lhs) === 'number' && typeof(rhs) === 'number') ? lhs > rhs : lhs['$>'](rhs);\n  }\n  function $rb_lt(lhs, rhs) {\n    return (typeof(lhs) === 'number' && typeof(rhs) === 'number') ? lhs < rhs : lhs['$<'](rhs);\n  }\n  var self = Opal.top, $nesting = [], nil = Opal.nil, $$$ = Opal.$$$, $$ = Opal.$$, $module = Opal.module, $klass = Opal.klass, $send2 = Opal.send2, $truthy = Opal.truthy;\n\n  return (function($base, $parent_nesting) {\n    var self = $module($base, 'BCDice');\n\n    var $nesting = [self].concat($parent_nesting);\n\n    (function($base, $parent_nesting) {\n      var self = $module($base, 'GameSystem');\n\n      var $nesting = [self].concat($parent_nesting);\n\n      (function($base, $super, $parent_nesting) {\n        var self = $klass($base, $super, 'Ryutama');\n\n        var $nesting = [self].concat($parent_nesting), $Ryutama_initialize$1, $Ryutama_eval_game_system_specific_command$2, $Ryutama_getDiceType$3, $Ryutama_isValidDice$4, $Ryutama_isValidDiceOne$5, $Ryutama_getDiffculty$6, $Ryutama_getRollValue$7, $Ryutama_getResultText$8, $Ryutama_isFamble$9, $Ryutama_isCritical$10, $Ryutama_getBaseText$11, $Ryutama_getModifyString$12;\n\n        self.$$prototype.validDiceTypes = self.$$prototype.randomizer = nil;\n        \n        Opal.const_set($nesting[0], 'ID', \"Ryutama\");\n        Opal.const_set($nesting[0], 'NAME', \"りゅうたま\");\n        Opal.const_set($nesting[0], 'SORT_KEY', \"りゆうたま\");\n        Opal.const_set($nesting[0], 'HELP_MESSAGE', \"\" + \"・判定\\n\" + \"　Rx,y>=t（x,y：使用する能力値、t：目標値）\\n\" + \"　1ゾロ、クリティカルも含めて判定結果を表示します\\n\" + \"　能力値１つでの判定は Rx>=t で行えます\\n\" + \"例）R8,6>=13\\n\");\n        self.$register_prefix(\"R\");\n        \n        Opal.def(self, '$initialize', $Ryutama_initialize$1 = function $$initialize(command) {\n          var $iter = $Ryutama_initialize$1.$$p, $yield = $iter || nil, self = this;\n\n          if ($iter) $Ryutama_initialize$1.$$p = null;\n          \n          $send2(self, Opal.find_super_dispatcher(self, 'initialize', $Ryutama_initialize$1, false, true), 'initialize', [command], null);\n          return (self.validDiceTypes = [20, 12, 10, 8, 6, 4, 2]);\n        }, $Ryutama_initialize$1.$$arity = 1);\n        \n        Opal.def(self, '$eval_game_system_specific_command', $Ryutama_eval_game_system_specific_command$2 = function $$eval_game_system_specific_command(command) {\n          var $a, $b, self = this, dice1 = nil, dice2 = nil, modifyString = nil, difficulty = nil, $ret_or_1 = nil, modify = nil, value1 = nil, value2 = nil, total = nil, result = nil, value1Text = nil, value2Text = nil, modifyText = nil, baseText = nil, output = nil;\n\n          \n          self.$debug(\"eval_game_system_specific_command begin\");\n          if ($truthy(command['$=~'](/^R(\\d+)(,(\\d+))?([+\\-\\d]+)?(>=(\\d+))?/))) {\n          } else {\n            \n            self.$debug(\"unmatched!\");\n            return \"\";\n          };\n          self.$debug(\"matched\");\n          dice1 = $$($nesting, 'Regexp').$last_match(1).$to_i();\n          dice2 = $$($nesting, 'Regexp').$last_match(3).$to_i();\n          modifyString = $$($nesting, 'Regexp').$last_match(4);\n          difficulty = $$($nesting, 'Regexp').$last_match(6);\n          $b = self.$getDiceType(dice1, dice2), $a = Opal.to_ary($b), (dice1 = ($a[0] == null ? nil : $a[0])), (dice2 = ($a[1] == null ? nil : $a[1])), $b;\n          if (dice1['$=='](0)) {\n            return \"\"};\n          modifyString = (function() {if ($truthy(($ret_or_1 = modifyString))) {\n            return $ret_or_1\n          } else {\n            return \"\"\n          }; return nil; })();\n          modify = $$($nesting, 'ArithmeticEvaluator').$eval(modifyString);\n          difficulty = self.$getDiffculty(difficulty);\n          value1 = self.$getRollValue(dice1);\n          value2 = self.$getRollValue(dice2);\n          total = $rb_plus($rb_plus(value1, value2), modify);\n          result = self.$getResultText(value1, value2, dice1, dice2, difficulty, total);\n          if ($truthy(result['$empty?']())) {\n          } else {\n            result = \"\" + \" ＞ \" + (result)\n          };\n          value1Text = \"\" + (value1) + \"(\" + (dice1) + \")\";\n          value2Text = (function() {if (value2['$=='](0)) {\n            return \"\"\n          } else {\n            return \"\" + \"+\" + (value2) + \"(\" + (dice2) + \")\"\n          }; return nil; })();\n          modifyText = self.$getModifyString(modify);\n          baseText = self.$getBaseText(dice1, dice2, modify, difficulty);\n          output = \"\" + \"(\" + (baseText) + \") ＞ \" + (value1Text) + (value2Text) + (modifyText) + \" ＞ \" + (total) + (result);\n          return output;\n        }, $Ryutama_eval_game_system_specific_command$2.$$arity = 1);\n        \n        Opal.def(self, '$getDiceType', $Ryutama_getDiceType$3 = function $$getDiceType(dice1, dice2) {\n          var self = this, diceBase = nil;\n\n          \n          self.$debug(\"getDiceType begin\");\n          if ($truthy(dice2['$!='](0))) {\n            if ($truthy(self.$isValidDiceOne(dice1))) {\n              return [dice1, dice2]\n            } else {\n              return [0, 0]\n            }};\n          if ($truthy(self.$isValidDice(dice1, dice2))) {\n            return [dice1, dice2]};\n          diceBase = dice1;\n          dice1 = $rb_divide(diceBase, 10).$to_i();\n          dice2 = diceBase['$%'](10);\n          if ($truthy(self.$isValidDice(dice1, dice2))) {\n            return [dice1, dice2]};\n          dice1 = $rb_divide(diceBase, 100).$to_i();\n          dice2 = diceBase['$%'](100);\n          if ($truthy(self.$isValidDice(dice1, dice2))) {\n            return [dice1, dice2]};\n          if ($truthy(self.$isValidDiceOne(diceBase))) {\n            return [diceBase, 0]};\n          return [0, 0];\n        }, $Ryutama_getDiceType$3.$$arity = 2);\n        \n        Opal.def(self, '$isValidDice', $Ryutama_isValidDice$4 = function $$isValidDice(dice1, dice2) {\n          var self = this, $ret_or_2 = nil;\n\n          return (function() {if ($truthy(($ret_or_2 = self.$isValidDiceOne(dice1)))) {\n            return self.$isValidDiceOne(dice2)\n          } else {\n            return $ret_or_2\n          }; return nil; })()\n        }, $Ryutama_isValidDice$4.$$arity = 2);\n        \n        Opal.def(self, '$isValidDiceOne', $Ryutama_isValidDiceOne$5 = function $$isValidDiceOne(dice) {\n          var self = this;\n\n          return self.validDiceTypes['$include?'](dice)\n        }, $Ryutama_isValidDiceOne$5.$$arity = 1);\n        \n        Opal.def(self, '$getDiffculty', $Ryutama_getDiffculty$6 = function $$getDiffculty(difficulty) {\n          var self = this;\n\n          \n          if ($truthy(difficulty['$nil?']())) {\n          } else {\n            difficulty = difficulty.$to_i()\n          };\n          return difficulty;\n        }, $Ryutama_getDiffculty$6.$$arity = 1);\n        \n        Opal.def(self, '$getRollValue', $Ryutama_getRollValue$7 = function $$getRollValue(dice) {\n          var self = this, value = nil;\n\n          \n          if (dice['$=='](0)) {\n            return 0};\n          value = self.randomizer.$roll_once(dice);\n          return value;\n        }, $Ryutama_getRollValue$7.$$arity = 1);\n        \n        Opal.def(self, '$getResultText', $Ryutama_getResultText$8 = function $$getResultText(value1, value2, dice1, dice2, difficulty, total) {\n          var self = this;\n\n          \n          if ($truthy(self.$isFamble(value1, value2))) {\n            return \"１ゾロ【１ゾロポイント＋１】\"};\n          if ($truthy(self.$isCritical(value1, value2, dice1, dice2))) {\n            return \"クリティカル成功\"};\n          if ($truthy(difficulty['$nil?']())) {\n            return \"\"};\n          if ($truthy($rb_ge(total, difficulty))) {\n            return \"成功\"};\n          return \"失敗\";\n        }, $Ryutama_getResultText$8.$$arity = 6);\n        \n        Opal.def(self, '$isFamble', $Ryutama_isFamble$9 = function $$isFamble(value1, value2) {\n          var self = this, $ret_or_3 = nil;\n\n          return (function() {if ($truthy(($ret_or_3 = value1['$=='](1)))) {\n            \n            return value2['$=='](1);\n          } else {\n            return $ret_or_3\n          }; return nil; })()\n        }, $Ryutama_isFamble$9.$$arity = 2);\n        \n        Opal.def(self, '$isCritical', $Ryutama_isCritical$10 = function $$isCritical(value1, value2, dice1, dice2) {\n          var self = this, $ret_or_4 = nil, $ret_or_5 = nil;\n\n          \n          if (value2['$=='](0)) {\n            return false};\n          if ($truthy((function() {if ($truthy(($ret_or_4 = value1['$=='](6)))) {\n            \n            return value2['$=='](6);\n          } else {\n            return $ret_or_4\n          }; return nil; })())) {\n            return true};\n          if ($truthy((function() {if ($truthy(($ret_or_5 = value1['$=='](dice1)))) {\n            \n            return value2['$=='](dice2);\n          } else {\n            return $ret_or_5\n          }; return nil; })())) {\n            return true};\n          return false;\n        }, $Ryutama_isCritical$10.$$arity = 4);\n        \n        Opal.def(self, '$getBaseText', $Ryutama_getBaseText$11 = function $$getBaseText(dice1, dice2, modify, difficulty) {\n          var self = this, baseText = nil;\n\n          \n          baseText = \"\" + \"R\" + (dice1);\n          if ($truthy(dice2['$!='](0))) {\n            baseText = $rb_plus(baseText, \"\" + \",\" + (dice2))};\n          baseText = $rb_plus(baseText, self.$getModifyString(modify));\n          if ($truthy(difficulty['$nil?']())) {\n          } else {\n            baseText = $rb_plus(baseText, \"\" + \">=\" + (difficulty))\n          };\n          return baseText;\n        }, $Ryutama_getBaseText$11.$$arity = 4);\n        return (Opal.def(self, '$getModifyString', $Ryutama_getModifyString$12 = function $$getModifyString(modify) {\n          var self = this;\n\n          \n          if ($truthy($rb_gt(modify, 0))) {\n            return $rb_plus(\"+\", modify.$to_s())\n          } else if ($truthy($rb_lt(modify, 0))) {\n            return modify.$to_s()};\n          return \"\";\n        }, $Ryutama_getModifyString$12.$$arity = 1), nil) && 'getModifyString';\n      })($nesting[0], $$($nesting, 'Base'), $nesting)\n    })($nesting[0], $nesting)\n  })($nesting[0], $nesting)\n})(Opal);\n"],"sourceRoot":"webpack:///"}