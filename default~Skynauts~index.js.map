{"version":3,"sources":["./node_modules/bcdice/lib/bcdice/game_system/Skynauts.js"],"names":["require","Opal","$rb_le","lhs","rhs","$rb_divide","$rb_plus","$rb_minus","self","top","$nesting","nil","$$$","$$","$module","module","$klass","klass","$send2","send2","$truthy","truthy","$hash","hash","$hash2","hash2","$send","send","$base","$parent_nesting","concat","$super","$Skynauts_initialize$1","$Skynauts_eval_game_system_specific_command$2","$Skynauts_getJudgeResult$3","$Skynauts_navigationResult$4","$Skynauts_getDirectionInfo$5","$Skynauts_getFireResult$6","$Skynauts_getFirePoint$7","$Skynauts_getFirePointText$10","$Skynauts_isInMapPosition$13","$Skynauts_getMovePoint$14","$Skynauts_getBomberResult$15","$Skynauts_getAvoidResult$16","$Skynauts_scanFirePoints$17","$$prototype","randomizer","const_set","$register_prefix","def","$$initialize","command","$iter","$$p","$yield","find_super_dispatcher","round_type","$$arity","$$eval_game_system_specific_command","result","$debug","$getJudgeResult","$navigationResult","$getFireResult","$getBomberResult","$getAvoidResult","$$getJudgeResult","m","$ret_or_1","target","dice_list","total","diceText","text","$match","$to_i","$roll_barabara","$sum","$join","$$navigationResult","bonus","movePointBase","movePoint","$roll_once","$freeze","$$getDirectionInfo","direction","key","defaultValue","info","$$getFireResult","fireCount","fireRange","ballistics","fireCountMax","firePoint","fireText","$to_s","$min","$getFirePoint","$getFirePointText","$getDirectionInfo","$$getFirePoint","$$8","count","$$s","$$9","yPos","xPos","position","$roll_sum","$split","rangeText","position_diff","$$getFirePointText","_fireCount","$$11","fireTextList","point","$$12","x","y","$a","$b","$getMovePoint","to_ary","$isInMapPosition","$$isInMapPosition","$ret_or_2","$ret_or_3","$ret_or_4","$$getMovePoint","$$getBomberResult","fireCommand","$slice","$$getAvoidResult","judgeCommand","pointCommand","$last_match","$scanFirePoints","$size","$$scanFirePoints","$$18","$gsub","pointText","$$19","$writer","to_a"],"mappings":"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","file":"default~Skynauts~index.js","sourcesContent":["require('./../opal');\n\n/* Generated by Opal 1.1.1 */\n(function(Opal) {\n  function $rb_le(lhs, rhs) {\n    return (typeof(lhs) === 'number' && typeof(rhs) === 'number') ? lhs <= rhs : lhs['$<='](rhs);\n  }\n  function $rb_divide(lhs, rhs) {\n    return (typeof(lhs) === 'number' && typeof(rhs) === 'number') ? lhs / rhs : lhs['$/'](rhs);\n  }\n  function $rb_plus(lhs, rhs) {\n    return (typeof(lhs) === 'number' && typeof(rhs) === 'number') ? lhs + rhs : lhs['$+'](rhs);\n  }\n  function $rb_minus(lhs, rhs) {\n    return (typeof(lhs) === 'number' && typeof(rhs) === 'number') ? lhs - rhs : lhs['$-'](rhs);\n  }\n  var self = Opal.top, $nesting = [], nil = Opal.nil, $$$ = Opal.$$$, $$ = Opal.$$, $module = Opal.module, $klass = Opal.klass, $send2 = Opal.send2, $truthy = Opal.truthy, $hash = Opal.hash, $hash2 = Opal.hash2, $send = Opal.send;\n\n  return (function($base, $parent_nesting) {\n    var self = $module($base, 'BCDice');\n\n    var $nesting = [self].concat($parent_nesting);\n\n    (function($base, $parent_nesting) {\n      var self = $module($base, 'GameSystem');\n\n      var $nesting = [self].concat($parent_nesting);\n\n      (function($base, $super, $parent_nesting) {\n        var self = $klass($base, $super, 'Skynauts');\n\n        var $nesting = [self].concat($parent_nesting), $Skynauts_initialize$1, $Skynauts_eval_game_system_specific_command$2, $Skynauts_getJudgeResult$3, $Skynauts_navigationResult$4, $Skynauts_getDirectionInfo$5, $Skynauts_getFireResult$6, $Skynauts_getFirePoint$7, $Skynauts_getFirePointText$10, $Skynauts_isInMapPosition$13, $Skynauts_getMovePoint$14, $Skynauts_getBomberResult$15, $Skynauts_getAvoidResult$16, $Skynauts_scanFirePoints$17;\n\n        self.$$prototype.randomizer = nil;\n        \n        Opal.const_set($nesting[0], 'ID', \"Skynauts\");\n        Opal.const_set($nesting[0], 'NAME', \"歯車の塔の探空士（六畳間幻想空間）\");\n        Opal.const_set($nesting[0], 'SORT_KEY', \"はくるまのとうのすかいのおつ\");\n        Opal.const_set($nesting[0], 'HELP_MESSAGE', \"\" + \"◆判定　(SNn)、(2D6<=n)　n:目標値（省略時:7）\\n\" + \"　例）SN5　SN5　SN(3+2)\\n\" + \"◆航行チェック　(NV+n)　n:修正値（省略時:0）\\n\" + \"　例）NV　NV+1\\n\" + \"◆ダメージチェック　(Dx/y@m)　x:ダメージ左側の値、y:ダメージ右側の値\\n\" + \"　m:《弾道学》（省略可）上:8、下:2、左:4、右:6\\n\" + \"　飛空艇シート外の座標は()が付きます。\\n\" + \"　例） D/4　D19/2　D/3@8　D[大揺れ]/2\\n\" + \"◆砲撃判定+ダメージチェック　(BOMn/Dx/y@m)　n:目標値（省略時:7）\\n\" + \"　x:ダメージ左側の値、y:ダメージ右側の値\\n\" + \"　m:《弾道学》（省略可）上:8、下:2、左:4、右:6\\n\" + \"　例） BOM/D/4　BOM9/D19/2@4\\n\" + \"◆《回避運動》　(AVOn@mXX)　n:目標値（省略時:7）\\n\" + \"　m:回避方向。上:8、下:2、左:4、右:6、XX：ダメージチェック結果\\n\" + \"　例）\\n\" + \"　AVO9@8[縦1,横4],[縦2,横6],[縦3,横8]　AVO@2[縦6,横4],[縦2,横6]\\n\");\n        self.$register_prefix(\"D\", \"2D6<=\", \"SN\", \"NV\", \"AVO\", \"BOM\");\n        \n        Opal.def(self, '$initialize', $Skynauts_initialize$1 = function $$initialize(command) {\n          var $iter = $Skynauts_initialize$1.$$p, $yield = $iter || nil, self = this;\n\n          if ($iter) $Skynauts_initialize$1.$$p = null;\n          \n          $send2(self, Opal.find_super_dispatcher(self, 'initialize', $Skynauts_initialize$1, false, true), 'initialize', [command], null);\n          return (self.round_type = $$$($$($nesting, 'RoundType'), 'FLOOR'));\n        }, $Skynauts_initialize$1.$$arity = 1);\n        \n        Opal.def(self, '$eval_game_system_specific_command', $Skynauts_eval_game_system_specific_command$2 = function $$eval_game_system_specific_command(command) {\n          var self = this, result = nil;\n\n          \n          self.$debug(\"\\n=======================================\\n\");\n          self.$debug(\"eval_game_system_specific_command command\", command);\n          result = self.$getJudgeResult(command);\n          if ($truthy(result['$nil?']())) {\n          } else {\n            return result\n          };\n          result = self.$navigationResult(command);\n          if ($truthy(result['$nil?']())) {\n          } else {\n            return result\n          };\n          result = self.$getFireResult(command);\n          if ($truthy(result['$nil?']())) {\n          } else {\n            return result\n          };\n          result = self.$getBomberResult(command);\n          if ($truthy(result['$nil?']())) {\n          } else {\n            return result\n          };\n          result = self.$getAvoidResult(command);\n          if ($truthy(result['$nil?']())) {\n          } else {\n            return result\n          };\n          self.$debug(\"rollCommand result\");\n          return nil;\n        }, $Skynauts_eval_game_system_specific_command$2.$$arity = 1);\n        \n        Opal.def(self, '$getJudgeResult', $Skynauts_getJudgeResult$3 = function $$getJudgeResult(command) {\n          var self = this, m = nil, $ret_or_1 = nil, target = nil, dice_list = nil, total = nil, diceText = nil, result = nil, text = nil;\n\n          \n          if ($truthy((m = (function() {if ($truthy(($ret_or_1 = /^2D6<=(\\d)$/i.$match(command)))) {\n            return $ret_or_1\n          } else {\n            return /^SN(\\d*)$/i.$match(command)\n          }; return nil; })()))) {\n          } else {\n            return nil\n          };\n          self.$debug(\"====getJudgeResult====\");\n          target = (function() {if ($truthy(m['$[]'](1)['$empty?']())) {\n            return 7\n          } else {\n            return m['$[]'](1).$to_i()\n          }; return nil; })();\n          self.$debug(\"目標値\", target);\n          dice_list = self.randomizer.$roll_barabara(2, 6);\n          total = dice_list.$sum();\n          diceText = dice_list.$join(\",\");\n          if ($truthy($rb_le(total, 2))) {\n            result = \"ファンブル\"\n          } else if ($truthy($rb_le(total, target))) {\n            result = \"成功\"\n          } else {\n            result = \"失敗\"\n          };\n          text = \"\" + \"(2D6<=\" + (target) + \") ＞ \" + (total) + \"[\" + (diceText) + \"] ＞ \" + (total) + \" ＞ \" + (result);\n          return text;\n        }, $Skynauts_getJudgeResult$3.$$arity = 1);\n        \n        Opal.def(self, '$navigationResult', $Skynauts_navigationResult$4 = function $$navigationResult(command) {\n          var self = this, m = nil, bonus = nil, total = nil, movePointBase = nil, movePoint = nil, text = nil;\n\n          \n          if ($truthy((m = /^NV(\\+(\\d+))?$/.$match(command)))) {\n          } else {\n            return nil\n          };\n          self.$debug(\"====navigationResult====\");\n          bonus = m['$[]'](2).$to_i();\n          self.$debug(\"移動修正\", bonus);\n          total = self.randomizer.$roll_once(6);\n          movePointBase = (function() {if ($truthy($rb_le($rb_divide(total, 2).$to_i(), 0))) {\n            return 1\n          } else {\n            return $rb_divide(total, 2).$to_i()\n          }; return nil; })();\n          movePoint = $rb_plus(movePointBase, bonus);\n          self.$debug(\"移動エリア数\", movePoint);\n          text = \"\" + \"航行チェック(最低1)　(1D6/2+\" + (bonus) + \") ＞ \" + (total) + \" /2+\" + (bonus) + \" ＞ \";\n          text = $rb_plus(text, \"\" + (movePointBase) + \"+\" + (bonus) + \" ＞ \" + (movePoint) + \"エリア進む\");\n          return text;\n        }, $Skynauts_navigationResult$4.$$arity = 1);\n        Opal.const_set($nesting[0], 'DIRECTION_INFOS', $hash(1, $hash2([\"name\", \"position_diff\"], {\"name\": \"左下\", \"position_diff\": $hash2([\"x\", \"y\"], {\"x\": -1, \"y\": 1})}), 2, $hash2([\"name\", \"position_diff\"], {\"name\": \"下\", \"position_diff\": $hash2([\"x\", \"y\"], {\"x\": 0, \"y\": 1})}), 3, $hash2([\"name\", \"position_diff\"], {\"name\": \"右下\", \"position_diff\": $hash2([\"x\", \"y\"], {\"x\": 1, \"y\": 1})}), 4, $hash2([\"name\", \"position_diff\"], {\"name\": \"左\", \"position_diff\": $hash2([\"x\", \"y\"], {\"x\": -1, \"y\": 0})}), 6, $hash2([\"name\", \"position_diff\"], {\"name\": \"右\", \"position_diff\": $hash2([\"x\", \"y\"], {\"x\": 1, \"y\": 0})}), 7, $hash2([\"name\", \"position_diff\"], {\"name\": \"左上\", \"position_diff\": $hash2([\"x\", \"y\"], {\"x\": -1, \"y\": -1})}), 8, $hash2([\"name\", \"position_diff\"], {\"name\": \"上\", \"position_diff\": $hash2([\"x\", \"y\"], {\"x\": 0, \"y\": -1})}), 9, $hash2([\"name\", \"position_diff\"], {\"name\": \"右上\", \"position_diff\": $hash2([\"x\", \"y\"], {\"x\": 1, \"y\": -1})})).$freeze());\n        \n        Opal.def(self, '$getDirectionInfo', $Skynauts_getDirectionInfo$5 = function $$getDirectionInfo(direction, key, defaultValue) {\n          var self = this, info = nil;\n\n          \n          \n          if (defaultValue == null) {\n            defaultValue = nil;\n          };\n          info = $$($nesting, 'DIRECTION_INFOS')['$[]'](direction.$to_i());\n          if ($truthy(info['$nil?']())) {\n            return defaultValue};\n          return info['$[]'](key);\n        }, $Skynauts_getDirectionInfo$5.$$arity = -3);\n        \n        Opal.def(self, '$getFireResult', $Skynauts_getFireResult$6 = function $$getFireResult(command) {\n          var self = this, m = nil, fireCount = nil, fireRange = nil, ballistics = nil, fireCountMax = nil, firePoint = nil, fireText = nil, text = nil;\n\n          \n          if ($truthy((m = /^D([12346789]*)(\\[.+\\])*\\/(\\d+)(@([2468]))?$/.$match(command)))) {\n          } else {\n            return nil\n          };\n          self.$debug(\"====getFireResult====\");\n          fireCount = m['$[]'](3).$to_i();\n          fireRange = m['$[]'](1).$to_s();\n          ballistics = m['$[]'](5).$to_i();\n          self.$debug(\"fireCount\", fireCount);\n          self.$debug(\"fireRange\", fireRange);\n          self.$debug(\"ballistics\", ballistics);\n          fireCountMax = 25;\n          fireCount = [fireCount, fireCountMax].$min();\n          firePoint = self.$getFirePoint(fireRange, fireCount);\n          fireText = self.$getFirePointText(firePoint, fireCount);\n          if ($truthy(ballistics['$!='](0))) {\n            \n            fireText = $rb_plus(fireText, \" ＞ 《弾道学》:\");\n            fireText = $rb_plus(fireText, self.$getDirectionInfo(ballistics, \"name\", \"\"));\n            fireText = $rb_plus(fireText, \"\\n ＞ \");\n            fireText = $rb_plus(fireText, self.$getFirePointText(firePoint, fireCount, ballistics));};\n          text = \"\" + (command) + \" ＞ \" + (fireText);\n          return text;\n        }, $Skynauts_getFireResult$6.$$arity = 1);\n        \n        Opal.def(self, '$getFirePoint', $Skynauts_getFirePoint$7 = function $$getFirePoint(fireRange, fireCount) {\n          var $$8, self = this, firePoint = nil;\n\n          \n          self.$debug(\"====getFirePoint====\");\n          firePoint = [];\n          $send(fireCount, 'times', [], ($$8 = function(count){var self = $$8.$$s == null ? this : $$8.$$s, $$9, yPos = nil, xPos = nil, position = nil;\n            if (self.randomizer == null) self.randomizer = nil;\n\n          \n            \n            if (count == null) {\n              count = nil;\n            };\n            self.$debug(\"\\n砲撃回数\", $rb_plus(count, 1));\n            firePoint['$<<']([]);\n            yPos = self.randomizer.$roll_once(6);\n            xPos = self.randomizer.$roll_sum(2, 6);\n            position = [xPos, yPos];\n            firePoint['$[]'](-1)['$<<'](position);\n            self.$debug(\"着弾点\", firePoint);\n            return $send(fireRange.$split(/(?:)/), 'each', [], ($$9 = function(rangeText){var self = $$9.$$s == null ? this : $$9.$$s, position_diff = nil;\n\n            \n              \n              if (rangeText == null) {\n                rangeText = nil;\n              };\n              self.$debug(\"範囲\", rangeText);\n              position_diff = self.$getDirectionInfo(rangeText, \"position_diff\", $hash2([], {}));\n              position = [$rb_plus(xPos, position_diff['$[]'](\"x\").$to_i()), $rb_plus(yPos, position_diff['$[]'](\"y\").$to_i())];\n              firePoint['$[]'](-1)['$<<'](position);\n              return self.$debug(\"着弾点:範囲\", firePoint);}, $$9.$$s = self, $$9.$$arity = 1, $$9));}, $$8.$$s = self, $$8.$$arity = 1, $$8));\n          self.$debug(\"\\n最終着弾点\", firePoint);\n          return firePoint;\n        }, $Skynauts_getFirePoint$7.$$arity = 2);\n        \n        Opal.def(self, '$getFirePointText', $Skynauts_getFirePointText$10 = function $$getFirePointText(firePoint, _fireCount, direction) {\n          var $$11, self = this, fireTextList = nil, fireText = nil;\n\n          \n          \n          if (direction == null) {\n            direction = 0;\n          };\n          self.$debug(\"====getFirePointText====\");\n          fireTextList = [];\n          $send(firePoint, 'each', [], ($$11 = function(point){var self = $$11.$$s == null ? this : $$11.$$s, $$12, text = nil;\n\n          \n            \n            if (point == null) {\n              point = nil;\n            };\n            text = \"\";\n            $send(point, 'each', [], ($$12 = function(x, y){var self = $$12.$$s == null ? this : $$12.$$s, $a, $b;\n\n            \n              \n              if (x == null) {\n                x = nil;\n              };\n              \n              if (y == null) {\n                y = nil;\n              };\n              $b = self.$getMovePoint(x, y, direction), $a = Opal.to_ary($b), (x = ($a[0] == null ? nil : $a[0])), (y = ($a[1] == null ? nil : $a[1])), $b;\n              text = $rb_plus(text, (function() {if ($truthy(self.$isInMapPosition(x, y))) {\n                return \"\" + \"[縦\" + (y) + \",横\" + (x) + \"]\"\n              } else {\n                return \"\" + \"([縦\" + (y) + \",横\" + (x) + \"])\"\n              }; return nil; })());\n              return self.$debug(\"着弾点テキスト\", text);}, $$12.$$s = self, $$12.$$arity = 2, $$12));\n            return fireTextList['$<<'](text);}, $$11.$$s = self, $$11.$$arity = 1, $$11));\n          fireText = fireTextList.$join(\",\");\n          self.$debug(\"\\n最終着弾点テキスト\", fireText);\n          return fireText;\n        }, $Skynauts_getFirePointText$10.$$arity = -3);\n        \n        Opal.def(self, '$isInMapPosition', $Skynauts_isInMapPosition$13 = function $$isInMapPosition(x, y) {\n          var self = this, $ret_or_2 = nil, $ret_or_3 = nil, $ret_or_4 = nil;\n\n          if ($truthy(($ret_or_2 = (function() {if ($truthy(($ret_or_3 = $rb_le(1, y)))) {\n            \n            return $rb_le(y, 6);\n          } else {\n            return $ret_or_3\n          }; return nil; })()))) {\n            \n            if ($truthy(($ret_or_4 = $rb_le(2, x)))) {\n              \n              return $rb_le(x, 12);\n            } else {\n              return $ret_or_4\n            };\n          } else {\n            return $ret_or_2\n          }\n        }, $Skynauts_isInMapPosition$13.$$arity = 2);\n        \n        Opal.def(self, '$getMovePoint', $Skynauts_getMovePoint$14 = function $$getMovePoint(x, y, direction) {\n          var self = this, position_diff = nil;\n\n          \n          self.$debug(\"====getMovePoint====\");\n          self.$debug(\"方向\", direction);\n          self.$debug(\"座標移動前x\", x);\n          self.$debug(\"座標移動前y\", y);\n          position_diff = self.$getDirectionInfo(direction, \"position_diff\", $hash2([], {}));\n          x = $rb_plus(x, position_diff['$[]'](\"x\").$to_i());\n          y = $rb_plus(y, position_diff['$[]'](\"y\").$to_i());\n          self.$debug(\"\\n座標移動後x\", x);\n          self.$debug(\"座標移動後y\", y);\n          return [x, y];\n        }, $Skynauts_getMovePoint$14.$$arity = 3);\n        \n        Opal.def(self, '$getBomberResult', $Skynauts_getBomberResult$15 = function $$getBomberResult(command) {\n          var self = this, m = nil, target = nil, direction = nil, text = nil, fireCommand = nil;\n\n          \n          if ($truthy((m = /^BOM(\\d*)?\\/D([12346789]*)(\\[.+\\])*\\/(\\d+)(@([2468]))?$/i.$match(command)))) {\n          } else {\n            return nil\n          };\n          self.$debug(\"====getBomberResult====\", command);\n          target = m['$[]'](1).$to_s();\n          direction = m['$[]'](6).$to_i();\n          self.$debug(\"弾道学方向\", direction);\n          text = \"\" + (command) + \" ＞ \";\n          text = $rb_plus(text, self.$getJudgeResult($rb_plus(\"SN\", target)));\n          if ($truthy(text['$=~'](/成功/))) {\n          } else {\n            return text\n          };\n          fireCommand = command.$slice(/D([12346789]*)(\\[.+\\])*\\/(\\d+)(@([2468]))?/);\n          text = $rb_plus(text, \"\" + \"\\n ＞ \" + (self.$getFireResult(fireCommand)));\n          return text;\n        }, $Skynauts_getBomberResult$15.$$arity = 1);\n        \n        Opal.def(self, '$getAvoidResult', $Skynauts_getAvoidResult$16 = function $$getAvoidResult(command) {\n          var self = this, m = nil, direction = nil, judgeCommand = nil, text = nil, pointCommand = nil, firePoint = nil, fireCount = nil;\n\n          \n          if ($truthy((m = /^AVO(\\d*)?(@([2468]))(\\(?\\[縦\\d+,横\\d+\\]\\)?,?)+$/.$match(command)))) {\n          } else {\n            return nil\n          };\n          self.$debug(\"====getAvoidResult====\", command);\n          direction = m['$[]'](3).$to_i();\n          self.$debug(\"回避方向\", direction);\n          judgeCommand = command.$slice(/^AVO(\\d*)?(@([2468]))/);\n          text = \"\" + (judgeCommand) + \" ＞ 《回避運動》\";\n          text = $rb_plus(text, self.$getJudgeResult($rb_plus(\"SN\", $$($nesting, 'Regexp').$last_match(1).$to_s())));\n          if ($truthy(text['$=~'](/成功/))) {\n          } else {\n            return text\n          };\n          pointCommand = command.$slice(/(\\(?\\[縦\\d+,横\\d+\\]\\)?,?)+/);\n          firePoint = self.$scanFirePoints(pointCommand);\n          fireCount = firePoint.$size();\n          text = $rb_plus(text, \"\" + \"\\n ＞ \" + (pointCommand));\n          text = $rb_plus(text, \" ＞ 《回避運動》:\");\n          text = $rb_plus(text, self.$getDirectionInfo(direction, \"name\", \"\"));\n          text = $rb_plus(text, \"\\n ＞ \");\n          text = $rb_plus(text, self.$getFirePointText(firePoint, fireCount, direction));\n          return text;\n        }, $Skynauts_getAvoidResult$16.$$arity = 1);\n        return (Opal.def(self, '$scanFirePoints', $Skynauts_scanFirePoints$17 = function $$scanFirePoints(command) {\n          var $$18, self = this, firePoint = nil;\n\n          \n          self.$debug(\"====scanFirePoints====\", command);\n          command = command.$gsub(/\\(|\\)/, \"\");\n          firePoint = [];\n          $send(command.$split(/\\],/), 'each', [], ($$18 = function(pointText){var self = $$18.$$s == null ? this : $$18.$$s, $$19;\n\n          \n            \n            if (pointText == null) {\n              pointText = nil;\n            };\n            self.$debug(\"pointText\", pointText);\n            firePoint['$<<']([]);\n            return $send(pointText.$split(/\\]/), 'each', [], ($$19 = function(point){var self = $$19.$$s == null ? this : $$19.$$s, y = nil, x = nil, $writer = nil;\n\n            \n              \n              if (point == null) {\n                point = nil;\n              };\n              self.$debug(\"point\", point);\n              firePoint['$[]'](-1)['$<<']([]);\n              if ($truthy(point['$=~'](/[^\\d]*(\\d+),[^\\d]*(\\d+)/))) {\n              } else {\n                return nil;\n              };\n              y = $$($nesting, 'Regexp').$last_match(1).$to_i();\n              x = $$($nesting, 'Regexp').$last_match(2).$to_i();\n              \n              $writer = [-1, [x, y]];\n              $send(firePoint['$[]'](-1), '[]=', Opal.to_a($writer));\n              $writer[$rb_minus($writer[\"length\"], 1)];;\n              return self.$debug(\"着弾点\", firePoint);}, $$19.$$s = self, $$19.$$arity = 1, $$19));}, $$18.$$s = self, $$18.$$arity = 1, $$18));\n          return firePoint;\n        }, $Skynauts_scanFirePoints$17.$$arity = 1), nil) && 'scanFirePoints';\n      })($nesting[0], $$($nesting, 'Base'), $nesting)\n    })($nesting[0], $nesting)\n  })($nesting[0], $nesting)\n})(Opal);\n"],"sourceRoot":"webpack:///"}