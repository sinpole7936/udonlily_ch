{"version":3,"sources":["./node_modules/bcdice/lib/bcdice/game_system/Strave.js"],"names":["require","Opal","$rb_lt","lhs","rhs","$rb_gt","$rb_le","$rb_times","$rb_plus","$rb_divide","$rb_minus","self","top","$nesting","nil","$$$","$$","$module","module","$klass","klass","$send2","send2","$truthy","truthy","$send","send","$base","$parent_nesting","concat","$super","$Strave_initialize$1","$Strave_eval_game_system_specific_command$2","$Strave_checkRoll$3","$Strave_get_affiliation_table$5","$Strave_get_identity_table$6","$Strave_get_affiliation_table2$7","$Strave_get_identity_table2$8","$Strave_get_strave_1d100_table_result$9","$Strave_get_strave_table_result$10","$$prototype","randomizer","const_set","$register_prefix","def","$$initialize","command","$iter","$$p","$yield","find_super_dispatcher","sort_add_dice","$$arity","$$eval_game_system_specific_command","output","$case","diceCount","target","damage","$ret_or_1","$upcase","$last_match","$to_i","$checkRoll","$get_affiliation_table","$get_identity_table","$get_affiliation_table2","$get_identity_table2","$$checkRoll","$$4","diceArray","diceText","successCount","isDamage","totalDamage","result","$roll_barabara","$sort","$join","i","$$s","$size","$$get_affiliation_table","name","table","$get_strave_1d100_table_result","$$get_identity_table","$$get_affiliation_table2","$$get_identity_table2","$$get_strave_1d100_table_result","dice","dice2","$roll_once","$floor","$get_table_by_number","$get_strave_table_result","$$get_strave_table_result"],"mappings":"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","file":"default~Strave~index.js","sourcesContent":["require('./../opal');\n\n/* Generated by Opal 1.1.1 */\n(function(Opal) {\n  function $rb_lt(lhs, rhs) {\n    return (typeof(lhs) === 'number' && typeof(rhs) === 'number') ? lhs < rhs : lhs['$<'](rhs);\n  }\n  function $rb_gt(lhs, rhs) {\n    return (typeof(lhs) === 'number' && typeof(rhs) === 'number') ? lhs > rhs : lhs['$>'](rhs);\n  }\n  function $rb_le(lhs, rhs) {\n    return (typeof(lhs) === 'number' && typeof(rhs) === 'number') ? lhs <= rhs : lhs['$<='](rhs);\n  }\n  function $rb_times(lhs, rhs) {\n    return (typeof(lhs) === 'number' && typeof(rhs) === 'number') ? lhs * rhs : lhs['$*'](rhs);\n  }\n  function $rb_plus(lhs, rhs) {\n    return (typeof(lhs) === 'number' && typeof(rhs) === 'number') ? lhs + rhs : lhs['$+'](rhs);\n  }\n  function $rb_divide(lhs, rhs) {\n    return (typeof(lhs) === 'number' && typeof(rhs) === 'number') ? lhs / rhs : lhs['$/'](rhs);\n  }\n  function $rb_minus(lhs, rhs) {\n    return (typeof(lhs) === 'number' && typeof(rhs) === 'number') ? lhs - rhs : lhs['$-'](rhs);\n  }\n  var self = Opal.top, $nesting = [], nil = Opal.nil, $$$ = Opal.$$$, $$ = Opal.$$, $module = Opal.module, $klass = Opal.klass, $send2 = Opal.send2, $truthy = Opal.truthy, $send = Opal.send;\n\n  return (function($base, $parent_nesting) {\n    var self = $module($base, 'BCDice');\n\n    var $nesting = [self].concat($parent_nesting);\n\n    (function($base, $parent_nesting) {\n      var self = $module($base, 'GameSystem');\n\n      var $nesting = [self].concat($parent_nesting);\n\n      (function($base, $super, $parent_nesting) {\n        var self = $klass($base, $super, 'Strave');\n\n        var $nesting = [self].concat($parent_nesting), $Strave_initialize$1, $Strave_eval_game_system_specific_command$2, $Strave_checkRoll$3, $Strave_get_affiliation_table$5, $Strave_get_identity_table$6, $Strave_get_affiliation_table2$7, $Strave_get_identity_table2$8, $Strave_get_strave_1d100_table_result$9, $Strave_get_strave_table_result$10;\n\n        self.$$prototype.randomizer = nil;\n        \n        Opal.const_set($nesting[0], 'ID', \"Strave\");\n        Opal.const_set($nesting[0], 'NAME', \"碧空のストレイヴ\");\n        Opal.const_set($nesting[0], 'SORT_KEY', \"へきくうのすとれいふ\");\n        Opal.const_set($nesting[0], 'HELP_MESSAGE', \"\" + \"・モラトリアムフェイズ用判定：MPm\\n\" + \"・命中判定：nSTm*p\\n\" + \"\\n\" + \"「n」でダイス数を指定。\\n\" + \"「m」で目標値を指定。省略は出来ません。\\n\" + \"「p」で攻撃力を指定。「*」は「x」でも可。\\n\" + \"\\n\" + \"【書式例】\\n\" + \"・MP6 → 目標値6のモラトリアムフェイズ用判定。\\n\" + \"・5ST6*10 → 5d10で目標値6、攻撃力10の命中判定。\\n\" + \"\\n\" + \"【各種表】\\n\" + \"・所属表：AFF　　VN版：AFV\\n\" + \"・アイデンティティ表：IDT　　VN版：IDV\\n\" + \"\\n\" + \"※アイデンティティ表はエラッタ適用済です。\\n\");\n        self.$register_prefix(\"MP\", \"\\\\d+ST\", \"AFF\", \"IDT\", \"AFV\", \"IDV\");\n        \n        Opal.def(self, '$initialize', $Strave_initialize$1 = function $$initialize(command) {\n          var $iter = $Strave_initialize$1.$$p, $yield = $iter || nil, self = this;\n\n          if ($iter) $Strave_initialize$1.$$p = null;\n          \n          $send2(self, Opal.find_super_dispatcher(self, 'initialize', $Strave_initialize$1, false, true), 'initialize', [command], null);\n          return (self.sort_add_dice = true);\n        }, $Strave_initialize$1.$$arity = 1);\n        \n        Opal.def(self, '$eval_game_system_specific_command', $Strave_eval_game_system_specific_command$2 = function $$eval_game_system_specific_command(command) {\n          var self = this, output = nil, $case = nil, diceCount = nil, target = nil, damage = nil, $ret_or_1 = nil;\n\n          \n          output = (function() {$case = command.$upcase();\n          if (/MP(\\d+)$/i['$===']($case)) {\n          diceCount = 2;\n          target = $$($nesting, 'Regexp').$last_match(1).$to_i();\n          return self.$checkRoll(diceCount, target, nil);}\n          else if (/(\\d+)ST(\\d+)(x|\\*)(\\d+)$/i['$===']($case)) {\n          diceCount = $$($nesting, 'Regexp').$last_match(1).$to_i();\n          target = $$($nesting, 'Regexp').$last_match(2).$to_i();\n          damage = (function() {if ($truthy(($ret_or_1 = $$($nesting, 'Regexp').$last_match(4)))) {\n            return $ret_or_1\n          } else {\n            return 0\n          }; return nil; })().$to_i();\n          return self.$checkRoll(diceCount, target, damage);}\n          else if (\"AFF\"['$===']($case)) {return self.$get_affiliation_table()}\n          else if (\"IDT\"['$===']($case)) {return self.$get_identity_table()}\n          else if (\"AFV\"['$===']($case)) {return self.$get_affiliation_table2()}\n          else if (\"IDV\"['$===']($case)) {return self.$get_identity_table2()}\n          else { return nil }})();\n          return output;\n        }, $Strave_eval_game_system_specific_command$2.$$arity = 1);\n        \n        Opal.def(self, '$checkRoll', $Strave_checkRoll$3 = function $$checkRoll(diceCount, target, damage) {\n          var $$4, self = this, diceArray = nil, diceText = nil, successCount = nil, isDamage = nil, totalDamage = nil, result = nil;\n\n          \n          if ($truthy($rb_lt(target, 1))) {\n            target = 1};\n          if ($truthy($rb_gt(target, 10))) {\n            target = 10};\n          diceArray = self.randomizer.$roll_barabara(diceCount, 10).$sort();\n          diceText = diceArray.$join(\",\");\n          successCount = $send(diceArray, 'find_all', [], ($$4 = function(i){var self = $$4.$$s == null ? this : $$4.$$s;\n\n          \n            \n            if (i == null) {\n              i = nil;\n            };\n            return $rb_le(i, target);}, $$4.$$s = self, $$4.$$arity = 1, $$4)).$size();\n          isDamage = damage['$nil?']()['$!']();\n          if ($truthy(isDamage)) {\n            \n            totalDamage = $rb_times(successCount, damage);\n            result = \"\" + \"(\" + (diceCount) + \"D10<=\" + (target) + \") ＞ \" + (diceText) + \" ＞ Hits：\" + (successCount) + \"*\" + (damage) + \" ＞ \" + (totalDamage) + \"ダメージ\";\n          } else {\n            \n            result = \"\" + \"(\" + (diceCount) + \"D10<=\" + (target) + \") ＞ \" + (diceText);\n            if ($truthy($rb_gt(successCount, 0))) {\n              result = $rb_plus(result, \" ＞ 【成功】\")\n            } else {\n              result = $rb_plus(result, \" ＞ 【失敗】\")\n            };\n          };\n          return result;\n        }, $Strave_checkRoll$3.$$arity = 3);\n        \n        Opal.def(self, '$get_affiliation_table', $Strave_get_affiliation_table$5 = function $$get_affiliation_table() {\n          var self = this, name = nil, table = nil;\n\n          \n          name = \"所属表：基本\";\n          table = [[1, \"アリウス管理委員会：あなたはアリウス管理委員会に所属している。\"], [2, \"オーヴァーブルー：あなたはオーヴァーブルーに所属している。\"], [3, \"ウォルゲイト：あなたはウォルゲイトに所属している。\"], [4, \"暁部隊：あなたはかつて、反逆者・暁弥琴と同じ部隊に所属していた。\"], [5, \"天文部：あなたは天文部に所属している。\"], [6, \"吹奏楽部：あなたは吹奏楽部に所属している。\"], [7, \"剣道部：あなたは剣道部に所属している。\"], [8, \"ボクシング部：あなたはボクシング部に所属している。\"], [9, \"陸上部：あなたは陸上部に所属している。\"], [10, \"茶道部：あなたは茶道部に所属している。\"], [11, \"パソコン部：あなたはパソコン部に所属している。\"], [12, \"新聞部：あなたは新聞部に所属している。\"], [13, \"弓道部：あなたは弓道部に所属している。\"], [14, \"美術部：あなたは美術部に所属している。\"], [15, \"ミリタリー研究会：あなたはミリタリー研究会に所属している。\"], [16, \"歴史研究会：あなたは歴史研究会に所属している。\"], [17, \"ロボット研究会：あなたはロボット研究会に所属している。\"], [18, \"図書委員会：あなたは図書委員会に所属している。\"], [19, \"任意：あなたの任意の所属を設定せよ。\"], [20, \"任意：あなたの任意の所属を設定せよ。\"]];\n          return self.$get_strave_1d100_table_result(name, table);\n        }, $Strave_get_affiliation_table$5.$$arity = 0);\n        \n        Opal.def(self, '$get_identity_table', $Strave_get_identity_table$6 = function $$get_identity_table() {\n          var self = this, name = nil, table = nil;\n\n          \n          name = \"アイデンティティ表：基本\";\n          table = [[1, \"戦い：戦いこそが、あなたをあなたたらしめている。\"], [2, \"守護：あなたには守るべきものがある。\"], [3, \"復讐：あなたは復讐を誓っている。何かに、あるいは誰かに。\"], [4, \"名声：その身に浴びる脚光を、何よりも誉としている。\"], [5, \"恋愛：あなたはその身を焦がす恋に生きている。\"], [6, \"家族：あなたにとって、家族はかけがえの無いものだ。\"], [7, \"友人：あなたは友のために戦っている。\"], [8, \"部隊：共に戦う部隊の仲間が、あなたに力をくれる。\"], [9, \"ストレイヴ：あなたは自身のストレイヴを誇りに思っている。\"], [10, \"スフィアブレイク：あなたはスフィアブレイクを熱烈に目指している。\"], [11, \"お金：あなたはお金を求めている。報酬こそが自分の価値だ。\"], [12, \"夢：あなたには夢がある。自分を突き動かす夢が。\"], [13, \"忠誠：あなたは忠誠を誓っている。何かに、あるいは誰かに。\"], [14, \"共生：あなたは、ヴァイエルと人類との共生を望んでいる。\"], [15, \"居場所：自身の居場所こそが、あなたに力をくれる。\"], [16, \"強制：あなたは不本意ながら今の立場にいる。\"], [17, \"碧空：見上げた青空が、あなたを変えた。\"], [18, \"任意：あなたの任意のアイデンティティを設定せよ。\"], [19, \"任意：あなたの任意のアイデンティティを設定せよ。\"], [20, \"任意：あなたの任意のアイデンティティを設定せよ。\"]];\n          return self.$get_strave_1d100_table_result(name, table);\n        }, $Strave_get_identity_table$6.$$arity = 0);\n        \n        Opal.def(self, '$get_affiliation_table2', $Strave_get_affiliation_table2$7 = function $$get_affiliation_table2() {\n          var self = this, name = nil, table = nil;\n\n          \n          name = \"所属表：ヴァリアンスネイヴァー\";\n          table = [[1, \"シュヴァレ・トワール：あなたはシュヴァレ・トワールに所属している。\"], [2, \"ディープシンカー：あなたはディープシンカーに所属している。\"], [3, \"ヴェルクシュタット：あなたはヴェルクシュタットに所属している。\"], [4, \"アウスヴァル：あなたはアウスヴァルに所属している。\"], [5, \"美術科：あなたは美術科に所属している。\"], [6, \"哲学科：あなたは哲学科に所属している。\"], [7, \"数学科：あなたは数学科に所属している。\"], [8, \"地理学科：あなたは地理学科に所属している。\"], [9, \"工学科：あなたは工学科に所属している。\"], [10, \"体育学科：あなたは体育学科に所属している。\"], [11, \"農学科：あなたは農学科に所属している。\"], [12, \"歴史学科：あなたは歴史学科に所属している。\"], [13, \"医学科：あなたは医学科に所属している。\"], [14, \"情報学科：あなたは情報学科に所属している。\"], [15, \"音楽科：あなたは音楽科に所属している。\"], [16, \"心理学科：あなたは心理学科に所属している。\"], [17, \"文学科：あなたは文学科に所属している。\"], [18, \"任意：あなたの任意の所属を設定すること。\"], [19, \"任意：あなたの任意の所属を設定すること。\"], [20, \"任意：あなたの任意の所属を設定すること。\"]];\n          return self.$get_strave_1d100_table_result(name, table);\n        }, $Strave_get_affiliation_table2$7.$$arity = 0);\n        \n        Opal.def(self, '$get_identity_table2', $Strave_get_identity_table2$8 = function $$get_identity_table2() {\n          var self = this, name = nil, table = nil;\n\n          \n          name = \"アイデンティティ表：ヴァリアンスネイヴァー\";\n          table = [[1, \"戦い：戦いへの衝動が、あなたをあなたたらしめている。\"], [2, \"守護：守るべきものの存在が、あなたをあなたたらしめている。\"], [3, \"復讐：復讐の誓いこそが、あなたをあなたたらしめている。\"], [4, \"名声：与えられた名誉こそが、あなたをあなたたらしめている。\"], [5, \"恋愛：愛する者への想いが、あなたをあなたたらしめている。\"], [6, \"家族：かけがえのない家族が、あなたをあなたたらしめている。\"], [7, \"友人：友の存在が、あなたをあなたたらしめている。\"], [8, \"部隊：部隊の戦友こそが、あなたをあなたたらしめている。\"], [9, \"ストレイヴ：ストレイヴの存在が、あなたの心を保っている。\"], [10, \"宇宙：やがて来る旅立ちの日まで、あなたはあなたであろうとしている。\"], [11, \"お金：与えられる報酬のため、あなたはあなたであろうとしている。\"], [12, \"夢：あなたには、己の心に誓った夢がある。\"], [13, \"忠誠：その心でもって、誓った忠義がある。\"], [14, \"共生：あなたは、ヴァイエルと人類との共生を望んでいる。\"], [15, \"居場所：自身の居場所への思いが、あなたをあなたたらしめている。\"], [16, \"ヴァイエル：あなたと同じでありながら、あなたと異なる存在。彼らへの思いが、あなたをあなたたらしめている。\"], [17, \"エコール：自身の生きる場所への思いが、あなたをあなたたらしめている。\"], [18, \"任意：あなたの任意のアイデンティティを設定せよ。\"], [19, \"任意：あなたの任意のアイデンティティを設定せよ。\"], [20, \"任意：あなたの任意のアイデンティティを設定せよ。\"]];\n          return self.$get_strave_1d100_table_result(name, table);\n        }, $Strave_get_identity_table2$8.$$arity = 0);\n        \n        Opal.def(self, '$get_strave_1d100_table_result', $Strave_get_strave_1d100_table_result$9 = function $$get_strave_1d100_table_result(name, table) {\n          var self = this, dice = nil, dice2 = nil, result = nil;\n\n          \n          dice = self.randomizer.$roll_once(100);\n          dice2 = $rb_plus($rb_divide($rb_minus(dice.$to_i(), 1), 5).$floor(), 1);\n          result = self.$get_table_by_number(dice2, table);\n          return self.$get_strave_table_result(name, dice, result);\n        }, $Strave_get_strave_1d100_table_result$9.$$arity = 2);\n        return (Opal.def(self, '$get_strave_table_result', $Strave_get_strave_table_result$10 = function $$get_strave_table_result(name, dice, result) {\n          var self = this;\n\n          return \"\" + (name) + \"(\" + (dice) + \") ＞ \" + (result)\n        }, $Strave_get_strave_table_result$10.$$arity = 3), nil) && 'get_strave_table_result';\n      })($nesting[0], $$($nesting, 'Base'), $nesting)\n    })($nesting[0], $nesting)\n  })($nesting[0], $nesting)\n})(Opal);\n"],"sourceRoot":"webpack:///"}