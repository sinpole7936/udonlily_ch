{"version":3,"sources":["./node_modules/bcdice/lib/bcdice/game_system/TrinitySeven.js"],"names":["require","Opal","$rb_plus","lhs","rhs","$rb_ge","$rb_le","$rb_lt","$rb_gt","$rb_times","self","top","$nesting","nil","$$$","$$","$module","module","$klass","klass","$truthy","truthy","$send","send","$base","$parent_nesting","concat","$super","$TrinitySeven_eval_game_system_specific_command$1","$TrinitySeven_rollHit$2","$TrinitySeven_getHitRollResult$3","$TrinitySeven_rollDamage$4","$TrinitySeven_getRollDamageCritialText$5","$TrinitySeven_result_1d100$8","$TrinitySeven_get_NAME_table$9","$TrinitySeven_get_NAMEtwo_table$10","$$prototype","randomizer","const_set","$register_prefix","def","$$eval_game_system_specific_command","command","$a","$b","firstName","secondName","critical","target","modify","diceCount","$debug","$get_NAME_table","to_ary","$get_NAMEtwo_table","$last_match","$to_i","$rollHit","$rollDamage","$$arity","$$rollHit","total","result","text","$roll_once","$getHitRollResult","$$getHitRollResult","$$rollDamage","dice_list","diceText","additionalListText","additionalList","modifyText","$roll_barabara","$sum","$join","$getRollDamageCritialText","$to_s","$$getRollDamageCritialText","$$6","$$7","diceList","restDice","max","$split","$to_proc","$clone","$$s","$shift","$push","$pop","i","$$result_1d100","_total","dice_total","_cmp_op","_target","$fumble","$critical","$$get_NAME_table","table","dice_now","$get_table_by_number","$$get_NAMEtwo_table"],"mappings":"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","file":"default~TrinitySeven~index.js","sourcesContent":["require('./../opal');\n\n/* Generated by Opal 1.1.1 */\n(function(Opal) {\n  function $rb_plus(lhs, rhs) {\n    return (typeof(lhs) === 'number' && typeof(rhs) === 'number') ? lhs + rhs : lhs['$+'](rhs);\n  }\n  function $rb_ge(lhs, rhs) {\n    return (typeof(lhs) === 'number' && typeof(rhs) === 'number') ? lhs >= rhs : lhs['$>='](rhs);\n  }\n  function $rb_le(lhs, rhs) {\n    return (typeof(lhs) === 'number' && typeof(rhs) === 'number') ? lhs <= rhs : lhs['$<='](rhs);\n  }\n  function $rb_lt(lhs, rhs) {\n    return (typeof(lhs) === 'number' && typeof(rhs) === 'number') ? lhs < rhs : lhs['$<'](rhs);\n  }\n  function $rb_gt(lhs, rhs) {\n    return (typeof(lhs) === 'number' && typeof(rhs) === 'number') ? lhs > rhs : lhs['$>'](rhs);\n  }\n  function $rb_times(lhs, rhs) {\n    return (typeof(lhs) === 'number' && typeof(rhs) === 'number') ? lhs * rhs : lhs['$*'](rhs);\n  }\n  var self = Opal.top, $nesting = [], nil = Opal.nil, $$$ = Opal.$$$, $$ = Opal.$$, $module = Opal.module, $klass = Opal.klass, $truthy = Opal.truthy, $send = Opal.send;\n\n  return (function($base, $parent_nesting) {\n    var self = $module($base, 'BCDice');\n\n    var $nesting = [self].concat($parent_nesting);\n\n    (function($base, $parent_nesting) {\n      var self = $module($base, 'GameSystem');\n\n      var $nesting = [self].concat($parent_nesting);\n\n      (function($base, $super, $parent_nesting) {\n        var self = $klass($base, $super, 'TrinitySeven');\n\n        var $nesting = [self].concat($parent_nesting), $TrinitySeven_eval_game_system_specific_command$1, $TrinitySeven_rollHit$2, $TrinitySeven_getHitRollResult$3, $TrinitySeven_rollDamage$4, $TrinitySeven_getRollDamageCritialText$5, $TrinitySeven_result_1d100$8, $TrinitySeven_get_NAME_table$9, $TrinitySeven_get_NAMEtwo_table$10;\n\n        self.$$prototype.randomizer = nil;\n        \n        Opal.const_set($nesting[0], 'ID', \"TrinitySeven\");\n        Opal.const_set($nesting[0], 'NAME', \"トリニティセブンRPG\");\n        Opal.const_set($nesting[0], 'SORT_KEY', \"とりにていせふんRPG\");\n        Opal.const_set($nesting[0], 'HELP_MESSAGE', \"\" + \"クリティカルが変動した命中及び、7の出目がある場合のダメージ計算が行なえます。\\n\" + \"なお、通常の判定としても利用できます。\\n\" + \"\\n\" + \"・発動/命中　［TR(±c*)<=(x）±（y*）又は TR<=(x）など］*は必須ではない項目です。\\n\" + \"\\\"TR(クリティカルの修正値*)＜＝(発動/命中)±(発動/命中の修正値*)\\\"\\n\" + \"加算減算のみ修正値も付けられます。 ［修正値］は必須ではありません。\\n\" + \"例）TR<=50\\tTR＜＝60＋20\\tTR7＜＝40\\tTR-7＜＝80\\tTR＋10＜＝80＋20\\n\" + \"\\n\" + \"・ダメージ計算　［（x)DM(c*)±(y*）又は（x)DM(c*)又は（x)DM±(y*）］*は必須ではない項目です。\\n\" + \"\\\"(ダイス数)DM(7の出目の数*)＋(修正*)\\\"\\n\" + \"加算減算のみ修正値も付けられます。 ［7の出目の数］および［修正値］は必須ではありません。\\n\" + \"例）6DM2+1\\t5DM2\\t4DM\\t\\t3DM+3\\n\" + \"後から7の出目に変更する場合はC(7*6＋5)のように入力して計算してください。\\n\" + \"\\n\" + \"・名前表　[TRNAME]\\n\" + \"名字と名前を出します。PCや突然現れたNPCの名付けにどうぞ。\\n\" + \"\\n\");\n        self.$register_prefix(\"\\\\d+DM\", \"TR\", \"TRNAME\");\n        \n        Opal.def(self, '$eval_game_system_specific_command', $TrinitySeven_eval_game_system_specific_command$1 = function $$eval_game_system_specific_command(command) {\n          var $a, $b, self = this, firstName = nil, secondName = nil, critical = nil, target = nil, modify = nil, diceCount = nil;\n\n          \n          self.$debug(\"eval_game_system_specific_command command\", command);\n          if ($truthy(/TRNAME/['$=~'](command))) {\n            \n            $b = self.$get_NAME_table(), $a = Opal.to_ary($b), (firstName = ($a[0] == null ? nil : $a[0])), $b;\n            $b = self.$get_NAMEtwo_table(), $a = Opal.to_ary($b), (secondName = ($a[0] == null ? nil : $a[0])), $b;\n            return \"\" + (firstName) + \" , \" + (secondName);};\n          if ($truthy(/^TR([+\\-\\d]*)<=(\\d*)([+\\-\\d]*)/['$=~'](command))) {\n            \n            critical = $rb_plus($$($nesting, 'Regexp').$last_match(1).$to_i(), 7);\n            target = $$($nesting, 'Regexp').$last_match(2).$to_i();\n            modify = $$($nesting, 'Regexp').$last_match(3).$to_i();\n            return self.$rollHit(command, critical, target, modify);};\n          if ($truthy(/^(\\d*)DM(\\d*)([+\\-\\d]*)$/['$=~'](command))) {\n            \n            diceCount = $$($nesting, 'Regexp').$last_match(1).$to_i();\n            critical = $$($nesting, 'Regexp').$last_match(2).$to_i();\n            modify = $$($nesting, 'Regexp').$last_match(3).$to_i();\n            return self.$rollDamage(command, diceCount, critical, modify);};\n          return \"\";\n        }, $TrinitySeven_eval_game_system_specific_command$1.$$arity = 1);\n        \n        Opal.def(self, '$rollHit', $TrinitySeven_rollHit$2 = function $$rollHit(command, critical, target, modify) {\n          var self = this, total = nil, result = nil, text = nil;\n\n          \n          target = $rb_plus(target, modify);\n          total = self.randomizer.$roll_once(100);\n          result = self.$getHitRollResult(total, target, critical);\n          text = \"\" + \"(\" + (command) + \") ＞ \" + (total) + \"[\" + (total) + \"] ＞ \" + (result);\n          self.$debug(\"eval_game_system_specific_command result text\", text);\n          return text;\n        }, $TrinitySeven_rollHit$2.$$arity = 4);\n        \n        Opal.def(self, '$getHitRollResult', $TrinitySeven_getHitRollResult$3 = function $$getHitRollResult(total, target, critical) {\n          var self = this;\n\n          \n          if ($truthy($rb_ge(total, 96))) {\n            return \"ファンブル\"};\n          if ($truthy($rb_le(total, critical))) {\n            return \"クリティカル\"};\n          if ($truthy($rb_le(total, target))) {\n            return \"成功\"};\n          return \"失敗\";\n        }, $TrinitySeven_getHitRollResult$3.$$arity = 3);\n        \n        Opal.def(self, '$rollDamage', $TrinitySeven_rollDamage$4 = function $$rollDamage(command, diceCount, critical, modify) {\n          var $a, $b, self = this, dice_list = nil, total = nil, diceText = nil, additionalListText = nil, additionalList = nil, modifyText = nil, text = nil;\n\n          \n          if ($truthy($rb_lt(diceCount, critical))) {\n            return \"\"};\n          dice_list = self.randomizer.$roll_barabara(diceCount, 6);\n          total = dice_list.$sum();\n          diceText = dice_list.$join(\",\");\n          additionalListText = \"\";\n          $b = self.$getRollDamageCritialText(diceCount, critical, total, diceText, modify), $a = Opal.to_ary($b), (total = ($a[0] == null ? nil : $a[0])), (additionalList = ($a[1] == null ? nil : $a[1])), $b;\n          if ($truthy(additionalList['$empty?']())) {\n          } else {\n            additionalListText = \"\" + \"→[\" + (additionalList.$join(\",\")) + \"]\"\n          };\n          modifyText = \"\";\n          if ($truthy($rb_gt(modify, 0))) {\n            modifyText = \"\" + \"+\" + (modify)};\n          if ($truthy($rb_lt(modify, 0))) {\n            modifyText = modify.$to_s()};\n          text = \"\" + \"(\" + (command) + \") [\" + (diceText) + \"]\" + (additionalListText) + (modifyText) + \" ＞ \" + (total);\n          return text;\n        }, $TrinitySeven_rollDamage$4.$$arity = 4);\n        \n        Opal.def(self, '$getRollDamageCritialText', $TrinitySeven_getRollDamageCritialText$5 = function $$getRollDamageCritialText(diceCount, critical, total, diceText, modify) {\n          var $$6, $$7, self = this, diceList = nil, restDice = nil, max = nil;\n\n          \n          diceList = [];\n          if (critical['$=='](0)) {\n            \n            total = $rb_plus(total, modify);\n            return [total, diceList];};\n          diceList = $send(diceText.$split(/,/), 'map', [], \"to_i\".$to_proc());\n          diceList['$sort!']();\n          restDice = diceList.$clone();\n          if ($truthy($rb_gt(critical, diceCount))) {\n            critical = diceCount};\n          $send(critical, 'times', [], ($$6 = function(){var self = $$6.$$s == null ? this : $$6.$$s;\n\n          \n            restDice.$shift();\n            diceList.$shift();\n            return diceList.$push(7);}, $$6.$$s = self, $$6.$$arity = 0, $$6));\n          max = restDice.$pop();\n          if ($truthy(max['$nil?']())) {\n            max = 1};\n          total = $rb_plus($rb_times(max, (7)['$**'](critical)), modify);\n          $send(restDice, 'each', [], ($$7 = function(i){var self = $$7.$$s == null ? this : $$7.$$s;\n\n          \n            \n            if (i == null) {\n              i = nil;\n            };\n            return (total = $rb_plus(total, i));}, $$7.$$s = self, $$7.$$arity = 1, $$7));\n          return [total, diceList];\n        }, $TrinitySeven_getRollDamageCritialText$5.$$arity = 5);\n        \n        Opal.def(self, '$result_1d100', $TrinitySeven_result_1d100$8 = function $$result_1d100(_total, dice_total, _cmp_op, _target) {\n          var self = this;\n\n          if ($truthy($rb_ge(dice_total, 96))) {\n            return $$($nesting, 'Result').$fumble(\"ファンブル\")\n          } else if ($truthy($rb_le(dice_total, 7))) {\n            return $$($nesting, 'Result').$critical(\"クリティカル\")\n          } else {\n            return nil\n          }\n        }, $TrinitySeven_result_1d100$8.$$arity = 4);\n        \n        Opal.def(self, '$get_NAME_table', $TrinitySeven_get_NAME_table$9 = function $$get_NAME_table() {\n          var self = this, table = nil, dice_now = nil;\n\n          \n          table = [[1, \"春日\"], [2, \"浅見\"], [3, \"風間\"], [4, \"神無月\"], [5, \"倉田\"], [6, \"不動\"], [7, \"山奈\"], [8, \"シャルロック\"], [9, \"霧隠\"], [10, \"果心\"], [11, \"今井\"], [12, \"長瀬\"], [13, \"明智\"], [14, \"風祭\"], [15, \"志貫\"], [16, \"一文字\"], [17, \"月夜野\"], [18, \"桜田門\"], [19, \"果瀬\"], [20, \"九十九\"], [21, \"速水\"], [22, \"片桐\"], [23, \"葉月\"], [24, \"ウィンザー\"], [25, \"時雨里\"], [26, \"神城\"], [27, \"水際\"], [28, \"一ノ江\"], [29, \"仁藤\"], [30, \"北千住\"], [31, \"西村\"], [32, \"諏訪\"], [33, \"藤宮\"], [34, \"御代\"], [35, \"橘\"], [36, \"霧生\"], [37, \"白石\"], [38, \"椎名\"], [39, \"綾小路\"], [40, \"二条\"], [41, \"光明寺\"], [42, \"春秋\"], [43, \"雪見\"], [44, \"刀条院\"], [45, \"ランカスター\"], [46, \"ハクア\"], [47, \"エルタニア\"], [48, \"ハーネス\"], [49, \"アウグストゥス\"], [50, \"椎名町\"], [51, \"鍵守\"], [52, \"茜ヶ崎\"], [53, \"鎮宮\"], [54, \"美柳\"], [55, \"鎖々塚\"], [56, \"櫻ノ杜\"], [57, \"鏡ヶ守\"], [58, \"輝井\"], [59, \"南陽\"], [60, \"雪乃城\"], [61, \"六角屋\"], [62, \"鈴々\"], [63, \"東三条\"], [64, \"朱雀院\"], [65, \"青龍院\"], [66, \"白虎院\"], [67, \"玄武院\"], [68, \"麒麟院\"], [69, \"リーシュタット\"], [70, \"サンクチュアリ\"], [71, \"六実\"], [72, \"須藤\"], [73, \"ミレニアム\"], [74, \"七里\"], [75, \"三枝\"], [76, \"八殿\"], [77, \"藤里\"], [78, \"久宝\"], [79, \"東\"], [80, \"赤西\"], [81, \"神ヶ崎\"], [82, \"グランシア\"], [83, \"ダークブーレード\"], [84, \"天光寺\"], [85, \"月見里\"], [86, \"璃宮\"], [87, \"藤見澤\"], [88, \"赤聖\"], [89, \"姫宮\"], [90, \"華ノ宮\"], [91, \"天才\"], [92, \"達人\"], [93, \"賢者\"], [94, \"疾風\"], [95, \"海の\"], [96, \"最強\"], [97, \"凶器\"], [98, \"灼熱\"], [99, \"人間兵器\"], [100, \"魔王\"]];\n          dice_now = self.randomizer.$roll_once(100);\n          return self.$get_table_by_number(dice_now, table);\n        }, $TrinitySeven_get_NAME_table$9.$$arity = 0);\n        return (Opal.def(self, '$get_NAMEtwo_table', $TrinitySeven_get_NAMEtwo_table$10 = function $$get_NAMEtwo_table() {\n          var self = this, table = nil, dice_now = nil;\n\n          \n          table = [[1, \"アラタ/聖\"], [2, \"アビィス/リリス\"], [3, \"ルーグ/レヴィ\"], [4, \"ラスト/アリン\"], [5, \"ソラ/ユイ\"], [6, \"イーリアス/アキオ\"], [7, \"アカーシャ/ミラ\"], [8, \"アリエス/リーゼロッテ\"], [9, \"ムラサメ/シャルム\"], [10, \"龍貴/竜姫\"], [11, \"英樹/春菜\"], [12, \"準一/湊\"], [13, \"急司郎/光理\"], [14, \"夕也/愛奈\"], [15, \"晴彦/アキ\"], [16, \"疾風/ヤシロ\"], [17, \"カガリ/灯花\"], [18, \"次郎/優都\"], [19, \"春太郎/静理\"], [20, \"ジン/時雨\"], [21, \"イオリ/伊織\"], [22, \"ユウヒ/優姫\"], [23, \"サツキ/翠名\"], [24, \"シュライ/サクラ\"], [25, \"ミナヅキ/姫乃\"], [26, \"カエデ/優樹菜\"], [27, \"ハル/フユ\"], [28, \"オｄール/瑞江\"], [29, \"ニトゥレスト/キリカ\"], [30, \"スカー/綾瀬\"], [31, \"真夏/小夏\"], [32, \"光一/ののか\"], [33, \"彩/翠\"], [34, \"トウカ/柊花\"], [35, \"命/ミコト\"], [36, \"司/つかさ\"], [37, \"ゆとり/なごみ\"], [38, \"冬彦/観月\"], [39, \"カレン/華恋\"], [40, \"清次郎/亜矢\"], [41, \"サード/夢子\"], [42, \"ボックス/詩子\"], [43, \"ヘリオス/カエデ\"], [44, \"ゲート/京香\"], [45, \"オンリー/パトリシア\"], [46, \"ザッハーク/アーリ\"], [47, \"ラスタバン/ラスティ\"], [48, \"桜花/燁澄\"], [49, \"計都/リヴィア\"], [50, \"カルヴァリオ/香夜\"], [51, \"悠人/夜々子\"], [52, \"太子/羽菜\"], [53, \"夕立/夕凪\"], [54, \"アルフ/愛美\"], [55, \"ファロス/灯利\"], [56, \"スプートニク/詩姫\"], [57, \"アーネスト/累\"], [58, \"ナイン/カグヤ\"], [59, \"クリア/ヒマワリ\"], [60, \"ウォーカー/オリビア\"], [61, \"ダーク/クオン\"], [62, \"ウェイヴ/凛\"], [63, \"ルーン/マリエ\"], [64, \"エンギ/セイギ\"], [65, \"シラヌイ/ミライ\"], [66, \"ブライン/キズナ\"], [67, \"クロウ/カナタ\"], [68, \"スレイヤー/ヒカル\"], [69, \"レス/ミリアリア\"], [70, \"ミフユ/サリエル\"], [71, \"鳴央/音央\"], [72, \"モンジ/理亜\"], [73, \"パルデモントゥム/スナオ\"], [74, \"ミシェル/詩穂\"], [75, \"フレンズ/サン\"], [76, \"サトリ/識\"], [77, \"ロード/唯花\"], [78, \"クロノス/久宝\"], [79, \"フィラデルフィア/冬海\"], [80, \"ティンダロス/美星\"], [81, \"勇弥/ユーリス\"], [82, \"エイト/アンジェラ\"], [83, \"サタン/ルシエル\"], [84, \"エース/小波\"], [85, \"セージ/胡蝶\"], [86, \"忍/千之\"], [87, \"重吾/キリコ\"], [88, \"マイケル/ミホシ\"], [89, \"カズマ/鶴香\"], [90, \"ヤマト/エリシエル\"], [91, \"歴史上の人物の名前（信長、ジャンヌなど）\"], [92, \"スポーツ選手の名前（ベッカム、沙保里など）\"], [93, \"学者の名前（ソクラテス、エレナなど）\"], [94, \"アイドルの名前（タクヤ、聖子など）\"], [95, \"土地、国、町の名前（イングランド、ワシントンなど）\"], [96, \"モンスターの名前（ドラゴン、ラミアなど）\"], [97, \"武器防具の名前（ソード、メイルなど）\"], [98, \"自然現象の名前（カザンハリケーンなど）\"], [99, \"機械の名前（洗濯機、テレビなど）\"], [100, \"目についた物の名前（シャーペン、メガネなど）\"]];\n          dice_now = self.randomizer.$roll_once(100);\n          return self.$get_table_by_number(dice_now, table);\n        }, $TrinitySeven_get_NAMEtwo_table$10.$$arity = 0), nil) && 'get_NAMEtwo_table';\n      })($nesting[0], $$($nesting, 'Base'), $nesting)\n    })($nesting[0], $nesting)\n  })($nesting[0], $nesting)\n})(Opal);\n"],"sourceRoot":"webpack:///"}