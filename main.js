(window["webpackJsonp"] = window["webpackJsonp"] || []).push([["main"],{

/***/ "+FYa":
/*!*****************************************************************!*\
  !*** ./src/app/class/core/synchronize-object/object-factory.ts ***!
  \*****************************************************************/
/*! exports provided: ObjectFactory */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ObjectFactory", function() { return ObjectFactory; });
var ObjectFactory = /** @class */ (function () {
    function ObjectFactory() {
        this.constructorMap = new Map();
        this.aliasMap = new Map();
        console.log('ObjectFactory ready...');
    }
    Object.defineProperty(ObjectFactory, "instance", {
        get: function () {
            if (!ObjectFactory._instance)
                ObjectFactory._instance = new ObjectFactory();
            return ObjectFactory._instance;
        },
        enumerable: false,
        configurable: true
    });
    ;
    ObjectFactory.prototype.register = function (constructor, alias) {
        if (!alias)
            alias = constructor.name || constructor.toString().match(/function\s*([^(]*)\(/)[1];
        if (this.constructorMap.has(alias)) {
            console.error('その alias<' + alias + '> はすでに割り当て済みじゃねー？');
            return;
        }
        if (this.aliasMap.has(constructor)) {
            console.error('その constructor はすでに登録済みじゃねー？', constructor);
            return;
        }
        console.log('addGameObjectFactory -> ' + alias);
        this.constructorMap.set(alias, constructor);
        this.aliasMap.set(constructor, alias);
    };
    ObjectFactory.prototype.create = function (alias, identifer) {
        var classConstructor = this.constructorMap.get(alias);
        if (!classConstructor) {
            console.error(alias + 'という名のＧameObjectクラスは定義されていません');
            return null;
        }
        var gameObject = new classConstructor(identifer);
        return gameObject;
    };
    ObjectFactory.prototype.getAlias = function (constructor) {
        return this.aliasMap.get(constructor);
    };
    return ObjectFactory;
}());



/***/ }),

/***/ "+Kyd":
/*!************************************************!*\
  !*** ./src/app/directive/movable.directive.ts ***!
  \************************************************/
/*! exports provided: MovableDirective */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MovableDirective", function() { return MovableDirective; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "fXoL");
/* harmony import */ var _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @udonarium/core/synchronize-object/object-store */ "hm7o");
/* harmony import */ var _udonarium_core_system__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @udonarium/core/system */ "yNnI");
/* harmony import */ var _input_handler__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./input-handler */ "96Ug");
/* harmony import */ var service_batch_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! service/batch.service */ "taL5");
/* harmony import */ var service_pointer_device_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! service/pointer-device.service */ "GPP8");
/* harmony import */ var service_coordinate_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! service/coordinate.service */ "TzEH");








var MovableDirective = /** @class */ (function () {
    function MovableDirective(ngZone, elementRef, batchService, pointerDeviceService, coordinateService) {
        this.ngZone = ngZone;
        this.elementRef = elementRef;
        this.batchService = batchService;
        this.pointerDeviceService = pointerDeviceService;
        this.coordinateService = coordinateService;
        this.layerName = '';
        this.colideLayers = [];
        this.transformCssOffset = '';
        this.isDisable = false;
        this.onstart = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        this.ondragstart = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        this.ondrag = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        this.ondragend = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        this.onend = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        this._posX = 0;
        this._posY = 0;
        this._posZ = 0;
        this.pointer3d = { x: 0, y: 0, z: 0 };
        this.pointerOffset3d = { x: 0, y: 0, z: 0 };
        this.pointerStart3d = { x: 0, y: 0, z: 0 };
        this.pointerPrev3d = { x: 0, y: 0, z: 0 };
        this.height = 0;
        this.width = 0;
        this.ratio = 1.0;
        this.updateTimer = null;
        this.collidableElements = [];
        this.input = null;
    }
    Object.defineProperty(MovableDirective.prototype, "option", {
        set: function (option) {
            this.tabletopObject = option.tabletopObject != null ? option.tabletopObject : this.tabletopObject;
            this.layerName = option.layerName != null ? option.layerName : this.layerName;
            this.colideLayers = option.colideLayers != null ? option.colideLayers : this.colideLayers;
            this.transformCssOffset = option.transformCssOffset != null ? option.transformCssOffset : this.transformCssOffset;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(MovableDirective.prototype, "posX", {
        get: function () { return this._posX; },
        set: function (posX) { this._posX = posX; this.setUpdateTimer(); },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(MovableDirective.prototype, "posY", {
        get: function () { return this._posY; },
        set: function (posY) { this._posY = posY; this.setUpdateTimer(); },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(MovableDirective.prototype, "posZ", {
        get: function () { return this._posZ; },
        set: function (posZ) { this._posZ = posZ; this.setUpdateTimer(); },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(MovableDirective.prototype, "isGridSnap", {
        get: function () {
            var tableSelecter = _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_1__["ObjectStore"].instance.get('tableSelecter');
            return tableSelecter ? tableSelecter.gridSnap : false;
        },
        enumerable: false,
        configurable: true
    });
    MovableDirective.prototype.ngAfterViewInit = function () {
        var _this = this;
        this.ngZone.runOutsideAngular(function () {
            _this.input = new _input_handler__WEBPACK_IMPORTED_MODULE_3__["InputHandler"](_this.elementRef.nativeElement);
        });
        this.input.onStart = this.onInputStart.bind(this);
        this.input.onMove = this.onInputMove.bind(this);
        this.input.onEnd = this.onInputEnd.bind(this);
        this.input.onContextMenu = this.onContextMenu.bind(this);
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_2__["EventSystem"].register(this)
            .on('UPDATE_GAME_OBJECT', -1000, function (event) {
            if ((event.isSendFromSelf && _this.input.isGrabbing) || event.data.identifier !== _this.tabletopObject.identifier || !_this.shouldTransition(_this.tabletopObject))
                return;
            _this.batchService.add(function () {
                if (_this.input.isGrabbing) {
                    _this.cancel();
                }
                else {
                    _this.setAnimatedTransition(true);
                }
                _this.stopTransition();
                _this.setPosition(_this.tabletopObject);
            }, _this);
        });
        if (this.layerName.length < 1 && this.tabletopObject)
            this.layerName = this.tabletopObject.aliasName;
        this.register();
        this.findCollidableElements();
        this.setPosition(this.tabletopObject);
    };
    MovableDirective.prototype.ngOnDestroy = function () {
        this.cancel();
        this.input.destroy();
        this.unregister();
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_2__["EventSystem"].unregister(this);
        this.batchService.remove(this);
    };
    MovableDirective.prototype.cancel = function () {
        this.input.cancel();
        this.setPointerEvents(true);
        this.setAnimatedTransition(true);
        this.setCollidableLayer(false);
    };
    MovableDirective.prototype.onInputStart = function (e) {
        this.callSelectedEvent();
        if (this.collidableElements.length < 1)
            this.findCollidableElements(); // 稀にcollidableElementsの取得に失敗している
        if (this.isDisable || e.button === 1 || e.button === 2)
            return this.cancel();
        this.onstart.emit(e);
        this.setPointerEvents(false);
        this.setAnimatedTransition(false);
        this.setCollidableLayer(true);
        var target = document.elementFromPoint(this.input.pointer.x, this.input.pointer.y);
        this.pointer3d = this.coordinateService.calcTabletopLocalCoordinate(this.input.pointer, target);
        this.setPointerEvents(true);
        this.pointerOffset3d.x = this.posX - this.pointer3d.x;
        this.pointerOffset3d.y = this.posY - this.pointer3d.y;
        this.pointerOffset3d.z = this.posZ - this.pointer3d.z;
        this.pointerStart3d.x = this.pointerPrev3d.x = this.pointer3d.x;
        this.pointerStart3d.y = this.pointerPrev3d.y = this.pointer3d.y;
        this.pointerStart3d.z = this.pointerPrev3d.z = this.pointer3d.z;
        this.ratio = 1.0;
        if (this.pointer3d.z !== this.posZ) {
            this.ratio /= Math.abs(this.pointer3d.z - this.posZ) / 2;
        }
        this.width = this.input.target.clientWidth;
        this.height = this.input.target.clientHeight;
    };
    MovableDirective.prototype.onInputMove = function (e) {
        if (this.input.isGrabbing && !this.pointerDeviceService.isDragging) {
            return this.cancel(); // todo
        }
        if (this.isDisable || !this.input.isGrabbing)
            return this.cancel();
        if (e.cancelable)
            e.preventDefault();
        if (!this.input.isDragging)
            this.setPointerEvents(false);
        var target = document.elementFromPoint(this.input.pointer.x, this.input.pointer.y);
        if (target == null)
            return;
        this.pointer3d = this.coordinateService.calcTabletopLocalCoordinate(this.input.pointer, target);
        if (this.pointerPrev3d.x === this.pointer3d.x && this.pointerPrev3d.y === this.pointer3d.y && this.pointerPrev3d.z === this.pointer3d.z)
            return;
        if (!this.input.isDragging)
            this.ondragstart.emit(e);
        this.ondrag.emit(e);
        var ratio = this.calcDistanceRatio(this.pointerStart3d, this.pointer3d);
        if (ratio < this.ratio)
            this.ratio = ratio;
        this.pointerPrev3d.x = this.pointer3d.x;
        this.pointerPrev3d.y = this.pointer3d.y;
        this.pointerPrev3d.z = this.pointer3d.z;
        this.posX = this.pointer3d.x + (this.pointerOffset3d.x * this.ratio) + (-(this.width / 2) * (1.0 - this.ratio));
        this.posY = this.pointer3d.y + (this.pointerOffset3d.y * this.ratio) + (-(this.height / 2) * (1.0 - this.ratio));
        this.posZ = this.pointer3d.z;
    };
    MovableDirective.prototype.onInputEnd = function (e) {
        if (this.isDisable)
            return this.cancel();
        if (this.input.isDragging)
            this.ondragend.emit(e);
        if (this.isGridSnap && this.input.isDragging)
            this.snapToGrid();
        this.cancel();
        this.onend.emit(e);
    };
    MovableDirective.prototype.onContextMenu = function (e) {
        var _this = this;
        if (this.isDisable)
            return this.cancel();
        if (e.cancelable)
            e.preventDefault();
        if (this.isGridSnap && this.input.isDragging)
            this.snapToGrid();
        var needsDispatch = this.input.isGrabbing && e.isTrusted;
        this.cancel();
        if (needsDispatch) {
            // ロングプレスによるタッチ操作でコンテキストメニューを開く場合、イベントを適切なDOMに伝搬させる
            e.stopPropagation();
            var ev_1 = new MouseEvent(e.type, e);
            this.ngZone.run(function () { return _this.input.target.dispatchEvent(ev_1); });
        }
    };
    MovableDirective.prototype.callSelectedEvent = function () {
        if (this.tabletopObject)
            _udonarium_core_system__WEBPACK_IMPORTED_MODULE_2__["EventSystem"].trigger('SELECT_TABLETOP_OBJECT', { identifier: this.tabletopObject.identifier, className: this.tabletopObject.aliasName });
    };
    MovableDirective.prototype.calcDistanceRatio = function (start, now) {
        var width = this.collidableElements[0].clientWidth;
        var height = this.collidableElements[0].clientHeight;
        var ratio = Math.sqrt(width * width + height * height);
        ratio = ratio < 1 ? 1 : ratio * 3;
        var distanceY = start.y - now.y;
        var distanceX = start.x - now.x;
        var distanceZ = (start.z - now.z) * 100;
        var distance = Math.sqrt(Math.pow(distanceY, 2) + Math.pow(distanceX, 2) + Math.pow(distanceZ, 2));
        return ratio / (distance + ratio);
    };
    MovableDirective.prototype.snapToGrid = function (gridSize) {
        if (gridSize === void 0) { gridSize = 25; }
        this.posX = this.calcSnapNum(this.posX, gridSize);
        this.posY = this.calcSnapNum(this.posY, gridSize);
    };
    MovableDirective.prototype.calcSnapNum = function (num, interval) {
        if (interval <= 0)
            return num;
        num = num < 0 ? num - interval / 2 : num + interval / 2;
        return num - (num % interval);
    };
    MovableDirective.prototype.setPosition = function (object) {
        this._posX = object.location.x;
        this._posY = object.location.y;
        this._posZ = object.posZ;
        this.updateTransformCss();
    };
    MovableDirective.prototype.setUpdateTimer = function () {
        var _this = this;
        if (this.updateTimer === null && this.tabletopObject) {
            this.updateTimer = setTimeout(function () {
                _this.tabletopObject.location.x = _this.posX;
                _this.tabletopObject.location.y = _this.posY;
                _this.tabletopObject.posZ = _this.posZ;
                _this.updateTimer = null;
            }, 66);
        }
        this.updateTransformCss();
    };
    MovableDirective.prototype.findCollidableElements = function () {
        this.collidableElements = [];
        if (getComputedStyle(this.input.target).pointerEvents !== 'none') {
            this.collidableElements = [this.input.target];
            return;
        }
        this.findNestedCollidableElements(this.input.target);
    };
    MovableDirective.prototype.findNestedCollidableElements = function (element) {
        // TODO:不完全
        var children = element.children;
        for (var i = 0; i < children.length; i++) {
            var child = children[i];
            if (!(child instanceof HTMLElement))
                continue;
            if (getComputedStyle(child).pointerEvents !== 'none') {
                this.collidableElements.push(child);
            }
        }
        if (this.collidableElements.length < 1) {
            for (var i = 0; i < children.length; i++) {
                var child = children[i];
                if (!(child instanceof HTMLElement))
                    continue;
                this.findNestedCollidableElements(child);
            }
        }
    };
    MovableDirective.prototype.setPointerEvents = function (isEnable) {
        var css = isEnable ? 'auto' : 'none';
        this.collidableElements.forEach(function (element) { return element.style.pointerEvents = css; });
    };
    MovableDirective.prototype.setAnimatedTransition = function (isEnable) {
        if (!this.input)
            return;
        this.input.target.style.transition = isEnable ? 'transform 132ms linear' : '';
    };
    MovableDirective.prototype.shouldTransition = function (object) {
        return object.location.x !== this.posX || object.location.y !== this.posY || object.posZ !== this.posZ;
    };
    MovableDirective.prototype.stopTransition = function () {
        this.input.target.style.transform = window.getComputedStyle(this.input.target).transform;
    };
    MovableDirective.prototype.updateTransformCss = function () {
        if (!this.input)
            return;
        var css = this.transformCssOffset + ' translateX(' + this.posX + 'px) translateY(' + this.posY + 'px) translateZ(' + this.posZ + 'px)';
        this.input.target.style.transform = css;
    };
    MovableDirective.prototype.setCollidableLayer = function (isCollidable) {
        var _this = this;
        // todo
        var isEnable = isCollidable;
        for (var layerName in MovableDirective.layerHash) {
            if (-1 < this.colideLayers.indexOf(layerName)) {
                isEnable = this.input.isGrabbing ? isCollidable : true;
            }
            else {
                isEnable = !isCollidable;
            }
            MovableDirective.layerHash[layerName].forEach(function (movable) {
                if (movable === _this || movable.input.isGrabbing)
                    return;
                movable.setPointerEvents(isEnable);
            });
        }
    };
    MovableDirective.prototype.register = function () {
        if (!(this.layerName in MovableDirective.layerHash))
            MovableDirective.layerHash[this.layerName] = [];
        var index = MovableDirective.layerHash[this.layerName].indexOf(this);
        if (index < 0)
            MovableDirective.layerHash[this.layerName].push(this);
    };
    MovableDirective.prototype.unregister = function () {
        if (!(this.layerName in MovableDirective.layerHash))
            return;
        var index = MovableDirective.layerHash[this.layerName].indexOf(this);
        if (-1 < index)
            MovableDirective.layerHash[this.layerName].splice(index, 1);
    };
    MovableDirective.layerHash = {};
    MovableDirective.ɵfac = function MovableDirective_Factory(t) { return new (t || MovableDirective)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["NgZone"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["ElementRef"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](service_batch_service__WEBPACK_IMPORTED_MODULE_4__["BatchService"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](service_pointer_device_service__WEBPACK_IMPORTED_MODULE_5__["PointerDeviceService"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](service_coordinate_service__WEBPACK_IMPORTED_MODULE_6__["CoordinateService"])); };
    MovableDirective.ɵdir = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineDirective"]({ type: MovableDirective, selectors: [["", "appMovable", ""]], inputs: { option: ["movable.option", "option"], isDisable: ["movable.disable", "isDisable"] }, outputs: { onstart: "movable.onstart", ondragstart: "movable.ondragstart", ondrag: "movable.ondrag", ondragend: "movable.ondragend", onend: "movable.onend" } });
    return MovableDirective;
}());

/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](MovableDirective, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Directive"],
        args: [{
                selector: '[appMovable]'
            }]
    }], function () { return [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["NgZone"] }, { type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ElementRef"] }, { type: service_batch_service__WEBPACK_IMPORTED_MODULE_4__["BatchService"] }, { type: service_pointer_device_service__WEBPACK_IMPORTED_MODULE_5__["PointerDeviceService"] }, { type: service_coordinate_service__WEBPACK_IMPORTED_MODULE_6__["CoordinateService"] }]; }, { option: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"],
            args: ['movable.option']
        }], isDisable: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"],
            args: ['movable.disable']
        }], onstart: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"],
            args: ['movable.onstart']
        }], ondragstart: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"],
            args: ['movable.ondragstart']
        }], ondrag: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"],
            args: ['movable.ondrag']
        }], ondragend: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"],
            args: ['movable.ondragend']
        }], onend: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"],
            args: ['movable.onend']
        }] }); })();


/***/ }),

/***/ "+UEV":
/*!**************************************!*\
  !*** ./src/app/class/peer-cursor.ts ***!
  \**************************************/
/*! exports provided: PeerCursor */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PeerCursor", function() { return PeerCursor; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "mrSG");
/* harmony import */ var _core_file_storage_image_storage__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./core/file-storage/image-storage */ "JQpJ");
/* harmony import */ var _core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./core/synchronize-object/decorator */ "1lIu");
/* harmony import */ var _core_synchronize_object_game_object__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./core/synchronize-object/game-object */ "xdgh");
/* harmony import */ var _core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./core/synchronize-object/object-store */ "hm7o");
/* harmony import */ var _core_system__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./core/system */ "yNnI");






var PeerCursor = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"])(PeerCursor, _super);
    function PeerCursor() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.userId = '';
        _this.peerId = '';
        _this.name = '';
        _this.imageIdentifier = '';
        _this.chatColorCode = ["#000000", "#FF0000", "#0099FF"];
        _this._diceImageType = "";
        _this._diceImageIndex = -1;
        return _this;
    }
    PeerCursor_1 = PeerCursor;
    Object.defineProperty(PeerCursor.prototype, "diceImageType", {
        get: function () { return this._diceImageType; },
        set: function (type) { this._diceImageType = type; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(PeerCursor.prototype, "diceImageIndex", {
        get: function () { return this._diceImageIndex; },
        set: function (index) { this._diceImageIndex = index; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(PeerCursor.prototype, "diceImageIdentifier", {
        get: function () {
            if (this.diceImageType != "") {
                return this.diceImageType + "_dice" + "[" + this.diceImageIndex.toString().padStart(2, '0') + "]";
            }
            else {
                return "";
            }
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(PeerCursor.prototype, "isMine", {
        get: function () { return (PeerCursor_1.myCursor && PeerCursor_1.myCursor === this); },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(PeerCursor.prototype, "image", {
        get: function () { return _core_file_storage_image_storage__WEBPACK_IMPORTED_MODULE_1__["ImageStorage"].instance.get(this.imageIdentifier); },
        enumerable: false,
        configurable: true
    });
    // GameObject Lifecycle
    PeerCursor.prototype.onStoreAdded = function () {
        var _this = this;
        _super.prototype.onStoreAdded.call(this);
        if (!this.isMine) {
            _core_system__WEBPACK_IMPORTED_MODULE_5__["EventSystem"].register(this)
                .on('DISCONNECT_PEER', -1000, function (event) {
                if (event.data.peerId !== _this.peerId)
                    return;
                PeerCursor_1.userIdMap.delete(_this.userId);
                PeerCursor_1.peerIdMap.delete(_this.peerId);
                _core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_4__["ObjectStore"].instance.remove(_this);
            });
        }
    };
    // GameObject Lifecycle
    PeerCursor.prototype.onStoreRemoved = function () {
        _super.prototype.onStoreRemoved.call(this);
        _core_system__WEBPACK_IMPORTED_MODULE_5__["EventSystem"].unregister(this);
        PeerCursor_1.userIdMap.delete(this.userId);
        PeerCursor_1.peerIdMap.delete(this.peerId);
    };
    PeerCursor.findByUserId = function (userId) {
        return this.find(PeerCursor_1.userIdMap, userId, true);
    };
    PeerCursor.findByPeerId = function (peerId) {
        return this.find(PeerCursor_1.peerIdMap, peerId, false);
    };
    PeerCursor.find = function (map, key, isUserId) {
        var e_1, _a;
        var identifier = map.get(key);
        if (identifier != null && _core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_4__["ObjectStore"].instance.get(identifier))
            return _core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_4__["ObjectStore"].instance.get(identifier);
        var cursors = _core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_4__["ObjectStore"].instance.getObjects(PeerCursor_1);
        try {
            for (var cursors_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(cursors), cursors_1_1 = cursors_1.next(); !cursors_1_1.done; cursors_1_1 = cursors_1.next()) {
                var cursor = cursors_1_1.value;
                var id = isUserId ? cursor.userId : cursor.peerId;
                if (id === key) {
                    map.set(id, cursor.identifier);
                    return cursor;
                }
            }
        }
        catch (e_1_1) { e_1 = { error: e_1_1 }; }
        finally {
            try {
                if (cursors_1_1 && !cursors_1_1.done && (_a = cursors_1.return)) _a.call(cursors_1);
            }
            finally { if (e_1) throw e_1.error; }
        }
        return null;
    };
    PeerCursor.createMyCursor = function () {
        if (PeerCursor_1.myCursor) {
            console.warn('It is already created.');
            return PeerCursor_1.myCursor;
        }
        PeerCursor_1.myCursor = new PeerCursor_1();
        PeerCursor_1.myCursor.peerId = _core_system__WEBPACK_IMPORTED_MODULE_5__["Network"].peerId;
        PeerCursor_1.myCursor.initialize();
        return PeerCursor_1.myCursor;
    };
    // override
    PeerCursor.prototype.apply = function (context) {
        var userId = context.syncData['userId'];
        var peerId = context.syncData['peerId'];
        if (userId !== this.userId) {
            PeerCursor_1.userIdMap.set(userId, this.identifier);
            PeerCursor_1.userIdMap.delete(this.userId);
        }
        if (peerId !== this.peerId) {
            PeerCursor_1.peerIdMap.set(peerId, this.identifier);
            PeerCursor_1.peerIdMap.delete(this.peerId);
        }
        _super.prototype.apply.call(this, context);
    };
    PeerCursor.prototype.isPeerAUdon = function () {
        return /u.*d.*o.*n/ig.exec(this.peerId) != null;
    };
    var PeerCursor_1;
    PeerCursor.myCursor = null;
    PeerCursor.userIdMap = new Map();
    PeerCursor.peerIdMap = new Map();
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_2__["SyncVar"])()
    ], PeerCursor.prototype, "userId", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_2__["SyncVar"])()
    ], PeerCursor.prototype, "peerId", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_2__["SyncVar"])()
    ], PeerCursor.prototype, "name", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_2__["SyncVar"])()
    ], PeerCursor.prototype, "imageIdentifier", void 0);
    PeerCursor = PeerCursor_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_2__["SyncObject"])('PeerCursor')
    ], PeerCursor);
    return PeerCursor;
}(_core_synchronize_object_game_object__WEBPACK_IMPORTED_MODULE_3__["GameObject"]));



/***/ }),

/***/ "+l6h":
/*!**************************************************************!*\
  !*** ./src/app/component/chat-input/chat-input.component.ts ***!
  \**************************************************************/
/*! exports provided: ChatInputComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ChatInputComponent", function() { return ChatInputComponent; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "mrSG");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "fXoL");
/* harmony import */ var _udonarium_core_file_storage_image_file__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @udonarium/core/file-storage/image-file */ "FjwV");
/* harmony import */ var _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @udonarium/core/synchronize-object/object-store */ "hm7o");
/* harmony import */ var _udonarium_core_system__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @udonarium/core/system */ "yNnI");
/* harmony import */ var _udonarium_core_system_network_peer_context__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @udonarium/core/system/network/peer-context */ "ztsr");
/* harmony import */ var _udonarium_core_system_util_resettable_timeout__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @udonarium/core/system/util/resettable-timeout */ "9ht1");
/* harmony import */ var _udonarium_dice_bot__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @udonarium/dice-bot */ "JUIv");
/* harmony import */ var _udonarium_game_character__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @udonarium/game-character */ "M/aK");
/* harmony import */ var _udonarium_peer_cursor__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @udonarium/peer-cursor */ "+UEV");
/* harmony import */ var component_text_view_text_view_component__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! component/text-view/text-view.component */ "AsCv");
/* harmony import */ var component_chat_color_setting_chat_color_setting_component__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! component/chat-color-setting/chat-color-setting.component */ "mAmu");
/* harmony import */ var _udonarium_core_file_storage_image_storage__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @udonarium/core/file-storage/image-storage */ "JQpJ");
/* harmony import */ var service_chat_message_service__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! service/chat-message.service */ "PEfN");
/* harmony import */ var service_batch_service__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! service/batch.service */ "taL5");
/* harmony import */ var service_panel_service__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! service/panel.service */ "M9xM");
/* harmony import */ var service_pointer_device_service__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! service/pointer-device.service */ "GPP8");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @angular/common */ "ofXK");
/* harmony import */ var _ng_select_ng_select__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! @ng-select/ng-select */ "ZOsW");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! @angular/forms */ "3Pt+");
/* harmony import */ var pipe_safe_pipe__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! pipe/safe.pipe */ "6HCy");






















var _c0 = ["textArea"];
function ChatInputComponent_img_2_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelement"](0, "img", 23);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpipe"](1, "safe");
} if (rf & 2) {
    var ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("src", _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpipeBind2"](1, 1, ctx_r0.imageFile.url, "resourceUrl"), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵsanitizeUrl"]);
} }
function ChatInputComponent_ng_option_6_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "ng-option", 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
} if (rf & 2) {
    var ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("value", ctx_r1.myPeer == null ? null : ctx_r1.myPeer.identifier);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtextInterpolate1"]("", ctx_r1.myPeer == null ? null : ctx_r1.myPeer.name, "\uFF08\u81EA\u5DF1\uFF09");
} }
function ChatInputComponent_ng_option_7_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "ng-option", 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
} if (rf & 2) {
    var gameCharacter_r12 = ctx.$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("value", gameCharacter_r12.identifier);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtextInterpolate1"]("", gameCharacter_r12.name, " ");
} }
function ChatInputComponent_ng_option_12_ng_container_2_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](1, "\uFF08\u81EA\u5DF1\uFF09");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerEnd"]();
} }
function ChatInputComponent_ng_option_12_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "ng-option", 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](2, ChatInputComponent_ng_option_12_ng_container_2_Template, 2, 0, "ng-container", 11);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
} if (rf & 2) {
    var peer_r13 = ctx.$implicit;
    var ctx_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("value", peer_r13.identifier);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtextInterpolate1"]("", peer_r13.name, " ");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", peer_r13 === ctx_r3.myPeer);
} }
function ChatInputComponent_ng_option_14_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "ng-option", 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
} if (rf & 2) {
    var diceBotInfo_r15 = ctx.$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("value", diceBotInfo_r15.id);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtextInterpolate"](diceBotInfo_r15.name);
} }
function ChatInputComponent_ng_container_18_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](1, "font", 24);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](2, "\u203B\u627E\u4E0D\u5230Dice bot\uFF08\u53EF\u80FD\u662F\u5176\u4ED6\u7248\u672C\uFF09\uFF0C\u8ACB\u91CD\u65B0\u9078\u64C7\u3002");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerEnd"]();
} }
var _c1 = function (a0, a1, a2) { return { "background-color": a0, "border": a1, "border-radius": a2 }; };
function ChatInputComponent_ng_container_21_Template(rf, ctx) { if (rf & 1) {
    var _r17 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](1, "div", 25);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("click", function ChatInputComponent_ng_container_21_Template_div_click_1_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r17); var ctx_r16 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](); return ctx_r16.setColorNum(0); });
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](2, "div", 25);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("click", function ChatInputComponent_ng_container_21_Template_div_click_2_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r17); var ctx_r18 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](); return ctx_r18.setColorNum(1); });
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](3, "div", 25);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("click", function ChatInputComponent_ng_container_21_Template_div_click_3_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r17); var ctx_r19 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](); return ctx_r19.setColorNum(2); });
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var ctx_r6 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngStyle", _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpureFunction3"](3, _c1, ctx_r6.playerChatColor_0, "solid " + ctx_r6.colorSelectorBoxBorder_0 + " #666666", ctx_r6.colorSelectorRadius_0));
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngStyle", _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpureFunction3"](7, _c1, ctx_r6.playerChatColor_1, "solid " + ctx_r6.colorSelectorBoxBorder_1 + " #666666", ctx_r6.colorSelectorRadius_1));
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngStyle", _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpureFunction3"](11, _c1, ctx_r6.playerChatColor_2, "solid " + ctx_r6.colorSelectorBoxBorder_2 + " #666666", ctx_r6.colorSelectorRadius_2));
} }
function ChatInputComponent_ng_container_22_Template(rf, ctx) { if (rf & 1) {
    var _r21 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](1, "div", 25);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("click", function ChatInputComponent_ng_container_22_Template_div_click_1_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r21); var ctx_r20 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](); return ctx_r20.setColorNum(0); });
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](2, "div", 25);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("click", function ChatInputComponent_ng_container_22_Template_div_click_2_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r21); var ctx_r22 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](); return ctx_r22.setColorNum(1); });
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](3, "div", 25);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("click", function ChatInputComponent_ng_container_22_Template_div_click_3_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r21); var ctx_r23 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](); return ctx_r23.setColorNum(2); });
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var ctx_r7 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngStyle", _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpureFunction3"](3, _c1, ctx_r7.charactorChatColor_0, "solid " + ctx_r7.colorSelectorBoxBorder_0 + " #666666", ctx_r7.colorSelectorRadius_0));
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngStyle", _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpureFunction3"](7, _c1, ctx_r7.charactorChatColor_1, "solid " + ctx_r7.colorSelectorBoxBorder_1 + " #666666", ctx_r7.colorSelectorRadius_1));
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngStyle", _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpureFunction3"](11, _c1, ctx_r7.charactorChatColor_2, "solid " + ctx_r7.colorSelectorBoxBorder_2 + " #666666", ctx_r7.colorSelectorRadius_2));
} }
function ChatInputComponent_ng_container_29_Template(rf, ctx) { if (rf & 1) {
    var _r25 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](1, "input", 26);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("ngModelChange", function ChatInputComponent_ng_container_29_Template_input_ngModelChange_1_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r25); var ctx_r24 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](); return ctx_r24.tachieNum = $event; });
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpipe"](2, "safe");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](3, " 0/0 \u7ACB\u7E6A ");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var ctx_r8 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵstyleMap"](_angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpipeBind2"](2, 3, "font-size: 0.8em; min-width: 1em; width:" + 10 + "em; --min: 0; --max: " + 0 + "; --val:" + 10 + ";", "style"));
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngModel", ctx_r8.tachieNum);
} }
function ChatInputComponent_ng_container_30_ng_container_4_ng_container_1_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var ctx_r27 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtextInterpolate1"](" ", ctx_r27.selectCharacterTachie.currentValue, " ");
} }
function ChatInputComponent_ng_container_30_ng_container_4_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](1, ChatInputComponent_ng_container_30_ng_container_4_ng_container_1_Template, 2, 1, "ng-container", 11);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var ctx_r26 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", ctx_r26.selectCharacterTachie.currentValue.length > 0);
} }
function ChatInputComponent_ng_container_30_Template(rf, ctx) { if (rf & 1) {
    var _r29 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](1, "input", 27);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("ngModelChange", function ChatInputComponent_ng_container_30_Template_input_ngModelChange_1_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r29); var ctx_r28 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](); return ctx_r28.tachieNum = $event; });
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpipe"](2, "safe");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](4, ChatInputComponent_ng_container_30_ng_container_4_Template, 2, 1, "ng-container", 11);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var ctx_r9 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵstyleMap"](_angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpipeBind2"](2, 7, "font-size: 0.8em; min-width: 1em; width:" + 10 + "em; --min: 0; --max: " + 0 + "; --val:" + 10 + ";", "style"));
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpropertyInterpolate"]("max", ctx_r9.selectCharacterTachieNum - 1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngModel", ctx_r9.tachieNum);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtextInterpolate2"](" ", ctx_r9.tachieNum, "/", ctx_r9.selectCharacterTachieNum - 1, " \u7ACB\u7E6A\n");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", ctx_r9.selectCharacterTachie);
} }
function ChatInputComponent_ng_container_39_span_1_span_2_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "span");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](1, ", ");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
} }
function ChatInputComponent_ng_container_39_span_1_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "span", 29);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](2, ChatInputComponent_ng_container_39_span_1_span_2_Template, 2, 0, "span", 11);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
} if (rf & 2) {
    var peerName_r31 = ctx.$implicit;
    var i_r32 = ctx.index;
    var ctx_r30 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtextInterpolate"](peerName_r31);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", ctx_r30.writingPeerNames.length !== i_r32 + 1);
} }
function ChatInputComponent_ng_container_39_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](1, ChatInputComponent_ng_container_39_span_1_Template, 3, 2, "span", 28);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](2, "span");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](3, " \u8F38\u5165\u4E2D...");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var ctx_r11 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngForOf", ctx_r11.writingPeerNames);
} }
var _c2 = function (a0) { return { "direct-message": a0 }; };
var _c3 = function () { return { standalone: true }; };
var ChatInputComponent = /** @class */ (function () {
    function ChatInputComponent(ngZone, chatMessageService, batchService, panelService, pointerDeviceService) {
        this.ngZone = ngZone;
        this.chatMessageService = chatMessageService;
        this.batchService = batchService;
        this.panelService = panelService;
        this.pointerDeviceService = pointerDeviceService;
        this.onlyCharacters = false;
        this.chatTabidentifier = '';
        this._gameType = '';
        this.gameTypeChange = new _angular_core__WEBPACK_IMPORTED_MODULE_1__["EventEmitter"]();
        this._sendFrom = this.myPeer ? this.myPeer.identifier : '';
        this.sendFromChange = new _angular_core__WEBPACK_IMPORTED_MODULE_1__["EventEmitter"]();
        this._sendTo = '';
        this.sendToChange = new _angular_core__WEBPACK_IMPORTED_MODULE_1__["EventEmitter"]();
        this._text = '';
        this.textChange = new _angular_core__WEBPACK_IMPORTED_MODULE_1__["EventEmitter"]();
        this.chat = new _angular_core__WEBPACK_IMPORTED_MODULE_1__["EventEmitter"]();
        this.tabSwitch = new _angular_core__WEBPACK_IMPORTED_MODULE_1__["EventEmitter"]();
        this.gameHelp = '';
        this.loadDiceName = '';
        this.colorSelectNo_ = 0;
        this.shouldUpdateCharacterList = true;
        this._gameCharacters = [];
        this.writingEventInterval = null;
        this.previousWritingLength = 0;
        this.writingPeers = new Map();
        this.writingPeerNames = [];
        this.calcFitHeightInterval = null;
        this.history = new Array();
        this.currentHistoryIndex = -1;
    }
    Object.defineProperty(ChatInputComponent.prototype, "gameType", {
        get: function () { return this._gameType; },
        set: function (gameType) { this._gameType = gameType; this.gameTypeChange.emit(gameType); },
        enumerable: false,
        configurable: true
    });
    ;
    Object.defineProperty(ChatInputComponent.prototype, "sendFrom", {
        get: function () { return this._sendFrom; },
        set: function (sendFrom) { this._sendFrom = sendFrom; this.sendFromChange.emit(sendFrom); },
        enumerable: false,
        configurable: true
    });
    ;
    Object.defineProperty(ChatInputComponent.prototype, "sendTo", {
        get: function () { return this._sendTo; },
        set: function (sendTo) { this._sendTo = sendTo; this.sendToChange.emit(sendTo); },
        enumerable: false,
        configurable: true
    });
    ;
    Object.defineProperty(ChatInputComponent.prototype, "text", {
        get: function () { return this._text; },
        set: function (text) { this._text = text; this.textChange.emit(text); },
        enumerable: false,
        configurable: true
    });
    ;
    Object.defineProperty(ChatInputComponent.prototype, "tachieNum", {
        get: function () {
            var object = _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_3__["ObjectStore"].instance.get(this.sendFrom);
            if (object instanceof _udonarium_game_character__WEBPACK_IMPORTED_MODULE_8__["GameCharacter"]) {
                return object.selectedTachieNum;
            }
            return 0;
        },
        set: function (num) {
            var object = _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_3__["ObjectStore"].instance.get(this.sendFrom);
            if (object instanceof _udonarium_game_character__WEBPACK_IMPORTED_MODULE_8__["GameCharacter"]) {
                object.selectedTachieNum = num;
            }
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ChatInputComponent.prototype, "isDirect", {
        get: function () { return this.sendTo != null && this.sendTo.length ? true : false; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ChatInputComponent.prototype, "isGameCharacter", {
        //  @Input() isChatWindow: boolean = false;
        get: function () {
            var object = _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_3__["ObjectStore"].instance.get(this.sendFrom);
            if (object instanceof _udonarium_game_character__WEBPACK_IMPORTED_MODULE_8__["GameCharacter"]) {
                return true;
            }
            return false;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ChatInputComponent.prototype, "colorSelectNo", {
        get: function () {
            return this.colorSelectNo_;
        },
        set: function (num) {
            if (num < 0) {
                this.colorSelectNo_ = 0;
            }
            else if (num > 2) {
                this.colorSelectNo_ = 2;
            }
            else {
                this.colorSelectNo_ = num;
            }
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ChatInputComponent.prototype, "colorSelectorBoxBorder_0", {
        get: function () {
            if (0 == this.colorSelectNo)
                return '3px';
            return '1px';
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ChatInputComponent.prototype, "colorSelectorBoxBorder_1", {
        get: function () {
            if (1 == this.colorSelectNo)
                return '3px';
            return '1px';
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ChatInputComponent.prototype, "colorSelectorBoxBorder_2", {
        get: function () {
            if (2 == this.colorSelectNo)
                return '3px';
            return '1px';
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ChatInputComponent.prototype, "colorSelectorRadius_0", {
        get: function () {
            if (0 == this.colorSelectNo)
                return '9px';
            return '0px';
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ChatInputComponent.prototype, "colorSelectorRadius_1", {
        get: function () {
            if (1 == this.colorSelectNo)
                return '9px';
            return '0px';
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ChatInputComponent.prototype, "colorSelectorRadius_2", {
        get: function () {
            if (2 == this.colorSelectNo)
                return '9px';
            return '0px';
        },
        enumerable: false,
        configurable: true
    });
    ChatInputComponent.prototype.charactorChatColor = function (num) {
        var object = _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_3__["ObjectStore"].instance.get(this.sendFrom);
        if (object instanceof _udonarium_game_character__WEBPACK_IMPORTED_MODULE_8__["GameCharacter"]) {
            return object.chatColorCode[num];
        }
        else {
            return '#000000';
        }
    };
    Object.defineProperty(ChatInputComponent.prototype, "selectChatColor", {
        get: function () {
            var object = _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_3__["ObjectStore"].instance.get(this.sendFrom);
            if (object instanceof _udonarium_game_character__WEBPACK_IMPORTED_MODULE_8__["GameCharacter"]) {
                return this.charactorChatColor(this.colorSelectNo);
            }
            else {
                return this.playerChatColor(this.colorSelectNo);
            }
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ChatInputComponent.prototype, "charactorChatColor_0", {
        get: function () {
            return this.charactorChatColor(0);
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ChatInputComponent.prototype, "charactorChatColor_1", {
        get: function () {
            return this.charactorChatColor(1);
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ChatInputComponent.prototype, "charactorChatColor_2", {
        get: function () {
            return this.charactorChatColor(2);
        },
        enumerable: false,
        configurable: true
    });
    ChatInputComponent.prototype.playerChatColor = function (num) {
        return this.myPeer.chatColorCode[num];
    };
    Object.defineProperty(ChatInputComponent.prototype, "playerChatColor_0", {
        get: function () {
            return this.playerChatColor(0);
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ChatInputComponent.prototype, "playerChatColor_1", {
        get: function () {
            return this.playerChatColor(1);
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ChatInputComponent.prototype, "playerChatColor_2", {
        get: function () {
            return this.playerChatColor(2);
        },
        enumerable: false,
        configurable: true
    });
    ChatInputComponent.prototype.setColorNum = function (num) {
        this.colorSelectNo = num;
    };
    Object.defineProperty(ChatInputComponent.prototype, "selectCharacterTachie", {
        get: function () {
            var object = _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_3__["ObjectStore"].instance.get(this.sendFrom);
            if (object instanceof _udonarium_game_character__WEBPACK_IMPORTED_MODULE_8__["GameCharacter"]) {
                if (object.imageDataElement.children.length > this.tachieNum) {
                    return object.imageDataElement.children[this.tachieNum];
                }
            }
            return null;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ChatInputComponent.prototype, "selectCharacterTachieNum", {
        get: function () {
            var object = _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_3__["ObjectStore"].instance.get(this.sendFrom);
            if (object instanceof _udonarium_game_character__WEBPACK_IMPORTED_MODULE_8__["GameCharacter"]) {
                return object.imageDataElement.children.length;
            }
            else if (object instanceof _udonarium_peer_cursor__WEBPACK_IMPORTED_MODULE_9__["PeerCursor"]) {
                return 0;
            }
            return 0;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ChatInputComponent.prototype, "imageFile", {
        get: function () {
            if (this.selectCharacterTachie) {
                var image_1 = _udonarium_core_file_storage_image_storage__WEBPACK_IMPORTED_MODULE_12__["ImageStorage"].instance.get(this.selectCharacterTachie.value);
                return image_1 ? image_1 : _udonarium_core_file_storage_image_file__WEBPACK_IMPORTED_MODULE_2__["ImageFile"].Empty;
            }
            var object = _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_3__["ObjectStore"].instance.get(this.sendFrom);
            var image = null;
            if (object instanceof _udonarium_game_character__WEBPACK_IMPORTED_MODULE_8__["GameCharacter"]) {
                image = object.imageFile;
            }
            else if (object instanceof _udonarium_peer_cursor__WEBPACK_IMPORTED_MODULE_9__["PeerCursor"]) {
                image = object.image;
            }
            return image ? image : _udonarium_core_file_storage_image_file__WEBPACK_IMPORTED_MODULE_2__["ImageFile"].Empty;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ChatInputComponent.prototype, "gameCharacters", {
        get: function () {
            var _this = this;
            if (this.shouldUpdateCharacterList) {
                this.shouldUpdateCharacterList = false;
                this._gameCharacters = _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_3__["ObjectStore"].instance
                    .getObjects(_udonarium_game_character__WEBPACK_IMPORTED_MODULE_8__["GameCharacter"])
                    .filter(function (character) { return _this.allowsChat(character); });
            }
            return this._gameCharacters;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ChatInputComponent.prototype, "diceBotInfos", {
        get: function () { return _udonarium_dice_bot__WEBPACK_IMPORTED_MODULE_7__["DiceBot"].diceBotInfos; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ChatInputComponent.prototype, "myPeer", {
        get: function () { return _udonarium_peer_cursor__WEBPACK_IMPORTED_MODULE_9__["PeerCursor"].myCursor; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ChatInputComponent.prototype, "otherPeers", {
        get: function () { return _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_3__["ObjectStore"].instance.getObjects(_udonarium_peer_cursor__WEBPACK_IMPORTED_MODULE_9__["PeerCursor"]); },
        enumerable: false,
        configurable: true
    });
    ChatInputComponent.prototype.ngOnInit = function () {
        var _this = this;
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_4__["EventSystem"].register(this)
            .on('MESSAGE_ADDED', function (event) {
            if (event.data.tabIdentifier !== _this.chatTabidentifier)
                return;
            var message = _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_3__["ObjectStore"].instance.get(event.data.messageIdentifier);
            var peerCursor = _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_3__["ObjectStore"].instance.getObjects(_udonarium_peer_cursor__WEBPACK_IMPORTED_MODULE_9__["PeerCursor"]).find(function (obj) { return obj.userId === message.from; });
            var sendFrom = peerCursor ? peerCursor.peerId : '?';
            if (_this.writingPeers.has(sendFrom)) {
                _this.writingPeers.get(sendFrom).stop();
                _this.writingPeers.delete(sendFrom);
                _this.updateWritingPeerNames();
            }
        })
            .on('UPDATE_GAME_OBJECT', -1000, function (event) {
            if (event.data.aliasName !== _udonarium_game_character__WEBPACK_IMPORTED_MODULE_8__["GameCharacter"].aliasName)
                return;
            _this.shouldUpdateCharacterList = true;
            if (event.data.identifier !== _this.sendFrom)
                return;
            var gameCharacter = _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_3__["ObjectStore"].instance.get(event.data.identifier);
            if (gameCharacter && !_this.allowsChat(gameCharacter)) {
                if (0 < _this.gameCharacters.length && _this.onlyCharacters) {
                    _this.sendFrom = _this.gameCharacters[0].identifier;
                }
                else {
                    _this.sendFrom = _this.myPeer.identifier;
                }
            }
        })
            .on('DISCONNECT_PEER', function (event) {
            var object = _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_3__["ObjectStore"].instance.get(_this.sendTo);
            if (object instanceof _udonarium_peer_cursor__WEBPACK_IMPORTED_MODULE_9__["PeerCursor"] && object.peerId === event.data.peerId) {
                _this.sendTo = '';
            }
        })
            .on('WRITING_A_MESSAGE', function (event) {
            if (event.isSendFromSelf || event.data !== _this.chatTabidentifier)
                return;
            if (!_this.writingPeers.has(event.sendFrom)) {
                _this.writingPeers.set(event.sendFrom, new _udonarium_core_system_util_resettable_timeout__WEBPACK_IMPORTED_MODULE_6__["ResettableTimeout"](function () {
                    _this.writingPeers.delete(event.sendFrom);
                    _this.updateWritingPeerNames();
                    _this.ngZone.run(function () { });
                }, 2000));
            }
            _this.writingPeers.get(event.sendFrom).reset();
            _this.updateWritingPeerNames();
            _this.batchService.add(function () { return _this.ngZone.run(function () { }); }, _this);
        });
    };
    ChatInputComponent.prototype.ngOnDestroy = function () {
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_4__["EventSystem"].unregister(this);
        this.batchService.remove(this);
    };
    ChatInputComponent.prototype.updateWritingPeerNames = function () {
        this.writingPeerNames = Array.from(this.writingPeers.keys()).map(function (peerId) {
            var peer = _udonarium_peer_cursor__WEBPACK_IMPORTED_MODULE_9__["PeerCursor"].findByPeerId(peerId);
            return peer ? peer.name : '';
        });
    };
    ChatInputComponent.prototype.onInput = function () {
        var _this = this;
        if (this.writingEventInterval === null && this.previousWritingLength <= this.text.length) {
            var sendTo = null;
            if (this.isDirect) {
                var object = _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_3__["ObjectStore"].instance.get(this.sendTo);
                if (object instanceof _udonarium_peer_cursor__WEBPACK_IMPORTED_MODULE_9__["PeerCursor"]) {
                    var peer = _udonarium_core_system_network_peer_context__WEBPACK_IMPORTED_MODULE_5__["PeerContext"].parse(object.peerId);
                    if (peer)
                        sendTo = peer.peerId;
                }
            }
            _udonarium_core_system__WEBPACK_IMPORTED_MODULE_4__["EventSystem"].call('WRITING_A_MESSAGE', this.chatTabidentifier, sendTo);
            this.writingEventInterval = setTimeout(function () {
                _this.writingEventInterval = null;
            }, 200);
        }
        this.previousWritingLength = this.text.length;
        this.calcFitHeight();
    };
    ChatInputComponent.prototype.moveHistory = function (event, direction) {
        if (event)
            event.preventDefault();
        if (direction < 0 && this.currentHistoryIndex < 0) {
            this.currentHistoryIndex = this.history.length - 1;
        }
        else if (direction > 0 && this.currentHistoryIndex >= this.history.length - 1) {
            this.currentHistoryIndex = -1;
        }
        else {
            this.currentHistoryIndex = this.currentHistoryIndex + direction;
        }
        var histText;
        if (this.currentHistoryIndex < 0) {
            histText = '';
        }
        else {
            histText = this.history[this.currentHistoryIndex];
        }
        this.text = histText;
        this.previousWritingLength = this.text.length;
        this.kickCalcFitHeight();
    };
    ChatInputComponent.prototype.tabSwitchAction = function (event, direction) {
        if (event)
            event.preventDefault();
        this.tabSwitch.emit(direction);
    };
    ChatInputComponent.prototype.sendChat = function (event) {
        var _this = this;
        if (event)
            event.preventDefault();
        if (!this.text.length)
            return;
        if (event && event.keyCode !== 13)
            return;
        if (!this.sendFrom.length)
            this.sendFrom = this.myPeer.identifier;
        if (this.history.length >= ChatInputComponent.MAX_HISTORY_NUM) {
            this.history.shift();
        }
        this.history.push(this.text);
        this.currentHistoryIndex = -1;
        var message = {
            text: this.text, sendFrom: this.sendFrom, sendTo: this.sendTo,
            tachieNum: this.tachieNum, messColor: this.selectChatColor,
        };
        _udonarium_dice_bot__WEBPACK_IMPORTED_MODULE_7__["DiceBot"].loadGameSystemAsync(this.gameType).then(function (gameSystem) {
            _this.chat.emit({
                text: message.text, gameSystem: gameSystem, sendFrom: message.sendFrom,
                sendTo: message.sendTo, tachieNum: message.tachieNum, messColor: message.messColor,
            });
        });
        this.text = '';
        this.previousWritingLength = this.text.length;
        this.kickCalcFitHeight();
    };
    ChatInputComponent.prototype.kickCalcFitHeight = function () {
        var _this = this;
        if (this.calcFitHeightInterval == null) {
            this.calcFitHeightInterval = setTimeout(function () {
                _this.calcFitHeightInterval = null;
                _this.calcFitHeight();
            }, 0);
        }
    };
    ChatInputComponent.prototype.calcFitHeight = function () {
        var textArea = this.textAreaElementRef.nativeElement;
        textArea.style.height = '';
        if (textArea.scrollHeight >= textArea.offsetHeight) {
            textArea.style.height = textArea.scrollHeight + 'px';
        }
    };
    ChatInputComponent.prototype.loadDiceBot = function (gameType) {
        console.log('onChangeGameType ready');
        _udonarium_dice_bot__WEBPACK_IMPORTED_MODULE_7__["DiceBot"].getHelpMessage(gameType).then(function (help) {
            console.log('onChangeGameType done\n' + help);
        });
    };
    ChatInputComponent.prototype.isGameTypeInList = function () {
        var e_1, _a;
        try {
            for (var _b = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(this.diceBotInfos), _c = _b.next(); !_c.done; _c = _b.next()) {
                var diceBotInfo = _c.value;
                if (diceBotInfo.id === this.gameType) {
                    return true;
                }
            }
        }
        catch (e_1_1) { e_1 = { error: e_1_1 }; }
        finally {
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            }
            finally { if (e_1) throw e_1.error; }
        }
        return false;
    };
    ChatInputComponent.prototype.showDicebotHelp = function () {
        var _this = this;
        _udonarium_dice_bot__WEBPACK_IMPORTED_MODULE_7__["DiceBot"].getHelpMessage(this.gameType).then(function (help) {
            var e_2, _a;
            _this.gameHelp = help;
            var gameName = 'DiceBot';
            try {
                for (var _b = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(_udonarium_dice_bot__WEBPACK_IMPORTED_MODULE_7__["DiceBot"].diceBotInfos), _c = _b.next(); !_c.done; _c = _b.next()) {
                    var diceBotInfo = _c.value;
                    if (diceBotInfo.id === _this.gameType) {
                        gameName = 'DiceBot<' + diceBotInfo.name + '＞';
                    }
                }
            }
            catch (e_2_1) { e_2 = { error: e_2_1 }; }
            finally {
                try {
                    if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
                }
                finally { if (e_2) throw e_2.error; }
            }
            gameName += '的說明';
            var coordinate = _this.pointerDeviceService.pointers[0];
            var option = { left: coordinate.x, top: coordinate.y, width: 600, height: 500 };
            var textView = _this.panelService.open(component_text_view_text_view_component__WEBPACK_IMPORTED_MODULE_10__["TextViewComponent"], option);
            textView.title = gameName;
            textView.text =
                '【擲骰BOT】你可以在聊天中進行自定義的擲骰\n'
                    + '例如輸入）2D6+1　攻撃！\n'
                    + '會輸出）   2D6+1　攻撃！\n'
                    + '　　　　  diceBot: (2d6) → 7\n'
                    + '如上面一樣,在骰子數字後方隔空白位打字,就可以進行發言。\n'
                    + '以下還有其他例子\n'
                    + '3D6+1>=9 ：骰出3d6+1然後判定是否大過等於9\n'
                    + '1D100<=50 ：進行D100 50%的判定\n'
                    + '3U6[5] ：擲出3D6，每骰出一粒5或以上的話會有獎勵骰一粒(可以無限獎勵)\n'
                    + '3B6 ：和3D6一樣,但不進行合併計算\n'
                    + '10B6>=4 ：擲出10d6,計算其中有多少粒骰大過等於4\n'
                    + '(8/2)D(4+6)<=(5*3)：骰子粒數和條件可以用算式\n'
                    + 'C(10-4*3/2+2)：C(計算式）也可以只進行數字計算\n'
                    + 'Choice[a,b,c]：列出不同的元素去選擇。例如隨機選出攻擊對象\n'
                    + 'S3D6 ： 進行暗骰，其他人看不到結果\n'
                    + '3D6/2 ： 骰出的點數除2 (捨棄小數點)。RoundUp /2U、四捨五入 /2R。\n'
                    + 'D66 ： 投擲D66。順序根據遊戲設定。D66N：正常、D66S：升序。\n'
                    + '===================================\n'
                    + _this.gameHelp;
        });
    };
    ChatInputComponent.prototype.shoeColorSetting = function () {
        var object = _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_3__["ObjectStore"].instance.get(this.sendFrom);
        if (object instanceof _udonarium_game_character__WEBPACK_IMPORTED_MODULE_8__["GameCharacter"]) {
            var coordinate = this.pointerDeviceService.pointers[0];
            var title = '色設定';
            if (object.name.length)
                title += ' - ' + object.name;
            //クロームのカラーピッカーがスペースが足りないと黒表示されることへの暫定対処　20210321
            //      let option: PanelOption = { title: title, left: coordinate.x + 50, top: coordinate.y - 150, width: 300, height: 120 };
            var option = { title: title, left: coordinate.x + 50, top: coordinate.y - 300, width: 300, height: 170 };
            var component = this.panelService.open(component_chat_color_setting_chat_color_setting_component__WEBPACK_IMPORTED_MODULE_11__["ChatColorSettingComponent"], option);
            component.tabletopObject = object;
        }
        else {
            var coordinate = this.pointerDeviceService.pointers[0];
            var title = '色設定';
            //      let option: PanelOption = { title: title, left: coordinate.x + 50, top: coordinate.y - 150, width: 300, height: 120 };
            var option = { title: title, left: coordinate.x + 50, top: coordinate.y - 300, width: 300, height: 170 };
            var component = this.panelService.open(component_chat_color_setting_chat_color_setting_component__WEBPACK_IMPORTED_MODULE_11__["ChatColorSettingComponent"], option);
            component.tabletopObject = null;
        }
    };
    ChatInputComponent.prototype.allowsChat = function (gameCharacter) {
        var e_3, _a;
        switch (gameCharacter.location.name) {
            case 'table':
                return !gameCharacter.nonTalkFlag;
            case this.myPeer.peerId:
                if (gameCharacter.nonTalkFlag)
                    return false;
                return true;
            case 'graveyard':
                return false;
            default:
                if (gameCharacter.nonTalkFlag)
                    return false;
                try {
                    for (var _b = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(_udonarium_core_system__WEBPACK_IMPORTED_MODULE_4__["Network"].peerContexts), _c = _b.next(); !_c.done; _c = _b.next()) {
                        var conn = _c.value;
                        if (conn.isOpen && gameCharacter.location.name === conn.peerId) {
                            return false;
                        }
                    }
                }
                catch (e_3_1) { e_3 = { error: e_3_1 }; }
                finally {
                    try {
                        if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
                    }
                    finally { if (e_3) throw e_3.error; }
                }
                return true;
        }
    };
    ChatInputComponent.MAX_HISTORY_NUM = 1000;
    ChatInputComponent.ɵfac = function ChatInputComponent_Factory(t) { return new (t || ChatInputComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_1__["NgZone"]), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdirectiveInject"](service_chat_message_service__WEBPACK_IMPORTED_MODULE_13__["ChatMessageService"]), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdirectiveInject"](service_batch_service__WEBPACK_IMPORTED_MODULE_14__["BatchService"]), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdirectiveInject"](service_panel_service__WEBPACK_IMPORTED_MODULE_15__["PanelService"]), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdirectiveInject"](service_pointer_device_service__WEBPACK_IMPORTED_MODULE_16__["PointerDeviceService"])); };
    ChatInputComponent.ɵcmp = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdefineComponent"]({ type: ChatInputComponent, selectors: [["chat-input"]], viewQuery: function ChatInputComponent_Query(rf, ctx) { if (rf & 1) {
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵstaticViewQuery"](_c0, true);
        } if (rf & 2) {
            var _t = void 0;
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵqueryRefresh"](_t = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵloadQuery"]()) && (ctx.textAreaElementRef = _t.first);
        } }, inputs: { onlyCharacters: "onlyCharacters", chatTabidentifier: "chatTabidentifier", _gameType: ["gameType", "_gameType"], _sendFrom: ["sendFrom", "_sendFrom"], _sendTo: ["sendTo", "_sendTo"], _text: ["text", "_text"] }, outputs: { gameTypeChange: "gameTypeChange", sendFromChange: "sendFromChange", sendToChange: "sendToChange", textChange: "textChange", chat: "chat", tabSwitch: "tabSwitch" }, decls: 40, vars: 26, consts: [[1, "table", 3, "ngClass"], [1, "table-cell", "imagebox"], ["class", "image", 3, "src", 4, "ngIf"], [1, "table-cell", 2, "width", "100%"], [1, "ud-select", 2, "width", "12em", 3, "ngModel", "clearable", "ngModelChange"], [3, "value", 4, "ngIf"], [3, "value", 4, "ngFor", "ngForOf"], [1, "ud-select", 2, "width", "10em", 3, "ngModel", "clearable", "ngModelChange"], [3, "value"], [1, "ud-select", 2, "width", "15em", "margin-left", ".1em", 3, "ngModel", "ngModelOptions", "clearable", "change", "ngModelChange"], [3, "click"], [4, "ngIf"], [1, "table"], [1, "table-cell", "color-box-tag"], [1, "table-cell", "color-setting-tag"], [1, "color-setting", "small-font", 3, "click"], [1, "material-icons", "small-font"], [1, "table-cell", "tachie-tag"], [1, "table-cell"], ["placeholder", "Enter:\u9001\u51FA Shift+Enter:\u63DB\u884C Ctrl+\u4E0A\u4E0B:\u5C65\u6B74 Ctrl+\u5DE6\u53F3:\u5207\u63DB\u5206\u9801", 1, "chat-input", 3, "ngModel", "ngModelOptions", "ngModelChange", "input", "keydown.enter", "keydown.control.arrowup", "keydown.control.arrowdown", "keydown.control.arrowleft", "keydown.control.arrowright"], ["textArea", ""], ["type", "submit", 3, "click"], [1, "writing-info"], [1, "image", 3, "src"], ["size", "1.5", "color", "#FF0000"], [1, "color", 3, "ngStyle", "click"], ["type", "range", "min", "0", "max", "0", 3, "ngModel", "ngModelChange"], ["type", "range", "min", "0", 3, "max", "ngModel", "ngModelChange"], ["style", "font-weight: bold;", 4, "ngFor", "ngForOf"], [2, "font-weight", "bold"]], template: function ChatInputComponent_Template(rf, ctx) { if (rf & 1) {
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "div", 0);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](1, "div", 1);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](2, ChatInputComponent_img_2_Template, 2, 4, "img", 2);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](3, "div", 3);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](4, "div");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](5, "ng-select", 4);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("ngModelChange", function ChatInputComponent_Template_ng_select_ngModelChange_5_listener($event) { return ctx.sendFrom = $event; });
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](6, ChatInputComponent_ng_option_6_Template, 2, 2, "ng-option", 5);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](7, ChatInputComponent_ng_option_7_Template, 2, 2, "ng-option", 6);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](8, " \uFF1E ");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](9, "ng-select", 7);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("ngModelChange", function ChatInputComponent_Template_ng_select_ngModelChange_9_listener($event) { return ctx.sendTo = $event; });
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](10, "ng-option", 8);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](11, "\u6240\u6709\u4EBA");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](12, ChatInputComponent_ng_option_12_Template, 3, 3, "ng-option", 6);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](13, "ng-select", 9);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("change", function ChatInputComponent_Template_ng_select_change_13_listener($event) { return ctx.loadDiceBot($event); })("ngModelChange", function ChatInputComponent_Template_ng_select_ngModelChange_13_listener($event) { return ctx.gameType = $event; });
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](14, ChatInputComponent_ng_option_14_Template, 2, 2, "ng-option", 6);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](15, "button", 10);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("click", function ChatInputComponent_Template_button_click_15_listener() { return ctx.showDicebotHelp(); });
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](16, "?");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](17, "div");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](18, ChatInputComponent_ng_container_18_Template, 3, 0, "ng-container", 11);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](19, "div", 12);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](20, "div", 13);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](21, ChatInputComponent_ng_container_21_Template, 4, 15, "ng-container", 11);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](22, ChatInputComponent_ng_container_22_Template, 4, 15, "ng-container", 11);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](23, "div", 14);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](24, "button", 15);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("click", function ChatInputComponent_Template_button_click_24_listener() { return ctx.shoeColorSetting(); });
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](25, "i", 16);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](26, "settings");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](27, "\u8272\u8A2D\u5B9A");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](28, "div", 17);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](29, ChatInputComponent_ng_container_29_Template, 4, 6, "ng-container", 11);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](30, ChatInputComponent_ng_container_30_Template, 5, 10, "ng-container", 11);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelement"](31, "div", 18);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](32, "div");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](33, "form");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](34, "textarea", 19, 20);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("ngModelChange", function ChatInputComponent_Template_textarea_ngModelChange_34_listener($event) { return ctx.text = $event; })("input", function ChatInputComponent_Template_textarea_input_34_listener() { return ctx.onInput(); })("keydown.enter", function ChatInputComponent_Template_textarea_keydown_enter_34_listener($event) { return ctx.sendChat($event); })("keydown.control.arrowup", function ChatInputComponent_Template_textarea_keydown_control_arrowup_34_listener($event) { return ctx.moveHistory($event, -1); })("keydown.control.arrowdown", function ChatInputComponent_Template_textarea_keydown_control_arrowdown_34_listener($event) { return ctx.moveHistory($event, 1); })("keydown.control.arrowleft", function ChatInputComponent_Template_textarea_keydown_control_arrowleft_34_listener($event) { return ctx.tabSwitchAction($event, -1); })("keydown.control.arrowright", function ChatInputComponent_Template_textarea_keydown_control_arrowright_34_listener($event) { return ctx.tabSwitchAction($event, 1); });
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](36, "button", 21);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("click", function ChatInputComponent_Template_button_click_36_listener() { return ctx.sendChat(null); });
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](37, "SEND");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](38, "div", 22);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](39, ChatInputComponent_ng_container_39_Template, 4, 1, "ng-container", 11);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
        } if (rf & 2) {
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngClass", _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpureFunction1"](22, _c2, ctx.isDirect));
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](2);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", 0 < ctx.imageFile.url.length);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](3);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngModel", ctx.sendFrom)("clearable", false);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", !ctx.onlyCharacters);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngForOf", ctx.gameCharacters);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](2);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngModel", ctx.sendTo)("clearable", false);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("value", "");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](2);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngForOf", ctx.otherPeers);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngModel", ctx.gameType)("ngModelOptions", _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpureFunction0"](24, _c3))("clearable", false);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngForOf", ctx.diceBotInfos);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](4);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", !ctx.isGameTypeInList());
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](3);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", !ctx.isGameCharacter);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", ctx.isGameCharacter);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](7);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", 1 > ctx.selectCharacterTachieNum);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", 1 <= ctx.selectCharacterTachieNum);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](4);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngModel", ctx.text)("ngModelOptions", _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpureFunction0"](25, _c3));
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](5);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", 0 < ctx.writingPeerNames.length);
        } }, directives: [_angular_common__WEBPACK_IMPORTED_MODULE_17__["NgClass"], _angular_common__WEBPACK_IMPORTED_MODULE_17__["NgIf"], _ng_select_ng_select__WEBPACK_IMPORTED_MODULE_18__["NgSelectComponent"], _angular_forms__WEBPACK_IMPORTED_MODULE_19__["NgControlStatus"], _angular_forms__WEBPACK_IMPORTED_MODULE_19__["NgModel"], _angular_common__WEBPACK_IMPORTED_MODULE_17__["NgForOf"], _ng_select_ng_select__WEBPACK_IMPORTED_MODULE_18__["ɵr"], _angular_forms__WEBPACK_IMPORTED_MODULE_19__["ɵangular_packages_forms_forms_y"], _angular_forms__WEBPACK_IMPORTED_MODULE_19__["NgControlStatusGroup"], _angular_forms__WEBPACK_IMPORTED_MODULE_19__["NgForm"], _angular_forms__WEBPACK_IMPORTED_MODULE_19__["DefaultValueAccessor"], _angular_common__WEBPACK_IMPORTED_MODULE_17__["NgStyle"], _angular_forms__WEBPACK_IMPORTED_MODULE_19__["RangeValueAccessor"]], pipes: [pipe_safe_pipe__WEBPACK_IMPORTED_MODULE_20__["SafePipe"]], styles: [".color-setting[_ngcontent-%COMP%] {\r\n  background-color: transparent;\r\n  color: #444; \r\n  border: solid 1px #555;\r\n  padding: 2px 4px;\r\n  border-radius: 5px;\r\n  cursor: pointer;\r\n}\r\n\r\n.color-setting[_ngcontent-%COMP%]:hover {\r\n  background-color: #888;\r\n  color: #eee;\r\n  border: solid 1px #555;\r\n}\r\n\r\n.small-font[_ngcontent-%COMP%] {\r\n  font-size: 12px;\r\n  vertical-align: middle;\r\n}\r\n\r\n.material-icons[_ngcontent-%COMP%] {\r\n  vertical-align: middle;\r\n  font-size: 1.0rem;\r\n}\r\n\r\ndiv.color[_ngcontent-%COMP%]{\r\n  display: inline-block;\r\n  border: solid 1px #000;\r\n  box-sizing: border-box;\r\n  position: relative;\r\n  top:4px;\r\n  width:18px;\r\n  height:18px;\r\n  margin-left:2px;\r\n  margin-right:2px;\r\n  background-color: #888;\r\n  cursor: pointer;\r\n}\r\n\r\nbutton.color[_ngcontent-%COMP%]:focus {\r\n  outline: none;\r\n}\r\n\r\nbutton.color[_ngcontent-%COMP%]:hover {\r\n\r\n}\r\n\r\n.table[_ngcontent-%COMP%] {\r\n  box-sizing: border-box;\r\n  padding : 5px;\r\n  \r\n  \r\n  display: table;\r\n  \r\n  width: 100%;\r\n}\r\n\r\n.table-cell[_ngcontent-%COMP%] {\r\n  display: table-cell;\r\n}\r\n\r\n.imagebox[_ngcontent-%COMP%] {\r\n  display: inline-block;\r\n  width: 50px;\r\n  height: 50px;\r\n\r\n  max-width: 50px;\r\n  max-height: 50px;\r\n  vertical-align: top;\r\n  text-align: center;\r\n}\r\n\r\n.image[_ngcontent-%COMP%]{\r\n  width: 100%;\r\n  height: 100%;\r\n  vertical-align: bottom;\r\n  object-fit: cover;\r\n  object-position: 50% 0%;\r\n}\r\n\r\n.chat-input[_ngcontent-%COMP%] {\r\n  font-family: inherit;\r\n  font-size: 13px;\r\n\r\n  width: calc(100% - 100px);\r\n  height: calc(1em + 4px);\r\n  min-height: calc(1em + 7px);\r\n  max-height: calc(6em + 7px);\r\n  resize: none;\r\n  overflow: auto;\r\n\r\n  padding: 1px;\r\n  margin: 5px;\r\n\r\n  white-space: pre-wrap;\r\n  word-wrap: break-word;\r\n  overflow-wrap: anywhere;\r\n  word-break: break-word;\r\n  vertical-align: bottom;\r\n}\r\n\r\n.writing-info[_ngcontent-%COMP%] {\r\n  font-size: 8px;\r\n  height: 1.3em;\r\n}\r\n\r\n.direct-message[_ngcontent-%COMP%] {\r\n  background-color: #555;\r\n  color: #CCC;\r\n}\r\n\r\n.color-box-tag[_ngcontent-%COMP%] {\r\n  width: 4.5em;\r\n  max-width: 4.5em;\r\n  min-width: 4.5em;\r\n}\r\n\r\n.color-setting-tag[_ngcontent-%COMP%] {\r\n  width: 4.5em;\r\n  max-width: 4.5em;\r\n  min-width: 4.5em;\r\n\r\n}\r\n\r\n.tachie-tag[_ngcontent-%COMP%] {\r\n  vertical-align: bottom;\r\n  overflow: hidden;\r\n\r\n  max-width:10em;\r\n  white-space: nowrap;\r\n}\r\n\r\n.tachie-num[_ngcontent-%COMP%] {\r\n  font-weight: bold;\r\n  width: 4em;\r\n  text-align: right;\r\n  font-family: inherit;\r\n}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNoYXQtaW5wdXQuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLDZCQUE2QjtFQUM3QixXQUFXO0VBQ1gsc0JBQXNCO0VBQ3RCLGdCQUFnQjtFQUNoQixrQkFBa0I7RUFDbEIsZUFBZTtBQUNqQjs7QUFFQTtFQUNFLHNCQUFzQjtFQUN0QixXQUFXO0VBQ1gsc0JBQXNCO0FBQ3hCOztBQUVBO0VBQ0UsZUFBZTtFQUNmLHNCQUFzQjtBQUN4Qjs7QUFFQTtFQUNFLHNCQUFzQjtFQUN0QixpQkFBaUI7QUFDbkI7O0FBSUE7RUFDRSxxQkFBcUI7RUFDckIsc0JBQXNCO0VBQ3RCLHNCQUFzQjtFQUN0QixrQkFBa0I7RUFDbEIsT0FBTztFQUNQLFVBQVU7RUFDVixXQUFXO0VBQ1gsZUFBZTtFQUNmLGdCQUFnQjtFQUNoQixzQkFBc0I7RUFDdEIsZUFBZTtBQUNqQjs7QUFFQTtFQUNFLGFBQWE7QUFDZjs7QUFDQTs7QUFFQTs7QUFJQTtFQUNFLHNCQUFzQjtFQUN0QixhQUFhO0VBQ2Isb0JBQW9CO0VBQ3BCLGNBQWM7RUFDZCxjQUFjO0VBQ2QsNEJBQTRCO0VBQzVCLFdBQVc7QUFDYjs7QUFFQTtFQUNFLG1CQUFtQjtBQUNyQjs7QUFFQTtFQUNFLHFCQUFxQjtFQUNyQixXQUFXO0VBQ1gsWUFBWTtBQUNkLHFCQUFxQjtFQUNuQixlQUFlO0VBQ2YsZ0JBQWdCO0VBQ2hCLG1CQUFtQjtFQUNuQixrQkFBa0I7QUFDcEI7O0FBRUE7RUFDRSxXQUFXO0VBQ1gsWUFBWTtFQUNaLHNCQUFzQjtFQUN0QixpQkFBaUI7RUFDakIsdUJBQXVCO0FBQ3pCOztBQUVBO0VBQ0Usb0JBQW9CO0VBQ3BCLGVBQWU7O0VBRWYseUJBQXlCO0VBQ3pCLHVCQUF1QjtFQUN2QiwyQkFBMkI7RUFDM0IsMkJBQTJCO0VBQzNCLFlBQVk7RUFDWixjQUFjOztFQUVkLFlBQVk7RUFDWixXQUFXOztFQUVYLHFCQUFxQjtFQUNyQixxQkFBcUI7RUFDckIsdUJBQXVCO0VBQ3ZCLHNCQUFzQjtFQUN0QixzQkFBc0I7QUFDeEI7O0FBRUE7RUFDRSxjQUFjO0VBQ2QsYUFBYTtBQUNmOztBQUVBO0VBQ0Usc0JBQXNCO0VBQ3RCLFdBQVc7QUFDYjs7QUFFQTtFQUNFLFlBQVk7RUFDWixnQkFBZ0I7RUFDaEIsZ0JBQWdCO0FBQ2xCOztBQUNBO0VBQ0UsWUFBWTtFQUNaLGdCQUFnQjtFQUNoQixnQkFBZ0I7QUFDbEIsMkJBQTJCO0FBQzNCOztBQUVBO0VBQ0Usc0JBQXNCO0VBQ3RCLGdCQUFnQjtBQUNsQiwyQkFBMkI7RUFDekIsY0FBYztFQUNkLG1CQUFtQjtBQUNyQjs7QUFFQTtFQUNFLGlCQUFpQjtFQUNqQixVQUFVO0VBQ1YsaUJBQWlCO0VBQ2pCLG9CQUFvQjtBQUN0QiIsImZpbGUiOiJjaGF0LWlucHV0LmNvbXBvbmVudC5jc3MiLCJzb3VyY2VzQ29udGVudCI6WyIuY29sb3Itc2V0dGluZyB7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogdHJhbnNwYXJlbnQ7XHJcbiAgY29sb3I6ICM0NDQ7IFxyXG4gIGJvcmRlcjogc29saWQgMXB4ICM1NTU7XHJcbiAgcGFkZGluZzogMnB4IDRweDtcclxuICBib3JkZXItcmFkaXVzOiA1cHg7XHJcbiAgY3Vyc29yOiBwb2ludGVyO1xyXG59XHJcblxyXG4uY29sb3Itc2V0dGluZzpob3ZlciB7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogIzg4ODtcclxuICBjb2xvcjogI2VlZTtcclxuICBib3JkZXI6IHNvbGlkIDFweCAjNTU1O1xyXG59XHJcblxyXG4uc21hbGwtZm9udCB7XHJcbiAgZm9udC1zaXplOiAxMnB4O1xyXG4gIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7XHJcbn1cclxuXHJcbi5tYXRlcmlhbC1pY29ucyB7XHJcbiAgdmVydGljYWwtYWxpZ246IG1pZGRsZTtcclxuICBmb250LXNpemU6IDEuMHJlbTtcclxufVxyXG5cclxuXHJcblxyXG5kaXYuY29sb3J7XHJcbiAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xyXG4gIGJvcmRlcjogc29saWQgMXB4ICMwMDA7XHJcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcclxuICBwb3NpdGlvbjogcmVsYXRpdmU7XHJcbiAgdG9wOjRweDtcclxuICB3aWR0aDoxOHB4O1xyXG4gIGhlaWdodDoxOHB4O1xyXG4gIG1hcmdpbi1sZWZ0OjJweDtcclxuICBtYXJnaW4tcmlnaHQ6MnB4O1xyXG4gIGJhY2tncm91bmQtY29sb3I6ICM4ODg7XHJcbiAgY3Vyc29yOiBwb2ludGVyO1xyXG59XHJcblxyXG5idXR0b24uY29sb3I6Zm9jdXMge1xyXG4gIG91dGxpbmU6IG5vbmU7XHJcbn1cclxuYnV0dG9uLmNvbG9yOmhvdmVyIHtcclxuXHJcbn1cclxuXHJcblxyXG5cclxuLnRhYmxlIHtcclxuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xyXG4gIHBhZGRpbmcgOiA1cHg7XHJcbiAgLypwb3NpdGlvbiA6IGZpeGVkOyovXHJcbiAgLypib3R0b20gOiAwOyovXHJcbiAgZGlzcGxheTogdGFibGU7XHJcbiAgLyp3aWR0aDogY2FsYygxMDAlIC0gMzBweCk7Ki9cclxuICB3aWR0aDogMTAwJTtcclxufVxyXG5cclxuLnRhYmxlLWNlbGwge1xyXG4gIGRpc3BsYXk6IHRhYmxlLWNlbGw7XHJcbn1cclxuXHJcbi5pbWFnZWJveCB7XHJcbiAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xyXG4gIHdpZHRoOiA1MHB4O1xyXG4gIGhlaWdodDogNTBweDtcclxuLyogIG1pbi13aWR0aDogNTBweDsqL1xyXG4gIG1heC13aWR0aDogNTBweDtcclxuICBtYXgtaGVpZ2h0OiA1MHB4O1xyXG4gIHZlcnRpY2FsLWFsaWduOiB0b3A7XHJcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xyXG59XHJcblxyXG4uaW1hZ2V7XHJcbiAgd2lkdGg6IDEwMCU7XHJcbiAgaGVpZ2h0OiAxMDAlO1xyXG4gIHZlcnRpY2FsLWFsaWduOiBib3R0b207XHJcbiAgb2JqZWN0LWZpdDogY292ZXI7XHJcbiAgb2JqZWN0LXBvc2l0aW9uOiA1MCUgMCU7XHJcbn1cclxuXHJcbi5jaGF0LWlucHV0IHtcclxuICBmb250LWZhbWlseTogaW5oZXJpdDtcclxuICBmb250LXNpemU6IDEzcHg7XHJcblxyXG4gIHdpZHRoOiBjYWxjKDEwMCUgLSAxMDBweCk7XHJcbiAgaGVpZ2h0OiBjYWxjKDFlbSArIDRweCk7XHJcbiAgbWluLWhlaWdodDogY2FsYygxZW0gKyA3cHgpO1xyXG4gIG1heC1oZWlnaHQ6IGNhbGMoNmVtICsgN3B4KTtcclxuICByZXNpemU6IG5vbmU7XHJcbiAgb3ZlcmZsb3c6IGF1dG87XHJcblxyXG4gIHBhZGRpbmc6IDFweDtcclxuICBtYXJnaW46IDVweDtcclxuXHJcbiAgd2hpdGUtc3BhY2U6IHByZS13cmFwO1xyXG4gIHdvcmQtd3JhcDogYnJlYWstd29yZDtcclxuICBvdmVyZmxvdy13cmFwOiBhbnl3aGVyZTtcclxuICB3b3JkLWJyZWFrOiBicmVhay13b3JkO1xyXG4gIHZlcnRpY2FsLWFsaWduOiBib3R0b207XHJcbn1cclxuXHJcbi53cml0aW5nLWluZm8ge1xyXG4gIGZvbnQtc2l6ZTogOHB4O1xyXG4gIGhlaWdodDogMS4zZW07XHJcbn1cclxuXHJcbi5kaXJlY3QtbWVzc2FnZSB7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogIzU1NTtcclxuICBjb2xvcjogI0NDQztcclxufVxyXG5cclxuLmNvbG9yLWJveC10YWcge1xyXG4gIHdpZHRoOiA0LjVlbTtcclxuICBtYXgtd2lkdGg6IDQuNWVtO1xyXG4gIG1pbi13aWR0aDogNC41ZW07XHJcbn1cclxuLmNvbG9yLXNldHRpbmctdGFnIHtcclxuICB3aWR0aDogNC41ZW07XHJcbiAgbWF4LXdpZHRoOiA0LjVlbTtcclxuICBtaW4td2lkdGg6IDQuNWVtO1xyXG4vKiAgYmFja2dyb3VuZC1jb2xvcjojMEFBOyovXHJcbn1cclxuXHJcbi50YWNoaWUtdGFnIHtcclxuICB2ZXJ0aWNhbC1hbGlnbjogYm90dG9tO1xyXG4gIG92ZXJmbG93OiBoaWRkZW47XHJcbi8qICBiYWNrZ3JvdW5kLWNvbG9yOiNBQUE7Ki9cclxuICBtYXgtd2lkdGg6MTBlbTtcclxuICB3aGl0ZS1zcGFjZTogbm93cmFwO1xyXG59XHJcblxyXG4udGFjaGllLW51bSB7XHJcbiAgZm9udC13ZWlnaHQ6IGJvbGQ7XHJcbiAgd2lkdGg6IDRlbTtcclxuICB0ZXh0LWFsaWduOiByaWdodDtcclxuICBmb250LWZhbWlseTogaW5oZXJpdDtcclxufVxyXG5cclxuIl19 */"] });
    return ChatInputComponent;
}());

/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵsetClassMetadata"](ChatInputComponent, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_1__["Component"],
        args: [{
                selector: 'chat-input',
                templateUrl: './chat-input.component.html',
                styleUrls: ['./chat-input.component.css']
            }]
    }], function () { return [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_1__["NgZone"] }, { type: service_chat_message_service__WEBPACK_IMPORTED_MODULE_13__["ChatMessageService"] }, { type: service_batch_service__WEBPACK_IMPORTED_MODULE_14__["BatchService"] }, { type: service_panel_service__WEBPACK_IMPORTED_MODULE_15__["PanelService"] }, { type: service_pointer_device_service__WEBPACK_IMPORTED_MODULE_16__["PointerDeviceService"] }]; }, { textAreaElementRef: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_1__["ViewChild"],
            args: ['textArea', { static: true }]
        }], onlyCharacters: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_1__["Input"]
        }], chatTabidentifier: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_1__["Input"]
        }], _gameType: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_1__["Input"],
            args: ['gameType']
        }], gameTypeChange: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_1__["Output"]
        }], _sendFrom: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_1__["Input"],
            args: ['sendFrom']
        }], sendFromChange: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_1__["Output"]
        }], _sendTo: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_1__["Input"],
            args: ['sendTo']
        }], sendToChange: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_1__["Output"]
        }], _text: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_1__["Input"],
            args: ['text']
        }], textChange: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_1__["Output"]
        }], chat: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_1__["Output"]
        }], tabSwitch: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_1__["Output"]
        }] }); })();


/***/ }),

/***/ "/FZI":
/*!************************************************************************!*\
  !*** ./src/app/component/chat-tachie-img/chat-tachie-img.component.ts ***!
  \************************************************************************/
/*! exports provided: ChatTachieImageComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ChatTachieImageComponent", function() { return ChatTachieImageComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "fXoL");
/* harmony import */ var _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @udonarium/core/synchronize-object/object-store */ "hm7o");
/* harmony import */ var _udonarium_core_system__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @udonarium/core/system */ "yNnI");
/* harmony import */ var _udonarium_core_file_storage_image_storage__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @udonarium/core/file-storage/image-storage */ "JQpJ");
/* harmony import */ var service_chat_message_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! service/chat-message.service */ "PEfN");
/* harmony import */ var service_panel_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! service/panel.service */ "M9xM");
/* harmony import */ var service_pointer_device_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! service/pointer-device.service */ "GPP8");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @angular/common */ "ofXK");
/* harmony import */ var pipe_safe_pipe__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! pipe/safe.pipe */ "6HCy");










var _c0 = ["tachieArea"];
var _c1 = function (a0, a1, a2, a3) { return { "transform": a0, "z-index": a1, "opacity": a2, "height": a3 }; };
function ChatTachieImageComponent_ng_container_4_ng_container_1_ng_container_1_img_1_Template(rf, ctx) { if (rf & 1) {
    var _r18 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "img", 16, 17);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("mousedown", function ChatTachieImageComponent_ng_container_4_ng_container_1_ng_container_1_img_1_Template_img_mousedown_0_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r18); var ctx_r17 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](4); return ctx_r17.tachieClick(0); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](2, "safe");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    var ctx_r4 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("src", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind2"](2, 2, ctx_r4.imageFileUrl_00, "resourceUrl"), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵsanitizeUrl"])("ngStyle", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction4"](5, _c1, "translateX(  calc( (" + ctx_r4.tachieAreaWidth + "px - 100% ) / 11 * 0  ) ) translateY( " + ctx_r4.tachieY_Pos + "px)", ctx_r4.zIndex_00, ctx_r4.opacity_00, ctx_r4.tachieAreaHeight00 + "px"));
} }
function ChatTachieImageComponent_ng_container_4_ng_container_1_ng_container_1_img_2_Template(rf, ctx) { if (rf & 1) {
    var _r21 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "img", 18, 19);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("mousedown", function ChatTachieImageComponent_ng_container_4_ng_container_1_ng_container_1_img_2_Template_img_mousedown_0_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r21); var ctx_r20 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](4); return ctx_r20.tachieClick(1); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](2, "safe");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    var ctx_r5 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("src", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind2"](2, 2, ctx_r5.imageFileUrl_01, "resourceUrl"), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵsanitizeUrl"])("ngStyle", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction4"](5, _c1, "translateX(  calc( (" + ctx_r5.tachieAreaWidth + "px - 100% ) / 11 * 1  ) ) translateY(" + ctx_r5.tachieY_Pos + "px)", ctx_r5.zIndex_01, ctx_r5.opacity_01, ctx_r5.tachieAreaHeight01 + "px"));
} }
function ChatTachieImageComponent_ng_container_4_ng_container_1_ng_container_1_img_3_Template(rf, ctx) { if (rf & 1) {
    var _r24 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "img", 20, 21);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("mousedown", function ChatTachieImageComponent_ng_container_4_ng_container_1_ng_container_1_img_3_Template_img_mousedown_0_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r24); var ctx_r23 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](4); return ctx_r23.tachieClick(2); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](2, "safe");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    var ctx_r6 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("src", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind2"](2, 2, ctx_r6.imageFileUrl_02, "resourceUrl"), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵsanitizeUrl"])("ngStyle", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction4"](5, _c1, "translateX(  calc( (" + ctx_r6.tachieAreaWidth + "px - 100% ) / 11 * 2  ) ) translateY(" + ctx_r6.tachieY_Pos + "px)", ctx_r6.zIndex_02, ctx_r6.opacity_02, ctx_r6.tachieAreaHeight02 + "px"));
} }
function ChatTachieImageComponent_ng_container_4_ng_container_1_ng_container_1_img_4_Template(rf, ctx) { if (rf & 1) {
    var _r27 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "img", 22, 23);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("mousedown", function ChatTachieImageComponent_ng_container_4_ng_container_1_ng_container_1_img_4_Template_img_mousedown_0_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r27); var ctx_r26 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](4); return ctx_r26.tachieClick(3); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](2, "safe");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    var ctx_r7 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("src", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind2"](2, 2, ctx_r7.imageFileUrl_03, "resourceUrl"), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵsanitizeUrl"])("ngStyle", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction4"](5, _c1, "translateX(  calc( (" + ctx_r7.tachieAreaWidth + "px - 100% ) / 11 * 3  ) ) translateY(" + ctx_r7.tachieY_Pos + "px)", ctx_r7.zIndex_03, ctx_r7.opacity_03, ctx_r7.tachieAreaHeight03 + "px"));
} }
function ChatTachieImageComponent_ng_container_4_ng_container_1_ng_container_1_img_5_Template(rf, ctx) { if (rf & 1) {
    var _r30 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "img", 24, 25);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("mousedown", function ChatTachieImageComponent_ng_container_4_ng_container_1_ng_container_1_img_5_Template_img_mousedown_0_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r30); var ctx_r29 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](4); return ctx_r29.tachieClick(4); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](2, "safe");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    var ctx_r8 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("src", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind2"](2, 2, ctx_r8.imageFileUrl_04, "resourceUrl"), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵsanitizeUrl"])("ngStyle", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction4"](5, _c1, "translateX(  calc( (" + ctx_r8.tachieAreaWidth + "px - 100% ) / 11 * 4  ) ) translateY(" + ctx_r8.tachieY_Pos + "px)", ctx_r8.zIndex_04, ctx_r8.opacity_04, ctx_r8.tachieAreaHeight04 + "px"));
} }
function ChatTachieImageComponent_ng_container_4_ng_container_1_ng_container_1_img_6_Template(rf, ctx) { if (rf & 1) {
    var _r33 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "img", 26, 27);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("mousedown", function ChatTachieImageComponent_ng_container_4_ng_container_1_ng_container_1_img_6_Template_img_mousedown_0_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r33); var ctx_r32 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](4); return ctx_r32.tachieClick(5); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](2, "safe");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    var ctx_r9 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("src", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind2"](2, 2, ctx_r9.imageFileUrl_05, "resourceUrl"), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵsanitizeUrl"])("ngStyle", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction4"](5, _c1, "translateX(  calc( (" + ctx_r9.tachieAreaWidth + "px - 100% ) / 11 * 5  ) ) translateY(" + ctx_r9.tachieY_Pos + "px)", ctx_r9.zIndex_05, ctx_r9.opacity_05, ctx_r9.tachieAreaHeight05 + "px"));
} }
function ChatTachieImageComponent_ng_container_4_ng_container_1_ng_container_1_img_7_Template(rf, ctx) { if (rf & 1) {
    var _r36 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "img", 28, 29);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("mousedown", function ChatTachieImageComponent_ng_container_4_ng_container_1_ng_container_1_img_7_Template_img_mousedown_0_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r36); var ctx_r35 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](4); return ctx_r35.tachieClick(6); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](2, "safe");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    var ctx_r10 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("src", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind2"](2, 2, ctx_r10.imageFileUrl_06, "resourceUrl"), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵsanitizeUrl"])("ngStyle", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction4"](5, _c1, "translateX(  calc( (" + ctx_r10.tachieAreaWidth + "px - 100% ) / 11 * 6  ) ) translateY(" + ctx_r10.tachieY_Pos + "px)", ctx_r10.zIndex_06, ctx_r10.opacity_06, ctx_r10.tachieAreaHeight06 + "px"));
} }
function ChatTachieImageComponent_ng_container_4_ng_container_1_ng_container_1_img_8_Template(rf, ctx) { if (rf & 1) {
    var _r39 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "img", 30, 31);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("mousedown", function ChatTachieImageComponent_ng_container_4_ng_container_1_ng_container_1_img_8_Template_img_mousedown_0_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r39); var ctx_r38 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](4); return ctx_r38.tachieClick(7); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](2, "safe");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    var ctx_r11 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("src", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind2"](2, 2, ctx_r11.imageFileUrl_07, "resourceUrl"), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵsanitizeUrl"])("ngStyle", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction4"](5, _c1, "translateX(  calc( (" + ctx_r11.tachieAreaWidth + "px - 100% ) / 11 * 7  ) ) translateY(" + ctx_r11.tachieY_Pos + "px)", ctx_r11.zIndex_07, ctx_r11.opacity_07, ctx_r11.tachieAreaHeight07 + "px"));
} }
function ChatTachieImageComponent_ng_container_4_ng_container_1_ng_container_1_img_9_Template(rf, ctx) { if (rf & 1) {
    var _r42 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "img", 32, 33);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("mousedown", function ChatTachieImageComponent_ng_container_4_ng_container_1_ng_container_1_img_9_Template_img_mousedown_0_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r42); var ctx_r41 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](4); return ctx_r41.tachieClick(8); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](2, "safe");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    var ctx_r12 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("src", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind2"](2, 2, ctx_r12.imageFileUrl_08, "resourceUrl"), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵsanitizeUrl"])("ngStyle", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction4"](5, _c1, "translateX(  calc( (" + ctx_r12.tachieAreaWidth + "px - 100% ) / 11 * 8  ) ) translateY(" + ctx_r12.tachieY_Pos + "px)", ctx_r12.zIndex_08, ctx_r12.opacity_08, ctx_r12.tachieAreaHeight08 + "px"));
} }
function ChatTachieImageComponent_ng_container_4_ng_container_1_ng_container_1_img_10_Template(rf, ctx) { if (rf & 1) {
    var _r45 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "img", 34, 35);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("mousedown", function ChatTachieImageComponent_ng_container_4_ng_container_1_ng_container_1_img_10_Template_img_mousedown_0_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r45); var ctx_r44 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](4); return ctx_r44.tachieClick(9); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](2, "safe");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    var ctx_r13 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("src", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind2"](2, 2, ctx_r13.imageFileUrl_09, "resourceUrl"), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵsanitizeUrl"])("ngStyle", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction4"](5, _c1, "translateX(  calc( (" + ctx_r13.tachieAreaWidth + "px - 100% ) / 11 * 9  ) ) translateY(" + ctx_r13.tachieY_Pos + "px)", ctx_r13.zIndex_09, ctx_r13.opacity_09, ctx_r13.tachieAreaHeight09 + "px"));
} }
function ChatTachieImageComponent_ng_container_4_ng_container_1_ng_container_1_img_11_Template(rf, ctx) { if (rf & 1) {
    var _r48 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "img", 36, 37);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("mousedown", function ChatTachieImageComponent_ng_container_4_ng_container_1_ng_container_1_img_11_Template_img_mousedown_0_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r48); var ctx_r47 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](4); return ctx_r47.tachieClick(10); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](2, "safe");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    var ctx_r14 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("src", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind2"](2, 2, ctx_r14.imageFileUrl_10, "resourceUrl"), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵsanitizeUrl"])("ngStyle", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction4"](5, _c1, "translateX(  calc( (" + ctx_r14.tachieAreaWidth + "px - 100% ) / 11 * 10  ) ) translateY(" + ctx_r14.tachieY_Pos + "px)", ctx_r14.zIndex_10, ctx_r14.opacity_10, ctx_r14.tachieAreaHeight10 + "px"));
} }
function ChatTachieImageComponent_ng_container_4_ng_container_1_ng_container_1_img_12_Template(rf, ctx) { if (rf & 1) {
    var _r51 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "img", 38, 39);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("mousedown", function ChatTachieImageComponent_ng_container_4_ng_container_1_ng_container_1_img_12_Template_img_mousedown_0_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r51); var ctx_r50 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](4); return ctx_r50.tachieClick(11); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](2, "safe");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    var ctx_r15 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("src", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind2"](2, 2, ctx_r15.imageFileUrl_11, "resourceUrl"), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵsanitizeUrl"])("ngStyle", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction4"](5, _c1, "translateX(  calc( (" + ctx_r15.tachieAreaWidth + "px - 100% ) / 11 * 11  ) ) translateY(" + ctx_r15.tachieY_Pos + "px)", ctx_r15.zIndex_11, ctx_r15.opacity_11, ctx_r15.tachieAreaHeight11 + "px"));
} }
function ChatTachieImageComponent_ng_container_4_ng_container_1_ng_container_1_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](1, ChatTachieImageComponent_ng_container_4_ng_container_1_ng_container_1_img_1_Template, 3, 10, "img", 4);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](2, ChatTachieImageComponent_ng_container_4_ng_container_1_ng_container_1_img_2_Template, 3, 10, "img", 5);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](3, ChatTachieImageComponent_ng_container_4_ng_container_1_ng_container_1_img_3_Template, 3, 10, "img", 6);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](4, ChatTachieImageComponent_ng_container_4_ng_container_1_ng_container_1_img_4_Template, 3, 10, "img", 7);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](5, ChatTachieImageComponent_ng_container_4_ng_container_1_ng_container_1_img_5_Template, 3, 10, "img", 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](6, ChatTachieImageComponent_ng_container_4_ng_container_1_ng_container_1_img_6_Template, 3, 10, "img", 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](7, ChatTachieImageComponent_ng_container_4_ng_container_1_ng_container_1_img_7_Template, 3, 10, "img", 10);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](8, ChatTachieImageComponent_ng_container_4_ng_container_1_ng_container_1_img_8_Template, 3, 10, "img", 11);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](9, ChatTachieImageComponent_ng_container_4_ng_container_1_ng_container_1_img_9_Template, 3, 10, "img", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](10, ChatTachieImageComponent_ng_container_4_ng_container_1_ng_container_1_img_10_Template, 3, 10, "img", 13);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](11, ChatTachieImageComponent_ng_container_4_ng_container_1_ng_container_1_img_11_Template, 3, 10, "img", 14);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](12, ChatTachieImageComponent_ng_container_4_ng_container_1_ng_container_1_img_12_Template, 3, 10, "img", 15);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var ctx_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", 0 < ctx_r3.imageFileUrl_00.length);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", 0 < ctx_r3.imageFileUrl_01.length);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", 0 < ctx_r3.imageFileUrl_02.length);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", 0 < ctx_r3.imageFileUrl_03.length);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", 0 < ctx_r3.imageFileUrl_04.length);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", 0 < ctx_r3.imageFileUrl_05.length);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", 0 < ctx_r3.imageFileUrl_06.length);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", 0 < ctx_r3.imageFileUrl_07.length);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", 0 < ctx_r3.imageFileUrl_08.length);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", 0 < ctx_r3.imageFileUrl_09.length);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", 0 < ctx_r3.imageFileUrl_10.length);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", 0 < ctx_r3.imageFileUrl_11.length);
} }
function ChatTachieImageComponent_ng_container_4_ng_container_1_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](1, ChatTachieImageComponent_ng_container_4_ng_container_1_ng_container_1_Template, 13, 12, "ng-container", 3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r2.isTachieDispMode);
} }
function ChatTachieImageComponent_ng_container_4_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](1, ChatTachieImageComponent_ng_container_4_ng_container_1_Template, 2, 1, "ng-container", 3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r1.chatTab.tachieDispFlag);
} }
var ChatTachieImageComponent = /** @class */ (function () {
    function ChatTachieImageComponent(chatMessageService, changeDetectionRef, panelService, pointerDeviceService) {
        this.chatMessageService = chatMessageService;
        this.changeDetectionRef = changeDetectionRef;
        this.panelService = panelService;
        this.pointerDeviceService = pointerDeviceService;
        this.chatTabidentifier = '';
        this.isTilteTop = false;
        this.dispByMouse = false;
        this._tachieAreaWidth = 0;
        //z-index取得
        this._zindexOffset = 10;
        this._opacity = 0.66;
    }
    Object.defineProperty(ChatTachieImageComponent.prototype, "chatTab", {
        get: function () { return _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_1__["ObjectStore"].instance.get(this.chatTabidentifier); },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ChatTachieImageComponent.prototype, "tachieY_Pos", {
        get: function () {
            if (!this.chatTabList.isTachieInWindow) {
                return -this.chatTabList.tachieHeightValue - 26;
            }
            else {
                return 0;
            }
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ChatTachieImageComponent.prototype, "tachieAreaWidth", {
        get: function () {
            return this._tachieAreaWidth;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ChatTachieImageComponent.prototype, "chatTabList", {
        get: function () { return _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_1__["ObjectStore"].instance.get('ChatTabList'); },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ChatTachieImageComponent.prototype, "dispFlag", {
        get: function () {
            if (this.isTilteTop && !this.chatTabList.isTachieInWindow)
                return true;
            if (!this.isTilteTop && this.chatTabList.isTachieInWindow)
                return true;
            return false;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ChatTachieImageComponent.prototype, "isTachieDispMode", {
        get: function () {
            if (this.chatTabList.isKeepTachieOutWindow) {
                return this.dispFlag;
            }
            else {
                return this.dispFlag && this.dispByMouse;
            }
        },
        enumerable: false,
        configurable: true
    });
    ChatTachieImageComponent.prototype.tachieAreaHeight = function (pos) {
        if (this.chatTab) {
            if (this.chatTab.tachieDispFlag) {
                if (this.chatTab.tachiePosIsDisp(pos)) {
                    return this.chatTabList.tachieHeightValue;
                }
            }
        }
        return 0;
    };
    Object.defineProperty(ChatTachieImageComponent.prototype, "tachieAreaHeight00", {
        //
        get: function () { return this.tachieAreaHeight(0); },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ChatTachieImageComponent.prototype, "tachieAreaHeight01", {
        get: function () { return this.tachieAreaHeight(1); },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ChatTachieImageComponent.prototype, "tachieAreaHeight02", {
        get: function () { return this.tachieAreaHeight(2); },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ChatTachieImageComponent.prototype, "tachieAreaHeight03", {
        get: function () { return this.tachieAreaHeight(3); },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ChatTachieImageComponent.prototype, "tachieAreaHeight04", {
        get: function () { return this.tachieAreaHeight(4); },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ChatTachieImageComponent.prototype, "tachieAreaHeight05", {
        get: function () { return this.tachieAreaHeight(5); },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ChatTachieImageComponent.prototype, "tachieAreaHeight06", {
        get: function () { return this.tachieAreaHeight(6); },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ChatTachieImageComponent.prototype, "tachieAreaHeight07", {
        get: function () { return this.tachieAreaHeight(7); },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ChatTachieImageComponent.prototype, "tachieAreaHeight08", {
        get: function () { return this.tachieAreaHeight(8); },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ChatTachieImageComponent.prototype, "tachieAreaHeight09", {
        get: function () { return this.tachieAreaHeight(9); },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ChatTachieImageComponent.prototype, "tachieAreaHeight10", {
        get: function () { return this.tachieAreaHeight(10); },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ChatTachieImageComponent.prototype, "tachieAreaHeight11", {
        get: function () { return this.tachieAreaHeight(11); },
        enumerable: false,
        configurable: true
    });
    //立ち絵表示幅取得
    ChatTachieImageComponent.prototype.ngAfterViewInit = function () {
        this._tachieAreaWidth = this.tachieArea.nativeElement.offsetWidth;
        this.changeDetectionRef.detectChanges();
    };
    ChatTachieImageComponent.prototype.ngAfterViewChecked = function () {
        this._tachieAreaWidth = this.tachieArea.nativeElement.offsetWidth;
        this.changeDetectionRef.detectChanges();
    };
    Object.defineProperty(ChatTachieImageComponent.prototype, "zIndex_00", {
        get: function () { return this.chatTab.tachieZindex(0) + this._zindexOffset; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ChatTachieImageComponent.prototype, "zIndex_01", {
        get: function () { return this.chatTab.tachieZindex(1) + this._zindexOffset; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ChatTachieImageComponent.prototype, "zIndex_02", {
        get: function () { return this.chatTab.tachieZindex(2) + this._zindexOffset; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ChatTachieImageComponent.prototype, "zIndex_03", {
        get: function () { return this.chatTab.tachieZindex(3) + this._zindexOffset; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ChatTachieImageComponent.prototype, "zIndex_04", {
        get: function () { return this.chatTab.tachieZindex(4) + this._zindexOffset; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ChatTachieImageComponent.prototype, "zIndex_05", {
        get: function () { return this.chatTab.tachieZindex(5) + this._zindexOffset; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ChatTachieImageComponent.prototype, "zIndex_06", {
        get: function () { return this.chatTab.tachieZindex(6) + this._zindexOffset; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ChatTachieImageComponent.prototype, "zIndex_07", {
        get: function () { return this.chatTab.tachieZindex(7) + this._zindexOffset; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ChatTachieImageComponent.prototype, "zIndex_08", {
        get: function () { return this.chatTab.tachieZindex(8) + this._zindexOffset; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ChatTachieImageComponent.prototype, "zIndex_09", {
        get: function () { return this.chatTab.tachieZindex(9) + this._zindexOffset; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ChatTachieImageComponent.prototype, "zIndex_10", {
        get: function () { return this.chatTab.tachieZindex(10) + this._zindexOffset; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ChatTachieImageComponent.prototype, "zIndex_11", {
        get: function () { return this.chatTab.tachieZindex(11) + this._zindexOffset; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ChatTachieImageComponent.prototype, "opacity_00", {
        get: function () { if (this.chatTab.tachieZindex(0) == 11) {
            return 1;
        }
        else {
            return this._opacity;
        } },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ChatTachieImageComponent.prototype, "opacity_01", {
        get: function () { if (this.chatTab.tachieZindex(1) == 11) {
            return 1;
        }
        else {
            return this._opacity;
        } },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ChatTachieImageComponent.prototype, "opacity_02", {
        get: function () { if (this.chatTab.tachieZindex(2) == 11) {
            return 1;
        }
        else {
            return this._opacity;
        } },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ChatTachieImageComponent.prototype, "opacity_03", {
        get: function () { if (this.chatTab.tachieZindex(3) == 11) {
            return 1;
        }
        else {
            return this._opacity;
        } },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ChatTachieImageComponent.prototype, "opacity_04", {
        get: function () { if (this.chatTab.tachieZindex(4) == 11) {
            return 1;
        }
        else {
            return this._opacity;
        } },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ChatTachieImageComponent.prototype, "opacity_05", {
        get: function () { if (this.chatTab.tachieZindex(5) == 11) {
            return 1;
        }
        else {
            return this._opacity;
        } },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ChatTachieImageComponent.prototype, "opacity_06", {
        get: function () { if (this.chatTab.tachieZindex(6) == 11) {
            return 1;
        }
        else {
            return this._opacity;
        } },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ChatTachieImageComponent.prototype, "opacity_07", {
        get: function () { if (this.chatTab.tachieZindex(7) == 11) {
            return 1;
        }
        else {
            return this._opacity;
        } },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ChatTachieImageComponent.prototype, "opacity_08", {
        get: function () { if (this.chatTab.tachieZindex(8) == 11) {
            return 1;
        }
        else {
            return this._opacity;
        } },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ChatTachieImageComponent.prototype, "opacity_09", {
        get: function () { if (this.chatTab.tachieZindex(9) == 11) {
            return 1;
        }
        else {
            return this._opacity;
        } },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ChatTachieImageComponent.prototype, "opacity_10", {
        get: function () { if (this.chatTab.tachieZindex(10) == 11) {
            return 1;
        }
        else {
            return this._opacity;
        } },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ChatTachieImageComponent.prototype, "opacity_11", {
        get: function () { if (this.chatTab.tachieZindex(11) == 11) {
            return 1;
        }
        else {
            return this._opacity;
        } },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ChatTachieImageComponent.prototype, "imageFileUrl_00", {
        //この実装は後でどうにかしたい
        get: function () {
            if (!this.chatTab.imageIdentifier)
                return '';
            var image = _udonarium_core_file_storage_image_storage__WEBPACK_IMPORTED_MODULE_3__["ImageStorage"].instance.get(this.chatTab.imageIdentifier[0]);
            if (image)
                return image.url;
            return '';
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ChatTachieImageComponent.prototype, "imageFileUrl_01", {
        get: function () {
            if (!this.chatTab.imageIdentifier)
                return '';
            var image = _udonarium_core_file_storage_image_storage__WEBPACK_IMPORTED_MODULE_3__["ImageStorage"].instance.get(this.chatTab.imageIdentifier[1]);
            if (image)
                return image.url;
            return '';
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ChatTachieImageComponent.prototype, "imageFileUrl_02", {
        get: function () {
            if (!this.chatTab.imageIdentifier)
                return '';
            var image = _udonarium_core_file_storage_image_storage__WEBPACK_IMPORTED_MODULE_3__["ImageStorage"].instance.get(this.chatTab.imageIdentifier[2]);
            if (image)
                return image.url;
            return '';
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ChatTachieImageComponent.prototype, "imageFileUrl_03", {
        get: function () {
            if (!this.chatTab.imageIdentifier)
                return '';
            var image = _udonarium_core_file_storage_image_storage__WEBPACK_IMPORTED_MODULE_3__["ImageStorage"].instance.get(this.chatTab.imageIdentifier[3]);
            if (image)
                return image.url;
            return '';
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ChatTachieImageComponent.prototype, "imageFileUrl_04", {
        get: function () {
            if (!this.chatTab.imageIdentifier)
                return '';
            var image = _udonarium_core_file_storage_image_storage__WEBPACK_IMPORTED_MODULE_3__["ImageStorage"].instance.get(this.chatTab.imageIdentifier[4]);
            if (image)
                return image.url;
            return '';
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ChatTachieImageComponent.prototype, "imageFileUrl_05", {
        get: function () {
            if (!this.chatTab.imageIdentifier)
                return '';
            var image = _udonarium_core_file_storage_image_storage__WEBPACK_IMPORTED_MODULE_3__["ImageStorage"].instance.get(this.chatTab.imageIdentifier[5]);
            if (image)
                return image.url;
            return '';
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ChatTachieImageComponent.prototype, "imageFileUrl_06", {
        get: function () {
            if (!this.chatTab.imageIdentifier)
                return '';
            var image = _udonarium_core_file_storage_image_storage__WEBPACK_IMPORTED_MODULE_3__["ImageStorage"].instance.get(this.chatTab.imageIdentifier[6]);
            if (image)
                return image.url;
            return '';
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ChatTachieImageComponent.prototype, "imageFileUrl_07", {
        get: function () {
            if (!this.chatTab.imageIdentifier)
                return '';
            var image = _udonarium_core_file_storage_image_storage__WEBPACK_IMPORTED_MODULE_3__["ImageStorage"].instance.get(this.chatTab.imageIdentifier[7]);
            if (image)
                return image.url;
            return '';
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ChatTachieImageComponent.prototype, "imageFileUrl_08", {
        get: function () {
            if (!this.chatTab.imageIdentifier)
                return '';
            var image = _udonarium_core_file_storage_image_storage__WEBPACK_IMPORTED_MODULE_3__["ImageStorage"].instance.get(this.chatTab.imageIdentifier[8]);
            if (image)
                return image.url;
            return '';
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ChatTachieImageComponent.prototype, "imageFileUrl_09", {
        get: function () {
            if (!this.chatTab.imageIdentifier)
                return '';
            var image = _udonarium_core_file_storage_image_storage__WEBPACK_IMPORTED_MODULE_3__["ImageStorage"].instance.get(this.chatTab.imageIdentifier[9]);
            if (image)
                return image.url;
            return '';
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ChatTachieImageComponent.prototype, "imageFileUrl_10", {
        get: function () {
            if (!this.chatTab.imageIdentifier)
                return '';
            var image = _udonarium_core_file_storage_image_storage__WEBPACK_IMPORTED_MODULE_3__["ImageStorage"].instance.get(this.chatTab.imageIdentifier[10]);
            if (image)
                return image.url;
            return '';
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ChatTachieImageComponent.prototype, "imageFileUrl_11", {
        get: function () {
            if (!this.chatTab.imageIdentifier)
                return '';
            var image = _udonarium_core_file_storage_image_storage__WEBPACK_IMPORTED_MODULE_3__["ImageStorage"].instance.get(this.chatTab.imageIdentifier[11]);
            if (image)
                return image.url;
            return '';
        },
        enumerable: false,
        configurable: true
    });
    ChatTachieImageComponent.prototype.tachieClick = function (pos) {
        console.log("tachieClick" + pos);
        this.chatTab.tachiePosHide(pos);
    };
    ChatTachieImageComponent.prototype.ngOnInit = function () {
    };
    ChatTachieImageComponent.prototype.ngOnDestroy = function () {
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_2__["EventSystem"].unregister(this);
    };
    ChatTachieImageComponent.prototype.trackByChatTab = function (index, chatTab) {
        return chatTab.identifier;
    };
    ChatTachieImageComponent.ɵfac = function ChatTachieImageComponent_Factory(t) { return new (t || ChatTachieImageComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](service_chat_message_service__WEBPACK_IMPORTED_MODULE_4__["ChatMessageService"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["ChangeDetectorRef"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](service_panel_service__WEBPACK_IMPORTED_MODULE_5__["PanelService"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](service_pointer_device_service__WEBPACK_IMPORTED_MODULE_6__["PointerDeviceService"])); };
    ChatTachieImageComponent.ɵcmp = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineComponent"]({ type: ChatTachieImageComponent, selectors: [["chat-tachie-img"]], viewQuery: function ChatTachieImageComponent_Query(rf, ctx) { if (rf & 1) {
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵviewQuery"](_c0, true, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ElementRef"]);
        } if (rf & 2) {
            var _t = void 0;
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵqueryRefresh"](_t = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵloadQuery"]()) && (ctx.tachieArea = _t.first);
        } }, inputs: { chatTabidentifier: "chatTabidentifier", isTilteTop: "isTilteTop", dispByMouse: "dispByMouse" }, decls: 5, vars: 1, consts: [["id", "tachie-component_"], [1, "tachie-image-box", 2, "height", "0px,width:100%"], ["tachieArea", ""], [4, "ngIf"], ["class", "tachie-image pos00", 3, "src", "ngStyle", "mousedown", 4, "ngIf"], ["class", "tachie-image pos01", 3, "src", "ngStyle", "mousedown", 4, "ngIf"], ["class", "tachie-image pos02", 3, "src", "ngStyle", "mousedown", 4, "ngIf"], ["class", "tachie-image pos03", 3, "src", "ngStyle", "mousedown", 4, "ngIf"], ["class", "tachie-image pos04", 3, "src", "ngStyle", "mousedown", 4, "ngIf"], ["class", "tachie-image pos05", 3, "src", "ngStyle", "mousedown", 4, "ngIf"], ["class", "tachie-image pos06", 3, "src", "ngStyle", "mousedown", 4, "ngIf"], ["class", "tachie-image pos07", 3, "src", "ngStyle", "mousedown", 4, "ngIf"], ["class", "tachie-image pos08", 3, "src", "ngStyle", "mousedown", 4, "ngIf"], ["class", "tachie-image pos09", 3, "src", "ngStyle", "mousedown", 4, "ngIf"], ["class", "tachie-image pos10", 3, "src", "ngStyle", "mousedown", 4, "ngIf"], ["class", "tachie-image pos11", 3, "src", "ngStyle", "mousedown", 4, "ngIf"], [1, "tachie-image", "pos00", 3, "src", "ngStyle", "mousedown"], ["tachie00", ""], [1, "tachie-image", "pos01", 3, "src", "ngStyle", "mousedown"], ["tachie01", ""], [1, "tachie-image", "pos02", 3, "src", "ngStyle", "mousedown"], ["tachie02", ""], [1, "tachie-image", "pos03", 3, "src", "ngStyle", "mousedown"], ["tachie03", ""], [1, "tachie-image", "pos04", 3, "src", "ngStyle", "mousedown"], ["tachie04", ""], [1, "tachie-image", "pos05", 3, "src", "ngStyle", "mousedown"], ["tachie05", ""], [1, "tachie-image", "pos06", 3, "src", "ngStyle", "mousedown"], ["tachie06", ""], [1, "tachie-image", "pos07", 3, "src", "ngStyle", "mousedown"], ["tachie07", ""], [1, "tachie-image", "pos08", 3, "src", "ngStyle", "mousedown"], ["tachie08", ""], [1, "tachie-image", "pos09", 3, "src", "ngStyle", "mousedown"], ["tachie09", ""], [1, "tachie-image", "pos10", 3, "src", "ngStyle", "mousedown"], ["tachie10", ""], [1, "tachie-image", "pos11", 3, "src", "ngStyle", "mousedown"], ["tachie11", ""]], template: function ChatTachieImageComponent_Template(rf, ctx) { if (rf & 1) {
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div");
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "div", 0);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](2, "div", 1, 2);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](4, ChatTachieImageComponent_ng_container_4_Template, 2, 1, "ng-container", 3);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        } if (rf & 2) {
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](4);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx.chatTab);
        } }, directives: [_angular_common__WEBPACK_IMPORTED_MODULE_7__["NgIf"], _angular_common__WEBPACK_IMPORTED_MODULE_7__["NgStyle"]], pipes: [pipe_safe_pipe__WEBPACK_IMPORTED_MODULE_8__["SafePipe"]], styles: [".message-setting[_ngcontent-%COMP%] {\r\n  background-color: transparent;\r\n  color: #444; \r\n  border: solid 1px #555;\r\n  padding: 2px 4px;\r\n  border-radius: 5px;\r\n  cursor: pointer;\r\n}\r\n\r\n.message-setting[_ngcontent-%COMP%]:hover {\r\n  background-color: #888;\r\n  color: #eee;\r\n  border: solid 1px #555;\r\n}\r\n\r\n.small-font[_ngcontent-%COMP%] {\r\n  font-size: 12px;\r\n  vertical-align: middle;\r\n}\r\n\r\n.tachie-image-box[_ngcontent-%COMP%] {\r\n\r\n\r\n}\r\n\r\nimg[_ngcontent-%COMP%]{\r\n}\r\n\r\n.tachie-image[_ngcontent-%COMP%] {\r\n  position: absolute;\r\n  height:250px;\r\n  padding: 0;\r\n  vertical-align: bottom;\r\n  z-index: 1;\r\n\r\n}\r\n\r\n\r\n\r\n.tachie[_ngcontent-%COMP%]{\r\n\r\n\r\n}\r\n\r\n.pos00[_ngcontent-%COMP%]{\r\n}\r\n\r\n.pos01[_ngcontent-%COMP%]{\r\n\r\n}\r\n\r\n.pos02[_ngcontent-%COMP%]{\r\n\r\n}\r\n\r\n.pos03[_ngcontent-%COMP%]{\r\n\r\n}\r\n\r\n.character-image-box[_ngcontent-%COMP%] {\r\n}\r\n\r\n.character-image[_ngcontent-%COMP%] {\r\n}\r\n\r\n.component[_ngcontent-%COMP%] {\r\n\r\n}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNoYXQtdGFjaGllLWltZy5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UsNkJBQTZCO0VBQzdCLFdBQVc7RUFDWCxzQkFBc0I7RUFDdEIsZ0JBQWdCO0VBQ2hCLGtCQUFrQjtFQUNsQixlQUFlO0FBQ2pCOztBQUVBO0VBQ0Usc0JBQXNCO0VBQ3RCLFdBQVc7RUFDWCxzQkFBc0I7QUFDeEI7O0FBRUE7RUFDRSxlQUFlO0VBQ2Ysc0JBQXNCO0FBQ3hCOztBQUdBO0FBQ0E7O0NBRUM7QUFDRDs7Ozs7OztDQU9DO0FBQ0Q7O0FBR0E7QUFDQTs7QUFFQTtFQUNFLGtCQUFrQjtFQUNsQixZQUFZO0VBQ1osVUFBVTtFQUNWLHNCQUFzQjtFQUN0QixVQUFVO0FBQ1osNEJBQTRCO0FBQzVCOztBQUVBOzs7Ozs7Ozs7OztDQVdDOztBQUVEOztBQUVBOztDQUVDO0FBQ0Q7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFLQTtBQUNBOztBQUVBO0FBQ0E7O0FBR0E7QUFDQTs7Ozs7Ozs7OztDQVVDO0FBQ0QiLCJmaWxlIjoiY2hhdC10YWNoaWUtaW1nLmNvbXBvbmVudC5jc3MiLCJzb3VyY2VzQ29udGVudCI6WyIubWVzc2FnZS1zZXR0aW5nIHtcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudDtcclxuICBjb2xvcjogIzQ0NDsgXHJcbiAgYm9yZGVyOiBzb2xpZCAxcHggIzU1NTtcclxuICBwYWRkaW5nOiAycHggNHB4O1xyXG4gIGJvcmRlci1yYWRpdXM6IDVweDtcclxuICBjdXJzb3I6IHBvaW50ZXI7XHJcbn1cclxuXHJcbi5tZXNzYWdlLXNldHRpbmc6aG92ZXIge1xyXG4gIGJhY2tncm91bmQtY29sb3I6ICM4ODg7XHJcbiAgY29sb3I6ICNlZWU7XHJcbiAgYm9yZGVyOiBzb2xpZCAxcHggIzU1NTtcclxufVxyXG5cclxuLnNtYWxsLWZvbnQge1xyXG4gIGZvbnQtc2l6ZTogMTJweDtcclxuICB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlO1xyXG59XHJcblxyXG5cclxuLnRhY2hpZS1pbWFnZS1ib3gge1xyXG4vKlxyXG4gIGhlaWdodDoyNTBweDtcclxuKi9cclxuLyogIHdpZHRoOiAxMDBweDtcclxuICBtYXgtaGVpZ2h0OiAxMjBweDtcclxuICBvdmVyZmxvdzogaGlkZGVuO1xyXG4gIHZlcnRpY2FsLWFsaWduOiBib3R0b207XHJcbiAgbWFyZ2luLWxlZnQ6IDAuNWVtO1xyXG4gIG1hcmdpbi1ib3R0b206IC02cHg7XHJcbiAgYm9yZGVyLXJhZGl1czogMWVtO1xyXG4qL1xyXG59XHJcblxyXG5cclxuaW1ne1xyXG59XHJcblxyXG4udGFjaGllLWltYWdlIHtcclxuICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgaGVpZ2h0OjI1MHB4O1xyXG4gIHBhZGRpbmc6IDA7XHJcbiAgdmVydGljYWwtYWxpZ246IGJvdHRvbTtcclxuICB6LWluZGV4OiAxO1xyXG4vKiAgdmVydGljYWwtYWxpZ246IGJvdHRvbTsqL1xyXG59XHJcblxyXG4vKlxyXG4udGFjaGllYXJlYXtcclxuICB3aWR0aDoxMDAlO1xyXG5cclxuICBvdmVyZmxvdzogaGlkZGVuO1xyXG4gIHZlcnRpY2FsLWFsaWduOiBib3R0b207XHJcbiAgbWFyZ2luLWxlZnQ6IDAuNWVtO1xyXG4gIG1hcmdpbi1ib3R0b206IC02cHg7XHJcbiAgYm9yZGVyLXJhZGl1czogMWVtO1xyXG4gIHotaW5kZXg6IDE7XHJcbn1cclxuKi9cclxuXHJcbi50YWNoaWV7XHJcblxyXG4vKiBcclxuIHBvc2l0aW9uOiBhYnNvbHV0ZTtcclxuKi9cclxufVxyXG5cclxuLnBvczAwe1xyXG59XHJcblxyXG4ucG9zMDF7XHJcblxyXG59XHJcblxyXG4ucG9zMDJ7XHJcblxyXG59XHJcblxyXG4ucG9zMDN7XHJcblxyXG59XHJcblxyXG5cclxuXHJcblxyXG4uY2hhcmFjdGVyLWltYWdlLWJveCB7XHJcbn1cclxuXHJcbi5jaGFyYWN0ZXItaW1hZ2Uge1xyXG59XHJcblxyXG5cclxuLmNvbXBvbmVudCB7XHJcbi8qXHJcbiAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gIG1heC1oZWlnaHQ6IDEwMCU7XHJcbiAgbWF4LXdpZHRoOiAxMDAlO1xyXG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XHJcbiAgb3ZlcmZsb3c6IHZpc2libGU7XHJcbiAgY29sb3I6ICM0NDQ7XHJcbiAgei1pbmRleDogOTAwMDtcclxuICBvdmVyc2Nyb2xsLWJlaGF2aW9yOiBjb250YWluO1xyXG4gIC13ZWJraXQtb3ZlcmZsb3ctc2Nyb2xsaW5nOiB0b3VjaDtcclxuKi9cclxufVxyXG5cclxuXHJcblxyXG4iXX0= */"] });
    return ChatTachieImageComponent;
}());

/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](ChatTachieImageComponent, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"],
        args: [{
                selector: 'chat-tachie-img',
                templateUrl: './chat-tachie-img.component.html',
                styleUrls: ['./chat-tachie-img.component.css']
            }]
    }], function () { return [{ type: service_chat_message_service__WEBPACK_IMPORTED_MODULE_4__["ChatMessageService"] }, { type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ChangeDetectorRef"] }, { type: service_panel_service__WEBPACK_IMPORTED_MODULE_5__["PanelService"] }, { type: service_pointer_device_service__WEBPACK_IMPORTED_MODULE_6__["PointerDeviceService"] }]; }, { chatTabidentifier: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], isTilteTop: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], dispByMouse: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], tachieArea: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"],
            args: ['tachieArea', { read: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ElementRef"] }]
        }] }); })();


/***/ }),

/***/ 0:
/*!***************************!*\
  !*** multi ./src/main.ts ***!
  \***************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

module.exports = __webpack_require__(/*! C:\udonarium_lily\src\main.ts */"zUnb");


/***/ }),

/***/ "0cI7":
/*!******************************************************************************************!*\
  !*** ./src/app/component/game-character-generator/game-character-generator.component.ts ***!
  \******************************************************************************************/
/*! exports provided: GameCharacterGeneratorComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GameCharacterGeneratorComponent", function() { return GameCharacterGeneratorComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "fXoL");
/* harmony import */ var _udonarium_core_file_storage_image_file__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @udonarium/core/file-storage/image-file */ "FjwV");
/* harmony import */ var _udonarium_core_file_storage_image_storage__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @udonarium/core/file-storage/image-storage */ "JQpJ");
/* harmony import */ var _udonarium_core_synchronize_object_object_serializer__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @udonarium/core/synchronize-object/object-serializer */ "MDT1");
/* harmony import */ var _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @udonarium/core/synchronize-object/object-store */ "hm7o");
/* harmony import */ var _udonarium_core_system__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @udonarium/core/system */ "yNnI");
/* harmony import */ var _udonarium_game_character__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @udonarium/game-character */ "M/aK");
/* harmony import */ var _udonarium_game_table_mask__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @udonarium/game-table-mask */ "AyjR");
/* harmony import */ var component_file_selecter_file_selecter_component__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! component/file-selecter/file-selecter.component */ "FR7b");
/* harmony import */ var service_modal_service__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! service/modal.service */ "CE6K");
/* harmony import */ var service_panel_service__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! service/panel.service */ "M9xM");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @angular/forms */ "3Pt+");
/* harmony import */ var pipe_safe_pipe__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! pipe/safe.pipe */ "6HCy");














var GameCharacterGeneratorComponent = /** @class */ (function () {
    function GameCharacterGeneratorComponent(viewContainerRef, modalService, panelService) {
        this.viewContainerRef = viewContainerRef;
        this.modalService = modalService;
        this.panelService = panelService;
        this.name = "角色";
        this.size = 1;
        this.xml = '';
        this.minSize = 1;
        this.maxSize = 20;
        this.tableBackgroundImage = _udonarium_core_file_storage_image_file__WEBPACK_IMPORTED_MODULE_1__["ImageFile"].createEmpty('null');
    }
    GameCharacterGeneratorComponent.prototype.ngOnInit = function () {
        var _this = this;
        Promise.resolve().then(function () { return _this.panelService.title = '角色產生器'; });
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_5__["EventSystem"].register(this)
            .on('SELECT_FILE', function (event) {
            console.log('SELECT_FILE GameCharacterGeneratorComponent ' + event.data.fileIdentifier);
            var fileIdentifier = event.data.fileIdentifier;
            var file = _udonarium_core_file_storage_image_storage__WEBPACK_IMPORTED_MODULE_2__["ImageStorage"].instance.get(fileIdentifier);
            if (file)
                _this.tableBackgroundImage = file;
        });
    };
    GameCharacterGeneratorComponent.prototype.ngAfterViewInit = function () { };
    GameCharacterGeneratorComponent.prototype.ngOnDestroy = function () {
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_5__["EventSystem"].unregister(this);
    };
    GameCharacterGeneratorComponent.prototype.createGameCharacter = function () {
        _udonarium_game_character__WEBPACK_IMPORTED_MODULE_6__["GameCharacter"].create(this.name, this.size, this.tableBackgroundImage.identifier);
    };
    GameCharacterGeneratorComponent.prototype.createGameTableMask = function () {
        var viewTable = _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_4__["ObjectStore"].instance.get('tableSelecter').viewTable;
        if (!viewTable)
            return;
        var tableMask = _udonarium_game_table_mask__WEBPACK_IMPORTED_MODULE_7__["GameTableMask"].create('地圖迷霧', 5, 5, 100);
        viewTable.appendChild(tableMask);
    };
    GameCharacterGeneratorComponent.prototype.createGameCharacterForXML = function (xml) {
        _udonarium_core_synchronize_object_object_serializer__WEBPACK_IMPORTED_MODULE_3__["ObjectSerializer"].instance.parseXml(xml);
    };
    GameCharacterGeneratorComponent.prototype.openModal = function () {
        this.modalService.open(component_file_selecter_file_selecter_component__WEBPACK_IMPORTED_MODULE_8__["FileSelecterComponent"]);
    };
    GameCharacterGeneratorComponent.ɵfac = function GameCharacterGeneratorComponent_Factory(t) { return new (t || GameCharacterGeneratorComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewContainerRef"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](service_modal_service__WEBPACK_IMPORTED_MODULE_9__["ModalService"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](service_panel_service__WEBPACK_IMPORTED_MODULE_10__["PanelService"])); };
    GameCharacterGeneratorComponent.ɵcmp = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineComponent"]({ type: GameCharacterGeneratorComponent, selectors: [["game-character-generator"]], decls: 15, vars: 11, consts: [[3, "click"], ["height", "120", 3, "src"], ["placeholder", "Name", "name", "name", 3, "ngModel", "ngModelChange"], ["type", "range", "name", "size", 3, "ngModel", "min", "max", "ngModelChange"], ["type", "number", 3, "ngModel", "min", "max", "ngModelChange"]], template: function GameCharacterGeneratorComponent_Template(rf, ctx) { if (rf & 1) {
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "button", 0);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function GameCharacterGeneratorComponent_Template_button_click_0_listener() { return ctx.openModal(); });
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](1, "\u9078\u64C7\u5716\u7247");
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](2, "div");
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](3, "img", 1);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](4, "safe");
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](5, "input", 2);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("ngModelChange", function GameCharacterGeneratorComponent_Template_input_ngModelChange_5_listener($event) { return ctx.name = $event; });
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](6, "div");
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](7, "div");
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](8, "input", 3);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("ngModelChange", function GameCharacterGeneratorComponent_Template_input_ngModelChange_8_listener($event) { return ctx.size = $event; });
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](9, " Size : ");
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](10, "input", 4);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("ngModelChange", function GameCharacterGeneratorComponent_Template_input_ngModelChange_10_listener($event) { return ctx.size = $event; });
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](11, "button", 0);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function GameCharacterGeneratorComponent_Template_button_click_11_listener() { return ctx.createGameCharacter(); });
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](12, "\u65B0\u589E\u89D2\u8272");
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](13, "button", 0);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function GameCharacterGeneratorComponent_Template_button_click_13_listener() { return ctx.createGameTableMask(); });
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](14, "\u65B0\u589E\u5730\u5716\u8FF7\u9727");
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        } if (rf & 2) {
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("src", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind2"](4, 8, ctx.tableBackgroundImage.url, "resourceUrl"), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵsanitizeUrl"]);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngModel", ctx.name);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpropertyInterpolate"]("min", ctx.minSize);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpropertyInterpolate"]("max", ctx.maxSize);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngModel", ctx.size);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpropertyInterpolate"]("min", ctx.minSize);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpropertyInterpolate"]("max", ctx.maxSize);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngModel", ctx.size);
        } }, directives: [_angular_forms__WEBPACK_IMPORTED_MODULE_11__["DefaultValueAccessor"], _angular_forms__WEBPACK_IMPORTED_MODULE_11__["NgControlStatus"], _angular_forms__WEBPACK_IMPORTED_MODULE_11__["NgModel"], _angular_forms__WEBPACK_IMPORTED_MODULE_11__["RangeValueAccessor"], _angular_forms__WEBPACK_IMPORTED_MODULE_11__["NumberValueAccessor"]], pipes: [pipe_safe_pipe__WEBPACK_IMPORTED_MODULE_12__["SafePipe"]], styles: ["\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJnYW1lLWNoYXJhY3Rlci1nZW5lcmF0b3IuY29tcG9uZW50LmNzcyJ9 */"] });
    return GameCharacterGeneratorComponent;
}());

/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](GameCharacterGeneratorComponent, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"],
        args: [{
                selector: 'game-character-generator',
                templateUrl: './game-character-generator.component.html',
                styleUrls: ['./game-character-generator.component.css']
            }]
    }], function () { return [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewContainerRef"] }, { type: service_modal_service__WEBPACK_IMPORTED_MODULE_9__["ModalService"] }, { type: service_panel_service__WEBPACK_IMPORTED_MODULE_10__["PanelService"] }]; }, null); })();


/***/ }),

/***/ "1lIu":
/*!************************************************************!*\
  !*** ./src/app/class/core/synchronize-object/decorator.ts ***!
  \************************************************************/
/*! exports provided: SyncObject, SyncVar */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SyncObject", function() { return SyncObject; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SyncVar", function() { return SyncVar; });
/* harmony import */ var _decorator_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./decorator-core */ "rl/O");
/* harmony import */ var _object_node__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./object-node */ "F67Z");


function SyncObject(alias) {
    return function (constructor) {
        Object(_decorator_core__WEBPACK_IMPORTED_MODULE_0__["defineSyncObject"])(alias)(constructor);
    };
}
function SyncVar() {
    return function (target, key) {
        if (target instanceof _object_node__WEBPACK_IMPORTED_MODULE_1__["ObjectNode"]) {
            Object(_decorator_core__WEBPACK_IMPORTED_MODULE_0__["defineSyncAttribute"])()(target, key);
        }
        else {
            Object(_decorator_core__WEBPACK_IMPORTED_MODULE_0__["defineSyncVariable"])()(target, key);
        }
    };
}


/***/ }),

/***/ "23G+":
/*!*************************************!*\
  !*** ./src/app/class/card-stack.ts ***!
  \*************************************/
/*! exports provided: CardStack */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CardStack", function() { return CardStack; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "mrSG");
/* harmony import */ var _card__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./card */ "jiu3");
/* harmony import */ var _core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./core/synchronize-object/decorator */ "1lIu");
/* harmony import */ var _core_synchronize_object_object_node__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./core/synchronize-object/object-node */ "F67Z");
/* harmony import */ var _core_system__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./core/system */ "yNnI");
/* harmony import */ var _data_element__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./data-element */ "gkrD");
/* harmony import */ var _peer_cursor__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./peer-cursor */ "+UEV");
/* harmony import */ var _tabletop_object__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./tabletop-object */ "e8gA");
/* harmony import */ var _tabletop_object_util__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./tabletop-object-util */ "g6Hf");









var CardStack = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"])(CardStack, _super);
    function CardStack() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.rotate = 0;
        _this.zindex = 0;
        _this.owner = '';
        _this.isShowTotal = true;
        return _this;
    }
    CardStack_1 = CardStack;
    Object.defineProperty(CardStack.prototype, "name", {
        get: function () { return this.getCommonValue('name', ''); },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(CardStack.prototype, "ownerName", {
        get: function () {
            var object = _peer_cursor__WEBPACK_IMPORTED_MODULE_6__["PeerCursor"].findByUserId(this.owner);
            return object ? object.name : '';
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(CardStack.prototype, "hasOwner", {
        get: function () { return 0 < this.owner.length; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(CardStack.prototype, "cardRoot", {
        get: function () {
            var e_1, _a;
            try {
                for (var _b = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(this.children), _c = _b.next(); !_c.done; _c = _b.next()) {
                    var node = _c.value;
                    if (node.getAttribute('name') === 'cardRoot')
                        return node;
                }
            }
            catch (e_1_1) { e_1 = { error: e_1_1 }; }
            finally {
                try {
                    if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
                }
                finally { if (e_1) throw e_1.error; }
            }
            return null;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(CardStack.prototype, "cards", {
        get: function () { return this.cardRoot ? this.cardRoot.children : []; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(CardStack.prototype, "topCard", {
        get: function () { return this.isEmpty ? null : this.cards[0]; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(CardStack.prototype, "isEmpty", {
        get: function () { return this.cards.length < 1; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(CardStack.prototype, "imageFile", {
        get: function () { return this.topCard ? this.topCard.imageFile : null; },
        enumerable: false,
        configurable: true
    });
    // ObjectNode Lifecycle
    CardStack.prototype.onChildRemoved = function (child) {
        _super.prototype.onChildRemoved.call(this, child);
        if (child instanceof _card__WEBPACK_IMPORTED_MODULE_1__["Card"]) {
            _core_system__WEBPACK_IMPORTED_MODULE_4__["EventSystem"].trigger('CARD_STACK_DECREASED', { cardStackIdentifier: this.identifier, cardIdentifier: child.identifier });
        }
    };
    CardStack.prototype.shuffle = function () {
        var e_2, _a;
        if (!this.cardRoot)
            return;
        var length = this.cardRoot.children.length;
        try {
            for (var _b = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(this.cards), _c = _b.next(); !_c.done; _c = _b.next()) {
                var card = _c.value;
                card.index = Math.random() * length;
                card.rotate = Math.floor(Math.random() * 2) * 180;
                this.setSamePositionFor(card);
            }
        }
        catch (e_2_1) { e_2 = { error: e_2_1 }; }
        finally {
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            }
            finally { if (e_2) throw e_2.error; }
        }
        return this.cards;
    };
    CardStack.prototype.drawCard = function () {
        var card = this.topCard ? this.cardRoot.removeChild(this.topCard) : null;
        if (card) {
            card.rotate += this.rotate;
            if (360 < card.rotate)
                card.rotate -= 360;
            this.setSamePositionFor(card);
            card.toTopmost();
        }
        return card;
    };
    CardStack.prototype.drawCardAll = function () {
        var e_3, _a;
        var cards = this.cards;
        try {
            for (var cards_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(cards), cards_1_1 = cards_1.next(); !cards_1_1.done; cards_1_1 = cards_1.next()) {
                var card = cards_1_1.value;
                this.cardRoot.removeChild(card);
                card.rotate += this.rotate;
                this.setSamePositionFor(card);
                if (360 < card.rotate)
                    card.rotate -= 360;
            }
        }
        catch (e_3_1) { e_3 = { error: e_3_1 }; }
        finally {
            try {
                if (cards_1_1 && !cards_1_1.done && (_a = cards_1.return)) _a.call(cards_1);
            }
            finally { if (e_3) throw e_3.error; }
        }
        return cards;
    };
    CardStack.prototype.faceUp = function () {
        if (this.topCard) {
            this.topCard.faceUp();
            this.setSamePositionFor(this.topCard);
        }
    };
    CardStack.prototype.faceDown = function () {
        if (this.topCard) {
            this.topCard.faceDown();
            this.setSamePositionFor(this.topCard);
        }
    };
    CardStack.prototype.faceUpAll = function () {
        var e_4, _a;
        try {
            for (var _b = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(this.cards), _c = _b.next(); !_c.done; _c = _b.next()) {
                var card = _c.value;
                card.faceUp();
                this.setSamePositionFor(card);
            }
        }
        catch (e_4_1) { e_4 = { error: e_4_1 }; }
        finally {
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            }
            finally { if (e_4) throw e_4.error; }
        }
    };
    CardStack.prototype.faceDownAll = function () {
        var e_5, _a;
        try {
            for (var _b = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(this.cards), _c = _b.next(); !_c.done; _c = _b.next()) {
                var card = _c.value;
                card.faceDown();
                this.setSamePositionFor(card);
            }
        }
        catch (e_5_1) { e_5 = { error: e_5_1 }; }
        finally {
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            }
            finally { if (e_5) throw e_5.error; }
        }
    };
    CardStack.prototype.uprightAll = function () {
        var e_6, _a;
        try {
            for (var _b = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(this.cards), _c = _b.next(); !_c.done; _c = _b.next()) {
                var card = _c.value;
                card.rotate = 0;
                this.setSamePositionFor(card);
            }
        }
        catch (e_6_1) { e_6 = { error: e_6_1 }; }
        finally {
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            }
            finally { if (e_6) throw e_6.error; }
        }
    };
    CardStack.prototype.unifyCardsSize = function (size) {
        var e_7, _a;
        try {
            for (var _b = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(this.cards), _c = _b.next(); !_c.done; _c = _b.next()) {
                var card = _c.value;
                if (card.size !== size)
                    card.size = size;
            }
        }
        catch (e_7_1) { e_7 = { error: e_7_1 }; }
        finally {
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            }
            finally { if (e_7) throw e_7.error; }
        }
    };
    CardStack.prototype.putOnTop = function (card) {
        if (!this.cardRoot)
            return null;
        if (!this.topCard)
            return this.putOnBottom(card);
        card.owner = '';
        card.zindex = 0;
        var delta = Math.abs(card.rotate - this.rotate);
        if (180 < delta)
            delta = 360 - delta;
        card.rotate = delta <= 90 ? 0 : 180;
        this.setSamePositionFor(card);
        return this.cardRoot.insertBefore(card, this.topCard);
    };
    CardStack.prototype.putOnBottom = function (card) {
        if (!this.cardRoot)
            return null;
        card.owner = '';
        card.zindex = 0;
        var delta = Math.abs(card.rotate - this.rotate);
        if (180 < delta)
            delta = 360 - delta;
        card.rotate = delta <= 90 ? 0 : 180;
        this.setSamePositionFor(card);
        return this.cardRoot.appendChild(card);
    };
    CardStack.prototype.toTopmost = function () {
        Object(_tabletop_object_util__WEBPACK_IMPORTED_MODULE_8__["moveToTopmost"])(this, ['card']);
    };
    // override
    CardStack.prototype.setLocation = function (location) {
        var e_8, _a;
        _super.prototype.setLocation.call(this, location);
        var cards = this.cards;
        try {
            for (var cards_2 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(cards), cards_2_1 = cards_2.next(); !cards_2_1.done; cards_2_1 = cards_2.next()) {
                var card = cards_2_1.value;
                card.setLocation(location);
            }
        }
        catch (e_8_1) { e_8 = { error: e_8_1 }; }
        finally {
            try {
                if (cards_2_1 && !cards_2_1.done && (_a = cards_2.return)) _a.call(cards_2);
            }
            finally { if (e_8) throw e_8.error; }
        }
    };
    CardStack.prototype.setSamePositionFor = function (card) {
        card.location.name = this.location.name;
        card.location.x = this.location.x;
        card.location.y = this.location.y;
        card.posZ = this.posZ;
    };
    CardStack.create = function (name, identifier) {
        var object = null;
        if (identifier) {
            object = new CardStack_1(identifier);
        }
        else {
            object = new CardStack_1();
        }
        object.createDataElements();
        object.commonDataElement.appendChild(_data_element__WEBPACK_IMPORTED_MODULE_5__["DataElement"].create('name', name, {}, 'name_' + object.identifier));
        var cardRoot = new _core_synchronize_object_object_node__WEBPACK_IMPORTED_MODULE_3__["ObjectNode"]('cardRoot_' + object.identifier);
        cardRoot.setAttribute('name', 'cardRoot');
        cardRoot.initialize();
        object.appendChild(cardRoot);
        object.initialize();
        return object;
    };
    var CardStack_1;
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_2__["SyncVar"])()
    ], CardStack.prototype, "rotate", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_2__["SyncVar"])()
    ], CardStack.prototype, "zindex", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_2__["SyncVar"])()
    ], CardStack.prototype, "owner", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_2__["SyncVar"])()
    ], CardStack.prototype, "isShowTotal", void 0);
    CardStack = CardStack_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_2__["SyncObject"])('card-stack')
    ], CardStack);
    return CardStack;
}(_tabletop_object__WEBPACK_IMPORTED_MODULE_7__["TabletopObject"]));



/***/ }),

/***/ "39Ym":
/*!*****************************************************!*\
  !*** ./src/app/class/core/system/event/listener.ts ***!
  \*****************************************************/
/*! exports provided: Listener */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Listener", function() { return Listener; });
var Listener = /** @class */ (function () {
    function Listener(subject, key) {
        this._priority = 0;
        this._isRegistered = false;
        this._subject = subject;
        this._key = key;
    }
    Object.defineProperty(Listener.prototype, "subject", {
        get: function () { return this._subject; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Listener.prototype, "key", {
        get: function () { return this._key; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Listener.prototype, "eventName", {
        get: function () { return this._eventName; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Listener.prototype, "priority", {
        get: function () { return this._priority; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Listener.prototype, "callback", {
        get: function () { return this._callback; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Listener.prototype, "isOnlyOnce", {
        get: function () { return this._isOnlyOnce; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Listener.prototype, "isRegistered", {
        get: function () { return this._isRegistered; },
        enumerable: false,
        configurable: true
    });
    Listener.prototype.on = function () {
        var args = [];
        for (var _i = 0; _i < arguments.length; _i++) {
            args[_i] = arguments[_i];
        }
        this._isOnlyOnce = false;
        if (args.length === 2) {
            return this.register(args[0], 0, args[1]);
        }
        else {
            return this.register(args[0], args[1], args[2]);
        }
    };
    Listener.prototype.once = function () {
        var args = [];
        for (var _i = 0; _i < arguments.length; _i++) {
            args[_i] = arguments[_i];
        }
        var listener = this.on.apply(this, args);
        this._isOnlyOnce = true;
        return listener;
    };
    Listener.prototype.register = function (eventName, priority, callback) {
        if (this.isRegistered)
            this.unregister();
        this._eventName = eventName ? eventName : '*';
        this._priority = priority;
        this._callback = callback;
        this.subject.registerListener(this);
        this._isRegistered = true;
        return new Listener(this.subject, this.key);
    };
    Listener.prototype.unregister = function () {
        this.subject.unregisterListener(this);
        this._callback = null;
        this._isRegistered = false;
        return this;
    };
    Listener.prototype.trigger = function (event) {
        if (this.callback && this.isRegistered) {
            this.callback.apply(this.key, [event, this]);
            if (this.isOnlyOnce)
                this.unregister();
        }
    };
    Listener.prototype.isEqual = function (key, eventName, callback) {
        var matchTarget = (key == null || key === this.key);
        var matchEventName = (eventName == null || eventName === this.eventName);
        var matchCallback = (callback == null || callback === this.callback);
        return matchTarget && matchEventName && matchCallback;
    };
    return Listener;
}());



/***/ }),

/***/ "3jYK":
/*!************************************************!*\
  !*** ./src/app/directive/rotable.directive.ts ***!
  \************************************************/
/*! exports provided: RotableDirective */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RotableDirective", function() { return RotableDirective; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "fXoL");
/* harmony import */ var _udonarium_core_system__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @udonarium/core/system */ "yNnI");
/* harmony import */ var _input_handler__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./input-handler */ "96Ug");
/* harmony import */ var service_batch_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! service/batch.service */ "taL5");
/* harmony import */ var service_pointer_device_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! service/pointer-device.service */ "GPP8");
/* harmony import */ var service_coordinate_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! service/coordinate.service */ "TzEH");







var RotableDirective = /** @class */ (function () {
    function RotableDirective(ngZone, elementRef, batchService, pointerDeviceService, coordinateService) {
        this.ngZone = ngZone;
        this.elementRef = elementRef;
        this.batchService = batchService;
        this.pointerDeviceService = pointerDeviceService;
        this.coordinateService = coordinateService;
        this.transformCssOffset = '';
        this.grabbingSelecter = '.rotate-grab';
        this.isDisable = false;
        this.onstart = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        this.ondragstart = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        this.ondrag = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        this.ondragend = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        this.onend = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        this._rotate = 0;
        this.valueChange = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        this.rotateOffset = 0;
        this.updateTimer = null;
        this.grabbingElement = null;
        this.input = null;
    }
    Object.defineProperty(RotableDirective.prototype, "option", {
        set: function (option) {
            this.tabletopObject = option.tabletopObject != null ? option.tabletopObject : this.tabletopObject;
            this.grabbingSelecter = option.grabbingSelecter != null ? option.grabbingSelecter : this.grabbingSelecter;
            this.transformCssOffset = option.transformCssOffset != null ? option.transformCssOffset : this.transformCssOffset;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(RotableDirective.prototype, "rotate", {
        get: function () { return this._rotate; },
        set: function (rotate) { this._rotate = rotate; this.setUpdateTimer(); },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(RotableDirective.prototype, "value", {
        set: function (value) { this._rotate = value; this.updateTransformCss(); },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(RotableDirective.prototype, "isAllowedToRotate", {
        get: function () {
            if (!this.grabbingElement || !this.input.target)
                return false;
            if (this.grabbingSelecter.length < 1)
                return true;
            var elements = this.input.target.querySelectorAll(this.grabbingSelecter);
            var macth = false;
            for (var i = 0; i < elements.length; i++) {
                macth = elements[i].contains(this.grabbingElement);
                if (macth)
                    return true;
            }
            return false;
        },
        enumerable: false,
        configurable: true
    });
    RotableDirective.prototype.ngAfterViewInit = function () {
        var _this = this;
        this.ngZone.runOutsideAngular(function () {
            _this.input = new _input_handler__WEBPACK_IMPORTED_MODULE_2__["InputHandler"](_this.elementRef.nativeElement);
        });
        this.input.onStart = this.onInputStart.bind(this);
        this.input.onMove = this.onInputMove.bind(this);
        this.input.onEnd = this.onInputEnd.bind(this);
        this.input.onContextMenu = this.onContextMenu.bind(this);
        if (this.tabletopObject) {
            _udonarium_core_system__WEBPACK_IMPORTED_MODULE_1__["EventSystem"].register(this)
                .on('UPDATE_GAME_OBJECT', -1000, function (event) {
                if ((event.isSendFromSelf && _this.input.isGrabbing) || event.data.identifier !== _this.tabletopObject.identifier || !_this.shouldTransition(_this.tabletopObject))
                    return;
                _this.batchService.add(function () {
                    if (_this.input.isGrabbing) {
                        _this.cancel();
                    }
                    else {
                        _this.setAnimatedTransition(true);
                    }
                    _this.stopTransition();
                    _this.setRotate(_this.tabletopObject);
                }, _this);
            });
            this.setRotate(this.tabletopObject);
        }
        else {
            this.updateTransformCss();
        }
    };
    RotableDirective.prototype.ngOnDestroy = function () {
        this.cancel();
        this.input.destroy();
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_1__["EventSystem"].unregister(this);
        this.batchService.remove(this);
    };
    RotableDirective.prototype.cancel = function () {
        this.input.cancel();
        this.grabbingElement = null;
        this.setAnimatedTransition(true);
    };
    RotableDirective.prototype.onInputStart = function (e) {
        this.grabbingElement = e.target;
        if (this.isDisable || !this.isAllowedToRotate || e.button === 1 || e.button === 2)
            return this.cancel();
        e.stopPropagation();
        this.onstart.emit(e);
        var pointer = this.coordinateService.convertLocalToLocal(this.input.pointer, this.grabbingElement, this.input.target.parentElement);
        this.rotateOffset = this.calcRotate(pointer, this.rotate);
        this.setAnimatedTransition(false);
    };
    RotableDirective.prototype.onInputMove = function (e) {
        if (this.input.isGrabbing && !this.pointerDeviceService.isDragging) {
            return this.cancel(); // todo
        }
        if (this.isDisable || !this.input.isGrabbing)
            return this.cancel();
        if (e.cancelable)
            e.preventDefault();
        e.stopPropagation();
        var pointer3d = this.coordinateService.convertLocalToLocal(this.input.pointer, this.grabbingElement, this.input.target.parentElement);
        var angle = this.calcRotate(pointer3d, this.rotateOffset);
        if (!this.input.isDragging)
            this.ondragstart.emit(e);
        this.ondrag.emit(e);
        this.rotate = angle;
    };
    RotableDirective.prototype.onInputEnd = function (e) {
        if (this.isDisable)
            return this.cancel();
        e.stopPropagation();
        if (this.input.isDragging)
            this.ondragend.emit(e);
        this.cancel();
        this.snapToPolygonal();
        this.onend.emit(e);
    };
    RotableDirective.prototype.onContextMenu = function (e) {
        if (this.isDisable)
            return this.cancel();
        if (e.cancelable)
            e.preventDefault();
        this.cancel();
        this.snapToPolygonal();
    };
    RotableDirective.prototype.calcRotate = function (pointer, rotateOffset) {
        var centerX = this.input.target.clientWidth / 2;
        var centerY = this.input.target.clientHeight / 2;
        var x = pointer.x - centerX;
        var y = pointer.y - centerY;
        var rad = Math.atan2(y, x);
        return ((rad * 180 / Math.PI) - rotateOffset) % 360;
    };
    RotableDirective.prototype.snapToPolygonal = function (polygonal) {
        if (polygonal === void 0) { polygonal = 24; }
        if (polygonal <= 1)
            return;
        this.rotate = this.rotate < 0 ? this.rotate - (180 / polygonal) : this.rotate + (180 / polygonal);
        this.rotate -= (this.rotate) % (360 / polygonal);
    };
    RotableDirective.prototype.setUpdateTimer = function () {
        var _this = this;
        if (this.updateTimer === null) {
            this.updateTimer = setTimeout(function () {
                _this.valueChange.emit(_this.rotate);
                if (_this.tabletopObject)
                    _this.tabletopObject.rotate = _this.rotate;
                _this.updateTimer = null;
            }, 66);
        }
        this.updateTransformCss();
    };
    RotableDirective.prototype.setRotate = function (object) {
        if (object)
            this._rotate = object.rotate;
        this.updateTransformCss();
    };
    RotableDirective.prototype.setAnimatedTransition = function (isEnable) {
        if (!this.input)
            return;
        this.input.target.style.transition = isEnable ? 'transform 132ms linear' : '';
    };
    RotableDirective.prototype.shouldTransition = function (object) {
        return object.rotate !== this.rotate;
    };
    RotableDirective.prototype.stopTransition = function () {
        this.input.target.style.transform = window.getComputedStyle(this.input.target).transform;
    };
    RotableDirective.prototype.updateTransformCss = function () {
        if (!this.input)
            return;
        var css = this.transformCssOffset + ' rotateZ(' + this.rotate + 'deg)';
        this.input.target.style.transform = css;
    };
    RotableDirective.ɵfac = function RotableDirective_Factory(t) { return new (t || RotableDirective)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["NgZone"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["ElementRef"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](service_batch_service__WEBPACK_IMPORTED_MODULE_3__["BatchService"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](service_pointer_device_service__WEBPACK_IMPORTED_MODULE_4__["PointerDeviceService"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](service_coordinate_service__WEBPACK_IMPORTED_MODULE_5__["CoordinateService"])); };
    RotableDirective.ɵdir = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineDirective"]({ type: RotableDirective, selectors: [["", "appRotable", ""]], inputs: { option: ["rotable.option", "option"], isDisable: ["rotable.disable", "isDisable"], value: ["rotable.value", "value"] }, outputs: { onstart: "rotable.onstart", ondragstart: "rotable.ondragstart", ondrag: "rotable.ondrag", ondragend: "rotable.ondragend", onend: "rotable.onend", valueChange: "rotable.valueChange" } });
    return RotableDirective;
}());

/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](RotableDirective, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Directive"],
        args: [{
                selector: '[appRotable]'
            }]
    }], function () { return [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["NgZone"] }, { type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ElementRef"] }, { type: service_batch_service__WEBPACK_IMPORTED_MODULE_3__["BatchService"] }, { type: service_pointer_device_service__WEBPACK_IMPORTED_MODULE_4__["PointerDeviceService"] }, { type: service_coordinate_service__WEBPACK_IMPORTED_MODULE_5__["CoordinateService"] }]; }, { option: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"],
            args: ['rotable.option']
        }], isDisable: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"],
            args: ['rotable.disable']
        }], onstart: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"],
            args: ['rotable.onstart']
        }], ondragstart: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"],
            args: ['rotable.ondragstart']
        }], ondrag: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"],
            args: ['rotable.ondrag']
        }], ondragend: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"],
            args: ['rotable.ondragend']
        }], onend: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"],
            args: ['rotable.onend']
        }], value: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"],
            args: ['rotable.value']
        }], valueChange: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"],
            args: ['rotable.valueChange']
        }] }); })();


/***/ }),

/***/ "3v9A":
/*!************************************************************************!*\
  !*** ./src/app/component/game-table-mask/game-table-mask.component.ts ***!
  \************************************************************************/
/*! exports provided: GameTableMaskComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GameTableMaskComponent", function() { return GameTableMaskComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "fXoL");
/* harmony import */ var _udonarium_core_synchronize_object_object_node__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @udonarium/core/synchronize-object/object-node */ "F67Z");
/* harmony import */ var _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @udonarium/core/synchronize-object/object-store */ "hm7o");
/* harmony import */ var _udonarium_core_system__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @udonarium/core/system */ "yNnI");
/* harmony import */ var _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @udonarium/sound-effect */ "veT5");
/* harmony import */ var component_game_character_sheet_game_character_sheet_component__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! component/game-character-sheet/game-character-sheet.component */ "zXSY");
/* harmony import */ var directive_input_handler__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! directive/input-handler */ "96Ug");
/* harmony import */ var service_context_menu_service__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! service/context-menu.service */ "9FhF");
/* harmony import */ var service_tabletop_action_service__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! service/tabletop-action.service */ "AFBa");
/* harmony import */ var service_panel_service__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! service/panel.service */ "M9xM");
/* harmony import */ var service_pointer_device_service__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! service/pointer-device.service */ "GPP8");
/* harmony import */ var service_coordinate_service__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! service/coordinate.service */ "TzEH");
/* harmony import */ var directive_movable_directive__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! directive/movable.directive */ "+Kyd");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @angular/common */ "ofXK");
/* harmony import */ var pipe_safe_pipe__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! pipe/safe.pipe */ "6HCy");

















function GameTableMaskComponent_div_1_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](0, "div");
} }
function GameTableMaskComponent_ng_template_2_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](0, "div", 5);
} if (rf & 2) {
    var ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵstyleProp"]("background-color", "rgba(10, 10, 10," + ctx_r2.opacity + ")");
} }
function GameTableMaskComponent_ng_template_4_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 5);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](1, "img", 6);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](2, "safe");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    var ctx_r4 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵstyleProp"]("opacity", ctx_r4.opacity);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("src", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind2"](2, 3, ctx_r4.imageFile.url, "resourceUrl"), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵsanitizeUrl"]);
} }
function GameTableMaskComponent_div_6_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 7);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "i", 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](2, "lock");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} }
var _c0 = function (a0) { return { "is-grab": a0 }; };
var GameTableMaskComponent = /** @class */ (function () {
    function GameTableMaskComponent(ngZone, tabletopActionService, contextMenuService, elementRef, panelService, changeDetector, pointerDeviceService, coordinateService) {
        this.ngZone = ngZone;
        this.tabletopActionService = tabletopActionService;
        this.contextMenuService = contextMenuService;
        this.elementRef = elementRef;
        this.panelService = panelService;
        this.changeDetector = changeDetector;
        this.pointerDeviceService = pointerDeviceService;
        this.coordinateService = coordinateService;
        this.gameTableMask = null;
        this.is3D = false;
        this.gridSize = 50;
        this.movableOption = {};
        this.input = null;
    }
    Object.defineProperty(GameTableMaskComponent.prototype, "name", {
        get: function () { return this.gameTableMask.name; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(GameTableMaskComponent.prototype, "width", {
        get: function () { return this.adjustMinBounds(this.gameTableMask.width); },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(GameTableMaskComponent.prototype, "height", {
        get: function () { return this.adjustMinBounds(this.gameTableMask.height); },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(GameTableMaskComponent.prototype, "opacity", {
        get: function () { return this.gameTableMask.opacity; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(GameTableMaskComponent.prototype, "imageFile", {
        get: function () { return this.gameTableMask.imageFile; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(GameTableMaskComponent.prototype, "isLock", {
        get: function () { return this.gameTableMask.isLock; },
        set: function (isLock) { this.gameTableMask.isLock = isLock; },
        enumerable: false,
        configurable: true
    });
    GameTableMaskComponent.prototype.ngOnInit = function () {
        var _this = this;
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_3__["EventSystem"].register(this)
            .on('UPDATE_GAME_OBJECT', -1000, function (event) {
            var object = _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_2__["ObjectStore"].instance.get(event.data.identifier);
            if (!_this.gameTableMask || !object)
                return;
            if (_this.gameTableMask === object || (object instanceof _udonarium_core_synchronize_object_object_node__WEBPACK_IMPORTED_MODULE_1__["ObjectNode"] && _this.gameTableMask.contains(object))) {
                _this.changeDetector.markForCheck();
            }
        })
            .on('SYNCHRONIZE_FILE_LIST', function (event) {
            _this.changeDetector.markForCheck();
        })
            .on('UPDATE_FILE_RESOURE', -1000, function (event) {
            _this.changeDetector.markForCheck();
        });
        this.movableOption = {
            tabletopObject: this.gameTableMask,
            transformCssOffset: 'translateZ(0.15px)',
            colideLayers: ['terrain']
        };
    };
    GameTableMaskComponent.prototype.ngAfterViewInit = function () {
        var _this = this;
        this.ngZone.runOutsideAngular(function () {
            _this.input = new directive_input_handler__WEBPACK_IMPORTED_MODULE_6__["InputHandler"](_this.elementRef.nativeElement);
        });
        this.input.onStart = this.onInputStart.bind(this);
    };
    GameTableMaskComponent.prototype.ngOnDestroy = function () {
        this.input.destroy();
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_3__["EventSystem"].unregister(this);
    };
    GameTableMaskComponent.prototype.onDragstart = function (e) {
        e.stopPropagation();
        e.preventDefault();
    };
    GameTableMaskComponent.prototype.onInputStart = function (e) {
        this.input.cancel();
        // TODO:もっと良い方法考える
        if (this.isLock) {
            _udonarium_core_system__WEBPACK_IMPORTED_MODULE_3__["EventSystem"].trigger('DRAG_LOCKED_OBJECT', {});
        }
    };
    GameTableMaskComponent.prototype.onContextMenu = function (e) {
        var _this = this;
        e.stopPropagation();
        e.preventDefault();
        if (!this.pointerDeviceService.isAllowedToOpenContextMenu)
            return;
        var menuPosition = this.pointerDeviceService.pointers[0];
        var objectPosition = this.coordinateService.calcTabletopLocalCoordinate();
        this.contextMenuService.open(menuPosition, [
            (this.isLock
                ? {
                    name: '固定解除',
                    action: function () {
                        _this.isLock = false;
                        _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_4__["SoundEffect"].play(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_4__["PresetSound"].unlock);
                    }
                }
                : {
                    name: '固定する',
                    action: function () {
                        _this.isLock = true;
                        _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_4__["SoundEffect"].play(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_4__["PresetSound"].lock);
                    }
                }),
            service_context_menu_service__WEBPACK_IMPORTED_MODULE_7__["ContextMenuSeparator"],
            { name: 'マップマスクを編集', action: function () { _this.showDetail(_this.gameTableMask); } },
            {
                name: 'コピーを作る',
                action: function () {
                    var cloneObject = _this.gameTableMask.clone();
                    console.log('コピー', cloneObject);
                    cloneObject.location.x += _this.gridSize;
                    cloneObject.location.y += _this.gridSize;
                    cloneObject.isLock = false;
                    if (_this.gameTableMask.parent)
                        _this.gameTableMask.parent.appendChild(cloneObject);
                    _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_4__["SoundEffect"].play(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_4__["PresetSound"].cardPut);
                }
            },
            {
                name: '削除する',
                action: function () {
                    _this.gameTableMask.destroy();
                    _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_4__["SoundEffect"].play(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_4__["PresetSound"].sweep);
                }
            },
            service_context_menu_service__WEBPACK_IMPORTED_MODULE_7__["ContextMenuSeparator"],
            { name: 'オブジェクト作成', action: null, subActions: this.tabletopActionService.makeDefaultContextMenuActions(objectPosition) }
        ], this.name);
    };
    GameTableMaskComponent.prototype.onMove = function () {
        _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_4__["SoundEffect"].play(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_4__["PresetSound"].cardPick);
    };
    GameTableMaskComponent.prototype.onMoved = function () {
        _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_4__["SoundEffect"].play(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_4__["PresetSound"].cardPut);
    };
    GameTableMaskComponent.prototype.adjustMinBounds = function (value, min) {
        if (min === void 0) { min = 0; }
        return value < min ? min : value;
    };
    GameTableMaskComponent.prototype.showDetail = function (gameObject) {
        var coordinate = this.pointerDeviceService.pointers[0];
        var title = 'マップマスク設定';
        if (gameObject.name.length)
            title += ' - ' + gameObject.name;
        var option = { title: title, left: coordinate.x - 200, top: coordinate.y - 150, width: 400, height: 300 };
        var component = this.panelService.open(component_game_character_sheet_game_character_sheet_component__WEBPACK_IMPORTED_MODULE_5__["GameCharacterSheetComponent"], option);
        component.tabletopObject = gameObject;
    };
    GameTableMaskComponent.ɵfac = function GameTableMaskComponent_Factory(t) { return new (t || GameTableMaskComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["NgZone"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](service_tabletop_action_service__WEBPACK_IMPORTED_MODULE_8__["TabletopActionService"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](service_context_menu_service__WEBPACK_IMPORTED_MODULE_7__["ContextMenuService"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["ElementRef"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](service_panel_service__WEBPACK_IMPORTED_MODULE_9__["PanelService"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["ChangeDetectorRef"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](service_pointer_device_service__WEBPACK_IMPORTED_MODULE_10__["PointerDeviceService"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](service_coordinate_service__WEBPACK_IMPORTED_MODULE_11__["CoordinateService"])); };
    GameTableMaskComponent.ɵcmp = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineComponent"]({ type: GameTableMaskComponent, selectors: [["game-table-mask"]], hostBindings: function GameTableMaskComponent_HostBindings(rf, ctx) { if (rf & 1) {
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("dragstart", function GameTableMaskComponent_dragstart_HostBindingHandler($event) { return ctx.onDragstart($event); })("contextmenu", function GameTableMaskComponent_contextmenu_HostBindingHandler($event) { return ctx.onContextMenu($event); });
        } }, inputs: { gameTableMask: "gameTableMask", is3D: "is3D" }, decls: 7, vars: 13, consts: [["appMovable", "", 1, "component", 3, "ngClass", "movable.option", "movable.disable", "movable.ondragstart", "movable.ondragend"], [4, "ngIf", "ngIfThen", "ngIfElse"], ["blackMask", ""], ["imageMask", ""], ["class", "lock-icon is-center", 4, "ngIf"], [1, "border", "is-fit-full"], [1, "image", "is-fit-full", 3, "src"], [1, "lock-icon", "is-center"], [1, "material-icons"]], template: function GameTableMaskComponent_Template(rf, ctx) { if (rf & 1) {
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 0);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("movable.ondragstart", function GameTableMaskComponent_Template_div_movable_ondragstart_0_listener() { return ctx.onMove(); })("movable.ondragend", function GameTableMaskComponent_Template_div_movable_ondragend_0_listener() { return ctx.onMoved(); });
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](1, GameTableMaskComponent_div_1_Template, 1, 0, "div", 1);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](2, GameTableMaskComponent_ng_template_2_Template, 1, 2, "ng-template", null, 2, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplateRefExtractor"]);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](4, GameTableMaskComponent_ng_template_4_Template, 3, 6, "ng-template", null, 3, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplateRefExtractor"]);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](6, GameTableMaskComponent_div_6_Template, 3, 0, "div", 4);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        } if (rf & 2) {
            var _r1 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵreference"](3);
            var _r3 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵreference"](5);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵstyleProp"]("width", ctx.width * ctx.gridSize, "px")("height", ctx.height * ctx.gridSize, "px");
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngClass", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction1"](11, _c0, !ctx.isLock))("movable.option", ctx.movableOption)("movable.disable", ctx.isLock);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx.imageFile.url.length < 1)("ngIfThen", _r1)("ngIfElse", _r3);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](5);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx.isLock);
        } }, directives: [directive_movable_directive__WEBPACK_IMPORTED_MODULE_12__["MovableDirective"], _angular_common__WEBPACK_IMPORTED_MODULE_13__["NgClass"], _angular_common__WEBPACK_IMPORTED_MODULE_13__["NgIf"]], pipes: [pipe_safe_pipe__WEBPACK_IMPORTED_MODULE_14__["SafePipe"]], styles: [".is-grab[_ngcontent-%COMP%] {\r\n  cursor: grab;\r\n}\r\n\r\n.is-grabbing[_ngcontent-%COMP%] {\r\n  cursor: grabbing;\r\n}\r\n\r\n.is-transition[_ngcontent-%COMP%] {\r\n  transition: transform 132ms linear;\r\n}\r\n\r\n.component[_ngcontent-%COMP%] {\r\n  position: absolute;\r\n  height: 50px;\r\n  width: 50px;\r\n  -webkit-backface-visibility: hidden;\r\n          backface-visibility: hidden;\r\n  -webkit-user-select: none;\r\n  user-select: none;\r\n  \r\n  -moz-user-drag: none;\r\n  -webkit-user-drag: none;\r\n}\r\n\r\n.image[_ngcontent-%COMP%] {\r\n  display: block;\r\n}\r\n\r\n.lock-icon[_ngcontent-%COMP%] {\r\n  background-color: #CCCCCC;\r\n  border-radius: 100%;\r\n  color: #444;\r\n  width: 25px;\r\n  height: 25px;\r\n}\r\n\r\n.is-center[_ngcontent-%COMP%] {\r\n  position: absolute;\r\n  top: 0;\r\n  bottom: 0;\r\n  left: 0;\r\n  right: 0;\r\n  margin: auto;\r\n}\r\n\r\n.border[_ngcontent-%COMP%] {\r\n  box-sizing: border-box;\r\n  border: solid 2px #CCCCCC;\r\n}\r\n\r\n.is-fit-full[_ngcontent-%COMP%] {\r\n  height: 100%;\r\n  width: 100%;\r\n}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImdhbWUtdGFibGUtbWFzay5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBR0UsWUFBWTtBQUNkOztBQUVBO0VBR0UsZ0JBQWdCO0FBQ2xCOztBQUVBO0VBRUUsa0NBQWtDO0FBQ3BDOztBQUVBO0VBQ0Usa0JBQWtCO0VBQ2xCLFlBQVk7RUFDWixXQUFXO0VBQ1gsbUNBQTJCO1VBQTNCLDJCQUEyQjtFQUUzQix5QkFBeUI7RUFDekIsaUJBQWlCOztFQUVqQixvQkFBb0I7RUFDcEIsdUJBQXVCO0FBQ3pCOztBQUVBO0VBQ0UsY0FBYztBQUNoQjs7QUFFQTtFQUNFLHlCQUF5QjtFQUN6QixtQkFBbUI7RUFDbkIsV0FBVztFQUNYLFdBQVc7RUFDWCxZQUFZO0FBQ2Q7O0FBRUE7RUFDRSxrQkFBa0I7RUFDbEIsTUFBTTtFQUNOLFNBQVM7RUFDVCxPQUFPO0VBQ1AsUUFBUTtFQUNSLFlBQVk7QUFDZDs7QUFFQTtFQUNFLHNCQUFzQjtFQUN0Qix5QkFBeUI7QUFDM0I7O0FBRUE7RUFDRSxZQUFZO0VBQ1osV0FBVztBQUNiIiwiZmlsZSI6ImdhbWUtdGFibGUtbWFzay5jb21wb25lbnQuY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLmlzLWdyYWIge1xyXG4gIGN1cnNvcjogLW1vei1ncmFiO1xyXG4gIGN1cnNvcjogLXdlYmtpdC1ncmFiO1xyXG4gIGN1cnNvcjogZ3JhYjtcclxufVxyXG5cclxuLmlzLWdyYWJiaW5nIHtcclxuICBjdXJzb3I6IC1tb3otZ3JhYmJpbmc7XHJcbiAgY3Vyc29yOiAtd2Via2l0LWdyYWJiaW5nO1xyXG4gIGN1cnNvcjogZ3JhYmJpbmc7XHJcbn1cclxuXHJcbi5pcy10cmFuc2l0aW9uIHtcclxuICAtd2Via2l0LXRyYW5zaXRpb246IC13ZWJraXQtdHJhbnNmb3JtIDEzMm1zIGxpbmVhcjtcclxuICB0cmFuc2l0aW9uOiB0cmFuc2Zvcm0gMTMybXMgbGluZWFyO1xyXG59XHJcblxyXG4uY29tcG9uZW50IHtcclxuICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgaGVpZ2h0OiA1MHB4O1xyXG4gIHdpZHRoOiA1MHB4O1xyXG4gIGJhY2tmYWNlLXZpc2liaWxpdHk6IGhpZGRlbjtcclxuICAtbW96LXVzZXItc2VsZWN0OiBub25lO1xyXG4gIC13ZWJraXQtdXNlci1zZWxlY3Q6IG5vbmU7XHJcbiAgdXNlci1zZWxlY3Q6IG5vbmU7XHJcbiAgXHJcbiAgLW1vei11c2VyLWRyYWc6IG5vbmU7XHJcbiAgLXdlYmtpdC11c2VyLWRyYWc6IG5vbmU7XHJcbn1cclxuXHJcbi5pbWFnZSB7XHJcbiAgZGlzcGxheTogYmxvY2s7XHJcbn1cclxuXHJcbi5sb2NrLWljb24ge1xyXG4gIGJhY2tncm91bmQtY29sb3I6ICNDQ0NDQ0M7XHJcbiAgYm9yZGVyLXJhZGl1czogMTAwJTtcclxuICBjb2xvcjogIzQ0NDtcclxuICB3aWR0aDogMjVweDtcclxuICBoZWlnaHQ6IDI1cHg7XHJcbn1cclxuXHJcbi5pcy1jZW50ZXIge1xyXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcclxuICB0b3A6IDA7XHJcbiAgYm90dG9tOiAwO1xyXG4gIGxlZnQ6IDA7XHJcbiAgcmlnaHQ6IDA7XHJcbiAgbWFyZ2luOiBhdXRvO1xyXG59XHJcblxyXG4uYm9yZGVyIHtcclxuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xyXG4gIGJvcmRlcjogc29saWQgMnB4ICNDQ0NDQ0M7XHJcbn1cclxuXHJcbi5pcy1maXQtZnVsbCB7XHJcbiAgaGVpZ2h0OiAxMDAlO1xyXG4gIHdpZHRoOiAxMDAlO1xyXG59XHJcbiJdfQ== */"], changeDetection: 0 });
    return GameTableMaskComponent;
}());

/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](GameTableMaskComponent, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"],
        args: [{
                selector: 'game-table-mask',
                templateUrl: './game-table-mask.component.html',
                styleUrls: ['./game-table-mask.component.css'],
                changeDetection: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ChangeDetectionStrategy"].OnPush
            }]
    }], function () { return [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["NgZone"] }, { type: service_tabletop_action_service__WEBPACK_IMPORTED_MODULE_8__["TabletopActionService"] }, { type: service_context_menu_service__WEBPACK_IMPORTED_MODULE_7__["ContextMenuService"] }, { type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ElementRef"] }, { type: service_panel_service__WEBPACK_IMPORTED_MODULE_9__["PanelService"] }, { type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ChangeDetectorRef"] }, { type: service_pointer_device_service__WEBPACK_IMPORTED_MODULE_10__["PointerDeviceService"] }, { type: service_coordinate_service__WEBPACK_IMPORTED_MODULE_11__["CoordinateService"] }]; }, { gameTableMask: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], is3D: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], onDragstart: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["HostListener"],
            args: ['dragstart', ['$event']]
        }], onContextMenu: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["HostListener"],
            args: ['contextmenu', ['$event']]
        }] }); })();


/***/ }),

/***/ "4fXm":
/*!**************************************************!*\
  !*** ./src/app/component/card/card.component.ts ***!
  \**************************************************/
/*! exports provided: CardComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CardComponent", function() { return CardComponent; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "mrSG");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "fXoL");
/* harmony import */ var _udonarium_card__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @udonarium/card */ "jiu3");
/* harmony import */ var _udonarium_card_stack__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @udonarium/card-stack */ "23G+");
/* harmony import */ var _udonarium_core_synchronize_object_object_node__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @udonarium/core/synchronize-object/object-node */ "F67Z");
/* harmony import */ var _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @udonarium/core/synchronize-object/object-store */ "hm7o");
/* harmony import */ var _udonarium_core_system__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @udonarium/core/system */ "yNnI");
/* harmony import */ var _udonarium_peer_cursor__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @udonarium/peer-cursor */ "+UEV");
/* harmony import */ var _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @udonarium/sound-effect */ "veT5");
/* harmony import */ var component_game_character_sheet_game_character_sheet_component__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! component/game-character-sheet/game-character-sheet.component */ "zXSY");
/* harmony import */ var directive_input_handler__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! directive/input-handler */ "96Ug");
/* harmony import */ var service_context_menu_service__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! service/context-menu.service */ "9FhF");
/* harmony import */ var service_panel_service__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! service/panel.service */ "M9xM");
/* harmony import */ var service_tabletop_service__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! service/tabletop.service */ "Sdfd");
/* harmony import */ var service_image_service__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! service/image.service */ "Hvpu");
/* harmony import */ var service_pointer_device_service__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! service/pointer-device.service */ "GPP8");
/* harmony import */ var directive_movable_directive__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! directive/movable.directive */ "+Kyd");
/* harmony import */ var directive_rotable_directive__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! directive/rotable.directive */ "3jYK");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! @angular/common */ "ofXK");
/* harmony import */ var pipe_safe_pipe__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! pipe/safe.pipe */ "6HCy");






















function CardComponent_img_2_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelement"](0, "img", 6);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpipe"](1, "safe");
} if (rf & 2) {
    var ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("src", _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpipeBind2"](1, 1, ctx_r0.isFront ? ctx_r0.frontImage.url : ctx_r0.backImage.url, "resourceUrl"), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵsanitizeUrl"]);
} }
var _c0 = function (a0) { return { "transform": a0 }; };
function CardComponent_div_3_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "div", 7);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](1, "span");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
} if (rf & 2) {
    var ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngStyle", _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpureFunction1"](2, _c0, "translateY(-75%) translateX(-50%) translateX(" + ctx_r1.size * ctx_r1.gridSize / 2 + "px)"));
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtextInterpolate"](ctx_r1.ownerName);
} }
function CardComponent_img_4_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelement"](0, "img", 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpipe"](1, "safe");
} if (rf & 2) {
    var ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("src", _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpipeBind2"](1, 1, ctx_r2.frontImage.url, "resourceUrl"), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵsanitizeUrl"]);
} }
function CardComponent_ng_container_5_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](1, "div", 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](2, "i", 10);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](3, "autorenew");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](4, "div", 11);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](5, "i", 10);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](6, "autorenew");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](7, "div", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](8, "i", 10);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](9, "autorenew");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](10, "div", 13);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](11, "i", 10);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](12, "autorenew");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelement"](13, "div", 14);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerEnd"]();
} }
var CardComponent = /** @class */ (function () {
    function CardComponent(ngZone, contextMenuService, panelService, elementRef, changeDetector, tabletopService, imageService, pointerDeviceService) {
        this.ngZone = ngZone;
        this.contextMenuService = contextMenuService;
        this.panelService = panelService;
        this.elementRef = elementRef;
        this.changeDetector = changeDetector;
        this.tabletopService = tabletopService;
        this.imageService = imageService;
        this.pointerDeviceService = pointerDeviceService;
        this.card = null;
        this.is3D = false;
        this.iconHiddenTimer = null;
        this.gridSize = 50;
        this.movableOption = {};
        this.rotableOption = {};
        this.doubleClickTimer = null;
        this.doubleClickPoint = { x: 0, y: 0 };
        this.input = null;
    }
    Object.defineProperty(CardComponent.prototype, "name", {
        get: function () { return this.card.name; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(CardComponent.prototype, "state", {
        get: function () { return this.card.state; },
        set: function (state) { this.card.state = state; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(CardComponent.prototype, "rotate", {
        get: function () { return this.card.rotate; },
        set: function (rotate) { this.card.rotate = rotate; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(CardComponent.prototype, "owner", {
        get: function () { return this.card.owner; },
        set: function (owner) { this.card.owner = owner; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(CardComponent.prototype, "zindex", {
        get: function () { return this.card.zindex; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(CardComponent.prototype, "size", {
        get: function () { return this.adjustMinBounds(this.card.size); },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(CardComponent.prototype, "isHand", {
        get: function () { return this.card.isHand; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(CardComponent.prototype, "isFront", {
        get: function () { return this.card.isFront; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(CardComponent.prototype, "isVisible", {
        get: function () { return this.card.isVisible; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(CardComponent.prototype, "hasOwner", {
        get: function () { return this.card.hasOwner; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(CardComponent.prototype, "ownerName", {
        get: function () { return this.card.ownerName; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(CardComponent.prototype, "imageFile", {
        get: function () { return this.imageService.getSkeletonOr(this.card.imageFile); },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(CardComponent.prototype, "frontImage", {
        get: function () { return this.imageService.getSkeletonOr(this.card.frontImage); },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(CardComponent.prototype, "backImage", {
        get: function () { return this.imageService.getSkeletonOr(this.card.backImage); },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(CardComponent.prototype, "isIconHidden", {
        get: function () { return this.iconHiddenTimer != null; },
        enumerable: false,
        configurable: true
    });
    ;
    CardComponent.prototype.ngOnInit = function () {
        var _this = this;
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_6__["EventSystem"].register(this)
            .on('UPDATE_GAME_OBJECT', -1000, function (event) {
            var object = _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_5__["ObjectStore"].instance.get(event.data.identifier);
            if (!_this.card || !object)
                return;
            if ((_this.card === object)
                || (object instanceof _udonarium_core_synchronize_object_object_node__WEBPACK_IMPORTED_MODULE_4__["ObjectNode"] && _this.card.contains(object))
                || (object instanceof _udonarium_peer_cursor__WEBPACK_IMPORTED_MODULE_7__["PeerCursor"] && object.userId === _this.card.owner)) {
                _this.changeDetector.markForCheck();
            }
        })
            .on('SYNCHRONIZE_FILE_LIST', function (event) {
            _this.changeDetector.markForCheck();
        })
            .on('UPDATE_FILE_RESOURE', -1000, function (event) {
            _this.changeDetector.markForCheck();
        })
            .on('DISCONNECT_PEER', function (event) {
            var cursor = _udonarium_peer_cursor__WEBPACK_IMPORTED_MODULE_7__["PeerCursor"].findByPeerId(event.data.peerId);
            if (!cursor || _this.card.owner === cursor.userId)
                _this.changeDetector.markForCheck();
        });
        this.movableOption = {
            tabletopObject: this.card,
            transformCssOffset: 'translateZ(0.15px)',
            colideLayers: ['terrain']
        };
        this.rotableOption = {
            tabletopObject: this.card
        };
    };
    CardComponent.prototype.ngAfterViewInit = function () {
        var _this = this;
        this.ngZone.runOutsideAngular(function () {
            _this.input = new directive_input_handler__WEBPACK_IMPORTED_MODULE_10__["InputHandler"](_this.elementRef.nativeElement);
        });
        this.input.onStart = function (e) { return _this.ngZone.run(function () { return _this.onInputStart(e); }); };
    };
    CardComponent.prototype.ngOnDestroy = function () {
        this.input.destroy();
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_6__["EventSystem"].unregister(this);
    };
    CardComponent.prototype.onCardDrop = function (e) {
        if (this.card === e.detail || (e.detail instanceof _udonarium_card__WEBPACK_IMPORTED_MODULE_2__["Card"] === false && e.detail instanceof _udonarium_card_stack__WEBPACK_IMPORTED_MODULE_3__["CardStack"] === false)) {
            return;
        }
        e.stopPropagation();
        e.preventDefault();
        if (e.detail instanceof _udonarium_card_stack__WEBPACK_IMPORTED_MODULE_3__["CardStack"]) {
            var cardStack = e.detail;
            var distance = Math.pow((cardStack.location.x - this.card.location.x), 2) + Math.pow((cardStack.location.y - this.card.location.y), 2) + Math.pow((cardStack.posZ - this.card.posZ), 2);
            if (distance < Math.pow(25, 2)) {
                cardStack.location.x = this.card.location.x;
                cardStack.location.y = this.card.location.y;
                cardStack.posZ = this.card.posZ;
                cardStack.putOnBottom(this.card);
            }
        }
    };
    CardComponent.prototype.startDoubleClickTimer = function (e) {
        var _this = this;
        if (!this.doubleClickTimer) {
            this.stopDoubleClickTimer();
            this.doubleClickTimer = setTimeout(function () { return _this.stopDoubleClickTimer(); }, e.touches ? 500 : 300);
            this.doubleClickPoint = this.input.pointer;
            return;
        }
        if (e.touches) {
            this.input.onEnd = this.onDoubleClick.bind(this);
        }
        else {
            this.onDoubleClick();
        }
    };
    CardComponent.prototype.stopDoubleClickTimer = function () {
        clearTimeout(this.doubleClickTimer);
        this.doubleClickTimer = null;
        this.input.onEnd = null;
    };
    CardComponent.prototype.onDoubleClick = function () {
        this.stopDoubleClickTimer();
        var distance = Math.pow((this.doubleClickPoint.x - this.input.pointer.x), 2) + Math.pow((this.doubleClickPoint.y - this.input.pointer.y), 2);
        if (distance < Math.pow(10, 2)) {
            console.log('onDoubleClick !!!!');
            if (this.hasOwner && !this.isHand)
                return;
            this.state = this.isVisible && !this.isHand ? _udonarium_card__WEBPACK_IMPORTED_MODULE_2__["CardState"].BACK : _udonarium_card__WEBPACK_IMPORTED_MODULE_2__["CardState"].FRONT;
            this.owner = '';
            _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_8__["SoundEffect"].play(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_8__["PresetSound"].cardDraw);
        }
    };
    CardComponent.prototype.onDragstart = function (e) {
        e.stopPropagation();
        e.preventDefault();
    };
    CardComponent.prototype.onInputStart = function (e) {
        this.startDoubleClickTimer(e);
        this.card.toTopmost();
        this.startIconHiddenTimer();
    };
    CardComponent.prototype.onContextMenu = function (e) {
        var _this = this;
        e.stopPropagation();
        e.preventDefault();
        if (!this.pointerDeviceService.isAllowedToOpenContextMenu)
            return;
        var position = this.pointerDeviceService.pointers[0];
        this.contextMenuService.open(position, [
            (!this.isVisible || this.isHand
                ? {
                    name: '表にする',
                    action: function () {
                        _this.card.faceUp();
                        _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_8__["SoundEffect"].play(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_8__["PresetSound"].cardDraw);
                    }
                }
                : {
                    name: '裏にする',
                    action: function () {
                        _this.card.faceDown();
                        _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_8__["SoundEffect"].play(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_8__["PresetSound"].cardDraw);
                    }
                }),
            (this.isHand
                ? {
                    name: '裏にする',
                    action: function () {
                        _this.card.faceDown();
                        _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_8__["SoundEffect"].play(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_8__["PresetSound"].cardDraw);
                    }
                }
                : {
                    name: '自分だけ見る',
                    action: function () {
                        _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_8__["SoundEffect"].play(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_8__["PresetSound"].cardDraw);
                        _this.card.faceDown();
                        _this.owner = _udonarium_core_system__WEBPACK_IMPORTED_MODULE_6__["Network"].peerContext.userId;
                    }
                }),
            service_context_menu_service__WEBPACK_IMPORTED_MODULE_11__["ContextMenuSeparator"],
            {
                name: '重なったカードで山札を作る',
                action: function () {
                    _this.createStack();
                    _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_8__["SoundEffect"].play(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_8__["PresetSound"].cardPut);
                }
            },
            service_context_menu_service__WEBPACK_IMPORTED_MODULE_11__["ContextMenuSeparator"],
            { name: 'カードを編集', action: function () { _this.showDetail(_this.card); } },
            {
                name: 'コピーを作る',
                action: function () {
                    var cloneObject = _this.card.clone();
                    cloneObject.location.x += _this.gridSize;
                    cloneObject.location.y += _this.gridSize;
                    cloneObject.toTopmost();
                    _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_8__["SoundEffect"].play(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_8__["PresetSound"].cardPut);
                }
            },
            {
                name: '削除する',
                action: function () {
                    _this.card.destroy();
                    _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_8__["SoundEffect"].play(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_8__["PresetSound"].sweep);
                }
            },
        ], this.isVisible ? this.name : 'カード');
    };
    CardComponent.prototype.onMove = function () {
        this.input.cancel();
        _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_8__["SoundEffect"].play(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_8__["PresetSound"].cardPick);
    };
    CardComponent.prototype.onMoved = function () {
        var _this = this;
        _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_8__["SoundEffect"].play(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_8__["PresetSound"].cardPut);
        this.ngZone.run(function () { return _this.dispatchCardDropEvent(); });
    };
    CardComponent.prototype.createStack = function () {
        var e_1, _a;
        var _this = this;
        var cardStack = _udonarium_card_stack__WEBPACK_IMPORTED_MODULE_3__["CardStack"].create('山札');
        cardStack.location.x = this.card.location.x;
        cardStack.location.y = this.card.location.y;
        cardStack.posZ = this.card.posZ;
        cardStack.location.name = this.card.location.name;
        cardStack.rotate = this.rotate;
        cardStack.zindex = this.card.zindex;
        var cards = this.tabletopService.cards.filter(function (card) {
            var distance = Math.pow((card.location.x - _this.card.location.x), 2) + Math.pow((card.location.y - _this.card.location.y), 2) + Math.pow((card.posZ - _this.card.posZ), 2);
            return distance < Math.pow(100, 2);
        });
        cards.sort(function (a, b) {
            if (a.zindex < b.zindex)
                return 1;
            if (a.zindex > b.zindex)
                return -1;
            return 0;
        });
        try {
            for (var cards_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(cards), cards_1_1 = cards_1.next(); !cards_1_1.done; cards_1_1 = cards_1.next()) {
                var card = cards_1_1.value;
                cardStack.putOnBottom(card);
            }
        }
        catch (e_1_1) { e_1 = { error: e_1_1 }; }
        finally {
            try {
                if (cards_1_1 && !cards_1_1.done && (_a = cards_1.return)) _a.call(cards_1);
            }
            finally { if (e_1) throw e_1.error; }
        }
    };
    CardComponent.prototype.dispatchCardDropEvent = function () {
        console.log('dispatchCardDropEvent');
        var element = this.elementRef.nativeElement;
        var parent = element.parentElement;
        var children = parent.children;
        var event = new CustomEvent('carddrop', { detail: this.card, bubbles: true });
        for (var i = 0; i < children.length; i++) {
            children[i].dispatchEvent(event);
        }
    };
    CardComponent.prototype.startIconHiddenTimer = function () {
        var _this = this;
        clearTimeout(this.iconHiddenTimer);
        this.iconHiddenTimer = setTimeout(function () {
            _this.iconHiddenTimer = null;
            _this.changeDetector.markForCheck();
        }, 300);
        this.changeDetector.markForCheck();
    };
    CardComponent.prototype.adjustMinBounds = function (value, min) {
        if (min === void 0) { min = 0; }
        return value < min ? min : value;
    };
    CardComponent.prototype.showDetail = function (gameObject) {
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_6__["EventSystem"].trigger('SELECT_TABLETOP_OBJECT', { identifier: gameObject.identifier, className: gameObject.aliasName });
        var coordinate = this.pointerDeviceService.pointers[0];
        var title = 'カード設定';
        if (gameObject.name.length)
            title += ' - ' + gameObject.name;
        var option = { title: title, left: coordinate.x - 300, top: coordinate.y - 300, width: 600, height: 600 };
        var component = this.panelService.open(component_game_character_sheet_game_character_sheet_component__WEBPACK_IMPORTED_MODULE_9__["GameCharacterSheetComponent"], option);
        component.tabletopObject = gameObject;
    };
    CardComponent.ɵfac = function CardComponent_Factory(t) { return new (t || CardComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_1__["NgZone"]), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdirectiveInject"](service_context_menu_service__WEBPACK_IMPORTED_MODULE_11__["ContextMenuService"]), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdirectiveInject"](service_panel_service__WEBPACK_IMPORTED_MODULE_12__["PanelService"]), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_1__["ElementRef"]), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_1__["ChangeDetectorRef"]), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdirectiveInject"](service_tabletop_service__WEBPACK_IMPORTED_MODULE_13__["TabletopService"]), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdirectiveInject"](service_image_service__WEBPACK_IMPORTED_MODULE_14__["ImageService"]), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdirectiveInject"](service_pointer_device_service__WEBPACK_IMPORTED_MODULE_15__["PointerDeviceService"])); };
    CardComponent.ɵcmp = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdefineComponent"]({ type: CardComponent, selectors: [["card"]], hostBindings: function CardComponent_HostBindings(rf, ctx) { if (rf & 1) {
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("carddrop", function CardComponent_carddrop_HostBindingHandler($event) { return ctx.onCardDrop($event); })("dragstart", function CardComponent_dragstart_HostBindingHandler($event) { return ctx.onDragstart($event); })("contextmenu", function CardComponent_contextmenu_HostBindingHandler($event) { return ctx.onContextMenu($event); });
        } }, inputs: { card: "card", is3D: "is3D" }, decls: 6, vars: 8, consts: [["appMovable", "", 1, "component", "is-3d", "is-pointer-events-none", "is-grab", 3, "movable.option", "movable.ondragstart", "movable.ondragend"], ["appRotable", "", 1, "component-content", "is-pointer-events-auto", 3, "rotable.option", "rotable.ondragstart", "rotable.ondragend"], ["class", "card-image", 3, "src", 4, "ngIf"], ["class", "name-tag is-nowrap has-length-limit is-black-background", 3, "ngStyle", 4, "ngIf"], ["class", "card-image thumbnail-transform is-translucent", 3, "src", 4, "ngIf"], [4, "ngIf"], [1, "card-image", 3, "src"], [1, "name-tag", "is-nowrap", "has-length-limit", "is-black-background", 3, "ngStyle"], [1, "card-image", "thumbnail-transform", "is-translucent", 3, "src"], [1, "rotate-grab", "of-left-top"], [1, "material-icons"], [1, "rotate-grab", "of-left-bottom"], [1, "rotate-grab", "of-right-bottom"], [1, "rotate-grab", "of-right-top"], [1, "border-bg", "is-pointer-events-none"]], template: function CardComponent_Template(rf, ctx) { if (rf & 1) {
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "div", 0);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("movable.ondragstart", function CardComponent_Template_div_movable_ondragstart_0_listener() { return ctx.onMove(); })("movable.ondragend", function CardComponent_Template_div_movable_ondragend_0_listener() { return ctx.onMoved(); });
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](1, "div", 1);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("rotable.ondragstart", function CardComponent_Template_div_rotable_ondragstart_1_listener() { return ctx.onMove(); })("rotable.ondragend", function CardComponent_Template_div_rotable_ondragend_1_listener() { return ctx.onMoved(); });
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](2, CardComponent_img_2_Template, 2, 4, "img", 2);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](3, CardComponent_div_3_Template, 3, 4, "div", 3);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](4, CardComponent_img_4_Template, 2, 4, "img", 4);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](5, CardComponent_ng_container_5_Template, 14, 0, "ng-container", 5);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
        } if (rf & 2) {
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵstyleProp"]("width", ctx.size * ctx.gridSize, "px");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("movable.option", ctx.movableOption);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("rotable.option", ctx.rotableOption);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", ctx.imageFile);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", !ctx.isFront && ctx.hasOwner && 0 < ctx.ownerName.length);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", ctx.isHand && ctx.frontImage);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", !ctx.isIconHidden);
        } }, directives: [directive_movable_directive__WEBPACK_IMPORTED_MODULE_16__["MovableDirective"], directive_rotable_directive__WEBPACK_IMPORTED_MODULE_17__["RotableDirective"], _angular_common__WEBPACK_IMPORTED_MODULE_18__["NgIf"], _angular_common__WEBPACK_IMPORTED_MODULE_18__["NgStyle"]], pipes: [pipe_safe_pipe__WEBPACK_IMPORTED_MODULE_19__["SafePipe"]], styles: [".is-grab[_ngcontent-%COMP%] {\r\n  cursor: grab;\r\n}\r\n\r\n.is-grabbing[_ngcontent-%COMP%] {\r\n  cursor: grabbing;\r\n}\r\n\r\n.is-3d[_ngcontent-%COMP%] {\r\n  transform-style: preserve-3d;\r\n}\r\n\r\n.is-transition[_ngcontent-%COMP%] {\r\n  transition: transform 132ms linear;\r\n}\r\n\r\n.is-pointer-events-none[_ngcontent-%COMP%] {\r\n  pointer-events: none;\r\n}\r\n\r\n.is-pointer-events-auto[_ngcontent-%COMP%] {\r\n  pointer-events: auto;\r\n}\r\n\r\n.component[_ngcontent-%COMP%] {\r\n  position: absolute;\r\n  height: auto;\r\n  width: auto;\r\n  -webkit-backface-visibility: hidden;\r\n          backface-visibility: hidden;\r\n  -webkit-user-select: none;\r\n  user-select: none;\r\n  -moz-user-drag: none;\r\n  -webkit-user-drag: none;\r\n  min-width: 25px;\r\n  min-height: 25px;\r\n}\r\n\r\n.component-content[_ngcontent-%COMP%] {\r\n  -webkit-backface-visibility: hidden;\r\n          backface-visibility: hidden;\r\n  height: 100%;\r\n  width: 100%;\r\n  box-sizing: border-box;\r\n}\r\n\r\n.card-image[_ngcontent-%COMP%] {\r\n  display: block;\r\n  top: 0;\r\n  left: 0;\r\n  bottom: 0;\r\n  right: 0;\r\n  margin: auto;\r\n  height: auto;\r\n  width: 100%;\r\n}\r\n\r\n.thumbnail-transform[_ngcontent-%COMP%] {\r\n  position: absolute;\r\n  transform: scale(0.9);\r\n}\r\n\r\n.is-translucent[_ngcontent-%COMP%] {\r\n  filter: opacity(0.8);\r\n}\r\n\r\n.rotate-grab[_ngcontent-%COMP%] {\r\n  position: absolute;\r\n  width: 28px;\r\n  height: 28px;\r\n  box-sizing: border-box;\r\n  cursor: -moz-default;\r\n  cursor: -webkit-default;\r\n  cursor: default;\r\n  z-index: 1;\r\n  padding: 2px;\r\n  background-color: #CCCCCC;\r\n  border-radius: 100%;\r\n  color: #444;\r\n  font-size: 8px;\r\n}\r\n\r\n.rotate-grab[_ngcontent-%COMP%] {\r\n  display: none;\r\n}\r\n\r\n.component[_ngcontent-%COMP%]:hover   .rotate-grab[_ngcontent-%COMP%] {\r\n  display: block;\r\n  opacity: 0.5;\r\n}\r\n\r\n.component[_ngcontent-%COMP%]:active   .rotate-grab[_ngcontent-%COMP%] {\r\n  display: none;\r\n}\r\n\r\n.component[_ngcontent-%COMP%]   .rotate-grab[_ngcontent-%COMP%]:hover, .component[_ngcontent-%COMP%]   .rotate-grab[_ngcontent-%COMP%]:active {\r\n  display: block;\r\n  opacity: 1;\r\n}\r\n\r\n.of-left-top[_ngcontent-%COMP%] {\r\n  top: -10px;\r\n  left: -10px;\r\n  border-radius: 14px;\r\n}\r\n\r\n.of-left-bottom[_ngcontent-%COMP%] {\r\n  bottom: -10px;\r\n  left: -10px;\r\n  border-radius: 14px;\r\n}\r\n\r\n.of-right-bottom[_ngcontent-%COMP%] {\r\n  bottom: -10px;\r\n  right: -10px;\r\n  border-radius: 14px;\r\n}\r\n\r\n.of-right-top[_ngcontent-%COMP%] {\r\n  top: -10px;\r\n  right: -10px;\r\n  border-radius: 14px;\r\n}\r\n\r\n.border-bg[_ngcontent-%COMP%] {\r\n  position: absolute;\r\n  box-sizing: border-box;\r\n  border-radius: 8px;\r\n  background-color: rgba(204, 204, 204, 0.5);\r\n  top: -2px;\r\n  left: -2px;\r\n  right: -2px;\r\n  bottom: -2px;\r\n  z-index: -1;\r\n}\r\n\r\n.border-bg[_ngcontent-%COMP%] {\r\n  display: none;\r\n}\r\n\r\n.component[_ngcontent-%COMP%]:hover   .border-bg[_ngcontent-%COMP%] {\r\n  display: block;\r\n}\r\n\r\n.component[_ngcontent-%COMP%]:active   .border-bg[_ngcontent-%COMP%] {\r\n  display: none;\r\n}\r\n\r\n.name-tag[_ngcontent-%COMP%] {\r\n  box-sizing: border-box;\r\n  font-size: 15px;\r\n  padding: 3px 9px;\r\n  border-radius: 24px;\r\n  position: absolute;\r\n  top: 0;\r\n}\r\n\r\n.has-length-limit[_ngcontent-%COMP%] {\r\n  overflow: hidden;\r\n  white-space: nowrap;\r\n  text-overflow: ellipsis;\r\n  max-width: 18em;\r\n}\r\n\r\n.is-nowrap[_ngcontent-%COMP%] {\r\n  white-space: nowrap;\r\n}\r\n\r\n.is-black-background[_ngcontent-%COMP%] {\r\n  color: #CCC;\r\n  background-color: rgba(30, 30, 30, 0.8);\r\n}\r\n\r\n.material-icons[_ngcontent-%COMP%] {\r\n  display: none;\r\n}\r\n\r\n.component[_ngcontent-%COMP%]:hover   .material-icons[_ngcontent-%COMP%], .component[_ngcontent-%COMP%]:active   .material-icons[_ngcontent-%COMP%] {\r\n  display: inline;\r\n}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNhcmQuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUdFLFlBQVk7QUFDZDs7QUFFQTtFQUdFLGdCQUFnQjtBQUNsQjs7QUFFQTtFQUVFLDRCQUE0QjtBQUM5Qjs7QUFFQTtFQUVFLGtDQUFrQztBQUNwQzs7QUFFQTtFQUNFLG9CQUFvQjtBQUN0Qjs7QUFFQTtFQUNFLG9CQUFvQjtBQUN0Qjs7QUFFQTtFQUNFLGtCQUFrQjtFQUNsQixZQUFZO0VBQ1osV0FBVztFQUNYLG1DQUEyQjtVQUEzQiwyQkFBMkI7RUFFM0IseUJBQXlCO0VBQ3pCLGlCQUFpQjtFQUNqQixvQkFBb0I7RUFDcEIsdUJBQXVCO0VBQ3ZCLGVBQWU7RUFDZixnQkFBZ0I7QUFDbEI7O0FBRUE7RUFDRSxtQ0FBMkI7VUFBM0IsMkJBQTJCO0VBQzNCLFlBQVk7RUFDWixXQUFXO0VBQ1gsc0JBQXNCO0FBQ3hCOztBQUVBO0VBQ0UsY0FBYztFQUNkLE1BQU07RUFDTixPQUFPO0VBQ1AsU0FBUztFQUNULFFBQVE7RUFDUixZQUFZO0VBQ1osWUFBWTtFQUNaLFdBQVc7QUFDYjs7QUFFQTtFQUNFLGtCQUFrQjtFQUNsQixxQkFBcUI7QUFDdkI7O0FBRUE7RUFDRSxvQkFBb0I7QUFDdEI7O0FBRUE7RUFDRSxrQkFBa0I7RUFDbEIsV0FBVztFQUNYLFlBQVk7RUFDWixzQkFBc0I7RUFDdEIsb0JBQW9CO0VBQ3BCLHVCQUF1QjtFQUN2QixlQUFlO0VBQ2YsVUFBVTtFQUNWLFlBQVk7RUFDWix5QkFBeUI7RUFDekIsbUJBQW1CO0VBQ25CLFdBQVc7RUFDWCxjQUFjO0FBQ2hCOztBQUVBO0VBQ0UsYUFBYTtBQUNmOztBQUVBO0VBQ0UsY0FBYztFQUNkLFlBQVk7QUFDZDs7QUFFQTtFQUNFLGFBQWE7QUFDZjs7QUFFQTtFQUNFLGNBQWM7RUFDZCxVQUFVO0FBQ1o7O0FBRUE7RUFDRSxVQUFVO0VBQ1YsV0FBVztFQUNYLG1CQUFtQjtBQUNyQjs7QUFFQTtFQUNFLGFBQWE7RUFDYixXQUFXO0VBQ1gsbUJBQW1CO0FBQ3JCOztBQUVBO0VBQ0UsYUFBYTtFQUNiLFlBQVk7RUFDWixtQkFBbUI7QUFDckI7O0FBRUE7RUFDRSxVQUFVO0VBQ1YsWUFBWTtFQUNaLG1CQUFtQjtBQUNyQjs7QUFFQTtFQUNFLGtCQUFrQjtFQUNsQixzQkFBc0I7RUFDdEIsa0JBQWtCO0VBQ2xCLDBDQUEwQztFQUMxQyxTQUFTO0VBQ1QsVUFBVTtFQUNWLFdBQVc7RUFDWCxZQUFZO0VBQ1osV0FBVztBQUNiOztBQUVBO0VBQ0UsYUFBYTtBQUNmOztBQUVBO0VBQ0UsY0FBYztBQUNoQjs7QUFFQTtFQUNFLGFBQWE7QUFDZjs7QUFFQTtFQUNFLHNCQUFzQjtFQUN0QixlQUFlO0VBQ2YsZ0JBQWdCO0VBQ2hCLG1CQUFtQjtFQUNuQixrQkFBa0I7RUFDbEIsTUFBTTtBQUNSOztBQUVBO0VBQ0UsZ0JBQWdCO0VBQ2hCLG1CQUFtQjtFQUNuQix1QkFBdUI7RUFDdkIsZUFBZTtBQUNqQjs7QUFFQTtFQUNFLG1CQUFtQjtBQUNyQjs7QUFFQTtFQUNFLFdBQVc7RUFDWCx1Q0FBdUM7QUFDekM7O0FBRUE7RUFDRSxhQUFhO0FBQ2Y7O0FBQ0E7RUFDRSxlQUFlO0FBQ2pCIiwiZmlsZSI6ImNhcmQuY29tcG9uZW50LmNzcyIsInNvdXJjZXNDb250ZW50IjpbIi5pcy1ncmFiIHtcclxuICBjdXJzb3I6IC1tb3otZ3JhYjtcclxuICBjdXJzb3I6IC13ZWJraXQtZ3JhYjtcclxuICBjdXJzb3I6IGdyYWI7XHJcbn1cclxuXHJcbi5pcy1ncmFiYmluZyB7XHJcbiAgY3Vyc29yOiAtbW96LWdyYWJiaW5nO1xyXG4gIGN1cnNvcjogLXdlYmtpdC1ncmFiYmluZztcclxuICBjdXJzb3I6IGdyYWJiaW5nO1xyXG59XHJcblxyXG4uaXMtM2Qge1xyXG4gIC13ZWJraXQtdHJhbnNmb3JtLXN0eWxlOiBwcmVzZXJ2ZS0zZDtcclxuICB0cmFuc2Zvcm0tc3R5bGU6IHByZXNlcnZlLTNkO1xyXG59XHJcblxyXG4uaXMtdHJhbnNpdGlvbiB7XHJcbiAgLXdlYmtpdC10cmFuc2l0aW9uOiAtd2Via2l0LXRyYW5zZm9ybSAxMzJtcyBsaW5lYXI7XHJcbiAgdHJhbnNpdGlvbjogdHJhbnNmb3JtIDEzMm1zIGxpbmVhcjtcclxufVxyXG5cclxuLmlzLXBvaW50ZXItZXZlbnRzLW5vbmUge1xyXG4gIHBvaW50ZXItZXZlbnRzOiBub25lO1xyXG59XHJcblxyXG4uaXMtcG9pbnRlci1ldmVudHMtYXV0byB7XHJcbiAgcG9pbnRlci1ldmVudHM6IGF1dG87XHJcbn1cclxuXHJcbi5jb21wb25lbnQge1xyXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcclxuICBoZWlnaHQ6IGF1dG87XHJcbiAgd2lkdGg6IGF1dG87XHJcbiAgYmFja2ZhY2UtdmlzaWJpbGl0eTogaGlkZGVuO1xyXG4gIC1tb3otdXNlci1zZWxlY3Q6IG5vbmU7XHJcbiAgLXdlYmtpdC11c2VyLXNlbGVjdDogbm9uZTtcclxuICB1c2VyLXNlbGVjdDogbm9uZTtcclxuICAtbW96LXVzZXItZHJhZzogbm9uZTtcclxuICAtd2Via2l0LXVzZXItZHJhZzogbm9uZTtcclxuICBtaW4td2lkdGg6IDI1cHg7XHJcbiAgbWluLWhlaWdodDogMjVweDtcclxufVxyXG5cclxuLmNvbXBvbmVudC1jb250ZW50IHtcclxuICBiYWNrZmFjZS12aXNpYmlsaXR5OiBoaWRkZW47XHJcbiAgaGVpZ2h0OiAxMDAlO1xyXG4gIHdpZHRoOiAxMDAlO1xyXG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XHJcbn1cclxuXHJcbi5jYXJkLWltYWdlIHtcclxuICBkaXNwbGF5OiBibG9jaztcclxuICB0b3A6IDA7XHJcbiAgbGVmdDogMDtcclxuICBib3R0b206IDA7XHJcbiAgcmlnaHQ6IDA7XHJcbiAgbWFyZ2luOiBhdXRvO1xyXG4gIGhlaWdodDogYXV0bztcclxuICB3aWR0aDogMTAwJTtcclxufVxyXG5cclxuLnRodW1ibmFpbC10cmFuc2Zvcm0ge1xyXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcclxuICB0cmFuc2Zvcm06IHNjYWxlKDAuOSk7XHJcbn1cclxuXHJcbi5pcy10cmFuc2x1Y2VudCB7XHJcbiAgZmlsdGVyOiBvcGFjaXR5KDAuOCk7XHJcbn1cclxuXHJcbi5yb3RhdGUtZ3JhYiB7XHJcbiAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gIHdpZHRoOiAyOHB4O1xyXG4gIGhlaWdodDogMjhweDtcclxuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xyXG4gIGN1cnNvcjogLW1vei1kZWZhdWx0O1xyXG4gIGN1cnNvcjogLXdlYmtpdC1kZWZhdWx0O1xyXG4gIGN1cnNvcjogZGVmYXVsdDtcclxuICB6LWluZGV4OiAxO1xyXG4gIHBhZGRpbmc6IDJweDtcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiAjQ0NDQ0NDO1xyXG4gIGJvcmRlci1yYWRpdXM6IDEwMCU7XHJcbiAgY29sb3I6ICM0NDQ7XHJcbiAgZm9udC1zaXplOiA4cHg7XHJcbn1cclxuXHJcbi5yb3RhdGUtZ3JhYiB7XHJcbiAgZGlzcGxheTogbm9uZTtcclxufVxyXG5cclxuLmNvbXBvbmVudDpob3ZlciAucm90YXRlLWdyYWIge1xyXG4gIGRpc3BsYXk6IGJsb2NrO1xyXG4gIG9wYWNpdHk6IDAuNTtcclxufVxyXG5cclxuLmNvbXBvbmVudDphY3RpdmUgLnJvdGF0ZS1ncmFiIHtcclxuICBkaXNwbGF5OiBub25lO1xyXG59XHJcblxyXG4uY29tcG9uZW50IC5yb3RhdGUtZ3JhYjpob3ZlciwgLmNvbXBvbmVudCAucm90YXRlLWdyYWI6YWN0aXZlIHtcclxuICBkaXNwbGF5OiBibG9jaztcclxuICBvcGFjaXR5OiAxO1xyXG59XHJcblxyXG4ub2YtbGVmdC10b3Age1xyXG4gIHRvcDogLTEwcHg7XHJcbiAgbGVmdDogLTEwcHg7XHJcbiAgYm9yZGVyLXJhZGl1czogMTRweDtcclxufVxyXG5cclxuLm9mLWxlZnQtYm90dG9tIHtcclxuICBib3R0b206IC0xMHB4O1xyXG4gIGxlZnQ6IC0xMHB4O1xyXG4gIGJvcmRlci1yYWRpdXM6IDE0cHg7XHJcbn1cclxuXHJcbi5vZi1yaWdodC1ib3R0b20ge1xyXG4gIGJvdHRvbTogLTEwcHg7XHJcbiAgcmlnaHQ6IC0xMHB4O1xyXG4gIGJvcmRlci1yYWRpdXM6IDE0cHg7XHJcbn1cclxuXHJcbi5vZi1yaWdodC10b3Age1xyXG4gIHRvcDogLTEwcHg7XHJcbiAgcmlnaHQ6IC0xMHB4O1xyXG4gIGJvcmRlci1yYWRpdXM6IDE0cHg7XHJcbn1cclxuXHJcbi5ib3JkZXItYmcge1xyXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcclxuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xyXG4gIGJvcmRlci1yYWRpdXM6IDhweDtcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDIwNCwgMjA0LCAyMDQsIDAuNSk7XHJcbiAgdG9wOiAtMnB4O1xyXG4gIGxlZnQ6IC0ycHg7XHJcbiAgcmlnaHQ6IC0ycHg7XHJcbiAgYm90dG9tOiAtMnB4O1xyXG4gIHotaW5kZXg6IC0xO1xyXG59XHJcblxyXG4uYm9yZGVyLWJnIHtcclxuICBkaXNwbGF5OiBub25lO1xyXG59XHJcblxyXG4uY29tcG9uZW50OmhvdmVyIC5ib3JkZXItYmcge1xyXG4gIGRpc3BsYXk6IGJsb2NrO1xyXG59XHJcblxyXG4uY29tcG9uZW50OmFjdGl2ZSAuYm9yZGVyLWJnIHtcclxuICBkaXNwbGF5OiBub25lO1xyXG59XHJcblxyXG4ubmFtZS10YWcge1xyXG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XHJcbiAgZm9udC1zaXplOiAxNXB4O1xyXG4gIHBhZGRpbmc6IDNweCA5cHg7XHJcbiAgYm9yZGVyLXJhZGl1czogMjRweDtcclxuICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgdG9wOiAwO1xyXG59XHJcblxyXG4uaGFzLWxlbmd0aC1saW1pdCB7XHJcbiAgb3ZlcmZsb3c6IGhpZGRlbjtcclxuICB3aGl0ZS1zcGFjZTogbm93cmFwO1xyXG4gIHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzO1xyXG4gIG1heC13aWR0aDogMThlbTtcclxufVxyXG5cclxuLmlzLW5vd3JhcCB7XHJcbiAgd2hpdGUtc3BhY2U6IG5vd3JhcDtcclxufVxyXG5cclxuLmlzLWJsYWNrLWJhY2tncm91bmQge1xyXG4gIGNvbG9yOiAjQ0NDO1xyXG4gIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMzAsIDMwLCAzMCwgMC44KTtcclxufVxyXG5cclxuLm1hdGVyaWFsLWljb25zIHtcclxuICBkaXNwbGF5OiBub25lO1xyXG59XHJcbi5jb21wb25lbnQ6aG92ZXIgLm1hdGVyaWFsLWljb25zLCAuY29tcG9uZW50OmFjdGl2ZSAubWF0ZXJpYWwtaWNvbnMge1xyXG4gIGRpc3BsYXk6IGlubGluZTtcclxufVxyXG4iXX0= */"], changeDetection: 0 });
    return CardComponent;
}());

/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵsetClassMetadata"](CardComponent, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_1__["Component"],
        args: [{
                selector: 'card',
                templateUrl: './card.component.html',
                styleUrls: ['./card.component.css'],
                changeDetection: _angular_core__WEBPACK_IMPORTED_MODULE_1__["ChangeDetectionStrategy"].OnPush
            }]
    }], function () { return [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_1__["NgZone"] }, { type: service_context_menu_service__WEBPACK_IMPORTED_MODULE_11__["ContextMenuService"] }, { type: service_panel_service__WEBPACK_IMPORTED_MODULE_12__["PanelService"] }, { type: _angular_core__WEBPACK_IMPORTED_MODULE_1__["ElementRef"] }, { type: _angular_core__WEBPACK_IMPORTED_MODULE_1__["ChangeDetectorRef"] }, { type: service_tabletop_service__WEBPACK_IMPORTED_MODULE_13__["TabletopService"] }, { type: service_image_service__WEBPACK_IMPORTED_MODULE_14__["ImageService"] }, { type: service_pointer_device_service__WEBPACK_IMPORTED_MODULE_15__["PointerDeviceService"] }]; }, { card: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_1__["Input"]
        }], is3D: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_1__["Input"]
        }], onCardDrop: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_1__["HostListener"],
            args: ['carddrop', ['$event']]
        }], onDragstart: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_1__["HostListener"],
            args: ['dragstart', ['$event']]
        }], onContextMenu: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_1__["HostListener"],
            args: ['contextmenu', ['$event']]
        }] }); })();


/***/ }),

/***/ "4v+P":
/*!********************************************************!*\
  !*** ./src/app/component/terrain/terrain.component.ts ***!
  \********************************************************/
/*! exports provided: TerrainComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TerrainComponent", function() { return TerrainComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "fXoL");
/* harmony import */ var _udonarium_core_synchronize_object_object_node__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @udonarium/core/synchronize-object/object-node */ "F67Z");
/* harmony import */ var _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @udonarium/core/synchronize-object/object-store */ "hm7o");
/* harmony import */ var _udonarium_core_system__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @udonarium/core/system */ "yNnI");
/* harmony import */ var _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @udonarium/sound-effect */ "veT5");
/* harmony import */ var _udonarium_terrain__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @udonarium/terrain */ "gKYc");
/* harmony import */ var component_game_character_sheet_game_character_sheet_component__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! component/game-character-sheet/game-character-sheet.component */ "zXSY");
/* harmony import */ var directive_input_handler__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! directive/input-handler */ "96Ug");
/* harmony import */ var service_context_menu_service__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! service/context-menu.service */ "9FhF");
/* harmony import */ var service_image_service__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! service/image.service */ "Hvpu");
/* harmony import */ var service_tabletop_action_service__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! service/tabletop-action.service */ "AFBa");
/* harmony import */ var service_panel_service__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! service/panel.service */ "M9xM");
/* harmony import */ var service_pointer_device_service__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! service/pointer-device.service */ "GPP8");
/* harmony import */ var service_coordinate_service__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! service/coordinate.service */ "TzEH");
/* harmony import */ var directive_movable_directive__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! directive/movable.directive */ "+Kyd");
/* harmony import */ var directive_rotable_directive__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! directive/rotable.directive */ "3jYK");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @angular/common */ "ofXK");
/* harmony import */ var pipe_safe_pipe__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! pipe/safe.pipe */ "6HCy");




















var _c0 = function (a0) { return { "blinking-animation": a0 }; };
var _c1 = function (a0) { return { "transform": a0 }; };
function TerrainComponent_ng_container_2_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "div", 3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](2, "safe");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵstyleProp"]("background-image", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind2"](2, 4, "url(" + ctx_r0.floorImage.url + ")", "style"));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngClass", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction1"](7, _c0, !ctx_r0.isLocked))("ngStyle", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction1"](9, _c1, "translateZ(" + ctx_r0.height * ctx_r0.gridSize + "px)"));
} }
function TerrainComponent_ng_container_3_div_1_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](1, "safe");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    var ctx_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵstyleProp"]("background-image", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind2"](1, 7, "url(" + ctx_r3.wallImage.url + ")", "style"))("width", ctx_r3.width * ctx_r3.gridSize, "px")("height", ctx_r3.height * ctx_r3.gridSize, "px");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngClass", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction1"](10, _c0, !ctx_r3.isLocked));
} }
function TerrainComponent_ng_container_3_div_2_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](1, "safe");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    var ctx_r4 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵstyleProp"]("background-image", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind2"](1, 7, "url(" + ctx_r4.wallImage.url + ")", "style"))("width", ctx_r4.width * ctx_r4.gridSize, "px")("height", ctx_r4.height * ctx_r4.gridSize, "px");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngClass", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction1"](10, _c0, !ctx_r4.isLocked));
} }
function TerrainComponent_ng_container_3_div_3_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 10);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](1, "safe");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    var ctx_r5 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵstyleProp"]("background-image", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind2"](1, 7, "url(" + ctx_r5.wallImage.url + ")", "style"))("width", ctx_r5.depth * ctx_r5.gridSize, "px")("height", ctx_r5.height * ctx_r5.gridSize, "px");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngClass", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction1"](10, _c0, !ctx_r5.isLocked));
} }
function TerrainComponent_ng_container_3_div_4_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 11);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](1, "safe");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    var ctx_r6 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵstyleProp"]("background-image", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind2"](1, 7, "url(" + ctx_r6.wallImage.url + ")", "style"))("width", ctx_r6.depth * ctx_r6.gridSize, "px")("height", ctx_r6.height * ctx_r6.gridSize, "px");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngClass", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction1"](10, _c0, !ctx_r6.isLocked));
} }
function TerrainComponent_ng_container_3_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](1, TerrainComponent_ng_container_3_div_1_Template, 2, 12, "div", 4);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](2, TerrainComponent_ng_container_3_div_2_Template, 2, 12, "div", 5);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](3, TerrainComponent_ng_container_3_div_3_Template, 2, 12, "div", 6);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](4, TerrainComponent_ng_container_3_div_4_Template, 2, 12, "div", 7);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r1.isVisibleWallTopBottom);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r1.isVisibleWallTopBottom);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r1.isVisibleWallLeftRight);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r1.isVisibleWallLeftRight);
} }
function TerrainComponent_ng_container_4_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](1, "div", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](2, "div", 13);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](3, "i", 14);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](4, "autorenew");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](5, "div", 15);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](6, "i", 14);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](7, "autorenew");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](8, "div", 16);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](9, "i", 14);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](10, "autorenew");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](11, "div", 17);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](12, "i", 14);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](13, "autorenew");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerEnd"]();
} }
var _c2 = function (a0) { return { "is-grab": a0 }; };
var TerrainComponent = /** @class */ (function () {
    function TerrainComponent(ngZone, imageService, tabletopActionService, contextMenuService, elementRef, panelService, changeDetector, pointerDeviceService, coordinateService) {
        this.ngZone = ngZone;
        this.imageService = imageService;
        this.tabletopActionService = tabletopActionService;
        this.contextMenuService = contextMenuService;
        this.elementRef = elementRef;
        this.panelService = panelService;
        this.changeDetector = changeDetector;
        this.pointerDeviceService = pointerDeviceService;
        this.coordinateService = coordinateService;
        this.terrain = null;
        this.is3D = false;
        this.gridSize = 50;
        this.movableOption = {};
        this.rotableOption = {};
        this.input = null;
    }
    Object.defineProperty(TerrainComponent.prototype, "name", {
        get: function () { return this.terrain.name; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(TerrainComponent.prototype, "mode", {
        get: function () { return this.terrain.mode; },
        set: function (mode) { this.terrain.mode = mode; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(TerrainComponent.prototype, "isLocked", {
        get: function () { return this.terrain.isLocked; },
        set: function (isLocked) { this.terrain.isLocked = isLocked; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(TerrainComponent.prototype, "hasWall", {
        get: function () { return this.terrain.hasWall; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(TerrainComponent.prototype, "hasFloor", {
        get: function () { return this.terrain.hasFloor; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(TerrainComponent.prototype, "wallImage", {
        get: function () { return this.imageService.getSkeletonOr(this.terrain.wallImage); },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(TerrainComponent.prototype, "floorImage", {
        get: function () { return this.imageService.getSkeletonOr(this.terrain.floorImage); },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(TerrainComponent.prototype, "height", {
        get: function () { return this.adjustMinBounds(this.terrain.height); },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(TerrainComponent.prototype, "width", {
        get: function () { return this.adjustMinBounds(this.terrain.width); },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(TerrainComponent.prototype, "depth", {
        get: function () { return this.adjustMinBounds(this.terrain.depth); },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(TerrainComponent.prototype, "isVisibleFloor", {
        get: function () { return 0 < this.width * this.depth; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(TerrainComponent.prototype, "isVisibleWallTopBottom", {
        get: function () { return 0 < this.width * this.height; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(TerrainComponent.prototype, "isVisibleWallLeftRight", {
        get: function () { return 0 < this.depth * this.height; },
        enumerable: false,
        configurable: true
    });
    TerrainComponent.prototype.ngOnInit = function () {
        var _this = this;
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_3__["EventSystem"].register(this)
            .on('UPDATE_GAME_OBJECT', -1000, function (event) {
            var object = _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_2__["ObjectStore"].instance.get(event.data.identifier);
            if (!_this.terrain || !object)
                return;
            if (_this.terrain === object || (object instanceof _udonarium_core_synchronize_object_object_node__WEBPACK_IMPORTED_MODULE_1__["ObjectNode"] && _this.terrain.contains(object))) {
                _this.changeDetector.markForCheck();
            }
        })
            .on('SYNCHRONIZE_FILE_LIST', function (event) {
            _this.changeDetector.markForCheck();
        })
            .on('UPDATE_FILE_RESOURE', -1000, function (event) {
            _this.changeDetector.markForCheck();
        });
        this.movableOption = {
            tabletopObject: this.terrain,
            colideLayers: ['terrain']
        };
        this.rotableOption = {
            tabletopObject: this.terrain
        };
    };
    TerrainComponent.prototype.ngAfterViewInit = function () {
        var _this = this;
        this.ngZone.runOutsideAngular(function () {
            _this.input = new directive_input_handler__WEBPACK_IMPORTED_MODULE_7__["InputHandler"](_this.elementRef.nativeElement);
        });
        this.input.onStart = this.onInputStart.bind(this);
    };
    TerrainComponent.prototype.ngOnDestroy = function () {
        this.input.destroy();
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_3__["EventSystem"].unregister(this);
    };
    TerrainComponent.prototype.onDragstart = function (e) {
        e.stopPropagation();
        e.preventDefault();
    };
    TerrainComponent.prototype.onInputStart = function (e) {
        this.input.cancel();
        // TODO:もっと良い方法考える
        if (this.isLocked) {
            _udonarium_core_system__WEBPACK_IMPORTED_MODULE_3__["EventSystem"].trigger('DRAG_LOCKED_OBJECT', {});
        }
    };
    TerrainComponent.prototype.onContextMenu = function (e) {
        var _this = this;
        e.stopPropagation();
        e.preventDefault();
        if (!this.pointerDeviceService.isAllowedToOpenContextMenu)
            return;
        var menuPosition = this.pointerDeviceService.pointers[0];
        var objectPosition = this.coordinateService.calcTabletopLocalCoordinate();
        this.contextMenuService.open(menuPosition, [
            (this.isLocked
                ? {
                    name: '解除固定',
                    action: function () {
                        _this.isLocked = false;
                        _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_4__["SoundEffect"].play(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_4__["PresetSound"].unlock);
                    }
                } : {
                name: '固定',
                action: function () {
                    _this.isLocked = true;
                    _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_4__["SoundEffect"].play(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_4__["PresetSound"].lock);
                }
            }),
            service_context_menu_service__WEBPACK_IMPORTED_MODULE_8__["ContextMenuSeparator"],
            (this.hasWall
                ? {
                    name: '不顯示牆壁',
                    action: function () {
                        _this.mode = _udonarium_terrain__WEBPACK_IMPORTED_MODULE_5__["TerrainViewState"].FLOOR;
                        if (_this.depth * _this.width === 0) {
                            _this.terrain.width = _this.width <= 0 ? 1 : _this.width;
                            _this.terrain.depth = _this.depth <= 0 ? 1 : _this.depth;
                        }
                    }
                } : {
                name: '顯示牆壁',
                action: function () {
                    _this.mode = _udonarium_terrain__WEBPACK_IMPORTED_MODULE_5__["TerrainViewState"].ALL;
                }
            }),
            service_context_menu_service__WEBPACK_IMPORTED_MODULE_8__["ContextMenuSeparator"],
            { name: '編輯地形設定', action: function () { _this.showDetail(_this.terrain); } },
            {
                name: '製作副本',
                action: function () {
                    var cloneObject = _this.terrain.clone();
                    cloneObject.location.x += _this.gridSize;
                    cloneObject.location.y += _this.gridSize;
                    cloneObject.isLocked = false;
                    if (_this.terrain.parent)
                        _this.terrain.parent.appendChild(cloneObject);
                    _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_4__["SoundEffect"].play(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_4__["PresetSound"].blockPut);
                }
            },
            {
                name: '刪除',
                action: function () {
                    _this.terrain.destroy();
                    _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_4__["SoundEffect"].play(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_4__["PresetSound"].sweep);
                }
            },
            service_context_menu_service__WEBPACK_IMPORTED_MODULE_8__["ContextMenuSeparator"],
            { name: '製作物件', action: null, subActions: this.tabletopActionService.makeDefaultContextMenuActions(objectPosition) }
        ], this.name);
    };
    TerrainComponent.prototype.onMove = function () {
        _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_4__["SoundEffect"].play(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_4__["PresetSound"].blockPick);
    };
    TerrainComponent.prototype.onMoved = function () {
        _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_4__["SoundEffect"].play(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_4__["PresetSound"].blockPut);
    };
    TerrainComponent.prototype.adjustMinBounds = function (value, min) {
        if (min === void 0) { min = 0; }
        return value < min ? min : value;
    };
    TerrainComponent.prototype.showDetail = function (gameObject) {
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_3__["EventSystem"].trigger('SELECT_TABLETOP_OBJECT', { identifier: gameObject.identifier, className: gameObject.aliasName });
        var coordinate = this.pointerDeviceService.pointers[0];
        var title = '地形設定';
        if (gameObject.name.length)
            title += ' - ' + gameObject.name;
        var option = { title: title, left: coordinate.x - 250, top: coordinate.y - 150, width: 500, height: 300 };
        var component = this.panelService.open(component_game_character_sheet_game_character_sheet_component__WEBPACK_IMPORTED_MODULE_6__["GameCharacterSheetComponent"], option);
        component.tabletopObject = gameObject;
    };
    TerrainComponent.ɵfac = function TerrainComponent_Factory(t) { return new (t || TerrainComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["NgZone"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](service_image_service__WEBPACK_IMPORTED_MODULE_9__["ImageService"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](service_tabletop_action_service__WEBPACK_IMPORTED_MODULE_10__["TabletopActionService"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](service_context_menu_service__WEBPACK_IMPORTED_MODULE_8__["ContextMenuService"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["ElementRef"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](service_panel_service__WEBPACK_IMPORTED_MODULE_11__["PanelService"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["ChangeDetectorRef"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](service_pointer_device_service__WEBPACK_IMPORTED_MODULE_12__["PointerDeviceService"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](service_coordinate_service__WEBPACK_IMPORTED_MODULE_13__["CoordinateService"])); };
    TerrainComponent.ɵcmp = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineComponent"]({ type: TerrainComponent, selectors: [["terrain"]], hostBindings: function TerrainComponent_HostBindings(rf, ctx) { if (rf & 1) {
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("dragstart", function TerrainComponent_dragstart_HostBindingHandler($event) { return ctx.onDragstart($event); })("contextmenu", function TerrainComponent_contextmenu_HostBindingHandler($event) { return ctx.onContextMenu($event); });
        } }, inputs: { terrain: "terrain", is3D: "is3D" }, decls: 5, vars: 14, consts: [["appMovable", "", 1, "component", "is-3d", "is-pointer-events-none", 3, "movable.option", "movable.disable", "movable.ondragstart", "movable.ondragend"], ["appRotable", "", 1, "component-content", "is-3d", "is-pointer-events-auto", 3, "ngClass", "rotable.option", "rotable.disable", "rotable.ondragstart", "rotable.ondragend"], [4, "ngIf"], [1, "texture", 3, "ngClass", "ngStyle"], ["class", "texture of-wall-top", 3, "ngClass", "background-image", "width", "height", 4, "ngIf"], ["class", "texture of-wall-bottom", 3, "ngClass", "background-image", "width", "height", 4, "ngIf"], ["class", "texture of-wall-left", 3, "ngClass", "background-image", "width", "height", 4, "ngIf"], ["class", "texture of-wall-right", 3, "ngClass", "background-image", "width", "height", 4, "ngIf"], [1, "texture", "of-wall-top", 3, "ngClass"], [1, "texture", "of-wall-bottom", 3, "ngClass"], [1, "texture", "of-wall-left", 3, "ngClass"], [1, "texture", "of-wall-right", 3, "ngClass"], [1, "pedestal-grab", "rotate-grab"], [1, "rotate-grab", "of-left-top", "rotate-grab-icon"], [1, "material-icons"], [1, "rotate-grab", "of-left-bottom", "rotate-grab-icon"], [1, "rotate-grab", "of-right-bottom", "rotate-grab-icon"], [1, "rotate-grab", "of-right-top", "rotate-grab-icon"]], template: function TerrainComponent_Template(rf, ctx) { if (rf & 1) {
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 0);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("movable.ondragstart", function TerrainComponent_Template_div_movable_ondragstart_0_listener() { return ctx.onMove(); })("movable.ondragend", function TerrainComponent_Template_div_movable_ondragend_0_listener() { return ctx.onMoved(); });
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "div", 1);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("rotable.ondragstart", function TerrainComponent_Template_div_rotable_ondragstart_1_listener() { return ctx.onMove(); })("rotable.ondragend", function TerrainComponent_Template_div_rotable_ondragend_1_listener() { return ctx.onMoved(); });
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](2, TerrainComponent_ng_container_2_Template, 3, 11, "ng-container", 2);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](3, TerrainComponent_ng_container_3_Template, 5, 4, "ng-container", 2);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](4, TerrainComponent_ng_container_4_Template, 14, 0, "ng-container", 2);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        } if (rf & 2) {
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵstyleProp"]("width", ctx.width * ctx.gridSize, "px")("height", ctx.depth * ctx.gridSize, "px");
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("movable.option", ctx.movableOption)("movable.disable", ctx.isLocked);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngClass", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction1"](12, _c2, !ctx.isLocked))("rotable.option", ctx.rotableOption)("rotable.disable", ctx.isLocked);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx.hasFloor && ctx.isVisibleFloor && 0 < (ctx.floorImage == null ? null : ctx.floorImage.url.length));
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx.hasWall && 0 < (ctx.wallImage == null ? null : ctx.wallImage.url.length));
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", !ctx.isLocked);
        } }, directives: [directive_movable_directive__WEBPACK_IMPORTED_MODULE_14__["MovableDirective"], directive_rotable_directive__WEBPACK_IMPORTED_MODULE_15__["RotableDirective"], _angular_common__WEBPACK_IMPORTED_MODULE_16__["NgClass"], _angular_common__WEBPACK_IMPORTED_MODULE_16__["NgIf"], _angular_common__WEBPACK_IMPORTED_MODULE_16__["NgStyle"]], pipes: [pipe_safe_pipe__WEBPACK_IMPORTED_MODULE_17__["SafePipe"]], styles: [".is-grab[_ngcontent-%COMP%] {\r\n  cursor: grab;\r\n}\r\n\r\n.is-grabbing[_ngcontent-%COMP%] {\r\n  cursor: grabbing;\r\n}\r\n\r\n.is-3d[_ngcontent-%COMP%] {\r\n  transform-style: preserve-3d;\r\n}\r\n\r\n.is-transition[_ngcontent-%COMP%] {\r\n  transition: transform 132ms linear;\r\n}\r\n\r\n.is-pointer-events-none[_ngcontent-%COMP%] {\r\n  pointer-events: none;\r\n}\r\n\r\n.is-pointer-events-auto[_ngcontent-%COMP%] {\r\n  pointer-events: auto;\r\n}\r\n\r\n.component[_ngcontent-%COMP%] {\r\n  position: absolute;\r\n  height: 50px;\r\n  width: 50px;\r\n  -webkit-backface-visibility: hidden;\r\n          backface-visibility: hidden;\r\n  -webkit-user-select: none;\r\n  user-select: none;\r\n  \r\n  -moz-user-drag: none;\r\n  -webkit-user-drag: none;\r\n}\r\n\r\n.component-content[_ngcontent-%COMP%] {\r\n  height: 100%;\r\n  width: 100%;\r\n}\r\n\r\n.texture[_ngcontent-%COMP%] {\r\n  position: absolute;\r\n  -webkit-backface-visibility: hidden;\r\n          backface-visibility: hidden;\r\n  background-repeat: no-repeat;\r\n  background-size: 100% 100%;\r\n  height: 100%;\r\n  width: 100%;\r\n}\r\n\r\n.of-wall-top[_ngcontent-%COMP%] {\r\n  top: 0px;\r\n  left: 0px;\r\n\r\n  transform-origin: 50% 100%;\r\n  transform: translateY(-100%) rotateX(90deg) rotateZ(180deg) scaleX(-1.0);\r\n  filter: brightness(0.3);\r\n}\r\n\r\n.of-wall-bottom[_ngcontent-%COMP%] {\r\n  bottom: 0px;\r\n  left: 0px;\r\n\r\n  transform-origin: 50% 100%;\r\n  transform: rotateX(-90deg);\r\n  \r\n}\r\n\r\n.of-wall-left[_ngcontent-%COMP%] {\r\n  top: 0px;\r\n  left: 0px;\r\n\r\n  transform-origin: 0% 0%;\r\n  transform: rotateZ(90deg) rotateX(-90deg) scaleX(-1.0) translateX(-100%) translateY(-100%);\r\n  filter: brightness(0.5);\r\n}\r\n\r\n.of-wall-right[_ngcontent-%COMP%] {\r\n  top: 0px;\r\n  right: 0px;\r\n\r\n  transform-origin: 100% 0%;\r\n  transform: rotateZ(-90deg) rotateX(-90deg) translateY(-100%);\r\n  filter: brightness(0.8);\r\n}\r\n\r\n.pedestal-grab[_ngcontent-%COMP%] {\r\n  z-index: -1;\r\n  position: absolute;\r\n  top: -14px;\r\n  left: -14px;\r\n  right: -14px;\r\n  bottom: -14px;\r\n  cursor: default;\r\n\r\n  box-sizing: border-box;\r\n  border-top: solid 7px #CCC;\r\n  border-left: solid 7px #CCC;\r\n  border-right: solid 7px #CCC;\r\n  border-bottom: solid 7px #CCC;\r\n  border-radius: 14px;\r\n}\r\n\r\n.rotate-grab[_ngcontent-%COMP%] {\r\n  opacity: 0;\r\n  z-index: -1;\r\n}\r\n\r\n.rotate-grab-icon[_ngcontent-%COMP%] {\r\n  position: absolute;\r\n  width: 28px;\r\n  height: 28px;\r\n  box-sizing: border-box;\r\n  border: solid 2px #CCCCCC;\r\n  cursor: -moz-default;\r\n  cursor: -webkit-default;\r\n  cursor: default;\r\n  z-index: 1;\r\n  padding: 0;\r\n  background-color: #CCCCCC;\r\n  border-radius: 100%;\r\n  color: #444;\r\n  font-size: 8px;\r\n\r\n  transform-style: preserve-3d;\r\n  transform: translateZ(0.1px);\r\n}\r\n\r\n.component[_ngcontent-%COMP%]:hover   .rotate-grab[_ngcontent-%COMP%], .component[_ngcontent-%COMP%]:active   .rotate-grab[_ngcontent-%COMP%] {\r\n  opacity: 1;\r\n}\r\n\r\n.of-left-top[_ngcontent-%COMP%] {\r\n  top: -14px;\r\n  left: -14px;\r\n  border-radius: 14px 7px 14px 7px;\r\n}\r\n\r\n.of-left-bottom[_ngcontent-%COMP%] {\r\n  bottom: -14px;\r\n  left: -14px;\r\n  border-radius: 7px 14px 7px 14px;\r\n}\r\n\r\n.of-right-bottom[_ngcontent-%COMP%] {\r\n  bottom: -14px;\r\n  right: -14px;\r\n  border-radius: 14px 7px 14px 7px;\r\n}\r\n\r\n.of-right-top[_ngcontent-%COMP%] {\r\n  top: -14px;\r\n  right: -14px;\r\n  border-radius: 7px 14px 7px 14px;\r\n}\r\n\r\n.blinking-animation[_ngcontent-%COMP%] {\r\n animation: blink 1.0s linear infinite alternate;\r\n}\r\n\r\n@keyframes blink {\r\n  0% { opacity:0.9; }\r\n  100% { opacity:0.5; }\r\n}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRlcnJhaW4uY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUdFLFlBQVk7QUFDZDs7QUFFQTtFQUdFLGdCQUFnQjtBQUNsQjs7QUFFQTtFQUVFLDRCQUE0QjtBQUM5Qjs7QUFFQTtFQUVFLGtDQUFrQztBQUNwQzs7QUFFQTtFQUNFLG9CQUFvQjtBQUN0Qjs7QUFFQTtFQUNFLG9CQUFvQjtBQUN0Qjs7QUFFQTtFQUNFLGtCQUFrQjtFQUNsQixZQUFZO0VBQ1osV0FBVztFQUNYLG1DQUEyQjtVQUEzQiwyQkFBMkI7RUFFM0IseUJBQXlCO0VBQ3pCLGlCQUFpQjs7RUFFakIsb0JBQW9CO0VBQ3BCLHVCQUF1QjtBQUN6Qjs7QUFFQTtFQUNFLFlBQVk7RUFDWixXQUFXO0FBQ2I7O0FBRUE7RUFDRSxrQkFBa0I7RUFDbEIsbUNBQTJCO1VBQTNCLDJCQUEyQjtFQUMzQiw0QkFBNEI7RUFDNUIsMEJBQTBCO0VBQzFCLFlBQVk7RUFDWixXQUFXO0FBQ2I7O0FBRUE7RUFDRSxRQUFRO0VBQ1IsU0FBUzs7RUFFVCwwQkFBMEI7RUFDMUIsd0VBQXdFO0VBQ3hFLHVCQUF1QjtBQUN6Qjs7QUFFQTtFQUNFLFdBQVc7RUFDWCxTQUFTOztFQUVULDBCQUEwQjtFQUMxQiwwQkFBMEI7RUFDMUIsMkJBQTJCO0FBQzdCOztBQUVBO0VBQ0UsUUFBUTtFQUNSLFNBQVM7O0VBRVQsdUJBQXVCO0VBQ3ZCLDBGQUEwRjtFQUMxRix1QkFBdUI7QUFDekI7O0FBRUE7RUFDRSxRQUFRO0VBQ1IsVUFBVTs7RUFFVix5QkFBeUI7RUFDekIsNERBQTREO0VBQzVELHVCQUF1QjtBQUN6Qjs7QUFFQTtFQUNFLFdBQVc7RUFDWCxrQkFBa0I7RUFDbEIsVUFBVTtFQUNWLFdBQVc7RUFDWCxZQUFZO0VBQ1osYUFBYTtFQUNiLGVBQWU7O0VBRWYsc0JBQXNCO0VBQ3RCLDBCQUEwQjtFQUMxQiwyQkFBMkI7RUFDM0IsNEJBQTRCO0VBQzVCLDZCQUE2QjtFQUM3QixtQkFBbUI7QUFDckI7O0FBRUE7RUFDRSxVQUFVO0VBQ1YsV0FBVztBQUNiOztBQUVBO0VBQ0Usa0JBQWtCO0VBQ2xCLFdBQVc7RUFDWCxZQUFZO0VBQ1osc0JBQXNCO0VBQ3RCLHlCQUF5QjtFQUN6QixvQkFBb0I7RUFDcEIsdUJBQXVCO0VBQ3ZCLGVBQWU7RUFDZixVQUFVO0VBQ1YsVUFBVTtFQUNWLHlCQUF5QjtFQUN6QixtQkFBbUI7RUFDbkIsV0FBVztFQUNYLGNBQWM7O0VBRWQsNEJBQTRCO0VBQzVCLDRCQUE0QjtBQUM5Qjs7QUFFQTtFQUNFLFVBQVU7QUFDWjs7QUFFQTtFQUNFLFVBQVU7RUFDVixXQUFXO0VBQ1gsZ0NBQWdDO0FBQ2xDOztBQUVBO0VBQ0UsYUFBYTtFQUNiLFdBQVc7RUFDWCxnQ0FBZ0M7QUFDbEM7O0FBRUE7RUFDRSxhQUFhO0VBQ2IsWUFBWTtFQUNaLGdDQUFnQztBQUNsQzs7QUFFQTtFQUNFLFVBQVU7RUFDVixZQUFZO0VBQ1osZ0NBQWdDO0FBQ2xDOztBQUVBO0NBR0csK0NBQStDO0FBQ2xEOztBQVlBO0VBQ0UsS0FBSyxXQUFXLEVBQUU7RUFDbEIsT0FBTyxXQUFXLEVBQUU7QUFDdEIiLCJmaWxlIjoidGVycmFpbi5jb21wb25lbnQuY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLmlzLWdyYWIge1xyXG4gIGN1cnNvcjogLW1vei1ncmFiO1xyXG4gIGN1cnNvcjogLXdlYmtpdC1ncmFiO1xyXG4gIGN1cnNvcjogZ3JhYjtcclxufVxyXG5cclxuLmlzLWdyYWJiaW5nIHtcclxuICBjdXJzb3I6IC1tb3otZ3JhYmJpbmc7XHJcbiAgY3Vyc29yOiAtd2Via2l0LWdyYWJiaW5nO1xyXG4gIGN1cnNvcjogZ3JhYmJpbmc7XHJcbn1cclxuXHJcbi5pcy0zZCB7XHJcbiAgLXdlYmtpdC10cmFuc2Zvcm0tc3R5bGU6IHByZXNlcnZlLTNkO1xyXG4gIHRyYW5zZm9ybS1zdHlsZTogcHJlc2VydmUtM2Q7XHJcbn1cclxuXHJcbi5pcy10cmFuc2l0aW9uIHtcclxuICAtd2Via2l0LXRyYW5zaXRpb246IC13ZWJraXQtdHJhbnNmb3JtIDEzMm1zIGxpbmVhcjtcclxuICB0cmFuc2l0aW9uOiB0cmFuc2Zvcm0gMTMybXMgbGluZWFyO1xyXG59XHJcblxyXG4uaXMtcG9pbnRlci1ldmVudHMtbm9uZSB7XHJcbiAgcG9pbnRlci1ldmVudHM6IG5vbmU7XHJcbn1cclxuXHJcbi5pcy1wb2ludGVyLWV2ZW50cy1hdXRvIHtcclxuICBwb2ludGVyLWV2ZW50czogYXV0bztcclxufVxyXG5cclxuLmNvbXBvbmVudCB7XHJcbiAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gIGhlaWdodDogNTBweDtcclxuICB3aWR0aDogNTBweDtcclxuICBiYWNrZmFjZS12aXNpYmlsaXR5OiBoaWRkZW47XHJcbiAgLW1vei11c2VyLXNlbGVjdDogbm9uZTtcclxuICAtd2Via2l0LXVzZXItc2VsZWN0OiBub25lO1xyXG4gIHVzZXItc2VsZWN0OiBub25lO1xyXG4gIFxyXG4gIC1tb3otdXNlci1kcmFnOiBub25lO1xyXG4gIC13ZWJraXQtdXNlci1kcmFnOiBub25lO1xyXG59XHJcblxyXG4uY29tcG9uZW50LWNvbnRlbnQge1xyXG4gIGhlaWdodDogMTAwJTtcclxuICB3aWR0aDogMTAwJTtcclxufVxyXG5cclxuLnRleHR1cmUge1xyXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcclxuICBiYWNrZmFjZS12aXNpYmlsaXR5OiBoaWRkZW47XHJcbiAgYmFja2dyb3VuZC1yZXBlYXQ6IG5vLXJlcGVhdDtcclxuICBiYWNrZ3JvdW5kLXNpemU6IDEwMCUgMTAwJTtcclxuICBoZWlnaHQ6IDEwMCU7XHJcbiAgd2lkdGg6IDEwMCU7XHJcbn1cclxuXHJcbi5vZi13YWxsLXRvcCB7XHJcbiAgdG9wOiAwcHg7XHJcbiAgbGVmdDogMHB4O1xyXG5cclxuICB0cmFuc2Zvcm0tb3JpZ2luOiA1MCUgMTAwJTtcclxuICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTEwMCUpIHJvdGF0ZVgoOTBkZWcpIHJvdGF0ZVooMTgwZGVnKSBzY2FsZVgoLTEuMCk7XHJcbiAgZmlsdGVyOiBicmlnaHRuZXNzKDAuMyk7XHJcbn1cclxuXHJcbi5vZi13YWxsLWJvdHRvbSB7XHJcbiAgYm90dG9tOiAwcHg7XHJcbiAgbGVmdDogMHB4O1xyXG5cclxuICB0cmFuc2Zvcm0tb3JpZ2luOiA1MCUgMTAwJTtcclxuICB0cmFuc2Zvcm06IHJvdGF0ZVgoLTkwZGVnKTtcclxuICAvKmZpbHRlcjogYnJpZ2h0bmVzcygxLjApOyovXHJcbn1cclxuXHJcbi5vZi13YWxsLWxlZnQge1xyXG4gIHRvcDogMHB4O1xyXG4gIGxlZnQ6IDBweDtcclxuXHJcbiAgdHJhbnNmb3JtLW9yaWdpbjogMCUgMCU7XHJcbiAgdHJhbnNmb3JtOiByb3RhdGVaKDkwZGVnKSByb3RhdGVYKC05MGRlZykgc2NhbGVYKC0xLjApIHRyYW5zbGF0ZVgoLTEwMCUpIHRyYW5zbGF0ZVkoLTEwMCUpO1xyXG4gIGZpbHRlcjogYnJpZ2h0bmVzcygwLjUpO1xyXG59XHJcblxyXG4ub2Ytd2FsbC1yaWdodCB7XHJcbiAgdG9wOiAwcHg7XHJcbiAgcmlnaHQ6IDBweDtcclxuXHJcbiAgdHJhbnNmb3JtLW9yaWdpbjogMTAwJSAwJTtcclxuICB0cmFuc2Zvcm06IHJvdGF0ZVooLTkwZGVnKSByb3RhdGVYKC05MGRlZykgdHJhbnNsYXRlWSgtMTAwJSk7XHJcbiAgZmlsdGVyOiBicmlnaHRuZXNzKDAuOCk7XHJcbn1cclxuXHJcbi5wZWRlc3RhbC1ncmFiIHtcclxuICB6LWluZGV4OiAtMTtcclxuICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgdG9wOiAtMTRweDtcclxuICBsZWZ0OiAtMTRweDtcclxuICByaWdodDogLTE0cHg7XHJcbiAgYm90dG9tOiAtMTRweDtcclxuICBjdXJzb3I6IGRlZmF1bHQ7XHJcblxyXG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XHJcbiAgYm9yZGVyLXRvcDogc29saWQgN3B4ICNDQ0M7XHJcbiAgYm9yZGVyLWxlZnQ6IHNvbGlkIDdweCAjQ0NDO1xyXG4gIGJvcmRlci1yaWdodDogc29saWQgN3B4ICNDQ0M7XHJcbiAgYm9yZGVyLWJvdHRvbTogc29saWQgN3B4ICNDQ0M7XHJcbiAgYm9yZGVyLXJhZGl1czogMTRweDtcclxufVxyXG5cclxuLnJvdGF0ZS1ncmFiIHtcclxuICBvcGFjaXR5OiAwO1xyXG4gIHotaW5kZXg6IC0xO1xyXG59XHJcblxyXG4ucm90YXRlLWdyYWItaWNvbiB7XHJcbiAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gIHdpZHRoOiAyOHB4O1xyXG4gIGhlaWdodDogMjhweDtcclxuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xyXG4gIGJvcmRlcjogc29saWQgMnB4ICNDQ0NDQ0M7XHJcbiAgY3Vyc29yOiAtbW96LWRlZmF1bHQ7XHJcbiAgY3Vyc29yOiAtd2Via2l0LWRlZmF1bHQ7XHJcbiAgY3Vyc29yOiBkZWZhdWx0O1xyXG4gIHotaW5kZXg6IDE7XHJcbiAgcGFkZGluZzogMDtcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiAjQ0NDQ0NDO1xyXG4gIGJvcmRlci1yYWRpdXM6IDEwMCU7XHJcbiAgY29sb3I6ICM0NDQ7XHJcbiAgZm9udC1zaXplOiA4cHg7XHJcblxyXG4gIHRyYW5zZm9ybS1zdHlsZTogcHJlc2VydmUtM2Q7XHJcbiAgdHJhbnNmb3JtOiB0cmFuc2xhdGVaKDAuMXB4KTtcclxufVxyXG5cclxuLmNvbXBvbmVudDpob3ZlciAucm90YXRlLWdyYWIsIC5jb21wb25lbnQ6YWN0aXZlIC5yb3RhdGUtZ3JhYiB7XHJcbiAgb3BhY2l0eTogMTtcclxufVxyXG5cclxuLm9mLWxlZnQtdG9wIHtcclxuICB0b3A6IC0xNHB4O1xyXG4gIGxlZnQ6IC0xNHB4O1xyXG4gIGJvcmRlci1yYWRpdXM6IDE0cHggN3B4IDE0cHggN3B4O1xyXG59XHJcblxyXG4ub2YtbGVmdC1ib3R0b20ge1xyXG4gIGJvdHRvbTogLTE0cHg7XHJcbiAgbGVmdDogLTE0cHg7XHJcbiAgYm9yZGVyLXJhZGl1czogN3B4IDE0cHggN3B4IDE0cHg7XHJcbn1cclxuXHJcbi5vZi1yaWdodC1ib3R0b20ge1xyXG4gIGJvdHRvbTogLTE0cHg7XHJcbiAgcmlnaHQ6IC0xNHB4O1xyXG4gIGJvcmRlci1yYWRpdXM6IDE0cHggN3B4IDE0cHggN3B4O1xyXG59XHJcblxyXG4ub2YtcmlnaHQtdG9wIHtcclxuICB0b3A6IC0xNHB4O1xyXG4gIHJpZ2h0OiAtMTRweDtcclxuICBib3JkZXItcmFkaXVzOiA3cHggMTRweCA3cHggMTRweDtcclxufVxyXG5cclxuLmJsaW5raW5nLWFuaW1hdGlvbiB7XHJcblx0LXdlYmtpdC1hbmltYXRpb246IGJsaW5rIDEuMHMgbGluZWFyIGluZmluaXRlIGFsdGVybmF0ZTtcclxuICAtbW96LWFuaW1hdGlvbjogYmxpbmsgMS4wcyBsaW5lYXIgaW5maW5pdGUgYWx0ZXJuYXRlO1xyXG4gICBhbmltYXRpb246IGJsaW5rIDEuMHMgbGluZWFyIGluZmluaXRlIGFsdGVybmF0ZTtcclxufVxyXG5cclxuQC13ZWJraXQta2V5ZnJhbWVzIGJsaW5rIHtcclxuICAwJSB7IG9wYWNpdHk6MC45OyB9XHJcbiAgMTAwJSB7IG9wYWNpdHk6MC41OyB9XHJcbn1cclxuXHJcbkAtbW96LWtleWZyYW1lcyBibGluayB7XHJcbiAgMCUgeyBvcGFjaXR5OjAuOTsgfVxyXG4gIDEwMCUgeyBvcGFjaXR5OjAuNTsgfVxyXG59XHJcblxyXG5Aa2V5ZnJhbWVzIGJsaW5rIHtcclxuICAwJSB7IG9wYWNpdHk6MC45OyB9XHJcbiAgMTAwJSB7IG9wYWNpdHk6MC41OyB9XHJcbn0iXX0= */"], changeDetection: 0 });
    return TerrainComponent;
}());

/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](TerrainComponent, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"],
        args: [{
                selector: 'terrain',
                templateUrl: './terrain.component.html',
                styleUrls: ['./terrain.component.css'],
                changeDetection: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ChangeDetectionStrategy"].OnPush
            }]
    }], function () { return [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["NgZone"] }, { type: service_image_service__WEBPACK_IMPORTED_MODULE_9__["ImageService"] }, { type: service_tabletop_action_service__WEBPACK_IMPORTED_MODULE_10__["TabletopActionService"] }, { type: service_context_menu_service__WEBPACK_IMPORTED_MODULE_8__["ContextMenuService"] }, { type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ElementRef"] }, { type: service_panel_service__WEBPACK_IMPORTED_MODULE_11__["PanelService"] }, { type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ChangeDetectorRef"] }, { type: service_pointer_device_service__WEBPACK_IMPORTED_MODULE_12__["PointerDeviceService"] }, { type: service_coordinate_service__WEBPACK_IMPORTED_MODULE_13__["CoordinateService"] }]; }, { terrain: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], is3D: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], onDragstart: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["HostListener"],
            args: ['dragstart', ['$event']]
        }], onContextMenu: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["HostListener"],
            args: ['contextmenu', ['$event']]
        }] }); })();


/***/ }),

/***/ "5MtU":
/*!**************************************************!*\
  !*** ./src/app/class/core/system/event/event.ts ***!
  \**************************************************/
/*! exports provided: Event */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Event", function() { return Event; });
/* harmony import */ var _network_network__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../network/network */ "qBBt");

var Event = /** @class */ (function () {
    function Event(eventName, data, sendFrom) {
        if (sendFrom === void 0) { sendFrom = _network_network__WEBPACK_IMPORTED_MODULE_0__["Network"].instance.peerId; }
        this.eventName = eventName;
        this.data = data;
        this.sendFrom = sendFrom;
        this.isSendFromSelf = false;
        this.isSendFromSelf = this.sendFrom === _network_network__WEBPACK_IMPORTED_MODULE_0__["Network"].instance.peerId;
    }
    Event.prototype.toContext = function () {
        return {
            sendFrom: this.sendFrom,
            eventName: this.eventName,
            data: this.data,
        };
    };
    return Event;
}());



/***/ }),

/***/ "5d7p":
/*!*************************************************************!*\
  !*** ./src/app/component/game-table/table-touch-gesture.ts ***!
  \*************************************************************/
/*! exports provided: TableTouchGestureEvent, TableTouchGesture */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TableTouchGestureEvent", function() { return TableTouchGestureEvent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TableTouchGesture", function() { return TableTouchGesture; });
var TableTouchGestureEvent;
(function (TableTouchGestureEvent) {
    TableTouchGestureEvent["PAN"] = "pan";
    TableTouchGestureEvent["TAP_PINCH"] = "tappinch";
    TableTouchGestureEvent["PINCH"] = "pinch";
    TableTouchGestureEvent["ROTATE"] = "rotate";
})(TableTouchGestureEvent || (TableTouchGestureEvent = {}));
var TableTouchGesture = /** @class */ (function () {
    function TableTouchGesture(targetElement, ngZone) {
        this.targetElement = targetElement;
        this.ngZone = ngZone;
        this.hammer = null;
        this.deltaHammerDeltaX = 0;
        this.deltaHammerDeltaY = 1.0;
        this.deltaHammerScale = 1.0;
        this.deltaHammerRotation = 0;
        this.prevHammerDeltaX = 0;
        this.prevHammerDeltaY = 0;
        this.prevHammerScale = 0;
        this.prevHammerRotation = 0;
        this.tappedPanTimer = null;
        this.tappedPanCenter = { x: 0, y: 0 };
        this.onstart = null;
        this.onend = null;
        this.ongesture = null;
        this.ontransform = null;
        this.initializeHammer();
    }
    TableTouchGesture.prototype.destroy = function () {
        this.clearTappedPanTimer();
        this.hammer.destroy();
    };
    TableTouchGesture.prototype.initializeHammer = function () {
        var _this = this;
        this.hammer = new Hammer.Manager(this.targetElement, { inputClass: Hammer.TouchInput });
        var tap = new Hammer.Tap();
        var pan1p = new Hammer.Pan({ event: 'pan1p', pointers: 1, threshold: 0 });
        var pan2p = new Hammer.Pan({ event: 'pan2p', pointers: 2, threshold: 0 });
        var pinch = new Hammer.Pinch();
        var rotate = new Hammer.Rotate();
        pan1p.recognizeWith(pan2p);
        pan1p.recognizeWith(rotate);
        pan1p.recognizeWith(pinch);
        pan2p.recognizeWith(pinch);
        pan2p.recognizeWith(rotate);
        pinch.recognizeWith(rotate);
        this.hammer.add([tap, pan1p, pan2p, pinch, rotate]);
        this.hammer.on('hammer.input', this.onHammer.bind(this));
        this.hammer.on('tap', this.onTap.bind(this));
        this.hammer.on('pan1pstart', this.onTappedPanStart.bind(this));
        this.hammer.on('pan1pmove', this.onTappedPanMove.bind(this));
        this.hammer.on('pan1pend', this.onTappedPanEnd.bind(this));
        this.hammer.on('pan1pcancel', this.onTappedPanEnd.bind(this));
        this.hammer.on('pan2pmove', this.onPanMove.bind(this));
        this.hammer.on('pinchmove', this.onPinchMove.bind(this));
        this.hammer.on('rotatemove', this.onRotateMove.bind(this));
        // iOS で contextmenu が発火しない問題へのworkaround.
        var ua = window.navigator.userAgent.toLowerCase();
        var isiOS = ua.indexOf('iphone') > -1 || ua.indexOf('ipad') > -1 || ua.indexOf('macintosh') > -1 && 'ontouchend' in document;
        if (!isiOS)
            return;
        this.hammer.add(new Hammer.Press({ time: 251 }));
        this.hammer.on('press', function (ev) {
            var event = new MouseEvent('contextmenu', {
                bubbles: true,
                cancelable: true,
                clientX: ev.center.x,
                clientY: ev.center.y,
            });
            _this.ngZone.run(function () { return ev.srcEvent.target.dispatchEvent(event); });
        });
    };
    TableTouchGesture.prototype.onHammer = function (ev) {
        if (ev.isFirst) {
            this.deltaHammerScale = ev.scale;
            this.deltaHammerRotation = ev.rotation;
            this.deltaHammerDeltaX = ev.deltaX;
            this.deltaHammerDeltaY = ev.deltaY;
            if (this.onstart)
                this.onstart(ev.srcEvent);
        }
        else if (ev.isFinal) {
            if (this.onend)
                this.onend(ev.srcEvent);
        }
        else {
            this.deltaHammerScale = ev.scale - this.prevHammerScale;
            this.deltaHammerRotation = ev.rotation - this.prevHammerRotation;
            this.deltaHammerDeltaX = ev.deltaX - this.prevHammerDeltaX;
            this.deltaHammerDeltaY = ev.deltaY - this.prevHammerDeltaY;
        }
        this.prevHammerScale = ev.scale;
        this.prevHammerRotation = ev.rotation;
        this.prevHammerDeltaX = ev.deltaX;
        this.prevHammerDeltaY = ev.deltaY;
        if (this.tappedPanTimer == null || ev.eventType != Hammer.INPUT_START)
            return;
        var distance = Math.pow((this.tappedPanCenter.x - ev.center.x), 2) + Math.pow((this.tappedPanCenter.y - ev.center.y), 2);
        if (Math.pow(50, 2) < distance) {
            this.clearTappedPanTimer();
        }
    };
    TableTouchGesture.prototype.onTap = function (ev) {
        var _this = this;
        this.tappedPanCenter = ev.center;
        this.tappedPanTimer = setTimeout(function () { _this.tappedPanTimer = null; }, 400);
        if (this.ongesture)
            this.ongesture(ev.srcEvent);
    };
    TableTouchGesture.prototype.onTappedPanStart = function (ev) {
        if (this.tappedPanTimer == null)
            return;
        this.clearTappedPanTimer(false);
        if (this.ongesture)
            this.ongesture(ev.srcEvent);
    };
    TableTouchGesture.prototype.onTappedPanEnd = function (ev) {
        this.clearTappedPanTimer();
    };
    TableTouchGesture.prototype.onTappedPanMove = function (ev) {
        if (this.tappedPanTimer == null) {
            var transformX = this.deltaHammerDeltaX;
            var transformY = this.deltaHammerDeltaY;
            var transformZ = 0;
            if (this.ontransform)
                this.ontransform(transformX, transformY, transformZ, 0, 0, 0, TableTouchGestureEvent.PAN, ev.srcEvent);
        }
        else {
            this.clearTappedPanTimer(false);
            var scale = this.deltaHammerDeltaY;
            var transformZ = scale * 7.5;
            if (this.ongesture)
                this.ongesture(ev.srcEvent);
            if (this.ontransform)
                this.ontransform(0, 0, transformZ, 0, 0, 0, TableTouchGestureEvent.TAP_PINCH, ev.srcEvent);
        }
    };
    TableTouchGesture.prototype.onPanMove = function (ev) {
        this.clearTappedPanTimer();
        var rotateX = -this.deltaHammerDeltaY / window.innerHeight * 100;
        if (this.ongesture)
            this.ongesture(ev.srcEvent);
        if (this.ontransform)
            this.ontransform(0, 0, 0, rotateX, 0, 0, TableTouchGestureEvent.ROTATE, ev.srcEvent);
    };
    TableTouchGesture.prototype.onPinchMove = function (ev) {
        this.clearTappedPanTimer();
        var transformZ = this.deltaHammerScale * 500;
        if (this.ongesture)
            this.ongesture(ev.srcEvent);
        if (this.ontransform)
            this.ontransform(0, 0, transformZ, 0, 0, 0, TableTouchGestureEvent.PINCH, ev.srcEvent);
    };
    TableTouchGesture.prototype.onRotateMove = function (ev) {
        this.clearTappedPanTimer();
        var rotateZ = this.deltaHammerRotation;
        if (this.ongesture)
            this.ongesture(ev.srcEvent);
        if (this.ontransform)
            this.ontransform(0, 0, 0, 0, 0, rotateZ, TableTouchGestureEvent.ROTATE, ev.srcEvent);
    };
    TableTouchGesture.prototype.clearTappedPanTimer = function (needsSetNull) {
        if (needsSetNull === void 0) { needsSetNull = true; }
        clearTimeout(this.tappedPanTimer);
        if (needsSetNull)
            this.tappedPanTimer = null;
    };
    return TableTouchGesture;
}());



/***/ }),

/***/ "5zlT":
/*!*********************************************!*\
  !*** ./src/app/directive/resize-handler.ts ***!
  \*********************************************/
/*! exports provided: HandleType, ResizeHandler */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "HandleType", function() { return HandleType; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ResizeHandler", function() { return ResizeHandler; });
/* harmony import */ var _input_handler__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./input-handler */ "96Ug");

var HandleType;
(function (HandleType) {
    HandleType["N"] = "n";
    HandleType["E"] = "e";
    HandleType["W"] = "w";
    HandleType["S"] = "s";
    HandleType["NE"] = "ne";
    HandleType["NW"] = "nw";
    HandleType["SE"] = "se";
    HandleType["SW"] = "sw";
})(HandleType || (HandleType = {}));
var ResizeHandler = /** @class */ (function () {
    function ResizeHandler(target, type) {
        this.target = target;
        this.type = type;
        this.input = null;
        this.handle = null;
        this.width = 12;
        this.initialize();
    }
    ResizeHandler.prototype.initialize = function () {
        this.handle = this.target.ownerDocument.createElement('div');
        this.handle.classList.add('ui-resize-handler-' + this.type);
        this.input = new _input_handler__WEBPACK_IMPORTED_MODULE_0__["InputHandler"](this.handle);
        this.target.appendChild(this.handle);
        var style = this.handle.style;
        style.position = 'absolute';
        style.zIndex = '1';
        style.backgroundColor = 'transparent';
        switch (this.type) {
            case HandleType.N:
                style.top = -this.width * 3 / 4 + "px";
                style.left = '0px';
                style.right = '0px';
                style.height = this.width + "px";
                style.cursor = 'ns-resize';
                break;
            case HandleType.E:
                style.top = '0px';
                style.bottom = '0px';
                style.right = -this.width * 3 / 4 + "px";
                style.width = this.width + "px";
                style.cursor = 'ew-resize';
                break;
            case HandleType.W:
                style.top = '0px';
                style.bottom = '0px';
                style.left = -this.width * 3 / 4 + "px";
                style.width = this.width + "px";
                style.cursor = 'ew-resize';
                break;
            case HandleType.S:
                style.bottom = -this.width * 3 / 4 + "px";
                style.left = '0px';
                style.right = '0px';
                style.height = this.width + "px";
                style.cursor = 'ns-resize';
                break;
            case HandleType.NE:
                style.top = -this.width * 3 / 4 + "px";
                style.right = -this.width * 3 / 4 + "px";
                style.width = this.width * 3 / 2 + "px";
                style.height = this.width * 3 / 2 + "px";
                style.cursor = 'nesw-resize';
                style.zIndex = '2';
                break;
            case HandleType.NW:
                style.top = -this.width * 3 / 4 + "px";
                style.left = -this.width * 3 / 4 + "px";
                style.width = this.width * 3 / 2 + "px";
                style.height = this.width * 3 / 2 + "px";
                style.cursor = 'nwse-resize';
                style.zIndex = '2';
                break;
            case HandleType.SE:
                style.bottom = -this.width * 3 / 4 + "px";
                style.right = -this.width * 3 / 4 + "px";
                style.width = this.width * 3 / 2 + "px";
                style.height = this.width * 3 / 2 + "px";
                style.cursor = 'nwse-resize';
                style.zIndex = '2';
                break;
            case HandleType.SW:
                style.bottom = -this.width * 3 / 4 + "px";
                style.left = -this.width * 3 / 4 + "px";
                style.width = this.width * 3 / 2 + "px";
                style.height = this.width * 3 / 2 + "px";
                style.cursor = 'nesw-resize';
                style.zIndex = '2';
                break;
        }
    };
    ResizeHandler.prototype.destroy = function () {
        this.handle.remove();
        this.input.destroy();
    };
    return ResizeHandler;
}());



/***/ }),

/***/ "6HCy":
/*!***********************************!*\
  !*** ./src/app/pipe/safe.pipe.ts ***!
  \***********************************/
/*! exports provided: SafePipe */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SafePipe", function() { return SafePipe; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "fXoL");
/* harmony import */ var _angular_platform_browser__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/platform-browser */ "jhN1");



var SafePipe = /** @class */ (function () {
    function SafePipe(_sanitizer) {
        this._sanitizer = _sanitizer;
    }
    SafePipe.prototype.transform = function (value, type) {
        if (type === void 0) { type = 'html'; }
        switch (type) {
            case 'html': return this._sanitizer.bypassSecurityTrustHtml(value);
            case 'style': return this._sanitizer.bypassSecurityTrustStyle(value);
            case 'script': return this._sanitizer.bypassSecurityTrustScript(value);
            case 'url': return this._sanitizer.bypassSecurityTrustUrl(value);
            case 'resourceUrl': return this._sanitizer.bypassSecurityTrustResourceUrl(value);
            default: throw new Error("Invalid safe type specified: " + type);
        }
    };
    SafePipe.ɵfac = function SafePipe_Factory(t) { return new (t || SafePipe)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_platform_browser__WEBPACK_IMPORTED_MODULE_1__["DomSanitizer"])); };
    SafePipe.ɵpipe = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefinePipe"]({ name: "safe", type: SafePipe, pure: true });
    return SafePipe;
}());

/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](SafePipe, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Pipe"],
        args: [{
                name: 'safe'
            }]
    }], function () { return [{ type: _angular_platform_browser__WEBPACK_IMPORTED_MODULE_1__["DomSanitizer"] }]; }, null); })();


/***/ }),

/***/ "6VpD":
/*!***********************************************!*\
  !*** ./src/app/service/app-config.service.ts ***!
  \***********************************************/
/*! exports provided: AppConfigService */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AppConfigService", function() { return AppConfigService; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "mrSG");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "fXoL");
/* harmony import */ var _udonarium_core_system__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @udonarium/core/system */ "yNnI");
/* harmony import */ var _udonarium_database_database__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @udonarium/database/database */ "dQSv");
/* harmony import */ var js_yaml_dist_js_yaml_min_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! js-yaml/dist/js-yaml.min.js */ "B8Tq");
/* harmony import */ var js_yaml_dist_js_yaml_min_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(js_yaml_dist_js_yaml_min_js__WEBPACK_IMPORTED_MODULE_4__);






var objectPropertyKeys = Object.getOwnPropertyNames(Object.prototype);
var arrayPropertyKeys = Object.getOwnPropertyNames(Array.prototype);
var AppConfigService = /** @class */ (function () {
    function AppConfigService() {
        this.peerHistory = [];
        this.isOpen = false;
    }
    AppConfigService.prototype.initialize = function () {
        this.initAppConfig();
        this.initDatabase();
    };
    AppConfigService.prototype.initDatabase = function () {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function () {
            var db, history, i, _a, _b, historyId;
            var e_1, _c;
            var _this = this;
            return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"])(this, function (_d) {
                switch (_d.label) {
                    case 0:
                        console.log('initDatabase...');
                        if (!window.indexedDB) {
                            console.warn('このブラウザは安定板の IndexedDB をサポートしていません。IndexedDB の機能は利用できません。');
                            return [2 /*return*/];
                        }
                        db = new _udonarium_database_database__WEBPACK_IMPORTED_MODULE_3__["Database"]();
                        return [4 /*yield*/, db.getPeerHistory()];
                    case 1:
                        history = _d.sent();
                        history.sort(function (a, b) {
                            if (a.timestamp < b.timestamp)
                                return 1;
                            if (a.timestamp > b.timestamp)
                                return -1;
                            return 0;
                        });
                        for (i = 1; i < history.length; i++) {
                            db.deletePeerHistory(history[i].peerId);
                        }
                        console.log('履歴: ', history);
                        this.peerHistory = [];
                        if (history.length) {
                            try {
                                for (_a = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(history[0].history), _b = _a.next(); !_b.done; _b = _a.next()) {
                                    historyId = _b.value;
                                    if (historyId !== history[0].peerId) {
                                        this.peerHistory.push(historyId);
                                    }
                                }
                            }
                            catch (e_1_1) { e_1 = { error: e_1_1 }; }
                            finally {
                                try {
                                    if (_b && !_b.done && (_c = _a.return)) _c.call(_a);
                                }
                                finally { if (e_1) throw e_1.error; }
                            }
                        }
                        console.log('最終履歴: ', this.peerHistory);
                        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_2__["EventSystem"].register(this)
                            .on('CONNECT_PEER', -1000, function () {
                            console.log('AppConfigService CONNECT_PEER', _udonarium_core_system__WEBPACK_IMPORTED_MODULE_2__["Network"].peerIds);
                            if (!_this.isOpen) {
                                _this.isOpen = true;
                            }
                            db.addPeerHistory(_udonarium_core_system__WEBPACK_IMPORTED_MODULE_2__["Network"].peerId, _udonarium_core_system__WEBPACK_IMPORTED_MODULE_2__["Network"].peerIds);
                        })
                            .on('DISCONNECT_PEER', -1000, function () {
                            console.log('AppConfigService DISCONNECT_PEER', _udonarium_core_system__WEBPACK_IMPORTED_MODULE_2__["Network"].peerIds);
                        });
                        return [2 /*return*/];
                }
            });
        });
    };
    AppConfigService.prototype.initAppConfig = function () {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function () {
            var config, obj, e_2;
            return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"])(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        _a.trys.push([0, 2, , 3]);
                        console.log('YAML読み込み...');
                        return [4 /*yield*/, this.loadYaml()];
                    case 1:
                        config = _a.sent();
                        obj = js_yaml_dist_js_yaml_min_js__WEBPACK_IMPORTED_MODULE_4__["safeLoad"](config);
                        AppConfigService.applyConfig(obj);
                        console.log(AppConfigService.appConfig);
                        return [3 /*break*/, 3];
                    case 2:
                        e_2 = _a.sent();
                        console.warn(e_2);
                        return [3 /*break*/, 3];
                    case 3:
                        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_2__["EventSystem"].trigger('LOAD_CONFIG', AppConfigService.appConfig);
                        return [2 /*return*/];
                }
            });
        });
    };
    AppConfigService.prototype.loadYaml = function () {
        return new Promise(function (resolve, reject) {
            var config = document.querySelector('script[type$="yaml"]');
            if (!config) {
                console.warn('loadYaml element not found.');
                resolve('');
                return;
            }
            console.log('loadYaml ready...', config);
            var configString = config.textContent;
            var url = config.getAttribute('src');
            if (url == null) {
                console.warn('loadYaml url undefined.');
                resolve(configString);
                return;
            }
            var http = new XMLHttpRequest();
            http.open('get', url, true);
            http.onerror = function (event) {
                console.error(event);
                resolve(configString);
            };
            http.onreadystatechange = function (event) {
                if (http.readyState !== 4) {
                    return;
                }
                if (http.status === 200) {
                    console.log('loadYaml success!');
                    configString = http.responseText;
                }
                else {
                    console.warn('loadYaml fail...? status:' + http.status);
                }
                resolve(configString);
            };
            console.log('loadYaml start');
            http.send(null);
        });
    };
    AppConfigService.applyConfig = function (config, root) {
        var e_3, _a;
        if (root === void 0) { root = AppConfigService.appConfig; }
        if (config == null)
            return root;
        var keys = Object.getOwnPropertyNames(config);
        try {
            for (var keys_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(keys), keys_1_1 = keys_1.next(); !keys_1_1.done; keys_1_1 = keys_1.next()) {
                var key = keys_1_1.value;
                var invalidPropertyKeys = Array.isArray(config) || Array.isArray(root) ? objectPropertyKeys.concat(arrayPropertyKeys) : objectPropertyKeys;
                if (invalidPropertyKeys.includes(key)) {
                    console.log("skip invalid key (" + key + ")");
                    continue;
                }
                else if (config[key] != null && typeof config[key] === 'object') {
                    if (root[key] == null)
                        root[key] = Array.isArray(config[key]) ? [] : {};
                    AppConfigService.applyConfig(config[key], root[key]);
                }
                else if (typeof config[key] !== 'function' && typeof root[key] !== 'function') {
                    root[key] = config[key];
                }
            }
        }
        catch (e_3_1) { e_3 = { error: e_3_1 }; }
        finally {
            try {
                if (keys_1_1 && !keys_1_1.done && (_a = keys_1.return)) _a.call(keys_1);
            }
            finally { if (e_3) throw e_3.error; }
        }
        return root;
    };
    AppConfigService.appConfig = {
        webrtc: {
            key: ''
        },
        app: {
            title: '',
            mode: ''
        }
    };
    AppConfigService.ɵfac = function AppConfigService_Factory(t) { return new (t || AppConfigService)(); };
    AppConfigService.ɵprov = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdefineInjectable"]({ token: AppConfigService, factory: AppConfigService.ɵfac });
    return AppConfigService;
}());

/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵsetClassMetadata"](AppConfigService, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_1__["Injectable"]
    }], function () { return []; }, null); })();


/***/ }),

/***/ "7AbD":
/*!************************************************************!*\
  !*** ./src/app/component/text-note/text-note.component.ts ***!
  \************************************************************/
/*! exports provided: TextNoteComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TextNoteComponent", function() { return TextNoteComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "fXoL");
/* harmony import */ var _udonarium_core_synchronize_object_object_node__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @udonarium/core/synchronize-object/object-node */ "F67Z");
/* harmony import */ var _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @udonarium/core/synchronize-object/object-store */ "hm7o");
/* harmony import */ var _udonarium_core_system__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @udonarium/core/system */ "yNnI");
/* harmony import */ var _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @udonarium/sound-effect */ "veT5");
/* harmony import */ var component_game_character_sheet_game_character_sheet_component__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! component/game-character-sheet/game-character-sheet.component */ "zXSY");
/* harmony import */ var service_context_menu_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! service/context-menu.service */ "9FhF");
/* harmony import */ var service_panel_service__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! service/panel.service */ "M9xM");
/* harmony import */ var service_pointer_device_service__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! service/pointer-device.service */ "GPP8");
/* harmony import */ var directive_movable_directive__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! directive/movable.directive */ "+Kyd");
/* harmony import */ var directive_rotable_directive__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! directive/rotable.directive */ "3jYK");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @angular/common */ "ofXK");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @angular/forms */ "3Pt+");
/* harmony import */ var pipe_safe_pipe__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! pipe/safe.pipe */ "6HCy");















var _c0 = ["textArea"];
function TextNoteComponent_div_5_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 10);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    var ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate"](ctx_r0.title);
} }
var TextNoteComponent = /** @class */ (function () {
    function TextNoteComponent(ngZone, contextMenuService, panelService, changeDetector, pointerDeviceService) {
        var _this = this;
        this.ngZone = ngZone;
        this.contextMenuService = contextMenuService;
        this.panelService = panelService;
        this.changeDetector = changeDetector;
        this.pointerDeviceService = pointerDeviceService;
        this.textNote = null;
        this.is3D = false;
        this.oldText = '';
        this.oldFontSize = 9;
        this.callbackOnMouseUp = function (e) { return _this.onMouseUp(e); };
        this.gridSize = 50;
        this.calcFitHeightTimer = null;
        this.movableOption = {};
        this.rotableOption = {};
        this.oldScrollHeight = 0;
        this.oldOffsetHeight = 0;
    }
    Object.defineProperty(TextNoteComponent.prototype, "title", {
        get: function () { return this.textNote.title; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(TextNoteComponent.prototype, "text", {
        get: function () {
            console.log('get text');
            if (this.oldText != this.textNote.text) {
                this.calcFitHeightIfNeeded();
            }
            this.oldText == this.textNote.text;
            return this.textNote.text;
        },
        set: function (text) {
            console.log('set text');
            this.calcFitHeightIfNeeded();
            this.textNote.text = text;
            this.oldText = text;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(TextNoteComponent.prototype, "fontSize", {
        get: function () {
            console.log('get fontSize');
            if (this.oldFontSize != this.textNote.fontSize) {
                this.calcFitHeightIfNeeded();
            }
            this.oldFontSize = this.textNote.fontSize;
            return this.textNote.fontSize;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(TextNoteComponent.prototype, "imageFile", {
        get: function () { return this.textNote.imageFile; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(TextNoteComponent.prototype, "rotate", {
        get: function () { return this.textNote.rotate; },
        set: function (rotate) { this.textNote.rotate = rotate; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(TextNoteComponent.prototype, "height", {
        get: function () { return this.adjustMinBounds(this.textNote.height); },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(TextNoteComponent.prototype, "width", {
        get: function () { return this.adjustMinBounds(this.textNote.width); },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(TextNoteComponent.prototype, "isSelected", {
        get: function () { return document.activeElement === this.textAreaElementRef.nativeElement; },
        enumerable: false,
        configurable: true
    });
    TextNoteComponent.prototype.ngOnInit = function () {
        var _this = this;
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_3__["EventSystem"].register(this)
            .on('RESIZE_NOTE_OBJECT', -1000, function (event) {
            console.log('resize');
            var object = _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_2__["ObjectStore"].instance.get(event.data.identifier);
            if (!_this.textNote || !object)
                return;
            if (_this.textNote === object) {
                _this.calcFitHeight();
            }
        })
            .on('UPDATE_GAME_OBJECT', -1000, function (event) {
            var object = _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_2__["ObjectStore"].instance.get(event.data.identifier);
            if (!_this.textNote || !object)
                return;
            if (_this.textNote === object || (object instanceof _udonarium_core_synchronize_object_object_node__WEBPACK_IMPORTED_MODULE_1__["ObjectNode"] && _this.textNote.contains(object))) {
                _this.changeDetector.markForCheck();
            }
        })
            .on('SYNCHRONIZE_FILE_LIST', function (event) {
            _this.changeDetector.markForCheck();
        })
            .on('UPDATE_FILE_RESOURE', -1000, function (event) {
            _this.changeDetector.markForCheck();
        });
        this.movableOption = {
            tabletopObject: this.textNote,
            transformCssOffset: 'translateZ(0.15px)',
            colideLayers: ['terrain']
        };
        this.rotableOption = {
            tabletopObject: this.textNote
        };
    };
    TextNoteComponent.prototype.ngAfterViewInit = function () { };
    TextNoteComponent.prototype.ngOnDestroy = function () {
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_3__["EventSystem"].unregister(this);
    };
    TextNoteComponent.prototype.onDragstart = function (e) {
        e.stopPropagation();
        e.preventDefault();
    };
    TextNoteComponent.prototype.onMouseDown = function (e) {
        console.log('e.id onMouseDown:' + e.target.id);
        if (this.isSelected)
            return;
        e.preventDefault();
        this.textNote.toTopmost();
        // TODO:もっと良い方法考える
        if (e.button === 2) {
            _udonarium_core_system__WEBPACK_IMPORTED_MODULE_3__["EventSystem"].trigger('DRAG_LOCKED_OBJECT', {});
            return;
        }
        this.addMouseEventListeners();
    };
    TextNoteComponent.prototype.onMouseUp = function (e) {
        console.log('e.id onMouseUp:' + e.target.id);
        if (this.pointerDeviceService.isAllowedToOpenContextMenu) {
            console.log('TEST');
            var selection = window.getSelection();
            if (!selection.isCollapsed)
                selection.removeAllRanges();
            //        if( e.target.id != 'scroll'){
            this.textAreaElementRef.nativeElement.focus();
            //        }
        }
        this.removeMouseEventListeners();
        e.preventDefault();
    };
    TextNoteComponent.prototype.onRotateMouseDown = function (e) {
        console.log('e.id onRotateMouseDown:' + e.target.id);
        e.stopPropagation();
        e.preventDefault();
    };
    TextNoteComponent.prototype.onContextMenu = function (e) {
        var _this = this;
        this.removeMouseEventListeners();
        if (this.isSelected)
            return;
        e.stopPropagation();
        e.preventDefault();
        if (!this.pointerDeviceService.isAllowedToOpenContextMenu)
            return;
        var position = this.pointerDeviceService.pointers[0];
        this.contextMenuService.open(position, [
            { name: '編輯筆記', action: function () { _this.showDetail(_this.textNote); } },
            {
                name: '製作副本',
                action: function () {
                    var cloneObject = _this.textNote.clone();
                    console.log('複製', cloneObject);
                    cloneObject.location.x += _this.gridSize;
                    cloneObject.location.y += _this.gridSize;
                    cloneObject.toTopmost();
                    _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_4__["SoundEffect"].play(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_4__["PresetSound"].cardPut);
                }
            },
            {
                name: '刪除',
                action: function () {
                    _this.textNote.destroy();
                    _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_4__["SoundEffect"].play(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_4__["PresetSound"].sweep);
                }
            },
        ], this.title);
    };
    TextNoteComponent.prototype.onMove = function () {
        _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_4__["SoundEffect"].play(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_4__["PresetSound"].cardPick);
    };
    TextNoteComponent.prototype.onMoved = function () {
        _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_4__["SoundEffect"].play(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_4__["PresetSound"].cardPut);
    };
    TextNoteComponent.prototype.calcFitHeightIfNeeded = function () {
        var _this = this;
        if (this.calcFitHeightTimer)
            return;
        this.ngZone.runOutsideAngular(function () {
            _this.calcFitHeightTimer = setTimeout(function () {
                _this.calcFitHeight();
                _this.calcFitHeightTimer = null;
            }, 0);
        });
    };
    TextNoteComponent.prototype.calcFitHeight = function () {
        console.log('calcFitHeight');
        var textArea = this.textAreaElementRef.nativeElement;
        //    if( ( this.oldScrollHeight == 0 ) && ( this.oldOffsetHeight == 0)){
        //      textArea.style.height = '0';
        //    }
        textArea.style.height = '0';
        if (!this.textNote.limitHeight) {
            console.log('textArea.scrollHeight' + textArea.scrollHeight);
            console.log('textArea.offsetHeight' + textArea.offsetHeight);
            if (textArea.scrollHeight > textArea.offsetHeight) {
                console.log('更新');
                textArea.style.height = textArea.scrollHeight + 'px';
                this.oldScrollHeight = textArea.scrollHeight;
                this.oldOffsetHeight = textArea.offsetHeight;
            }
        }
        else {
            var textAreaHeight = textArea.scrollHeight;
            var textAreaMax = this.height * this.gridSize - 2;
            if (textAreaMax < this.gridSize)
                textAreaMax = this.gridSize - 2;
            if (this.title.length) {
                textAreaMax -= 32;
            }
            else {
                textAreaMax -= 2;
            }
            if (textAreaHeight > textAreaMax)
                textAreaHeight = textAreaMax;
            textArea.style.height = textAreaHeight + 'px';
        }
    };
    TextNoteComponent.prototype.adjustMinBounds = function (value, min) {
        if (min === void 0) { min = 0; }
        return value < min ? min : value;
    };
    TextNoteComponent.prototype.addMouseEventListeners = function () {
        document.body.addEventListener('mouseup', this.callbackOnMouseUp, false);
    };
    TextNoteComponent.prototype.removeMouseEventListeners = function () {
        document.body.removeEventListener('mouseup', this.callbackOnMouseUp, false);
    };
    TextNoteComponent.prototype.showDetail = function (gameObject) {
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_3__["EventSystem"].trigger('SELECT_TABLETOP_OBJECT', { identifier: gameObject.identifier, className: gameObject.aliasName });
        var coordinate = this.pointerDeviceService.pointers[0];
        var title = '設定共有筆記';
        if (gameObject.title.length)
            title += ' - ' + gameObject.title;
        var option = { title: title, left: coordinate.x - 350, top: coordinate.y - 200, width: 700, height: 400 };
        var component = this.panelService.open(component_game_character_sheet_game_character_sheet_component__WEBPACK_IMPORTED_MODULE_5__["GameCharacterSheetComponent"], option);
        component.tabletopObject = gameObject;
    };
    TextNoteComponent.ɵfac = function TextNoteComponent_Factory(t) { return new (t || TextNoteComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["NgZone"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](service_context_menu_service__WEBPACK_IMPORTED_MODULE_6__["ContextMenuService"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](service_panel_service__WEBPACK_IMPORTED_MODULE_7__["PanelService"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["ChangeDetectorRef"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](service_pointer_device_service__WEBPACK_IMPORTED_MODULE_8__["PointerDeviceService"])); };
    TextNoteComponent.ɵcmp = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineComponent"]({ type: TextNoteComponent, selectors: [["text-note"]], viewQuery: function TextNoteComponent_Query(rf, ctx) { if (rf & 1) {
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵstaticViewQuery"](_c0, true);
        } if (rf & 2) {
            var _t = void 0;
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵqueryRefresh"](_t = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵloadQuery"]()) && (ctx.textAreaElementRef = _t.first);
        } }, hostBindings: function TextNoteComponent_HostBindings(rf, ctx) { if (rf & 1) {
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("dragstart", function TextNoteComponent_dragstart_HostBindingHandler($event) { return ctx.onDragstart($event); })("mousedown", function TextNoteComponent_mousedown_HostBindingHandler($event) { return ctx.onMouseDown($event); })("contextmenu", function TextNoteComponent_contextmenu_HostBindingHandler($event) { return ctx.onContextMenu($event); });
        } }, inputs: { textNote: "textNote", is3D: "is3D" }, decls: 14, vars: 18, consts: [["appMovable", "", 1, "component", "is-3d", "is-pointer-events-none", 3, "movable.option", "movable.disable", "movable.ondragstart", "movable.ondragend"], ["appRotable", "", 1, "is-3d", 3, "rotable.option", "rotable.ondragstart", "rotable.ondragend"], [1, "component-content", "is-3d", "is-pointer-events-auto"], [1, "upright-transform", "is-3d", "is-bg-color", "is-bg-texture"], ["class", "title is-black-background is-pointer-events-none", 4, "ngIf"], ["spellcheck", "false", "id", "text-area", 1, "textarea", 2, "overflow", "hidden auto", 3, "ngModel", "input", "ngModelChange"], ["textArea", ""], [1, "rotate-grab", "of-left-top"], [1, "material-icons"], [1, "rotate-grab", "of-right-top"], [1, "title", "is-black-background", "is-pointer-events-none"]], template: function TextNoteComponent_Template(rf, ctx) { if (rf & 1) {
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 0);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("movable.ondragstart", function TextNoteComponent_Template_div_movable_ondragstart_0_listener() { return ctx.onMove(); })("movable.ondragend", function TextNoteComponent_Template_div_movable_ondragend_0_listener() { return ctx.onMoved(); });
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "div", 1);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("rotable.ondragstart", function TextNoteComponent_Template_div_rotable_ondragstart_1_listener() { return ctx.onMove(); })("rotable.ondragend", function TextNoteComponent_Template_div_rotable_ondragend_1_listener() { return ctx.onMoved(); });
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](2, "div", 2);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](3, "div", 3);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](4, "safe");
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](5, TextNoteComponent_div_5_Template, 2, 1, "div", 4);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](6, "textarea", 5, 6);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("input", function TextNoteComponent_Template_textarea_input_6_listener() { return ctx.calcFitHeight(); })("ngModelChange", function TextNoteComponent_Template_textarea_ngModelChange_6_listener($event) { return ctx.text = $event; });
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](8, "div", 7);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](9, "i", 8);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](10, "autorenew");
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](11, "div", 9);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](12, "i", 8);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](13, "autorenew");
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        } if (rf & 2) {
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("movable.option", ctx.movableOption)("movable.disable", ctx.isSelected);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("rotable.option", ctx.rotableOption);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵstyleProp"]("width", ctx.width * ctx.gridSize, "px");
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵstyleProp"]("background-image", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind2"](4, 15, "url(" + (ctx.imageFile == null ? null : ctx.imageFile.url) + ")", "style"))("width", ctx.width * ctx.gridSize, "px")("min-height", ctx.height * ctx.gridSize, "px");
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx.title.length);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵstyleProp"]("font-size", ctx.fontSize + 9, "px");
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngModel", ctx.text);
        } }, directives: [directive_movable_directive__WEBPACK_IMPORTED_MODULE_9__["MovableDirective"], directive_rotable_directive__WEBPACK_IMPORTED_MODULE_10__["RotableDirective"], _angular_common__WEBPACK_IMPORTED_MODULE_11__["NgIf"], _angular_forms__WEBPACK_IMPORTED_MODULE_12__["DefaultValueAccessor"], _angular_forms__WEBPACK_IMPORTED_MODULE_12__["NgControlStatus"], _angular_forms__WEBPACK_IMPORTED_MODULE_12__["NgModel"]], pipes: [pipe_safe_pipe__WEBPACK_IMPORTED_MODULE_13__["SafePipe"]], styles: [".is-grab[_ngcontent-%COMP%] {\r\n  cursor: grab;\r\n}\r\n\r\n.is-grabbing[_ngcontent-%COMP%] {\r\n  cursor: grabbing;\r\n}\r\n\r\n.is-3d[_ngcontent-%COMP%] {\r\n  transform-style: preserve-3d;\r\n}\r\n\r\n.is-transition[_ngcontent-%COMP%] {\r\n  transition: transform 132ms linear;\r\n}\r\n\r\n.is-pointer-events-none[_ngcontent-%COMP%] {\r\n  pointer-events: none;\r\n}\r\n\r\n.is-pointer-events-auto[_ngcontent-%COMP%] {\r\n  pointer-events: auto;\r\n}\r\n\r\n.component[_ngcontent-%COMP%] {\r\n  position: absolute;\r\n  -webkit-backface-visibility: hidden;\r\n          backface-visibility: hidden;\r\n  -webkit-user-select: none;\r\n  user-select: none;\r\n  \r\n  -moz-user-drag: none;\r\n  -webkit-user-drag: none;\r\n\r\n  width: 0;\r\n  height:0;\r\n}\r\n\r\n.component-content[_ngcontent-%COMP%] {\r\n  height: 100%;\r\n  width: 100%;\r\n  transform : translateX(-50%);\r\n}\r\n\r\n.upright-transform[_ngcontent-%COMP%] {\r\n  position: absolute;\r\n  bottom: 0;\r\n  left: 0;\r\n  right: 0;\r\n  transform-origin: 50% 100%;\r\n  transform: rotateX(-90deg);\r\n}\r\n\r\n.is-bg-texture[_ngcontent-%COMP%] {\r\n  background-repeat: no-repeat;\r\n  background-size: 100% 100%;\r\n}\r\n\r\n.is-bg-color[_ngcontent-%COMP%] {\r\n  box-sizing: border-box;\r\n  color: #444;\r\n  background-color: rgba(240,218,189, 0.9);\r\n  border: solid 1px #999;\r\n}\r\n\r\n.title[_ngcontent-%COMP%] {\r\n  box-sizing: border-box;\r\n  font-size: 15px;\r\n  padding: 3px 9px;\r\n  overflow: hidden;\r\n  white-space: nowrap;\r\n  text-overflow: ellipsis;\r\n  -webkit-backface-visibility: hidden;\r\n          backface-visibility: hidden;\r\n}\r\n\r\n.is-black-background[_ngcontent-%COMP%] {\r\n  color: #CCC;\r\n  background-color: rgba(30, 30, 30, 0.8);\r\n}\r\n\r\n.textarea[_ngcontent-%COMP%] {\r\n  width: 100%;\r\n  height: 100%;\r\n  resize: none;\r\n  overflow: hidden;\r\n  \r\n  box-sizing: border-box;\r\n  background: none;\r\n  border: none;\r\n  border-radius: 0px;\r\n  outline: none;\r\n\r\n  color: #444;\r\n  font-family: Cambria, Georgia;\r\n  font-size: 1.0rem;\r\n  padding: 2px;\r\n  margin: 0;\r\n  white-space: pre-wrap;\r\n  word-wrap: break-word;\r\n  overflow-wrap: anywhere;\r\n  word-break: break-word;\r\n\r\n  -webkit-backface-visibility: hidden;\r\n\r\n          backface-visibility: hidden;\r\n}\r\n\r\n.textarea[_ngcontent-%COMP%]:focus {\r\n  background: rgba(255, 255, 255, 0.75);\r\n}\r\n\r\n.is-black-background[_ngcontent-%COMP%] {\r\n  color: #CCC;\r\n  background-color: rgba(30, 30, 30, 0.8);\r\n}\r\n\r\n.is-outline-text[_ngcontent-%COMP%] {\r\n  font-size: 24px;\r\n  color: #444;\r\n  text-shadow: \r\n  #f2f2f2 0px 0px 0.5px, \r\n  #f2f2f2 0px 0px 0.5px, \r\n  #f2f2f2 0px 0px 0.5px, \r\n  #f2f2f2 0px 0px 0.5px, \r\n  #f2f2f2 0px 0px 0.5px, \r\n  #f2f2f2 0px 0px 0.5px,\r\n  #f2f2f2 0px 0px 0.5px,\r\n  #f2f2f2 0px 0px 0.5px;\r\n}\r\n\r\n.rotate-grab[_ngcontent-%COMP%] {\r\n  position: absolute;\r\n  width: 42px;\r\n  height: 28px;\r\n  box-sizing: border-box;\r\n  cursor: -moz-default;\r\n  cursor: -webkit-default;\r\n  cursor: default;\r\n  z-index: 1;\r\n  text-align: center;\r\n  padding: 2px;\r\n  background-color: #CCCCCC;\r\n  border-radius: 28px;\r\n  color: #444;\r\n  font-size: 8px;\r\n}\r\n\r\n.of-left-top[_ngcontent-%COMP%] {\r\n  top: -14px;\r\n  left: -21px;\r\n}\r\n\r\n.of-right-top[_ngcontent-%COMP%] {\r\n  top: -14px;\r\n  right: -21px;\r\n}\r\n\r\n.rotate-grab[_ngcontent-%COMP%] {\r\n  opacity: 0;\r\n}\r\n\r\n.component[_ngcontent-%COMP%]:hover   .rotate-grab[_ngcontent-%COMP%] {\r\n  opacity: 0.5;\r\n}\r\n\r\n.component[_ngcontent-%COMP%]:active   .rotate-grab[_ngcontent-%COMP%] {\r\n  opacity: 0;\r\n}\r\n\r\n.component[_ngcontent-%COMP%]   .rotate-grab[_ngcontent-%COMP%]:hover, .component[_ngcontent-%COMP%]   .rotate-grab[_ngcontent-%COMP%]:active {\r\n  opacity: 1;\r\n}\r\n\r\n.material-icons[_ngcontent-%COMP%] {\r\n  display: none;\r\n}\r\n\r\n.component[_ngcontent-%COMP%]:hover   .material-icons[_ngcontent-%COMP%], .component[_ngcontent-%COMP%]:active   .material-icons[_ngcontent-%COMP%] {\r\n  display: inline;\r\n}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRleHQtbm90ZS5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBR0UsWUFBWTtBQUNkOztBQUVBO0VBR0UsZ0JBQWdCO0FBQ2xCOztBQUVBO0VBRUUsNEJBQTRCO0FBQzlCOztBQUVBO0VBRUUsa0NBQWtDO0FBQ3BDOztBQUVBO0VBQ0Usb0JBQW9CO0FBQ3RCOztBQUVBO0VBQ0Usb0JBQW9CO0FBQ3RCOztBQUVBO0VBQ0Usa0JBQWtCO0VBQ2xCLG1DQUEyQjtVQUEzQiwyQkFBMkI7RUFFM0IseUJBQXlCO0VBQ3pCLGlCQUFpQjs7RUFFakIsb0JBQW9CO0VBQ3BCLHVCQUF1Qjs7RUFFdkIsUUFBUTtFQUNSLFFBQVE7QUFDVjs7QUFFQTtFQUNFLFlBQVk7RUFDWixXQUFXO0VBQ1gsNEJBQTRCO0FBQzlCOztBQUVBO0VBQ0Usa0JBQWtCO0VBQ2xCLFNBQVM7RUFDVCxPQUFPO0VBQ1AsUUFBUTtFQUNSLDBCQUEwQjtFQUMxQiwwQkFBMEI7QUFDNUI7O0FBRUE7RUFDRSw0QkFBNEI7RUFDNUIsMEJBQTBCO0FBQzVCOztBQUVBO0VBQ0Usc0JBQXNCO0VBQ3RCLFdBQVc7RUFDWCx3Q0FBd0M7RUFDeEMsc0JBQXNCO0FBQ3hCOztBQUVBO0VBQ0Usc0JBQXNCO0VBQ3RCLGVBQWU7RUFDZixnQkFBZ0I7RUFDaEIsZ0JBQWdCO0VBQ2hCLG1CQUFtQjtFQUNuQix1QkFBdUI7RUFDdkIsbUNBQTJCO1VBQTNCLDJCQUEyQjtBQUM3Qjs7QUFFQTtFQUNFLFdBQVc7RUFDWCx1Q0FBdUM7QUFDekM7O0FBRUE7RUFDRSxXQUFXO0VBQ1gsWUFBWTtFQUNaLFlBQVk7RUFDWixnQkFBZ0I7O0VBRWhCLHNCQUFzQjtFQUN0QixnQkFBZ0I7RUFDaEIsWUFBWTtFQUNaLGtCQUFrQjtFQUNsQixhQUFhOztFQUViLFdBQVc7RUFDWCw2QkFBNkI7RUFDN0IsaUJBQWlCO0VBQ2pCLFlBQVk7RUFDWixTQUFTO0VBQ1QscUJBQXFCO0VBQ3JCLHFCQUFxQjtFQUNyQix1QkFBdUI7RUFDdkIsc0JBQXNCOztFQUV0QixtQ0FBMkI7O1VBQTNCLDJCQUEyQjtBQUM3Qjs7QUFFQTtFQUNFLHFDQUFxQztBQUN2Qzs7QUFFQTtFQUNFLFdBQVc7RUFDWCx1Q0FBdUM7QUFDekM7O0FBRUE7RUFDRSxlQUFlO0VBQ2YsV0FBVztFQUNYOzs7Ozs7Ozt1QkFRcUI7QUFDdkI7O0FBRUE7RUFDRSxrQkFBa0I7RUFDbEIsV0FBVztFQUNYLFlBQVk7RUFDWixzQkFBc0I7RUFDdEIsb0JBQW9CO0VBQ3BCLHVCQUF1QjtFQUN2QixlQUFlO0VBQ2YsVUFBVTtFQUNWLGtCQUFrQjtFQUNsQixZQUFZO0VBQ1oseUJBQXlCO0VBQ3pCLG1CQUFtQjtFQUNuQixXQUFXO0VBQ1gsY0FBYztBQUNoQjs7QUFFQTtFQUNFLFVBQVU7RUFDVixXQUFXO0FBQ2I7O0FBRUE7RUFDRSxVQUFVO0VBQ1YsWUFBWTtBQUNkOztBQUVBO0VBQ0UsVUFBVTtBQUNaOztBQUVBO0VBQ0UsWUFBWTtBQUNkOztBQUVBO0VBQ0UsVUFBVTtBQUNaOztBQUVBO0VBQ0UsVUFBVTtBQUNaOztBQUVBO0VBQ0UsYUFBYTtBQUNmOztBQUVBO0VBQ0UsZUFBZTtBQUNqQiIsImZpbGUiOiJ0ZXh0LW5vdGUuY29tcG9uZW50LmNzcyIsInNvdXJjZXNDb250ZW50IjpbIi5pcy1ncmFiIHtcclxuICBjdXJzb3I6IC1tb3otZ3JhYjtcclxuICBjdXJzb3I6IC13ZWJraXQtZ3JhYjtcclxuICBjdXJzb3I6IGdyYWI7XHJcbn1cclxuXHJcbi5pcy1ncmFiYmluZyB7XHJcbiAgY3Vyc29yOiAtbW96LWdyYWJiaW5nO1xyXG4gIGN1cnNvcjogLXdlYmtpdC1ncmFiYmluZztcclxuICBjdXJzb3I6IGdyYWJiaW5nO1xyXG59XHJcblxyXG4uaXMtM2Qge1xyXG4gIC13ZWJraXQtdHJhbnNmb3JtLXN0eWxlOiBwcmVzZXJ2ZS0zZDtcclxuICB0cmFuc2Zvcm0tc3R5bGU6IHByZXNlcnZlLTNkO1xyXG59XHJcblxyXG4uaXMtdHJhbnNpdGlvbiB7XHJcbiAgLXdlYmtpdC10cmFuc2l0aW9uOiAtd2Via2l0LXRyYW5zZm9ybSAxMzJtcyBsaW5lYXI7XHJcbiAgdHJhbnNpdGlvbjogdHJhbnNmb3JtIDEzMm1zIGxpbmVhcjtcclxufVxyXG5cclxuLmlzLXBvaW50ZXItZXZlbnRzLW5vbmUge1xyXG4gIHBvaW50ZXItZXZlbnRzOiBub25lO1xyXG59XHJcblxyXG4uaXMtcG9pbnRlci1ldmVudHMtYXV0byB7XHJcbiAgcG9pbnRlci1ldmVudHM6IGF1dG87XHJcbn1cclxuXHJcbi5jb21wb25lbnQge1xyXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcclxuICBiYWNrZmFjZS12aXNpYmlsaXR5OiBoaWRkZW47XHJcbiAgLW1vei11c2VyLXNlbGVjdDogbm9uZTtcclxuICAtd2Via2l0LXVzZXItc2VsZWN0OiBub25lO1xyXG4gIHVzZXItc2VsZWN0OiBub25lO1xyXG4gIFxyXG4gIC1tb3otdXNlci1kcmFnOiBub25lO1xyXG4gIC13ZWJraXQtdXNlci1kcmFnOiBub25lO1xyXG5cclxuICB3aWR0aDogMDtcclxuICBoZWlnaHQ6MDtcclxufVxyXG5cclxuLmNvbXBvbmVudC1jb250ZW50IHtcclxuICBoZWlnaHQ6IDEwMCU7XHJcbiAgd2lkdGg6IDEwMCU7XHJcbiAgdHJhbnNmb3JtIDogdHJhbnNsYXRlWCgtNTAlKTtcclxufVxyXG5cclxuLnVwcmlnaHQtdHJhbnNmb3JtIHtcclxuICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgYm90dG9tOiAwO1xyXG4gIGxlZnQ6IDA7XHJcbiAgcmlnaHQ6IDA7XHJcbiAgdHJhbnNmb3JtLW9yaWdpbjogNTAlIDEwMCU7XHJcbiAgdHJhbnNmb3JtOiByb3RhdGVYKC05MGRlZyk7XHJcbn1cclxuXHJcbi5pcy1iZy10ZXh0dXJlIHtcclxuICBiYWNrZ3JvdW5kLXJlcGVhdDogbm8tcmVwZWF0O1xyXG4gIGJhY2tncm91bmQtc2l6ZTogMTAwJSAxMDAlO1xyXG59XHJcblxyXG4uaXMtYmctY29sb3Ige1xyXG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XHJcbiAgY29sb3I6ICM0NDQ7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgyNDAsMjE4LDE4OSwgMC45KTtcclxuICBib3JkZXI6IHNvbGlkIDFweCAjOTk5O1xyXG59XHJcblxyXG4udGl0bGUge1xyXG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XHJcbiAgZm9udC1zaXplOiAxNXB4O1xyXG4gIHBhZGRpbmc6IDNweCA5cHg7XHJcbiAgb3ZlcmZsb3c6IGhpZGRlbjtcclxuICB3aGl0ZS1zcGFjZTogbm93cmFwO1xyXG4gIHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzO1xyXG4gIGJhY2tmYWNlLXZpc2liaWxpdHk6IGhpZGRlbjtcclxufVxyXG5cclxuLmlzLWJsYWNrLWJhY2tncm91bmQge1xyXG4gIGNvbG9yOiAjQ0NDO1xyXG4gIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMzAsIDMwLCAzMCwgMC44KTtcclxufVxyXG5cclxuLnRleHRhcmVhIHtcclxuICB3aWR0aDogMTAwJTtcclxuICBoZWlnaHQ6IDEwMCU7XHJcbiAgcmVzaXplOiBub25lO1xyXG4gIG92ZXJmbG93OiBoaWRkZW47XHJcbiAgXHJcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcclxuICBiYWNrZ3JvdW5kOiBub25lO1xyXG4gIGJvcmRlcjogbm9uZTtcclxuICBib3JkZXItcmFkaXVzOiAwcHg7XHJcbiAgb3V0bGluZTogbm9uZTtcclxuXHJcbiAgY29sb3I6ICM0NDQ7XHJcbiAgZm9udC1mYW1pbHk6IENhbWJyaWEsIEdlb3JnaWE7XHJcbiAgZm9udC1zaXplOiAxLjByZW07XHJcbiAgcGFkZGluZzogMnB4O1xyXG4gIG1hcmdpbjogMDtcclxuICB3aGl0ZS1zcGFjZTogcHJlLXdyYXA7XHJcbiAgd29yZC13cmFwOiBicmVhay13b3JkO1xyXG4gIG92ZXJmbG93LXdyYXA6IGFueXdoZXJlO1xyXG4gIHdvcmQtYnJlYWs6IGJyZWFrLXdvcmQ7XHJcblxyXG4gIGJhY2tmYWNlLXZpc2liaWxpdHk6IGhpZGRlbjtcclxufVxyXG5cclxuLnRleHRhcmVhOmZvY3VzIHtcclxuICBiYWNrZ3JvdW5kOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuNzUpO1xyXG59XHJcblxyXG4uaXMtYmxhY2stYmFja2dyb3VuZCB7XHJcbiAgY29sb3I6ICNDQ0M7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgzMCwgMzAsIDMwLCAwLjgpO1xyXG59XHJcblxyXG4uaXMtb3V0bGluZS10ZXh0IHtcclxuICBmb250LXNpemU6IDI0cHg7XHJcbiAgY29sb3I6ICM0NDQ7XHJcbiAgdGV4dC1zaGFkb3c6IFxyXG4gICNmMmYyZjIgMHB4IDBweCAwLjVweCwgXHJcbiAgI2YyZjJmMiAwcHggMHB4IDAuNXB4LCBcclxuICAjZjJmMmYyIDBweCAwcHggMC41cHgsIFxyXG4gICNmMmYyZjIgMHB4IDBweCAwLjVweCwgXHJcbiAgI2YyZjJmMiAwcHggMHB4IDAuNXB4LCBcclxuICAjZjJmMmYyIDBweCAwcHggMC41cHgsXHJcbiAgI2YyZjJmMiAwcHggMHB4IDAuNXB4LFxyXG4gICNmMmYyZjIgMHB4IDBweCAwLjVweDtcclxufVxyXG5cclxuLnJvdGF0ZS1ncmFiIHtcclxuICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgd2lkdGg6IDQycHg7XHJcbiAgaGVpZ2h0OiAyOHB4O1xyXG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XHJcbiAgY3Vyc29yOiAtbW96LWRlZmF1bHQ7XHJcbiAgY3Vyc29yOiAtd2Via2l0LWRlZmF1bHQ7XHJcbiAgY3Vyc29yOiBkZWZhdWx0O1xyXG4gIHotaW5kZXg6IDE7XHJcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xyXG4gIHBhZGRpbmc6IDJweDtcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiAjQ0NDQ0NDO1xyXG4gIGJvcmRlci1yYWRpdXM6IDI4cHg7XHJcbiAgY29sb3I6ICM0NDQ7XHJcbiAgZm9udC1zaXplOiA4cHg7XHJcbn1cclxuXHJcbi5vZi1sZWZ0LXRvcCB7XHJcbiAgdG9wOiAtMTRweDtcclxuICBsZWZ0OiAtMjFweDtcclxufVxyXG5cclxuLm9mLXJpZ2h0LXRvcCB7XHJcbiAgdG9wOiAtMTRweDtcclxuICByaWdodDogLTIxcHg7XHJcbn1cclxuXHJcbi5yb3RhdGUtZ3JhYiB7XHJcbiAgb3BhY2l0eTogMDtcclxufVxyXG5cclxuLmNvbXBvbmVudDpob3ZlciAucm90YXRlLWdyYWIge1xyXG4gIG9wYWNpdHk6IDAuNTtcclxufVxyXG5cclxuLmNvbXBvbmVudDphY3RpdmUgLnJvdGF0ZS1ncmFiIHtcclxuICBvcGFjaXR5OiAwO1xyXG59XHJcblxyXG4uY29tcG9uZW50IC5yb3RhdGUtZ3JhYjpob3ZlciwgLmNvbXBvbmVudCAucm90YXRlLWdyYWI6YWN0aXZlIHtcclxuICBvcGFjaXR5OiAxO1xyXG59XHJcblxyXG4ubWF0ZXJpYWwtaWNvbnMge1xyXG4gIGRpc3BsYXk6IG5vbmU7XHJcbn1cclxuXHJcbi5jb21wb25lbnQ6aG92ZXIgLm1hdGVyaWFsLWljb25zLCAuY29tcG9uZW50OmFjdGl2ZSAubWF0ZXJpYWwtaWNvbnMge1xyXG4gIGRpc3BsYXk6IGlubGluZTtcclxufSJdfQ== */"], changeDetection: 0 });
    return TextNoteComponent;
}());

/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](TextNoteComponent, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"],
        args: [{
                selector: 'text-note',
                templateUrl: './text-note.component.html',
                styleUrls: ['./text-note.component.css'],
                changeDetection: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ChangeDetectionStrategy"].OnPush
            }]
    }], function () { return [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["NgZone"] }, { type: service_context_menu_service__WEBPACK_IMPORTED_MODULE_6__["ContextMenuService"] }, { type: service_panel_service__WEBPACK_IMPORTED_MODULE_7__["PanelService"] }, { type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ChangeDetectorRef"] }, { type: service_pointer_device_service__WEBPACK_IMPORTED_MODULE_8__["PointerDeviceService"] }]; }, { textAreaElementRef: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"],
            args: ['textArea', { static: true }]
        }], textNote: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], is3D: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], onDragstart: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["HostListener"],
            args: ['dragstart', ['$event']]
        }], onMouseDown: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["HostListener"],
            args: ['mousedown', ['$event']]
        }], onContextMenu: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["HostListener"],
            args: ['contextmenu', ['$event']]
        }] }); })();


/***/ }),

/***/ "8qtv":
/*!***********************************!*\
  !*** ./src/app/class/KariDice.ts ***!
  \***********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "mrSG");
/* harmony import */ var bcdice_lib_base__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! bcdice/lib/base */ "XO4f");
/* harmony import */ var bcdice_lib_base__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(bcdice_lib_base__WEBPACK_IMPORTED_MODULE_1__);
// original version from
// https://gist.github.com/h-mikisato/b5753689483b02b19585365b8ce5940f
// and
// https://github.com/blhsrwznrghfzpr/bcdice-js/blob/extend-samlpe/examples/ts/custom_dicebot.ts


var KariDice = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"])(KariDice, _super);
    function KariDice(command, internal) {
        var _this = this;
        var found = command.replace(/^repeat/i, 'x').replace(/^rep/i, 'x').match(/^x([0-9]+)\s+(.*)/i);
        var commandWithoutRepeat;
        var repeat;
        if (found !== null) {
            repeat = parseInt(found[1], 10);
            if (repeat <= 0) {
                repeat = 1;
            }
            commandWithoutRepeat = found[2];
        }
        else {
            repeat = 1;
            commandWithoutRepeat = command;
        }
        var changeText = commandWithoutRepeat.replace(/^KD/i, '2D6').replace(/^SKD/i, 'S2D6');
        if (repeat > 1) {
            _this = _super.call(this, "x" + repeat + " " + changeText, internal) || this;
        }
        else {
            _this = _super.call(this, changeText, internal) || this;
        }
        _this.command = command;
        _this.commandWithoutRepeat = commandWithoutRepeat;
        _this.repeat = repeat;
        return _this;
    }
    KariDice.eval = function (command) {
        return new KariDice(command).eval();
    };
    KariDice.prototype.eval = function () {
        if (this.commandWithoutRepeat.match(/^KD/i)) {
            return this.custom_dice();
        }
        if (this.commandWithoutRepeat.match(/^SKD/i)) {
            return this.custom_dice();
        }
        return _super.prototype.eval.call(this);
    };
    KariDice.prototype.custom_dice = function () {
        var result = _super.prototype.eval.call(this);
        if (result == null) {
            return null;
        }
        var zorome = 0;
        for (var i = 0; i < this.repeat; i++) {
            var val1 = result.detailedRands[2 * i].value;
            var val2 = result.detailedRands[2 * i + 1].value;
            if (val1 === val2) {
                zorome += 1;
            }
        }
        var zoromeText;
        if (this.repeat == 1 && zorome == 1) {
            zoromeText = ' ＞ ゾロ目！';
        }
        else if (zorome >= 1) {
            zoromeText = "\n\n\uFF1E \u30BE\u30ED\u76EE" + zorome + "\u500B\uFF01";
        }
        else {
            zoromeText = '';
        }
        var text = result.text + zoromeText;
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"])(Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"])({}, result), { text: text });
    };
    KariDice.ID = 'KariDice';
    KariDice.NAME = '仮ダイス';
    KariDice.SORT_KEY = 'かりたいす';
    KariDice.COMMAND_PATTERN = /^S?([+\-(]*\d+|\d+B\d+|C[+\-(]*\d+|choice|D66|(repeat|rep|x)\d+|\d+R\d+|\d+U\d+|BCDiceVersion|KD)/i;
    // 下記は標準ダイスのコマンドパターンマッチするように書き加える
    /*
      /^S?([+\-(]*\d+|\d+B\d+|C[+\-(]*\d+|choice|D66|(repeat|rep|x)\d+|\d+R\d+|\d+U\d+|BCDiceVersion)/i
    */
    KariDice.HELP_MESSAGE = "\n\u30FBKD\n\u30BE\u30ED\u76EE\u304B\u3069\u3046\u304B\u3092\u5224\u5B9A\u3057\u307E\u3059\n".trim();
    return KariDice;
}(bcdice_lib_base__WEBPACK_IMPORTED_MODULE_1___default.a));
/* harmony default export */ __webpack_exports__["default"] = (KariDice);


/***/ }),

/***/ "96Ug":
/*!********************************************!*\
  !*** ./src/app/directive/input-handler.ts ***!
  \********************************************/
/*! exports provided: InputHandler */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "InputHandler", function() { return InputHandler; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "mrSG");

var MOUSE_IDENTIFIER = -9999;
var InputHandler = /** @class */ (function () {
    function InputHandler(target, option) {
        if (option === void 0) { option = { capture: false, passive: false, always: false }; }
        this.target = target;
        this.callbackOnMouse = this.onMouse.bind(this);
        this.callbackOnTouch = this.onTouch.bind(this);
        this.callbackOnMenu = this.onMenu.bind(this);
        this.lastPointers = [];
        this.primaryPointer = { x: 0, y: 0, z: 0, identifier: MOUSE_IDENTIFIER };
        this._isDragging = false;
        this._isGrabbing = false;
        this._isDestroyed = false;
        this.option = null;
        this.option = {
            capture: option.capture === true,
            passive: option.passive === true,
            always: option.always === true
        };
        this.initialize();
    }
    Object.defineProperty(InputHandler.prototype, "pointer", {
        get: function () { return this.primaryPointer; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(InputHandler.prototype, "isDragging", {
        get: function () { return this._isDragging; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(InputHandler.prototype, "isGrabbing", {
        get: function () { return this._isGrabbing; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(InputHandler.prototype, "isDestroyed", {
        get: function () { return this._isDestroyed; },
        enumerable: false,
        configurable: true
    });
    InputHandler.prototype.initialize = function () {
        this.target.addEventListener('mousedown', this.callbackOnMouse, this.option.capture);
        this.target.addEventListener('touchstart', this.callbackOnTouch, this.option.capture);
        if (this.option.always)
            this.addEventListeners();
    };
    InputHandler.prototype.destroy = function () {
        this.cancel();
        this._isDestroyed = true;
        this.target.removeEventListener('mousedown', this.callbackOnMouse, this.option.capture);
        this.target.removeEventListener('touchstart', this.callbackOnTouch, this.option.capture);
        this.removeEventListeners();
    };
    InputHandler.prototype.cancel = function () {
        this._isDragging = this._isGrabbing = false;
        if (!this.option.always)
            this.removeEventListeners();
    };
    InputHandler.prototype.onMouse = function (e) {
        var mosuePointer = { x: e.pageX, y: e.pageY, z: 0, identifier: MOUSE_IDENTIFIER };
        if (this.isSyntheticEvent(mosuePointer))
            return;
        this.lastPointers = [mosuePointer];
        this.primaryPointer = mosuePointer;
        this.onPointer(e);
    };
    InputHandler.prototype.onTouch = function (e) {
        var _this = this;
        var length = e.changedTouches.length;
        if (length < 1)
            return;
        this.lastPointers = [];
        for (var i = 0; i < length; i++) {
            var touch = e.changedTouches[i];
            var touchPointer = { x: touch.pageX, y: touch.pageY, z: 0, identifier: touch.identifier };
            this.lastPointers.push(touchPointer);
        }
        if (e.type === 'touchstart') {
            this.primaryPointer = this.lastPointers[0];
        }
        else {
            var changedTouches = Array.from(e.changedTouches);
            var touch = changedTouches.find(function (touch) { return touch.identifier === _this.primaryPointer.identifier; });
            if (touch == null) {
                var isTouchContinues = Array.from(e.touches).find(function (touch) { return touch.identifier === _this.primaryPointer.identifier; }) != null;
                if (!isTouchContinues) {
                    // タッチを追跡できなくなったら終了
                    if (this.onEnd)
                        this.onEnd(e);
                    this.cancel();
                }
                return;
            }
            var touchPointer = { x: touch.pageX, y: touch.pageY, z: 0, identifier: touch.identifier };
            this.primaryPointer = touchPointer;
        }
        this.onPointer(e);
    };
    InputHandler.prototype.onPointer = function (e) {
        switch (e.type) {
            case 'mousedown':
            case 'touchstart':
                this._isGrabbing = true;
                this._isDragging = false;
                this.addEventListeners();
                if (this.onStart)
                    this.onStart(e);
                break;
            case 'mousemove':
            case 'touchmove':
                if (this.onMove)
                    this.onMove(e);
                this._isDragging = this._isGrabbing;
                break;
            default:
                if (this.onEnd)
                    this.onEnd(e);
                this.cancel();
                break;
        }
    };
    InputHandler.prototype.onMenu = function (e) {
        if (this.onContextMenu)
            this.onContextMenu(e);
    };
    InputHandler.prototype.isSyntheticEvent = function (mosuePointer, threshold) {
        var e_1, _a;
        if (threshold === void 0) { threshold = 15; }
        try {
            for (var _b = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(this.lastPointers), _c = _b.next(); !_c.done; _c = _b.next()) {
                var pointer = _c.value;
                if (pointer.identifier === mosuePointer.identifier)
                    continue;
                var distance = Math.pow((mosuePointer.x - pointer.x), 2) + Math.pow((mosuePointer.y - pointer.y), 2);
                if (distance < Math.pow(threshold, 2)) {
                    return true;
                }
            }
        }
        catch (e_1_1) { e_1 = { error: e_1_1 }; }
        finally {
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            }
            finally { if (e_1) throw e_1.error; }
        }
        return false;
    };
    InputHandler.prototype.addEventListeners = function () {
        var option = {
            capture: this.option.capture,
            passive: this.option.passive
        };
        this.target.ownerDocument.addEventListener('mousemove', this.callbackOnMouse, option);
        this.target.ownerDocument.addEventListener('mouseup', this.callbackOnMouse, option);
        this.target.ownerDocument.addEventListener('touchmove', this.callbackOnTouch, option);
        this.target.ownerDocument.addEventListener('touchend', this.callbackOnTouch, option);
        this.target.ownerDocument.addEventListener('touchcancel', this.callbackOnTouch, option);
        this.target.ownerDocument.addEventListener('contextmenu', this.callbackOnMenu, option);
        this.target.ownerDocument.addEventListener('drop', this.callbackOnMouse, option);
    };
    InputHandler.prototype.removeEventListeners = function () {
        var option = {
            capture: this.option.capture
        };
        this.target.ownerDocument.removeEventListener('mousemove', this.callbackOnMouse, option);
        this.target.ownerDocument.removeEventListener('mouseup', this.callbackOnMouse, option);
        this.target.ownerDocument.removeEventListener('touchmove', this.callbackOnTouch, option);
        this.target.ownerDocument.removeEventListener('touchend', this.callbackOnTouch, option);
        this.target.ownerDocument.removeEventListener('touchcancel', this.callbackOnTouch, option);
        this.target.ownerDocument.removeEventListener('contextmenu', this.callbackOnMenu, option);
        this.target.ownerDocument.removeEventListener('drop', this.callbackOnMouse, option);
    };
    return InputHandler;
}());



/***/ }),

/***/ "9FhF":
/*!*************************************************!*\
  !*** ./src/app/service/context-menu.service.ts ***!
  \*************************************************/
/*! exports provided: ContextMenuType, ContextMenuSeparator, ContextMenuService */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ContextMenuType", function() { return ContextMenuType; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ContextMenuSeparator", function() { return ContextMenuSeparator; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ContextMenuService", function() { return ContextMenuService; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "fXoL");


var ContextMenuType;
(function (ContextMenuType) {
    ContextMenuType["ACTION"] = "action";
    ContextMenuType["SEPARATOR"] = "separator";
})(ContextMenuType || (ContextMenuType = {}));
var ContextMenuSeparator = {
    name: '',
    enabled: true,
    type: ContextMenuType.SEPARATOR
};
var ContextMenuService = /** @class */ (function () {
    function ContextMenuService(componentFactoryResolver) {
        this.componentFactoryResolver = componentFactoryResolver;
        this.title = '';
        this.actions = [];
        this.position = { x: 0, y: 0 };
    }
    Object.defineProperty(ContextMenuService.prototype, "isShow", {
        get: function () {
            return this.panelComponentRef ? true : false;
        },
        enumerable: false,
        configurable: true
    });
    ContextMenuService.prototype.open = function (position, actions, title, parentViewContainerRef) {
        this.close();
        if (!parentViewContainerRef) {
            parentViewContainerRef = ContextMenuService.defaultParentViewContainerRef;
            console.log('Context Open');
        }
        var panelComponentRef;
        var injector = parentViewContainerRef.injector;
        var panelComponentFactory = this.componentFactoryResolver.resolveComponentFactory(ContextMenuService.ContextMenuComponentClass);
        panelComponentRef = parentViewContainerRef.createComponent(panelComponentFactory, parentViewContainerRef.length, injector);
        var childPanelService = panelComponentRef.injector.get(ContextMenuService);
        childPanelService.panelComponentRef = panelComponentRef;
        if (actions) {
            childPanelService.actions = actions;
        }
        if (position) {
            childPanelService.position.x = position.x;
            childPanelService.position.y = position.y;
        }
        childPanelService.title = title != null ? title : '';
        panelComponentRef.onDestroy(function () {
            childPanelService.panelComponentRef = null;
        });
    };
    ContextMenuService.prototype.close = function () {
        if (this.panelComponentRef) {
            this.panelComponentRef.destroy();
            this.panelComponentRef = null;
        }
    };
    ContextMenuService.ContextMenuComponentClass = null;
    ContextMenuService.ɵfac = function ContextMenuService_Factory(t) { return new (t || ContextMenuService)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["ComponentFactoryResolver"])); };
    ContextMenuService.ɵprov = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineInjectable"]({ token: ContextMenuService, factory: ContextMenuService.ɵfac });
    return ContextMenuService;
}());

/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](ContextMenuService, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Injectable"]
    }], function () { return [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ComponentFactoryResolver"] }]; }, null); })();


/***/ }),

/***/ "9Fid":
/*!******************************************!*\
  !*** ./src/app/class/cut-in-launcher.ts ***!
  \******************************************/
/*! exports provided: CutInLauncher */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CutInLauncher", function() { return CutInLauncher; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "mrSG");
/* harmony import */ var _core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./core/synchronize-object/decorator */ "1lIu");
/* harmony import */ var _core_synchronize_object_game_object__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./core/synchronize-object/game-object */ "xdgh");
/* harmony import */ var _core_system__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./core/system */ "yNnI");
/* harmony import */ var _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @udonarium/core/synchronize-object/object-store */ "hm7o");
/* harmony import */ var _cut_in__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./cut-in */ "pq3H");







var CutInLauncher = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"])(CutInLauncher, _super);
    function CutInLauncher() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.test = 'test001';
        _this.launchCutInIdentifier = '';
        _this.launchTimeStamp = 0;
        _this.launchMySelf = false;
        _this.launchIsStart = false;
        _this.stopBlankTagCutInTimeStamp = 0;
        _this.sendTo = '';
        _this.reloadDummy = 5;
        return _this;
    }
    // カットイン時のジューク音楽停止はカットインリストウィンドウ操作による
    // 秘話仕様で止まる必要もないためそのまま止めずにカットインする
    CutInLauncher.prototype.chatActivateCutIn = function (text, sendTo) {
        var e_1, _a;
        var text2 = ' ' + text;
        var matches_array = text2.match(/\s(\S+)$/i);
        var activateName = '';
        if (matches_array) {
            activateName = RegExp.$1;
            var allCutIn = this.getCutIns();
            try {
                for (var allCutIn_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(allCutIn), allCutIn_1_1 = allCutIn_1.next(); !allCutIn_1_1.done; allCutIn_1_1 = allCutIn_1.next()) {
                    var cutIn_ = allCutIn_1_1.value;
                    if (cutIn_.chatActivate && (cutIn_.name == activateName)) {
                        this.startCutIn(cutIn_, sendTo);
                        return;
                    }
                }
            }
            catch (e_1_1) { e_1 = { error: e_1_1 }; }
            finally {
                try {
                    if (allCutIn_1_1 && !allCutIn_1_1.done && (_a = allCutIn_1.return)) _a.call(allCutIn_1);
                }
                finally { if (e_1) throw e_1.error; }
            }
        }
    };
    CutInLauncher.prototype.startCutInMySelf = function (cutIn) {
        this.launchCutInIdentifier = cutIn.identifier;
        this.launchIsStart = true;
        this.launchTimeStamp = this.launchTimeStamp + 1;
        this.launchMySelf = true;
        this.sendTo = '';
        this.startSelfCutIn();
    };
    CutInLauncher.prototype.startCutIn = function (cutIn, sendTo) {
        this.launchCutInIdentifier = cutIn.identifier;
        this.launchIsStart = true;
        this.launchTimeStamp = this.launchTimeStamp + 1;
        this.launchMySelf = false;
        if (sendTo) {
            this.sendTo = sendTo;
        }
        else {
            this.sendTo = '';
        }
        this.startSelfCutIn();
    };
    CutInLauncher.prototype.stopCutIn = function (cutIn) {
        this.launchCutInIdentifier = cutIn.identifier;
        this.launchIsStart = false;
        this.launchTimeStamp = this.launchTimeStamp + 1;
        this.launchMySelf = false;
        this.stopSelfCutIn();
    };
    CutInLauncher.prototype.stopBlankTagCutIn = function () {
        this.stopBlankTagCutInTimeStamp = this.stopBlankTagCutInTimeStamp + 1;
        _core_system__WEBPACK_IMPORTED_MODULE_3__["EventSystem"].trigger('STOP_CUT_IN_BY_BGM', {});
    };
    CutInLauncher.prototype.sameTagCutIn = function (cutIn) {
        var e_2, _a;
        var cutIns = this.getCutIns();
        var tagName = cutIn.tagName;
        var sameTagCutIn = [];
        try {
            for (var cutIns_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(cutIns), cutIns_1_1 = cutIns_1.next(); !cutIns_1_1.done; cutIns_1_1 = cutIns_1.next()) {
                var cutIn_ = cutIns_1_1.value;
                if (cutIn_.tagName == tagName && cutIn_.identifier !== cutIn.identifier) {
                    sameTagCutIn.push(cutIn_);
                }
            }
        }
        catch (e_2_1) { e_2 = { error: e_2_1 }; }
        finally {
            try {
                if (cutIns_1_1 && !cutIns_1_1.done && (_a = cutIns_1.return)) _a.call(cutIns_1);
            }
            finally { if (e_2) throw e_2.error; }
        }
        return sameTagCutIn;
    };
    CutInLauncher.prototype.startSelfCutIn = function () {
        var cutIn_ = _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_4__["ObjectStore"].instance.get(this.launchCutInIdentifier);
        _core_system__WEBPACK_IMPORTED_MODULE_3__["EventSystem"].trigger('START_CUT_IN', { cutIn: cutIn_ });
    };
    CutInLauncher.prototype.stopSelfCutIn = function () {
        var cutIn_ = _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_4__["ObjectStore"].instance.get(this.launchCutInIdentifier);
        _core_system__WEBPACK_IMPORTED_MODULE_3__["EventSystem"].trigger('STOP_CUT_IN', { cutIn: cutIn_ });
    };
    CutInLauncher.prototype.stopSelfCutInByIdentifier = function (identifier) {
        var cutIn_ = _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_4__["ObjectStore"].instance.get(identifier);
        _core_system__WEBPACK_IMPORTED_MODULE_3__["EventSystem"].trigger('STOP_CUT_IN', { cutIn: cutIn_ });
    };
    CutInLauncher.prototype.getCutIns = function () {
        return _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_4__["ObjectStore"].instance.getObjects(_cut_in__WEBPACK_IMPORTED_MODULE_5__["CutIn"]);
    };
    // GameObject Lifecycle
    CutInLauncher.prototype.onStoreAdded = function () {
        _super.prototype.onStoreAdded.call(this);
    };
    // GameObject Lifecycle
    CutInLauncher.prototype.onStoreRemoved = function () {
        _super.prototype.onStoreRemoved.call(this);
    };
    // override
    CutInLauncher.prototype.apply = function (context) {
        console.log('CutInLauncher apply() CALL');
        var launchCutInIdentifier = this.launchCutInIdentifier;
        var launchIsStart = this.launchIsStart;
        var launchTimeStamp = this.launchTimeStamp;
        var stopBlankTagCutInTimeStamp = this.stopBlankTagCutInTimeStamp;
        var launchMySelf = this.launchMySelf;
        var sendTo = this.sendTo;
        _super.prototype.apply.call(this, context);
        if (this.launchMySelf) {
            return;
        } // ソロ再生用の場合他の人は発火しない
        console.log('this.sendTo :' + this.sendTo);
        if (stopBlankTagCutInTimeStamp !== this.stopBlankTagCutInTimeStamp) {
            console.log('データ伝搬で検知 無タグカットイン停止のトリガー');
            _core_system__WEBPACK_IMPORTED_MODULE_3__["EventSystem"].trigger('STOP_CUT_IN_BY_BGM', {});
        }
        if (this.sendTo != '') { // 秘話再生
            if (this.sendTo != _core_system__WEBPACK_IMPORTED_MODULE_3__["Network"].peerContext.userId) {
                return;
            }
        }
        if (launchCutInIdentifier !== this.launchCutInIdentifier ||
            launchIsStart !== this.launchIsStart ||
            launchTimeStamp !== this.launchTimeStamp) {
            if (this.launchIsStart) {
                this.startSelfCutIn();
            }
            else {
                this.stopSelfCutIn();
            }
        }
    };
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_1__["SyncVar"])()
    ], CutInLauncher.prototype, "test", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_1__["SyncVar"])()
    ], CutInLauncher.prototype, "launchCutInIdentifier", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_1__["SyncVar"])()
    ], CutInLauncher.prototype, "launchTimeStamp", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_1__["SyncVar"])()
    ], CutInLauncher.prototype, "launchMySelf", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_1__["SyncVar"])()
    ], CutInLauncher.prototype, "launchIsStart", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_1__["SyncVar"])()
    ], CutInLauncher.prototype, "stopBlankTagCutInTimeStamp", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_1__["SyncVar"])()
    ], CutInLauncher.prototype, "sendTo", void 0);
    CutInLauncher = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_1__["SyncObject"])('cut-in-launcher')
    ], CutInLauncher);
    return CutInLauncher;
}(_core_synchronize_object_game_object__WEBPACK_IMPORTED_MODULE_2__["GameObject"]));



/***/ }),

/***/ "9Fxf":
/*!********************************************************!*\
  !*** ./src/app/class/core/file-storage/canvas-util.ts ***!
  \********************************************************/
/*! exports provided: CanvasUtil */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CanvasUtil", function() { return CanvasUtil; });
var CanvasUtil;
(function (CanvasUtil) {
    /**
     * https://github.com/viliusle/Hermite-resize
     * Hermite resize - fast image resize/resample using Hermite filter. 1 cpu version!
     *
     * @param {HtmlElement} canvas
     * @param {int} width
     * @param {int} height
     * @param {boolean} resize_canvas if true, canvas will be resized. Optional.
     */
    function resize(canvas, width, height, resize_canvas) {
        var width_source = canvas.width;
        var height_source = canvas.height;
        width = Math.round(width);
        height = Math.round(height);
        var ratio_w = width_source / width;
        var ratio_h = height_source / height;
        var ratio_w_half = Math.ceil(ratio_w / 2);
        var ratio_h_half = Math.ceil(ratio_h / 2);
        var ctx = canvas.getContext('2d');
        var img = ctx.getImageData(0, 0, width_source, height_source);
        var img2 = ctx.createImageData(width, height);
        var data = img.data;
        var data2 = img2.data;
        for (var j = 0; j < height; j++) {
            for (var i = 0; i < width; i++) {
                var x2 = (i + j * width) * 4;
                var weight = 0;
                var weights = 0;
                var weights_alpha = 0;
                var gx_r = 0;
                var gx_g = 0;
                var gx_b = 0;
                var gx_a = 0;
                var center_y = (j + 0.5) * ratio_h;
                var yy_start = Math.floor(j * ratio_h);
                var yy_stop = Math.ceil((j + 1) * ratio_h);
                for (var yy = yy_start; yy < yy_stop; yy++) {
                    var dy = Math.abs(center_y - (yy + 0.5)) / ratio_h_half;
                    var center_x = (i + 0.5) * ratio_w;
                    var w0 = dy * dy; //pre-calc part of w
                    var xx_start = Math.floor(i * ratio_w);
                    var xx_stop = Math.ceil((i + 1) * ratio_w);
                    for (var xx = xx_start; xx < xx_stop; xx++) {
                        var dx = Math.abs(center_x - (xx + 0.5)) / ratio_w_half;
                        var w = Math.sqrt(w0 + dx * dx);
                        if (w >= 1) {
                            //pixel too far
                            continue;
                        }
                        //hermite filter
                        weight = 2 * w * w * w - 3 * w * w + 1;
                        var pos_x = 4 * (xx + yy * width_source);
                        //alpha
                        gx_a += weight * data[pos_x + 3];
                        weights_alpha += weight;
                        //colors
                        if (data[pos_x + 3] < 255)
                            weight = weight * data[pos_x + 3] / 250;
                        gx_r += weight * data[pos_x];
                        gx_g += weight * data[pos_x + 1];
                        gx_b += weight * data[pos_x + 2];
                        weights += weight;
                    }
                }
                data2[x2] = gx_r / weights;
                data2[x2 + 1] = gx_g / weights;
                data2[x2 + 2] = gx_b / weights;
                data2[x2 + 3] = gx_a / weights_alpha;
            }
        }
        //clear and resize canvas
        if (resize_canvas === true) {
            canvas.width = width;
            canvas.height = height;
        }
        else {
            ctx.clearRect(0, 0, width_source, height_source);
        }
        //draw
        ctx.putImageData(img2, 0, 0);
    }
    CanvasUtil.resize = resize;
})(CanvasUtil || (CanvasUtil = {}));


/***/ }),

/***/ "9ht1":
/*!**************************************************************!*\
  !*** ./src/app/class/core/system/util/resettable-timeout.ts ***!
  \**************************************************************/
/*! exports provided: ResettableTimeout */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ResettableTimeout", function() { return ResettableTimeout; });
var ResettableTimeout = /** @class */ (function () {
    function ResettableTimeout(callback, ms) {
        this.timerMilliSecond = 0;
        this.timeoutDate = 0;
        this.isStopped = false;
        this.callback = callback;
        this.timerMilliSecond = ms;
        this.reset();
    }
    Object.defineProperty(ResettableTimeout.prototype, "isActive", {
        get: function () { return this.timeoutTimer != null; },
        enumerable: false,
        configurable: true
    });
    ResettableTimeout.prototype.stop = function () {
        this.isStopped = true;
    };
    ResettableTimeout.prototype.clear = function () {
        this.callback = null;
        this.timerMilliSecond = 0;
        this.timeoutDate = 0;
        if (this.timeoutTimer)
            clearTimeout(this.timeoutTimer);
        this.timeoutTimer = null;
        this.isStopped = false;
    };
    ResettableTimeout.prototype.reset = function () {
        var args = [];
        for (var _i = 0; _i < arguments.length; _i++) {
            args[_i] = arguments[_i];
        }
        if (args.length === 1) {
            this.timerMilliSecond = args[0];
        }
        else if (1 < args.length) {
            this.callback = args[0];
            this.timerMilliSecond = args[1];
        }
        this.isStopped = false;
        var oldTimeoutDate = this.timeoutDate;
        this.timeoutDate = performance.now() + this.timerMilliSecond;
        if (this.timeoutTimer && oldTimeoutDate <= this.timeoutDate)
            return;
        this.setTimeout();
    };
    ResettableTimeout.prototype.setTimeout = function () {
        var _this = this;
        if (this.timeoutTimer)
            clearTimeout(this.timeoutTimer);
        this.timeoutTimer = null;
        if (!this.callback)
            return;
        this.timeoutTimer = setTimeout(function () {
            _this.timeoutTimer = null;
            if (_this.isStopped)
                return;
            if (performance.now() < _this.timeoutDate) {
                _this.setTimeout();
            }
            else {
                if (_this.callback)
                    _this.callback();
            }
        }, this.timeoutDate - performance.now());
    };
    return ResettableTimeout;
}());



/***/ }),

/***/ "AFBa":
/*!****************************************************!*\
  !*** ./src/app/service/tabletop-action.service.ts ***!
  \****************************************************/
/*! exports provided: TabletopActionService */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TabletopActionService", function() { return TabletopActionService; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "mrSG");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "fXoL");
/* harmony import */ var _udonarium_card__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @udonarium/card */ "jiu3");
/* harmony import */ var _udonarium_card_stack__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @udonarium/card-stack */ "23G+");
/* harmony import */ var _udonarium_core_file_storage_image_file__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @udonarium/core/file-storage/image-file */ "FjwV");
/* harmony import */ var _udonarium_core_file_storage_image_storage__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @udonarium/core/file-storage/image-storage */ "JQpJ");
/* harmony import */ var _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @udonarium/core/synchronize-object/object-store */ "hm7o");
/* harmony import */ var _udonarium_core_system__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @udonarium/core/system */ "yNnI");
/* harmony import */ var _udonarium_dice_symbol__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @udonarium/dice-symbol */ "l22b");
/* harmony import */ var _udonarium_game_character__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @udonarium/game-character */ "M/aK");
/* harmony import */ var _udonarium_game_table__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @udonarium/game-table */ "RDF6");
/* harmony import */ var _udonarium_game_table_mask__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @udonarium/game-table-mask */ "AyjR");
/* harmony import */ var _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @udonarium/sound-effect */ "veT5");
/* harmony import */ var _udonarium_table_selecter__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @udonarium/table-selecter */ "GvTa");
/* harmony import */ var _udonarium_terrain__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @udonarium/terrain */ "gKYc");
/* harmony import */ var _udonarium_text_note__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @udonarium/text-note */ "WeD8");
/* harmony import */ var _udonarium_image_tag__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @udonarium/image-tag */ "WHGT");
/* harmony import */ var _udonarium_data_element__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @udonarium/data-element */ "gkrD");



















var TabletopActionService = /** @class */ (function () {
    function TabletopActionService() {
    }
    TabletopActionService.prototype.createGameCharacter = function (position) {
        var character = _udonarium_game_character__WEBPACK_IMPORTED_MODULE_9__["GameCharacter"].create('新しいキャラクター', 1, '');
        character.location.x = position.x - 25;
        character.location.y = position.y - 25;
        character.posZ = position.z;
        return character;
    };
    TabletopActionService.prototype.createGameTableMask = function (position) {
        var viewTable = this.getViewTable();
        if (!viewTable)
            return;
        var tableMask = _udonarium_game_table_mask__WEBPACK_IMPORTED_MODULE_11__["GameTableMask"].create('マップマスク', 5, 5, 100);
        tableMask.location.x = position.x - 25;
        tableMask.location.y = position.y - 25;
        tableMask.posZ = position.z;
        viewTable.appendChild(tableMask);
        return tableMask;
    };
    TabletopActionService.prototype.createTerrain = function (position) {
        var url = './assets/images/tex.jpg';
        var image = _udonarium_core_file_storage_image_storage__WEBPACK_IMPORTED_MODULE_5__["ImageStorage"].instance.get(url);
        //本家PR #92より
        //    if (!image) image = ImageStorage.instance.add(url);
        if (!image) {
            image = _udonarium_core_file_storage_image_storage__WEBPACK_IMPORTED_MODULE_5__["ImageStorage"].instance.add(url);
            _udonarium_image_tag__WEBPACK_IMPORTED_MODULE_16__["ImageTag"].create(image.identifier).tag = '地形';
        }
        //
        var viewTable = this.getViewTable();
        if (!viewTable)
            return;
        var terrain = _udonarium_terrain__WEBPACK_IMPORTED_MODULE_14__["Terrain"].create('地形', 2, 2, 2, image.identifier, image.identifier);
        terrain.location.x = position.x - 50;
        terrain.location.y = position.y - 50;
        terrain.posZ = position.z;
        viewTable.appendChild(terrain);
        return terrain;
    };
    TabletopActionService.prototype.createTextNote = function (position) {
        var textNote = _udonarium_text_note__WEBPACK_IMPORTED_MODULE_15__["TextNote"].create('共有メモ', 'テキストを入力してください', 5, 4, 3);
        textNote.location.x = position.x;
        textNote.location.y = position.y;
        textNote.posZ = position.z;
        return textNote;
    };
    TabletopActionService.prototype.createDiceSymbol = function (position, name, diceType, imagePathPrefix) {
        var diceSymbol = _udonarium_dice_symbol__WEBPACK_IMPORTED_MODULE_8__["DiceSymbol"].create(name, diceType, 1);
        var image = null;
        diceSymbol.faces.forEach(function (face) {
            var url = "./assets/images/dice/" + imagePathPrefix + "/" + imagePathPrefix + "[" + face + "].png";
            image = _udonarium_core_file_storage_image_storage__WEBPACK_IMPORTED_MODULE_5__["ImageStorage"].instance.get(url);
            if (!image) {
                image = _udonarium_core_file_storage_image_storage__WEBPACK_IMPORTED_MODULE_5__["ImageStorage"].instance.add(url);
            }
            diceSymbol.imageDataElement.getFirstElementByName(face).value = image.identifier;
        });
        diceSymbol.location.x = position.x - 25;
        diceSymbol.location.y = position.y - 25;
        diceSymbol.posZ = position.z;
        return diceSymbol;
    };
    TabletopActionService.prototype.createTrump = function (position) {
        var e_1, _a, e_2, _b;
        var cardStack = _udonarium_card_stack__WEBPACK_IMPORTED_MODULE_3__["CardStack"].create('トランプ山札');
        cardStack.location.x = position.x - 25;
        cardStack.location.y = position.y - 25;
        cardStack.posZ = position.z;
        var back = './assets/images/trump/z02.gif';
        //本家PR #92より
        //    if (!ImageStorage.instance.get(back)) {
        //      ImageStorage.instance.add(back);
        //    }
        if (!_udonarium_core_file_storage_image_storage__WEBPACK_IMPORTED_MODULE_5__["ImageStorage"].instance.get(back)) {
            var image = _udonarium_core_file_storage_image_storage__WEBPACK_IMPORTED_MODULE_5__["ImageStorage"].instance.add(back);
            _udonarium_image_tag__WEBPACK_IMPORTED_MODULE_16__["ImageTag"].create(image.identifier).tag = 'トランプ';
        }
        //
        var suits = ['c', 'd', 'h', 's'];
        var trumps = [];
        try {
            for (var suits_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(suits), suits_1_1 = suits_1.next(); !suits_1_1.done; suits_1_1 = suits_1.next()) {
                var suit = suits_1_1.value;
                for (var i = 1; i <= 13; i++) {
                    trumps.push(suit + (('00' + i).slice(-2)));
                }
            }
        }
        catch (e_1_1) { e_1 = { error: e_1_1 }; }
        finally {
            try {
                if (suits_1_1 && !suits_1_1.done && (_a = suits_1.return)) _a.call(suits_1);
            }
            finally { if (e_1) throw e_1.error; }
        }
        trumps.push('x01');
        trumps.push('x02');
        try {
            for (var trumps_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(trumps), trumps_1_1 = trumps_1.next(); !trumps_1_1.done; trumps_1_1 = trumps_1.next()) {
                var trump = trumps_1_1.value;
                var url = './assets/images/trump/' + trump + '.gif';
                if (!_udonarium_core_file_storage_image_storage__WEBPACK_IMPORTED_MODULE_5__["ImageStorage"].instance.get(url)) {
                    //本家PR #92より
                    //          ImageStorage.instance.add(url);
                    var image = _udonarium_core_file_storage_image_storage__WEBPACK_IMPORTED_MODULE_5__["ImageStorage"].instance.add(url);
                    _udonarium_image_tag__WEBPACK_IMPORTED_MODULE_16__["ImageTag"].create(image.identifier).tag = 'トランプ';
                    //
                }
                var card = _udonarium_card__WEBPACK_IMPORTED_MODULE_2__["Card"].create('カード', url, back);
                cardStack.putOnBottom(card);
            }
        }
        catch (e_2_1) { e_2 = { error: e_2_1 }; }
        finally {
            try {
                if (trumps_1_1 && !trumps_1_1.done && (_b = trumps_1.return)) _b.call(trumps_1);
            }
            finally { if (e_2) throw e_2.error; }
        }
        return cardStack;
    };
    TabletopActionService.prototype.makeDefaultTable = function () {
        var tableSelecter = new _udonarium_table_selecter__WEBPACK_IMPORTED_MODULE_13__["TableSelecter"]('tableSelecter');
        tableSelecter.initialize();
        var gameTable = new _udonarium_game_table__WEBPACK_IMPORTED_MODULE_10__["GameTable"]('gameTable');
        var testBgFile = null;
        var bgFileContext = _udonarium_core_file_storage_image_file__WEBPACK_IMPORTED_MODULE_4__["ImageFile"].createEmpty('testTableBackgroundImage_image').toContext();
        bgFileContext.url = './assets/images/BG10a_80.jpg';
        testBgFile = _udonarium_core_file_storage_image_storage__WEBPACK_IMPORTED_MODULE_5__["ImageStorage"].instance.add(bgFileContext);
        //本家PR #92より
        _udonarium_image_tag__WEBPACK_IMPORTED_MODULE_16__["ImageTag"].create(testBgFile.identifier).tag = '背景';
        //
        //entyu_2 #92
        //ImageTag.create(testBgFile.identifier).tag = 'default テーブル';
        //
        gameTable.name = '最初のテーブル';
        gameTable.imageIdentifier = testBgFile.identifier;
        gameTable.width = 20;
        gameTable.height = 15;
        gameTable.initialize();
        tableSelecter.viewTableIdentifier = gameTable.identifier;
    };
    //バフ追加
    TabletopActionService.prototype.addBuffRound = function (character, name, subcom, round) {
        var e_3, _a;
        // @ts-ignore
        if (character.buffDataElement.children) {
            try {
                for (var _b = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(character.buffDataElement.children), _c = _b.next(); !_c.done; _c = _b.next()) {
                    var dataElm = _c.value;
                    dataElm.appendChild(_udonarium_data_element__WEBPACK_IMPORTED_MODULE_17__["DataElement"].create(name, round, { 'type': 'numberResource', 'currentValue': subcom }, name + '_' + character.identifier));
                    return;
                }
            }
            catch (e_3_1) { e_3 = { error: e_3_1 }; }
            finally {
                try {
                    if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
                }
                finally { if (e_3) throw e_3.error; }
            }
        }
    };
    TabletopActionService.prototype.initAprilDiceImage = function () {
        var file = null;
        var fileContext = null;
        fileContext = _udonarium_core_file_storage_image_file__WEBPACK_IMPORTED_MODULE_4__["ImageFile"].createEmpty('1d4_dice[00]').toContext();
        fileContext.url = './assets/images/april_dice/1d4_dice[00].png';
        file = _udonarium_core_file_storage_image_storage__WEBPACK_IMPORTED_MODULE_5__["ImageStorage"].instance.add(fileContext);
        _udonarium_image_tag__WEBPACK_IMPORTED_MODULE_16__["ImageTag"].create(file.identifier).tag = 'システム予約';
        fileContext = _udonarium_core_file_storage_image_file__WEBPACK_IMPORTED_MODULE_4__["ImageFile"].createEmpty('1d4_dice[01]').toContext();
        fileContext.url = './assets/images/april_dice/1d4_dice[01].png';
        file = _udonarium_core_file_storage_image_storage__WEBPACK_IMPORTED_MODULE_5__["ImageStorage"].instance.add(fileContext);
        _udonarium_image_tag__WEBPACK_IMPORTED_MODULE_16__["ImageTag"].create(file.identifier).tag = 'システム予約';
        fileContext = _udonarium_core_file_storage_image_file__WEBPACK_IMPORTED_MODULE_4__["ImageFile"].createEmpty('1d4_dice[02]').toContext();
        fileContext.url = './assets/images/april_dice/1d4_dice[02].png';
        file = _udonarium_core_file_storage_image_storage__WEBPACK_IMPORTED_MODULE_5__["ImageStorage"].instance.add(fileContext);
        _udonarium_image_tag__WEBPACK_IMPORTED_MODULE_16__["ImageTag"].create(file.identifier).tag = 'システム予約';
        fileContext = _udonarium_core_file_storage_image_file__WEBPACK_IMPORTED_MODULE_4__["ImageFile"].createEmpty('1d4_dice[03]').toContext();
        fileContext.url = './assets/images/april_dice/1d4_dice[03].png';
        file = _udonarium_core_file_storage_image_storage__WEBPACK_IMPORTED_MODULE_5__["ImageStorage"].instance.add(fileContext);
        _udonarium_image_tag__WEBPACK_IMPORTED_MODULE_16__["ImageTag"].create(file.identifier).tag = 'システム予約';
        fileContext = _udonarium_core_file_storage_image_file__WEBPACK_IMPORTED_MODULE_4__["ImageFile"].createEmpty('1d6_dice[00]').toContext();
        fileContext.url = './assets/images/april_dice/1d6_dice[00].png';
        file = _udonarium_core_file_storage_image_storage__WEBPACK_IMPORTED_MODULE_5__["ImageStorage"].instance.add(fileContext);
        _udonarium_image_tag__WEBPACK_IMPORTED_MODULE_16__["ImageTag"].create(file.identifier).tag = 'システム予約';
        fileContext = _udonarium_core_file_storage_image_file__WEBPACK_IMPORTED_MODULE_4__["ImageFile"].createEmpty('1d6_dice[01]').toContext();
        fileContext.url = './assets/images/april_dice/1d6_dice[01].png';
        file = _udonarium_core_file_storage_image_storage__WEBPACK_IMPORTED_MODULE_5__["ImageStorage"].instance.add(fileContext);
        _udonarium_image_tag__WEBPACK_IMPORTED_MODULE_16__["ImageTag"].create(file.identifier).tag = 'システム予約';
        fileContext = _udonarium_core_file_storage_image_file__WEBPACK_IMPORTED_MODULE_4__["ImageFile"].createEmpty('1d6_dice[02]').toContext();
        fileContext.url = './assets/images/april_dice/1d6_dice[02].png';
        file = _udonarium_core_file_storage_image_storage__WEBPACK_IMPORTED_MODULE_5__["ImageStorage"].instance.add(fileContext);
        _udonarium_image_tag__WEBPACK_IMPORTED_MODULE_16__["ImageTag"].create(file.identifier).tag = 'システム予約';
        fileContext = _udonarium_core_file_storage_image_file__WEBPACK_IMPORTED_MODULE_4__["ImageFile"].createEmpty('1d6_dice[03]').toContext();
        fileContext.url = './assets/images/april_dice/1d6_dice[03].png';
        file = _udonarium_core_file_storage_image_storage__WEBPACK_IMPORTED_MODULE_5__["ImageStorage"].instance.add(fileContext);
        _udonarium_image_tag__WEBPACK_IMPORTED_MODULE_16__["ImageTag"].create(file.identifier).tag = 'システム予約';
        fileContext = _udonarium_core_file_storage_image_file__WEBPACK_IMPORTED_MODULE_4__["ImageFile"].createEmpty('2d6_dice[00]').toContext();
        fileContext.url = './assets/images/april_dice/2d6_dice[00].png';
        file = _udonarium_core_file_storage_image_storage__WEBPACK_IMPORTED_MODULE_5__["ImageStorage"].instance.add(fileContext);
        _udonarium_image_tag__WEBPACK_IMPORTED_MODULE_16__["ImageTag"].create(file.identifier).tag = 'システム予約';
        fileContext = _udonarium_core_file_storage_image_file__WEBPACK_IMPORTED_MODULE_4__["ImageFile"].createEmpty('2d6_dice[01]').toContext();
        fileContext.url = './assets/images/april_dice/2d6_dice[01].png';
        file = _udonarium_core_file_storage_image_storage__WEBPACK_IMPORTED_MODULE_5__["ImageStorage"].instance.add(fileContext);
        _udonarium_image_tag__WEBPACK_IMPORTED_MODULE_16__["ImageTag"].create(file.identifier).tag = 'システム予約';
        fileContext = _udonarium_core_file_storage_image_file__WEBPACK_IMPORTED_MODULE_4__["ImageFile"].createEmpty('2d6_dice[02]').toContext();
        fileContext.url = './assets/images/april_dice/2d6_dice[02].png';
        file = _udonarium_core_file_storage_image_storage__WEBPACK_IMPORTED_MODULE_5__["ImageStorage"].instance.add(fileContext);
        _udonarium_image_tag__WEBPACK_IMPORTED_MODULE_16__["ImageTag"].create(file.identifier).tag = 'システム予約';
        fileContext = _udonarium_core_file_storage_image_file__WEBPACK_IMPORTED_MODULE_4__["ImageFile"].createEmpty('2d6_dice[03]').toContext();
        fileContext.url = './assets/images/april_dice/2d6_dice[03].png';
        file = _udonarium_core_file_storage_image_storage__WEBPACK_IMPORTED_MODULE_5__["ImageStorage"].instance.add(fileContext);
        _udonarium_image_tag__WEBPACK_IMPORTED_MODULE_16__["ImageTag"].create(file.identifier).tag = 'システム予約';
        fileContext = _udonarium_core_file_storage_image_file__WEBPACK_IMPORTED_MODULE_4__["ImageFile"].createEmpty('1d8_dice[00]').toContext();
        fileContext.url = './assets/images/april_dice/1d8_dice[00].png';
        file = _udonarium_core_file_storage_image_storage__WEBPACK_IMPORTED_MODULE_5__["ImageStorage"].instance.add(fileContext);
        _udonarium_image_tag__WEBPACK_IMPORTED_MODULE_16__["ImageTag"].create(file.identifier).tag = 'システム予約';
        fileContext = _udonarium_core_file_storage_image_file__WEBPACK_IMPORTED_MODULE_4__["ImageFile"].createEmpty('1d8_dice[01]').toContext();
        fileContext.url = './assets/images/april_dice/1d8_dice[01].png';
        file = _udonarium_core_file_storage_image_storage__WEBPACK_IMPORTED_MODULE_5__["ImageStorage"].instance.add(fileContext);
        _udonarium_image_tag__WEBPACK_IMPORTED_MODULE_16__["ImageTag"].create(file.identifier).tag = 'システム予約';
        fileContext = _udonarium_core_file_storage_image_file__WEBPACK_IMPORTED_MODULE_4__["ImageFile"].createEmpty('1d8_dice[02]').toContext();
        fileContext.url = './assets/images/april_dice/1d8_dice[02].png';
        file = _udonarium_core_file_storage_image_storage__WEBPACK_IMPORTED_MODULE_5__["ImageStorage"].instance.add(fileContext);
        _udonarium_image_tag__WEBPACK_IMPORTED_MODULE_16__["ImageTag"].create(file.identifier).tag = 'システム予約';
        fileContext = _udonarium_core_file_storage_image_file__WEBPACK_IMPORTED_MODULE_4__["ImageFile"].createEmpty('1d8_dice[03]').toContext();
        fileContext.url = './assets/images/april_dice/1d8_dice[03].png';
        file = _udonarium_core_file_storage_image_storage__WEBPACK_IMPORTED_MODULE_5__["ImageStorage"].instance.add(fileContext);
        _udonarium_image_tag__WEBPACK_IMPORTED_MODULE_16__["ImageTag"].create(file.identifier).tag = 'システム予約';
        fileContext = _udonarium_core_file_storage_image_file__WEBPACK_IMPORTED_MODULE_4__["ImageFile"].createEmpty('1d10_dice[00]').toContext();
        fileContext.url = './assets/images/april_dice/1d10_dice[00].png';
        file = _udonarium_core_file_storage_image_storage__WEBPACK_IMPORTED_MODULE_5__["ImageStorage"].instance.add(fileContext);
        _udonarium_image_tag__WEBPACK_IMPORTED_MODULE_16__["ImageTag"].create(file.identifier).tag = 'システム予約';
        fileContext = _udonarium_core_file_storage_image_file__WEBPACK_IMPORTED_MODULE_4__["ImageFile"].createEmpty('1d10_dice[01]').toContext();
        fileContext.url = './assets/images/april_dice/1d10_dice[01].png';
        file = _udonarium_core_file_storage_image_storage__WEBPACK_IMPORTED_MODULE_5__["ImageStorage"].instance.add(fileContext);
        _udonarium_image_tag__WEBPACK_IMPORTED_MODULE_16__["ImageTag"].create(file.identifier).tag = 'システム予約';
        fileContext = _udonarium_core_file_storage_image_file__WEBPACK_IMPORTED_MODULE_4__["ImageFile"].createEmpty('1d10_dice[02]').toContext();
        fileContext.url = './assets/images/april_dice/1d10_dice[02].png';
        file = _udonarium_core_file_storage_image_storage__WEBPACK_IMPORTED_MODULE_5__["ImageStorage"].instance.add(fileContext);
        _udonarium_image_tag__WEBPACK_IMPORTED_MODULE_16__["ImageTag"].create(file.identifier).tag = 'システム予約';
        fileContext = _udonarium_core_file_storage_image_file__WEBPACK_IMPORTED_MODULE_4__["ImageFile"].createEmpty('1d10_dice[03]').toContext();
        fileContext.url = './assets/images/april_dice/1d10_dice[03].png';
        file = _udonarium_core_file_storage_image_storage__WEBPACK_IMPORTED_MODULE_5__["ImageStorage"].instance.add(fileContext);
        _udonarium_image_tag__WEBPACK_IMPORTED_MODULE_16__["ImageTag"].create(file.identifier).tag = 'システム予約';
        fileContext = _udonarium_core_file_storage_image_file__WEBPACK_IMPORTED_MODULE_4__["ImageFile"].createEmpty('1d12_dice[00]').toContext();
        fileContext.url = './assets/images/april_dice/1d12_dice[00].png';
        file = _udonarium_core_file_storage_image_storage__WEBPACK_IMPORTED_MODULE_5__["ImageStorage"].instance.add(fileContext);
        _udonarium_image_tag__WEBPACK_IMPORTED_MODULE_16__["ImageTag"].create(file.identifier).tag = 'システム予約';
        fileContext = _udonarium_core_file_storage_image_file__WEBPACK_IMPORTED_MODULE_4__["ImageFile"].createEmpty('1d12_dice[01]').toContext();
        fileContext.url = './assets/images/april_dice/1d12_dice[01].png';
        file = _udonarium_core_file_storage_image_storage__WEBPACK_IMPORTED_MODULE_5__["ImageStorage"].instance.add(fileContext);
        _udonarium_image_tag__WEBPACK_IMPORTED_MODULE_16__["ImageTag"].create(file.identifier).tag = 'システム予約';
        fileContext = _udonarium_core_file_storage_image_file__WEBPACK_IMPORTED_MODULE_4__["ImageFile"].createEmpty('1d12_dice[02]').toContext();
        fileContext.url = './assets/images/april_dice/1d12_dice[02].png';
        file = _udonarium_core_file_storage_image_storage__WEBPACK_IMPORTED_MODULE_5__["ImageStorage"].instance.add(fileContext);
        _udonarium_image_tag__WEBPACK_IMPORTED_MODULE_16__["ImageTag"].create(file.identifier).tag = 'システム予約';
        fileContext = _udonarium_core_file_storage_image_file__WEBPACK_IMPORTED_MODULE_4__["ImageFile"].createEmpty('1d12_dice[03]').toContext();
        fileContext.url = './assets/images/april_dice/1d12_dice[03].png';
        file = _udonarium_core_file_storage_image_storage__WEBPACK_IMPORTED_MODULE_5__["ImageStorage"].instance.add(fileContext);
        _udonarium_image_tag__WEBPACK_IMPORTED_MODULE_16__["ImageTag"].create(file.identifier).tag = 'システム予約';
        fileContext = _udonarium_core_file_storage_image_file__WEBPACK_IMPORTED_MODULE_4__["ImageFile"].createEmpty('1d20_dice[00]').toContext();
        fileContext.url = './assets/images/april_dice/1d20_dice[00].png';
        file = _udonarium_core_file_storage_image_storage__WEBPACK_IMPORTED_MODULE_5__["ImageStorage"].instance.add(fileContext);
        _udonarium_image_tag__WEBPACK_IMPORTED_MODULE_16__["ImageTag"].create(file.identifier).tag = 'システム予約';
        fileContext = _udonarium_core_file_storage_image_file__WEBPACK_IMPORTED_MODULE_4__["ImageFile"].createEmpty('1d20_dice[01]').toContext();
        fileContext.url = './assets/images/april_dice/1d20_dice[01].png';
        file = _udonarium_core_file_storage_image_storage__WEBPACK_IMPORTED_MODULE_5__["ImageStorage"].instance.add(fileContext);
        _udonarium_image_tag__WEBPACK_IMPORTED_MODULE_16__["ImageTag"].create(file.identifier).tag = 'システム予約';
        fileContext = _udonarium_core_file_storage_image_file__WEBPACK_IMPORTED_MODULE_4__["ImageFile"].createEmpty('1d20_dice[02]').toContext();
        fileContext.url = './assets/images/april_dice/1d20_dice[02].png';
        file = _udonarium_core_file_storage_image_storage__WEBPACK_IMPORTED_MODULE_5__["ImageStorage"].instance.add(fileContext);
        _udonarium_image_tag__WEBPACK_IMPORTED_MODULE_16__["ImageTag"].create(file.identifier).tag = 'システム予約';
        fileContext = _udonarium_core_file_storage_image_file__WEBPACK_IMPORTED_MODULE_4__["ImageFile"].createEmpty('1d20_dice[03]').toContext();
        fileContext.url = './assets/images/april_dice/1d20_dice[03].png';
        file = _udonarium_core_file_storage_image_storage__WEBPACK_IMPORTED_MODULE_5__["ImageStorage"].instance.add(fileContext);
        _udonarium_image_tag__WEBPACK_IMPORTED_MODULE_16__["ImageTag"].create(file.identifier).tag = 'システム予約';
        fileContext = _udonarium_core_file_storage_image_file__WEBPACK_IMPORTED_MODULE_4__["ImageFile"].createEmpty('1d100_dice[00]').toContext();
        fileContext.url = './assets/images/april_dice/1d100_dice[00].png';
        file = _udonarium_core_file_storage_image_storage__WEBPACK_IMPORTED_MODULE_5__["ImageStorage"].instance.add(fileContext);
        _udonarium_image_tag__WEBPACK_IMPORTED_MODULE_16__["ImageTag"].create(file.identifier).tag = 'システム予約';
        fileContext = _udonarium_core_file_storage_image_file__WEBPACK_IMPORTED_MODULE_4__["ImageFile"].createEmpty('1d100_dice[01]').toContext();
        fileContext.url = './assets/images/april_dice/1d100_dice[01].png';
        file = _udonarium_core_file_storage_image_storage__WEBPACK_IMPORTED_MODULE_5__["ImageStorage"].instance.add(fileContext);
        _udonarium_image_tag__WEBPACK_IMPORTED_MODULE_16__["ImageTag"].create(file.identifier).tag = 'システム予約';
        fileContext = _udonarium_core_file_storage_image_file__WEBPACK_IMPORTED_MODULE_4__["ImageFile"].createEmpty('1d100_dice[02]').toContext();
        fileContext.url = './assets/images/april_dice/1d100_dice[02].png';
        file = _udonarium_core_file_storage_image_storage__WEBPACK_IMPORTED_MODULE_5__["ImageStorage"].instance.add(fileContext);
        _udonarium_image_tag__WEBPACK_IMPORTED_MODULE_16__["ImageTag"].create(file.identifier).tag = 'システム予約';
        fileContext = _udonarium_core_file_storage_image_file__WEBPACK_IMPORTED_MODULE_4__["ImageFile"].createEmpty('1d100_dice[03]').toContext();
        fileContext.url = './assets/images/april_dice/1d100_dice[03].png';
        file = _udonarium_core_file_storage_image_storage__WEBPACK_IMPORTED_MODULE_5__["ImageStorage"].instance.add(fileContext);
        _udonarium_image_tag__WEBPACK_IMPORTED_MODULE_16__["ImageTag"].create(file.identifier).tag = 'システム予約';
        fileContext = _udonarium_core_file_storage_image_file__WEBPACK_IMPORTED_MODULE_4__["ImageFile"].createEmpty('april[00]').toContext();
        fileContext.url = './assets/images/april/april[00].png';
        file = _udonarium_core_file_storage_image_storage__WEBPACK_IMPORTED_MODULE_5__["ImageStorage"].instance.add(fileContext);
        _udonarium_image_tag__WEBPACK_IMPORTED_MODULE_16__["ImageTag"].create(file.identifier).tag = 'システム予約';
        fileContext = _udonarium_core_file_storage_image_file__WEBPACK_IMPORTED_MODULE_4__["ImageFile"].createEmpty('april[01]').toContext();
        fileContext.url = './assets/images/april/april[01].png';
        file = _udonarium_core_file_storage_image_storage__WEBPACK_IMPORTED_MODULE_5__["ImageStorage"].instance.add(fileContext);
        _udonarium_image_tag__WEBPACK_IMPORTED_MODULE_16__["ImageTag"].create(file.identifier).tag = 'システム予約';
    };
    TabletopActionService.prototype.makeDefaultTabletopObjects = function () {
        var testCharacter = null;
        var testFile = null;
        var fileContext = null;
        //-------------------------
        testCharacter = new _udonarium_game_character__WEBPACK_IMPORTED_MODULE_9__["GameCharacter"]('testCharacter_1');
        fileContext = _udonarium_core_file_storage_image_file__WEBPACK_IMPORTED_MODULE_4__["ImageFile"].createEmpty('testCharacter_1_image').toContext();
        fileContext.url = './assets/images/mon_052.gif';
        testFile = _udonarium_core_file_storage_image_storage__WEBPACK_IMPORTED_MODULE_5__["ImageStorage"].instance.add(fileContext);
        testCharacter.location.x = 5 * 50;
        testCharacter.location.y = 9 * 50;
        testCharacter.initialize();
        _udonarium_image_tag__WEBPACK_IMPORTED_MODULE_16__["ImageTag"].create(testFile.identifier).tag = 'モンスター'; //本家PR #92より
        testCharacter.createTestGameDataElement('モンスターA', 1, testFile.identifier);
        this.addBuffRound(testCharacter, 'テストバフ1', '防+1', 3);
        //-------------------------
        testCharacter = new _udonarium_game_character__WEBPACK_IMPORTED_MODULE_9__["GameCharacter"]('testCharacter_2');
        testCharacter.location.x = 8 * 50;
        testCharacter.location.y = 8 * 50;
        testCharacter.initialize();
        testCharacter.createTestGameDataElement('モンスターB', 1, testFile.identifier);
        //-------------------------
        testCharacter = new _udonarium_game_character__WEBPACK_IMPORTED_MODULE_9__["GameCharacter"]('testCharacter_3');
        fileContext = _udonarium_core_file_storage_image_file__WEBPACK_IMPORTED_MODULE_4__["ImageFile"].createEmpty('testCharacter_3_image').toContext();
        fileContext.url = './assets/images/mon_128.gif';
        testFile = _udonarium_core_file_storage_image_storage__WEBPACK_IMPORTED_MODULE_5__["ImageStorage"].instance.add(fileContext);
        testCharacter.location.x = 4 * 50;
        testCharacter.location.y = 2 * 50;
        testCharacter.initialize();
        testFile = _udonarium_core_file_storage_image_storage__WEBPACK_IMPORTED_MODULE_5__["ImageStorage"].instance.add(fileContext);
        _udonarium_image_tag__WEBPACK_IMPORTED_MODULE_16__["ImageTag"].create(testFile.identifier).tag = 'モンスター'; //本家PR #92より
        testCharacter.createTestGameDataElement('モンスターC', 3, testFile.identifier);
        //-------------------------
        testCharacter = new _udonarium_game_character__WEBPACK_IMPORTED_MODULE_9__["GameCharacter"]('testCharacter_4');
        fileContext = _udonarium_core_file_storage_image_file__WEBPACK_IMPORTED_MODULE_4__["ImageFile"].createEmpty('testCharacter_4_image').toContext();
        fileContext.url = './assets/images/mon_150.gif';
        //本家PR #92より
        //    fileContext.tag = 'テスト01';
        testFile = _udonarium_core_file_storage_image_storage__WEBPACK_IMPORTED_MODULE_5__["ImageStorage"].instance.add(fileContext);
        _udonarium_image_tag__WEBPACK_IMPORTED_MODULE_16__["ImageTag"].create(testFile.identifier).tag = ''; //本家PR #92より
        testCharacter.location.x = 6 * 50;
        testCharacter.location.y = 11 * 50;
        testCharacter.initialize();
        testCharacter.createTestGameDataElement('キャラクターA', 1, testFile.identifier);
        this.addBuffRound(testCharacter, 'テストバフ2', '攻撃+10', 1);
        //-------------------------
        testCharacter = new _udonarium_game_character__WEBPACK_IMPORTED_MODULE_9__["GameCharacter"]('testCharacter_5');
        fileContext = _udonarium_core_file_storage_image_file__WEBPACK_IMPORTED_MODULE_4__["ImageFile"].createEmpty('testCharacter_5_image').toContext();
        fileContext.url = './assets/images/mon_211.gif';
        testFile = _udonarium_core_file_storage_image_storage__WEBPACK_IMPORTED_MODULE_5__["ImageStorage"].instance.add(fileContext);
        testCharacter.location.x = 12 * 50;
        testCharacter.location.y = 12 * 50;
        testCharacter.initialize();
        testCharacter.createTestGameDataElement('キャラクターB', 1, testFile.identifier);
        this.addBuffRound(testCharacter, 'テストバフ2', '攻撃+10', 1);
        //-------------------------
        testCharacter = new _udonarium_game_character__WEBPACK_IMPORTED_MODULE_9__["GameCharacter"]('testCharacter_6');
        fileContext = _udonarium_core_file_storage_image_file__WEBPACK_IMPORTED_MODULE_4__["ImageFile"].createEmpty('testCharacter_6_image').toContext();
        fileContext.url = './assets/images/mon_135.gif';
        testFile = _udonarium_core_file_storage_image_storage__WEBPACK_IMPORTED_MODULE_5__["ImageStorage"].instance.add(fileContext);
        _udonarium_image_tag__WEBPACK_IMPORTED_MODULE_16__["ImageTag"].create(testFile.identifier).tag = ''; //本家PR #92より
        testCharacter.initialize();
        testCharacter.location.x = 5 * 50;
        testCharacter.location.y = 13 * 50;
        testCharacter.createTestGameDataElement('キャラクターC', 1, testFile.identifier);
        this.addBuffRound(testCharacter, 'テストバフ3', '回避+5', 1);
    };
    TabletopActionService.prototype.makeDefaultContextMenuActions = function (position) {
        return [
            this.getCreateCharacterMenu(position),
            this.getCreateTableMaskMenu(position),
            this.getCreateTerrainMenu(position),
            this.getCreateTextNoteMenu(position),
            this.getCreateTrumpMenu(position),
            this.getCreateDiceSymbolMenu(position),
        ];
    };
    TabletopActionService.prototype.getCreateCharacterMenu = function (position) {
        var _this = this;
        return {
            name: 'キャラクターを作成',
            action: function () {
                var character = _this.createGameCharacter(position);
                _udonarium_core_system__WEBPACK_IMPORTED_MODULE_7__["EventSystem"].trigger('SELECT_TABLETOP_OBJECT', { identifier: character.identifier, className: character.aliasName });
                _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_12__["SoundEffect"].play(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_12__["PresetSound"].piecePut);
            }
        };
    };
    TabletopActionService.prototype.getCreateTableMaskMenu = function (position) {
        var _this = this;
        return {
            name: 'マップマスクを作成',
            action: function () {
                _this.createGameTableMask(position);
                _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_12__["SoundEffect"].play(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_12__["PresetSound"].cardPut);
            }
        };
    };
    TabletopActionService.prototype.getCreateTerrainMenu = function (position) {
        var _this = this;
        return {
            name: '地形を作成',
            action: function () {
                _this.createTerrain(position);
                _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_12__["SoundEffect"].play(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_12__["PresetSound"].blockPut);
            }
        };
    };
    TabletopActionService.prototype.getCreateTextNoteMenu = function (position) {
        var _this = this;
        return {
            name: '共有メモを作成',
            action: function () {
                _this.createTextNote(position);
                _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_12__["SoundEffect"].play(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_12__["PresetSound"].cardPut);
            }
        };
    };
    TabletopActionService.prototype.getCreateTrumpMenu = function (position) {
        var _this = this;
        return {
            name: 'トランプの山札を作成',
            action: function () {
                _this.createTrump(position);
                _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_12__["SoundEffect"].play(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_12__["PresetSound"].cardPut);
            }
        };
    };
    TabletopActionService.prototype.getCreateDiceSymbolMenu = function (position) {
        var _this = this;
        var dices = [
            { menuName: 'D4', diceName: 'D4', type: _udonarium_dice_symbol__WEBPACK_IMPORTED_MODULE_8__["DiceType"].D4, imagePathPrefix: '4_dice' },
            { menuName: 'D6', diceName: 'D6', type: _udonarium_dice_symbol__WEBPACK_IMPORTED_MODULE_8__["DiceType"].D6, imagePathPrefix: '6_dice' },
            { menuName: 'D8', diceName: 'D8', type: _udonarium_dice_symbol__WEBPACK_IMPORTED_MODULE_8__["DiceType"].D8, imagePathPrefix: '8_dice' },
            { menuName: 'D10', diceName: 'D10', type: _udonarium_dice_symbol__WEBPACK_IMPORTED_MODULE_8__["DiceType"].D10, imagePathPrefix: '10_dice' },
            { menuName: 'D10 (00-90)', diceName: 'D10', type: _udonarium_dice_symbol__WEBPACK_IMPORTED_MODULE_8__["DiceType"].D10_10TIMES, imagePathPrefix: '100_dice' },
            { menuName: 'D12', diceName: 'D12', type: _udonarium_dice_symbol__WEBPACK_IMPORTED_MODULE_8__["DiceType"].D12, imagePathPrefix: '12_dice' },
            { menuName: 'D20', diceName: 'D20', type: _udonarium_dice_symbol__WEBPACK_IMPORTED_MODULE_8__["DiceType"].D20, imagePathPrefix: '20_dice' },
        ];
        var subMenus = [];
        dices.forEach(function (item) {
            subMenus.push({
                name: item.menuName,
                action: function () {
                    _this.createDiceSymbol(position, item.diceName, item.type, item.imagePathPrefix);
                    _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_12__["SoundEffect"].play(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_12__["PresetSound"].dicePut);
                }
            });
        });
        return { name: 'ダイスを作成', action: null, subActions: subMenus };
    };
    TabletopActionService.prototype.getViewTable = function () {
        var tableSelecter = _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_6__["ObjectStore"].instance.get('tableSelecter');
        return tableSelecter ? tableSelecter.viewTable : null;
    };
    TabletopActionService.ɵfac = function TabletopActionService_Factory(t) { return new (t || TabletopActionService)(); };
    TabletopActionService.ɵprov = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdefineInjectable"]({ token: TabletopActionService, factory: TabletopActionService.ɵfac, providedIn: 'root' });
    return TabletopActionService;
}());

/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵsetClassMetadata"](TabletopActionService, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_1__["Injectable"],
        args: [{
                providedIn: 'root'
            }]
    }], function () { return []; }, null); })();


/***/ }),

/***/ "AHLi":
/*!**********************************************************************!*\
  !*** ./src/app/component/game-character/game-character.component.ts ***!
  \**********************************************************************/
/*! exports provided: GameCharacterComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GameCharacterComponent", function() { return GameCharacterComponent; });
/* harmony import */ var _angular_animations__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/animations */ "R0Ic");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "fXoL");
/* harmony import */ var _udonarium_core_synchronize_object_object_node__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @udonarium/core/synchronize-object/object-node */ "F67Z");
/* harmony import */ var _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @udonarium/core/synchronize-object/object-store */ "hm7o");
/* harmony import */ var _udonarium_core_system__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @udonarium/core/system */ "yNnI");
/* harmony import */ var _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @udonarium/sound-effect */ "veT5");
/* harmony import */ var component_chat_palette_chat_palette_component__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! component/chat-palette/chat-palette.component */ "jC/+");
/* harmony import */ var component_game_character_sheet_game_character_sheet_component__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! component/game-character-sheet/game-character-sheet.component */ "zXSY");
/* harmony import */ var service_context_menu_service__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! service/context-menu.service */ "9FhF");
/* harmony import */ var component_remote_controller_remote_controller_component__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! component/remote-controller/remote-controller.component */ "JKvL");
/* harmony import */ var service_panel_service__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! service/panel.service */ "M9xM");
/* harmony import */ var service_pointer_device_service__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! service/pointer-device.service */ "GPP8");
/* harmony import */ var directive_movable_directive__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! directive/movable.directive */ "+Kyd");
/* harmony import */ var directive_rotable_directive__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! directive/rotable.directive */ "3jYK");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @angular/common */ "ofXK");
/* harmony import */ var component_game_data_element_buff_game_data_element_buff_component__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! component/game-data-element-buff/game-data-element-buff.component */ "JKO1");
/* harmony import */ var pipe_safe_pipe__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! pipe/safe.pipe */ "6HCy");



















var _c0 = ["root"];
var _c1 = function () { return { "border": "solid 6px #FFCC80" }; };
function GameCharacterComponent_div_4_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelement"](0, "div", 19);
} if (rf & 2) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵstyleMap"](_angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpureFunction0"](2, _c1));
} }
var _c2 = function () { return { "border": "solid 6px #A0E0FF" }; };
function GameCharacterComponent_div_5_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelement"](0, "div", 19);
} if (rf & 2) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵstyleMap"](_angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpureFunction0"](2, _c2));
} }
function GameCharacterComponent_div_16_ng_container_1_ng_container_1_ng_container_1_div_1_div_2_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "div", 26);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelement"](1, "div", 27);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
} if (rf & 2) {
    var childElement_r14 = ctx.$implicit;
    var ctx_r12 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](6);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("gameDataElement", childElement_r14)("isEdit", ctx_r12.isEdit)("isPieceMode", true);
} }
function GameCharacterComponent_div_16_ng_container_1_ng_container_1_ng_container_1_div_1_div_4_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "div", 26);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelement"](1, "div", 27);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
} if (rf & 2) {
    var childElement_r15 = ctx.$implicit;
    var ctx_r13 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](6);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("gameDataElement", childElement_r15)("isEdit", ctx_r13.isEdit)("isPieceMode", true);
} }
var _c3 = function (a0) { return { "transform": a0 }; };
function GameCharacterComponent_div_16_ng_container_1_ng_container_1_ng_container_1_div_1_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "div", 22);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](1, "div", 23);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](2, GameCharacterComponent_div_16_ng_container_1_ng_container_1_ng_container_1_div_1_div_2_Template, 2, 3, "div", 24);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](3, "div", 25);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](4, GameCharacterComponent_div_16_ng_container_1_ng_container_1_ng_container_1_div_1_div_4_Template, 2, 3, "div", 24);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
} if (rf & 2) {
    var ctx_r11 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](5);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngStyle", _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpureFunction1"](3, _c3, "translateX(-50%) translateX(" + ctx_r11.size * ctx_r11.gridSize / 2 + "px) translateY(-100%)"));
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngForOf", ctx_r11.gameCharacter.buffDataElement.children);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngForOf", ctx_r11.gameCharacter.buffDataElement.children);
} }
function GameCharacterComponent_div_16_ng_container_1_ng_container_1_ng_container_1_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](1, GameCharacterComponent_div_16_ng_container_1_ng_container_1_ng_container_1_div_1_Template, 5, 5, "div", 21);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var ctx_r10 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", ctx_r10.gameCharacter.buffDataElement);
} }
function GameCharacterComponent_div_16_ng_container_1_ng_container_1_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](1, GameCharacterComponent_div_16_ng_container_1_ng_container_1_ng_container_1_Template, 2, 1, "ng-container", 13);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var child_r9 = ctx.$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", child_r9.children.length > 0);
} }
function GameCharacterComponent_div_16_ng_container_1_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](1, GameCharacterComponent_div_16_ng_container_1_ng_container_1_Template, 2, 1, "ng-container", 20);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var ctx_r7 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngForOf", ctx_r7.gameCharacter.buffDataElement.children);
} }
function GameCharacterComponent_div_16_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](1, GameCharacterComponent_div_16_ng_container_1_Template, 2, 1, "ng-container", 13);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
} if (rf & 2) {
    var ctx_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", ctx_r3.gameCharacter.buffDataElement.children.length == 1);
} }
var _c4 = function (a0) { return { "transform": a0, "background-color": "rgba(255,255,255, 0.6)", "color": "#333", "border": "solid 1px #555" }; };
function GameCharacterComponent_ng_container_17_div_1_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "div", 29);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](1, "div", 30);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](3, "div", 31);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
} if (rf & 2) {
    var ctx_r16 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngStyle", _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpureFunction1"](3, _c4, "translateX(-50%) translateX(" + ctx_r16.size * ctx_r16.gridSize / 2 + "px)"));
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtextInterpolate"](ctx_r16.name);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtextInterpolate"](ctx_r16.name);
} }
function GameCharacterComponent_ng_container_17_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](1, GameCharacterComponent_ng_container_17_div_1_Template, 5, 5, "div", 28);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var ctx_r4 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", 0 < ctx_r4.name.length);
} }
function GameCharacterComponent_ng_container_18_div_1_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "div", 29);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](1, "div", 30);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](3, "div", 31);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
} if (rf & 2) {
    var ctx_r17 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngStyle", _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpureFunction1"](3, _c3, "translateX(-50%) translateX(" + ctx_r17.size * ctx_r17.gridSize / 2 + "px)"));
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtextInterpolate"](ctx_r17.name);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtextInterpolate"](ctx_r17.name);
} }
function GameCharacterComponent_ng_container_18_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](1, GameCharacterComponent_ng_container_18_div_1_Template, 5, 5, "div", 28);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var ctx_r5 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", 0 < ctx_r5.name.length);
} }
function GameCharacterComponent_img_19_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelement"](0, "img", 32);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpipe"](1, "safe");
} if (rf & 2) {
    var ctx_r6 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("src", _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpipeBind2"](1, 1, ctx_r6.imageFile.url, "resourceUrl"), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵsanitizeUrl"]);
} }
var GameCharacterComponent = /** @class */ (function () {
    function GameCharacterComponent(contextMenuService, panelService, changeDetector, pointerDeviceService) {
        this.contextMenuService = contextMenuService;
        this.panelService = panelService;
        this.changeDetector = changeDetector;
        this.pointerDeviceService = pointerDeviceService;
        this.gameCharacter = null;
        this.is3D = false;
        this.gridSize = 50;
        this.movableOption = {};
        this.rotableOption = {};
    }
    Object.defineProperty(GameCharacterComponent.prototype, "name", {
        get: function () { return this.gameCharacter.name; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(GameCharacterComponent.prototype, "size", {
        get: function () { return this.adjustMinBounds(this.gameCharacter.size); },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(GameCharacterComponent.prototype, "imageFile", {
        get: function () { return this.gameCharacter.imageFile; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(GameCharacterComponent.prototype, "rotate", {
        get: function () { return this.gameCharacter.rotate; },
        set: function (rotate) { this.gameCharacter.rotate = rotate; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(GameCharacterComponent.prototype, "roll", {
        get: function () { return this.gameCharacter.roll; },
        set: function (roll) { this.gameCharacter.roll = roll; },
        enumerable: false,
        configurable: true
    });
    GameCharacterComponent.prototype.ngOnInit = function () {
        var _this = this;
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_4__["EventSystem"].register(this)
            .on('UPDATE_GAME_OBJECT', -1000, function (event) {
            var object = _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_3__["ObjectStore"].instance.get(event.data.identifier);
            if (!_this.gameCharacter || !object)
                return;
            if (_this.gameCharacter === object || (object instanceof _udonarium_core_synchronize_object_object_node__WEBPACK_IMPORTED_MODULE_2__["ObjectNode"] && _this.gameCharacter.contains(object))) {
                _this.changeDetector.markForCheck();
            }
        })
            .on('SYNCHRONIZE_FILE_LIST', function (event) {
            _this.changeDetector.markForCheck();
        })
            .on('UPDATE_FILE_RESOURE', -1000, function (event) {
            _this.changeDetector.markForCheck();
        })
            .on('HIGHTLIGHT_TABLETOP_OBJECT', function (event) {
            if (_this.gameCharacter.identifier !== event.data.identifier) {
                return;
            }
            if (_this.gameCharacter.location.name != "table") {
                return;
            }
            console.log("recv focus event to " + _this.gameCharacter.name);
            // アニメーション開始のタイマーが既にあってアニメーション開始前（ごくわずかな間）ならば何もしない
            if (_this.highlightTimer != null) {
                return;
            }
            // アニメーション中であればアニメーションを初期化
            if (_this.rootElementRef.nativeElement.classList.contains('focused')) {
                clearTimeout(_this.unhighlightTimer);
                _this.rootElementRef.nativeElement.classList.remove('focused');
            }
            // アニメーション開始処理タイマー
            _this.highlightTimer = setTimeout(function () {
                _this.highlightTimer = null;
                _this.rootElementRef.nativeElement.classList.add('focused');
            }, 0);
            // アニメーション終了処理タイマー
            _this.unhighlightTimer = setTimeout(function () {
                _this.unhighlightTimer = null;
                _this.rootElementRef.nativeElement.classList.remove('focused');
            }, 1010);
        });
        this.movableOption = {
            tabletopObject: this.gameCharacter,
            transformCssOffset: 'translateZ(1.0px)',
            colideLayers: ['terrain']
        };
        this.rotableOption = {
            tabletopObject: this.gameCharacter
        };
    };
    GameCharacterComponent.prototype.ngAfterViewInit = function () { };
    GameCharacterComponent.prototype.ngOnDestroy = function () {
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_4__["EventSystem"].unregister(this);
    };
    GameCharacterComponent.prototype.onDragstart = function (e) {
        console.log('Dragstart Cancel !!!!');
        e.stopPropagation();
        e.preventDefault();
    };
    GameCharacterComponent.prototype.onContextMenu = function (e) {
        var _this = this;
        e.stopPropagation();
        e.preventDefault();
        if (!this.pointerDeviceService.isAllowedToOpenContextMenu)
            return;
        var position = this.pointerDeviceService.pointers[0];
        this.contextMenuService.open(position, [
            { name: '顯示詳細', action: function () { _this.showDetail(_this.gameCharacter); } },
            { name: '顯示對話組合版', action: function () { _this.showChatPalette(_this.gameCharacter); } },
            { name: '顯示控制板', action: function () { _this.showRemoteController(_this.gameCharacter); } },
            service_context_menu_service__WEBPACK_IMPORTED_MODULE_8__["ContextMenuSeparator"],
            {
                name: '移動至共有倉庫',
                action: function () {
                    _this.gameCharacter.setLocation('common');
                    _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_5__["SoundEffect"].play(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_5__["PresetSound"].piecePut);
                }
            },
            {
                name: '移動至個人倉庫',
                action: function () {
                    _this.gameCharacter.setLocation(_udonarium_core_system__WEBPACK_IMPORTED_MODULE_4__["Network"].peerId);
                    _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_5__["SoundEffect"].play(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_5__["PresetSound"].piecePut);
                }
            },
            {
                name: '移動至墓地',
                action: function () {
                    _this.gameCharacter.setLocation('graveyard');
                    _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_5__["SoundEffect"].play(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_5__["PresetSound"].sweep);
                }
            },
            service_context_menu_service__WEBPACK_IMPORTED_MODULE_8__["ContextMenuSeparator"],
            {
                name: '製作副本',
                action: function () {
                    var cloneObject = _this.gameCharacter.clone();
                    cloneObject.location.x += _this.gridSize;
                    cloneObject.location.y += _this.gridSize;
                    cloneObject.update();
                    _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_5__["SoundEffect"].play(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_5__["PresetSound"].piecePut);
                }
            },
        ], this.name);
    };
    GameCharacterComponent.prototype.onMove = function () {
        _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_5__["SoundEffect"].play(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_5__["PresetSound"].piecePick);
    };
    GameCharacterComponent.prototype.onMoved = function () {
        _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_5__["SoundEffect"].play(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_5__["PresetSound"].piecePut);
    };
    GameCharacterComponent.prototype.adjustMinBounds = function (value, min) {
        if (min === void 0) { min = 0; }
        return value < min ? min : value;
    };
    GameCharacterComponent.prototype.showDetail = function (gameObject) {
        var coordinate = this.pointerDeviceService.pointers[0];
        var title = '角色卡';
        if (gameObject.name.length)
            title += ' - ' + gameObject.name;
        var option = { title: title, left: coordinate.x - 400, top: coordinate.y - 300, width: 800, height: 600 };
        var component = this.panelService.open(component_game_character_sheet_game_character_sheet_component__WEBPACK_IMPORTED_MODULE_7__["GameCharacterSheetComponent"], option);
        component.tabletopObject = gameObject;
    };
    GameCharacterComponent.prototype.showChatPalette = function (gameObject) {
        var coordinate = this.pointerDeviceService.pointers[0];
        var option = { left: coordinate.x - 250, top: coordinate.y - 175, width: 615, height: 350 };
        var component = this.panelService.open(component_chat_palette_chat_palette_component__WEBPACK_IMPORTED_MODULE_6__["ChatPaletteComponent"], option);
        component.character = gameObject;
    };
    GameCharacterComponent.prototype.showRemoteController = function (gameObject) {
        var coordinate = this.pointerDeviceService.pointers[0];
        var option = { left: coordinate.x - 250, top: coordinate.y - 175, width: 700, height: 600 };
        var component = this.panelService.open(component_remote_controller_remote_controller_component__WEBPACK_IMPORTED_MODULE_9__["RemoteControllerComponent"], option);
        component.character = gameObject;
    };
    GameCharacterComponent.ɵfac = function GameCharacterComponent_Factory(t) { return new (t || GameCharacterComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdirectiveInject"](service_context_menu_service__WEBPACK_IMPORTED_MODULE_8__["ContextMenuService"]), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdirectiveInject"](service_panel_service__WEBPACK_IMPORTED_MODULE_10__["PanelService"]), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_1__["ChangeDetectorRef"]), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdirectiveInject"](service_pointer_device_service__WEBPACK_IMPORTED_MODULE_11__["PointerDeviceService"])); };
    GameCharacterComponent.ɵcmp = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdefineComponent"]({ type: GameCharacterComponent, selectors: [["game-character"]], viewQuery: function GameCharacterComponent_Query(rf, ctx) { if (rf & 1) {
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵviewQuery"](_c0, true);
        } if (rf & 2) {
            var _t = void 0;
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵqueryRefresh"](_t = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵloadQuery"]()) && (ctx.rootElementRef = _t.first);
        } }, hostBindings: function GameCharacterComponent_HostBindings(rf, ctx) { if (rf & 1) {
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("dragstart", function GameCharacterComponent_dragstart_HostBindingHandler($event) { return ctx.onDragstart($event); })("contextmenu", function GameCharacterComponent_contextmenu_HostBindingHandler($event) { return ctx.onContextMenu($event); });
        } }, inputs: { gameCharacter: "gameCharacter", is3D: "is3D" }, decls: 27, vars: 24, consts: [["appMovable", "", 1, "component", "is-3d", "is-grab", "is-pointer-events-none", 3, "movable.option", "movable.ondragstart", "movable.ondragend"], ["root", ""], [1, "component-content", "is-3d"], ["appRotable", "", 1, "component-content", "is-3d", "is-pointer-events-auto", 3, "rotable.option", "rotable.ondragstart", "rotable.ondragend"], ["class", "pedestal-inner", 3, "style", 4, "ngIf"], [1, "pedestal-outer"], [1, "pedestal-grab", "rotate-grab"], [1, "pedestal-grab-border"], [1, "material-icons", "of-front"], [1, "material-icons", "of-back"], [1, "upright-transform", "is-fit-width", "is-3d"], ["appRotable", "", 1, "rotate-frame", "is-3d", 3, "rotable.value", "rotable.valueChange", "rotable.ondragstart", "rotable.ondragend"], [1, "rotate-inner", "is-3d"], [4, "ngIf"], ["class", "image", 3, "src", 4, "ngIf"], [1, "grab-group"], [1, "rotate-grab", "rotate-grab-icon", "of-top", 3, "ngStyle"], [1, "material-icons"], [1, "rotate-grab", "rotate-grab-icon", "of-bottom", 3, "ngStyle"], [1, "pedestal-inner"], [4, "ngFor", "ngForOf"], ["style", "", "class", "buff-tag is-nowrap is-buff-background is-3d", 3, "ngStyle", 4, "ngIf"], [1, "buff-tag", "is-nowrap", "is-buff-background", "is-3d", 3, "ngStyle"], [1, "table", "fornt-tag"], ["class", "flex-item", 4, "ngFor", "ngForOf"], [1, "table", "back-tag"], [1, "flex-item"], ["game-data-element-buff", "", 1, "table-row", 3, "gameDataElement", "isEdit", "isPieceMode"], ["class", "name-tag is-nowrap is-black-background is-3d", 3, "ngStyle", 4, "ngIf"], [1, "name-tag", "is-nowrap", "is-black-background", "is-3d", 3, "ngStyle"], [1, "fornt-tag", "has-length-limit", "is-3d"], [1, "back-tag", "has-length-limit", "is-3d"], [1, "image", 3, "src"]], template: function GameCharacterComponent_Template(rf, ctx) { if (rf & 1) {
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "div", 0, 1);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("movable.ondragstart", function GameCharacterComponent_Template_div_movable_ondragstart_0_listener() { return ctx.onMove(); })("movable.ondragend", function GameCharacterComponent_Template_div_movable_ondragend_0_listener() { return ctx.onMoved(); });
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](2, "div", 2);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](3, "div", 3);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("rotable.ondragstart", function GameCharacterComponent_Template_div_rotable_ondragstart_3_listener() { return ctx.onMove(); })("rotable.ondragend", function GameCharacterComponent_Template_div_rotable_ondragend_3_listener() { return ctx.onMoved(); });
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](4, GameCharacterComponent_div_4_Template, 1, 3, "div", 4);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](5, GameCharacterComponent_div_5_Template, 1, 3, "div", 4);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelement"](6, "div", 5);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](7, "div", 6);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](8, "div", 7);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](9, "div", 8);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](10, "autorenew");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](11, "div", 9);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](12, "autorenew");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](13, "div", 10);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](14, "div", 11);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("rotable.valueChange", function GameCharacterComponent_Template_div_rotable_valueChange_14_listener($event) { return ctx.roll = $event; })("rotable.ondragstart", function GameCharacterComponent_Template_div_rotable_ondragstart_14_listener() { return ctx.onMove(); })("rotable.ondragend", function GameCharacterComponent_Template_div_rotable_ondragend_14_listener() { return ctx.onMoved(); });
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](15, "div", 12);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](16, GameCharacterComponent_div_16_Template, 2, 1, "div", 13);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](17, GameCharacterComponent_ng_container_17_Template, 2, 1, "ng-container", 13);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](18, GameCharacterComponent_ng_container_18_Template, 2, 1, "ng-container", 13);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](19, GameCharacterComponent_img_19_Template, 2, 4, "img", 14);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](20, "div", 15);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](21, "div", 16);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](22, "i", 17);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](23, "autorenew");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](24, "div", 18);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](25, "i", 17);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](26, "autorenew");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
        } if (rf & 2) {
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵstyleProp"]("width", ctx.size * ctx.gridSize, "px")("height", ctx.size * ctx.gridSize, "px");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("movable.option", ctx.movableOption);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](2);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("@bounceInOut", "in");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("rotable.option", ctx.rotableOption);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", !ctx.gameCharacter.hideInventory);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", ctx.gameCharacter.hideInventory);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](9);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵstyleProp"]("width", ctx.size * ctx.gridSize, "px")("height", ctx.size * ctx.gridSize, "px");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("rotable.value", ctx.roll);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](2);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", ctx.gameCharacter.buffDataElement);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", ctx.gameCharacter.nonTalkFlag);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", !ctx.gameCharacter.nonTalkFlag);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", 0 < ctx.imageFile.url.length);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](2);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngStyle", _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpureFunction1"](20, _c3, "translateX(-50%) translateX(" + ctx.size * ctx.gridSize / 2 + "px)"));
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](3);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngStyle", _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpureFunction1"](22, _c3, "translateX(-50%) translateX(" + ctx.size * ctx.gridSize / 2 + "px"));
        } }, directives: [directive_movable_directive__WEBPACK_IMPORTED_MODULE_12__["MovableDirective"], directive_rotable_directive__WEBPACK_IMPORTED_MODULE_13__["RotableDirective"], _angular_common__WEBPACK_IMPORTED_MODULE_14__["NgIf"], _angular_common__WEBPACK_IMPORTED_MODULE_14__["NgStyle"], _angular_common__WEBPACK_IMPORTED_MODULE_14__["NgForOf"], component_game_data_element_buff_game_data_element_buff_component__WEBPACK_IMPORTED_MODULE_15__["GameDataElementBuffComponent"]], pipes: [pipe_safe_pipe__WEBPACK_IMPORTED_MODULE_16__["SafePipe"]], styles: [".is-grab[_ngcontent-%COMP%] {\r\n  cursor: grab;\r\n}\r\n\r\n.is-grabbing[_ngcontent-%COMP%] {\r\n  cursor: grabbing;\r\n}\r\n\r\n.is-3d[_ngcontent-%COMP%] {\r\n  transform-style: preserve-3d;\r\n}\r\n\r\n.is-transition[_ngcontent-%COMP%] {\r\n  transition: transform 132ms linear;\r\n}\r\n\r\n.is-pointer-events-none[_ngcontent-%COMP%] {\r\n  pointer-events: none;\r\n}\r\n\r\n.is-pointer-events-auto[_ngcontent-%COMP%] {\r\n  pointer-events: auto;\r\n}\r\n\r\n.component[_ngcontent-%COMP%] {\r\n  position: absolute;\r\n  height: 50px;\r\n  width: 50px;\r\n  -webkit-user-select: none;\r\n  user-select: none;\r\n  -moz-user-drag: none;\r\n  -webkit-user-drag: none;\r\n}\r\n\r\n.component-content[_ngcontent-%COMP%] {\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n\r\n.pedestal-grab[_ngcontent-%COMP%] {\r\n  z-index: -1;\r\n  -webkit-backface-visibility: hidden;\r\n          backface-visibility: hidden;\r\n  position: absolute;\r\n  top: -22px;\r\n  left: -6px;\r\n  height: calc(100% + 44px);\r\n  width: calc(100% + 12px);\r\n  cursor: default;\r\n  border-radius: 37px;\r\n}\r\n\r\n.pedestal-grab-border[_ngcontent-%COMP%] {\r\n  pointer-events: none;\r\n  width: 100%;\r\n  height: 100%;\r\n  box-sizing: border-box;\r\n  border-top: solid 28px #999;\r\n  border-left: solid 12px #999;\r\n  border-right: solid 12px #CCC;\r\n  border-bottom: solid 28px #CCC;\r\n  border-radius: 37px;\r\n}\r\n\r\n.pedestal-inner[_ngcontent-%COMP%] {\r\n  -webkit-backface-visibility: hidden;\r\n          backface-visibility: hidden;\r\n  position: absolute;\r\n  height: 100%;\r\n  width: 100%;\r\n  box-sizing: border-box;\r\n  border: solid 6px #FFCC80;\r\n  border-radius: 25px;\r\n}\r\n\r\n.pedestal-outer[_ngcontent-%COMP%] {\r\n  -webkit-backface-visibility: hidden;\r\n          backface-visibility: hidden;\r\n  position: absolute;\r\n  height: 100%;\r\n  width: 100%;\r\n  box-sizing: border-box;\r\n  border: solid 2px #212121;\r\n  border-radius: 25px;\r\n}\r\n\r\n.upright-transform[_ngcontent-%COMP%] {\r\n  position: absolute;\r\n  bottom: 0;\r\n  left: 0;\r\n  right: 0;\r\n  transform: rotateX(-90deg) translateY(-50%);\r\n}\r\n\r\n.is-fit-width[_ngcontent-%COMP%] {\r\n  height: auto;\r\n  width: 100%;\r\n}\r\n\r\n.fill-frame[_ngcontent-%COMP%] {\r\n  position: absolute;\r\n  bottom: 0;\r\n  left: 0;\r\n  right: 0;\r\n}\r\n\r\n.image[_ngcontent-%COMP%] {\r\n  bottom: 0;\r\n  left: 0;\r\n  right: 0;\r\n  margin: auto;\r\n\r\n  width: 100%;\r\n  height: auto;\r\n  vertical-align: bottom;\r\n}\r\n\r\n\r\n\r\n.buff-tag[_ngcontent-%COMP%] {\r\n  box-sizing: border-box;\r\n  font-size: 12px;\r\n  padding: 3px 9px;\r\n\r\n  border: 1px #222 solid; \r\n  border-radius: 12px;\r\n  position: absolute;\r\n  margin: auto;\r\n\r\n  top: -35px;\r\n\r\n}\r\n\r\n.is-buff-background[_ngcontent-%COMP%] {\r\n  color: #222;\r\n\r\n\r\n\r\n   background-color: rgba(240,229,215, 0.8);\r\n\r\n}\r\n\r\n\r\n\r\n.name-tag[_ngcontent-%COMP%] {\r\n  box-sizing: border-box;\r\n  font-size: 15px;\r\n  padding: 3px 9px;\r\n  border-radius: 24px;\r\n  position: absolute;\r\n  top: -30px;\r\n}\r\n\r\n.rotate-frame[_ngcontent-%COMP%] {\r\n  bottom: 0;\r\n  left: 0;\r\n  right: 0;\r\n}\r\n\r\n.rotate-inner[_ngcontent-%COMP%] {\r\n  position: absolute;\r\n  bottom: 0;\r\n  left: 0;\r\n  right: 0;\r\n\r\n  width: 100%;\r\n  height: auto;\r\n}\r\n\r\n.is-nowrap[_ngcontent-%COMP%] {\r\n  white-space: nowrap;\r\n}\r\n\r\n.is-black-background[_ngcontent-%COMP%] {\r\n  color: #CCC;\r\n  background-color: rgba(30, 30, 30, 0.8);\r\n}\r\n\r\n.fornt-tag[_ngcontent-%COMP%] {\r\n -webkit-backface-visibility: hidden;\r\n         backface-visibility: hidden;\r\n}\r\n\r\n.back-tag[_ngcontent-%COMP%] {\r\n  position: absolute;\r\n  top: 3px;\r\n  -webkit-backface-visibility: hidden;\r\n          backface-visibility: hidden;\r\n  transform: rotateY(-180deg);\r\n}\r\n\r\n.has-length-limit[_ngcontent-%COMP%] {\r\n  overflow: hidden;\r\n  white-space: nowrap;\r\n  text-overflow: ellipsis;\r\n  max-width: 24em;\r\n}\r\n\r\n.rotate-grab-icon[_ngcontent-%COMP%] {\r\n  position: absolute;\r\n  width: 28px;\r\n  height: 28px;\r\n  box-sizing: border-box;\r\n  cursor: -moz-default;\r\n  cursor: -webkit-default;\r\n  cursor: default;\r\n  z-index: 1;\r\n  padding: 2px;\r\n  background-color: #CCCCCC;\r\n  border-radius: 100%;\r\n  color: #444;\r\n  font-size: 8px;\r\n}\r\n\r\n.of-top[_ngcontent-%COMP%] {\r\n  top: -42px;\r\n}\r\n\r\n.of-bottom[_ngcontent-%COMP%] {\r\n  bottom: -30px;\r\n}\r\n\r\n.of-front[_ngcontent-%COMP%] {\r\n  position: absolute;\r\n  width: 24px;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  margin: auto;\r\n  color: #444;\r\n}\r\n\r\n.of-back[_ngcontent-%COMP%] {\r\n  position: absolute;\r\n  width: 24px;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  margin: auto;\r\n  color: #444;\r\n}\r\n\r\n.rotate-grab[_ngcontent-%COMP%] {\r\n  opacity: 0;\r\n}\r\n\r\n.component[_ngcontent-%COMP%]:hover   .rotate-grab[_ngcontent-%COMP%] {\r\n  opacity: 0.5;\r\n}\r\n\r\n.component[_ngcontent-%COMP%]:active   .rotate-grab[_ngcontent-%COMP%] {\r\n  opacity: 0;\r\n}\r\n\r\n.component[_ngcontent-%COMP%]   .rotate-grab[_ngcontent-%COMP%]:hover, .component[_ngcontent-%COMP%]   .rotate-grab[_ngcontent-%COMP%]:active {\r\n  opacity: 1;\r\n}\r\n\r\n.material-icons[_ngcontent-%COMP%] {\r\n  display: none;\r\n}\r\n\r\n.component[_ngcontent-%COMP%]:hover   .material-icons[_ngcontent-%COMP%], .component[_ngcontent-%COMP%]:active   .material-icons[_ngcontent-%COMP%] {\r\n  display: inline;\r\n}\r\n\r\n.component.focused[_ngcontent-%COMP%] {\r\n  animation-name: focused;\r\n  animation-timing-function: ease;\r\n  animation-duration: 1s;\r\n}\r\n\r\n@keyframes focused {\r\n  0% { box-shadow: none; }\r\n  50% { box-shadow:\r\n          0px 0px 10px 5px #ff0,\r\n          inset 0px 0px 10px 5px #ff0; }\r\n  100% { box-shadow: none; }\r\n}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImdhbWUtY2hhcmFjdGVyLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFHRSxZQUFZO0FBQ2Q7O0FBRUE7RUFHRSxnQkFBZ0I7QUFDbEI7O0FBRUE7RUFFRSw0QkFBNEI7QUFDOUI7O0FBRUE7RUFFRSxrQ0FBa0M7QUFDcEM7O0FBRUE7RUFDRSxvQkFBb0I7QUFDdEI7O0FBRUE7RUFDRSxvQkFBb0I7QUFDdEI7O0FBRUE7RUFDRSxrQkFBa0I7RUFDbEIsWUFBWTtFQUNaLFdBQVc7RUFHWCx5QkFBeUI7RUFDekIsaUJBQWlCO0VBQ2pCLG9CQUFvQjtFQUNwQix1QkFBdUI7QUFDekI7O0FBRUE7RUFDRSxXQUFXO0VBQ1gsWUFBWTtBQUNkOztBQUVBO0VBQ0UsV0FBVztFQUNYLG1DQUEyQjtVQUEzQiwyQkFBMkI7RUFDM0Isa0JBQWtCO0VBQ2xCLFVBQVU7RUFDVixVQUFVO0VBQ1YseUJBQXlCO0VBQ3pCLHdCQUF3QjtFQUN4QixlQUFlO0VBQ2YsbUJBQW1CO0FBQ3JCOztBQUVBO0VBQ0Usb0JBQW9CO0VBQ3BCLFdBQVc7RUFDWCxZQUFZO0VBQ1osc0JBQXNCO0VBQ3RCLDJCQUEyQjtFQUMzQiw0QkFBNEI7RUFDNUIsNkJBQTZCO0VBQzdCLDhCQUE4QjtFQUM5QixtQkFBbUI7QUFDckI7O0FBRUE7RUFDRSxtQ0FBMkI7VUFBM0IsMkJBQTJCO0VBQzNCLGtCQUFrQjtFQUNsQixZQUFZO0VBQ1osV0FBVztFQUNYLHNCQUFzQjtFQUN0Qix5QkFBeUI7RUFDekIsbUJBQW1CO0FBQ3JCOztBQUVBO0VBQ0UsbUNBQTJCO1VBQTNCLDJCQUEyQjtFQUMzQixrQkFBa0I7RUFDbEIsWUFBWTtFQUNaLFdBQVc7RUFDWCxzQkFBc0I7RUFDdEIseUJBQXlCO0VBQ3pCLG1CQUFtQjtBQUNyQjs7QUFFQTtFQUNFLGtCQUFrQjtFQUNsQixTQUFTO0VBQ1QsT0FBTztFQUNQLFFBQVE7RUFDUiwyQ0FBMkM7QUFDN0M7O0FBRUE7RUFDRSxZQUFZO0VBQ1osV0FBVztBQUNiOztBQUVBO0VBQ0Usa0JBQWtCO0VBQ2xCLFNBQVM7RUFDVCxPQUFPO0VBQ1AsUUFBUTtBQUNWOztBQUVBO0VBQ0UsU0FBUztFQUNULE9BQU87RUFDUCxRQUFRO0VBQ1IsWUFBWTs7RUFFWixXQUFXO0VBQ1gsWUFBWTtFQUNaLHNCQUFzQjtBQUN4Qjs7QUFDQSxVQUFVOztBQUNWO0VBQ0Usc0JBQXNCO0VBQ3RCLGVBQWU7RUFDZixnQkFBZ0I7QUFDbEIsc0JBQXNCO0VBQ3BCLHNCQUFzQjtFQUN0QixtQkFBbUI7RUFDbkIsa0JBQWtCO0VBQ2xCLFlBQVk7O0VBRVosVUFBVTs7QUFFWjs7QUFFQTtFQUNFLFdBQVc7QUFDYiw4Q0FBOEM7QUFDOUMsOENBQThDOztHQUUzQyx3Q0FBd0M7O0FBRTNDOztBQUVBLEdBQUc7O0FBQ0g7RUFDRSxzQkFBc0I7RUFDdEIsZUFBZTtFQUNmLGdCQUFnQjtFQUNoQixtQkFBbUI7RUFDbkIsa0JBQWtCO0VBQ2xCLFVBQVU7QUFDWjs7QUFFQTtFQUNFLFNBQVM7RUFDVCxPQUFPO0VBQ1AsUUFBUTtBQUNWOztBQUVBO0VBQ0Usa0JBQWtCO0VBQ2xCLFNBQVM7RUFDVCxPQUFPO0VBQ1AsUUFBUTs7RUFFUixXQUFXO0VBQ1gsWUFBWTtBQUNkOztBQUVBO0VBQ0UsbUJBQW1CO0FBQ3JCOztBQUVBO0VBQ0UsV0FBVztFQUNYLHVDQUF1QztBQUN6Qzs7QUFFQTtDQUNDLG1DQUEyQjtTQUEzQiwyQkFBMkI7QUFDNUI7O0FBRUE7RUFDRSxrQkFBa0I7RUFDbEIsUUFBUTtFQUNSLG1DQUEyQjtVQUEzQiwyQkFBMkI7RUFDM0IsMkJBQTJCO0FBQzdCOztBQUVBO0VBQ0UsZ0JBQWdCO0VBQ2hCLG1CQUFtQjtFQUNuQix1QkFBdUI7RUFDdkIsZUFBZTtBQUNqQjs7QUFFQTtFQUNFLGtCQUFrQjtFQUNsQixXQUFXO0VBQ1gsWUFBWTtFQUNaLHNCQUFzQjtFQUN0QixvQkFBb0I7RUFDcEIsdUJBQXVCO0VBQ3ZCLGVBQWU7RUFDZixVQUFVO0VBQ1YsWUFBWTtFQUNaLHlCQUF5QjtFQUN6QixtQkFBbUI7RUFDbkIsV0FBVztFQUNYLGNBQWM7QUFDaEI7O0FBRUE7RUFDRSxVQUFVO0FBQ1o7O0FBRUE7RUFDRSxhQUFhO0FBQ2Y7O0FBRUE7RUFDRSxrQkFBa0I7RUFDbEIsV0FBVztFQUNYLE9BQU87RUFDUCxRQUFRO0VBQ1IsU0FBUztFQUNULFlBQVk7RUFDWixXQUFXO0FBQ2I7O0FBRUE7RUFDRSxrQkFBa0I7RUFDbEIsV0FBVztFQUNYLE1BQU07RUFDTixPQUFPO0VBQ1AsUUFBUTtFQUNSLFlBQVk7RUFDWixXQUFXO0FBQ2I7O0FBRUE7RUFDRSxVQUFVO0FBQ1o7O0FBRUE7RUFDRSxZQUFZO0FBQ2Q7O0FBRUE7RUFDRSxVQUFVO0FBQ1o7O0FBRUE7RUFDRSxVQUFVO0FBQ1o7O0FBRUE7RUFDRSxhQUFhO0FBQ2Y7O0FBRUE7RUFDRSxlQUFlO0FBQ2pCOztBQUVBO0VBQ0UsdUJBQXVCO0VBQ3ZCLCtCQUErQjtFQUMvQixzQkFBc0I7QUFDeEI7O0FBRUE7RUFDRSxLQUFLLGdCQUFnQixFQUFFO0VBQ3ZCLE1BQU07O3FDQUU2QixFQUFFO0VBQ3JDLE9BQU8sZ0JBQWdCLEVBQUU7QUFDM0IiLCJmaWxlIjoiZ2FtZS1jaGFyYWN0ZXIuY29tcG9uZW50LmNzcyIsInNvdXJjZXNDb250ZW50IjpbIi5pcy1ncmFiIHtcclxuICBjdXJzb3I6IC1tb3otZ3JhYjtcclxuICBjdXJzb3I6IC13ZWJraXQtZ3JhYjtcclxuICBjdXJzb3I6IGdyYWI7XHJcbn1cclxuXHJcbi5pcy1ncmFiYmluZyB7XHJcbiAgY3Vyc29yOiAtbW96LWdyYWJiaW5nO1xyXG4gIGN1cnNvcjogLXdlYmtpdC1ncmFiYmluZztcclxuICBjdXJzb3I6IGdyYWJiaW5nO1xyXG59XHJcblxyXG4uaXMtM2Qge1xyXG4gIC13ZWJraXQtdHJhbnNmb3JtLXN0eWxlOiBwcmVzZXJ2ZS0zZDtcclxuICB0cmFuc2Zvcm0tc3R5bGU6IHByZXNlcnZlLTNkO1xyXG59XHJcblxyXG4uaXMtdHJhbnNpdGlvbiB7XHJcbiAgLXdlYmtpdC10cmFuc2l0aW9uOiAtd2Via2l0LXRyYW5zZm9ybSAxMzJtcyBsaW5lYXI7XHJcbiAgdHJhbnNpdGlvbjogdHJhbnNmb3JtIDEzMm1zIGxpbmVhcjtcclxufVxyXG5cclxuLmlzLXBvaW50ZXItZXZlbnRzLW5vbmUge1xyXG4gIHBvaW50ZXItZXZlbnRzOiBub25lO1xyXG59XHJcblxyXG4uaXMtcG9pbnRlci1ldmVudHMtYXV0byB7XHJcbiAgcG9pbnRlci1ldmVudHM6IGF1dG87XHJcbn1cclxuXHJcbi5jb21wb25lbnQge1xyXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcclxuICBoZWlnaHQ6IDUwcHg7XHJcbiAgd2lkdGg6IDUwcHg7XHJcblxyXG4gIC1tb3otdXNlci1zZWxlY3Q6IG5vbmU7XHJcbiAgLXdlYmtpdC11c2VyLXNlbGVjdDogbm9uZTtcclxuICB1c2VyLXNlbGVjdDogbm9uZTtcclxuICAtbW96LXVzZXItZHJhZzogbm9uZTtcclxuICAtd2Via2l0LXVzZXItZHJhZzogbm9uZTtcclxufVxyXG5cclxuLmNvbXBvbmVudC1jb250ZW50IHtcclxuICB3aWR0aDogMTAwJTtcclxuICBoZWlnaHQ6IDEwMCU7XHJcbn1cclxuXHJcbi5wZWRlc3RhbC1ncmFiIHtcclxuICB6LWluZGV4OiAtMTtcclxuICBiYWNrZmFjZS12aXNpYmlsaXR5OiBoaWRkZW47XHJcbiAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gIHRvcDogLTIycHg7XHJcbiAgbGVmdDogLTZweDtcclxuICBoZWlnaHQ6IGNhbGMoMTAwJSArIDQ0cHgpO1xyXG4gIHdpZHRoOiBjYWxjKDEwMCUgKyAxMnB4KTtcclxuICBjdXJzb3I6IGRlZmF1bHQ7XHJcbiAgYm9yZGVyLXJhZGl1czogMzdweDtcclxufVxyXG5cclxuLnBlZGVzdGFsLWdyYWItYm9yZGVyIHtcclxuICBwb2ludGVyLWV2ZW50czogbm9uZTtcclxuICB3aWR0aDogMTAwJTtcclxuICBoZWlnaHQ6IDEwMCU7XHJcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcclxuICBib3JkZXItdG9wOiBzb2xpZCAyOHB4ICM5OTk7XHJcbiAgYm9yZGVyLWxlZnQ6IHNvbGlkIDEycHggIzk5OTtcclxuICBib3JkZXItcmlnaHQ6IHNvbGlkIDEycHggI0NDQztcclxuICBib3JkZXItYm90dG9tOiBzb2xpZCAyOHB4ICNDQ0M7XHJcbiAgYm9yZGVyLXJhZGl1czogMzdweDtcclxufVxyXG5cclxuLnBlZGVzdGFsLWlubmVyIHtcclxuICBiYWNrZmFjZS12aXNpYmlsaXR5OiBoaWRkZW47XHJcbiAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gIGhlaWdodDogMTAwJTtcclxuICB3aWR0aDogMTAwJTtcclxuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xyXG4gIGJvcmRlcjogc29saWQgNnB4ICNGRkNDODA7XHJcbiAgYm9yZGVyLXJhZGl1czogMjVweDtcclxufVxyXG5cclxuLnBlZGVzdGFsLW91dGVyIHtcclxuICBiYWNrZmFjZS12aXNpYmlsaXR5OiBoaWRkZW47XHJcbiAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gIGhlaWdodDogMTAwJTtcclxuICB3aWR0aDogMTAwJTtcclxuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xyXG4gIGJvcmRlcjogc29saWQgMnB4ICMyMTIxMjE7XHJcbiAgYm9yZGVyLXJhZGl1czogMjVweDtcclxufVxyXG5cclxuLnVwcmlnaHQtdHJhbnNmb3JtIHtcclxuICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgYm90dG9tOiAwO1xyXG4gIGxlZnQ6IDA7XHJcbiAgcmlnaHQ6IDA7XHJcbiAgdHJhbnNmb3JtOiByb3RhdGVYKC05MGRlZykgdHJhbnNsYXRlWSgtNTAlKTtcclxufVxyXG5cclxuLmlzLWZpdC13aWR0aCB7XHJcbiAgaGVpZ2h0OiBhdXRvO1xyXG4gIHdpZHRoOiAxMDAlO1xyXG59XHJcblxyXG4uZmlsbC1mcmFtZSB7XHJcbiAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gIGJvdHRvbTogMDtcclxuICBsZWZ0OiAwO1xyXG4gIHJpZ2h0OiAwO1xyXG59XHJcblxyXG4uaW1hZ2Uge1xyXG4gIGJvdHRvbTogMDtcclxuICBsZWZ0OiAwO1xyXG4gIHJpZ2h0OiAwO1xyXG4gIG1hcmdpbjogYXV0bztcclxuXHJcbiAgd2lkdGg6IDEwMCU7XHJcbiAgaGVpZ2h0OiBhdXRvO1xyXG4gIHZlcnRpY2FsLWFsaWduOiBib3R0b207XHJcbn1cclxuLyplbnR5dV81Ki9cclxuLmJ1ZmYtdGFnIHtcclxuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xyXG4gIGZvbnQtc2l6ZTogMTJweDtcclxuICBwYWRkaW5nOiAzcHggOXB4O1xyXG4vKiAgYm9yZGVyOjEwcHggIzY2NjsqL1xyXG4gIGJvcmRlcjogMXB4ICMyMjIgc29saWQ7IFxyXG4gIGJvcmRlci1yYWRpdXM6IDEycHg7XHJcbiAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gIG1hcmdpbjogYXV0bztcclxuXHJcbiAgdG9wOiAtMzVweDtcclxuXHJcbn1cclxuXHJcbi5pcy1idWZmLWJhY2tncm91bmQge1xyXG4gIGNvbG9yOiAjMjIyO1xyXG4vKiAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgxMDAsIDEwMCwgMCwgMC41KTsqL1xyXG4vKiAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgyNDAsMjE4LDE4OSwgMC44KTsqL1xyXG5cclxuICAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgyNDAsMjI5LDIxNSwgMC44KTtcclxuXHJcbn1cclxuXHJcbi8qKi9cclxuLm5hbWUtdGFnIHtcclxuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xyXG4gIGZvbnQtc2l6ZTogMTVweDtcclxuICBwYWRkaW5nOiAzcHggOXB4O1xyXG4gIGJvcmRlci1yYWRpdXM6IDI0cHg7XHJcbiAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gIHRvcDogLTMwcHg7XHJcbn1cclxuXHJcbi5yb3RhdGUtZnJhbWUge1xyXG4gIGJvdHRvbTogMDtcclxuICBsZWZ0OiAwO1xyXG4gIHJpZ2h0OiAwO1xyXG59XHJcblxyXG4ucm90YXRlLWlubmVyIHtcclxuICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgYm90dG9tOiAwO1xyXG4gIGxlZnQ6IDA7XHJcbiAgcmlnaHQ6IDA7XHJcblxyXG4gIHdpZHRoOiAxMDAlO1xyXG4gIGhlaWdodDogYXV0bztcclxufVxyXG5cclxuLmlzLW5vd3JhcCB7XHJcbiAgd2hpdGUtc3BhY2U6IG5vd3JhcDtcclxufVxyXG5cclxuLmlzLWJsYWNrLWJhY2tncm91bmQge1xyXG4gIGNvbG9yOiAjQ0NDO1xyXG4gIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMzAsIDMwLCAzMCwgMC44KTtcclxufVxyXG5cclxuLmZvcm50LXRhZyB7XHJcbiBiYWNrZmFjZS12aXNpYmlsaXR5OiBoaWRkZW47XHJcbn1cclxuXHJcbi5iYWNrLXRhZyB7XHJcbiAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gIHRvcDogM3B4O1xyXG4gIGJhY2tmYWNlLXZpc2liaWxpdHk6IGhpZGRlbjtcclxuICB0cmFuc2Zvcm06IHJvdGF0ZVkoLTE4MGRlZyk7XHJcbn1cclxuXHJcbi5oYXMtbGVuZ3RoLWxpbWl0IHtcclxuICBvdmVyZmxvdzogaGlkZGVuO1xyXG4gIHdoaXRlLXNwYWNlOiBub3dyYXA7XHJcbiAgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7XHJcbiAgbWF4LXdpZHRoOiAyNGVtO1xyXG59XHJcblxyXG4ucm90YXRlLWdyYWItaWNvbiB7XHJcbiAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gIHdpZHRoOiAyOHB4O1xyXG4gIGhlaWdodDogMjhweDtcclxuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xyXG4gIGN1cnNvcjogLW1vei1kZWZhdWx0O1xyXG4gIGN1cnNvcjogLXdlYmtpdC1kZWZhdWx0O1xyXG4gIGN1cnNvcjogZGVmYXVsdDtcclxuICB6LWluZGV4OiAxO1xyXG4gIHBhZGRpbmc6IDJweDtcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiAjQ0NDQ0NDO1xyXG4gIGJvcmRlci1yYWRpdXM6IDEwMCU7XHJcbiAgY29sb3I6ICM0NDQ7XHJcbiAgZm9udC1zaXplOiA4cHg7XHJcbn1cclxuXHJcbi5vZi10b3Age1xyXG4gIHRvcDogLTQycHg7XHJcbn1cclxuXHJcbi5vZi1ib3R0b20ge1xyXG4gIGJvdHRvbTogLTMwcHg7XHJcbn1cclxuXHJcbi5vZi1mcm9udCB7XHJcbiAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gIHdpZHRoOiAyNHB4O1xyXG4gIGxlZnQ6IDA7XHJcbiAgcmlnaHQ6IDA7XHJcbiAgYm90dG9tOiAwO1xyXG4gIG1hcmdpbjogYXV0bztcclxuICBjb2xvcjogIzQ0NDtcclxufVxyXG5cclxuLm9mLWJhY2sge1xyXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcclxuICB3aWR0aDogMjRweDtcclxuICB0b3A6IDA7XHJcbiAgbGVmdDogMDtcclxuICByaWdodDogMDtcclxuICBtYXJnaW46IGF1dG87XHJcbiAgY29sb3I6ICM0NDQ7XHJcbn1cclxuXHJcbi5yb3RhdGUtZ3JhYiB7XHJcbiAgb3BhY2l0eTogMDtcclxufVxyXG5cclxuLmNvbXBvbmVudDpob3ZlciAucm90YXRlLWdyYWIge1xyXG4gIG9wYWNpdHk6IDAuNTtcclxufVxyXG5cclxuLmNvbXBvbmVudDphY3RpdmUgLnJvdGF0ZS1ncmFiIHtcclxuICBvcGFjaXR5OiAwO1xyXG59XHJcblxyXG4uY29tcG9uZW50IC5yb3RhdGUtZ3JhYjpob3ZlciwgLmNvbXBvbmVudCAucm90YXRlLWdyYWI6YWN0aXZlIHtcclxuICBvcGFjaXR5OiAxO1xyXG59XHJcblxyXG4ubWF0ZXJpYWwtaWNvbnMge1xyXG4gIGRpc3BsYXk6IG5vbmU7XHJcbn1cclxuXHJcbi5jb21wb25lbnQ6aG92ZXIgLm1hdGVyaWFsLWljb25zLCAuY29tcG9uZW50OmFjdGl2ZSAubWF0ZXJpYWwtaWNvbnMge1xyXG4gIGRpc3BsYXk6IGlubGluZTtcclxufVxyXG5cclxuLmNvbXBvbmVudC5mb2N1c2VkIHtcclxuICBhbmltYXRpb24tbmFtZTogZm9jdXNlZDtcclxuICBhbmltYXRpb24tdGltaW5nLWZ1bmN0aW9uOiBlYXNlO1xyXG4gIGFuaW1hdGlvbi1kdXJhdGlvbjogMXM7XHJcbn1cclxuXHJcbkBrZXlmcmFtZXMgZm9jdXNlZCB7XHJcbiAgMCUgeyBib3gtc2hhZG93OiBub25lOyB9XHJcbiAgNTAlIHsgYm94LXNoYWRvdzpcclxuICAgICAgICAgIDBweCAwcHggMTBweCA1cHggI2ZmMCxcclxuICAgICAgICAgIGluc2V0IDBweCAwcHggMTBweCA1cHggI2ZmMDsgfVxyXG4gIDEwMCUgeyBib3gtc2hhZG93OiBub25lOyB9XHJcbn1cclxuIl19 */"], data: { animation: [
                Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["trigger"])('bounceInOut', [
                    Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["transition"])('void => *', [
                        Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["animate"])('600ms ease', Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["keyframes"])([
                            Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])({ transform: 'scale3d(0, 0, 0)', offset: 0 }),
                            Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])({ transform: 'scale3d(1.5, 1.5, 1.5)', offset: 0.5 }),
                            Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])({ transform: 'scale3d(0.75, 0.75, 0.75)', offset: 0.75 }),
                            Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])({ transform: 'scale3d(1.125, 1.125, 1.125)', offset: 0.875 }),
                            Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])({ transform: 'scale3d(1.0, 1.0, 1.0)', offset: 1.0 })
                        ]))
                    ]),
                    Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["transition"])('* => void', [
                        Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["animate"])(100, Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])({ transform: 'scale3d(0, 0, 0)' }))
                    ])
                ])
            ] }, changeDetection: 0 });
    return GameCharacterComponent;
}());

/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵsetClassMetadata"](GameCharacterComponent, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_1__["Component"],
        args: [{
                selector: 'game-character',
                templateUrl: './game-character.component.html',
                styleUrls: ['./game-character.component.css'],
                changeDetection: _angular_core__WEBPACK_IMPORTED_MODULE_1__["ChangeDetectionStrategy"].OnPush,
                animations: [
                    Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["trigger"])('bounceInOut', [
                        Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["transition"])('void => *', [
                            Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["animate"])('600ms ease', Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["keyframes"])([
                                Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])({ transform: 'scale3d(0, 0, 0)', offset: 0 }),
                                Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])({ transform: 'scale3d(1.5, 1.5, 1.5)', offset: 0.5 }),
                                Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])({ transform: 'scale3d(0.75, 0.75, 0.75)', offset: 0.75 }),
                                Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])({ transform: 'scale3d(1.125, 1.125, 1.125)', offset: 0.875 }),
                                Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])({ transform: 'scale3d(1.0, 1.0, 1.0)', offset: 1.0 })
                            ]))
                        ]),
                        Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["transition"])('* => void', [
                            Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["animate"])(100, Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])({ transform: 'scale3d(0, 0, 0)' }))
                        ])
                    ])
                ]
            }]
    }], function () { return [{ type: service_context_menu_service__WEBPACK_IMPORTED_MODULE_8__["ContextMenuService"] }, { type: service_panel_service__WEBPACK_IMPORTED_MODULE_10__["PanelService"] }, { type: _angular_core__WEBPACK_IMPORTED_MODULE_1__["ChangeDetectorRef"] }, { type: service_pointer_device_service__WEBPACK_IMPORTED_MODULE_11__["PointerDeviceService"] }]; }, { gameCharacter: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_1__["Input"]
        }], is3D: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_1__["Input"]
        }], rootElementRef: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_1__["ViewChild"],
            args: ['root']
        }], onDragstart: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_1__["HostListener"],
            args: ['dragstart', ['$event']]
        }], onContextMenu: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_1__["HostListener"],
            args: ['contextmenu', ['$event']]
        }] }); })();


/***/ }),

/***/ "AsCv":
/*!************************************************************!*\
  !*** ./src/app/component/text-view/text-view.component.ts ***!
  \************************************************************/
/*! exports provided: TextViewComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TextViewComponent", function() { return TextViewComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "fXoL");
/* harmony import */ var service_panel_service__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! service/panel.service */ "M9xM");
/* harmony import */ var service_modal_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! service/modal.service */ "CE6K");




var TextViewComponent = /** @class */ (function () {
    function TextViewComponent(panelService, modalService) {
        this.panelService = panelService;
        this.modalService = modalService;
        this.text = '';
        this.title = '';
    }
    TextViewComponent.prototype.ngOnInit = function () {
        var _this = this;
        Promise.resolve().then(function () {
            _this.panelService.title = _this.title;
            if (_this.modalService.option && _this.modalService.option.title != null) {
                _this.modalService.title = _this.modalService.option.title ? _this.modalService.option.title : '';
                _this.text = _this.modalService.option.text ? _this.modalService.option.text : '';
            }
        });
    };
    TextViewComponent.ɵfac = function TextViewComponent_Factory(t) { return new (t || TextViewComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](service_panel_service__WEBPACK_IMPORTED_MODULE_1__["PanelService"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](service_modal_service__WEBPACK_IMPORTED_MODULE_2__["ModalService"])); };
    TextViewComponent.ɵcmp = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineComponent"]({ type: TextViewComponent, selectors: [["text-view"]], inputs: { text: "text", title: "title" }, decls: 3, vars: 1, consts: [[1, "text"]], template: function TextViewComponent_Template(rf, ctx) { if (rf & 1) {
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "span");
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "pre", 0);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](2);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        } if (rf & 2) {
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate"](ctx.text);
        } }, styles: [".text[_ngcontent-%COMP%] {\r\n  font-family: -apple-system, BlinkMacSystemFont, \"Helvetica Neue\", Verdana, Meiryo, sans-serif;\r\n  font-size: 12px;\r\n}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRleHQtdmlldy5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UsNkZBQTZGO0VBQzdGLGVBQWU7QUFDakIiLCJmaWxlIjoidGV4dC12aWV3LmNvbXBvbmVudC5jc3MiLCJzb3VyY2VzQ29udGVudCI6WyIudGV4dCB7XHJcbiAgZm9udC1mYW1pbHk6IC1hcHBsZS1zeXN0ZW0sIEJsaW5rTWFjU3lzdGVtRm9udCwgXCJIZWx2ZXRpY2EgTmV1ZVwiLCBWZXJkYW5hLCBNZWlyeW8sIHNhbnMtc2VyaWY7XHJcbiAgZm9udC1zaXplOiAxMnB4O1xyXG59Il19 */"] });
    return TextViewComponent;
}());

/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](TextViewComponent, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"],
        args: [{
                selector: 'text-view',
                templateUrl: './text-view.component.html',
                styleUrls: ['./text-view.component.css']
            }]
    }], function () { return [{ type: service_panel_service__WEBPACK_IMPORTED_MODULE_1__["PanelService"] }, { type: service_modal_service__WEBPACK_IMPORTED_MODULE_2__["ModalService"] }]; }, { text: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], title: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }] }); })();


/***/ }),

/***/ "AyjR":
/*!******************************************!*\
  !*** ./src/app/class/game-table-mask.ts ***!
  \******************************************/
/*! exports provided: GameTableMask */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GameTableMask", function() { return GameTableMask; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "mrSG");
/* harmony import */ var _core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./core/synchronize-object/decorator */ "1lIu");
/* harmony import */ var _data_element__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./data-element */ "gkrD");
/* harmony import */ var _tabletop_object__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./tabletop-object */ "e8gA");




var GameTableMask = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"])(GameTableMask, _super);
    function GameTableMask() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.isLock = false;
        return _this;
    }
    GameTableMask_1 = GameTableMask;
    Object.defineProperty(GameTableMask.prototype, "name", {
        get: function () { return this.getCommonValue('name', ''); },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(GameTableMask.prototype, "width", {
        get: function () { return this.getCommonValue('width', 1); },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(GameTableMask.prototype, "height", {
        get: function () { return this.getCommonValue('height', 1); },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(GameTableMask.prototype, "opacity", {
        get: function () {
            var element = this.getElement('opacity', this.commonDataElement);
            var num = element ? element.currentValue / element.value : 1;
            return Number.isNaN(num) ? 1 : num;
        },
        enumerable: false,
        configurable: true
    });
    GameTableMask.create = function (name, width, height, opacity, identifier) {
        var object = null;
        if (identifier) {
            object = new GameTableMask_1(identifier);
        }
        else {
            object = new GameTableMask_1();
        }
        object.createDataElements();
        object.commonDataElement.appendChild(_data_element__WEBPACK_IMPORTED_MODULE_2__["DataElement"].create('name', name, {}, 'name_' + object.identifier));
        object.commonDataElement.appendChild(_data_element__WEBPACK_IMPORTED_MODULE_2__["DataElement"].create('width', width, {}, 'width_' + object.identifier));
        object.commonDataElement.appendChild(_data_element__WEBPACK_IMPORTED_MODULE_2__["DataElement"].create('height', height, {}, 'height_' + object.identifier));
        object.commonDataElement.appendChild(_data_element__WEBPACK_IMPORTED_MODULE_2__["DataElement"].create('opacity', opacity, { type: 'numberResource', currentValue: opacity }, 'opacity_' + object.identifier));
        object.initialize();
        return object;
    };
    var GameTableMask_1;
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_1__["SyncVar"])()
    ], GameTableMask.prototype, "isLock", void 0);
    GameTableMask = GameTableMask_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_1__["SyncObject"])('table-mask')
    ], GameTableMask);
    return GameTableMask;
}(_tabletop_object__WEBPACK_IMPORTED_MODULE_3__["TabletopObject"]));



/***/ }),

/***/ "AytR":
/*!*****************************************!*\
  !*** ./src/environments/environment.ts ***!
  \*****************************************/
/*! exports provided: environment */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "environment", function() { return environment; });
// This file can be replaced during build by using the `fileReplacements` array.
// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.
// The list of file replacements can be found in `angular.json`.
var environment = {
    production: false
};
/*
 * For easier debugging in development mode, you can import the following file
 * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.
 *
 * This import should be commented out in production mode because it will have a negative impact
 * on performance if an error is thrown.
 */
// import 'zone.js/dist/zone-error';  // Included with Angular CLI.


/***/ }),

/***/ "BLsz":
/*!**********************************************************************!*\
  !*** ./src/app/component/overview-panel/overview-panel.component.ts ***!
  \**********************************************************************/
/*! exports provided: OverviewPanelComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "OverviewPanelComponent", function() { return OverviewPanelComponent; });
/* harmony import */ var _angular_animations__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/animations */ "R0Ic");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "fXoL");
/* harmony import */ var _udonarium_core_synchronize_object_object_node__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @udonarium/core/synchronize-object/object-node */ "F67Z");
/* harmony import */ var _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @udonarium/core/synchronize-object/object-store */ "hm7o");
/* harmony import */ var _udonarium_core_system__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @udonarium/core/system */ "yNnI");
/* harmony import */ var service_game_object_inventory_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! service/game-object-inventory.service */ "LjVp");
/* harmony import */ var service_pointer_device_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! service/pointer-device.service */ "GPP8");
/* harmony import */ var directive_draggable_directive__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! directive/draggable.directive */ "z2Us");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @angular/common */ "ofXK");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @angular/forms */ "3Pt+");
/* harmony import */ var pipe_safe_pipe__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! pipe/safe.pipe */ "6HCy");
/* harmony import */ var ngx_linky__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ngx-linky */ "fAHl");













var _c0 = ["draggablePanel"];
function OverviewPanelComponent_ng_container_3_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainer"](0);
} }
function OverviewPanelComponent_ng_container_4_ng_container_1_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainer"](0);
} }
var _c1 = function (a0) { return { card: a0 }; };
function OverviewPanelComponent_ng_container_4_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](1, OverviewPanelComponent_ng_container_4_ng_container_1_Template, 1, 0, "ng-container", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]();
    var _r9 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵreference"](12);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngTemplateOutlet", _r9)("ngTemplateOutletContext", _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpureFunction1"](2, _c1, ctx_r2.tabletopObject));
} }
function OverviewPanelComponent_ng_container_5_ng_container_1_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainer"](0);
} }
function OverviewPanelComponent_ng_container_5_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](1, OverviewPanelComponent_ng_container_5_ng_container_1_Template, 1, 0, "ng-container", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var ctx_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]();
    var _r9 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵreference"](12);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngTemplateOutlet", _r9)("ngTemplateOutletContext", _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpureFunction1"](2, _c1, ctx_r3.tabletopObject));
} }
function OverviewPanelComponent_ng_container_6_ng_container_1_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainer"](0);
} }
var _c2 = function (a0) { return { note: a0 }; };
function OverviewPanelComponent_ng_container_6_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](1, OverviewPanelComponent_ng_container_6_ng_container_1_Template, 1, 0, "ng-container", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var ctx_r4 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]();
    var _r11 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵreference"](14);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngTemplateOutlet", _r11)("ngTemplateOutletContext", _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpureFunction1"](2, _c2, ctx_r4.tabletopObject));
} }
function OverviewPanelComponent_ng_container_7_ng_container_1_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainer"](0);
} }
var _c3 = function (a0) { return { character: a0 }; };
function OverviewPanelComponent_ng_container_7_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](1, OverviewPanelComponent_ng_container_7_ng_container_1_Template, 1, 0, "ng-container", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var ctx_r5 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]();
    var _r13 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵreference"](16);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngTemplateOutlet", _r13)("ngTemplateOutletContext", _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpureFunction1"](2, _c3, ctx_r5.tabletopObject));
} }
function OverviewPanelComponent_ng_container_8_ng_container_1_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainer"](0);
} }
var _c4 = function (a0) { return { dice: a0 }; };
function OverviewPanelComponent_ng_container_8_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](1, OverviewPanelComponent_ng_container_8_ng_container_1_Template, 1, 0, "ng-container", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var ctx_r6 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]();
    var _r15 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵreference"](18);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngTemplateOutlet", _r15)("ngTemplateOutletContext", _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpureFunction1"](2, _c4, ctx_r6.tabletopObject));
} }
function OverviewPanelComponent_ng_container_9_ng_container_1_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainer"](0);
} }
function OverviewPanelComponent_ng_container_9_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](1, OverviewPanelComponent_ng_container_9_ng_container_1_Template, 1, 0, "ng-container", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var ctx_r7 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]();
    var _r13 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵreference"](16);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngTemplateOutlet", _r13)("ngTemplateOutletContext", _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpureFunction1"](2, _c3, ctx_r7.tabletopObject));
} }
function OverviewPanelComponent_ng_container_10_ng_container_1_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainer"](0);
} }
function OverviewPanelComponent_ng_container_10_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](1, OverviewPanelComponent_ng_container_10_ng_container_1_Template, 1, 0, "ng-container", 13);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]();
    var _r19 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵreference"](22);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngTemplateOutlet", _r19);
} }
var _c5 = function (a0) { return { "with-button-marign": a0 }; };
function OverviewPanelComponent_ng_template_11_div_1_div_6_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "div", 24);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](1, "div", 25);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
} if (rf & 2) {
    var card_r28 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](2).card;
    var ctx_r32 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngClass", _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpureFunction1"](2, _c5, ctx_r32.hasImage));
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtextInterpolate"](card_r28.ownerName);
} }
function OverviewPanelComponent_ng_template_11_div_1_Template(rf, ctx) { if (rf & 1) {
    var _r35 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "div", 19);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelement"](1, "img", 20);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpipe"](2, "safe");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](3, "button", 21);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("click", function OverviewPanelComponent_ng_template_11_div_1_Template_button_click_3_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r35); var ctx_r34 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](2); return ctx_r34.chanageImageView(true); });
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](4, "i", 22);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](5, "zoom_in");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](6, OverviewPanelComponent_ng_template_11_div_1_div_6_Template, 3, 4, "div", 23);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
} if (rf & 2) {
    var card_r28 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]().card;
    var ctx_r29 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("src", _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpipeBind2"](2, 2, ctx_r29.imageUrl, "resourceUrl"), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵsanitizeUrl"]);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](5);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", card_r28.hasOwner && 0 < card_r28.ownerName.length);
} }
function OverviewPanelComponent_ng_template_11_div_2_ng_container_1_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var card_r28 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](2).card;
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtextInterpolate"](card_r28.name);
} }
function OverviewPanelComponent_ng_template_11_div_2_ng_container_2_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](1, "Card");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerEnd"]();
} }
function OverviewPanelComponent_ng_template_11_div_2_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "div", 26);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](1, OverviewPanelComponent_ng_template_11_div_2_ng_container_1_Template, 2, 1, "ng-container", 5);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](2, OverviewPanelComponent_ng_template_11_div_2_ng_container_2_Template, 2, 0, "ng-container", 5);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
} if (rf & 2) {
    var card_r28 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]().card;
    var ctx_r30 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngClass", _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpureFunction1"](3, _c5, ctx_r30.hasImage));
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", card_r28.isVisible == null || card_r28.isVisible);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", card_r28.isVisible != null && !card_r28.isVisible);
} }
function OverviewPanelComponent_ng_template_11_div_4_ng_container_2_ng_container_1_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainer"](0);
} }
var _c6 = function (a0) { return { dataElm: a0 }; };
function OverviewPanelComponent_ng_template_11_div_4_ng_container_2_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](1, OverviewPanelComponent_ng_template_11_div_4_ng_container_2_ng_container_1_Template, 1, 0, "ng-container", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var dataElm_r42 = ctx.$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](3);
    var _r17 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵreference"](20);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngTemplateOutlet", _r17)("ngTemplateOutletContext", _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpureFunction1"](2, _c6, dataElm_r42));
} }
function OverviewPanelComponent_ng_template_11_div_4_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "div", 27);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](1, "div", 28);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](2, OverviewPanelComponent_ng_template_11_div_4_ng_container_2_Template, 2, 4, "ng-container", 29);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
} if (rf & 2) {
    var ctx_r31 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngForOf", ctx_r31.dataElms);
} }
var _c7 = function (a0, a1) { return { "is-pointer-events-auto": a0, "pointer-events-none": a1 }; };
function OverviewPanelComponent_ng_template_11_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "div", 14);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](1, OverviewPanelComponent_ng_template_11_div_1_Template, 7, 5, "div", 15);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](2, OverviewPanelComponent_ng_template_11_div_2_Template, 3, 5, "div", 16);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](3, "div", 17);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](4, OverviewPanelComponent_ng_template_11_div_4_Template, 3, 1, "div", 18);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
} if (rf & 2) {
    var card_r28 = ctx.card;
    var ctx_r10 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngClass", _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpureFunction2"](4, _c7, !ctx_r10.isPointerDragging, ctx_r10.isPointerDragging));
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", ctx_r10.hasImage);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", 0 < (card_r28 == null ? null : card_r28.name == null ? null : card_r28.name.length));
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", ctx_r10.hasDataElms && card_r28.isVisible);
} }
var _c8 = function (a0, a1) { return { "max-width": a0, "width": a1 }; };
var _c9 = function (a0) { return { "max-width": a0 }; };
var _c10 = function (a0, a1) { return { "width": a0, "max-height": a1 }; };
function OverviewPanelComponent_ng_template_13_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "div", 30);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](1, "div", 31);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](3, "div", 32);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](4, "div", 33);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](5, "div", 34);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](6, "textarea", 35);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("ngModelChange", function OverviewPanelComponent_ng_template_13_Template_textarea_ngModelChange_6_listener($event) { var note_r44 = ctx.note; return note_r44.text = $event; });
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](7, "div", 36);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](8);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
} if (rf & 2) {
    var note_r44 = ctx.note;
    var ctx_r12 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngStyle", _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpureFunction2"](7, _c8, 1000 + "px", ctx_r12.overViewNoteWidth + "px"))("ngClass", _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpureFunction2"](10, _c7, !ctx_r12.isPointerDragging, ctx_r12.isPointerDragging));
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngStyle", _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpureFunction1"](13, _c9, 1000 + "px"));
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtextInterpolate"](note_r44.title);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngStyle", _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpureFunction2"](15, _c10, ctx_r12.overViewNoteWidth + "px", ctx_r12.overViewNoteMaxHeight + "px"));
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngModel", note_r44.text);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtextInterpolate"](note_r44.text);
} }
function OverviewPanelComponent_ng_template_15_div_2_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "div", 44);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelement"](1, "img", 45);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpipe"](2, "safe");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
} if (rf & 2) {
    var ctx_r47 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngClass", _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpureFunction2"](5, _c7, !ctx_r47.isPointerDragging, ctx_r47.isPointerDragging));
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("src", _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpipeBind2"](2, 2, ctx_r47.imageUrl, "resourceUrl"), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵsanitizeUrl"]);
} }
function OverviewPanelComponent_ng_template_15_div_7_ng_container_1_ng_container_1_ng_container_2_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainer"](0);
} }
function OverviewPanelComponent_ng_template_15_div_7_ng_container_1_ng_container_1_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](1, "div", 28);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](2, OverviewPanelComponent_ng_template_15_div_7_ng_container_1_ng_container_1_ng_container_2_Template, 1, 0, "ng-container", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var dataElm_r50 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]().$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](3);
    var _r17 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵreference"](20);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngTemplateOutlet", _r17)("ngTemplateOutletContext", _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpureFunction1"](2, _c6, dataElm_r50));
} }
function OverviewPanelComponent_ng_template_15_div_7_ng_container_1_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](1, OverviewPanelComponent_ng_template_15_div_7_ng_container_1_ng_container_1_Template, 3, 4, "ng-container", 5);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var dataElm_r50 = ctx.$implicit;
    var ctx_r49 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", dataElm_r50 && dataElm_r50.name !== ctx_r49.newLineString);
} }
function OverviewPanelComponent_ng_template_15_div_7_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "div", 46);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](1, OverviewPanelComponent_ng_template_15_div_7_ng_container_1_Template, 2, 1, "ng-container", 29);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
} if (rf & 2) {
    var ctx_r48 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngStyle", _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpureFunction2"](2, _c10, ctx_r48.overViewCharacterWidth + "px", ctx_r48.overViewCharacterMaxHeight + "px"));
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngForOf", ctx_r48.inventoryDataElms);
} }
function OverviewPanelComponent_ng_template_15_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "div", 37);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelement"](1, "div", 38);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](2, OverviewPanelComponent_ng_template_15_div_2_Template, 3, 8, "div", 39);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](3, "div", 40);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelement"](5, "div", 41);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](6, "div", 42);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](7, OverviewPanelComponent_ng_template_15_div_7_Template, 2, 5, "div", 43);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
} if (rf & 2) {
    var character_r46 = ctx.character;
    var ctx_r14 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngClass", _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpureFunction2"](6, _c7, !ctx_r14.isPointerDragging, ctx_r14.isPointerDragging));
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", ctx_r14.hasImage);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngClass", _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpureFunction2"](9, _c7, !ctx_r14.isPointerDragging, ctx_r14.isPointerDragging));
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtextInterpolate"](character_r46.name);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngClass", _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpureFunction2"](12, _c7, !ctx_r14.isPointerDragging, ctx_r14.isPointerDragging));
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", ctx_r14.hasDataElms);
} }
function OverviewPanelComponent_ng_template_17_ng_container_4_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var dice_r54 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]().dice;
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtextInterpolate"](dice_r54.face);
} }
function OverviewPanelComponent_ng_template_17_ng_container_5_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](1, "???");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerEnd"]();
} }
function OverviewPanelComponent_ng_template_17_div_6_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "div", 48);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](1, "div", 25);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
} if (rf & 2) {
    var dice_r54 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]().dice;
    var ctx_r57 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngClass", _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpureFunction2"](2, _c7, !ctx_r57.isPointerDragging, ctx_r57.isPointerDragging));
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtextInterpolate1"]("", dice_r54.ownerName, " ");
} }
var _c11 = function (a0, a1) { return { "is-black-mask": a0, "is-harf-black-mask": a1 }; };
function OverviewPanelComponent_ng_template_17_div_7_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "div", 44);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelement"](1, "img", 49);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpipe"](2, "safe");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
} if (rf & 2) {
    var dice_r54 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]().dice;
    var ctx_r58 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngClass", _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpureFunction2"](6, _c7, !ctx_r58.isPointerDragging, ctx_r58.isPointerDragging));
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngClass", _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpureFunction2"](9, _c11, !dice_r54.isVisible, dice_r54.isMine))("src", _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpipeBind2"](2, 3, ctx_r58.imageUrl, "resourceUrl"), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵsanitizeUrl"]);
} }
function OverviewPanelComponent_ng_template_17_div_10_ng_container_2_ng_container_1_ng_container_1_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainer"](0);
} }
function OverviewPanelComponent_ng_template_17_div_10_ng_container_2_ng_container_1_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](1, OverviewPanelComponent_ng_template_17_div_10_ng_container_2_ng_container_1_ng_container_1_Template, 1, 0, "ng-container", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var dataElm_r64 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]().$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](3);
    var _r17 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵreference"](20);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngTemplateOutlet", _r17)("ngTemplateOutletContext", _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpureFunction1"](2, _c6, dataElm_r64));
} }
function OverviewPanelComponent_ng_template_17_div_10_ng_container_2_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](1, OverviewPanelComponent_ng_template_17_div_10_ng_container_2_ng_container_1_Template, 2, 4, "ng-container", 5);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var dataElm_r64 = ctx.$implicit;
    var ctx_r63 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", dataElm_r64 && dataElm_r64.name !== ctx_r63.newLineString);
} }
function OverviewPanelComponent_ng_template_17_div_10_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "div", 27);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](1, "div", 28);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](2, OverviewPanelComponent_ng_template_17_div_10_ng_container_2_Template, 2, 1, "ng-container", 29);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
} if (rf & 2) {
    var ctx_r59 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngForOf", ctx_r59.dataElms);
} }
function OverviewPanelComponent_ng_template_17_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "div", 37);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelement"](1, "div", 38);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](2, "div", 40);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](4, OverviewPanelComponent_ng_template_17_ng_container_4_Template, 2, 1, "ng-container", 5);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](5, OverviewPanelComponent_ng_template_17_ng_container_5_Template, 2, 0, "ng-container", 5);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](6, OverviewPanelComponent_ng_template_17_div_6_Template, 3, 5, "div", 47);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](7, OverviewPanelComponent_ng_template_17_div_7_Template, 3, 12, "div", 39);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelement"](8, "div", 41);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](9, "div", 42);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](10, OverviewPanelComponent_ng_template_17_div_10_Template, 3, 1, "div", 18);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
} if (rf & 2) {
    var dice_r54 = ctx.dice;
    var ctx_r16 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngClass", _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpureFunction2"](9, _c7, !ctx_r16.isPointerDragging, ctx_r16.isPointerDragging));
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngClass", _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpureFunction2"](12, _c7, !ctx_r16.isPointerDragging, ctx_r16.isPointerDragging));
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtextInterpolate1"](" ", dice_r54.name, ": ");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", dice_r54.isVisible);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", !dice_r54.isVisible);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", dice_r54.hasOwner && 0 < dice_r54.ownerName.length);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", ctx_r16.hasImage);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngClass", _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpureFunction2"](15, _c7, !ctx_r16.isPointerDragging, ctx_r16.isPointerDragging));
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", ctx_r16.hasDataElms && dice_r54.isVisible);
} }
function OverviewPanelComponent_ng_template_19_ng_container_0_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainer"](0);
} }
function OverviewPanelComponent_ng_template_19_ng_template_1_div_1_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "div", 56);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
} if (rf & 2) {
    var dataElm_r68 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](2).dataElm;
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtextInterpolate"](dataElm_r68.name);
} }
function OverviewPanelComponent_ng_template_19_ng_template_1_ng_container_3_ng_container_1_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainer"](0);
} }
function OverviewPanelComponent_ng_template_19_ng_template_1_ng_container_3_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](1, OverviewPanelComponent_ng_template_19_ng_template_1_ng_container_3_ng_container_1_Template, 1, 0, "ng-container", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var childElm_r77 = ctx.$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](3);
    var _r17 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵreference"](20);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngTemplateOutlet", _r17)("ngTemplateOutletContext", _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpureFunction1"](2, _c6, childElm_r77));
} }
function OverviewPanelComponent_ng_template_19_ng_template_1_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "div", 53);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](1, OverviewPanelComponent_ng_template_19_ng_template_1_div_1_Template, 2, 1, "div", 54);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](2, "div", 55);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](3, OverviewPanelComponent_ng_template_19_ng_template_1_ng_container_3_Template, 2, 4, "ng-container", 29);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
} if (rf & 2) {
    var dataElm_r68 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]().dataElm;
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", 0 < dataElm_r68.name.trim().length);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngForOf", dataElm_r68.children);
} }
var _c12 = function () { return { stripPrefix: false }; };
function OverviewPanelComponent_ng_template_19_ng_template_3_ng_container_1_Template(rf, ctx) { if (rf & 1) {
    var _r84 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](1, "div", 58);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](2, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](4, "span", 59);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](5, " \u00A0\u00A0URL\u7DE8\u96C6:");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](6, "input", 60);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("change", function OverviewPanelComponent_ng_template_19_ng_template_3_ng_container_1_Template_input_change_6_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r84); var ctx_r83 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](3); return ctx_r83.changeChk(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](7, "div", 61);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](8, "div", 34);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](9, "textarea", 62);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("ngModelChange", function OverviewPanelComponent_ng_template_19_ng_template_3_ng_container_1_Template_textarea_ngModelChange_9_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r84); var dataElm_r68 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](2).dataElm; return dataElm_r68.value = $event; })("focus", function OverviewPanelComponent_ng_template_19_ng_template_3_ng_container_1_Template_textarea_focus_9_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r84); var dataElm_r68 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](2).dataElm; var ctx_r87 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](); return ctx_r87.textFocus(dataElm_r68.myIdentifer); });
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelement"](10, "span", 63);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpipe"](11, "linky");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](12, "div", 36);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](13);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var dataElm_r68 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](2).dataElm;
    var ctx_r80 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtextInterpolate1"]("", dataElm_r68.name, " ");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("hidden", !ctx_r80.isUrlText(dataElm_r68.value));
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpropertyInterpolate"]("id", dataElm_r68.myIdentifer);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngModel", dataElm_r68.value)("hidden", !ctx_r80.isEditUrl(dataElm_r68.myIdentifer) && ctx_r80.isUrlText(dataElm_r68.value));
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("innerHTML", _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpipeBind2"](11, 8, ctx_r80.escapeHtml(dataElm_r68.value), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpureFunction0"](11, _c12)), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵsanitizeHtml"])("hidden", ctx_r80.isEditUrl(dataElm_r68.myIdentifer) || !ctx_r80.isUrlText(dataElm_r68.value));
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtextInterpolate"](dataElm_r68.value);
} }
function OverviewPanelComponent_ng_template_19_ng_template_3_ng_container_2_Template(rf, ctx) { if (rf & 1) {
    var _r92 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](1, "div", 64);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](3, "div", 65);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](4, "div", 66);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](5, "div", 67);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](6);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](7, "input", 68);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("ngModelChange", function OverviewPanelComponent_ng_template_19_ng_template_3_ng_container_2_Template_input_ngModelChange_7_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r92); var dataElm_r68 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](2).dataElm; return dataElm_r68.currentValue = $event; });
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](8, "div", 69);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](9);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](10, "div", 70);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](11, "input", 71);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("ngModelChange", function OverviewPanelComponent_ng_template_19_ng_template_3_ng_container_2_Template_input_ngModelChange_11_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r92); var dataElm_r68 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](2).dataElm; return dataElm_r68.currentValue = $event; });
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpipe"](12, "safe");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var dataElm_r68 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](2).dataElm;
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtextInterpolate"](dataElm_r68.name);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtextInterpolate"](dataElm_r68.currentValue);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngModel", dataElm_r68.currentValue);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtextInterpolate1"](" / ", dataElm_r68.value, "");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵstyleMap"](_angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpipeBind2"](12, 8, "font-size: 0.8em; width: 100%; --min: 0; --max:" + dataElm_r68.value + "; --val:" + dataElm_r68.currentValue + ";", "style"));
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpropertyInterpolate"]("max", dataElm_r68.value);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngModel", dataElm_r68.currentValue);
} }
function OverviewPanelComponent_ng_template_19_ng_template_3_ng_container_3_Template(rf, ctx) { if (rf & 1) {
    var _r98 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](1, "div", 64);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](3, "div", 65);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](4, "div", 72);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](5);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](6, "input", 73);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("ngModelChange", function OverviewPanelComponent_ng_template_19_ng_template_3_ng_container_3_Template_input_ngModelChange_6_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r98); var dataElm_r68 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](2).dataElm; return dataElm_r68.value = $event; });
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var dataElm_r68 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](2).dataElm;
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtextInterpolate"](dataElm_r68.name);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtextInterpolate"](dataElm_r68.value);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngModel", dataElm_r68.value);
} }
function OverviewPanelComponent_ng_template_19_ng_template_3_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerStart"](0, 2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](1, OverviewPanelComponent_ng_template_19_ng_template_3_ng_container_1_Template, 14, 12, "ng-container", 3);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](2, OverviewPanelComponent_ng_template_19_ng_template_3_ng_container_2_Template, 13, 11, "ng-container", 3);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](3, OverviewPanelComponent_ng_template_19_ng_template_3_ng_container_3_Template, 7, 3, "ng-container", 4);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelement"](4, "div", 57);
} if (rf & 2) {
    var dataElm_r68 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]().dataElm;
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngSwitch", dataElm_r68.type);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngSwitchCase", "note");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngSwitchCase", "numberResource");
} }
function OverviewPanelComponent_ng_template_19_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](0, OverviewPanelComponent_ng_template_19_ng_container_0_Template, 1, 0, "ng-container", 50);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](1, OverviewPanelComponent_ng_template_19_ng_template_1_Template, 4, 2, "ng-template", null, 51, _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplateRefExtractor"]);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](3, OverviewPanelComponent_ng_template_19_ng_template_3_Template, 5, 3, "ng-template", null, 52, _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplateRefExtractor"]);
} if (rf & 2) {
    var dataElm_r68 = ctx.dataElm;
    var _r70 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵreference"](2);
    var _r72 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵreference"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", 0 < dataElm_r68.children.length)("ngIfThen", _r70)("ngIfElse", _r72);
} }
function OverviewPanelComponent_ng_template_21_Template(rf, ctx) { if (rf & 1) {
    var _r102 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "div", 74);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("click", function OverviewPanelComponent_ng_template_21_Template_div_click_0_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r102); var ctx_r101 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](); return ctx_r101.chanageImageView(false); });
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](1, "div", 75);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](2, "i", 22);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](3, "close");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelement"](4, "img", 76);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpipe"](5, "safe");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
} if (rf & 2) {
    var ctx_r20 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("@fadeInOut", "in");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("src", _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpipeBind2"](5, 2, ctx_r20.imageUrl, "resourceUrl"), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵsanitizeUrl"]);
} }
var OverviewPanelComponent = /** @class */ (function () {
    function OverviewPanelComponent(inventoryService, changeDetector, pointerDeviceService) {
        this.inventoryService = inventoryService;
        this.changeDetector = changeDetector;
        this.pointerDeviceService = pointerDeviceService;
        this.tabletopObject = null;
        this.left = 0;
        this.top = 0;
        this.isOpenImageView = false;
    }
    Object.defineProperty(OverviewPanelComponent.prototype, "imageUrl", {
        get: function () { return this.tabletopObject && this.tabletopObject.imageFile ? this.tabletopObject.imageFile.url : ''; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(OverviewPanelComponent.prototype, "hasImage", {
        get: function () { return 0 < this.imageUrl.length; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(OverviewPanelComponent.prototype, "inventoryDataElms", {
        get: function () { return this.tabletopObject ? this.getInventoryTags(this.tabletopObject) : []; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(OverviewPanelComponent.prototype, "dataElms", {
        get: function () { return this.tabletopObject && this.tabletopObject.detailDataElement ? this.tabletopObject.detailDataElement.children : []; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(OverviewPanelComponent.prototype, "hasDataElms", {
        get: function () { return 0 < this.dataElms.length; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(OverviewPanelComponent.prototype, "newLineString", {
        get: function () { return this.inventoryService.newLineString; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(OverviewPanelComponent.prototype, "isPointerDragging", {
        get: function () { return this.pointerDeviceService.isDragging; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(OverviewPanelComponent.prototype, "pointerEventsStyle", {
        get: function () { return { 'is-pointer-events-auto': !this.isPointerDragging, 'pointer-events-none': this.isPointerDragging }; },
        enumerable: false,
        configurable: true
    });
    OverviewPanelComponent.prototype.ngAfterViewInit = function () {
        var _this = this;
        this.initPanelPosition();
        setTimeout(function () {
            _this.adjustPositionRoot();
        }, 16);
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_4__["EventSystem"].register(this)
            .on('UPDATE_GAME_OBJECT', -1000, function (event) {
            var object = _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_3__["ObjectStore"].instance.get(event.data.identifier);
            if (!_this.tabletopObject || !object || !(object instanceof _udonarium_core_synchronize_object_object_node__WEBPACK_IMPORTED_MODULE_2__["ObjectNode"]))
                return;
            if (_this.tabletopObject === object || _this.tabletopObject.contains(object)) {
                _this.changeDetector.markForCheck();
            }
        })
            .on('SYNCHRONIZE_FILE_LIST', function (event) {
            _this.changeDetector.markForCheck();
        })
            .on('UPDATE_FILE_RESOURE', -1000, function (event) {
            _this.changeDetector.markForCheck();
        });
    };
    OverviewPanelComponent.prototype.ngOnDestroy = function () {
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_4__["EventSystem"].unregister(this);
    };
    OverviewPanelComponent.prototype.initPanelPosition = function () {
        var panel = this.draggablePanel.nativeElement;
        var outerWidth = panel.offsetWidth;
        var outerHeight = panel.offsetHeight;
        var offsetLeft = this.left + 100;
        var offsetTop = this.top - outerHeight - 50;
        var isCollideLeft = false;
        var isCollideTop = false;
        if (window.innerWidth < offsetLeft + outerWidth) {
            offsetLeft = window.innerWidth - outerWidth;
            isCollideLeft = true;
        }
        if (offsetTop <= 0) {
            offsetTop = 0;
            isCollideTop = true;
        }
        if (isCollideLeft) {
            offsetLeft = this.left - outerWidth - 100;
        }
        if (offsetLeft < 0)
            offsetLeft = 0;
        if (offsetTop < 0)
            offsetTop = 0;
        panel.style.left = offsetLeft + 'px';
        panel.style.top = offsetTop + 'px';
    };
    OverviewPanelComponent.prototype.adjustPositionRoot = function () {
        var panel = this.draggablePanel.nativeElement;
        var panelBox = panel.getBoundingClientRect();
        var diffLeft = 0;
        var diffTop = 0;
        if (window.innerWidth < panelBox.right + diffLeft) {
            diffLeft += window.innerWidth - (panelBox.right + diffLeft);
        }
        if (panelBox.left + diffLeft < 0) {
            diffLeft += 0 - (panelBox.left + diffLeft);
        }
        if (window.innerHeight < panelBox.bottom + diffTop) {
            diffTop += window.innerHeight - (panelBox.bottom + diffTop);
        }
        if (panelBox.top + diffTop < 0) {
            diffTop += 0 - (panelBox.top + diffTop);
        }
        panel.style.left = panel.offsetLeft + diffLeft + 'px';
        panel.style.top = panel.offsetTop + diffTop + 'px';
    };
    OverviewPanelComponent.prototype.chanageImageView = function (isOpen) {
        this.isOpenImageView = isOpen;
    };
    OverviewPanelComponent.prototype.getInventoryTags = function (gameObject) {
        return this.inventoryService.tableInventory.dataElementMap.get(gameObject.identifier);
    };
    Object.defineProperty(OverviewPanelComponent.prototype, "overViewNoteWidth", {
        get: function () {
            var note = this.tabletopObject;
            if (!note)
                return 250;
            var width = note.overViewWidth;
            if (width < 250)
                width = 250;
            if (width > 800)
                width = 800;
            return width;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(OverviewPanelComponent.prototype, "overViewNoteMaxHeight", {
        get: function () {
            var note = this.tabletopObject;
            if (!note)
                return 250;
            var maxHeight = note.overViewMaxHeight;
            if (maxHeight < 250)
                maxHeight = 250;
            if (maxHeight > 1000)
                maxHeight = 1000;
            return maxHeight;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(OverviewPanelComponent.prototype, "overViewCharacterWidth", {
        get: function () {
            var character = this.tabletopObject;
            if (!character)
                return 270;
            var width = character.overViewWidth;
            if (width < 270)
                width = 270;
            if (width > 800)
                width = 800;
            return width;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(OverviewPanelComponent.prototype, "overViewCharacterMaxHeight", {
        get: function () {
            var character = this.tabletopObject;
            if (!character)
                return 250;
            var maxHeight = character.overViewMaxHeight;
            if (maxHeight < 250)
                maxHeight = 250;
            if (maxHeight > 1000)
                maxHeight = 1000;
            return maxHeight;
        },
        enumerable: false,
        configurable: true
    });
    OverviewPanelComponent.prototype.escapeHtml = function (text) {
        return text.replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;")
            .replace(/"/g, "&quot;").replace(/'/g, "&#039;");
    };
    OverviewPanelComponent.prototype.isEditUrl = function (dataElmIdentifier) {
        var box = document.getElementById(dataElmIdentifier);
        if (!box)
            return false;
        //   console.log( "Edit:" + dataElmIdentifier  + ":" + box.checked   );
        return box.checked;
    };
    OverviewPanelComponent.prototype.isUrlText = function (text) {
        if (text.match(/^https:\/\//))
            return true;
        if (text.match(/^http:\/\//))
            return true;
        return false;
    };
    OverviewPanelComponent.prototype.changeChk = function () {
        //�������Ȃ�
    };
    OverviewPanelComponent.prototype.textFocus = function (dataElmIdentifier) {
        //console.log( "text forcus:" + dataElmIdentifier );
        var box = document.getElementById(dataElmIdentifier);
        box.checked = true;
    };
    OverviewPanelComponent.ɵfac = function OverviewPanelComponent_Factory(t) { return new (t || OverviewPanelComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdirectiveInject"](service_game_object_inventory_service__WEBPACK_IMPORTED_MODULE_5__["GameObjectInventoryService"]), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_1__["ChangeDetectorRef"]), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdirectiveInject"](service_pointer_device_service__WEBPACK_IMPORTED_MODULE_6__["PointerDeviceService"])); };
    OverviewPanelComponent.ɵcmp = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdefineComponent"]({ type: OverviewPanelComponent, selectors: [["overview-panel"]], viewQuery: function OverviewPanelComponent_Query(rf, ctx) { if (rf & 1) {
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵstaticViewQuery"](_c0, true);
        } if (rf & 2) {
            var _t = void 0;
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵqueryRefresh"](_t = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵloadQuery"]()) && (ctx.draggablePanel = _t.first);
        } }, inputs: { tabletopObject: "tabletopObject", left: "left", top: "top" }, decls: 23, vars: 9, consts: [["appDraggable", "", 1, "component", "is-pointer-events-none"], ["draggablePanel", ""], [3, "ngSwitch"], [4, "ngSwitchCase"], [4, "ngSwitchDefault"], [4, "ngIf"], ["overviewCard", ""], ["overviewNote", ""], ["overviewCharacter", ""], ["overviewDiceSymbol", ""], ["dataElement", ""], ["imageView", ""], [4, "ngTemplateOutlet", "ngTemplateOutletContext"], [4, "ngTemplateOutlet"], [1, "component-content", "is-small-size", 3, "ngClass"], ["style", "position: relative;", 4, "ngIf"], ["class", "component-title title-background", 3, "ngClass", 4, "ngIf"], [1, "component-background"], ["class", "grid-container-root", 4, "ngIf"], [2, "position", "relative"], [1, "card-image", 3, "src"], [1, "zoom-button", 3, "click"], [1, "material-icons"], ["class", "component-owner position-right-bottom", 3, "ngClass", 4, "ngIf"], [1, "component-owner", "position-right-bottom", 3, "ngClass"], [1, "owner-tag"], [1, "component-title", "title-background", 3, "ngClass"], [1, "grid-container-root"], [1, "grid-container"], [4, "ngFor", "ngForOf"], [1, "component-content", "is-large-size", 3, "ngStyle", "ngClass"], [1, "component-title", "title-background", 3, "ngStyle"], [1, "component-background", "text-note-container", 3, "ngStyle"], [2, "position", "relative", "width", "100%"], [1, "is-fill"], ["spellcheck", "false", 1, "textarea", 3, "ngModel", "ngModelChange"], [1, "textarea-spacer"], [1, "component-content", "character-grid-container", "is-middle-size"], [1, "title-bg-area", "title-background", 3, "ngClass"], ["class", "image-area character-image-box", 3, "ngClass", 4, "ngIf"], [1, "title-area", "component-title", 3, "ngClass"], [1, "void-area", "is-pointer-events-none"], [1, "dataElm-area", "component-background", 3, "ngClass"], ["class", "grid-container-root", 3, "ngStyle", 4, "ngIf"], [1, "image-area", "character-image-box", 3, "ngClass"], [1, "character-image", 3, "src"], [1, "grid-container-root", 3, "ngStyle"], ["class", "owner-name-area component-owner", 3, "ngClass", 4, "ngIf"], [1, "owner-name-area", "component-owner", 3, "ngClass"], [1, "character-image", 3, "ngClass", "src"], [4, "ngIf", "ngIfThen", "ngIfElse"], ["thenBlock", ""], ["elseBlock", ""], [1, "section", 2, "padding-top", "0.5em"], ["class", "section-text", 4, "ngIf"], [1, "grid-container", "indetnt"], [1, "section-text"], [1, "section", "border"], [1, "section"], [3, "hidden"], ["type", "checkbox", 3, "id", "change"], [1, "note", 2, "position", "relative"], ["spellcheck", "false", 1, "textarea", 3, "ngModel", "hidden", "ngModelChange", "focus"], [1, "textarea-url", 3, "innerHTML", "hidden"], [1, "tag"], [1, "value"], [2, "display", "inline-block", "width", "min-content"], [1, "hidden-spacer", 2, "margin-right", "2em"], ["type", "number", "size", "1", 1, "input", 3, "ngModel", "ngModelChange"], [2, "display", "inline"], [1, "section", 2, "line-height", "1em"], ["type", "range", "min", "0", 3, "max", "ngModel", "ngModelChange"], [1, "hidden-spacer"], ["size", "1", 1, "input", 3, "ngModel", "ngModelChange"], [1, "image-view-background", "is-fill", 3, "click"], [1, "close-button", "is-pointer-events-none"], [1, "contain-image", 3, "src"]], template: function OverviewPanelComponent_Template(rf, ctx) { if (rf & 1) {
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "div", 0, 1);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerStart"](2, 2);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](3, OverviewPanelComponent_ng_container_3_Template, 1, 0, "ng-container", 3);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](4, OverviewPanelComponent_ng_container_4_Template, 2, 4, "ng-container", 3);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](5, OverviewPanelComponent_ng_container_5_Template, 2, 4, "ng-container", 3);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](6, OverviewPanelComponent_ng_container_6_Template, 2, 4, "ng-container", 3);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](7, OverviewPanelComponent_ng_container_7_Template, 2, 4, "ng-container", 3);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](8, OverviewPanelComponent_ng_container_8_Template, 2, 4, "ng-container", 3);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](9, OverviewPanelComponent_ng_container_9_Template, 2, 4, "ng-container", 4);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](10, OverviewPanelComponent_ng_container_10_Template, 2, 1, "ng-container", 5);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](11, OverviewPanelComponent_ng_template_11_Template, 5, 7, "ng-template", null, 6, _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplateRefExtractor"]);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](13, OverviewPanelComponent_ng_template_13_Template, 9, 18, "ng-template", null, 7, _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplateRefExtractor"]);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](15, OverviewPanelComponent_ng_template_15_Template, 8, 15, "ng-template", null, 8, _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplateRefExtractor"]);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](17, OverviewPanelComponent_ng_template_17_Template, 11, 18, "ng-template", null, 9, _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplateRefExtractor"]);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](19, OverviewPanelComponent_ng_template_19_Template, 5, 3, "ng-template", null, 10, _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplateRefExtractor"]);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](21, OverviewPanelComponent_ng_template_21_Template, 6, 5, "ng-template", null, 11, _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplateRefExtractor"]);
        } if (rf & 2) {
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("@fadeInOut", "in");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](2);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngSwitch", ctx.tabletopObject.aliasName);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngSwitchCase", "numberResource");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngSwitchCase", "card");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngSwitchCase", "card-stack");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngSwitchCase", "text-note");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngSwitchCase", "character");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngSwitchCase", "dice-symbol");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](2);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", ctx.isOpenImageView);
        } }, directives: [directive_draggable_directive__WEBPACK_IMPORTED_MODULE_7__["DraggableDirective"], _angular_common__WEBPACK_IMPORTED_MODULE_8__["NgSwitch"], _angular_common__WEBPACK_IMPORTED_MODULE_8__["NgSwitchCase"], _angular_common__WEBPACK_IMPORTED_MODULE_8__["NgSwitchDefault"], _angular_common__WEBPACK_IMPORTED_MODULE_8__["NgIf"], _angular_common__WEBPACK_IMPORTED_MODULE_8__["NgTemplateOutlet"], _angular_common__WEBPACK_IMPORTED_MODULE_8__["NgClass"], _angular_common__WEBPACK_IMPORTED_MODULE_8__["NgForOf"], _angular_common__WEBPACK_IMPORTED_MODULE_8__["NgStyle"], _angular_forms__WEBPACK_IMPORTED_MODULE_9__["DefaultValueAccessor"], _angular_forms__WEBPACK_IMPORTED_MODULE_9__["NgControlStatus"], _angular_forms__WEBPACK_IMPORTED_MODULE_9__["NgModel"], _angular_forms__WEBPACK_IMPORTED_MODULE_9__["NumberValueAccessor"], _angular_forms__WEBPACK_IMPORTED_MODULE_9__["RangeValueAccessor"]], pipes: [pipe_safe_pipe__WEBPACK_IMPORTED_MODULE_10__["SafePipe"], ngx_linky__WEBPACK_IMPORTED_MODULE_11__["LinkyPipe"]], styles: [".component[_ngcontent-%COMP%] {\r\n  position: absolute;\r\n  max-height: 100%;\r\n  max-width: 100%;\r\n  box-sizing: border-box;\r\n  overflow: visible;\r\n  color: #444;\r\n  z-index: 9000;\r\n  overscroll-behavior: contain;\r\n  -webkit-overflow-scrolling: touch;\r\n}\r\n\r\n.component-content[_ngcontent-%COMP%] {\r\n  font-size: 12px;\r\n}\r\n\r\n.is-large-size[_ngcontent-%COMP%] {\r\n  max-width: 350px;\r\n}\r\n\r\n.is-middle-size[_ngcontent-%COMP%] {\r\n  max-width: 270px;\r\n}\r\n\r\n.is-small-size[_ngcontent-%COMP%] {\r\n  max-width: 250px;\r\n}\r\n\r\n.is-middle-size[_ngcontent-%COMP%]   .grid-container-root[_ngcontent-%COMP%] {\r\n  width: 270px;\r\n}\r\n\r\n.is-small-size[_ngcontent-%COMP%]   .grid-container-root[_ngcontent-%COMP%] {\r\n  width: 250px;\r\n}\r\n\r\n.component-background[_ngcontent-%COMP%] {\r\n  background: linear-gradient(-30deg, rgba(240,218,189, 0.9), rgba(255, 244, 232, 0.9));\r\n  border-bottom: solid 1px #999;\r\n}\r\n\r\n.component-title[_ngcontent-%COMP%] {\r\n  color: #ccc;\r\n  font-size: 1em;\r\n  text-align: right;\r\n  vertical-align: middle; \r\n  height: 32px;\r\n  line-height: 32px; \r\n  overflow: hidden;\r\n  white-space: nowrap;\r\n  text-overflow: ellipsis;\r\n  padding: 0 1em;\r\n}\r\n\r\n.title-background[_ngcontent-%COMP%] {\r\n  background-color: #555;\r\n  border-top: solid 1px #999;\r\n  border-left: solid 1px #999;\r\n  border-right: solid 1px #999;\r\n}\r\n\r\n.component-owner[_ngcontent-%COMP%] {\r\n  font-size: 0.8em;\r\n  padding: 10px;\r\n  color: #ccc;\r\n  vertical-align: middle; \r\n  overflow: hidden;\r\n  text-align: right;\r\n  padding: 2px 1em;\r\n  max-width: 100%;\r\n  box-sizing: border-box;\r\n}\r\n\r\n.owner-tag[_ngcontent-%COMP%] {\r\n  width: -webkit-min-content;\r\n  width: min-content;\r\n  max-width: 100%;\r\n  margin-left: auto;\r\n  margin-right: 0; \r\n  overflow: hidden;\r\n  color: #CCC;\r\n  background-color: rgba(30, 30, 30, 0.8);\r\n  box-sizing: border-box;\r\n  padding: 3px 9px;\r\n  border-radius: 6px;\r\n  white-space: nowrap;\r\n  text-overflow: ellipsis;\r\n}\r\n\r\n.card-image[_ngcontent-%COMP%] {\r\n  width: 250px;\r\n  max-height: 330px;\r\n  padding: 8px;\r\n  vertical-align: bottom;\r\n  object-fit: contain;\r\n  box-sizing: border-box;\r\n  background-color: rgba(204, 204, 204, 0.5);\r\n}\r\n\r\n.zoom-button[_ngcontent-%COMP%] {\r\n  position: absolute;\r\n  left : 8px;\r\n  bottom: -21px;\r\n  width: 42px;\r\n  height: 42px; \r\n  border-radius: 100px; \r\n  padding: 4px;\r\n}\r\n\r\n.zoom-button[_ngcontent-%COMP%]    > .material-icons[_ngcontent-%COMP%] {\r\n  font-size: 24px;\r\n  vertical-align: bottom;\r\n}\r\n\r\n.position-right-bottom[_ngcontent-%COMP%] {\r\n  position: absolute;\r\n  right: 0;\r\n  bottom: 0;\r\n}\r\n\r\n.image-view-background[_ngcontent-%COMP%] {\r\n  color: #CCC;\r\n  background-color: rgba(30, 30, 30, 0.3);\r\n  z-index: 9900;\r\n}\r\n\r\n.image-view-background[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%] {\r\n  position: absolute;\r\n  right: 16px;\r\n  top: 16px;\r\n}\r\n\r\n.image-view-background[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%]    > .material-icons[_ngcontent-%COMP%] {\r\n  font-size: 36px;\r\n}\r\n\r\n.contain-image[_ngcontent-%COMP%] {\r\n  width: 100%;\r\n  height: 100%;\r\n  box-sizing: border-box;\r\n  padding: 16px;\r\n  vertical-align: bottom;\r\n  object-fit: contain;\r\n}\r\n\r\n.text-note-container[_ngcontent-%COMP%] {\r\n  width: 100%;\r\n  max-height: 400px; \r\n  padding: 0.5em 1.5em;\r\n  box-sizing: border-box;\r\n  overflow: hidden auto;\r\n  line-height: 1.8;\r\n  border-left: solid 1px #999;\r\n  border-right: solid 1px #999;\r\n}\r\n\r\n.character-image-box[_ngcontent-%COMP%] {\r\n  width: 100px;\r\n  max-height: 120px;\r\n  overflow: hidden;\r\n  vertical-align: bottom;\r\n  margin-left: 0.5em;\r\n  margin-bottom: -6px;\r\n  border-radius: 1em;\r\n  z-index: 1;\r\n}\r\n\r\n.character-image[_ngcontent-%COMP%] {\r\n  padding: 0;\r\n  width: 100%;\r\n  vertical-align: bottom;\r\n}\r\n\r\n.is-black-mask[_ngcontent-%COMP%] {\r\n  filter: brightness(0);\r\n }\r\n\r\n.is-harf-black-mask[_ngcontent-%COMP%] {\r\n  filter: brightness(0.5);\r\n }\r\n\r\n.character-grid-container[_ngcontent-%COMP%] {\r\n  display: grid;\r\n  grid-template-columns: -webkit-min-content auto;\r\n  grid-template-columns: min-content auto;\r\n  grid-template-rows: 1fr auto auto auto;\r\n}\r\n\r\n.title-bg-area[_ngcontent-%COMP%] {\r\n  grid-area: 3 / 1 / 4 / 3;\r\n}\r\n\r\n.title-area[_ngcontent-%COMP%] {\r\n  grid-area: 3 / 2 / 4 / 3;\r\n}\r\n\r\n.owner-name-area[_ngcontent-%COMP%] {\r\n  grid-area: 2 / 2 / 3 / 3;\r\n}\r\n\r\n.image-area[_ngcontent-%COMP%] {\r\n  grid-area: 1 / 1 / 4 / 2;\r\n}\r\n\r\n.void-area[_ngcontent-%COMP%] {\r\n  grid-area: 1 / 2 / 3 / 3;\r\n}\r\n\r\n.dataElm-area[_ngcontent-%COMP%] {\r\n  grid-area: 4 / 1 / 5 / 3;\r\n}\r\n\r\n.grid-container-root[_ngcontent-%COMP%] {\r\n  padding: 0.5em 1.2em;\r\n  max-height: 250px;\r\n  overflow: hidden auto;\r\n  box-sizing: border-box;\r\n  border-left: solid 1px #999;\r\n  border-right: solid 1px #999;\r\n}\r\n\r\n.grid-container[_ngcontent-%COMP%] {\r\n  display: grid;\r\n  grid-template-columns: 1fr fit-content(80%);\r\n}\r\n\r\n.grid-container[_ngcontent-%COMP%]    > div[_ngcontent-%COMP%] {\r\n  box-sizing: border-box;\r\n  line-height: 24px;\r\n}\r\n\r\n.indetnt[_ngcontent-%COMP%] {\r\n  padding-left: 0.5em;\r\n}\r\n\r\n.section[_ngcontent-%COMP%] {\r\n  max-width: 100%;\r\n  grid-column: 1 / span 2;\r\n}\r\n\r\n.section-text[_ngcontent-%COMP%] {\r\n  font-size: 1.1em;\r\n  font-weight: bold;\r\n  white-space: nowrap;\r\n  text-overflow: ellipsis;\r\n  overflow: hidden;\r\n}\r\n\r\n.note[_ngcontent-%COMP%] {\r\n  margin-left: 0.5em;\r\n  font-size: 1em;\r\n  line-height: 1.8;\r\n}\r\n\r\n.textarea[_ngcontent-%COMP%] {\r\n  width: 100%;\r\n  height: 100%;\r\n  font: inherit;\r\n  font-size: inherit;\r\n  line-height: inherit;\r\n  background: none;\r\n  border: none;\r\n  border-radius: 2px;\r\n  outline: none;\r\n  color: #444;\r\n  padding: 0;\r\n  box-sizing: border-box;\r\n  resize: none;\r\n  overflow: hidden;\r\n  white-space: pre-wrap;\r\n  word-wrap: break-word;\r\n  overflow-wrap: anywhere;\r\n  word-break: break-word;\r\n}\r\n\r\n.textarea[_ngcontent-%COMP%]:hover {\r\n  background: #EEE;\r\n}\r\n\r\n.textarea[_ngcontent-%COMP%]:focus {\r\n  background: #FFF;\r\n}\r\n\r\n.textarea-url[_ngcontent-%COMP%] {\r\n  width: 100%;\r\n  height: 100%;\r\n  font: inherit;\r\n  font-size: inherit;\r\n  line-height: inherit;\r\n  background: none;\r\n  border: none;\r\n  border-radius: 2px;\r\n  outline: none;\r\n  color: #444;\r\n  padding: 0;\r\n  box-sizing: border-box;\r\n  resize: none;\r\n  overflow: hidden;\r\n  white-space: pre-wrap;\r\n  word-wrap: break-word;\r\n  overflow-wrap: anywhere;\r\n  word-break: break-word;\r\n}\r\n\r\n.tag[_ngcontent-%COMP%] {\r\n  padding-right: 1em;\r\n  overflow: hidden;\r\n  white-space: nowrap;\r\n  text-overflow: ellipsis;\r\n}\r\n\r\n.value[_ngcontent-%COMP%] {\r\n  font-size: 1.2em;\r\n  overflow: hidden;\r\n  white-space: nowrap;\r\n  text-overflow: ellipsis;\r\n  text-align: right;\r\n}\r\n\r\n.hidden-spacer[_ngcontent-%COMP%] {\r\n  visibility: hidden;\r\n  height: 0px;\r\n  min-width: 3em; \r\n  overflow: hidden;\r\n  white-space: pre-wrap;\r\n}\r\n\r\n.textarea-spacer[_ngcontent-%COMP%] {\r\n  visibility: hidden;\r\n  min-width: 3em; \r\n  height: auto;\r\n  min-height: 24px;\r\n  overflow: hidden;\r\n  white-space: pre-wrap;\r\n  word-wrap: break-word;\r\n  overflow-wrap: anywhere;\r\n  word-break: break-word;\r\n}\r\n\r\n.input[_ngcontent-%COMP%] {\r\n  width: 100%;\r\n  min-width: 3em; \r\n  text-align: right;\r\n  font: inherit;\r\n  font-size: inherit;\r\n  line-height: inherit;\r\n  background: none;\r\n  border: none;\r\n  border-radius: 2px;\r\n  outline: none;\r\n  color: #444;\r\n  padding: 0;\r\n  box-sizing: border-box;\r\n}\r\n\r\n.input[_ngcontent-%COMP%]:hover {\r\n  background: #EEE;\r\n}\r\n\r\n.input[_ngcontent-%COMP%]:focus {\r\n  background: #FFF;\r\n}\r\n\r\ninput[type=number][_ngcontent-%COMP%] {\r\n  -moz-appearance: textfield;\r\n}\r\n\r\ninput[type=number][_ngcontent-%COMP%]:hover, input[type=number][_ngcontent-%COMP%]:focus {\r\n  -moz-appearance: number-input;\r\n}\r\n\r\n.border[_ngcontent-%COMP%] {\r\n  border-bottom: 1px dotted #888;\r\n}\r\n\r\n.separator[_ngcontent-%COMP%] {\r\n  padding: 2px 0 2px 0;\r\n  border-bottom: 1px solid #888;\r\n}\r\n\r\n.with-button-marign[_ngcontent-%COMP%] {\r\n  padding-left : 60px;\r\n}\r\n\r\n.is-fill[_ngcontent-%COMP%] {\r\n  position: absolute;\r\n  top: 0; \r\n  left: 0; \r\n  right: 0;\r\n  bottom: 0;\r\n}\r\n\r\n.is-bold[_ngcontent-%COMP%] {\r\n  font-weight: bold;\r\n}\r\n\r\n.is-pointer-events-none[_ngcontent-%COMP%] {\r\n  pointer-events: none;\r\n}\r\n\r\n.is-pointer-events-auto[_ngcontent-%COMP%] {\r\n  pointer-events: auto;\r\n}\r\n\r\n\r\n\r\ninput[type='range'][_ngcontent-%COMP%] {\r\n  --slider-track-color: transparent; \r\n  --slider-fill-color: #555; \r\n  --slider-border-color: #777;\r\n  --slider-height: 0.8em;\r\n  --slider-thumb-size: 1.0em;\r\n  --range: calc(var(--max) - var(--min));\r\n  --ratio: calc((var(--val) - var(--min))/var(--range));\r\n  --sx: calc(.5*var(--slider-thumb-size) + var(--ratio)*(100% - var(--slider-thumb-size)));\r\n  margin: 0;\r\n  padding: 0;\r\n  background: transparent;\r\n  font: 1em/1 arial, sans-serif;\r\n  outline: 0;\r\n  -webkit-appearance: none;\r\n     -moz-appearance: none;\r\n          appearance: none;\r\n}\r\n\r\ninput[type='range'][_ngcontent-%COMP%], input[type='range'][_ngcontent-%COMP%]::-webkit-slider-thumb {\r\n  -webkit-appearance: none;\r\n}\r\n\r\ninput[type='range'][_ngcontent-%COMP%]::-webkit-slider-runnable-track {\r\n  box-sizing: border-box;\r\n  border-top: solid 1px var(--slider-border-color);\r\n  border-bottom: solid 1px var(--slider-border-color);\r\n  border-radius: var(--slider-height);\r\n  height: var(--slider-height);\r\n  background: var(--slider-track-color);\r\n}\r\n\r\ninput[type='range'][_ngcontent-%COMP%]::-webkit-slider-runnable-track {\r\n  background: linear-gradient(var(--slider-fill-color), var(--slider-fill-color)) 0/var(--sx) 100% no-repeat var(--slider-track-color);\r\n  cursor: pointer;\r\n}\r\n\r\ninput[type='range'][_ngcontent-%COMP%]::-moz-range-track {\r\n  box-sizing: border-box;\r\n  border: solid 1px var(--slider-border-color);\r\n  border-radius: var(--slider-height);\r\n  height: var(--slider-height);\r\n  background: var(--slider-track-color);\r\n}\r\n\r\ninput[type='range'][_ngcontent-%COMP%]::-ms-track {\r\n  box-sizing: border-box;\r\n  border: solid 1px var(--slider-border-color);\r\n  border-radius: var(--slider-height);\r\n  height: var(--slider-height);\r\n  background: var(--slider-track-color);\r\n}\r\n\r\ninput[type='range'][_ngcontent-%COMP%]::-moz-range-progress {\r\n  height: var(--slider-height);\r\n  background: var(--slider-fill-color);\r\n  border-radius: var(--slider-height);\r\n}\r\n\r\ninput[type='range'][_ngcontent-%COMP%]::-ms-fill-lower {\r\n  height: var(--slider-height);\r\n  background: var(--slider-fill-color);\r\n  border-radius: var(--slider-height);\r\n}\r\n\r\ninput[type='range'][_ngcontent-%COMP%]::-webkit-slider-thumb {\r\n  margin-top: calc((var(--slider-height) - var(--slider-thumb-size)) / 2 - 1px);\r\n  width: var(--slider-thumb-size);\r\n  height: var(--slider-thumb-size);\r\n  box-sizing: border-box;\r\n  border: solid 1px  var(--slider-border-color);\r\n  border-radius: 2em;\r\n  background: #ddd;\r\n  cursor: pointer;\r\n}\r\n\r\ninput[type='range'][_ngcontent-%COMP%]::-moz-range-thumb {\r\n  width: var(--slider-thumb-size);\r\n  height: var(--slider-thumb-size);\r\n  box-sizing: border-box;\r\n  border: solid 1px var(--slider-border-color);\r\n  border-radius: 2em;\r\n  background: #ddd;\r\n  cursor: pointer;\r\n}\r\n\r\ninput[type='range'][_ngcontent-%COMP%]::-ms-thumb {\r\n  margin-top: 0;\r\n  width: var(--slider-thumb-size);\r\n  height: var(--slider-thumb-size);\r\n  box-sizing: border-box;\r\n  border: solid 1px var(--slider-border-color);\r\n  border-radius: 2em;\r\n  background: #ddd;\r\n  cursor: pointer;\r\n}\r\n\r\ninput[type='range'][_ngcontent-%COMP%]::-ms-tooltip {\r\n  display: none;\r\n}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm92ZXJ2aWV3LXBhbmVsLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxrQkFBa0I7RUFDbEIsZ0JBQWdCO0VBQ2hCLGVBQWU7RUFDZixzQkFBc0I7RUFDdEIsaUJBQWlCO0VBQ2pCLFdBQVc7RUFDWCxhQUFhO0VBQ2IsNEJBQTRCO0VBQzVCLGlDQUFpQztBQUNuQzs7QUFFQTtFQUNFLGVBQWU7QUFDakI7O0FBRUE7RUFDRSxnQkFBZ0I7QUFDbEI7O0FBRUE7RUFDRSxnQkFBZ0I7QUFDbEI7O0FBRUE7RUFDRSxnQkFBZ0I7QUFDbEI7O0FBRUE7RUFDRSxZQUFZLENBQUMsR0FBRztBQUNsQjs7QUFFQTtFQUNFLFlBQVk7QUFDZDs7QUFFQTtFQUNFLHFGQUFxRjtFQUNyRiw2QkFBNkI7QUFDL0I7O0FBRUE7RUFDRSxXQUFXO0VBQ1gsY0FBYztFQUNkLGlCQUFpQjtFQUNqQixzQkFBc0I7RUFDdEIsWUFBWTtFQUNaLGlCQUFpQjtFQUNqQixnQkFBZ0I7RUFDaEIsbUJBQW1CO0VBQ25CLHVCQUF1QjtFQUN2QixjQUFjO0FBQ2hCOztBQUVBO0VBQ0Usc0JBQXNCO0VBQ3RCLDBCQUEwQjtFQUMxQiwyQkFBMkI7RUFDM0IsNEJBQTRCO0FBQzlCOztBQUVBO0VBQ0UsZ0JBQWdCO0VBQ2hCLGFBQWE7RUFDYixXQUFXO0VBQ1gsc0JBQXNCO0VBQ3RCLGdCQUFnQjtFQUNoQixpQkFBaUI7RUFDakIsZ0JBQWdCO0VBQ2hCLGVBQWU7RUFDZixzQkFBc0I7QUFDeEI7O0FBRUE7RUFDRSwwQkFBa0I7RUFBbEIsa0JBQWtCO0VBQ2xCLGVBQWU7RUFDZixpQkFBaUI7RUFDakIsZUFBZTtFQUNmLGdCQUFnQjtFQUNoQixXQUFXO0VBQ1gsdUNBQXVDO0VBQ3ZDLHNCQUFzQjtFQUN0QixnQkFBZ0I7RUFDaEIsa0JBQWtCO0VBQ2xCLG1CQUFtQjtFQUNuQix1QkFBdUI7QUFDekI7O0FBRUE7RUFDRSxZQUFZO0VBQ1osaUJBQWlCO0VBQ2pCLFlBQVk7RUFDWixzQkFBc0I7RUFDdEIsbUJBQW1CO0VBQ25CLHNCQUFzQjtFQUN0QiwwQ0FBMEM7QUFDNUM7O0FBRUE7RUFDRSxrQkFBa0I7RUFDbEIsVUFBVTtFQUNWLGFBQWE7RUFDYixXQUFXO0VBQ1gsWUFBWTtFQUNaLG9CQUFvQjtFQUNwQixZQUFZO0FBQ2Q7O0FBRUE7RUFDRSxlQUFlO0VBQ2Ysc0JBQXNCO0FBQ3hCOztBQUVBO0VBQ0Usa0JBQWtCO0VBQ2xCLFFBQVE7RUFDUixTQUFTO0FBQ1g7O0FBRUE7RUFDRSxXQUFXO0VBQ1gsdUNBQXVDO0VBQ3ZDLGFBQWE7QUFDZjs7QUFFQTtFQUNFLGtCQUFrQjtFQUNsQixXQUFXO0VBQ1gsU0FBUztBQUNYOztBQUVBO0VBQ0UsZUFBZTtBQUNqQjs7QUFFQTtFQUNFLFdBQVc7RUFDWCxZQUFZO0VBQ1osc0JBQXNCO0VBQ3RCLGFBQWE7RUFDYixzQkFBc0I7RUFDdEIsbUJBQW1CO0FBQ3JCOztBQUVBO0VBQ0UsV0FBVztFQUNYLGlCQUFpQjtFQUNqQixvQkFBb0I7RUFDcEIsc0JBQXNCO0VBQ3RCLHFCQUFxQjtFQUNyQixnQkFBZ0I7RUFDaEIsMkJBQTJCO0VBQzNCLDRCQUE0QjtBQUM5Qjs7QUFFQTtFQUNFLFlBQVk7RUFDWixpQkFBaUI7RUFDakIsZ0JBQWdCO0VBQ2hCLHNCQUFzQjtFQUN0QixrQkFBa0I7RUFDbEIsbUJBQW1CO0VBQ25CLGtCQUFrQjtFQUNsQixVQUFVO0FBQ1o7O0FBRUE7RUFDRSxVQUFVO0VBQ1YsV0FBVztFQUNYLHNCQUFzQjtBQUN4Qjs7QUFFQTtFQUNFLHFCQUFxQjtDQUN0Qjs7QUFFQTtFQUNDLHVCQUF1QjtDQUN4Qjs7QUFFRDtFQUNFLGFBQWE7RUFDYiwrQ0FBdUM7RUFBdkMsdUNBQXVDO0VBQ3ZDLHNDQUFzQztBQUN4Qzs7QUFFQTtFQUNFLHdCQUF3QjtBQUMxQjs7QUFFQTtFQUNFLHdCQUF3QjtBQUMxQjs7QUFFQTtFQUNFLHdCQUF3QjtBQUMxQjs7QUFFQTtFQUNFLHdCQUF3QjtBQUMxQjs7QUFFQTtFQUNFLHdCQUF3QjtBQUMxQjs7QUFFQTtFQUNFLHdCQUF3QjtBQUMxQjs7QUFFQTtFQUNFLG9CQUFvQjtFQUNwQixpQkFBaUIsQ0FBQyxHQUFHO0VBQ3JCLHFCQUFxQjtFQUNyQixzQkFBc0I7RUFDdEIsMkJBQTJCO0VBQzNCLDRCQUE0QjtBQUM5Qjs7QUFFQTtFQUNFLGFBQWE7RUFDYiwyQ0FBMkM7QUFDN0M7O0FBRUE7RUFDRSxzQkFBc0I7RUFDdEIsaUJBQWlCO0FBQ25COztBQUVBO0VBQ0UsbUJBQW1CO0FBQ3JCOztBQUVBO0VBQ0UsZUFBZTtFQUNmLHVCQUF1QjtBQUN6Qjs7QUFFQTtFQUNFLGdCQUFnQjtFQUNoQixpQkFBaUI7RUFDakIsbUJBQW1CO0VBQ25CLHVCQUF1QjtFQUN2QixnQkFBZ0I7QUFDbEI7O0FBRUE7RUFDRSxrQkFBa0I7RUFDbEIsY0FBYztFQUNkLGdCQUFnQjtBQUNsQjs7QUFFQTtFQUNFLFdBQVc7RUFDWCxZQUFZO0VBQ1osYUFBYTtFQUNiLGtCQUFrQjtFQUNsQixvQkFBb0I7RUFDcEIsZ0JBQWdCO0VBQ2hCLFlBQVk7RUFDWixrQkFBa0I7RUFDbEIsYUFBYTtFQUNiLFdBQVc7RUFDWCxVQUFVO0VBQ1Ysc0JBQXNCO0VBQ3RCLFlBQVk7RUFDWixnQkFBZ0I7RUFDaEIscUJBQXFCO0VBQ3JCLHFCQUFxQjtFQUNyQix1QkFBdUI7RUFDdkIsc0JBQXNCO0FBQ3hCOztBQUVBO0VBQ0UsZ0JBQWdCO0FBQ2xCOztBQUVBO0VBQ0UsZ0JBQWdCO0FBQ2xCOztBQUVBO0VBQ0UsV0FBVztFQUNYLFlBQVk7RUFDWixhQUFhO0VBQ2Isa0JBQWtCO0VBQ2xCLG9CQUFvQjtFQUNwQixnQkFBZ0I7RUFDaEIsWUFBWTtFQUNaLGtCQUFrQjtFQUNsQixhQUFhO0VBQ2IsV0FBVztFQUNYLFVBQVU7RUFDVixzQkFBc0I7RUFDdEIsWUFBWTtFQUNaLGdCQUFnQjtFQUNoQixxQkFBcUI7RUFDckIscUJBQXFCO0VBQ3JCLHVCQUF1QjtFQUN2QixzQkFBc0I7QUFDeEI7O0FBRUE7RUFDRSxrQkFBa0I7RUFDbEIsZ0JBQWdCO0VBQ2hCLG1CQUFtQjtFQUNuQix1QkFBdUI7QUFDekI7O0FBRUE7RUFDRSxnQkFBZ0I7RUFDaEIsZ0JBQWdCO0VBQ2hCLG1CQUFtQjtFQUNuQix1QkFBdUI7RUFDdkIsaUJBQWlCO0FBQ25COztBQUVBO0VBQ0Usa0JBQWtCO0VBQ2xCLFdBQVc7RUFDWCxjQUFjO0VBQ2QsZ0JBQWdCO0VBQ2hCLHFCQUFxQjtBQUN2Qjs7QUFFQTtFQUNFLGtCQUFrQjtFQUNsQixjQUFjO0VBQ2QsWUFBWTtFQUNaLGdCQUFnQjtFQUNoQixnQkFBZ0I7RUFDaEIscUJBQXFCO0VBQ3JCLHFCQUFxQjtFQUNyQix1QkFBdUI7RUFDdkIsc0JBQXNCO0FBQ3hCOztBQUVBO0VBQ0UsV0FBVztFQUNYLGNBQWM7RUFDZCxpQkFBaUI7RUFDakIsYUFBYTtFQUNiLGtCQUFrQjtFQUNsQixvQkFBb0I7RUFDcEIsZ0JBQWdCO0VBQ2hCLFlBQVk7RUFDWixrQkFBa0I7RUFDbEIsYUFBYTtFQUNiLFdBQVc7RUFDWCxVQUFVO0VBQ1Ysc0JBQXNCO0FBQ3hCOztBQUVBO0VBQ0UsZ0JBQWdCO0FBQ2xCOztBQUVBO0VBQ0UsZ0JBQWdCO0FBQ2xCOztBQUVBO0VBQ0UsMEJBQTBCO0FBQzVCOztBQUVBO0VBQ0UsNkJBQTZCO0FBQy9COztBQUVBO0VBQ0UsOEJBQThCO0FBQ2hDOztBQUVBO0VBQ0Usb0JBQW9CO0VBQ3BCLDZCQUE2QjtBQUMvQjs7QUFFQTtFQUNFLG1CQUFtQjtBQUNyQjs7QUFFQTtFQUNFLGtCQUFrQjtFQUNsQixNQUFNO0VBQ04sT0FBTztFQUNQLFFBQVE7RUFDUixTQUFTO0FBQ1g7O0FBRUE7RUFDRSxpQkFBaUI7QUFDbkI7O0FBRUE7RUFDRSxvQkFBb0I7QUFDdEI7O0FBRUE7RUFDRSxvQkFBb0I7QUFDdEI7O0FBRUEsOENBQThDOztBQUU5QztFQUNFLGlDQUFpQyxFQUFFLFNBQVM7RUFDNUMseUJBQXlCLEVBQUUsUUFBUTtFQUNuQywyQkFBMkI7RUFDM0Isc0JBQXNCO0VBQ3RCLDBCQUEwQjtFQUMxQixzQ0FBc0M7RUFDdEMscURBQXFEO0VBQ3JELHdGQUF3RjtFQUN4RixTQUFTO0VBQ1QsVUFBVTtFQUNWLHVCQUF1QjtFQUN2Qiw2QkFBNkI7RUFDN0IsVUFBVTtFQUNWLHdCQUFnQjtLQUFoQixxQkFBZ0I7VUFBaEIsZ0JBQWdCO0FBQ2xCOztBQUVBO0VBQ0Usd0JBQXdCO0FBQzFCOztBQUVBO0VBQ0Usc0JBQXNCO0VBQ3RCLGdEQUFnRDtFQUNoRCxtREFBbUQ7RUFDbkQsbUNBQW1DO0VBQ25DLDRCQUE0QjtFQUM1QixxQ0FBcUM7QUFDdkM7O0FBRUE7RUFDRSxvSUFBb0k7RUFDcEksZUFBZTtBQUNqQjs7QUFFQTtFQUNFLHNCQUFzQjtFQUN0Qiw0Q0FBNEM7RUFDNUMsbUNBQW1DO0VBQ25DLDRCQUE0QjtFQUM1QixxQ0FBcUM7QUFDdkM7O0FBRUE7RUFDRSxzQkFBc0I7RUFDdEIsNENBQTRDO0VBQzVDLG1DQUFtQztFQUNuQyw0QkFBNEI7RUFDNUIscUNBQXFDO0FBQ3ZDOztBQUVBO0VBQ0UsNEJBQTRCO0VBQzVCLG9DQUFvQztFQUNwQyxtQ0FBbUM7QUFDckM7O0FBRUE7RUFDRSw0QkFBNEI7RUFDNUIsb0NBQW9DO0VBQ3BDLG1DQUFtQztBQUNyQzs7QUFFQTtFQUNFLDZFQUE2RTtFQUM3RSwrQkFBK0I7RUFDL0IsZ0NBQWdDO0VBQ2hDLHNCQUFzQjtFQUN0Qiw2Q0FBNkM7RUFDN0Msa0JBQWtCO0VBQ2xCLGdCQUFnQjtFQUNoQixlQUFlO0FBQ2pCOztBQUVBO0VBQ0UsK0JBQStCO0VBQy9CLGdDQUFnQztFQUNoQyxzQkFBc0I7RUFDdEIsNENBQTRDO0VBQzVDLGtCQUFrQjtFQUNsQixnQkFBZ0I7RUFDaEIsZUFBZTtBQUNqQjs7QUFFQTtFQUNFLGFBQWE7RUFDYiwrQkFBK0I7RUFDL0IsZ0NBQWdDO0VBQ2hDLHNCQUFzQjtFQUN0Qiw0Q0FBNEM7RUFDNUMsa0JBQWtCO0VBQ2xCLGdCQUFnQjtFQUNoQixlQUFlO0FBQ2pCOztBQUVBO0VBQ0UsYUFBYTtBQUNmIiwiZmlsZSI6Im92ZXJ2aWV3LXBhbmVsLmNvbXBvbmVudC5jc3MiLCJzb3VyY2VzQ29udGVudCI6WyIuY29tcG9uZW50IHtcclxuICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgbWF4LWhlaWdodDogMTAwJTtcclxuICBtYXgtd2lkdGg6IDEwMCU7XHJcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcclxuICBvdmVyZmxvdzogdmlzaWJsZTtcclxuICBjb2xvcjogIzQ0NDtcclxuICB6LWluZGV4OiA5MDAwO1xyXG4gIG92ZXJzY3JvbGwtYmVoYXZpb3I6IGNvbnRhaW47XHJcbiAgLXdlYmtpdC1vdmVyZmxvdy1zY3JvbGxpbmc6IHRvdWNoO1xyXG59XHJcblxyXG4uY29tcG9uZW50LWNvbnRlbnQge1xyXG4gIGZvbnQtc2l6ZTogMTJweDtcclxufVxyXG5cclxuLmlzLWxhcmdlLXNpemUge1xyXG4gIG1heC13aWR0aDogMzUwcHg7XHJcbn1cclxuXHJcbi5pcy1taWRkbGUtc2l6ZSB7XHJcbiAgbWF4LXdpZHRoOiAyNzBweDtcclxufVxyXG5cclxuLmlzLXNtYWxsLXNpemUge1xyXG4gIG1heC13aWR0aDogMjUwcHg7XHJcbn1cclxuXHJcbi5pcy1taWRkbGUtc2l6ZSAuZ3JpZC1jb250YWluZXItcm9vdCB7XHJcbiAgd2lkdGg6IDI3MHB4Oy8qKi9cclxufVxyXG5cclxuLmlzLXNtYWxsLXNpemUgLmdyaWQtY29udGFpbmVyLXJvb3Qge1xyXG4gIHdpZHRoOiAyNTBweDtcclxufVxyXG5cclxuLmNvbXBvbmVudC1iYWNrZ3JvdW5kIHtcclxuICBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoLTMwZGVnLCByZ2JhKDI0MCwyMTgsMTg5LCAwLjkpLCByZ2JhKDI1NSwgMjQ0LCAyMzIsIDAuOSkpO1xyXG4gIGJvcmRlci1ib3R0b206IHNvbGlkIDFweCAjOTk5O1xyXG59XHJcblxyXG4uY29tcG9uZW50LXRpdGxlIHtcclxuICBjb2xvcjogI2NjYztcclxuICBmb250LXNpemU6IDFlbTtcclxuICB0ZXh0LWFsaWduOiByaWdodDtcclxuICB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlOyBcclxuICBoZWlnaHQ6IDMycHg7XHJcbiAgbGluZS1oZWlnaHQ6IDMycHg7IFxyXG4gIG92ZXJmbG93OiBoaWRkZW47XHJcbiAgd2hpdGUtc3BhY2U6IG5vd3JhcDtcclxuICB0ZXh0LW92ZXJmbG93OiBlbGxpcHNpcztcclxuICBwYWRkaW5nOiAwIDFlbTtcclxufVxyXG5cclxuLnRpdGxlLWJhY2tncm91bmQge1xyXG4gIGJhY2tncm91bmQtY29sb3I6ICM1NTU7XHJcbiAgYm9yZGVyLXRvcDogc29saWQgMXB4ICM5OTk7XHJcbiAgYm9yZGVyLWxlZnQ6IHNvbGlkIDFweCAjOTk5O1xyXG4gIGJvcmRlci1yaWdodDogc29saWQgMXB4ICM5OTk7XHJcbn1cclxuXHJcbi5jb21wb25lbnQtb3duZXIge1xyXG4gIGZvbnQtc2l6ZTogMC44ZW07XHJcbiAgcGFkZGluZzogMTBweDtcclxuICBjb2xvcjogI2NjYztcclxuICB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlOyBcclxuICBvdmVyZmxvdzogaGlkZGVuO1xyXG4gIHRleHQtYWxpZ246IHJpZ2h0O1xyXG4gIHBhZGRpbmc6IDJweCAxZW07XHJcbiAgbWF4LXdpZHRoOiAxMDAlO1xyXG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XHJcbn1cclxuXHJcbi5vd25lci10YWcge1xyXG4gIHdpZHRoOiBtaW4tY29udGVudDtcclxuICBtYXgtd2lkdGg6IDEwMCU7XHJcbiAgbWFyZ2luLWxlZnQ6IGF1dG87XHJcbiAgbWFyZ2luLXJpZ2h0OiAwOyBcclxuICBvdmVyZmxvdzogaGlkZGVuO1xyXG4gIGNvbG9yOiAjQ0NDO1xyXG4gIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMzAsIDMwLCAzMCwgMC44KTtcclxuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xyXG4gIHBhZGRpbmc6IDNweCA5cHg7XHJcbiAgYm9yZGVyLXJhZGl1czogNnB4O1xyXG4gIHdoaXRlLXNwYWNlOiBub3dyYXA7XHJcbiAgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7XHJcbn1cclxuXHJcbi5jYXJkLWltYWdlIHtcclxuICB3aWR0aDogMjUwcHg7XHJcbiAgbWF4LWhlaWdodDogMzMwcHg7XHJcbiAgcGFkZGluZzogOHB4O1xyXG4gIHZlcnRpY2FsLWFsaWduOiBib3R0b207XHJcbiAgb2JqZWN0LWZpdDogY29udGFpbjtcclxuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xyXG4gIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMjA0LCAyMDQsIDIwNCwgMC41KTtcclxufVxyXG5cclxuLnpvb20tYnV0dG9uIHtcclxuICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgbGVmdCA6IDhweDtcclxuICBib3R0b206IC0yMXB4O1xyXG4gIHdpZHRoOiA0MnB4O1xyXG4gIGhlaWdodDogNDJweDsgXHJcbiAgYm9yZGVyLXJhZGl1czogMTAwcHg7IFxyXG4gIHBhZGRpbmc6IDRweDtcclxufVxyXG5cclxuLnpvb20tYnV0dG9uID4gLm1hdGVyaWFsLWljb25zIHtcclxuICBmb250LXNpemU6IDI0cHg7XHJcbiAgdmVydGljYWwtYWxpZ246IGJvdHRvbTtcclxufVxyXG5cclxuLnBvc2l0aW9uLXJpZ2h0LWJvdHRvbSB7XHJcbiAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gIHJpZ2h0OiAwO1xyXG4gIGJvdHRvbTogMDtcclxufVxyXG5cclxuLmltYWdlLXZpZXctYmFja2dyb3VuZCB7XHJcbiAgY29sb3I6ICNDQ0M7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgzMCwgMzAsIDMwLCAwLjMpO1xyXG4gIHotaW5kZXg6IDk5MDA7XHJcbn1cclxuXHJcbi5pbWFnZS12aWV3LWJhY2tncm91bmQgLmNsb3NlLWJ1dHRvbiB7XHJcbiAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gIHJpZ2h0OiAxNnB4O1xyXG4gIHRvcDogMTZweDtcclxufVxyXG5cclxuLmltYWdlLXZpZXctYmFja2dyb3VuZCAuY2xvc2UtYnV0dG9uID4gLm1hdGVyaWFsLWljb25zIHtcclxuICBmb250LXNpemU6IDM2cHg7XHJcbn1cclxuXHJcbi5jb250YWluLWltYWdlIHtcclxuICB3aWR0aDogMTAwJTtcclxuICBoZWlnaHQ6IDEwMCU7XHJcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcclxuICBwYWRkaW5nOiAxNnB4O1xyXG4gIHZlcnRpY2FsLWFsaWduOiBib3R0b207XHJcbiAgb2JqZWN0LWZpdDogY29udGFpbjtcclxufVxyXG5cclxuLnRleHQtbm90ZS1jb250YWluZXIge1xyXG4gIHdpZHRoOiAxMDAlO1xyXG4gIG1heC1oZWlnaHQ6IDQwMHB4OyBcclxuICBwYWRkaW5nOiAwLjVlbSAxLjVlbTtcclxuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xyXG4gIG92ZXJmbG93OiBoaWRkZW4gYXV0bztcclxuICBsaW5lLWhlaWdodDogMS44O1xyXG4gIGJvcmRlci1sZWZ0OiBzb2xpZCAxcHggIzk5OTtcclxuICBib3JkZXItcmlnaHQ6IHNvbGlkIDFweCAjOTk5O1xyXG59XHJcblxyXG4uY2hhcmFjdGVyLWltYWdlLWJveCB7XHJcbiAgd2lkdGg6IDEwMHB4O1xyXG4gIG1heC1oZWlnaHQ6IDEyMHB4O1xyXG4gIG92ZXJmbG93OiBoaWRkZW47XHJcbiAgdmVydGljYWwtYWxpZ246IGJvdHRvbTtcclxuICBtYXJnaW4tbGVmdDogMC41ZW07XHJcbiAgbWFyZ2luLWJvdHRvbTogLTZweDtcclxuICBib3JkZXItcmFkaXVzOiAxZW07XHJcbiAgei1pbmRleDogMTtcclxufVxyXG5cclxuLmNoYXJhY3Rlci1pbWFnZSB7XHJcbiAgcGFkZGluZzogMDtcclxuICB3aWR0aDogMTAwJTtcclxuICB2ZXJ0aWNhbC1hbGlnbjogYm90dG9tO1xyXG59XHJcblxyXG4uaXMtYmxhY2stbWFzayB7XHJcbiAgZmlsdGVyOiBicmlnaHRuZXNzKDApO1xyXG4gfVxyXG5cclxuIC5pcy1oYXJmLWJsYWNrLW1hc2sge1xyXG4gIGZpbHRlcjogYnJpZ2h0bmVzcygwLjUpO1xyXG4gfVxyXG5cclxuLmNoYXJhY3Rlci1ncmlkLWNvbnRhaW5lciB7XHJcbiAgZGlzcGxheTogZ3JpZDtcclxuICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IG1pbi1jb250ZW50IGF1dG87XHJcbiAgZ3JpZC10ZW1wbGF0ZS1yb3dzOiAxZnIgYXV0byBhdXRvIGF1dG87XHJcbn1cclxuXHJcbi50aXRsZS1iZy1hcmVhIHtcclxuICBncmlkLWFyZWE6IDMgLyAxIC8gNCAvIDM7XHJcbn1cclxuXHJcbi50aXRsZS1hcmVhIHtcclxuICBncmlkLWFyZWE6IDMgLyAyIC8gNCAvIDM7XHJcbn1cclxuXHJcbi5vd25lci1uYW1lLWFyZWEge1xyXG4gIGdyaWQtYXJlYTogMiAvIDIgLyAzIC8gMztcclxufVxyXG5cclxuLmltYWdlLWFyZWEge1xyXG4gIGdyaWQtYXJlYTogMSAvIDEgLyA0IC8gMjtcclxufVxyXG5cclxuLnZvaWQtYXJlYSB7XHJcbiAgZ3JpZC1hcmVhOiAxIC8gMiAvIDMgLyAzO1xyXG59XHJcblxyXG4uZGF0YUVsbS1hcmVhIHtcclxuICBncmlkLWFyZWE6IDQgLyAxIC8gNSAvIDM7XHJcbn1cclxuXHJcbi5ncmlkLWNvbnRhaW5lci1yb290IHtcclxuICBwYWRkaW5nOiAwLjVlbSAxLjJlbTtcclxuICBtYXgtaGVpZ2h0OiAyNTBweDsvKiovXHJcbiAgb3ZlcmZsb3c6IGhpZGRlbiBhdXRvO1xyXG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XHJcbiAgYm9yZGVyLWxlZnQ6IHNvbGlkIDFweCAjOTk5O1xyXG4gIGJvcmRlci1yaWdodDogc29saWQgMXB4ICM5OTk7XHJcbn1cclxuXHJcbi5ncmlkLWNvbnRhaW5lciB7XHJcbiAgZGlzcGxheTogZ3JpZDtcclxuICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IDFmciBmaXQtY29udGVudCg4MCUpO1xyXG59XHJcblxyXG4uZ3JpZC1jb250YWluZXIgPiBkaXYge1xyXG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XHJcbiAgbGluZS1oZWlnaHQ6IDI0cHg7XHJcbn1cclxuXHJcbi5pbmRldG50IHtcclxuICBwYWRkaW5nLWxlZnQ6IDAuNWVtO1xyXG59XHJcblxyXG4uc2VjdGlvbiB7XHJcbiAgbWF4LXdpZHRoOiAxMDAlO1xyXG4gIGdyaWQtY29sdW1uOiAxIC8gc3BhbiAyO1xyXG59XHJcblxyXG4uc2VjdGlvbi10ZXh0IHtcclxuICBmb250LXNpemU6IDEuMWVtO1xyXG4gIGZvbnQtd2VpZ2h0OiBib2xkO1xyXG4gIHdoaXRlLXNwYWNlOiBub3dyYXA7XHJcbiAgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7XHJcbiAgb3ZlcmZsb3c6IGhpZGRlbjtcclxufVxyXG5cclxuLm5vdGUge1xyXG4gIG1hcmdpbi1sZWZ0OiAwLjVlbTtcclxuICBmb250LXNpemU6IDFlbTtcclxuICBsaW5lLWhlaWdodDogMS44O1xyXG59XHJcblxyXG4udGV4dGFyZWEge1xyXG4gIHdpZHRoOiAxMDAlO1xyXG4gIGhlaWdodDogMTAwJTtcclxuICBmb250OiBpbmhlcml0O1xyXG4gIGZvbnQtc2l6ZTogaW5oZXJpdDtcclxuICBsaW5lLWhlaWdodDogaW5oZXJpdDtcclxuICBiYWNrZ3JvdW5kOiBub25lO1xyXG4gIGJvcmRlcjogbm9uZTtcclxuICBib3JkZXItcmFkaXVzOiAycHg7XHJcbiAgb3V0bGluZTogbm9uZTtcclxuICBjb2xvcjogIzQ0NDtcclxuICBwYWRkaW5nOiAwO1xyXG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XHJcbiAgcmVzaXplOiBub25lO1xyXG4gIG92ZXJmbG93OiBoaWRkZW47XHJcbiAgd2hpdGUtc3BhY2U6IHByZS13cmFwO1xyXG4gIHdvcmQtd3JhcDogYnJlYWstd29yZDtcclxuICBvdmVyZmxvdy13cmFwOiBhbnl3aGVyZTtcclxuICB3b3JkLWJyZWFrOiBicmVhay13b3JkO1xyXG59XHJcblxyXG4udGV4dGFyZWE6aG92ZXIge1xyXG4gIGJhY2tncm91bmQ6ICNFRUU7XHJcbn1cclxuXHJcbi50ZXh0YXJlYTpmb2N1cyB7XHJcbiAgYmFja2dyb3VuZDogI0ZGRjtcclxufVxyXG5cclxuLnRleHRhcmVhLXVybCB7XHJcbiAgd2lkdGg6IDEwMCU7XHJcbiAgaGVpZ2h0OiAxMDAlO1xyXG4gIGZvbnQ6IGluaGVyaXQ7XHJcbiAgZm9udC1zaXplOiBpbmhlcml0O1xyXG4gIGxpbmUtaGVpZ2h0OiBpbmhlcml0O1xyXG4gIGJhY2tncm91bmQ6IG5vbmU7XHJcbiAgYm9yZGVyOiBub25lO1xyXG4gIGJvcmRlci1yYWRpdXM6IDJweDtcclxuICBvdXRsaW5lOiBub25lO1xyXG4gIGNvbG9yOiAjNDQ0O1xyXG4gIHBhZGRpbmc6IDA7XHJcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcclxuICByZXNpemU6IG5vbmU7XHJcbiAgb3ZlcmZsb3c6IGhpZGRlbjtcclxuICB3aGl0ZS1zcGFjZTogcHJlLXdyYXA7XHJcbiAgd29yZC13cmFwOiBicmVhay13b3JkO1xyXG4gIG92ZXJmbG93LXdyYXA6IGFueXdoZXJlO1xyXG4gIHdvcmQtYnJlYWs6IGJyZWFrLXdvcmQ7XHJcbn1cclxuXHJcbi50YWcge1xyXG4gIHBhZGRpbmctcmlnaHQ6IDFlbTtcclxuICBvdmVyZmxvdzogaGlkZGVuO1xyXG4gIHdoaXRlLXNwYWNlOiBub3dyYXA7XHJcbiAgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7XHJcbn1cclxuXHJcbi52YWx1ZSB7XHJcbiAgZm9udC1zaXplOiAxLjJlbTtcclxuICBvdmVyZmxvdzogaGlkZGVuO1xyXG4gIHdoaXRlLXNwYWNlOiBub3dyYXA7XHJcbiAgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7XHJcbiAgdGV4dC1hbGlnbjogcmlnaHQ7XHJcbn1cclxuXHJcbi5oaWRkZW4tc3BhY2VyIHtcclxuICB2aXNpYmlsaXR5OiBoaWRkZW47XHJcbiAgaGVpZ2h0OiAwcHg7XHJcbiAgbWluLXdpZHRoOiAzZW07IFxyXG4gIG92ZXJmbG93OiBoaWRkZW47XHJcbiAgd2hpdGUtc3BhY2U6IHByZS13cmFwO1xyXG59XHJcblxyXG4udGV4dGFyZWEtc3BhY2VyIHtcclxuICB2aXNpYmlsaXR5OiBoaWRkZW47XHJcbiAgbWluLXdpZHRoOiAzZW07IFxyXG4gIGhlaWdodDogYXV0bztcclxuICBtaW4taGVpZ2h0OiAyNHB4O1xyXG4gIG92ZXJmbG93OiBoaWRkZW47XHJcbiAgd2hpdGUtc3BhY2U6IHByZS13cmFwO1xyXG4gIHdvcmQtd3JhcDogYnJlYWstd29yZDtcclxuICBvdmVyZmxvdy13cmFwOiBhbnl3aGVyZTtcclxuICB3b3JkLWJyZWFrOiBicmVhay13b3JkO1xyXG59XHJcblxyXG4uaW5wdXQge1xyXG4gIHdpZHRoOiAxMDAlO1xyXG4gIG1pbi13aWR0aDogM2VtOyBcclxuICB0ZXh0LWFsaWduOiByaWdodDtcclxuICBmb250OiBpbmhlcml0O1xyXG4gIGZvbnQtc2l6ZTogaW5oZXJpdDtcclxuICBsaW5lLWhlaWdodDogaW5oZXJpdDtcclxuICBiYWNrZ3JvdW5kOiBub25lO1xyXG4gIGJvcmRlcjogbm9uZTtcclxuICBib3JkZXItcmFkaXVzOiAycHg7XHJcbiAgb3V0bGluZTogbm9uZTtcclxuICBjb2xvcjogIzQ0NDtcclxuICBwYWRkaW5nOiAwO1xyXG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XHJcbn1cclxuXHJcbi5pbnB1dDpob3ZlciB7XHJcbiAgYmFja2dyb3VuZDogI0VFRTtcclxufVxyXG5cclxuLmlucHV0OmZvY3VzIHtcclxuICBiYWNrZ3JvdW5kOiAjRkZGO1xyXG59XHJcblxyXG5pbnB1dFt0eXBlPW51bWJlcl0ge1xyXG4gIC1tb3otYXBwZWFyYW5jZTogdGV4dGZpZWxkO1xyXG59XHJcblxyXG5pbnB1dFt0eXBlPW51bWJlcl06aG92ZXIsIGlucHV0W3R5cGU9bnVtYmVyXTpmb2N1cyB7XHJcbiAgLW1vei1hcHBlYXJhbmNlOiBudW1iZXItaW5wdXQ7XHJcbn1cclxuXHJcbi5ib3JkZXIge1xyXG4gIGJvcmRlci1ib3R0b206IDFweCBkb3R0ZWQgIzg4ODtcclxufVxyXG5cclxuLnNlcGFyYXRvciB7XHJcbiAgcGFkZGluZzogMnB4IDAgMnB4IDA7XHJcbiAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICM4ODg7XHJcbn1cclxuXHJcbi53aXRoLWJ1dHRvbi1tYXJpZ24ge1xyXG4gIHBhZGRpbmctbGVmdCA6IDYwcHg7XHJcbn1cclxuXHJcbi5pcy1maWxsIHtcclxuICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgdG9wOiAwOyBcclxuICBsZWZ0OiAwOyBcclxuICByaWdodDogMDtcclxuICBib3R0b206IDA7XHJcbn1cclxuXHJcbi5pcy1ib2xkIHtcclxuICBmb250LXdlaWdodDogYm9sZDtcclxufVxyXG5cclxuLmlzLXBvaW50ZXItZXZlbnRzLW5vbmUge1xyXG4gIHBvaW50ZXItZXZlbnRzOiBub25lO1xyXG59XHJcblxyXG4uaXMtcG9pbnRlci1ldmVudHMtYXV0byB7XHJcbiAgcG9pbnRlci1ldmVudHM6IGF1dG87XHJcbn1cclxuXHJcbi8qKioqKioqKioqKioqKioqIGlucHV0LXJhbmdlICoqKioqKioqKioqKioqKiovXHJcblxyXG5pbnB1dFt0eXBlPSdyYW5nZSddIHtcclxuICAtLXNsaWRlci10cmFjay1jb2xvcjogdHJhbnNwYXJlbnQ7IC8qICNjY2MgKi9cclxuICAtLXNsaWRlci1maWxsLWNvbG9yOiAjNTU1OyAvKiM3NzcgKi9cclxuICAtLXNsaWRlci1ib3JkZXItY29sb3I6ICM3Nzc7XHJcbiAgLS1zbGlkZXItaGVpZ2h0OiAwLjhlbTtcclxuICAtLXNsaWRlci10aHVtYi1zaXplOiAxLjBlbTtcclxuICAtLXJhbmdlOiBjYWxjKHZhcigtLW1heCkgLSB2YXIoLS1taW4pKTtcclxuICAtLXJhdGlvOiBjYWxjKCh2YXIoLS12YWwpIC0gdmFyKC0tbWluKSkvdmFyKC0tcmFuZ2UpKTtcclxuICAtLXN4OiBjYWxjKC41KnZhcigtLXNsaWRlci10aHVtYi1zaXplKSArIHZhcigtLXJhdGlvKSooMTAwJSAtIHZhcigtLXNsaWRlci10aHVtYi1zaXplKSkpO1xyXG4gIG1hcmdpbjogMDtcclxuICBwYWRkaW5nOiAwO1xyXG4gIGJhY2tncm91bmQ6IHRyYW5zcGFyZW50O1xyXG4gIGZvbnQ6IDFlbS8xIGFyaWFsLCBzYW5zLXNlcmlmO1xyXG4gIG91dGxpbmU6IDA7XHJcbiAgYXBwZWFyYW5jZTogbm9uZTtcclxufVxyXG5cclxuaW5wdXRbdHlwZT0ncmFuZ2UnXSwgaW5wdXRbdHlwZT0ncmFuZ2UnXTo6LXdlYmtpdC1zbGlkZXItdGh1bWIge1xyXG4gIC13ZWJraXQtYXBwZWFyYW5jZTogbm9uZTtcclxufVxyXG5cclxuaW5wdXRbdHlwZT0ncmFuZ2UnXTo6LXdlYmtpdC1zbGlkZXItcnVubmFibGUtdHJhY2sge1xyXG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XHJcbiAgYm9yZGVyLXRvcDogc29saWQgMXB4IHZhcigtLXNsaWRlci1ib3JkZXItY29sb3IpO1xyXG4gIGJvcmRlci1ib3R0b206IHNvbGlkIDFweCB2YXIoLS1zbGlkZXItYm9yZGVyLWNvbG9yKTtcclxuICBib3JkZXItcmFkaXVzOiB2YXIoLS1zbGlkZXItaGVpZ2h0KTtcclxuICBoZWlnaHQ6IHZhcigtLXNsaWRlci1oZWlnaHQpO1xyXG4gIGJhY2tncm91bmQ6IHZhcigtLXNsaWRlci10cmFjay1jb2xvcik7XHJcbn1cclxuXHJcbmlucHV0W3R5cGU9J3JhbmdlJ106Oi13ZWJraXQtc2xpZGVyLXJ1bm5hYmxlLXRyYWNrIHtcclxuICBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQodmFyKC0tc2xpZGVyLWZpbGwtY29sb3IpLCB2YXIoLS1zbGlkZXItZmlsbC1jb2xvcikpIDAvdmFyKC0tc3gpIDEwMCUgbm8tcmVwZWF0IHZhcigtLXNsaWRlci10cmFjay1jb2xvcik7XHJcbiAgY3Vyc29yOiBwb2ludGVyO1xyXG59XHJcblxyXG5pbnB1dFt0eXBlPSdyYW5nZSddOjotbW96LXJhbmdlLXRyYWNrIHtcclxuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xyXG4gIGJvcmRlcjogc29saWQgMXB4IHZhcigtLXNsaWRlci1ib3JkZXItY29sb3IpO1xyXG4gIGJvcmRlci1yYWRpdXM6IHZhcigtLXNsaWRlci1oZWlnaHQpO1xyXG4gIGhlaWdodDogdmFyKC0tc2xpZGVyLWhlaWdodCk7XHJcbiAgYmFja2dyb3VuZDogdmFyKC0tc2xpZGVyLXRyYWNrLWNvbG9yKTtcclxufVxyXG5cclxuaW5wdXRbdHlwZT0ncmFuZ2UnXTo6LW1zLXRyYWNrIHtcclxuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xyXG4gIGJvcmRlcjogc29saWQgMXB4IHZhcigtLXNsaWRlci1ib3JkZXItY29sb3IpO1xyXG4gIGJvcmRlci1yYWRpdXM6IHZhcigtLXNsaWRlci1oZWlnaHQpO1xyXG4gIGhlaWdodDogdmFyKC0tc2xpZGVyLWhlaWdodCk7XHJcbiAgYmFja2dyb3VuZDogdmFyKC0tc2xpZGVyLXRyYWNrLWNvbG9yKTtcclxufVxyXG5cclxuaW5wdXRbdHlwZT0ncmFuZ2UnXTo6LW1vei1yYW5nZS1wcm9ncmVzcyB7XHJcbiAgaGVpZ2h0OiB2YXIoLS1zbGlkZXItaGVpZ2h0KTtcclxuICBiYWNrZ3JvdW5kOiB2YXIoLS1zbGlkZXItZmlsbC1jb2xvcik7XHJcbiAgYm9yZGVyLXJhZGl1czogdmFyKC0tc2xpZGVyLWhlaWdodCk7XHJcbn1cclxuXHJcbmlucHV0W3R5cGU9J3JhbmdlJ106Oi1tcy1maWxsLWxvd2VyIHtcclxuICBoZWlnaHQ6IHZhcigtLXNsaWRlci1oZWlnaHQpO1xyXG4gIGJhY2tncm91bmQ6IHZhcigtLXNsaWRlci1maWxsLWNvbG9yKTtcclxuICBib3JkZXItcmFkaXVzOiB2YXIoLS1zbGlkZXItaGVpZ2h0KTtcclxufVxyXG5cclxuaW5wdXRbdHlwZT0ncmFuZ2UnXTo6LXdlYmtpdC1zbGlkZXItdGh1bWIge1xyXG4gIG1hcmdpbi10b3A6IGNhbGMoKHZhcigtLXNsaWRlci1oZWlnaHQpIC0gdmFyKC0tc2xpZGVyLXRodW1iLXNpemUpKSAvIDIgLSAxcHgpO1xyXG4gIHdpZHRoOiB2YXIoLS1zbGlkZXItdGh1bWItc2l6ZSk7XHJcbiAgaGVpZ2h0OiB2YXIoLS1zbGlkZXItdGh1bWItc2l6ZSk7XHJcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcclxuICBib3JkZXI6IHNvbGlkIDFweCAgdmFyKC0tc2xpZGVyLWJvcmRlci1jb2xvcik7XHJcbiAgYm9yZGVyLXJhZGl1czogMmVtO1xyXG4gIGJhY2tncm91bmQ6ICNkZGQ7XHJcbiAgY3Vyc29yOiBwb2ludGVyO1xyXG59XHJcblxyXG5pbnB1dFt0eXBlPSdyYW5nZSddOjotbW96LXJhbmdlLXRodW1iIHtcclxuICB3aWR0aDogdmFyKC0tc2xpZGVyLXRodW1iLXNpemUpO1xyXG4gIGhlaWdodDogdmFyKC0tc2xpZGVyLXRodW1iLXNpemUpO1xyXG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XHJcbiAgYm9yZGVyOiBzb2xpZCAxcHggdmFyKC0tc2xpZGVyLWJvcmRlci1jb2xvcik7XHJcbiAgYm9yZGVyLXJhZGl1czogMmVtO1xyXG4gIGJhY2tncm91bmQ6ICNkZGQ7XHJcbiAgY3Vyc29yOiBwb2ludGVyO1xyXG59XHJcblxyXG5pbnB1dFt0eXBlPSdyYW5nZSddOjotbXMtdGh1bWIge1xyXG4gIG1hcmdpbi10b3A6IDA7XHJcbiAgd2lkdGg6IHZhcigtLXNsaWRlci10aHVtYi1zaXplKTtcclxuICBoZWlnaHQ6IHZhcigtLXNsaWRlci10aHVtYi1zaXplKTtcclxuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xyXG4gIGJvcmRlcjogc29saWQgMXB4IHZhcigtLXNsaWRlci1ib3JkZXItY29sb3IpO1xyXG4gIGJvcmRlci1yYWRpdXM6IDJlbTtcclxuICBiYWNrZ3JvdW5kOiAjZGRkO1xyXG4gIGN1cnNvcjogcG9pbnRlcjtcclxufVxyXG5cclxuaW5wdXRbdHlwZT0ncmFuZ2UnXTo6LW1zLXRvb2x0aXAge1xyXG4gIGRpc3BsYXk6IG5vbmU7XHJcbn0iXX0= */"], data: { animation: [
                Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["trigger"])('fadeInOut', [
                    Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["transition"])('void => *', [
                        Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["animate"])('100ms ease-out', Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["keyframes"])([
                            Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])({ opacity: 0, offset: 0 }),
                            Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])({ opacity: 1, offset: 1.0 })
                        ]))
                    ]),
                    Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["transition"])('* => void', [
                        Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["animate"])('100ms ease-in', Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["keyframes"])([
                            Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])({ opacity: 1, offset: 0 }),
                            Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])({ opacity: 0, offset: 1.0 })
                        ]))
                    ])
                ])
            ] }, changeDetection: 0 });
    return OverviewPanelComponent;
}());

/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵsetClassMetadata"](OverviewPanelComponent, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_1__["Component"],
        args: [{
                selector: 'overview-panel',
                templateUrl: './overview-panel.component.html',
                styleUrls: ['./overview-panel.component.css'],
                changeDetection: _angular_core__WEBPACK_IMPORTED_MODULE_1__["ChangeDetectionStrategy"].OnPush,
                animations: [
                    Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["trigger"])('fadeInOut', [
                        Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["transition"])('void => *', [
                            Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["animate"])('100ms ease-out', Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["keyframes"])([
                                Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])({ opacity: 0, offset: 0 }),
                                Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])({ opacity: 1, offset: 1.0 })
                            ]))
                        ]),
                        Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["transition"])('* => void', [
                            Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["animate"])('100ms ease-in', Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["keyframes"])([
                                Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])({ opacity: 1, offset: 0 }),
                                Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])({ opacity: 0, offset: 1.0 })
                            ]))
                        ])
                    ])
                ]
            }]
    }], function () { return [{ type: service_game_object_inventory_service__WEBPACK_IMPORTED_MODULE_5__["GameObjectInventoryService"] }, { type: _angular_core__WEBPACK_IMPORTED_MODULE_1__["ChangeDetectorRef"] }, { type: service_pointer_device_service__WEBPACK_IMPORTED_MODULE_6__["PointerDeviceService"] }]; }, { draggablePanel: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_1__["ViewChild"],
            args: ['draggablePanel', { static: true }]
        }], tabletopObject: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_1__["Input"]
        }], left: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_1__["Input"]
        }], top: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_1__["Input"]
        }] }); })();


/***/ }),

/***/ "CE6K":
/*!******************************************!*\
  !*** ./src/app/service/modal.service.ts ***!
  \******************************************/
/*! exports provided: ModalService */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ModalService", function() { return ModalService; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "fXoL");


/*
thanks
http://qiita.com/Quramy/items/ccfcfa0e45dd9e43f041
http://qiita.com/alclimb/items/1c740a432c10b6dc700a
*/
var ModalContext = /** @class */ (function () {
    function ModalContext(_resolve, _reject, option) {
        this._resolve = _resolve;
        this._reject = _reject;
        this.option = option;
    }
    ModalContext.prototype.resolve = function (value) {
        this._resolve(value);
        this._resolve = null;
    };
    ModalContext.prototype.reject = function (reason) {
        this._reject(reason);
        this._reject = null;
    };
    return ModalContext;
}());
var ModalService = /** @class */ (function () {
    function ModalService(componentFactoryResolver) {
        this.componentFactoryResolver = componentFactoryResolver;
        this.modalContext = null;
        this.count = 0;
        this.title = '無名のモーダル';
    }
    Object.defineProperty(ModalService.prototype, "option", {
        get: function () {
            return this.modalContext ? this.modalContext.option : null;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ModalService.prototype, "isShow", {
        get: function () {
            return this.count > 0;
        },
        enumerable: false,
        configurable: true
    });
    ModalService.prototype.open = function (childComponent, option, parentViewContainerRef) {
        var _this = this;
        if (!parentViewContainerRef) {
            parentViewContainerRef = ModalService.defaultParentViewContainerRef;
        }
        var panelComponentRef;
        return new Promise(function (resolve, reject) {
            // Injector 作成
            var _resolve = function (val) {
                if (panelComponentRef) {
                    panelComponentRef.destroy();
                    resolve(val);
                    _this.count--;
                }
            };
            var _reject = function (reason) {
                if (panelComponentRef) {
                    panelComponentRef.destroy();
                    reject(reason);
                    _this.count--;
                }
            };
            var childModalService = new ModalService(_this.componentFactoryResolver);
            childModalService.modalContext = new ModalContext(_resolve, _reject, option);
            var parentInjector = parentViewContainerRef.injector; //parentViewContainerRef.parentInjector;
            var injector = _angular_core__WEBPACK_IMPORTED_MODULE_0__["Injector"].create([{ provide: ModalService, useValue: childModalService }], parentInjector);
            var panelComponentFactory = _this.componentFactoryResolver.resolveComponentFactory(ModalService.ModalComponentClass);
            var bodyComponentFactory = _this.componentFactoryResolver.resolveComponentFactory(childComponent);
            panelComponentRef = parentViewContainerRef.createComponent(panelComponentFactory, parentViewContainerRef.length, injector);
            panelComponentRef.instance.content.createComponent(bodyComponentFactory);
            panelComponentRef.onDestroy(function () {
                _this.count--;
            });
            _this.count++;
        });
    };
    ModalService.prototype.resolve = function (value) {
        if (this.modalContext) {
            this.modalContext.resolve(value);
            this.modalContext = null;
        }
    };
    ModalService.prototype.reject = function (reason) {
        if (this.modalContext) {
            this.modalContext.reject(reason);
            this.modalContext = null;
        }
    };
    ModalService.ModalComponentClass = null;
    ModalService.ɵfac = function ModalService_Factory(t) { return new (t || ModalService)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["ComponentFactoryResolver"])); };
    ModalService.ɵprov = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineInjectable"]({ token: ModalService, factory: ModalService.ɵfac });
    return ModalService;
}());

/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](ModalService, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Injectable"]
    }], function () { return [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ComponentFactoryResolver"] }]; }, null); })();


/***/ }),

/***/ "CvDi":
/*!****************************************************************************!*\
  !*** ./src/app/component/game-data-element/game-data-element.component.ts ***!
  \****************************************************************************/
/*! exports provided: GameDataElementComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GameDataElementComponent", function() { return GameDataElementComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "fXoL");
/* harmony import */ var _udonarium_core_system__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @udonarium/core/system */ "yNnI");
/* harmony import */ var _udonarium_data_element__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @udonarium/data-element */ "gkrD");
/* harmony import */ var _udonarium_core_file_storage_image_storage__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @udonarium/core/file-storage/image-storage */ "JQpJ");
/* harmony import */ var component_file_selecter_file_selecter_component__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! component/file-selecter/file-selecter.component */ "FR7b");
/* harmony import */ var service_panel_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! service/panel.service */ "M9xM");
/* harmony import */ var service_modal_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! service/modal.service */ "CE6K");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @angular/common */ "ofXK");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @angular/forms */ "3Pt+");
/* harmony import */ var pipe_safe_pipe__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! pipe/safe.pipe */ "6HCy");
/* harmony import */ var ngx_linky__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ngx-linky */ "fAHl");












function GameDataElementComponent_ng_container_0_ng_container_1_div_1_ng_container_1_ng_container_1_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainer"](0);
} }
function GameDataElementComponent_ng_container_0_ng_container_1_div_1_ng_container_1_Template(rf, ctx) { if (rf & 1) {
    var _r22 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](1, GameDataElementComponent_ng_container_0_ng_container_1_div_1_ng_container_1_ng_container_1_Template, 1, 0, "ng-container", 11);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](2, "select", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("change", function GameDataElementComponent_ng_container_0_ng_container_1_div_1_ng_container_1_Template_select_change_2_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r22); var ctx_r21 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](4); return ctx_r21.setElementType($event.target.value); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](3, "option", 13);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](4, "\u901A\u5E38");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](5, "option", 14);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](6, "\u6578\u503C");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](7, "option", 15);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](8, "\u7B46\u8A18");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var ctx_r17 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](4);
    var _r1 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵreference"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngTemplateOutlet", _r1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngModel", ctx_r17.gameDataElement.type);
} }
function GameDataElementComponent_ng_container_0_ng_container_1_div_1_ng_container_2_ng_container_1_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainer"](0);
} }
function GameDataElementComponent_ng_container_0_ng_container_1_div_1_ng_container_2_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](1, GameDataElementComponent_ng_container_0_ng_container_1_div_1_ng_container_2_ng_container_1_Template, 1, 0, "ng-container", 11);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](4);
    var _r3 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵreference"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngTemplateOutlet", _r3);
} }
function GameDataElementComponent_ng_container_0_ng_container_1_div_1_ng_container_3_ng_container_1_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainer"](0);
} }
function GameDataElementComponent_ng_container_0_ng_container_1_div_1_ng_container_3_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](1, GameDataElementComponent_ng_container_0_ng_container_1_div_1_ng_container_3_ng_container_1_Template, 1, 0, "ng-container", 11);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](4);
    var _r5 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵreference"](6);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngTemplateOutlet", _r5);
} }
function GameDataElementComponent_ng_container_0_ng_container_1_div_1_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 6);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](1, GameDataElementComponent_ng_container_0_ng_container_1_div_1_ng_container_1_Template, 9, 2, "ng-container", 0);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](2, GameDataElementComponent_ng_container_0_ng_container_1_div_1_ng_container_2_Template, 2, 1, "ng-container", 0);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](3, GameDataElementComponent_ng_container_0_ng_container_1_div_1_ng_container_3_Template, 2, 1, "ng-container", 0);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    var ctx_r11 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", !ctx_r11.isImage);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r11.isImage && ctx_r11.indexNum >= 1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r11.isImage && ctx_r11.indexNum < 1);
} }
function GameDataElementComponent_ng_container_0_ng_container_1_ng_container_3_ng_container_1_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "div", 16);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var ctx_r25 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate"](ctx_r25.name);
} }
function GameDataElementComponent_ng_container_0_ng_container_1_ng_container_3_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](1, GameDataElementComponent_ng_container_0_ng_container_1_ng_container_3_ng_container_1_Template, 3, 1, "ng-container", 0);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var ctx_r12 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", !ctx_r12.isImage);
} }
function GameDataElementComponent_ng_container_0_ng_container_1_ng_container_4_ng_container_1_Template(rf, ctx) { if (rf & 1) {
    var _r28 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "div", 17);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](3, "input", 18);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("ngModelChange", function GameDataElementComponent_ng_container_0_ng_container_1_ng_container_4_ng_container_1_Template_input_ngModelChange_3_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r28); var ctx_r27 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](4); return ctx_r27.name = $event; });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var ctx_r26 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate"](ctx_r26.name);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngModel", ctx_r26.name);
} }
function GameDataElementComponent_ng_container_0_ng_container_1_ng_container_4_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](1, GameDataElementComponent_ng_container_0_ng_container_1_ng_container_4_ng_container_1_Template, 4, 2, "ng-container", 0);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var ctx_r13 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", !ctx_r13.isImage);
} }
function GameDataElementComponent_ng_container_0_ng_container_1_ng_container_7_Template(rf, ctx) { if (rf & 1) {
    var _r30 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "input", 19);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("ngModelChange", function GameDataElementComponent_ng_container_0_ng_container_1_ng_container_7_Template_input_ngModelChange_1_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r30); var ctx_r29 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](3); return ctx_r29.currentValue = $event; });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](2, "safe");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](3, "br");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](4, "input", 20);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("ngModelChange", function GameDataElementComponent_ng_container_0_ng_container_1_ng_container_7_Template_input_ngModelChange_4_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r30); var ctx_r31 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](3); return ctx_r31.currentValue = $event; });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](5, " / ");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](6, "input", 21);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("ngModelChange", function GameDataElementComponent_ng_container_0_ng_container_1_ng_container_7_Template_input_ngModelChange_6_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r30); var ctx_r32 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](3); return ctx_r32.value = $event; });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var ctx_r14 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵstyleMap"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind2"](2, 6, "font-size: 1.0em; min-width: 90px; width: 90%; --min: 0; --max: " + ctx_r14.value + "; --val:" + ctx_r14.currentValue + ";", "style"));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpropertyInterpolate"]("max", ctx_r14.value);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngModel", ctx_r14.currentValue);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngModel", ctx_r14.currentValue);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngModel", ctx_r14.value);
} }
var _c0 = function () { return { stripPrefix: false }; };
function GameDataElementComponent_ng_container_0_ng_container_1_ng_container_8_Template(rf, ctx) { if (rf & 1) {
    var _r34 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "span", 22);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](2, " \u00A0\u00A0URL\u7DE8\u96C6:");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](3, "input", 23);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("change", function GameDataElementComponent_ng_container_0_ng_container_1_ng_container_8_Template_input_change_3_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r34); var ctx_r33 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](3); return ctx_r33.changeChk(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](4, "textarea", 24);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("ngModelChange", function GameDataElementComponent_ng_container_0_ng_container_1_ng_container_8_Template_textarea_ngModelChange_4_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r34); var ctx_r35 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](3); return ctx_r35.value = $event; })("focus", function GameDataElementComponent_ng_container_0_ng_container_1_ng_container_8_Template_textarea_focus_4_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r34); var ctx_r36 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](3); return ctx_r36.textFocus(ctx_r36.gameDataElement.myIdentifer + "_elm"); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](5, "          ");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](6, "div", 25);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](7, "span", 26);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](8, "linky");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var ctx_r15 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("hidden", !ctx_r15.isUrlText(ctx_r15.value));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpropertyInterpolate"]("id", ctx_r15.gameDataElement.myIdentifer + "_elm");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngModel", ctx_r15.value)("hidden", !ctx_r15.isEditUrl(ctx_r15.gameDataElement.myIdentifer + "_elm") && ctx_r15.isUrlText(ctx_r15.gameDataElement.value));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("hidden", ctx_r15.isEditUrl(ctx_r15.gameDataElement.myIdentifer + "_elm") || !ctx_r15.isUrlText(ctx_r15.gameDataElement.value));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("innerHTML", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind2"](8, 6, ctx_r15.escapeHtml(ctx_r15.value), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction0"](9, _c0)), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵsanitizeHtml"]);
} }
function GameDataElementComponent_ng_container_0_ng_container_1_ng_container_9_ng_container_1_Template(rf, ctx) { if (rf & 1) {
    var _r40 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "div", 27);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](3, "input", 28);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("ngModelChange", function GameDataElementComponent_ng_container_0_ng_container_1_ng_container_9_ng_container_1_Template_input_ngModelChange_3_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r40); var ctx_r39 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](4); return ctx_r39.value = $event; });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var ctx_r37 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate"](ctx_r37.value);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngModel", ctx_r37.value);
} }
function GameDataElementComponent_ng_container_0_ng_container_1_ng_container_9_ng_container_2_img_3_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](0, "img", 35);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](1, "safe");
} if (rf & 2) {
    var ctx_r41 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](5);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("src", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind2"](1, 2, ctx_r41.imageFileUrl, "resourceUrl"), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵsanitizeUrl"])("alt", ctx_r41.gameDataElement.value);
} }
function GameDataElementComponent_ng_container_0_ng_container_1_ng_container_9_ng_container_2_Template(rf, ctx) { if (rf & 1) {
    var _r43 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "div", 29);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](2, "div", 30);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](3, GameDataElementComponent_ng_container_0_ng_container_1_ng_container_9_ng_container_2_img_3_Template, 2, 5, "img", 31);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](4, "div", 32);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](5, "span");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](6);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](7, "input", 33);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("ngModelChange", function GameDataElementComponent_ng_container_0_ng_container_1_ng_container_9_ng_container_2_Template_input_ngModelChange_7_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r43); var ctx_r42 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](4); return ctx_r42.currentValue = $event; });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](8, "button", 34);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function GameDataElementComponent_ng_container_0_ng_container_1_ng_container_9_ng_container_2_Template_button_click_8_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r43); var ctx_r44 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](4); return ctx_r44.openModal("imageIdentifier", true); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](9, "\u8B8A\u66F4\u5716\u7247");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var ctx_r38 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r38.imageFileUrl);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate1"]("\u7ACB\u7E6A\u7DE8\u865F", ctx_r38.indexNum, ": ");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngModel", ctx_r38.currentValue);
} }
function GameDataElementComponent_ng_container_0_ng_container_1_ng_container_9_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](1, GameDataElementComponent_ng_container_0_ng_container_1_ng_container_9_ng_container_1_Template, 4, 2, "ng-container", 0);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](2, GameDataElementComponent_ng_container_0_ng_container_1_ng_container_9_ng_container_2_Template, 10, 3, "ng-container", 0);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var ctx_r16 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", !ctx_r16.isImage);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r16.isImage);
} }
function GameDataElementComponent_ng_container_0_ng_container_1_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](1, GameDataElementComponent_ng_container_0_ng_container_1_div_1_Template, 4, 3, "div", 5);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](2, "div", 6);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](3, GameDataElementComponent_ng_container_0_ng_container_1_ng_container_3_Template, 2, 1, "ng-container", 0);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](4, GameDataElementComponent_ng_container_0_ng_container_1_ng_container_4_Template, 2, 1, "ng-container", 0);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](5, "div", 7);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerStart"](6, 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](7, GameDataElementComponent_ng_container_0_ng_container_1_ng_container_7_Template, 7, 9, "ng-container", 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](8, GameDataElementComponent_ng_container_0_ng_container_1_ng_container_8_Template, 9, 10, "ng-container", 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](9, GameDataElementComponent_ng_container_0_ng_container_1_ng_container_9_Template, 3, 2, "ng-container", 10);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var ctx_r9 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r9.isEdit);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r9.isTagLocked);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", !ctx_r9.isTagLocked);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngSwitch", ctx_r9.gameDataElement.type);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngSwitchCase", "numberResource");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngSwitchCase", "note");
} }
function GameDataElementComponent_ng_container_0_ng_container_2_div_1_ng_container_1_ng_container_1_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainer"](0);
} }
function GameDataElementComponent_ng_container_0_ng_container_2_div_1_ng_container_1_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](1, GameDataElementComponent_ng_container_0_ng_container_2_div_1_ng_container_1_ng_container_1_Template, 1, 0, "ng-container", 11);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](4);
    var _r7 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵreference"](8);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngTemplateOutlet", _r7);
} }
function GameDataElementComponent_ng_container_0_ng_container_2_div_1_ng_container_2_ng_container_1_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainer"](0);
} }
function GameDataElementComponent_ng_container_0_ng_container_2_div_1_ng_container_2_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](1, GameDataElementComponent_ng_container_0_ng_container_2_div_1_ng_container_2_ng_container_1_Template, 1, 0, "ng-container", 11);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](4);
    var _r1 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵreference"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngTemplateOutlet", _r1);
} }
function GameDataElementComponent_ng_container_0_ng_container_2_div_1_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 41);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](1, GameDataElementComponent_ng_container_0_ng_container_2_div_1_ng_container_1_Template, 2, 1, "ng-container", 0);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](2, GameDataElementComponent_ng_container_0_ng_container_2_div_1_ng_container_2_Template, 2, 1, "ng-container", 0);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    var ctx_r45 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r45.isImage);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", !ctx_r45.isImage);
} }
function GameDataElementComponent_ng_container_0_ng_container_2_ng_container_5_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "div", 42);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var ctx_r46 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate"](ctx_r46.name);
} }
function GameDataElementComponent_ng_container_0_ng_container_2_ng_container_6_Template(rf, ctx) { if (rf & 1) {
    var _r54 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "input", 43);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("ngModelChange", function GameDataElementComponent_ng_container_0_ng_container_2_ng_container_6_Template_input_ngModelChange_1_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r54); var ctx_r53 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](3); return ctx_r53.name = $event; });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var ctx_r47 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngModel", ctx_r47.name);
} }
function GameDataElementComponent_ng_container_0_ng_container_2_div_7_div_1_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](0, "div", 46);
} if (rf & 2) {
    var childElement_r56 = ctx.$implicit;
    var i_r57 = ctx.index;
    var ctx_r55 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("gameDataElement", childElement_r56)("isEdit", ctx_r55.isEdit)("isTagLocked", ctx_r55.isTagLocked)("isImage", ctx_r55.isImage)("indexNum", i_r57);
} }
function GameDataElementComponent_ng_container_0_ng_container_2_div_7_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 44);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](1, GameDataElementComponent_ng_container_0_ng_container_2_div_7_div_1_Template, 1, 5, "div", 45);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    var ctx_r48 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngForOf", ctx_r48.gameDataElement.children);
} }
function GameDataElementComponent_ng_container_0_ng_container_2_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](1, GameDataElementComponent_ng_container_0_ng_container_2_div_1_Template, 3, 2, "div", 36);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](2, "div", 37);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](3, "div", 38);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](4, "div", 39);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](5, GameDataElementComponent_ng_container_0_ng_container_2_ng_container_5_Template, 3, 1, "ng-container", 0);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](6, GameDataElementComponent_ng_container_0_ng_container_2_ng_container_6_Template, 2, 1, "ng-container", 0);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](7, GameDataElementComponent_ng_container_0_ng_container_2_div_7_Template, 2, 1, "div", 40);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var ctx_r10 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r10.isEdit);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r10.isTagLocked);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", !ctx_r10.isTagLocked);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", 0 < ctx_r10.gameDataElement.children.length);
} }
function GameDataElementComponent_ng_container_0_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](1, GameDataElementComponent_ng_container_0_ng_container_1_Template, 10, 6, "ng-container", 0);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](2, GameDataElementComponent_ng_container_0_ng_container_2_Template, 8, 4, "ng-container", 0);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r0.gameDataElement.children.length < 1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", 0 < ctx_r0.gameDataElement.children.length);
} }
function GameDataElementComponent_ng_template_1_Template(rf, ctx) { if (rf & 1) {
    var _r59 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "button", 47);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function GameDataElementComponent_ng_template_1_Template_button_click_0_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r59); var ctx_r58 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](); return ctx_r58.addElement(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "i", 48);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](2, "add_circle");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](3, "button", 47);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function GameDataElementComponent_ng_template_1_Template_button_click_3_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r59); var ctx_r60 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](); return ctx_r60.upElement(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](4, "i", 48);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](5, "arrow_upward");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](6, "br");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](7, "button", 47);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function GameDataElementComponent_ng_template_1_Template_button_click_7_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r59); var ctx_r61 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](); return ctx_r61.deleteElement(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](8, "i", 48);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](9, "remove_circle_outline");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](10, "button", 47);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function GameDataElementComponent_ng_template_1_Template_button_click_10_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r59); var ctx_r62 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](); return ctx_r62.downElement(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](11, "i", 48);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](12, "arrow_downward");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} }
function GameDataElementComponent_ng_template_3_Template(rf, ctx) { if (rf & 1) {
    var _r64 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "button", 49);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "i", 48);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](2, "remove_circle_outline");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](3, "button", 47);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function GameDataElementComponent_ng_template_3_Template_button_click_3_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r64); var ctx_r63 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](); return ctx_r63.upElement(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](4, "i", 48);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](5, "arrow_upward");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](6, "br");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](7, "button", 47);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function GameDataElementComponent_ng_template_3_Template_button_click_7_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r64); var ctx_r65 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](); return ctx_r65.deleteImageElement(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](8, "i", 48);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](9, "remove_circle_outline");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](10, "button", 47);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function GameDataElementComponent_ng_template_3_Template_button_click_10_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r64); var ctx_r66 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](); return ctx_r66.downElement(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](11, "i", 48);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](12, "arrow_downward");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} }
function GameDataElementComponent_ng_template_5_Template(rf, ctx) { if (rf & 1) {
    var _r68 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "button", 49);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "i", 48);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](2, "remove_circle_outline");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](3, "button", 47);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function GameDataElementComponent_ng_template_5_Template_button_click_3_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r68); var ctx_r67 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](); return ctx_r67.upElement(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](4, "i", 48);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](5, "arrow_upward");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](6, "br");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](7, "button", 49);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](8, "i", 48);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](9, "remove_circle_outline");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](10, "button", 47);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function GameDataElementComponent_ng_template_5_Template_button_click_10_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r68); var ctx_r69 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](); return ctx_r69.downElement(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](11, "i", 48);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](12, "arrow_downward");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} }
function GameDataElementComponent_ng_template_7_Template(rf, ctx) { if (rf & 1) {
    var _r71 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "button", 47);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function GameDataElementComponent_ng_template_7_Template_button_click_0_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r71); var ctx_r70 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](); return ctx_r70.addImageElement(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "i", 48);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](2, "add_circle");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} }
var GameDataElementComponent = /** @class */ (function () {
    function GameDataElementComponent(panelService, modalService, changeDetector) {
        this.panelService = panelService;
        this.modalService = modalService;
        this.changeDetector = changeDetector;
        this.gameDataElement = null;
        this.isEdit = false;
        this.isTagLocked = false;
        this.isValueLocked = false;
        this.isImage = false;
        this.indexNum = 0;
        this._name = '';
        this._value = 0;
        this._currentValue = 0;
        this.updateTimer = null;
    }
    Object.defineProperty(GameDataElementComponent.prototype, "name", {
        get: function () { return this._name; },
        set: function (name) { this._name = name; this.setUpdateTimer(); },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(GameDataElementComponent.prototype, "value", {
        get: function () { return this._value; },
        set: function (value) { this._value = value; this.setUpdateTimer(); },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(GameDataElementComponent.prototype, "currentValue", {
        get: function () { return this._currentValue; },
        set: function (currentValue) { this._currentValue = currentValue; this.setUpdateTimer(); },
        enumerable: false,
        configurable: true
    });
    GameDataElementComponent.prototype.ngOnInit = function () {
        var _this = this;
        if (this.gameDataElement)
            this.setValues(this.gameDataElement);
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_1__["EventSystem"].register(this)
            .on('UPDATE_GAME_OBJECT', -1000, function (event) {
            if (_this.gameDataElement && event.data.identifier === _this.gameDataElement.identifier) {
                _this.setValues(_this.gameDataElement);
                _this.changeDetector.markForCheck();
            }
        })
            .on('DELETE_GAME_OBJECT', -1000, function (event) {
            if (_this.gameDataElement && _this.gameDataElement.identifier === event.data.identifier) {
                _this.changeDetector.markForCheck();
            }
        });
    };
    GameDataElementComponent.prototype.ngOnDestroy = function () {
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_1__["EventSystem"].unregister(this);
    };
    GameDataElementComponent.prototype.ngAfterViewInit = function () {
    };
    Object.defineProperty(GameDataElementComponent.prototype, "imageFileUrl", {
        get: function () {
            var image = _udonarium_core_file_storage_image_storage__WEBPACK_IMPORTED_MODULE_3__["ImageStorage"].instance.get(this.gameDataElement.value);
            if (image)
                return image.url;
            return '';
        },
        enumerable: false,
        configurable: true
    });
    GameDataElementComponent.prototype.openModal = function (name, isAllowedEmpty) {
        var _this = this;
        if (name === void 0) { name = ''; }
        if (isAllowedEmpty === void 0) { isAllowedEmpty = false; }
        this.modalService.open(component_file_selecter_file_selecter_component__WEBPACK_IMPORTED_MODULE_4__["FileSelecterComponent"], { isAllowedEmpty: isAllowedEmpty }).then(function (value) {
            //      if (!this.tabletopObject || !this.tabletopObject.imageDataElement || !value) return;
            if (!value)
                return;
            var element = _this.gameDataElement;
            if (!element)
                return;
            element.value = value;
        });
    };
    GameDataElementComponent.prototype.addImageElement = function () {
        this.gameDataElement.appendChild(_udonarium_data_element__WEBPACK_IMPORTED_MODULE_2__["DataElement"].create('imageIdentifier', '', { type: 'image' }));
    };
    GameDataElementComponent.prototype.addElement = function () {
        this.gameDataElement.appendChild(_udonarium_data_element__WEBPACK_IMPORTED_MODULE_2__["DataElement"].create('標籤', '', {}));
    };
    GameDataElementComponent.prototype.deleteElement = function () {
        this.gameDataElement.destroy();
    };
    GameDataElementComponent.prototype.deleteImageElement = function () {
        if (this.gameDataElement.parent.children[0] != this.gameDataElement)
            this.gameDataElement.destroy();
    };
    GameDataElementComponent.prototype.upElement = function () {
        var parentElement = this.gameDataElement.parent;
        var index = parentElement.children.indexOf(this.gameDataElement);
        if (0 < index) {
            var prevElement = parentElement.children[index - 1];
            parentElement.insertBefore(this.gameDataElement, prevElement);
        }
    };
    GameDataElementComponent.prototype.downElement = function () {
        var parentElement = this.gameDataElement.parent;
        var index = parentElement.children.indexOf(this.gameDataElement);
        if (index < parentElement.children.length - 1) {
            var nextElement = parentElement.children[index + 1];
            parentElement.insertBefore(nextElement, this.gameDataElement);
        }
    };
    GameDataElementComponent.prototype.setElementType = function (type) {
        this.gameDataElement.setAttribute('type', type);
    };
    GameDataElementComponent.prototype.setValues = function (object) {
        this._name = object.name;
        this._currentValue = object.currentValue;
        this._value = object.value;
    };
    GameDataElementComponent.prototype.setUpdateTimer = function () {
        var _this = this;
        clearTimeout(this.updateTimer);
        this.updateTimer = setTimeout(function () {
            if (_this.gameDataElement.name !== _this.name)
                _this.gameDataElement.name = _this.name;
            if (_this.gameDataElement.currentValue !== _this.currentValue)
                _this.gameDataElement.currentValue = _this.currentValue;
            if (_this.gameDataElement.value !== _this.value)
                _this.gameDataElement.value = _this.value;
            _this.updateTimer = null;
        }, 66);
    };
    GameDataElementComponent.prototype.escapeHtml = function (text) {
        return text.replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;")
            .replace(/"/g, "&quot;").replace(/'/g, "&#039;");
    };
    GameDataElementComponent.prototype.isEditUrl = function (dataElmIdentifier) {
        var box = document.getElementById(dataElmIdentifier);
        if (!box)
            return false;
        return box.checked;
    };
    GameDataElementComponent.prototype.isUrlText = function (text) {
        if (text.match(/^https:\/\//))
            return true;
        if (text.match(/^http:\/\//))
            return true;
        return false;
    };
    GameDataElementComponent.prototype.changeChk = function () {
        //実処理なし
    };
    GameDataElementComponent.prototype.textFocus = function (dataElmIdentifier) {
        var box = document.getElementById(dataElmIdentifier);
        box.checked = true;
    };
    GameDataElementComponent.ɵfac = function GameDataElementComponent_Factory(t) { return new (t || GameDataElementComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](service_panel_service__WEBPACK_IMPORTED_MODULE_5__["PanelService"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](service_modal_service__WEBPACK_IMPORTED_MODULE_6__["ModalService"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["ChangeDetectorRef"])); };
    GameDataElementComponent.ɵcmp = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineComponent"]({ type: GameDataElementComponent, selectors: [["game-data-element"], ["", "game-data-element", ""]], inputs: { gameDataElement: "gameDataElement", isEdit: "isEdit", isTagLocked: "isTagLocked", isValueLocked: "isValueLocked", isImage: "isImage", indexNum: "indexNum" }, decls: 9, vars: 1, consts: [[4, "ngIf"], ["editButtons", ""], ["editButtonsImageTop", ""], ["editButtonsImageMiddle", ""], ["editButtonsImageTitle", ""], ["class", "table-cell table-cell_solid", 4, "ngIf"], [1, "table-cell", "table-cell_solid"], [1, "table-cell"], [3, "ngSwitch"], [4, "ngSwitchCase"], [4, "ngSwitchDefault"], [4, "ngTemplateOutlet"], [3, "ngModel", "change"], ["value", ""], ["value", "numberResource"], ["value", "note"], [2, "font-family", "Cambria, Georgia", "font-size", "0.9rem"], [1, "hidden-spacer", 2, "font-family", "Cambria, Georgia", "font-size", "0.9rem"], ["size", "1", "placeholder", "Value", 2, "width", "100%", "min-width", "10px", "font-family", "Cambria, Georgia", "font-size", "0.9rem", 3, "ngModel", "ngModelChange"], ["type", "range", "min", "0", 3, "ngModel", "max", "ngModelChange"], ["size", "1", "type", "number", "placeholder", "Value", 2, "width", "5em", "text-align", "right", 3, "ngModel", "ngModelChange"], ["size", "1", "type", "number", "placeholder", "Value", 2, "width", "5em", 3, "ngModel", "ngModelChange"], [2, "font-size", "0.8em", 3, "hidden"], ["type", "checkbox", 3, "id", "change"], ["placeholder", "Note", 1, "textarea-url", 2, "width", "100%", "height", "5em", "min-width", "50px", "resize", "none", "font-size", "0.8em", 3, "ngModel", "hidden", "ngModelChange", "focus"], [2, "width", "100%", "max-width", "200px", "min-width", "50px", 3, "hidden"], [1, "textarea-url", 2, "width", "100%", "min-width", "50px", "font-size", "0.8em", 3, "innerHTML"], [1, "hidden-spacer", 2, "font-size", "1.0em", "font-family", "Cambria, Georgia"], ["size", "1", "placeholder", "Value", 2, "width", "100%", "min-width", "10px", 3, "ngModel", "ngModelChange"], [1, "table-2"], [1, "table-cell-2", "sub-image-box"], ["class", "sub-image", 3, "src", "alt", 4, "ngIf"], [1, "table-cell-2", "sub-table"], ["size", "1", "placeholder", "\u7ACB\u7E6A\u540D\u7A31", 2, "width", "100%", "min-width", "10px", 3, "ngModel", "ngModelChange"], [1, "tachie-button", 2, "font-size", "1.0em", 3, "click"], [1, "sub-image", 3, "src", "alt"], ["class", "table-cell table-cell_solid", "style", "vertical-align: top;", 4, "ngIf"], [1, "table-cell", "table-cell_inner-table", 2, "padding", "0", "width", "0"], [1, "table-cell_inner-table"], [1, "table-cell_inner-table-title"], ["class", "table", 4, "ngIf"], [1, "table-cell", "table-cell_solid", 2, "vertical-align", "top"], [2, "padding", "2px", "font-family", "Cambria, Georgia", "font-size", "1.0rem", "font-weight", "bold"], ["size", "1", "placeholder", "Value", 2, "width", "100%", "min-width", "10px", "font-family", "Cambria, Georgia", "font-size", "1.0rem", "font-weight", "bold", 3, "ngModel", "ngModelChange"], [1, "table"], ["game-data-element", "", "class", "table-row", 3, "gameDataElement", "isEdit", "isTagLocked", "isImage", "indexNum", 4, "ngFor", "ngForOf"], ["game-data-element", "", 1, "table-row", 3, "gameDataElement", "isEdit", "isTagLocked", "isImage", "indexNum"], [3, "click"], [1, "material-icons"], [1, "dummy", 2, "visibility", "hidden"]], template: function GameDataElementComponent_Template(rf, ctx) { if (rf & 1) {
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](0, GameDataElementComponent_ng_container_0_Template, 3, 2, "ng-container", 0);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](1, GameDataElementComponent_ng_template_1_Template, 13, 0, "ng-template", null, 1, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplateRefExtractor"]);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](3, GameDataElementComponent_ng_template_3_Template, 13, 0, "ng-template", null, 2, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplateRefExtractor"]);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](5, GameDataElementComponent_ng_template_5_Template, 13, 0, "ng-template", null, 3, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplateRefExtractor"]);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](7, GameDataElementComponent_ng_template_7_Template, 3, 0, "ng-template", null, 4, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplateRefExtractor"]);
        } if (rf & 2) {
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx.gameDataElement);
        } }, directives: [_angular_common__WEBPACK_IMPORTED_MODULE_7__["NgIf"], _angular_common__WEBPACK_IMPORTED_MODULE_7__["NgSwitch"], _angular_common__WEBPACK_IMPORTED_MODULE_7__["NgSwitchCase"], _angular_common__WEBPACK_IMPORTED_MODULE_7__["NgSwitchDefault"], _angular_common__WEBPACK_IMPORTED_MODULE_7__["NgTemplateOutlet"], _angular_forms__WEBPACK_IMPORTED_MODULE_8__["SelectControlValueAccessor"], _angular_forms__WEBPACK_IMPORTED_MODULE_8__["NgControlStatus"], _angular_forms__WEBPACK_IMPORTED_MODULE_8__["NgModel"], _angular_forms__WEBPACK_IMPORTED_MODULE_8__["NgSelectOption"], _angular_forms__WEBPACK_IMPORTED_MODULE_8__["ɵangular_packages_forms_forms_x"], _angular_forms__WEBPACK_IMPORTED_MODULE_8__["DefaultValueAccessor"], _angular_forms__WEBPACK_IMPORTED_MODULE_8__["RangeValueAccessor"], _angular_forms__WEBPACK_IMPORTED_MODULE_8__["NumberValueAccessor"], _angular_common__WEBPACK_IMPORTED_MODULE_7__["NgForOf"], GameDataElementComponent], pipes: [pipe_safe_pipe__WEBPACK_IMPORTED_MODULE_9__["SafePipe"], ngx_linky__WEBPACK_IMPORTED_MODULE_10__["LinkyPipe"]], styles: [".tachie-button[_ngcontent-%COMP%]{\r\n  background-color: #EEE;\r\n  color: #444;\r\n  font-size: 1.0em;\r\n  margin: 5px 0px;\r\n  padding: 10px;\r\n  box-sizing: border-box;\r\n  width: 6.0em;\r\n}\r\n.tachie-button[_ngcontent-%COMP%]:hover{\r\n  background-color: #CCC;\r\n  color: #444;\r\n}\r\n.sub-image[_ngcontent-%COMP%] {\r\n  height: 120px;\r\n  display: inline-block;\r\n\r\n  max-height: 120px;\r\n  vertical-align: top;\r\n  text-align: center;\r\n}\r\n.sub-image-box[_ngcontent-%COMP%]{\r\n  width:  120px;\r\n  height: 120px;\r\n}\r\n.sub-table[_ngcontent-%COMP%]{\r\n  width: calc(100% - 120px);\r\n}\r\n.table-cell-2[_ngcontent-%COMP%] {\r\n  display: table-cell;\r\n}\r\n.table-2[_ngcontent-%COMP%] {\r\n  display: table;\r\n  width :100%;\r\n}\r\n.game-data-element[_ngcontent-%COMP%]{\r\n  margin-left: 10px;\r\n}\r\n.table[_ngcontent-%COMP%] {\r\n  display:table; \r\n  \r\n  \r\n  width :100%;\r\n  box-sizing: border-box;\r\n\r\n}\r\n.table-row[_ngcontent-%COMP%] {\r\n  padding-top: 10px;\r\n  display:table-row;\r\n  \r\n  \r\n  \r\n  box-sizing: border-box;\r\n  }\r\n.table-cell[_ngcontent-%COMP%] {\r\n  display:table-cell;\r\n  vertical-align: bottom;\r\n  padding: 0.5em 0.0em 0.1em 0.5em;\r\n  \r\n  border-bottom:1px dotted #888;\r\n  box-sizing: border-box;\r\n}\r\n.table-cell_solid[_ngcontent-%COMP%] {\r\n  width :10px;\r\n  white-space: nowrap;\r\n}\r\n.table-cell_inner-table[_ngcontent-%COMP%] {\r\n  display:table-cell;\r\n  vertical-align: bottom;\r\n  padding: 0.2em 0.0em 0.1em 0.5em;\r\n  border: none;\r\n  \r\n  box-sizing: border-box;\r\n}\r\n.table-cell_inner-table-title[_ngcontent-%COMP%] {\r\n  border-bottom: 1px solid #444;\r\n  border-left: 8px solid #444;\r\n  padding-left:8px;\r\n}\r\n.box[_ngcontent-%COMP%] {\r\n  display: inline-block;\r\n  margin: 10px;\r\n  \r\n}\r\n.hidden-spacer[_ngcontent-%COMP%] {\r\n  visibility: hidden;\r\n  height: 0;\r\n  \r\n  max-width : 20em;\r\n  overflow: hidden;\r\n  padding: 0 3px;\r\n  box-sizing: border-box;\r\n}\r\n.textarea-url[_ngcontent-%COMP%]{\r\n  background: none;\r\n  border: none;\r\n  border-radius: 2px;\r\n  outline: none;\r\n\r\n  color: #444;\r\n  font-family: Cambria, Georgia;\r\n  padding: 2px;\r\n  box-sizing: border-box;\r\n\r\n  white-space: pre-wrap;\r\n  word-wrap: break-word;\r\n  overflow-wrap: anywhere;\r\n  word-break: break-word;\r\n}\r\n\r\ninput[_ngcontent-%COMP%], button[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{\r\n\r\n  background: none;\r\n  border: none;\r\n  border-radius: 2px;\r\n  outline: none;\r\n\r\n  color: #444;\r\n  font-family: Cambria, Georgia;\r\n  font-size: 1.0em;\r\n  padding: 2px;\r\n  box-sizing: border-box;\r\n}\r\ninput[_ngcontent-%COMP%]:hover, textarea[_ngcontent-%COMP%]:hover, select[_ngcontent-%COMP%]:hover  {\r\n  background: #EEE;\r\n}\r\ninput[_ngcontent-%COMP%]:focus, textarea[_ngcontent-%COMP%]:focus, select[_ngcontent-%COMP%]:focus  {\r\n  background: #FFF;\r\n}\r\nbutton[_ngcontent-%COMP%]   i[_ngcontent-%COMP%] {\r\n  font-size: 1.0rem;\r\n}\r\nbutton[_ngcontent-%COMP%]:hover  {\r\n  background: #444;\r\n  color: #CCC;\r\n}\r\n.table-cell[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{\r\n  font-size: 0.5rem;\r\n}\r\ninput[type='range'][_ngcontent-%COMP%] {\r\n  --slider-track-color: transparent; \r\n  --slider-fill-color: #555; \r\n  --slider-border-color: #777;\r\n  --slider-height: 0.8em;\r\n  --slider-thumb-size: 1.0em;\r\n  --range: calc(var(--max) - var(--min));\r\n  --ratio: calc((var(--val) - var(--min))/var(--range));\r\n  --sx: calc(.5*var(--slider-thumb-size) + var(--ratio)*(100% - var(--slider-thumb-size)));\r\n  margin: 0;\r\n  padding: 0;\r\n  background: transparent;\r\n  font: 1em/1 arial, sans-serif;\r\n  outline: 0;\r\n  -webkit-appearance: none;\r\n     -moz-appearance: none;\r\n          appearance: none;\r\n}\r\ninput[type='range'][_ngcontent-%COMP%], input[type='range'][_ngcontent-%COMP%]::-webkit-slider-thumb {\r\n  -webkit-appearance: none;\r\n}\r\ninput[type='range'][_ngcontent-%COMP%]::-webkit-slider-runnable-track {\r\n  box-sizing: border-box;\r\n  border-top: solid 1px var(--slider-border-color);\r\n  border-bottom: solid 1px var(--slider-border-color);\r\n  border-radius: var(--slider-height);\r\n  height: var(--slider-height);\r\n  background: var(--slider-track-color);\r\n}\r\ninput[type='range'][_ngcontent-%COMP%]::-webkit-slider-runnable-track {\r\n  background: linear-gradient(var(--slider-fill-color), var(--slider-fill-color)) 0/var(--sx) 100% no-repeat var(--slider-track-color);\r\n  cursor: pointer;\r\n}\r\ninput[type='range'][_ngcontent-%COMP%]::-moz-range-track {\r\n  box-sizing: border-box;\r\n  border: solid 1px var(--slider-border-color);\r\n  border-radius: var(--slider-height);\r\n  height: var(--slider-height);\r\n  background: var(--slider-track-color);\r\n}\r\ninput[type='range'][_ngcontent-%COMP%]::-ms-track {\r\n  box-sizing: border-box;\r\n  border: solid 1px var(--slider-border-color);\r\n  border-radius: var(--slider-height);\r\n  height: var(--slider-height);\r\n  background: var(--slider-track-color);\r\n}\r\ninput[type='range'][_ngcontent-%COMP%]::-moz-range-progress {\r\n  height: var(--slider-height);\r\n  background: var(--slider-fill-color);\r\n  border-radius: var(--slider-height);\r\n}\r\ninput[type='range'][_ngcontent-%COMP%]::-ms-fill-lower {\r\n  height: var(--slider-height);\r\n  background: var(--slider-fill-color);\r\n  border-radius: var(--slider-height);\r\n}\r\ninput[type='range'][_ngcontent-%COMP%]::-webkit-slider-thumb {\r\n  margin-top: calc((var(--slider-height) - var(--slider-thumb-size)) / 2 - 1px);\r\n  width: var(--slider-thumb-size);\r\n  height: var(--slider-thumb-size);\r\n  box-sizing: border-box;\r\n  border: solid 1px  var(--slider-border-color);\r\n  border-radius: 2em;\r\n  background: #ddd;\r\n  cursor: pointer;\r\n}\r\ninput[type='range'][_ngcontent-%COMP%]::-moz-range-thumb {\r\n  width: var(--slider-thumb-size);\r\n  height: var(--slider-thumb-size);\r\n  box-sizing: border-box;\r\n  border: solid 1px  var(--slider-border-color);\r\n  border-radius: 2em;\r\n  background: #ddd;\r\n  cursor: pointer;\r\n}\r\ninput[type='range'][_ngcontent-%COMP%]::-ms-thumb {\r\n  margin-top: 0;\r\n  width: var(--slider-thumb-size);\r\n  height: var(--slider-thumb-size);\r\n  box-sizing: border-box;\r\n  border: solid 1px  var(--slider-border-color);\r\n  border-radius: 2em;\r\n  background: #ddd;\r\n  cursor: pointer;\r\n}\r\ninput[type='range'][_ngcontent-%COMP%]::-ms-tooltip {\r\n  display: none;\r\n}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImdhbWUtZGF0YS1lbGVtZW50LmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsR0FBRztBQUNIO0VBQ0Usc0JBQXNCO0VBQ3RCLFdBQVc7RUFDWCxnQkFBZ0I7RUFDaEIsZUFBZTtFQUNmLGFBQWE7RUFDYixzQkFBc0I7RUFDdEIsWUFBWTtBQUNkO0FBRUE7RUFDRSxzQkFBc0I7RUFDdEIsV0FBVztBQUNiO0FBRUE7RUFDRSxhQUFhO0VBQ2IscUJBQXFCO0FBQ3ZCLHNCQUFzQjtFQUNwQixpQkFBaUI7RUFDakIsbUJBQW1CO0VBQ25CLGtCQUFrQjtBQUNwQjtBQUVBO0VBQ0UsYUFBYTtFQUNiLGFBQWE7QUFDZjtBQUdBO0VBQ0UseUJBQXlCO0FBQzNCO0FBRUE7RUFDRSxtQkFBbUI7QUFDckI7QUFFQTtFQUNFLGNBQWM7RUFDZCxXQUFXO0FBQ2I7QUFFQTtFQUNFLGlCQUFpQjtBQUNuQjtBQUNBO0VBQ0UsYUFBYTtFQUNiLHNCQUFzQjtFQUN0Qiw0QkFBNEI7RUFDNUIsV0FBVztFQUNYLHNCQUFzQjs7QUFFeEI7QUFDQTtFQUNFLGlCQUFpQjtFQUNqQixpQkFBaUI7RUFDakIsNEJBQTRCO0VBQzVCLGlDQUFpQztFQUNqQyxlQUFlO0VBQ2Ysc0JBQXNCO0VBQ3RCO0FBQ0Y7RUFDRSxrQkFBa0I7RUFDbEIsc0JBQXNCO0VBQ3RCLGdDQUFnQztFQUNoQyw0QkFBNEI7RUFDNUIsNkJBQTZCO0VBQzdCLHNCQUFzQjtBQUN4QjtBQUNBO0VBQ0UsV0FBVztFQUNYLG1CQUFtQjtBQUNyQjtBQUNBO0VBQ0Usa0JBQWtCO0VBQ2xCLHNCQUFzQjtFQUN0QixnQ0FBZ0M7RUFDaEMsWUFBWTtFQUNaLGdDQUFnQztFQUNoQyxzQkFBc0I7QUFDeEI7QUFDQTtFQUNFLDZCQUE2QjtFQUM3QiwyQkFBMkI7RUFDM0IsZ0JBQWdCO0FBQ2xCO0FBQ0E7RUFDRSxxQkFBcUI7RUFDckIsWUFBWTtFQUNaLHlCQUF5QjtBQUMzQjtBQUNBO0VBQ0Usa0JBQWtCO0VBQ2xCLFNBQVM7RUFDVCxvQkFBb0I7RUFDcEIsZ0JBQWdCO0VBQ2hCLGdCQUFnQjtFQUNoQixjQUFjO0VBQ2Qsc0JBQXNCO0FBQ3hCO0FBRUE7RUFDRSxnQkFBZ0I7RUFDaEIsWUFBWTtFQUNaLGtCQUFrQjtFQUNsQixhQUFhOztFQUViLFdBQVc7RUFDWCw2QkFBNkI7RUFDN0IsWUFBWTtFQUNaLHNCQUFzQjs7RUFFdEIscUJBQXFCO0VBQ3JCLHFCQUFxQjtFQUNyQix1QkFBdUI7RUFDdkIsc0JBQXNCO0FBQ3hCO0FBRUEsVUFBVTtBQUNWO0FBQ0EsV0FBVztFQUNULGdCQUFnQjtFQUNoQixZQUFZO0VBQ1osa0JBQWtCO0VBQ2xCLGFBQWE7O0VBRWIsV0FBVztFQUNYLDZCQUE2QjtFQUM3QixnQkFBZ0I7RUFDaEIsWUFBWTtFQUNaLHNCQUFzQjtBQUN4QjtBQUVBO0VBQ0UsZ0JBQWdCO0FBQ2xCO0FBQ0E7RUFDRSxnQkFBZ0I7QUFDbEI7QUFDQTtFQUNFLGlCQUFpQjtBQUNuQjtBQUVBO0VBQ0UsZ0JBQWdCO0VBQ2hCLFdBQVc7QUFDYjtBQUVBO0VBQ0UsaUJBQWlCO0FBQ25CO0FBRUE7RUFDRSxpQ0FBaUMsRUFBRSxTQUFTO0VBQzVDLHlCQUF5QixFQUFFLFFBQVE7RUFDbkMsMkJBQTJCO0VBQzNCLHNCQUFzQjtFQUN0QiwwQkFBMEI7RUFDMUIsc0NBQXNDO0VBQ3RDLHFEQUFxRDtFQUNyRCx3RkFBd0Y7RUFDeEYsU0FBUztFQUNULFVBQVU7RUFDVix1QkFBdUI7RUFDdkIsNkJBQTZCO0VBQzdCLFVBQVU7RUFDVix3QkFBZ0I7S0FBaEIscUJBQWdCO1VBQWhCLGdCQUFnQjtBQUNsQjtBQUVBO0VBQ0Usd0JBQXdCO0FBQzFCO0FBRUE7RUFDRSxzQkFBc0I7RUFDdEIsZ0RBQWdEO0VBQ2hELG1EQUFtRDtFQUNuRCxtQ0FBbUM7RUFDbkMsNEJBQTRCO0VBQzVCLHFDQUFxQztBQUN2QztBQUVBO0VBQ0Usb0lBQW9JO0VBQ3BJLGVBQWU7QUFDakI7QUFFQTtFQUNFLHNCQUFzQjtFQUN0Qiw0Q0FBNEM7RUFDNUMsbUNBQW1DO0VBQ25DLDRCQUE0QjtFQUM1QixxQ0FBcUM7QUFDdkM7QUFFQTtFQUNFLHNCQUFzQjtFQUN0Qiw0Q0FBNEM7RUFDNUMsbUNBQW1DO0VBQ25DLDRCQUE0QjtFQUM1QixxQ0FBcUM7QUFDdkM7QUFFQTtFQUNFLDRCQUE0QjtFQUM1QixvQ0FBb0M7RUFDcEMsbUNBQW1DO0FBQ3JDO0FBRUE7RUFDRSw0QkFBNEI7RUFDNUIsb0NBQW9DO0VBQ3BDLG1DQUFtQztBQUNyQztBQUVBO0VBQ0UsNkVBQTZFO0VBQzdFLCtCQUErQjtFQUMvQixnQ0FBZ0M7RUFDaEMsc0JBQXNCO0VBQ3RCLDZDQUE2QztFQUM3QyxrQkFBa0I7RUFDbEIsZ0JBQWdCO0VBQ2hCLGVBQWU7QUFDakI7QUFFQTtFQUNFLCtCQUErQjtFQUMvQixnQ0FBZ0M7RUFDaEMsc0JBQXNCO0VBQ3RCLDZDQUE2QztFQUM3QyxrQkFBa0I7RUFDbEIsZ0JBQWdCO0VBQ2hCLGVBQWU7QUFDakI7QUFFQTtFQUNFLGFBQWE7RUFDYiwrQkFBK0I7RUFDL0IsZ0NBQWdDO0VBQ2hDLHNCQUFzQjtFQUN0Qiw2Q0FBNkM7RUFDN0Msa0JBQWtCO0VBQ2xCLGdCQUFnQjtFQUNoQixlQUFlO0FBQ2pCO0FBRUE7RUFDRSxhQUFhO0FBQ2YiLCJmaWxlIjoiZ2FtZS1kYXRhLWVsZW1lbnQuY29tcG9uZW50LmNzcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKi9cclxuLnRhY2hpZS1idXR0b257XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogI0VFRTtcclxuICBjb2xvcjogIzQ0NDtcclxuICBmb250LXNpemU6IDEuMGVtO1xyXG4gIG1hcmdpbjogNXB4IDBweDtcclxuICBwYWRkaW5nOiAxMHB4O1xyXG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XHJcbiAgd2lkdGg6IDYuMGVtO1xyXG59XHJcblxyXG4udGFjaGllLWJ1dHRvbjpob3ZlcntcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiAjQ0NDO1xyXG4gIGNvbG9yOiAjNDQ0O1xyXG59XHJcblxyXG4uc3ViLWltYWdlIHtcclxuICBoZWlnaHQ6IDEyMHB4O1xyXG4gIGRpc3BsYXk6IGlubGluZS1ibG9jaztcclxuLyogIG1heC13aWR0aDogMTIwcHg7Ki9cclxuICBtYXgtaGVpZ2h0OiAxMjBweDtcclxuICB2ZXJ0aWNhbC1hbGlnbjogdG9wO1xyXG4gIHRleHQtYWxpZ246IGNlbnRlcjtcclxufVxyXG5cclxuLnN1Yi1pbWFnZS1ib3h7XHJcbiAgd2lkdGg6ICAxMjBweDtcclxuICBoZWlnaHQ6IDEyMHB4O1xyXG59XHJcblxyXG5cclxuLnN1Yi10YWJsZXtcclxuICB3aWR0aDogY2FsYygxMDAlIC0gMTIwcHgpO1xyXG59XHJcblxyXG4udGFibGUtY2VsbC0yIHtcclxuICBkaXNwbGF5OiB0YWJsZS1jZWxsO1xyXG59XHJcblxyXG4udGFibGUtMiB7XHJcbiAgZGlzcGxheTogdGFibGU7XHJcbiAgd2lkdGggOjEwMCU7XHJcbn1cclxuXHJcbi5nYW1lLWRhdGEtZWxlbWVudHtcclxuICBtYXJnaW4tbGVmdDogMTBweDtcclxufVxyXG4udGFibGUge1xyXG4gIGRpc3BsYXk6dGFibGU7IFxyXG4gIC8qcGFkZGluZy1sZWZ0OiAxMHB4OyovXHJcbiAgLypib3JkZXI6MXB4IHNvbGlkICNGRjAwMDA7Ki9cclxuICB3aWR0aCA6MTAwJTtcclxuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xyXG5cclxufVxyXG4udGFibGUtcm93IHtcclxuICBwYWRkaW5nLXRvcDogMTBweDtcclxuICBkaXNwbGF5OnRhYmxlLXJvdztcclxuICAvKmJvcmRlcjo1cHggc29saWQgIzAwRkYwMDsqL1xyXG4gIC8qYm9yZGVyLWJvdHRvbToxcHggZG90dGVkICM4ODg7Ki9cclxuICAvKndpZHRoIDoxMDAlOyovXHJcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcclxuICB9XHJcbi50YWJsZS1jZWxsIHtcclxuICBkaXNwbGF5OnRhYmxlLWNlbGw7XHJcbiAgdmVydGljYWwtYWxpZ246IGJvdHRvbTtcclxuICBwYWRkaW5nOiAwLjVlbSAwLjBlbSAwLjFlbSAwLjVlbTtcclxuICAvKmJvcmRlcjoxcHggc29saWQgIzAwMDBGRjsqL1xyXG4gIGJvcmRlci1ib3R0b206MXB4IGRvdHRlZCAjODg4O1xyXG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XHJcbn1cclxuLnRhYmxlLWNlbGxfc29saWQge1xyXG4gIHdpZHRoIDoxMHB4O1xyXG4gIHdoaXRlLXNwYWNlOiBub3dyYXA7XHJcbn1cclxuLnRhYmxlLWNlbGxfaW5uZXItdGFibGUge1xyXG4gIGRpc3BsYXk6dGFibGUtY2VsbDtcclxuICB2ZXJ0aWNhbC1hbGlnbjogYm90dG9tO1xyXG4gIHBhZGRpbmc6IDAuMmVtIDAuMGVtIDAuMWVtIDAuNWVtO1xyXG4gIGJvcmRlcjogbm9uZTtcclxuICAvKmJvcmRlci1ib3R0b206MXB4IHNvbGlkICMwZmY7Ki9cclxuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xyXG59XHJcbi50YWJsZS1jZWxsX2lubmVyLXRhYmxlLXRpdGxlIHtcclxuICBib3JkZXItYm90dG9tOiAxcHggc29saWQgIzQ0NDtcclxuICBib3JkZXItbGVmdDogOHB4IHNvbGlkICM0NDQ7XHJcbiAgcGFkZGluZy1sZWZ0OjhweDtcclxufVxyXG4uYm94IHtcclxuICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XHJcbiAgbWFyZ2luOiAxMHB4O1xyXG4gIC8qYm9yZGVyOjFweCBzb2xpZCAjRkZGOyovXHJcbn1cclxuLmhpZGRlbi1zcGFjZXIge1xyXG4gIHZpc2liaWxpdHk6IGhpZGRlbjtcclxuICBoZWlnaHQ6IDA7XHJcbiAgLypiYWNrZ3JvdW5kOiAjMEZGOyovXHJcbiAgbWF4LXdpZHRoIDogMjBlbTtcclxuICBvdmVyZmxvdzogaGlkZGVuO1xyXG4gIHBhZGRpbmc6IDAgM3B4O1xyXG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XHJcbn1cclxuXHJcbi50ZXh0YXJlYS11cmx7XHJcbiAgYmFja2dyb3VuZDogbm9uZTtcclxuICBib3JkZXI6IG5vbmU7XHJcbiAgYm9yZGVyLXJhZGl1czogMnB4O1xyXG4gIG91dGxpbmU6IG5vbmU7XHJcblxyXG4gIGNvbG9yOiAjNDQ0O1xyXG4gIGZvbnQtZmFtaWx5OiBDYW1icmlhLCBHZW9yZ2lhO1xyXG4gIHBhZGRpbmc6IDJweDtcclxuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xyXG5cclxuICB3aGl0ZS1zcGFjZTogcHJlLXdyYXA7XHJcbiAgd29yZC13cmFwOiBicmVhay13b3JkO1xyXG4gIG92ZXJmbG93LXdyYXA6IGFueXdoZXJlO1xyXG4gIHdvcmQtYnJlYWs6IGJyZWFrLXdvcmQ7XHJcbn1cclxuXHJcbi8qYnV0dG9uLCovXHJcbmlucHV0LCBidXR0b24sIHRleHRhcmVhLCBzZWxlY3R7XHJcbi8qLmlucHV0IHsqL1xyXG4gIGJhY2tncm91bmQ6IG5vbmU7XHJcbiAgYm9yZGVyOiBub25lO1xyXG4gIGJvcmRlci1yYWRpdXM6IDJweDtcclxuICBvdXRsaW5lOiBub25lO1xyXG5cclxuICBjb2xvcjogIzQ0NDtcclxuICBmb250LWZhbWlseTogQ2FtYnJpYSwgR2VvcmdpYTtcclxuICBmb250LXNpemU6IDEuMGVtO1xyXG4gIHBhZGRpbmc6IDJweDtcclxuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xyXG59XHJcblxyXG5pbnB1dDpob3ZlciwgdGV4dGFyZWE6aG92ZXIsIHNlbGVjdDpob3ZlciAge1xyXG4gIGJhY2tncm91bmQ6ICNFRUU7XHJcbn1cclxuaW5wdXQ6Zm9jdXMsIHRleHRhcmVhOmZvY3VzLCBzZWxlY3Q6Zm9jdXMgIHtcclxuICBiYWNrZ3JvdW5kOiAjRkZGO1xyXG59XHJcbmJ1dHRvbiBpIHtcclxuICBmb250LXNpemU6IDEuMHJlbTtcclxufVxyXG5cclxuYnV0dG9uOmhvdmVyICB7XHJcbiAgYmFja2dyb3VuZDogIzQ0NDtcclxuICBjb2xvcjogI0NDQztcclxufVxyXG5cclxuLnRhYmxlLWNlbGwgYnV0dG9ue1xyXG4gIGZvbnQtc2l6ZTogMC41cmVtO1xyXG59XHJcblxyXG5pbnB1dFt0eXBlPSdyYW5nZSddIHtcclxuICAtLXNsaWRlci10cmFjay1jb2xvcjogdHJhbnNwYXJlbnQ7IC8qICNjY2MgKi9cclxuICAtLXNsaWRlci1maWxsLWNvbG9yOiAjNTU1OyAvKiM3NzcgKi9cclxuICAtLXNsaWRlci1ib3JkZXItY29sb3I6ICM3Nzc7XHJcbiAgLS1zbGlkZXItaGVpZ2h0OiAwLjhlbTtcclxuICAtLXNsaWRlci10aHVtYi1zaXplOiAxLjBlbTtcclxuICAtLXJhbmdlOiBjYWxjKHZhcigtLW1heCkgLSB2YXIoLS1taW4pKTtcclxuICAtLXJhdGlvOiBjYWxjKCh2YXIoLS12YWwpIC0gdmFyKC0tbWluKSkvdmFyKC0tcmFuZ2UpKTtcclxuICAtLXN4OiBjYWxjKC41KnZhcigtLXNsaWRlci10aHVtYi1zaXplKSArIHZhcigtLXJhdGlvKSooMTAwJSAtIHZhcigtLXNsaWRlci10aHVtYi1zaXplKSkpO1xyXG4gIG1hcmdpbjogMDtcclxuICBwYWRkaW5nOiAwO1xyXG4gIGJhY2tncm91bmQ6IHRyYW5zcGFyZW50O1xyXG4gIGZvbnQ6IDFlbS8xIGFyaWFsLCBzYW5zLXNlcmlmO1xyXG4gIG91dGxpbmU6IDA7XHJcbiAgYXBwZWFyYW5jZTogbm9uZTtcclxufVxyXG5cclxuaW5wdXRbdHlwZT0ncmFuZ2UnXSwgaW5wdXRbdHlwZT0ncmFuZ2UnXTo6LXdlYmtpdC1zbGlkZXItdGh1bWIge1xyXG4gIC13ZWJraXQtYXBwZWFyYW5jZTogbm9uZTtcclxufVxyXG5cclxuaW5wdXRbdHlwZT0ncmFuZ2UnXTo6LXdlYmtpdC1zbGlkZXItcnVubmFibGUtdHJhY2sge1xyXG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XHJcbiAgYm9yZGVyLXRvcDogc29saWQgMXB4IHZhcigtLXNsaWRlci1ib3JkZXItY29sb3IpO1xyXG4gIGJvcmRlci1ib3R0b206IHNvbGlkIDFweCB2YXIoLS1zbGlkZXItYm9yZGVyLWNvbG9yKTtcclxuICBib3JkZXItcmFkaXVzOiB2YXIoLS1zbGlkZXItaGVpZ2h0KTtcclxuICBoZWlnaHQ6IHZhcigtLXNsaWRlci1oZWlnaHQpO1xyXG4gIGJhY2tncm91bmQ6IHZhcigtLXNsaWRlci10cmFjay1jb2xvcik7XHJcbn1cclxuXHJcbmlucHV0W3R5cGU9J3JhbmdlJ106Oi13ZWJraXQtc2xpZGVyLXJ1bm5hYmxlLXRyYWNrIHtcclxuICBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQodmFyKC0tc2xpZGVyLWZpbGwtY29sb3IpLCB2YXIoLS1zbGlkZXItZmlsbC1jb2xvcikpIDAvdmFyKC0tc3gpIDEwMCUgbm8tcmVwZWF0IHZhcigtLXNsaWRlci10cmFjay1jb2xvcik7XHJcbiAgY3Vyc29yOiBwb2ludGVyO1xyXG59XHJcblxyXG5pbnB1dFt0eXBlPSdyYW5nZSddOjotbW96LXJhbmdlLXRyYWNrIHtcclxuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xyXG4gIGJvcmRlcjogc29saWQgMXB4IHZhcigtLXNsaWRlci1ib3JkZXItY29sb3IpO1xyXG4gIGJvcmRlci1yYWRpdXM6IHZhcigtLXNsaWRlci1oZWlnaHQpO1xyXG4gIGhlaWdodDogdmFyKC0tc2xpZGVyLWhlaWdodCk7XHJcbiAgYmFja2dyb3VuZDogdmFyKC0tc2xpZGVyLXRyYWNrLWNvbG9yKTtcclxufVxyXG5cclxuaW5wdXRbdHlwZT0ncmFuZ2UnXTo6LW1zLXRyYWNrIHtcclxuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xyXG4gIGJvcmRlcjogc29saWQgMXB4IHZhcigtLXNsaWRlci1ib3JkZXItY29sb3IpO1xyXG4gIGJvcmRlci1yYWRpdXM6IHZhcigtLXNsaWRlci1oZWlnaHQpO1xyXG4gIGhlaWdodDogdmFyKC0tc2xpZGVyLWhlaWdodCk7XHJcbiAgYmFja2dyb3VuZDogdmFyKC0tc2xpZGVyLXRyYWNrLWNvbG9yKTtcclxufVxyXG5cclxuaW5wdXRbdHlwZT0ncmFuZ2UnXTo6LW1vei1yYW5nZS1wcm9ncmVzcyB7XHJcbiAgaGVpZ2h0OiB2YXIoLS1zbGlkZXItaGVpZ2h0KTtcclxuICBiYWNrZ3JvdW5kOiB2YXIoLS1zbGlkZXItZmlsbC1jb2xvcik7XHJcbiAgYm9yZGVyLXJhZGl1czogdmFyKC0tc2xpZGVyLWhlaWdodCk7XHJcbn1cclxuXHJcbmlucHV0W3R5cGU9J3JhbmdlJ106Oi1tcy1maWxsLWxvd2VyIHtcclxuICBoZWlnaHQ6IHZhcigtLXNsaWRlci1oZWlnaHQpO1xyXG4gIGJhY2tncm91bmQ6IHZhcigtLXNsaWRlci1maWxsLWNvbG9yKTtcclxuICBib3JkZXItcmFkaXVzOiB2YXIoLS1zbGlkZXItaGVpZ2h0KTtcclxufVxyXG5cclxuaW5wdXRbdHlwZT0ncmFuZ2UnXTo6LXdlYmtpdC1zbGlkZXItdGh1bWIge1xyXG4gIG1hcmdpbi10b3A6IGNhbGMoKHZhcigtLXNsaWRlci1oZWlnaHQpIC0gdmFyKC0tc2xpZGVyLXRodW1iLXNpemUpKSAvIDIgLSAxcHgpO1xyXG4gIHdpZHRoOiB2YXIoLS1zbGlkZXItdGh1bWItc2l6ZSk7XHJcbiAgaGVpZ2h0OiB2YXIoLS1zbGlkZXItdGh1bWItc2l6ZSk7XHJcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcclxuICBib3JkZXI6IHNvbGlkIDFweCAgdmFyKC0tc2xpZGVyLWJvcmRlci1jb2xvcik7XHJcbiAgYm9yZGVyLXJhZGl1czogMmVtO1xyXG4gIGJhY2tncm91bmQ6ICNkZGQ7XHJcbiAgY3Vyc29yOiBwb2ludGVyO1xyXG59XHJcblxyXG5pbnB1dFt0eXBlPSdyYW5nZSddOjotbW96LXJhbmdlLXRodW1iIHtcclxuICB3aWR0aDogdmFyKC0tc2xpZGVyLXRodW1iLXNpemUpO1xyXG4gIGhlaWdodDogdmFyKC0tc2xpZGVyLXRodW1iLXNpemUpO1xyXG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XHJcbiAgYm9yZGVyOiBzb2xpZCAxcHggIHZhcigtLXNsaWRlci1ib3JkZXItY29sb3IpO1xyXG4gIGJvcmRlci1yYWRpdXM6IDJlbTtcclxuICBiYWNrZ3JvdW5kOiAjZGRkO1xyXG4gIGN1cnNvcjogcG9pbnRlcjtcclxufVxyXG5cclxuaW5wdXRbdHlwZT0ncmFuZ2UnXTo6LW1zLXRodW1iIHtcclxuICBtYXJnaW4tdG9wOiAwO1xyXG4gIHdpZHRoOiB2YXIoLS1zbGlkZXItdGh1bWItc2l6ZSk7XHJcbiAgaGVpZ2h0OiB2YXIoLS1zbGlkZXItdGh1bWItc2l6ZSk7XHJcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcclxuICBib3JkZXI6IHNvbGlkIDFweCAgdmFyKC0tc2xpZGVyLWJvcmRlci1jb2xvcik7XHJcbiAgYm9yZGVyLXJhZGl1czogMmVtO1xyXG4gIGJhY2tncm91bmQ6ICNkZGQ7XHJcbiAgY3Vyc29yOiBwb2ludGVyO1xyXG59XHJcblxyXG5pbnB1dFt0eXBlPSdyYW5nZSddOjotbXMtdG9vbHRpcCB7XHJcbiAgZGlzcGxheTogbm9uZTtcclxufVxyXG4iXX0= */"], changeDetection: 0 });
    return GameDataElementComponent;
}());

/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](GameDataElementComponent, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"],
        args: [{
                selector: 'game-data-element, [game-data-element]',
                templateUrl: './game-data-element.component.html',
                styleUrls: ['./game-data-element.component.css'],
                changeDetection: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ChangeDetectionStrategy"].OnPush
            }]
    }], function () { return [{ type: service_panel_service__WEBPACK_IMPORTED_MODULE_5__["PanelService"] }, { type: service_modal_service__WEBPACK_IMPORTED_MODULE_6__["ModalService"] }, { type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ChangeDetectorRef"] }]; }, { gameDataElement: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], isEdit: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], isTagLocked: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], isValueLocked: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], isImage: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], indexNum: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }] }); })();


/***/ }),

/***/ "Dmu7":
/*!*******************************!*\
  !*** ./src/app/class/room.ts ***!
  \*******************************/
/*! exports provided: Room */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Room", function() { return Room; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "mrSG");
/* harmony import */ var _card__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./card */ "jiu3");
/* harmony import */ var _card_stack__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./card-stack */ "23G+");
/* harmony import */ var _core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./core/synchronize-object/decorator */ "1lIu");
/* harmony import */ var _core_synchronize_object_game_object__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./core/synchronize-object/game-object */ "xdgh");
/* harmony import */ var _core_synchronize_object_object_serializer__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./core/synchronize-object/object-serializer */ "MDT1");
/* harmony import */ var _core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./core/synchronize-object/object-store */ "hm7o");
/* harmony import */ var _dice_symbol__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./dice-symbol */ "l22b");
/* harmony import */ var _game_character__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./game-character */ "M/aK");
/* harmony import */ var _game_table__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./game-table */ "RDF6");
/* harmony import */ var _game_table_mask__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./game-table-mask */ "AyjR");
/* harmony import */ var _terrain__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./terrain */ "gKYc");
/* harmony import */ var _text_note__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./text-note */ "WeD8");
/* harmony import */ var _cut_in__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./cut-in */ "pq3H");
/* harmony import */ var _dice_table__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./dice-table */ "NjCw");















var Room = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"])(Room, _super);
    function Room() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    // GameObject Lifecycle
    Room.prototype.onStoreAdded = function () {
        _super.prototype.onStoreAdded.call(this);
        _core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_6__["ObjectStore"].instance.remove(this); // ObjectStoreには登録しない
    };
    Room.prototype.innerXml = function () {
        var e_1, _a;
        var xml = '';
        var objects = [];
        objects = objects.concat(_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_6__["ObjectStore"].instance.getObjects(_game_table__WEBPACK_IMPORTED_MODULE_9__["GameTable"]));
        objects = objects.concat(_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_6__["ObjectStore"].instance.getObjects(_game_character__WEBPACK_IMPORTED_MODULE_8__["GameCharacter"]));
        objects = objects.concat(_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_6__["ObjectStore"].instance.getObjects(_text_note__WEBPACK_IMPORTED_MODULE_12__["TextNote"]));
        objects = objects.concat(_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_6__["ObjectStore"].instance.getObjects(_card_stack__WEBPACK_IMPORTED_MODULE_2__["CardStack"]));
        objects = objects.concat(_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_6__["ObjectStore"].instance.getObjects(_card__WEBPACK_IMPORTED_MODULE_1__["Card"]).filter(function (obj) { return obj.parent === null; }));
        objects = objects.concat(_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_6__["ObjectStore"].instance.getObjects(_dice_symbol__WEBPACK_IMPORTED_MODULE_7__["DiceSymbol"]));
        objects = objects.concat(_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_6__["ObjectStore"].instance.getObjects(_cut_in__WEBPACK_IMPORTED_MODULE_13__["CutIn"]));
        objects = objects.concat(_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_6__["ObjectStore"].instance.getObjects(_dice_table__WEBPACK_IMPORTED_MODULE_14__["DiceTable"]));
        try {
            for (var objects_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(objects), objects_1_1 = objects_1.next(); !objects_1_1.done; objects_1_1 = objects_1.next()) {
                var object = objects_1_1.value;
                xml += object.toXml();
            }
        }
        catch (e_1_1) { e_1 = { error: e_1_1 }; }
        finally {
            try {
                if (objects_1_1 && !objects_1_1.done && (_a = objects_1.return)) _a.call(objects_1);
            }
            finally { if (e_1) throw e_1.error; }
        }
        return xml;
    };
    Room.prototype.parseInnerXml = function (element) {
        var e_2, _a;
        var objects = [];
        objects = objects.concat(_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_6__["ObjectStore"].instance.getObjects(_game_table__WEBPACK_IMPORTED_MODULE_9__["GameTable"]));
        objects = objects.concat(_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_6__["ObjectStore"].instance.getObjects(_game_table_mask__WEBPACK_IMPORTED_MODULE_10__["GameTableMask"]));
        objects = objects.concat(_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_6__["ObjectStore"].instance.getObjects(_terrain__WEBPACK_IMPORTED_MODULE_11__["Terrain"]));
        objects = objects.concat(_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_6__["ObjectStore"].instance.getObjects(_game_character__WEBPACK_IMPORTED_MODULE_8__["GameCharacter"]));
        objects = objects.concat(_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_6__["ObjectStore"].instance.getObjects(_text_note__WEBPACK_IMPORTED_MODULE_12__["TextNote"]));
        objects = objects.concat(_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_6__["ObjectStore"].instance.getObjects(_card_stack__WEBPACK_IMPORTED_MODULE_2__["CardStack"]));
        objects = objects.concat(_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_6__["ObjectStore"].instance.getObjects(_card__WEBPACK_IMPORTED_MODULE_1__["Card"]));
        objects = objects.concat(_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_6__["ObjectStore"].instance.getObjects(_dice_symbol__WEBPACK_IMPORTED_MODULE_7__["DiceSymbol"]));
        objects = objects.concat(_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_6__["ObjectStore"].instance.getObjects(_cut_in__WEBPACK_IMPORTED_MODULE_13__["CutIn"]));
        objects = objects.concat(_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_6__["ObjectStore"].instance.getObjects(_dice_table__WEBPACK_IMPORTED_MODULE_14__["DiceTable"]));
        try {
            for (var objects_2 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(objects), objects_2_1 = objects_2.next(); !objects_2_1.done; objects_2_1 = objects_2.next()) {
                var object = objects_2_1.value;
                object.destroy();
            }
        }
        catch (e_2_1) { e_2 = { error: e_2_1 }; }
        finally {
            try {
                if (objects_2_1 && !objects_2_1.done && (_a = objects_2.return)) _a.call(objects_2);
            }
            finally { if (e_2) throw e_2.error; }
        }
        for (var i = 0; i < element.children.length; i++) {
            _core_synchronize_object_object_serializer__WEBPACK_IMPORTED_MODULE_5__["ObjectSerializer"].instance.parseXml(element.children[i]);
        }
    };
    Room = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_3__["SyncObject"])('room')
    ], Room);
    return Room;
}(_core_synchronize_object_game_object__WEBPACK_IMPORTED_MODULE_4__["GameObject"]));



/***/ }),

/***/ "EfKb":
/*!****************************************************!*\
  !*** ./src/app/component/modal/modal.component.ts ***!
  \****************************************************/
/*! exports provided: ModalComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ModalComponent", function() { return ModalComponent; });
/* harmony import */ var _angular_animations__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/animations */ "R0Ic");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "fXoL");
/* harmony import */ var service_modal_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! service/modal.service */ "CE6K");




var _c0 = ["content"];
var _c1 = ["*"];
var ModalComponent = /** @class */ (function () {
    function ModalComponent(modalService) {
        this.modalService = modalService;
    }
    ModalComponent.prototype.clickBackground = function (event) {
        if (event.target === event.currentTarget)
            this.resolve();
    };
    ModalComponent.prototype.resolve = function () {
        this.modalService.resolve(null);
    };
    ModalComponent.prototype.reject = function () {
        this.modalService.reject();
    };
    ModalComponent.ɵfac = function ModalComponent_Factory(t) { return new (t || ModalComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdirectiveInject"](service_modal_service__WEBPACK_IMPORTED_MODULE_2__["ModalService"])); };
    ModalComponent.ɵcmp = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdefineComponent"]({ type: ModalComponent, selectors: [["modal"]], viewQuery: function ModalComponent_Query(rf, ctx) { if (rf & 1) {
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵstaticViewQuery"](_c0, true, _angular_core__WEBPACK_IMPORTED_MODULE_1__["ViewContainerRef"]);
        } if (rf & 2) {
            var _t = void 0;
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵqueryRefresh"](_t = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵloadQuery"]()) && (ctx.content = _t.first);
        } }, ngContentSelectors: _c1, decls: 13, vars: 3, consts: [[1, "component"], [1, "modal-background", 3, "click"], [1, "modal-panel"], [1, "title"], [1, "title-button"], [3, "click"], [1, "material-icons", 2, "font-size", "14px"], [1, "scrollable-panel"], ["content", ""]], template: function ModalComponent_Template(rf, ctx) { if (rf & 1) {
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵprojectionDef"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "div", 0);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](1, "div", 1);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("click", function ModalComponent_Template_div_click_1_listener($event) { return ctx.clickBackground($event); });
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](2, "div", 2);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](3, "div", 3);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](4, "div", 4);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](5, "button", 5);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("click", function ModalComponent_Template_button_click_5_listener() { return ctx.resolve(); });
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](6, "i", 6);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](7, "close");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](8);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](9, "div", 7);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵprojection"](10);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelement"](11, "div", null, 8);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
        } if (rf & 2) {
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("@bgInOut", "in");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("@flyInOut", "in");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](6);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtextInterpolate1"](" ", ctx.modalService.title, " ");
        } }, styles: [".component[_ngcontent-%COMP%] {\r\n  box-sizing: border-box;\r\n  position: absolute;\r\n  top :0;\r\n  bottom :0;\r\n  left :0;\r\n  right :0;\r\n  z-index: 9999;\r\n\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n\r\n  overscroll-behavior: contain;\r\n  -webkit-overflow-scrolling: touch;\r\n}\r\n\r\n.modal-background[_ngcontent-%COMP%] {\r\n  box-sizing: border-box;\r\n  position: absolute;\r\n  color: #CCC;\r\n  background-color: rgba(30, 30, 30, 0.3);\r\n  top :0;\r\n  bottom :0;\r\n  left :0;\r\n  right :0;\r\n  z-index: -1;\r\n}\r\n\r\n.modal-panel[_ngcontent-%COMP%] {\r\n  box-sizing: border-box;\r\n  overflow: hidden;\r\n\r\n  color: #444;\r\n  background: linear-gradient(-30deg, rgba(240,218,189, 0.9), rgba(255, 244, 232, 0.9));\r\n  border:solid 1px #999;\r\n\r\n  height: auto;\r\n  max-height: calc(100% - 10px);\r\n  width: 800px;\r\n  max-width: 100%;\r\n}\r\n\r\n.title[_ngcontent-%COMP%]{\r\n  position: relative;\r\n  overflow: hidden;\r\n  white-space: nowrap;\r\n  box-sizing: border-box;\r\n  font-size: 12px;\r\n  height: 25px;\r\n  padding: 2px 5px;\r\n  width: 100%;\r\n  background-color: #CCC;\r\n  color: #444;\r\n}\r\n\r\n.title-button[_ngcontent-%COMP%] {\r\n  position: absolute;\r\n  right: 0;\r\n  top: 0;\r\n}\r\n\r\n.title[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] {\r\n  background: none;\r\n  border: none;\r\n  border-radius: 0;\r\n  outline: none;\r\n  color: #444;\r\n}\r\n\r\n.header[_ngcontent-%COMP%], .content[_ngcontent-%COMP%], footer[_ngcontent-%COMP%]{\r\n  padding: 10px;\r\n}\r\n\r\n.scrollable-panel[_ngcontent-%COMP%] {\r\n  box-sizing: border-box;\r\n  overflow: auto;\r\n  max-height: calc(100vh - 41px);\r\n  width: 100%;\r\n  padding: 8px;\r\n}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1vZGFsLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxzQkFBc0I7RUFDdEIsa0JBQWtCO0VBQ2xCLE1BQU07RUFDTixTQUFTO0VBQ1QsT0FBTztFQUNQLFFBQVE7RUFDUixhQUFhOztFQUViLGFBQWE7RUFDYixtQkFBbUI7RUFDbkIsdUJBQXVCOztFQUV2Qiw0QkFBNEI7RUFDNUIsaUNBQWlDO0FBQ25DOztBQUVBO0VBQ0Usc0JBQXNCO0VBQ3RCLGtCQUFrQjtFQUNsQixXQUFXO0VBQ1gsdUNBQXVDO0VBQ3ZDLE1BQU07RUFDTixTQUFTO0VBQ1QsT0FBTztFQUNQLFFBQVE7RUFDUixXQUFXO0FBQ2I7O0FBRUE7RUFDRSxzQkFBc0I7RUFDdEIsZ0JBQWdCOztFQUVoQixXQUFXO0VBQ1gscUZBQXFGO0VBQ3JGLHFCQUFxQjs7RUFFckIsWUFBWTtFQUNaLDZCQUE2QjtFQUM3QixZQUFZO0VBQ1osZUFBZTtBQUNqQjs7QUFFQTtFQUNFLGtCQUFrQjtFQUNsQixnQkFBZ0I7RUFDaEIsbUJBQW1CO0VBQ25CLHNCQUFzQjtFQUN0QixlQUFlO0VBQ2YsWUFBWTtFQUNaLGdCQUFnQjtFQUNoQixXQUFXO0VBQ1gsc0JBQXNCO0VBQ3RCLFdBQVc7QUFDYjs7QUFFQTtFQUNFLGtCQUFrQjtFQUNsQixRQUFRO0VBQ1IsTUFBTTtBQUNSOztBQUVBO0VBQ0UsZ0JBQWdCO0VBQ2hCLFlBQVk7RUFDWixnQkFBZ0I7RUFDaEIsYUFBYTtFQUNiLFdBQVc7QUFDYjs7QUFFQTtFQUNFLGFBQWE7QUFDZjs7QUFFQTtFQUNFLHNCQUFzQjtFQUN0QixjQUFjO0VBQ2QsOEJBQThCO0VBQzlCLFdBQVc7RUFDWCxZQUFZO0FBQ2QiLCJmaWxlIjoibW9kYWwuY29tcG9uZW50LmNzcyIsInNvdXJjZXNDb250ZW50IjpbIi5jb21wb25lbnQge1xyXG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XHJcbiAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gIHRvcCA6MDtcclxuICBib3R0b20gOjA7XHJcbiAgbGVmdCA6MDtcclxuICByaWdodCA6MDtcclxuICB6LWluZGV4OiA5OTk5O1xyXG5cclxuICBkaXNwbGF5OiBmbGV4O1xyXG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XHJcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XHJcblxyXG4gIG92ZXJzY3JvbGwtYmVoYXZpb3I6IGNvbnRhaW47XHJcbiAgLXdlYmtpdC1vdmVyZmxvdy1zY3JvbGxpbmc6IHRvdWNoO1xyXG59XHJcblxyXG4ubW9kYWwtYmFja2dyb3VuZCB7XHJcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcclxuICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgY29sb3I6ICNDQ0M7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgzMCwgMzAsIDMwLCAwLjMpO1xyXG4gIHRvcCA6MDtcclxuICBib3R0b20gOjA7XHJcbiAgbGVmdCA6MDtcclxuICByaWdodCA6MDtcclxuICB6LWluZGV4OiAtMTtcclxufVxyXG5cclxuLm1vZGFsLXBhbmVsIHtcclxuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xyXG4gIG92ZXJmbG93OiBoaWRkZW47XHJcblxyXG4gIGNvbG9yOiAjNDQ0O1xyXG4gIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCgtMzBkZWcsIHJnYmEoMjQwLDIxOCwxODksIDAuOSksIHJnYmEoMjU1LCAyNDQsIDIzMiwgMC45KSk7XHJcbiAgYm9yZGVyOnNvbGlkIDFweCAjOTk5O1xyXG5cclxuICBoZWlnaHQ6IGF1dG87XHJcbiAgbWF4LWhlaWdodDogY2FsYygxMDAlIC0gMTBweCk7XHJcbiAgd2lkdGg6IDgwMHB4O1xyXG4gIG1heC13aWR0aDogMTAwJTtcclxufVxyXG5cclxuLnRpdGxle1xyXG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcclxuICBvdmVyZmxvdzogaGlkZGVuO1xyXG4gIHdoaXRlLXNwYWNlOiBub3dyYXA7XHJcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcclxuICBmb250LXNpemU6IDEycHg7XHJcbiAgaGVpZ2h0OiAyNXB4O1xyXG4gIHBhZGRpbmc6IDJweCA1cHg7XHJcbiAgd2lkdGg6IDEwMCU7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogI0NDQztcclxuICBjb2xvcjogIzQ0NDtcclxufVxyXG5cclxuLnRpdGxlLWJ1dHRvbiB7XHJcbiAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gIHJpZ2h0OiAwO1xyXG4gIHRvcDogMDtcclxufVxyXG5cclxuLnRpdGxlIGJ1dHRvbiB7XHJcbiAgYmFja2dyb3VuZDogbm9uZTtcclxuICBib3JkZXI6IG5vbmU7XHJcbiAgYm9yZGVyLXJhZGl1czogMDtcclxuICBvdXRsaW5lOiBub25lO1xyXG4gIGNvbG9yOiAjNDQ0O1xyXG59XHJcblxyXG4uaGVhZGVyLCAuY29udGVudCwgZm9vdGVye1xyXG4gIHBhZGRpbmc6IDEwcHg7XHJcbn1cclxuXHJcbi5zY3JvbGxhYmxlLXBhbmVsIHtcclxuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xyXG4gIG92ZXJmbG93OiBhdXRvO1xyXG4gIG1heC1oZWlnaHQ6IGNhbGMoMTAwdmggLSA0MXB4KTtcclxuICB3aWR0aDogMTAwJTtcclxuICBwYWRkaW5nOiA4cHg7XHJcbn0iXX0= */"], data: { animation: [
                Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["trigger"])('flyInOut', [
                    Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["transition"])('void => *', [
                        Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["animate"])('100ms ease-out', Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["keyframes"])([
                            Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])({ transform: 'scale(0.8, 0.8)', opacity: '0', offset: 0 }),
                            Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])({ transform: 'scale(1.0, 1.0)', opacity: '1.0', offset: 1.0 })
                        ]))
                    ]),
                    Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["transition"])('* => void', [
                        Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["animate"])(100, Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])({ transform: 'scale(0, 0)' }))
                    ])
                ]),
                Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["trigger"])('bgInOut', [
                    Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["state"])('in', Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])({ 'background-color': 'rgba(30, 30, 30, 0.4)' })),
                    Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["transition"])('void => *', [
                        Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])({ 'background-color': 'rgba(30, 30, 30, 0.0)' }), Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["animate"])(200)
                    ]),
                    Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["transition"])('* => void', [
                        Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["animate"])(200, Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])({ 'background-color': 'rgba(30, 30, 30, 0.0)' }))
                    ])
                ]),
            ] } });
    return ModalComponent;
}());

/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵsetClassMetadata"](ModalComponent, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_1__["Component"],
        args: [{
                selector: 'modal',
                templateUrl: './modal.component.html',
                styleUrls: ['./modal.component.css'],
                animations: [
                    Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["trigger"])('flyInOut', [
                        Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["transition"])('void => *', [
                            Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["animate"])('100ms ease-out', Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["keyframes"])([
                                Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])({ transform: 'scale(0.8, 0.8)', opacity: '0', offset: 0 }),
                                Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])({ transform: 'scale(1.0, 1.0)', opacity: '1.0', offset: 1.0 })
                            ]))
                        ]),
                        Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["transition"])('* => void', [
                            Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["animate"])(100, Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])({ transform: 'scale(0, 0)' }))
                        ])
                    ]),
                    Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["trigger"])('bgInOut', [
                        Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["state"])('in', Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])({ 'background-color': 'rgba(30, 30, 30, 0.4)' })),
                        Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["transition"])('void => *', [
                            Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])({ 'background-color': 'rgba(30, 30, 30, 0.0)' }), Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["animate"])(200)
                        ]),
                        Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["transition"])('* => void', [
                            Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["animate"])(200, Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])({ 'background-color': 'rgba(30, 30, 30, 0.0)' }))
                        ])
                    ]),
                ]
            }]
    }], function () { return [{ type: service_modal_service__WEBPACK_IMPORTED_MODULE_2__["ModalService"] }]; }, { content: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_1__["ViewChild"],
            args: ['content', { read: _angular_core__WEBPACK_IMPORTED_MODULE_1__["ViewContainerRef"], static: true }]
        }] }); })();


/***/ }),

/***/ "F+Vt":
/*!************************************************************!*\
  !*** ./src/app/component/peer-menu/peer-menu.component.ts ***!
  \************************************************************/
/*! exports provided: PeerMenuComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PeerMenuComponent", function() { return PeerMenuComponent; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "mrSG");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "fXoL");
/* harmony import */ var _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @udonarium/core/synchronize-object/object-store */ "hm7o");
/* harmony import */ var _udonarium_core_system_network_peer_context__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @udonarium/core/system/network/peer-context */ "ztsr");
/* harmony import */ var _udonarium_core_system__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @udonarium/core/system */ "yNnI");
/* harmony import */ var _udonarium_peer_cursor__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @udonarium/peer-cursor */ "+UEV");
/* harmony import */ var component_file_selecter_file_selecter_component__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! component/file-selecter/file-selecter.component */ "FR7b");
/* harmony import */ var component_lobby_lobby_component__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! component/lobby/lobby.component */ "tYii");
/* harmony import */ var service_modal_service__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! service/modal.service */ "CE6K");
/* harmony import */ var service_panel_service__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! service/panel.service */ "M9xM");
/* harmony import */ var service_app_config_service__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! service/app-config.service */ "6VpD");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @angular/common */ "ofXK");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @angular/forms */ "3Pt+");
/* harmony import */ var pipe_safe_pipe__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! pipe/safe.pipe */ "6HCy");















function PeerMenuComponent_div_0_div_3_Template(rf, ctx) { if (rf & 1) {
    var _r11 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "div", 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("click", function PeerMenuComponent_div_0_div_3_Template_div_click_0_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r11); var ctx_r10 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](2); return ctx_r10.changeIcon(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpipe"](1, "safe");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
} if (rf & 2) {
    var ctx_r9 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵstyleProp"]("background-image", _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpipeBind2"](1, 2, "url(" + ctx_r9.myPeer.image.url + ")", "style"));
} }
function PeerMenuComponent_div_0_Template(rf, ctx) { if (rf & 1) {
    var _r13 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](1, "button", 5);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("click", function PeerMenuComponent_div_0_Template_button_click_1_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r13); var ctx_r12 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](); return ctx_r12.changeIcon(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](2, "\u8B8A\u66F4\u982D\u50CF");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](3, PeerMenuComponent_div_0_div_3_Template, 2, 5, "div", 6);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](4, "span");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](5, "\u4F60\u7684\u66B1\u7A31\uFF1A ");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](6, "input", 7);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("ngModelChange", function PeerMenuComponent_div_0_Template_input_ngModelChange_6_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r13); var ctx_r14 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](); return ctx_r14.myPeer.name = $event; });
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
} if (rf & 2) {
    var ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", ctx_r0.myPeer.image);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngModel", ctx_r0.myPeer.name);
} }
function PeerMenuComponent_span_4_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "span", 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
} if (rf & 2) {
    var ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtextInterpolate"](ctx_r1.networkService.peerContext.userId);
} }
function PeerMenuComponent_span_5_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "span", 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](1, "???");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
} }
function PeerMenuComponent_ng_container_6_span_5_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "span", 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
} if (rf & 2) {
    var ctx_r15 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtextInterpolate2"]("", ctx_r15.networkService.peerContext.roomName, "/", ctx_r15.networkService.peerContext.roomId, "");
} }
function PeerMenuComponent_ng_container_6_span_9_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "span", 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
} if (rf & 2) {
    var ctx_r16 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtextInterpolate"](ctx_r16.networkService.peerContext.password);
} }
function PeerMenuComponent_ng_container_6_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelement"](1, "hr");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](2, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](3, "span");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](4, "\u623F\u9593\u540D\u7A31\uFF1A");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](5, PeerMenuComponent_ng_container_6_span_5_Template, 2, 2, "span", 1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](6, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](7, "span");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](8, "\u5BC6\u78BC\uFF1A");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](9, PeerMenuComponent_ng_container_6_span_9_Template, 2, 1, "span", 1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var ctx_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](5);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", ctx_r3.networkService.isOpen);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", ctx_r3.networkService.isOpen);
} }
function PeerMenuComponent_div_8_span_2_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "span");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](1, "[\u9023\u7DDA\u4E2D]");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
} }
function PeerMenuComponent_div_8_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](1, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](2, PeerMenuComponent_div_8_span_2_Template, 2, 0, "span", 0);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](3, "span");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
} if (rf & 2) {
    var context_r17 = ctx.$implicit;
    var ctx_r4 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", !context_r17.isOpen);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtextInterpolate2"]("\u5176\u4ED6\u53C2\u52A0\u8005\uFF1A", ctx_r4.findUserId(context_r17.peerId), " [", ctx_r4.findPeerName(context_r17.peerId), "]");
} }
function PeerMenuComponent_ng_container_10_Template(rf, ctx) { if (rf & 1) {
    var _r20 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](1, "input", 10);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("ngModelChange", function PeerMenuComponent_ng_container_10_Template_input_ngModelChange_1_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r20); var ctx_r19 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](); return ctx_r19.targetUserId = $event; });
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](2, "button", 11);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("click", function PeerMenuComponent_ng_container_10_Template_button_click_2_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r20); var ctx_r21 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](); return ctx_r21.connectPeer(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](3, "\u79C1\u4EBA\u9023\u7DDA");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelement"](4, "br");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var ctx_r5 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngModel", ctx_r5.targetUserId);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("disabled", !ctx_r5.networkService.isOpen);
} }
function PeerMenuComponent_button_11_Template(rf, ctx) { if (rf & 1) {
    var _r23 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "button", 11);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("click", function PeerMenuComponent_button_11_Template_button_click_0_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r23); var ctx_r22 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](); return ctx_r22.showLobby(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](1, "\u986F\u793A\u5927\u5EF3(\u623F\u9593\u5217\u8868)");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
} if (rf & 2) {
    var ctx_r6 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("disabled", !ctx_r6.networkService.isOpen);
} }
function PeerMenuComponent_ng_container_15_div_1_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "div", 4);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](1, "\u203B\u82E5\u8981\u4F7F\u7528\u79C1\u4EBA\u9023\u7DDA\uFF0C\u8ACB\u8207\u5C0D\u65B9\u5206\u4EAB\u5F7C\u6B64\u7684ID\u3002");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
} }
function PeerMenuComponent_ng_container_15_div_2_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "div", 4);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](1, "\u203B\u53EF\u4EE5\u81EA\u5DF1\u6253\u958B\u5169\u9801\u9019\u500B\u7DB2\u7AD9\uFF0C\u9032\u884C\u6E2C\u8A66\u3002");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
} }
function PeerMenuComponent_ng_container_15_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](1, PeerMenuComponent_ng_container_15_div_1_Template, 2, 0, "div", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](2, PeerMenuComponent_ng_container_15_div_2_Template, 2, 0, "div", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var ctx_r7 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", ctx_r7.networkService.peerContexts.length < 1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", ctx_r7.networkService.peerContexts.length < 1);
} }
function PeerMenuComponent_ng_container_16_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](1, "div", 4);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](2, "\u203B\u4F7F\u7528\u5927\u5EF3\u529F\u80FD\u6642\uFF0C\u4E0D\u80FD\u4F7F\u7528\u79C1\u4EBA\u9023\u7DDA\u3002");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerEnd"]();
} }
var PeerMenuComponent = /** @class */ (function () {
    function PeerMenuComponent(ngZone, modalService, panelService, appConfigService) {
        this.ngZone = ngZone;
        this.modalService = modalService;
        this.panelService = panelService;
        this.appConfigService = appConfigService;
        this.targetUserId = '';
        this.networkService = _udonarium_core_system__WEBPACK_IMPORTED_MODULE_4__["Network"];
        this.gameRoomService = _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_2__["ObjectStore"].instance;
        this.help = '';
    }
    Object.defineProperty(PeerMenuComponent.prototype, "myPeer", {
        get: function () { return _udonarium_peer_cursor__WEBPACK_IMPORTED_MODULE_5__["PeerCursor"].myCursor; },
        enumerable: false,
        configurable: true
    });
    PeerMenuComponent.prototype.ngOnInit = function () {
        var _this = this;
        Promise.resolve().then(function () { return _this.panelService.title = '連線情報'; });
    };
    PeerMenuComponent.prototype.ngAfterViewInit = function () {
        var _this = this;
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_4__["EventSystem"].register(this)
            .on('OPEN_NETWORK', function (event) {
            _this.ngZone.run(function () { });
        });
    };
    PeerMenuComponent.prototype.ngOnDestroy = function () {
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_4__["EventSystem"].unregister(this);
    };
    PeerMenuComponent.prototype.changeIcon = function () {
        var _this = this;
        this.modalService.open(component_file_selecter_file_selecter_component__WEBPACK_IMPORTED_MODULE_6__["FileSelecterComponent"]).then(function (value) {
            if (!_this.myPeer || !value)
                return;
            _this.myPeer.imageIdentifier = value;
        });
    };
    PeerMenuComponent.prototype.resetPeerIfNeeded = function () {
        if (_udonarium_core_system__WEBPACK_IMPORTED_MODULE_4__["Network"].peerContexts.length < 1) {
            _udonarium_core_system__WEBPACK_IMPORTED_MODULE_4__["Network"].open();
            _udonarium_peer_cursor__WEBPACK_IMPORTED_MODULE_5__["PeerCursor"].myCursor.peerId = _udonarium_core_system__WEBPACK_IMPORTED_MODULE_4__["Network"].peerId;
        }
    };
    PeerMenuComponent.prototype.connectPeer = function () {
        this.help = '';
        var context = _udonarium_core_system_network_peer_context__WEBPACK_IMPORTED_MODULE_3__["PeerContext"].create(this.targetUserId);
        if (context.isRoom)
            return;
        _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_2__["ObjectStore"].instance.clearDeleteHistory();
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_4__["Network"].connect(context.peerId);
    };
    PeerMenuComponent.prototype.connectPeerHistory = function () {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function () {
            var conectPeers, roomId, _a, _b, peerId, context, conectPeers_1, peerIds, peerIds_1, peerIds_1_1, peerId, context, listener;
            var e_1, _c, e_2, _d;
            return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"])(this, function (_e) {
                switch (_e.label) {
                    case 0:
                        this.help = '';
                        conectPeers = [];
                        roomId = '';
                        try {
                            for (_a = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(this.appConfigService.peerHistory), _b = _a.next(); !_b.done; _b = _a.next()) {
                                peerId = _b.value;
                                context = _udonarium_core_system_network_peer_context__WEBPACK_IMPORTED_MODULE_3__["PeerContext"].parse(peerId);
                                if (context.isRoom) {
                                    if (roomId !== context.roomId)
                                        conectPeers = [];
                                    roomId = context.roomId;
                                    conectPeers.push(context);
                                }
                                else {
                                    if (roomId !== context.roomId)
                                        conectPeers = [];
                                    conectPeers.push(context);
                                }
                            }
                        }
                        catch (e_1_1) { e_1 = { error: e_1_1 }; }
                        finally {
                            try {
                                if (_b && !_b.done && (_c = _a.return)) _c.call(_a);
                            }
                            finally { if (e_1) throw e_1.error; }
                        }
                        if (!roomId.length) return [3 /*break*/, 2];
                        console.warn('connectPeerRoom <' + roomId + '>');
                        conectPeers_1 = [];
                        return [4 /*yield*/, _udonarium_core_system__WEBPACK_IMPORTED_MODULE_4__["Network"].listAllPeers()];
                    case 1:
                        peerIds = _e.sent();
                        try {
                            for (peerIds_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(peerIds), peerIds_1_1 = peerIds_1.next(); !peerIds_1_1.done; peerIds_1_1 = peerIds_1.next()) {
                                peerId = peerIds_1_1.value;
                                console.log(peerId);
                                context = _udonarium_core_system_network_peer_context__WEBPACK_IMPORTED_MODULE_3__["PeerContext"].parse(peerId);
                                if (context.roomId === roomId) {
                                    conectPeers_1.push(context);
                                }
                            }
                        }
                        catch (e_2_1) { e_2 = { error: e_2_1 }; }
                        finally {
                            try {
                                if (peerIds_1_1 && !peerIds_1_1.done && (_d = peerIds_1.return)) _d.call(peerIds_1);
                            }
                            finally { if (e_2) throw e_2.error; }
                        }
                        if (conectPeers_1.length < 1) {
                            this.help = '找不到您上次連接的房間。 它可能已經解散了。';
                            console.warn('Room is already closed...');
                            return [2 /*return*/];
                        }
                        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_4__["Network"].open(_udonarium_core_system_network_peer_context__WEBPACK_IMPORTED_MODULE_3__["PeerContext"].generateId(), conectPeers_1[0].roomId, conectPeers_1[0].roomName, conectPeers_1[0].password);
                        return [3 /*break*/, 3];
                    case 2:
                        console.warn('connectPeers ' + conectPeers.length);
                        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_4__["Network"].open();
                        _e.label = 3;
                    case 3:
                        _udonarium_peer_cursor__WEBPACK_IMPORTED_MODULE_5__["PeerCursor"].myCursor.peerId = _udonarium_core_system__WEBPACK_IMPORTED_MODULE_4__["Network"].peerId;
                        listener = _udonarium_core_system__WEBPACK_IMPORTED_MODULE_4__["EventSystem"].register(this);
                        listener.on('OPEN_NETWORK', function (event) {
                            var e_3, _a;
                            console.log('OPEN_NETWORK', event.data.peerId);
                            _udonarium_core_system__WEBPACK_IMPORTED_MODULE_4__["EventSystem"].unregisterListener(listener);
                            _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_2__["ObjectStore"].instance.clearDeleteHistory();
                            try {
                                for (var conectPeers_2 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(conectPeers), conectPeers_2_1 = conectPeers_2.next(); !conectPeers_2_1.done; conectPeers_2_1 = conectPeers_2.next()) {
                                    var context = conectPeers_2_1.value;
                                    _udonarium_core_system__WEBPACK_IMPORTED_MODULE_4__["Network"].connect(context.peerId);
                                }
                            }
                            catch (e_3_1) { e_3 = { error: e_3_1 }; }
                            finally {
                                try {
                                    if (conectPeers_2_1 && !conectPeers_2_1.done && (_a = conectPeers_2.return)) _a.call(conectPeers_2);
                                }
                                finally { if (e_3) throw e_3.error; }
                            }
                        });
                        return [2 /*return*/];
                }
            });
        });
    };
    PeerMenuComponent.prototype.showLobby = function () {
        this.modalService.open(component_lobby_lobby_component__WEBPACK_IMPORTED_MODULE_7__["LobbyComponent"], { width: 700, height: 400, left: 0, top: 400 });
    };
    PeerMenuComponent.prototype.findUserId = function (peerId) {
        var peerCursor = _udonarium_peer_cursor__WEBPACK_IMPORTED_MODULE_5__["PeerCursor"].findByPeerId(peerId);
        return peerCursor ? peerCursor.userId : '';
    };
    PeerMenuComponent.prototype.findPeerName = function (peerId) {
        var peerCursor = _udonarium_peer_cursor__WEBPACK_IMPORTED_MODULE_5__["PeerCursor"].findByPeerId(peerId);
        return peerCursor ? peerCursor.name : '';
    };
    PeerMenuComponent.ɵfac = function PeerMenuComponent_Factory(t) { return new (t || PeerMenuComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_1__["NgZone"]), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdirectiveInject"](service_modal_service__WEBPACK_IMPORTED_MODULE_8__["ModalService"]), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdirectiveInject"](service_panel_service__WEBPACK_IMPORTED_MODULE_9__["PanelService"]), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdirectiveInject"](service_app_config_service__WEBPACK_IMPORTED_MODULE_10__["AppConfigService"])); };
    PeerMenuComponent.ɵcmp = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdefineComponent"]({ type: PeerMenuComponent, selectors: [["peer-menu"]], decls: 17, vars: 10, consts: [[4, "ngIf"], ["style", "font-weight: bold;", 4, "ngIf"], [4, "ngFor", "ngForOf"], [3, "disabled", "click", 4, "ngIf"], [2, "font-size", "12px"], [3, "click"], ["class", "image cover", 3, "background-image", "click", 4, "ngIf"], ["placeholder", "\u30CB\u30C3\u30AF\u30CD\u30FC\u30E0", 3, "ngModel", "ngModelChange"], [1, "image", "cover", 3, "click"], [2, "font-weight", "bold"], ["placeholder", "\u9023\u7DDA\u5C0D\u50CF\u7684ID", "name", "targetUserId", 3, "ngModel", "ngModelChange"], [3, "disabled", "click"], ["style", "font-size: 12px;", 4, "ngIf"]], template: function PeerMenuComponent_Template(rf, ctx) { if (rf & 1) {
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](0, PeerMenuComponent_div_0_Template, 7, 2, "div", 0);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](1, "div");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](2, "span");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](3, "\u4F60\u7684ID\uFF1A");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](4, PeerMenuComponent_span_4_Template, 2, 1, "span", 1);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](5, PeerMenuComponent_span_5_Template, 2, 0, "span", 1);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](6, PeerMenuComponent_ng_container_6_Template, 10, 2, "ng-container", 0);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelement"](7, "hr");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](8, PeerMenuComponent_div_8_Template, 5, 3, "div", 2);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](9, "div");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](10, PeerMenuComponent_ng_container_10_Template, 5, 2, "ng-container", 0);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](11, PeerMenuComponent_button_11_Template, 2, 1, "button", 3);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](12, "div");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](13, "span", 4);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](14);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](15, PeerMenuComponent_ng_container_15_Template, 3, 2, "ng-container", 0);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](16, PeerMenuComponent_ng_container_16_Template, 3, 0, "ng-container", 0);
        } if (rf & 2) {
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", ctx.myPeer);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](4);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", ctx.networkService.isOpen);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", !ctx.networkService.isOpen);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", ctx.networkService.peerContext.isRoom);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](2);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngForOf", ctx.networkService.peerContexts);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](2);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", !ctx.networkService.peerContext.isRoom);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", ctx.networkService.peerIds.length <= 1);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](3);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtextInterpolate"](ctx.help);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", !ctx.networkService.peerContext.isRoom);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", ctx.networkService.peerContext.isRoom);
        } }, directives: [_angular_common__WEBPACK_IMPORTED_MODULE_11__["NgIf"], _angular_common__WEBPACK_IMPORTED_MODULE_11__["NgForOf"], _angular_forms__WEBPACK_IMPORTED_MODULE_12__["DefaultValueAccessor"], _angular_forms__WEBPACK_IMPORTED_MODULE_12__["NgControlStatus"], _angular_forms__WEBPACK_IMPORTED_MODULE_12__["NgModel"]], pipes: [pipe_safe_pipe__WEBPACK_IMPORTED_MODULE_13__["SafePipe"]], styles: [".image[_ngcontent-%COMP%] {\r\n  padding: 0px;\r\n  width: 128px;\r\n  height: 128px;\r\n  display: table-cell;\r\n  vertical-align: top;\r\n}\r\n\r\n.image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{\r\n  width: auto;\r\n  height: auto;\r\n  max-width:100%;\r\n  max-height:100%;\r\n  vertical-align: bottom;\r\n}\r\n\r\n.cover[_ngcontent-%COMP%] {\r\n  background-position: center top;\r\n  background-repeat: no-repeat;\r\n  background-size: cover;\r\n}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBlZXItbWVudS5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UsWUFBWTtFQUNaLFlBQVk7RUFDWixhQUFhO0VBQ2IsbUJBQW1CO0VBQ25CLG1CQUFtQjtBQUNyQjs7QUFFQTtFQUNFLFdBQVc7RUFDWCxZQUFZO0VBQ1osY0FBYztFQUNkLGVBQWU7RUFDZixzQkFBc0I7QUFDeEI7O0FBRUE7RUFDRSwrQkFBK0I7RUFDL0IsNEJBQTRCO0VBQzVCLHNCQUFzQjtBQUN4QiIsImZpbGUiOiJwZWVyLW1lbnUuY29tcG9uZW50LmNzcyIsInNvdXJjZXNDb250ZW50IjpbIi5pbWFnZSB7XHJcbiAgcGFkZGluZzogMHB4O1xyXG4gIHdpZHRoOiAxMjhweDtcclxuICBoZWlnaHQ6IDEyOHB4O1xyXG4gIGRpc3BsYXk6IHRhYmxlLWNlbGw7XHJcbiAgdmVydGljYWwtYWxpZ246IHRvcDtcclxufVxyXG5cclxuLmltYWdlIGltZ3tcclxuICB3aWR0aDogYXV0bztcclxuICBoZWlnaHQ6IGF1dG87XHJcbiAgbWF4LXdpZHRoOjEwMCU7XHJcbiAgbWF4LWhlaWdodDoxMDAlO1xyXG4gIHZlcnRpY2FsLWFsaWduOiBib3R0b207XHJcbn1cclxuXHJcbi5jb3ZlciB7XHJcbiAgYmFja2dyb3VuZC1wb3NpdGlvbjogY2VudGVyIHRvcDtcclxuICBiYWNrZ3JvdW5kLXJlcGVhdDogbm8tcmVwZWF0O1xyXG4gIGJhY2tncm91bmQtc2l6ZTogY292ZXI7XHJcbn0iXX0= */"] });
    return PeerMenuComponent;
}());

/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵsetClassMetadata"](PeerMenuComponent, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_1__["Component"],
        args: [{
                selector: 'peer-menu',
                templateUrl: './peer-menu.component.html',
                styleUrls: ['./peer-menu.component.css']
            }]
    }], function () { return [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_1__["NgZone"] }, { type: service_modal_service__WEBPACK_IMPORTED_MODULE_8__["ModalService"] }, { type: service_panel_service__WEBPACK_IMPORTED_MODULE_9__["PanelService"] }, { type: service_app_config_service__WEBPACK_IMPORTED_MODULE_10__["AppConfigService"] }]; }, null); })();


/***/ }),

/***/ "F67Z":
/*!**************************************************************!*\
  !*** ./src/app/class/core/synchronize-object/object-node.ts ***!
  \**************************************************************/
/*! exports provided: ObjectNode */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ObjectNode", function() { return ObjectNode; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "mrSG");
/* harmony import */ var _system_util_xml_util__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../system/util/xml-util */ "cfGu");
/* harmony import */ var _decorator_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./decorator-core */ "rl/O");
/* harmony import */ var _game_object__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./game-object */ "xdgh");
/* harmony import */ var _object_serializer__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./object-serializer */ "MDT1");
/* harmony import */ var _object_store__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./object-store */ "hm7o");






var ObjectNode = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"])(ObjectNode, _super);
    function ObjectNode() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.value = '';
        _this.attributes = {};
        _this.parentIdentifier = '';
        _this.majorIndex = 0;
        _this.minorIndex = Math.random();
        _this._children = [];
        _this.needsSort = true;
        return _this;
    }
    ObjectNode_1 = ObjectNode;
    Object.defineProperty(ObjectNode.prototype, "index", {
        get: function () { return this.majorIndex + this.minorIndex; },
        set: function (index) {
            this.majorIndex = index | 0;
            this.minorIndex = index - this.majorIndex;
            if (this.parent)
                this.parent.needsSort = true;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ObjectNode.prototype, "parent", {
        get: function () { return _object_store__WEBPACK_IMPORTED_MODULE_5__["ObjectStore"].instance.get(this.parentIdentifier); },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ObjectNode.prototype, "parentId", {
        get: function () { return this.parentIdentifier; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ObjectNode.prototype, "parentIsAssigned", {
        get: function () { return 0 < this.parentIdentifier.length; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ObjectNode.prototype, "parentIsUnknown", {
        get: function () { return this.parentIsAssigned && _object_store__WEBPACK_IMPORTED_MODULE_5__["ObjectStore"].instance.get(this.parentIdentifier) == null; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ObjectNode.prototype, "parentIsDestroyed", {
        get: function () { return this.parentIsAssigned && _object_store__WEBPACK_IMPORTED_MODULE_5__["ObjectStore"].instance.isDeleted(this.parentIdentifier); },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ObjectNode.prototype, "children", {
        get: function () {
            if (this.needsSort) {
                this.needsSort = false;
                this._children.sort(function (a, b) { return a.index - b.index; });
            }
            return this._children.concat();
        },
        enumerable: false,
        configurable: true
    });
    // override
    ObjectNode.prototype.destroy = function () {
        var e_1, _a;
        _super.prototype.destroy.call(this);
        try {
            for (var _b = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(this._children.concat()), _c = _b.next(); !_c.done; _c = _b.next()) {
                var child = _c.value;
                child.destroy();
            }
        }
        catch (e_1_1) { e_1 = { error: e_1_1 }; }
        finally {
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            }
            finally { if (e_1) throw e_1.error; }
        }
        this._children = [];
    };
    // GameObject Lifecycle
    ObjectNode.prototype.onStoreAdded = function () {
        _super.prototype.onStoreAdded.call(this);
        this.initializeChildren();
    };
    // GameObject Lifecycle
    ObjectNode.prototype.onStoreRemoved = function () {
        _super.prototype.onStoreRemoved.call(this);
        if (this.parent)
            this.parent.removeChild(this);
    };
    // ObjectNode Lifecycle
    ObjectNode.prototype.onChildAdded = function (child) { };
    // ObjectNode Lifecycle
    ObjectNode.prototype.onChildRemoved = function (child) { };
    ObjectNode.prototype._onChildAdded = function (child) {
        var node = this;
        while (node) {
            node.onChildAdded(child);
            node = node.parent;
            if (node === this)
                break;
        }
    };
    ObjectNode.prototype._onChildRemoved = function (child) {
        var node = this;
        while (node) {
            node.onChildRemoved(child);
            node = node.parent;
            if (node === this)
                break;
        }
    };
    ObjectNode.prototype.initializeChildren = function () {
        var e_2, _a;
        if (ObjectNode_1.unknownNodes[this.identifier] == null)
            return;
        var objects = ObjectNode_1.unknownNodes[this.identifier];
        try {
            for (var objects_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(objects), objects_1_1 = objects_1.next(); !objects_1_1.done; objects_1_1 = objects_1.next()) {
                var object = objects_1_1.value;
                if (object.parent === this)
                    this.updateChildren(object);
            }
        }
        catch (e_2_1) { e_2 = { error: e_2_1 }; }
        finally {
            try {
                if (objects_1_1 && !objects_1_1.done && (_a = objects_1.return)) _a.call(objects_1);
            }
            finally { if (e_2) throw e_2.error; }
        }
        if (ObjectNode_1.unknownNodes[this.identifier]) {
            delete ObjectNode_1.unknownNodes[this.identifier];
        }
    };
    ObjectNode.prototype.updateChildren = function (child) {
        if (child === void 0) { child = this; }
        var index = this._children.indexOf(child);
        var isAdded = false;
        var isMyChild = child.parent === this;
        if (index < 0 && isMyChild) {
            this._children.push(child);
            index = this._children.length - 1;
            isAdded = true;
        }
        else if (0 <= index && !isMyChild) {
            this._children.splice(index, 1);
            this._onChildRemoved(child);
            return;
        }
        else if (index < 0 && !isMyChild) {
            return;
        }
        var childrenLength = this._children.length;
        if (!childrenLength)
            return;
        var prevIndex = index - 1 < 0 ? 0 : index - 1;
        var nextIndex = childrenLength - 1 < index + 1 ? childrenLength - 1 : index + 1;
        if (this._children[prevIndex].index > child.index || child.index > this._children[nextIndex].index)
            this.needsSort = true;
        if (isAdded)
            this._onChildAdded(child);
    };
    ObjectNode.prototype.updateIndexs = function () {
        var children = this.children;
        for (var i = 0; i < children.length; i++) {
            children[i].majorIndex = i;
            children[i].minorIndex = Math.random();
        }
    };
    ObjectNode.prototype.appendChild = function (child) {
        if (child.contains(this))
            return null;
        if (child.parent && child.parent !== this)
            child.parent.removeChild(child);
        var lastIndex = 0 < this.children.length ? this.children[this.children.length - 1].majorIndex + 1 : 0;
        child.parentIdentifier = this.identifier;
        child.majorIndex = lastIndex;
        child.minorIndex = Math.random();
        this.updateChildren(child);
        return child;
    };
    ObjectNode.prototype.insertBefore = function (child, reference) {
        if (child.contains(this))
            return null;
        if (child === reference && child.parent === this)
            return child;
        if (child.parent && child.parent !== this)
            child.parent.removeChild(child);
        var index = this.children.indexOf(reference);
        if (index < 0)
            return this.appendChild(child);
        child.parentIdentifier = this.identifier;
        var prevIndex = 0 < index ? this.children[index - 1].index : 0;
        var diff = reference.index - prevIndex;
        var insertIndex = prevIndex + diff * (0.45 + 0.1 * Math.random());
        child.majorIndex = insertIndex | 0;
        child.minorIndex = insertIndex - child.majorIndex;
        this.updateChildren(child);
        if (diff < 1e-7) {
            this.updateIndexs();
        }
        return child;
    };
    ObjectNode.prototype.removeChild = function (child) {
        var children = this.children;
        var index = children.indexOf(child);
        if (index < 0)
            return null;
        child.parentIdentifier = '';
        child.majorIndex = 0;
        child.minorIndex = Math.random();
        this.updateChildren(child);
        return child;
    };
    ObjectNode.prototype.contains = function (child) {
        var parent = child.parent;
        while (parent) {
            if (parent === child) {
                console.error('あ やっべ、循環参照', child);
                return false;
            }
            if (parent === this)
                return true;
            parent = parent.parent;
        }
        return false;
    };
    ObjectNode.prototype.setAttribute = function (name, value) {
        this.attributes[name] = value;
        this.update();
    };
    ObjectNode.prototype.getAttribute = function (name) {
        if (this.attributes[name] == null) {
            return '';
        }
        return this.attributes[name];
    };
    ObjectNode.prototype.removeAttribute = function (name) {
        delete this.attributes[name];
        this.update();
    };
    ObjectNode.prototype.toAttributes = function () {
        return _object_serializer__WEBPACK_IMPORTED_MODULE_4__["ObjectSerializer"].toAttributes(this.attributes);
    };
    ;
    ObjectNode.prototype.parseAttributes = function (attributes) {
        _object_serializer__WEBPACK_IMPORTED_MODULE_4__["ObjectSerializer"].parseAttributes(this.attributes, attributes);
    };
    ;
    ObjectNode.prototype.innerXml = function () {
        var e_3, _a;
        var xml = '';
        xml += _system_util_xml_util__WEBPACK_IMPORTED_MODULE_1__["XmlUtil"].encodeEntityReference(this.value + '');
        try {
            for (var _b = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(this.children), _c = _b.next(); !_c.done; _c = _b.next()) {
                var child = _c.value;
                xml += _object_serializer__WEBPACK_IMPORTED_MODULE_4__["ObjectSerializer"].instance.toXml(child);
            }
        }
        catch (e_3_1) { e_3 = { error: e_3_1 }; }
        finally {
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            }
            finally { if (e_3) throw e_3.error; }
        }
        return xml;
    };
    ;
    ObjectNode.prototype.parseInnerXml = function (element) {
        var children = element.children;
        var length = children.length;
        if (0 < length) {
            for (var i = 0; i < length; i++) {
                var child = _object_serializer__WEBPACK_IMPORTED_MODULE_4__["ObjectSerializer"].instance.parseXml(children[i]);
                if (child instanceof ObjectNode_1)
                    this.appendChild(child);
            }
        }
        else {
            this.value = _system_util_xml_util__WEBPACK_IMPORTED_MODULE_1__["XmlUtil"].decodeEntityReference(element.innerHTML);
        }
    };
    ;
    // override
    ObjectNode.prototype.apply = function (context) {
        var oldParent = this.parent;
        _super.prototype.apply.call(this, context);
        if (oldParent && this.parent !== oldParent)
            oldParent.updateChildren(this);
        if (this.parent) {
            this.parent.updateChildren(this);
        }
        else if (this.parentIsAssigned) {
            if (!(this.parentIdentifier in ObjectNode_1.unknownNodes)) {
                ObjectNode_1.unknownNodes[this.parentIdentifier] = [];
            }
            ObjectNode_1.unknownNodes[this.parentIdentifier].push(this);
        }
    };
    var ObjectNode_1;
    // TODO 名前　親Nodeの存在が未知の状態であるNode
    ObjectNode.unknownNodes = {};
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_decorator_core__WEBPACK_IMPORTED_MODULE_2__["defineSyncVariable"])()
    ], ObjectNode.prototype, "value", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_decorator_core__WEBPACK_IMPORTED_MODULE_2__["defineSyncVariable"])()
    ], ObjectNode.prototype, "attributes", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_decorator_core__WEBPACK_IMPORTED_MODULE_2__["defineSyncVariable"])()
    ], ObjectNode.prototype, "parentIdentifier", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_decorator_core__WEBPACK_IMPORTED_MODULE_2__["defineSyncVariable"])()
    ], ObjectNode.prototype, "majorIndex", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_decorator_core__WEBPACK_IMPORTED_MODULE_2__["defineSyncVariable"])()
    ], ObjectNode.prototype, "minorIndex", void 0);
    ObjectNode = ObjectNode_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_decorator_core__WEBPACK_IMPORTED_MODULE_2__["defineSyncObject"])('node')
    ], ObjectNode);
    return ObjectNode;
}(_game_object__WEBPACK_IMPORTED_MODULE_3__["GameObject"]));



/***/ }),

/***/ "FR7b":
/*!********************************************************************!*\
  !*** ./src/app/component/file-selecter/file-selecter.component.ts ***!
  \********************************************************************/
/*! exports provided: FileSelecterComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FileSelecterComponent", function() { return FileSelecterComponent; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "mrSG");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "fXoL");
/* harmony import */ var _udonarium_core_file_storage_image_file__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @udonarium/core/file-storage/image-file */ "FjwV");
/* harmony import */ var _udonarium_core_file_storage_image_storage__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @udonarium/core/file-storage/image-storage */ "JQpJ");
/* harmony import */ var _udonarium_core_system__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @udonarium/core/system */ "yNnI");
/* harmony import */ var _udonarium_image_tag__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @udonarium/image-tag */ "WHGT");
/* harmony import */ var service_panel_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! service/panel.service */ "M9xM");
/* harmony import */ var service_modal_service__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! service/modal.service */ "CE6K");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @angular/forms */ "3Pt+");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @angular/common */ "ofXK");
/* harmony import */ var pipe_safe_pipe__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! pipe/safe.pipe */ "6HCy");





 //本家PR #92より






function FileSelecterComponent_label_2_div_2_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](1, "\u672A\u8A2D\u5B9A");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
} }
function FileSelecterComponent_label_2_div_3_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
} if (rf & 2) {
    var tag_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]().$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtextInterpolate"](tag_r3);
} }
function FileSelecterComponent_label_2_Template(rf, ctx) { if (rf & 1) {
    var _r8 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "label");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](1, "input", 5);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("ngModelChange", function FileSelecterComponent_label_2_Template_input_ngModelChange_1_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r8); var ctx_r7 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](); return ctx_r7.selectTag = $event; })("change", function FileSelecterComponent_label_2_Template_input_change_1_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r8); var ctx_r9 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](); return ctx_r9.resetBtn(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](2, FileSelecterComponent_label_2_div_2_Template, 2, 0, "div", 6);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](3, FileSelecterComponent_label_2_div_3_Template, 2, 1, "div", 6);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
} if (rf & 2) {
    var tag_r3 = ctx.$implicit;
    var ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpropertyInterpolate"]("value", tag_r3);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngModel", ctx_r0.selectTag);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", tag_r3.length == 0);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", tag_r3.length > 0);
} }
function FileSelecterComponent_span_4_Template(rf, ctx) { if (rf & 1) {
    var _r11 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "span", 7);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](1, "button", 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("click", function FileSelecterComponent_span_4_Template_button_click_1_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r11); var ctx_r10 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](); return ctx_r10.onSelectedFile(ctx_r10.empty); });
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](2, "\u7121\u5716\u7247");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
} }
function FileSelecterComponent_span_5_img_2_Template(rf, ctx) { if (rf & 1) {
    var _r17 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "img", 13);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("click", function FileSelecterComponent_span_5_img_2_Template_img_click_0_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r17); var file_r12 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]().$implicit; var ctx_r15 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](); return ctx_r15.onSelectedFile(file_r12); });
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpipe"](1, "safe");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
} if (rf & 2) {
    var file_r12 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]().$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("src", _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpipeBind2"](1, 2, file_r12.url, "resourceUrl"), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵsanitizeUrl"])("alt", file_r12.name);
} }
function FileSelecterComponent_span_5_img_3_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelement"](0, "img", 14);
} if (rf & 2) {
    var file_r12 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]().$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpropertyInterpolate"]("alt", file_r12.name);
} }
function FileSelecterComponent_span_5_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "span", 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](1, "div", 10);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](2, FileSelecterComponent_span_5_img_2_Template, 2, 5, "img", 11);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](3, FileSelecterComponent_span_5_img_3_Template, 1, 1, "img", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
} if (rf & 2) {
    var file_r12 = ctx.$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", 0 < file_r12.url.length);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", file_r12.url.length <= 0);
} }
var FileSelecterComponent = /** @class */ (function () {
    function FileSelecterComponent(changeDetector, panelService, modalService) {
        this.changeDetector = changeDetector;
        this.panelService = panelService;
        this.modalService = modalService;
        //本家PR #92より
        this.searchWord = '';
        //
        this.isAllowedEmpty = false;
        this.selectedFile = null;
        this.selectTag = '';
        this.fileStorageService = _udonarium_core_file_storage_image_storage__WEBPACK_IMPORTED_MODULE_3__["ImageStorage"].instance;
        this.identifierList = [];
        this.newTagName = '';
        this.isAllowedEmpty = this.modalService.option && this.modalService.option.isAllowedEmpty ? true : false;
    }
    Object.defineProperty(FileSelecterComponent.prototype, "searchWords", {
        get: function () {
            if (this._searchWord !== this.searchWord) {
                this._searchWord = this.searchWord;
                this._searchWords = this.searchWord != null && 0 < this.searchWord.trim().length ? this.searchWord.trim().split(/\s+/) : [];
            }
            return this._searchWords;
        },
        enumerable: false,
        configurable: true
    });
    FileSelecterComponent.prototype.getAllImage = function () {
        var e_1, _a;
        var imageFileList = [];
        try {
            for (var _b = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(this.fileStorageService.images), _c = _b.next(); !_c.done; _c = _b.next()) {
                var imageFile = _c.value;
                var identifier = imageFile.context.identifier;
                var tag = '';
                if (_udonarium_image_tag__WEBPACK_IMPORTED_MODULE_5__["ImageTag"].get(identifier))
                    tag = _udonarium_image_tag__WEBPACK_IMPORTED_MODULE_5__["ImageTag"].get(identifier).tag;
                if (tag != 'システム予約') //システム予約名を非表示
                    imageFileList.push(imageFile);
            }
        }
        catch (e_1_1) { e_1 = { error: e_1_1 }; }
        finally {
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            }
            finally { if (e_1) throw e_1.error; }
        }
        return imageFileList;
    };
    Object.defineProperty(FileSelecterComponent.prototype, "images", {
        //本家PR #92より
        get: function () {
            var e_2, _a;
            var imageFileList = [];
            if (this.selectTag == '全て')
                return this.getAllImage();
            try {
                for (var _b = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(this.fileStorageService.images), _c = _b.next(); !_c.done; _c = _b.next()) {
                    var imageFile = _c.value;
                    var identifier = imageFile.context.identifier;
                    if (_udonarium_image_tag__WEBPACK_IMPORTED_MODULE_5__["ImageTag"].get(identifier)) {
                        var tag = _udonarium_image_tag__WEBPACK_IMPORTED_MODULE_5__["ImageTag"].get(identifier).tag;
                        if (this.selectTag == tag) {
                            imageFileList.push(imageFile);
                        }
                    }
                    else { //タグ未設定の場合 画像投下直後は ImageTag.get(identifier) は空文字ではなく該当なしとなるため
                        if (this.selectTag == '') {
                            imageFileList.push(imageFile);
                        }
                    }
                }
            }
            catch (e_2_1) { e_2 = { error: e_2_1 }; }
            finally {
                try {
                    if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
                }
                finally { if (e_2) throw e_2.error; }
            }
            return imageFileList;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(FileSelecterComponent.prototype, "isSelected", {
        get: function () { return this.selectedFile != null; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(FileSelecterComponent.prototype, "selectedImageTag", {
        get: function () {
            if (!this.isSelected)
                return null;
            var imageTag = _udonarium_image_tag__WEBPACK_IMPORTED_MODULE_5__["ImageTag"].get(this.selectedFile.identifier);
            return imageTag ? imageTag : _udonarium_image_tag__WEBPACK_IMPORTED_MODULE_5__["ImageTag"].create(this.selectedFile.identifier);
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(FileSelecterComponent.prototype, "tagList", {
        get: function () {
            var e_3, _a;
            var tags = [];
            try {
                for (var _b = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(this.fileStorageService.images), _c = _b.next(); !_c.done; _c = _b.next()) {
                    var imageFile = _c.value;
                    var identifier = imageFile.context.identifier;
                    var imageTag = _udonarium_image_tag__WEBPACK_IMPORTED_MODULE_5__["ImageTag"].get(identifier);
                    if (imageTag) {
                        if (imageTag.tag) {
                            if (imageTag.tag != 'システム予約') //システム予約名を非表示
                                tags.push(imageTag.tag);
                        }
                    }
                }
            }
            catch (e_3_1) { e_3 = { error: e_3_1 }; }
            finally {
                try {
                    if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
                }
                finally { if (e_3) throw e_3.error; }
            }
            var tags2 = Array.from(new Set(tags));
            tags2.unshift('全て');
            tags2.unshift('');
            return tags2;
        },
        enumerable: false,
        configurable: true
    });
    FileSelecterComponent.prototype.resetBtn = function () {
    };
    FileSelecterComponent.prototype.onChange = function (fileName, checked) {
        var imageTag = _udonarium_image_tag__WEBPACK_IMPORTED_MODULE_5__["ImageTag"].get(fileName);
        if (!imageTag)
            _udonarium_image_tag__WEBPACK_IMPORTED_MODULE_5__["ImageTag"].create(fileName);
        if (checked) {
            if (this.identifierList.indexOf(fileName) < 0) {
                this.identifierList.push(fileName);
            }
        }
        else {
            if (this.identifierList.indexOf(fileName) > -1) {
                this.identifierList.splice(this.identifierList.indexOf(fileName), 1);
            }
        }
    };
    Object.defineProperty(FileSelecterComponent.prototype, "empty", {
        get: function () { return _udonarium_core_file_storage_image_file__WEBPACK_IMPORTED_MODULE_2__["ImageFile"].Empty; },
        enumerable: false,
        configurable: true
    });
    FileSelecterComponent.prototype.ngOnInit = function () {
        var _this = this;
        Promise.resolve().then(function () { return _this.modalService.title = _this.panelService.title = 'ファイル一覧'; });
    };
    FileSelecterComponent.prototype.ngAfterViewInit = function () {
        var _this = this;
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_4__["EventSystem"].register(this).on('SYNCHRONIZE_FILE_LIST', function (event) {
            if (event.isSendFromSelf) {
                _this.changeDetector.markForCheck();
            }
        });
    };
    FileSelecterComponent.prototype.ngOnDestroy = function () {
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_4__["EventSystem"].unregister(this);
    };
    FileSelecterComponent.prototype.onSelectedFile = function (file) {
        console.log('onSelectedFile', file);
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_4__["EventSystem"].call('SELECT_FILE', { fileIdentifier: file.identifier }, _udonarium_core_system__WEBPACK_IMPORTED_MODULE_4__["Network"].peerId);
        this.modalService.resolve(file.identifier);
    };
    FileSelecterComponent.ɵfac = function FileSelecterComponent_Factory(t) { return new (t || FileSelecterComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_1__["ChangeDetectorRef"]), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdirectiveInject"](service_panel_service__WEBPACK_IMPORTED_MODULE_6__["PanelService"]), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdirectiveInject"](service_modal_service__WEBPACK_IMPORTED_MODULE_7__["ModalService"])); };
    FileSelecterComponent.ɵcmp = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdefineComponent"]({ type: FileSelecterComponent, selectors: [["file-selector"]], inputs: { isAllowedEmpty: "isAllowedEmpty" }, decls: 6, vars: 3, consts: [[1, "image-chg"], [4, "ngFor", "ngForOf"], ["id", "file-list"], ["class", "empty", 4, "ngIf"], ["class", "image", 4, "ngFor", "ngForOf"], ["name", "image-chg", "type", "radio", 3, "value", "ngModel", "ngModelChange", "change"], [4, "ngIf"], [1, "empty"], [3, "click"], [1, "image"], [2, "float", "left"], ["height", "120", 3, "src", "alt", "click", 4, "ngIf"], ["src", "assets/images/loading.gif", 3, "alt", 4, "ngIf"], ["height", "120", 3, "src", "alt", "click"], ["src", "assets/images/loading.gif", 3, "alt"]], template: function FileSelecterComponent_Template(rf, ctx) { if (rf & 1) {
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "form");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](1, "div", 0);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](2, FileSelecterComponent_label_2_Template, 4, 4, "label", 1);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](3, "div", 2);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](4, FileSelecterComponent_span_4_Template, 3, 0, "span", 3);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](5, FileSelecterComponent_span_5_Template, 4, 2, "span", 4);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
        } if (rf & 2) {
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](2);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngForOf", ctx.tagList);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](2);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", ctx.isAllowedEmpty);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngForOf", ctx.images);
        } }, directives: [_angular_forms__WEBPACK_IMPORTED_MODULE_8__["ɵangular_packages_forms_forms_y"], _angular_forms__WEBPACK_IMPORTED_MODULE_8__["NgControlStatusGroup"], _angular_forms__WEBPACK_IMPORTED_MODULE_8__["NgForm"], _angular_common__WEBPACK_IMPORTED_MODULE_9__["NgForOf"], _angular_common__WEBPACK_IMPORTED_MODULE_9__["NgIf"], _angular_forms__WEBPACK_IMPORTED_MODULE_8__["RadioControlValueAccessor"], _angular_forms__WEBPACK_IMPORTED_MODULE_8__["DefaultValueAccessor"], _angular_forms__WEBPACK_IMPORTED_MODULE_8__["NgControlStatus"], _angular_forms__WEBPACK_IMPORTED_MODULE_8__["NgModel"]], pipes: [pipe_safe_pipe__WEBPACK_IMPORTED_MODULE_10__["SafePipe"]], styles: [".image[_ngcontent-%COMP%] {\r\n  font-size: 0;\r\n}\r\n\r\n.image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%] {\r\n  vertical-align: bottom;\r\n}\r\n\r\n.empty[_ngcontent-%COMP%] {\r\n  line-height: 120px;\r\n  vertical-align: middle;\r\n}\r\n\r\n.empty[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] {\r\n  height: 100px;\r\n}\r\n\r\n\r\n\r\n.sticky-top[_ngcontent-%COMP%] {\r\n  padding: 5px;\r\n  position: sticky;\r\n  top: 0;\r\n  background-color: rgba(240, 218, 189, 0.8);\r\n  border-top: 1px dotted #666;\r\n  border-bottom: 1px dotted #666;\r\n}\r\n\r\n.sticky-top[_ngcontent-%COMP%]   input[_ngcontent-%COMP%] {\r\n  width: calc(100% - 75px);\r\n}\r\n\r\n\r\n\r\n\r\n\r\n.image-chg[_ngcontent-%COMP%] {\r\n  padding : 5px;\r\n  -webkit-user-select: none;\r\n          user-select: none;\r\n}\r\n\r\n.image-chg[_ngcontent-%COMP%]   label[_ngcontent-%COMP%] {\r\n  display: inline-block;\r\n  position: relative;\r\n}\r\n\r\n.image-chg[_ngcontent-%COMP%]   input[type=\"radio\"][_ngcontent-%COMP%] {\r\n  display: none;\r\n}\r\n\r\n.image-chg[_ngcontent-%COMP%]   input[type=\"radio\"][_ngcontent-%COMP%]    + div[_ngcontent-%COMP%] {\r\n  display: inline-block;\r\n  vertical-align: middle;\r\n  outline: 0;\r\n  font-size: 12px;\r\n  background-color: transparent;\r\n  color: #444; \r\n  border: solid 1px #555;\r\n  padding: 2px 8px;\r\n  margin: 2px;\r\n  border-radius: 100px;\r\n  cursor: pointer;\r\n}\r\n\r\n.image-chg[_ngcontent-%COMP%]   input[type=\"radio\"][_ngcontent-%COMP%]    + div[_ngcontent-%COMP%]:hover {\r\n  background-color: #888;\r\n  color: #eee;\r\n  border: solid 1px #555;\r\n}\r\n\r\n.image-chg[_ngcontent-%COMP%]   input[type=\"radio\"][_ngcontent-%COMP%]:checked    + div[_ngcontent-%COMP%] {\r\n  background: #555;\r\n  color: #CCC;\r\n}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZpbGUtc2VsZWN0ZXIuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLFlBQVk7QUFDZDs7QUFFQTtFQUNFLHNCQUFzQjtBQUN4Qjs7QUFFQTtFQUNFLGtCQUFrQjtFQUNsQixzQkFBc0I7QUFDeEI7O0FBRUE7RUFDRSxhQUFhO0FBQ2Y7O0FBRUEsY0FBYzs7QUFDZDtFQUNFLFlBQVk7RUFDWixnQkFBZ0I7RUFDaEIsTUFBTTtFQUNOLDBDQUEwQztFQUMxQywyQkFBMkI7RUFDM0IsOEJBQThCO0FBQ2hDOztBQUVBO0VBQ0Usd0JBQXdCO0FBQzFCOztBQUNBLEdBQUc7O0FBRUgsVUFBVTs7QUFDVjtFQUNFLGFBQWE7RUFDYix5QkFBaUI7VUFBakIsaUJBQWlCO0FBQ25COztBQUVBO0VBQ0UscUJBQXFCO0VBQ3JCLGtCQUFrQjtBQUNwQjs7QUFFQTtFQUNFLGFBQWE7QUFDZjs7QUFFQTtFQUNFLHFCQUFxQjtFQUNyQixzQkFBc0I7RUFDdEIsVUFBVTtFQUNWLGVBQWU7RUFDZiw2QkFBNkI7RUFDN0IsV0FBVztFQUNYLHNCQUFzQjtFQUN0QixnQkFBZ0I7RUFDaEIsV0FBVztFQUNYLG9CQUFvQjtFQUNwQixlQUFlO0FBQ2pCOztBQUVBO0VBQ0Usc0JBQXNCO0VBQ3RCLFdBQVc7RUFDWCxzQkFBc0I7QUFDeEI7O0FBRUE7RUFDRSxnQkFBZ0I7RUFDaEIsV0FBVztBQUNiOztBQUNBLEdBQUciLCJmaWxlIjoiZmlsZS1zZWxlY3Rlci5jb21wb25lbnQuY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLmltYWdlIHtcclxuICBmb250LXNpemU6IDA7XHJcbn1cclxuXHJcbi5pbWFnZSAgaW1nIHtcclxuICB2ZXJ0aWNhbC1hbGlnbjogYm90dG9tO1xyXG59XHJcblxyXG4uZW1wdHkge1xyXG4gIGxpbmUtaGVpZ2h0OiAxMjBweDtcclxuICB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlO1xyXG59XHJcblxyXG4uZW1wdHkgYnV0dG9uIHtcclxuICBoZWlnaHQ6IDEwMHB4O1xyXG59XHJcblxyXG4vKmVudHl1XzIgIzkyKi9cclxuLnN0aWNreS10b3Age1xyXG4gIHBhZGRpbmc6IDVweDtcclxuICBwb3NpdGlvbjogc3RpY2t5O1xyXG4gIHRvcDogMDtcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDI0MCwgMjE4LCAxODksIDAuOCk7XHJcbiAgYm9yZGVyLXRvcDogMXB4IGRvdHRlZCAjNjY2O1xyXG4gIGJvcmRlci1ib3R0b206IDFweCBkb3R0ZWQgIzY2NjtcclxufVxyXG5cclxuLnN0aWNreS10b3AgaW5wdXQge1xyXG4gIHdpZHRoOiBjYWxjKDEwMCUgLSA3NXB4KTtcclxufVxyXG4vKiovXHJcblxyXG4vKmVudHl1XzIqL1xyXG4uaW1hZ2UtY2hnIHtcclxuICBwYWRkaW5nIDogNXB4O1xyXG4gIHVzZXItc2VsZWN0OiBub25lO1xyXG59XHJcblxyXG4uaW1hZ2UtY2hnIGxhYmVsIHtcclxuICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XHJcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xyXG59XHJcblxyXG4uaW1hZ2UtY2hnIGlucHV0W3R5cGU9XCJyYWRpb1wiXSB7XHJcbiAgZGlzcGxheTogbm9uZTtcclxufVxyXG5cclxuLmltYWdlLWNoZyBpbnB1dFt0eXBlPVwicmFkaW9cIl0gKyBkaXYge1xyXG4gIGRpc3BsYXk6IGlubGluZS1ibG9jaztcclxuICB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlO1xyXG4gIG91dGxpbmU6IDA7XHJcbiAgZm9udC1zaXplOiAxMnB4O1xyXG4gIGJhY2tncm91bmQtY29sb3I6IHRyYW5zcGFyZW50O1xyXG4gIGNvbG9yOiAjNDQ0OyBcclxuICBib3JkZXI6IHNvbGlkIDFweCAjNTU1O1xyXG4gIHBhZGRpbmc6IDJweCA4cHg7XHJcbiAgbWFyZ2luOiAycHg7XHJcbiAgYm9yZGVyLXJhZGl1czogMTAwcHg7XHJcbiAgY3Vyc29yOiBwb2ludGVyO1xyXG59XHJcblxyXG4uaW1hZ2UtY2hnIGlucHV0W3R5cGU9XCJyYWRpb1wiXSArIGRpdjpob3ZlciB7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogIzg4ODtcclxuICBjb2xvcjogI2VlZTtcclxuICBib3JkZXI6IHNvbGlkIDFweCAjNTU1O1xyXG59XHJcblxyXG4uaW1hZ2UtY2hnIGlucHV0W3R5cGU9XCJyYWRpb1wiXTpjaGVja2VkICsgZGl2IHtcclxuICBiYWNrZ3JvdW5kOiAjNTU1O1xyXG4gIGNvbG9yOiAjQ0NDO1xyXG59XHJcbi8qKi9cclxuXHJcbiJdfQ== */"], changeDetection: 0 });
    return FileSelecterComponent;
}());

/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵsetClassMetadata"](FileSelecterComponent, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_1__["Component"],
        args: [{
                selector: 'file-selector',
                templateUrl: './file-selecter.component.html',
                styleUrls: ['./file-selecter.component.css'],
                changeDetection: _angular_core__WEBPACK_IMPORTED_MODULE_1__["ChangeDetectionStrategy"].OnPush
            }]
    }], function () { return [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_1__["ChangeDetectorRef"] }, { type: service_panel_service__WEBPACK_IMPORTED_MODULE_6__["PanelService"] }, { type: service_modal_service__WEBPACK_IMPORTED_MODULE_7__["ModalService"] }]; }, { isAllowedEmpty: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_1__["Input"]
        }] }); })();


/***/ }),

/***/ "FREB":
/*!****************************************************************!*\
  !*** ./src/app/component/dice-symbol/dice-symbol.component.ts ***!
  \****************************************************************/
/*! exports provided: DiceSymbolComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DiceSymbolComponent", function() { return DiceSymbolComponent; });
/* harmony import */ var _angular_animations__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/animations */ "R0Ic");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "fXoL");
/* harmony import */ var _udonarium_core_file_storage_image_file__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @udonarium/core/file-storage/image-file */ "FjwV");
/* harmony import */ var _udonarium_core_synchronize_object_object_node__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @udonarium/core/synchronize-object/object-node */ "F67Z");
/* harmony import */ var _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @udonarium/core/synchronize-object/object-store */ "hm7o");
/* harmony import */ var _udonarium_core_system__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @udonarium/core/system */ "yNnI");
/* harmony import */ var _udonarium_peer_cursor__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @udonarium/peer-cursor */ "+UEV");
/* harmony import */ var _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @udonarium/sound-effect */ "veT5");
/* harmony import */ var component_game_character_sheet_game_character_sheet_component__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! component/game-character-sheet/game-character-sheet.component */ "zXSY");
/* harmony import */ var directive_input_handler__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! directive/input-handler */ "96Ug");
/* harmony import */ var service_context_menu_service__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! service/context-menu.service */ "9FhF");
/* harmony import */ var service_panel_service__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! service/panel.service */ "M9xM");
/* harmony import */ var service_pointer_device_service__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! service/pointer-device.service */ "GPP8");
/* harmony import */ var directive_movable_directive__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! directive/movable.directive */ "+Kyd");
/* harmony import */ var directive_rotable_directive__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! directive/rotable.directive */ "3jYK");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @angular/common */ "ofXK");
/* harmony import */ var pipe_safe_pipe__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! pipe/safe.pipe */ "6HCy");



















function DiceSymbolComponent_ng_container_5_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](1, "div", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](2, "div", 13);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](3, "div", 14);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](4, "autorenew");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](5, "div", 15);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](6, "autorenew");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerEnd"]();
} }
function DiceSymbolComponent_div_10_span_3_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "span");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
} if (rf & 2) {
    var ctx_r4 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtextInterpolate"](ctx_r4.face);
} }
function DiceSymbolComponent_div_10_span_4_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "span");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](1, "???");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
} }
function DiceSymbolComponent_div_10_span_7_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "span");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
} if (rf & 2) {
    var ctx_r6 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtextInterpolate"](ctx_r6.face);
} }
function DiceSymbolComponent_div_10_span_8_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "span");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](1, "???");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
} }
var _c0 = function (a0) { return { "transform": a0 }; };
function DiceSymbolComponent_div_10_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "div", 16);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](1, "div", 17);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](3, DiceSymbolComponent_div_10_span_3_Template, 2, 1, "span", 5);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](4, DiceSymbolComponent_div_10_span_4_Template, 2, 0, "span", 5);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](5, "div", 18);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](6);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](7, DiceSymbolComponent_div_10_span_7_Template, 2, 1, "span", 5);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](8, DiceSymbolComponent_div_10_span_8_Template, 2, 0, "span", 5);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
} if (rf & 2) {
    var ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngStyle", _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpureFunction1"](7, _c0, "translateX(-50%) translateX(" + ctx_r1.size * ctx_r1.gridSize / 2 + "px)"));
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtextInterpolate1"]("", ctx_r1.name, ":");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", ctx_r1.isVisible);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", !ctx_r1.isVisible);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtextInterpolate1"]("", ctx_r1.name, ":");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", ctx_r1.isVisible);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", !ctx_r1.isVisible);
} }
function DiceSymbolComponent_div_11_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "div", 19);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](1, "div", 20);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](3, "div", 21);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
} if (rf & 2) {
    var ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngStyle", _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpureFunction1"](3, _c0, "translateX(-50%) translateX(" + ctx_r2.size * ctx_r2.gridSize / 2 + "px)"));
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtextInterpolate"](ctx_r2.ownerName);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtextInterpolate"](ctx_r2.ownerName);
} }
var _c1 = function (a0, a1) { return { "is-black-mask": a0, "is-harf-black-mask": a1 }; };
function DiceSymbolComponent_img_12_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelement"](0, "img", 22);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpipe"](1, "safe");
} if (rf & 2) {
    var ctx_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("src", _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpipeBind2"](1, 2, ctx_r3.imageFile.url, "resourceUrl"), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵsanitizeUrl"])("ngClass", _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpureFunction2"](5, _c1, !ctx_r3.isVisible, ctx_r3.isMine));
} }
var _c2 = function (a0) { return { "is-gray-border": a0 }; };
var DiceSymbolComponent = /** @class */ (function () {
    function DiceSymbolComponent(ngZone, panelService, contextMenuService, elementRef, changeDetector, pointerDeviceService) {
        this.ngZone = ngZone;
        this.panelService = panelService;
        this.contextMenuService = contextMenuService;
        this.elementRef = elementRef;
        this.changeDetector = changeDetector;
        this.pointerDeviceService = pointerDeviceService;
        this.diceSymbol = null;
        this.is3D = false;
        this.animeState = 'inactive';
        this.iconHiddenTimer = null;
        this.emptyImage = _udonarium_core_file_storage_image_file__WEBPACK_IMPORTED_MODULE_2__["ImageFile"].Empty;
        this.gridSize = 50;
        this.movableOption = {};
        this.rotableOption = {};
        this.doubleClickTimer = null;
        this.doubleClickPoint = { x: 0, y: 0 };
        this.input = null;
    }
    Object.defineProperty(DiceSymbolComponent.prototype, "face", {
        get: function () { return this.diceSymbol.face; },
        set: function (face) { this.diceSymbol.face = face; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(DiceSymbolComponent.prototype, "owner", {
        get: function () { return this.diceSymbol.owner; },
        set: function (owner) { this.diceSymbol.owner = owner; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(DiceSymbolComponent.prototype, "rotate", {
        get: function () { return this.diceSymbol.rotate; },
        set: function (rotate) { this.diceSymbol.rotate = rotate; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(DiceSymbolComponent.prototype, "name", {
        get: function () { return this.diceSymbol.name; },
        set: function (name) { this.diceSymbol.name = name; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(DiceSymbolComponent.prototype, "size", {
        get: function () { return this.adjustMinBounds(this.diceSymbol.size); },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(DiceSymbolComponent.prototype, "faces", {
        get: function () { return this.diceSymbol.faces; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(DiceSymbolComponent.prototype, "imageFile", {
        get: function () {
            var image = this.diceSymbol.imageFile;
            return image ? image : this.emptyImage;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(DiceSymbolComponent.prototype, "isMine", {
        get: function () { return this.diceSymbol.isMine; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(DiceSymbolComponent.prototype, "hasOwner", {
        get: function () { return this.diceSymbol.hasOwner; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(DiceSymbolComponent.prototype, "ownerName", {
        get: function () { return this.diceSymbol.ownerName; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(DiceSymbolComponent.prototype, "isVisible", {
        get: function () { return this.diceSymbol.isVisible; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(DiceSymbolComponent.prototype, "isIconHidden", {
        get: function () { return this.iconHiddenTimer != null; },
        enumerable: false,
        configurable: true
    });
    ;
    DiceSymbolComponent.prototype.ngOnInit = function () {
        var _this = this;
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_5__["EventSystem"].register(this)
            .on('ROLL_DICE_SYNBOL', -1000, function (event) {
            if (event.data.identifier === _this.diceSymbol.identifier) {
                _this.ngZone.run(function () {
                    _this.animeState = 'inactive';
                    _this.changeDetector.markForCheck();
                    setTimeout(function () { _this.animeState = 'active'; _this.changeDetector.markForCheck(); });
                });
            }
        })
            .on('UPDATE_GAME_OBJECT', -1000, function (event) {
            var object = _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_4__["ObjectStore"].instance.get(event.data.identifier);
            if (!_this.diceSymbol || !object)
                return;
            if ((_this.diceSymbol === object)
                || (object instanceof _udonarium_core_synchronize_object_object_node__WEBPACK_IMPORTED_MODULE_3__["ObjectNode"] && _this.diceSymbol.contains(object))
                || (object instanceof _udonarium_peer_cursor__WEBPACK_IMPORTED_MODULE_6__["PeerCursor"] && object.userId === _this.diceSymbol.owner)) {
                _this.changeDetector.markForCheck();
            }
        })
            .on('SYNCHRONIZE_FILE_LIST', function (event) {
            _this.changeDetector.markForCheck();
        })
            .on('UPDATE_FILE_RESOURE', -1000, function (event) {
            _this.changeDetector.markForCheck();
        })
            .on('DISCONNECT_PEER', function (event) {
            var cursor = _udonarium_peer_cursor__WEBPACK_IMPORTED_MODULE_6__["PeerCursor"].findByPeerId(event.data.peerId);
            if (!cursor || _this.diceSymbol.owner === cursor.userId)
                _this.changeDetector.markForCheck();
        });
        this.movableOption = {
            tabletopObject: this.diceSymbol,
            transformCssOffset: 'translateZ(1.0px)',
            colideLayers: ['terrain']
        };
        this.rotableOption = {
            tabletopObject: this.diceSymbol
        };
    };
    DiceSymbolComponent.prototype.ngAfterViewInit = function () {
        var _this = this;
        this.ngZone.runOutsideAngular(function () {
            _this.input = new directive_input_handler__WEBPACK_IMPORTED_MODULE_9__["InputHandler"](_this.elementRef.nativeElement);
        });
        this.input.onStart = function (e) { return _this.ngZone.run(function () { return _this.onInputStart(e); }); };
    };
    DiceSymbolComponent.prototype.ngOnDestroy = function () {
        this.input.destroy();
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_5__["EventSystem"].unregister(this);
    };
    DiceSymbolComponent.prototype.onDragstart = function (e) {
        e.stopPropagation();
        e.preventDefault();
    };
    DiceSymbolComponent.prototype.animationShuffleDone = function (event) {
        this.animeState = 'inactive';
        this.changeDetector.markForCheck();
    };
    DiceSymbolComponent.prototype.onInputStart = function (e) {
        this.startDoubleClickTimer(e);
        this.startIconHiddenTimer();
    };
    DiceSymbolComponent.prototype.startDoubleClickTimer = function (e) {
        var _this = this;
        if (!this.doubleClickTimer) {
            this.stopDoubleClickTimer();
            this.doubleClickTimer = setTimeout(function () { return _this.stopDoubleClickTimer(); }, e.touches ? 500 : 300);
            this.doubleClickPoint = this.input.pointer;
            return;
        }
        if (e.touches) {
            this.input.onEnd = this.onDoubleClick.bind(this);
        }
        else {
            this.onDoubleClick();
        }
    };
    DiceSymbolComponent.prototype.stopDoubleClickTimer = function () {
        clearTimeout(this.doubleClickTimer);
        this.doubleClickTimer = null;
        this.input.onEnd = null;
    };
    DiceSymbolComponent.prototype.onDoubleClick = function () {
        this.stopDoubleClickTimer();
        var distance = Math.pow((this.doubleClickPoint.x - this.input.pointer.x), 2) + Math.pow((this.doubleClickPoint.y - this.input.pointer.y), 2);
        if (distance < Math.pow(10, 2)) {
            if (this.isVisible)
                this.diceRoll();
        }
    };
    DiceSymbolComponent.prototype.onContextMenu = function (e) {
        var _this = this;
        e.stopPropagation();
        e.preventDefault();
        if (!this.pointerDeviceService.isAllowedToOpenContextMenu)
            return;
        var position = this.pointerDeviceService.pointers[0];
        var actions = [];
        if (this.isVisible) {
            actions.push({
                name: 'ダイスを振る',
                action: function () {
                    _this.diceRoll();
                }
            });
        }
        actions.push(service_context_menu_service__WEBPACK_IMPORTED_MODULE_10__["ContextMenuSeparator"]);
        if (this.isMine || this.hasOwner) {
            actions.push({
                name: 'ダイスを公開',
                action: function () {
                    _this.owner = '';
                    _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_7__["SoundEffect"].play(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_7__["PresetSound"].unlock);
                }
            });
        }
        if (!this.isMine) {
            actions.push({
                name: '自分だけ見る',
                action: function () {
                    _this.owner = _udonarium_core_system__WEBPACK_IMPORTED_MODULE_5__["Network"].peerContext.userId;
                    _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_7__["SoundEffect"].play(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_7__["PresetSound"].lock);
                }
            });
        }
        if (this.isVisible) {
            var subActions_1 = [];
            this.faces.forEach(function (face) {
                subActions_1.push({
                    name: "" + face, action: function () {
                        _this.face = face;
                        _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_7__["SoundEffect"].play(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_7__["PresetSound"].dicePut);
                    }
                });
            });
            actions.push({ name: "\u30C0\u30A4\u30B9\u76EE\u3092\u8A2D\u5B9A", action: null, subActions: subActions_1 });
        }
        actions.push(service_context_menu_service__WEBPACK_IMPORTED_MODULE_10__["ContextMenuSeparator"]);
        actions.push({ name: '詳細を表示', action: function () { _this.showDetail(_this.diceSymbol); } });
        actions.push({
            name: 'コピーを作る',
            action: function () {
                var cloneObject = _this.diceSymbol.clone();
                cloneObject.location.x += _this.gridSize;
                cloneObject.location.y += _this.gridSize;
                cloneObject.update();
                _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_7__["SoundEffect"].play(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_7__["PresetSound"].dicePut);
            }
        });
        actions.push({
            name: '削除する',
            action: function () {
                _this.diceSymbol.destroy();
                _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_7__["SoundEffect"].play(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_7__["PresetSound"].sweep);
            }
        });
        this.contextMenuService.open(position, actions, this.name);
    };
    DiceSymbolComponent.prototype.onMove = function () {
        _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_7__["SoundEffect"].play(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_7__["PresetSound"].dicePick);
    };
    DiceSymbolComponent.prototype.onMoved = function () {
        _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_7__["SoundEffect"].play(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_7__["PresetSound"].dicePut);
    };
    DiceSymbolComponent.prototype.diceRoll = function () {
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_5__["EventSystem"].call('ROLL_DICE_SYNBOL', { identifier: this.diceSymbol.identifier });
        _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_7__["SoundEffect"].play(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_7__["PresetSound"].diceRoll1);
        return this.diceSymbol.diceRoll();
    };
    DiceSymbolComponent.prototype.showDetail = function (gameObject) {
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_5__["EventSystem"].trigger('SELECT_TABLETOP_OBJECT', { identifier: gameObject.identifier, className: gameObject.aliasName });
        var coordinate = this.pointerDeviceService.pointers[0];
        var title = 'ダイスシンボル設定';
        if (gameObject.name.length)
            title += ' - ' + gameObject.name;
        var option = { title: title, left: coordinate.x - 300, top: coordinate.y - 300, width: 600, height: 600 };
        var component = this.panelService.open(component_game_character_sheet_game_character_sheet_component__WEBPACK_IMPORTED_MODULE_8__["GameCharacterSheetComponent"], option);
        component.tabletopObject = gameObject;
    };
    DiceSymbolComponent.prototype.startIconHiddenTimer = function () {
        var _this = this;
        clearTimeout(this.iconHiddenTimer);
        this.iconHiddenTimer = setTimeout(function () {
            _this.iconHiddenTimer = null;
            _this.changeDetector.markForCheck();
        }, 300);
        this.changeDetector.markForCheck();
    };
    DiceSymbolComponent.prototype.adjustMinBounds = function (value, min) {
        if (min === void 0) { min = 0; }
        return value < min ? min : value;
    };
    DiceSymbolComponent.ɵfac = function DiceSymbolComponent_Factory(t) { return new (t || DiceSymbolComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_1__["NgZone"]), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdirectiveInject"](service_panel_service__WEBPACK_IMPORTED_MODULE_11__["PanelService"]), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdirectiveInject"](service_context_menu_service__WEBPACK_IMPORTED_MODULE_10__["ContextMenuService"]), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_1__["ElementRef"]), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_1__["ChangeDetectorRef"]), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdirectiveInject"](service_pointer_device_service__WEBPACK_IMPORTED_MODULE_12__["PointerDeviceService"])); };
    DiceSymbolComponent.ɵcmp = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdefineComponent"]({ type: DiceSymbolComponent, selectors: [["dice-symbol"]], hostBindings: function DiceSymbolComponent_HostBindings(rf, ctx) { if (rf & 1) {
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("dragstart", function DiceSymbolComponent_dragstart_HostBindingHandler($event) { return ctx.onDragstart($event); })("contextmenu", function DiceSymbolComponent_contextmenu_HostBindingHandler($event) { return ctx.onContextMenu($event); });
        } }, inputs: { diceSymbol: "diceSymbol", is3D: "is3D" }, decls: 13, vars: 19, consts: [["appMovable", "", 1, "component", "is-3d", "is-grab", "is-pointer-events-none", 3, "movable.option", "movable.ondragstart", "movable.ondragend"], [1, "component-content", "is-3d"], ["appRotable", "", 1, "component-content", "is-3d", "is-pointer-events-auto", 3, "rotable.option", "rotable.ondragstart", "rotable.ondragend"], [1, "pedestal-inner", 3, "ngClass"], [1, "pedestal-outer"], [4, "ngIf"], [1, "upright-transform", "is-fit-width", "is-3d"], [1, "rotate-frame", "is-3d"], [1, "rotate-inner", "is-3d"], ["class", "name-tag is-nowrap is-black-background is-3d", 3, "ngStyle", 4, "ngIf"], ["class", "owner-tag is-nowrap is-black-background is-3d", 3, "ngStyle", 4, "ngIf"], ["class", "image", 3, "src", "ngClass", 4, "ngIf"], [1, "pedestal-grab", "rotate-grab"], [1, "pedestal-grab-border"], [1, "material-icons", "of-front"], [1, "material-icons", "of-back"], [1, "name-tag", "is-nowrap", "is-black-background", "is-3d", 3, "ngStyle"], [1, "fornt-tag", "is-3d"], [1, "back-tag", "is-3d"], [1, "owner-tag", "is-nowrap", "is-black-background", "is-3d", 3, "ngStyle"], [1, "fornt-tag", "has-length-limit", "is-3d"], [1, "back-tag", "has-length-limit", "is-3d"], [1, "image", 3, "src", "ngClass"]], template: function DiceSymbolComponent_Template(rf, ctx) { if (rf & 1) {
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "div", 0);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("movable.ondragstart", function DiceSymbolComponent_Template_div_movable_ondragstart_0_listener() { return ctx.onMove(); })("movable.ondragend", function DiceSymbolComponent_Template_div_movable_ondragend_0_listener() { return ctx.onMoved(); });
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](1, "div", 1);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](2, "div", 2);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("rotable.ondragstart", function DiceSymbolComponent_Template_div_rotable_ondragstart_2_listener() { return ctx.onMove(); })("rotable.ondragend", function DiceSymbolComponent_Template_div_rotable_ondragend_2_listener() { return ctx.onMoved(); });
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelement"](3, "div", 3);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelement"](4, "div", 4);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](5, DiceSymbolComponent_ng_container_5_Template, 7, 0, "ng-container", 5);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](6, "div", 1);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("@diceRoll.done", function DiceSymbolComponent_Template_div_animation_diceRoll_done_6_listener($event) { return ctx.animationShuffleDone($event); });
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](7, "div", 6);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](8, "div", 7);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](9, "div", 8);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](10, DiceSymbolComponent_div_10_Template, 9, 9, "div", 9);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](11, DiceSymbolComponent_div_11_Template, 5, 5, "div", 10);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](12, DiceSymbolComponent_img_12_Template, 2, 8, "img", 11);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
        } if (rf & 2) {
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵstyleProp"]("width", ctx.size * ctx.gridSize, "px")("height", ctx.size * ctx.gridSize, "px");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("movable.option", ctx.movableOption);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("@bounceInOut", "in");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("rotable.option", ctx.rotableOption);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngClass", _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpureFunction1"](17, _c2, ctx.hasOwner));
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](2);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", !ctx.isIconHidden);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("@diceRoll", ctx.animeState);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](2);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵstyleProp"]("width", ctx.size * ctx.gridSize, "px")("height", ctx.size * ctx.gridSize, "px");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](2);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", 0 < ctx.name.length);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", ctx.hasOwner && 0 < ctx.ownerName.length);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", 0 < ctx.imageFile.url.length);
        } }, directives: [directive_movable_directive__WEBPACK_IMPORTED_MODULE_13__["MovableDirective"], directive_rotable_directive__WEBPACK_IMPORTED_MODULE_14__["RotableDirective"], _angular_common__WEBPACK_IMPORTED_MODULE_15__["NgClass"], _angular_common__WEBPACK_IMPORTED_MODULE_15__["NgIf"], _angular_common__WEBPACK_IMPORTED_MODULE_15__["NgStyle"]], pipes: [pipe_safe_pipe__WEBPACK_IMPORTED_MODULE_16__["SafePipe"]], styles: [".is-grab[_ngcontent-%COMP%] {\r\n  cursor: grab;\r\n}\r\n\r\n.is-grabbing[_ngcontent-%COMP%] {\r\n  cursor: grabbing;\r\n}\r\n\r\n.is-3d[_ngcontent-%COMP%] {\r\n  transform-style: preserve-3d;\r\n}\r\n\r\n.is-transition[_ngcontent-%COMP%] {\r\n  transition: transform 132ms linear;\r\n}\r\n\r\n.is-pointer-events-none[_ngcontent-%COMP%] {\r\n  pointer-events: none;\r\n}\r\n\r\n.is-pointer-events-auto[_ngcontent-%COMP%] {\r\n  pointer-events: auto;\r\n}\r\n\r\n.component[_ngcontent-%COMP%] {\r\n  position: absolute;\r\n  height: 50px;\r\n  width: 50px;\r\n  -webkit-user-select: none;\r\n  user-select: none;\r\n  -moz-user-drag: none;\r\n  -webkit-user-drag: none;\r\n}\r\n\r\n.component-content[_ngcontent-%COMP%] {\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n\r\n.pedestal-grab[_ngcontent-%COMP%] {\r\n  z-index: -1;\r\n  -webkit-backface-visibility: hidden;\r\n          backface-visibility: hidden;\r\n  position: absolute;\r\n  top: -22px;\r\n  left: -6px;\r\n  height: calc(100% + 44px);\r\n  width: calc(100% + 12px);\r\n  cursor: default;\r\n  border-radius: 37px;\r\n}\r\n\r\n.pedestal-grab-border[_ngcontent-%COMP%] {\r\n  pointer-events: none;\r\n  width: 100%;\r\n  height: 100%;\r\n  box-sizing: border-box;\r\n  border-top: solid 28px #999;\r\n  border-left: solid 12px #999;\r\n  border-right: solid 12px #CCC;\r\n  border-bottom: solid 28px #CCC;\r\n  border-radius: 22px;\r\n}\r\n\r\n.pedestal-inner[_ngcontent-%COMP%] {\r\n  -webkit-backface-visibility: hidden;\r\n          backface-visibility: hidden;\r\n  position: absolute;\r\n  height: 100%;\r\n  width: 100%;\r\n  box-sizing: border-box;\r\n  border: solid 6px rgb(216, 139, 75);\r\n  border-radius: 5px;\r\n}\r\n\r\n.is-gray-border[_ngcontent-%COMP%] {\r\n  border-color: #999;\r\n}\r\n\r\n.pedestal-outer[_ngcontent-%COMP%] {\r\n  -webkit-backface-visibility: hidden;\r\n          backface-visibility: hidden;\r\n  position: absolute;\r\n  height: 100%;\r\n  width: 100%;\r\n  box-sizing: border-box;\r\n  border: solid 2px #212121;\r\n  border-radius: 5px;\r\n}\r\n\r\n.upright-transform[_ngcontent-%COMP%] {\r\n  position: absolute;\r\n  bottom: 0;\r\n  left: 0;\r\n  right: 0;\r\n  transform: rotateX(-90deg) translateY(-50%);\r\n}\r\n\r\n.is-fit-width[_ngcontent-%COMP%] {\r\n  height: auto;\r\n  width: 100%;\r\n}\r\n\r\n.fill-frame[_ngcontent-%COMP%] {\r\n  position: absolute;\r\n  bottom: 0;\r\n  left: 0;\r\n  right: 0;\r\n}\r\n\r\n.image[_ngcontent-%COMP%] {\r\n  bottom: 0;\r\n  left: 0;\r\n  right: 0;\r\n  margin: auto;\r\n\r\n  width: 100%;\r\n  height: auto;\r\n  vertical-align: bottom;\r\n}\r\n\r\n.is-black-mask[_ngcontent-%COMP%] {\r\n  filter: brightness(0);\r\n }\r\n\r\n.is-harf-black-mask[_ngcontent-%COMP%] {\r\n  filter: brightness(0.5);\r\n }\r\n\r\n.name-tag[_ngcontent-%COMP%] {\r\n  box-sizing: border-box;\r\n  font-size: 15px;\r\n  padding: 3px 9px;\r\n  border-radius: 6px;\r\n  position: absolute;\r\n  top: -30px;\r\n}\r\n\r\n.owner-tag[_ngcontent-%COMP%] {\r\n  box-sizing: border-box;\r\n  font-size: 12px;\r\n  padding: 3px 9px;\r\n  border-radius: 6px;\r\n  position: absolute;\r\n  top: -55px;\r\n}\r\n\r\n.rotate-frame[_ngcontent-%COMP%] {\r\n  bottom: 0;\r\n  left: 0;\r\n  right: 0;\r\n}\r\n\r\n.rotate-inner[_ngcontent-%COMP%] {\r\n  position: absolute;\r\n  bottom: 0;\r\n  left: 0;\r\n  right: 0;\r\n\r\n  width: 100%;\r\n  height: auto;\r\n}\r\n\r\n.is-nowrap[_ngcontent-%COMP%] {\r\n  white-space: nowrap;\r\n}\r\n\r\n.is-black-background[_ngcontent-%COMP%] {\r\n  color: #CCC;\r\n  background-color: rgba(30, 30, 30, 0.8);\r\n}\r\n\r\n.fornt-tag[_ngcontent-%COMP%] {\r\n  -webkit-backface-visibility: hidden;\r\n          backface-visibility: hidden;\r\n}\r\n\r\n.back-tag[_ngcontent-%COMP%] {\r\n  position: absolute;\r\n  top: 3px;\r\n  -webkit-backface-visibility: hidden;\r\n          backface-visibility: hidden;\r\n  transform: rotateY(-180deg);\r\n}\r\n\r\n.has-length-limit[_ngcontent-%COMP%] {\r\n  overflow: hidden;\r\n  white-space: nowrap;\r\n  text-overflow: ellipsis;\r\n  max-width: 18em;\r\n}\r\n\r\n.rotate-grab-icon[_ngcontent-%COMP%] {\r\n  position: absolute;\r\n  width: 28px;\r\n  height: 28px;\r\n  box-sizing: border-box;\r\n  cursor: -moz-default;\r\n  cursor: -webkit-default;\r\n  cursor: default;\r\n  z-index: 1;\r\n  padding: 2px;\r\n  background-color: #CCCCCC;\r\n  border-radius: 100%;\r\n  color: #444;\r\n  font-size: 8px;\r\n}\r\n\r\n.of-top[_ngcontent-%COMP%] {\r\n  top: -42px;\r\n}\r\n\r\n.of-bottom[_ngcontent-%COMP%] {\r\n  bottom: -30px;\r\n}\r\n\r\n.of-front[_ngcontent-%COMP%] {\r\n  position: absolute;\r\n  width: 24px;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  margin: auto;\r\n  color: #444;\r\n}\r\n\r\n.of-back[_ngcontent-%COMP%] {\r\n  position: absolute;\r\n  width: 24px;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  margin: auto;\r\n  color: #444;\r\n}\r\n\r\n.rotate-grab[_ngcontent-%COMP%] {\r\n  opacity: 0;\r\n}\r\n\r\n.component[_ngcontent-%COMP%]:hover   .rotate-grab[_ngcontent-%COMP%] {\r\n  opacity: 0.5;\r\n}\r\n\r\n.component[_ngcontent-%COMP%]:active   .rotate-grab[_ngcontent-%COMP%] {\r\n  opacity: 0;\r\n}\r\n\r\n.component[_ngcontent-%COMP%]   .rotate-grab[_ngcontent-%COMP%]:hover, .component[_ngcontent-%COMP%]   .rotate-grab[_ngcontent-%COMP%]:active {\r\n  opacity: 1;\r\n}\r\n\r\n.material-icons[_ngcontent-%COMP%] {\r\n  display: none;\r\n}\r\n\r\n.component[_ngcontent-%COMP%]:hover   .material-icons[_ngcontent-%COMP%], .component[_ngcontent-%COMP%]:active   .material-icons[_ngcontent-%COMP%] {\r\n  display: inline;\r\n}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRpY2Utc3ltYm9sLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFHRSxZQUFZO0FBQ2Q7O0FBRUE7RUFHRSxnQkFBZ0I7QUFDbEI7O0FBRUE7RUFFRSw0QkFBNEI7QUFDOUI7O0FBRUE7RUFFRSxrQ0FBa0M7QUFDcEM7O0FBRUE7RUFDRSxvQkFBb0I7QUFDdEI7O0FBRUE7RUFDRSxvQkFBb0I7QUFDdEI7O0FBRUE7RUFDRSxrQkFBa0I7RUFDbEIsWUFBWTtFQUNaLFdBQVc7RUFHWCx5QkFBeUI7RUFDekIsaUJBQWlCO0VBQ2pCLG9CQUFvQjtFQUNwQix1QkFBdUI7QUFDekI7O0FBRUE7RUFDRSxXQUFXO0VBQ1gsWUFBWTtBQUNkOztBQUVBO0VBQ0UsV0FBVztFQUNYLG1DQUEyQjtVQUEzQiwyQkFBMkI7RUFDM0Isa0JBQWtCO0VBQ2xCLFVBQVU7RUFDVixVQUFVO0VBQ1YseUJBQXlCO0VBQ3pCLHdCQUF3QjtFQUN4QixlQUFlO0VBQ2YsbUJBQW1CO0FBQ3JCOztBQUVBO0VBQ0Usb0JBQW9CO0VBQ3BCLFdBQVc7RUFDWCxZQUFZO0VBQ1osc0JBQXNCO0VBQ3RCLDJCQUEyQjtFQUMzQiw0QkFBNEI7RUFDNUIsNkJBQTZCO0VBQzdCLDhCQUE4QjtFQUM5QixtQkFBbUI7QUFDckI7O0FBRUE7RUFDRSxtQ0FBMkI7VUFBM0IsMkJBQTJCO0VBQzNCLGtCQUFrQjtFQUNsQixZQUFZO0VBQ1osV0FBVztFQUNYLHNCQUFzQjtFQUN0QixtQ0FBbUM7RUFDbkMsa0JBQWtCO0FBQ3BCOztBQUVBO0VBQ0Usa0JBQWtCO0FBQ3BCOztBQUVBO0VBQ0UsbUNBQTJCO1VBQTNCLDJCQUEyQjtFQUMzQixrQkFBa0I7RUFDbEIsWUFBWTtFQUNaLFdBQVc7RUFDWCxzQkFBc0I7RUFDdEIseUJBQXlCO0VBQ3pCLGtCQUFrQjtBQUNwQjs7QUFFQTtFQUNFLGtCQUFrQjtFQUNsQixTQUFTO0VBQ1QsT0FBTztFQUNQLFFBQVE7RUFDUiwyQ0FBMkM7QUFDN0M7O0FBRUE7RUFDRSxZQUFZO0VBQ1osV0FBVztBQUNiOztBQUVBO0VBQ0Usa0JBQWtCO0VBQ2xCLFNBQVM7RUFDVCxPQUFPO0VBQ1AsUUFBUTtBQUNWOztBQUVBO0VBQ0UsU0FBUztFQUNULE9BQU87RUFDUCxRQUFRO0VBQ1IsWUFBWTs7RUFFWixXQUFXO0VBQ1gsWUFBWTtFQUNaLHNCQUFzQjtBQUN4Qjs7QUFFQTtFQUNFLHFCQUFxQjtDQUN0Qjs7QUFFQTtFQUNDLHVCQUF1QjtDQUN4Qjs7QUFFRDtFQUNFLHNCQUFzQjtFQUN0QixlQUFlO0VBQ2YsZ0JBQWdCO0VBQ2hCLGtCQUFrQjtFQUNsQixrQkFBa0I7RUFDbEIsVUFBVTtBQUNaOztBQUVBO0VBQ0Usc0JBQXNCO0VBQ3RCLGVBQWU7RUFDZixnQkFBZ0I7RUFDaEIsa0JBQWtCO0VBQ2xCLGtCQUFrQjtFQUNsQixVQUFVO0FBQ1o7O0FBRUE7RUFDRSxTQUFTO0VBQ1QsT0FBTztFQUNQLFFBQVE7QUFDVjs7QUFFQTtFQUNFLGtCQUFrQjtFQUNsQixTQUFTO0VBQ1QsT0FBTztFQUNQLFFBQVE7O0VBRVIsV0FBVztFQUNYLFlBQVk7QUFDZDs7QUFFQTtFQUNFLG1CQUFtQjtBQUNyQjs7QUFFQTtFQUNFLFdBQVc7RUFDWCx1Q0FBdUM7QUFDekM7O0FBRUE7RUFDRSxtQ0FBMkI7VUFBM0IsMkJBQTJCO0FBQzdCOztBQUVBO0VBQ0Usa0JBQWtCO0VBQ2xCLFFBQVE7RUFDUixtQ0FBMkI7VUFBM0IsMkJBQTJCO0VBQzNCLDJCQUEyQjtBQUM3Qjs7QUFFQTtFQUNFLGdCQUFnQjtFQUNoQixtQkFBbUI7RUFDbkIsdUJBQXVCO0VBQ3ZCLGVBQWU7QUFDakI7O0FBRUE7RUFDRSxrQkFBa0I7RUFDbEIsV0FBVztFQUNYLFlBQVk7RUFDWixzQkFBc0I7RUFDdEIsb0JBQW9CO0VBQ3BCLHVCQUF1QjtFQUN2QixlQUFlO0VBQ2YsVUFBVTtFQUNWLFlBQVk7RUFDWix5QkFBeUI7RUFDekIsbUJBQW1CO0VBQ25CLFdBQVc7RUFDWCxjQUFjO0FBQ2hCOztBQUVBO0VBQ0UsVUFBVTtBQUNaOztBQUVBO0VBQ0UsYUFBYTtBQUNmOztBQUVBO0VBQ0Usa0JBQWtCO0VBQ2xCLFdBQVc7RUFDWCxPQUFPO0VBQ1AsUUFBUTtFQUNSLFNBQVM7RUFDVCxZQUFZO0VBQ1osV0FBVztBQUNiOztBQUVBO0VBQ0Usa0JBQWtCO0VBQ2xCLFdBQVc7RUFDWCxNQUFNO0VBQ04sT0FBTztFQUNQLFFBQVE7RUFDUixZQUFZO0VBQ1osV0FBVztBQUNiOztBQUVBO0VBQ0UsVUFBVTtBQUNaOztBQUVBO0VBQ0UsWUFBWTtBQUNkOztBQUVBO0VBQ0UsVUFBVTtBQUNaOztBQUVBO0VBQ0UsVUFBVTtBQUNaOztBQUVBO0VBQ0UsYUFBYTtBQUNmOztBQUVBO0VBQ0UsZUFBZTtBQUNqQiIsImZpbGUiOiJkaWNlLXN5bWJvbC5jb21wb25lbnQuY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLmlzLWdyYWIge1xyXG4gIGN1cnNvcjogLW1vei1ncmFiO1xyXG4gIGN1cnNvcjogLXdlYmtpdC1ncmFiO1xyXG4gIGN1cnNvcjogZ3JhYjtcclxufVxyXG5cclxuLmlzLWdyYWJiaW5nIHtcclxuICBjdXJzb3I6IC1tb3otZ3JhYmJpbmc7XHJcbiAgY3Vyc29yOiAtd2Via2l0LWdyYWJiaW5nO1xyXG4gIGN1cnNvcjogZ3JhYmJpbmc7XHJcbn1cclxuXHJcbi5pcy0zZCB7XHJcbiAgLXdlYmtpdC10cmFuc2Zvcm0tc3R5bGU6IHByZXNlcnZlLTNkO1xyXG4gIHRyYW5zZm9ybS1zdHlsZTogcHJlc2VydmUtM2Q7XHJcbn1cclxuXHJcbi5pcy10cmFuc2l0aW9uIHtcclxuICAtd2Via2l0LXRyYW5zaXRpb246IC13ZWJraXQtdHJhbnNmb3JtIDEzMm1zIGxpbmVhcjtcclxuICB0cmFuc2l0aW9uOiB0cmFuc2Zvcm0gMTMybXMgbGluZWFyO1xyXG59XHJcblxyXG4uaXMtcG9pbnRlci1ldmVudHMtbm9uZSB7XHJcbiAgcG9pbnRlci1ldmVudHM6IG5vbmU7XHJcbn1cclxuXHJcbi5pcy1wb2ludGVyLWV2ZW50cy1hdXRvIHtcclxuICBwb2ludGVyLWV2ZW50czogYXV0bztcclxufVxyXG5cclxuLmNvbXBvbmVudCB7XHJcbiAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gIGhlaWdodDogNTBweDtcclxuICB3aWR0aDogNTBweDtcclxuXHJcbiAgLW1vei11c2VyLXNlbGVjdDogbm9uZTtcclxuICAtd2Via2l0LXVzZXItc2VsZWN0OiBub25lO1xyXG4gIHVzZXItc2VsZWN0OiBub25lO1xyXG4gIC1tb3otdXNlci1kcmFnOiBub25lO1xyXG4gIC13ZWJraXQtdXNlci1kcmFnOiBub25lO1xyXG59XHJcblxyXG4uY29tcG9uZW50LWNvbnRlbnQge1xyXG4gIHdpZHRoOiAxMDAlO1xyXG4gIGhlaWdodDogMTAwJTtcclxufVxyXG5cclxuLnBlZGVzdGFsLWdyYWIge1xyXG4gIHotaW5kZXg6IC0xO1xyXG4gIGJhY2tmYWNlLXZpc2liaWxpdHk6IGhpZGRlbjtcclxuICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgdG9wOiAtMjJweDtcclxuICBsZWZ0OiAtNnB4O1xyXG4gIGhlaWdodDogY2FsYygxMDAlICsgNDRweCk7XHJcbiAgd2lkdGg6IGNhbGMoMTAwJSArIDEycHgpO1xyXG4gIGN1cnNvcjogZGVmYXVsdDtcclxuICBib3JkZXItcmFkaXVzOiAzN3B4O1xyXG59XHJcblxyXG4ucGVkZXN0YWwtZ3JhYi1ib3JkZXIge1xyXG4gIHBvaW50ZXItZXZlbnRzOiBub25lO1xyXG4gIHdpZHRoOiAxMDAlO1xyXG4gIGhlaWdodDogMTAwJTtcclxuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xyXG4gIGJvcmRlci10b3A6IHNvbGlkIDI4cHggIzk5OTtcclxuICBib3JkZXItbGVmdDogc29saWQgMTJweCAjOTk5O1xyXG4gIGJvcmRlci1yaWdodDogc29saWQgMTJweCAjQ0NDO1xyXG4gIGJvcmRlci1ib3R0b206IHNvbGlkIDI4cHggI0NDQztcclxuICBib3JkZXItcmFkaXVzOiAyMnB4O1xyXG59XHJcblxyXG4ucGVkZXN0YWwtaW5uZXIge1xyXG4gIGJhY2tmYWNlLXZpc2liaWxpdHk6IGhpZGRlbjtcclxuICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgaGVpZ2h0OiAxMDAlO1xyXG4gIHdpZHRoOiAxMDAlO1xyXG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XHJcbiAgYm9yZGVyOiBzb2xpZCA2cHggcmdiKDIxNiwgMTM5LCA3NSk7XHJcbiAgYm9yZGVyLXJhZGl1czogNXB4O1xyXG59XHJcblxyXG4uaXMtZ3JheS1ib3JkZXIge1xyXG4gIGJvcmRlci1jb2xvcjogIzk5OTtcclxufVxyXG5cclxuLnBlZGVzdGFsLW91dGVyIHtcclxuICBiYWNrZmFjZS12aXNpYmlsaXR5OiBoaWRkZW47XHJcbiAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gIGhlaWdodDogMTAwJTtcclxuICB3aWR0aDogMTAwJTtcclxuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xyXG4gIGJvcmRlcjogc29saWQgMnB4ICMyMTIxMjE7XHJcbiAgYm9yZGVyLXJhZGl1czogNXB4O1xyXG59XHJcblxyXG4udXByaWdodC10cmFuc2Zvcm0ge1xyXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcclxuICBib3R0b206IDA7XHJcbiAgbGVmdDogMDtcclxuICByaWdodDogMDtcclxuICB0cmFuc2Zvcm06IHJvdGF0ZVgoLTkwZGVnKSB0cmFuc2xhdGVZKC01MCUpO1xyXG59XHJcblxyXG4uaXMtZml0LXdpZHRoIHtcclxuICBoZWlnaHQ6IGF1dG87XHJcbiAgd2lkdGg6IDEwMCU7XHJcbn1cclxuXHJcbi5maWxsLWZyYW1lIHtcclxuICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgYm90dG9tOiAwO1xyXG4gIGxlZnQ6IDA7XHJcbiAgcmlnaHQ6IDA7XHJcbn1cclxuXHJcbi5pbWFnZSB7XHJcbiAgYm90dG9tOiAwO1xyXG4gIGxlZnQ6IDA7XHJcbiAgcmlnaHQ6IDA7XHJcbiAgbWFyZ2luOiBhdXRvO1xyXG5cclxuICB3aWR0aDogMTAwJTtcclxuICBoZWlnaHQ6IGF1dG87XHJcbiAgdmVydGljYWwtYWxpZ246IGJvdHRvbTtcclxufVxyXG5cclxuLmlzLWJsYWNrLW1hc2sge1xyXG4gIGZpbHRlcjogYnJpZ2h0bmVzcygwKTtcclxuIH1cclxuXHJcbiAuaXMtaGFyZi1ibGFjay1tYXNrIHtcclxuICBmaWx0ZXI6IGJyaWdodG5lc3MoMC41KTtcclxuIH1cclxuXHJcbi5uYW1lLXRhZyB7XHJcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcclxuICBmb250LXNpemU6IDE1cHg7XHJcbiAgcGFkZGluZzogM3B4IDlweDtcclxuICBib3JkZXItcmFkaXVzOiA2cHg7XHJcbiAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gIHRvcDogLTMwcHg7XHJcbn1cclxuXHJcbi5vd25lci10YWcge1xyXG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XHJcbiAgZm9udC1zaXplOiAxMnB4O1xyXG4gIHBhZGRpbmc6IDNweCA5cHg7XHJcbiAgYm9yZGVyLXJhZGl1czogNnB4O1xyXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcclxuICB0b3A6IC01NXB4O1xyXG59XHJcblxyXG4ucm90YXRlLWZyYW1lIHtcclxuICBib3R0b206IDA7XHJcbiAgbGVmdDogMDtcclxuICByaWdodDogMDtcclxufVxyXG5cclxuLnJvdGF0ZS1pbm5lciB7XHJcbiAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gIGJvdHRvbTogMDtcclxuICBsZWZ0OiAwO1xyXG4gIHJpZ2h0OiAwO1xyXG5cclxuICB3aWR0aDogMTAwJTtcclxuICBoZWlnaHQ6IGF1dG87XHJcbn1cclxuXHJcbi5pcy1ub3dyYXAge1xyXG4gIHdoaXRlLXNwYWNlOiBub3dyYXA7XHJcbn1cclxuXHJcbi5pcy1ibGFjay1iYWNrZ3JvdW5kIHtcclxuICBjb2xvcjogI0NDQztcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDMwLCAzMCwgMzAsIDAuOCk7XHJcbn1cclxuXHJcbi5mb3JudC10YWcge1xyXG4gIGJhY2tmYWNlLXZpc2liaWxpdHk6IGhpZGRlbjtcclxufVxyXG5cclxuLmJhY2stdGFnIHtcclxuICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgdG9wOiAzcHg7XHJcbiAgYmFja2ZhY2UtdmlzaWJpbGl0eTogaGlkZGVuO1xyXG4gIHRyYW5zZm9ybTogcm90YXRlWSgtMTgwZGVnKTtcclxufVxyXG5cclxuLmhhcy1sZW5ndGgtbGltaXQge1xyXG4gIG92ZXJmbG93OiBoaWRkZW47XHJcbiAgd2hpdGUtc3BhY2U6IG5vd3JhcDtcclxuICB0ZXh0LW92ZXJmbG93OiBlbGxpcHNpcztcclxuICBtYXgtd2lkdGg6IDE4ZW07XHJcbn1cclxuXHJcbi5yb3RhdGUtZ3JhYi1pY29uIHtcclxuICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgd2lkdGg6IDI4cHg7XHJcbiAgaGVpZ2h0OiAyOHB4O1xyXG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XHJcbiAgY3Vyc29yOiAtbW96LWRlZmF1bHQ7XHJcbiAgY3Vyc29yOiAtd2Via2l0LWRlZmF1bHQ7XHJcbiAgY3Vyc29yOiBkZWZhdWx0O1xyXG4gIHotaW5kZXg6IDE7XHJcbiAgcGFkZGluZzogMnB4O1xyXG4gIGJhY2tncm91bmQtY29sb3I6ICNDQ0NDQ0M7XHJcbiAgYm9yZGVyLXJhZGl1czogMTAwJTtcclxuICBjb2xvcjogIzQ0NDtcclxuICBmb250LXNpemU6IDhweDtcclxufVxyXG5cclxuLm9mLXRvcCB7XHJcbiAgdG9wOiAtNDJweDtcclxufVxyXG5cclxuLm9mLWJvdHRvbSB7XHJcbiAgYm90dG9tOiAtMzBweDtcclxufVxyXG5cclxuLm9mLWZyb250IHtcclxuICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgd2lkdGg6IDI0cHg7XHJcbiAgbGVmdDogMDtcclxuICByaWdodDogMDtcclxuICBib3R0b206IDA7XHJcbiAgbWFyZ2luOiBhdXRvO1xyXG4gIGNvbG9yOiAjNDQ0O1xyXG59XHJcblxyXG4ub2YtYmFjayB7XHJcbiAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gIHdpZHRoOiAyNHB4O1xyXG4gIHRvcDogMDtcclxuICBsZWZ0OiAwO1xyXG4gIHJpZ2h0OiAwO1xyXG4gIG1hcmdpbjogYXV0bztcclxuICBjb2xvcjogIzQ0NDtcclxufVxyXG5cclxuLnJvdGF0ZS1ncmFiIHtcclxuICBvcGFjaXR5OiAwO1xyXG59XHJcblxyXG4uY29tcG9uZW50OmhvdmVyIC5yb3RhdGUtZ3JhYiB7XHJcbiAgb3BhY2l0eTogMC41O1xyXG59XHJcblxyXG4uY29tcG9uZW50OmFjdGl2ZSAucm90YXRlLWdyYWIge1xyXG4gIG9wYWNpdHk6IDA7XHJcbn1cclxuXHJcbi5jb21wb25lbnQgLnJvdGF0ZS1ncmFiOmhvdmVyLCAuY29tcG9uZW50IC5yb3RhdGUtZ3JhYjphY3RpdmUge1xyXG4gIG9wYWNpdHk6IDE7XHJcbn1cclxuXHJcbi5tYXRlcmlhbC1pY29ucyB7XHJcbiAgZGlzcGxheTogbm9uZTtcclxufVxyXG5cclxuLmNvbXBvbmVudDpob3ZlciAubWF0ZXJpYWwtaWNvbnMsIC5jb21wb25lbnQ6YWN0aXZlIC5tYXRlcmlhbC1pY29ucyB7XHJcbiAgZGlzcGxheTogaW5saW5lO1xyXG59Il19 */"], data: { animation: [
                Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["trigger"])('diceRoll', [
                    Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["transition"])('* => active', [
                        Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["animate"])('800ms ease', Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["keyframes"])([
                            Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])({ transform: 'scale3d(0.8, 0.8, 0.8) rotateZ(0deg)', offset: 0 }),
                            Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])({ transform: 'scale3d(1.2, 1.2, 1.2) rotateZ(360deg)', offset: 0.5 }),
                            Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])({ transform: 'scale3d(0.75, 0.75, 0.75) rotateZ(520deg)', offset: 0.75 }),
                            Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])({ transform: 'scale3d(1.125, 1.125, 1.125) rotateZ(630deg)', offset: 0.875 }),
                            Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])({ transform: 'scale3d(1.0, 1.0, 1.0) rotateZ(720deg)', offset: 1.0 })
                        ]))
                    ])
                ]),
                Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["trigger"])('bounceInOut', [
                    Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["transition"])('void => *', [
                        Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["animate"])('600ms ease', Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["keyframes"])([
                            Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])({ transform: 'scale3d(0, 0, 0)', offset: 0 }),
                            Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])({ transform: 'scale3d(1.5, 1.5, 1.5)', offset: 0.5 }),
                            Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])({ transform: 'scale3d(0.75, 0.75, 0.75)', offset: 0.75 }),
                            Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])({ transform: 'scale3d(1.125, 1.125, 1.125)', offset: 0.875 }),
                            Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])({ transform: 'scale3d(1.0, 1.0, 1.0)', offset: 1.0 })
                        ]))
                    ]),
                    Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["transition"])('* => void', [
                        Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["animate"])(100, Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])({ transform: 'scale3d(0, 0, 0)' }))
                    ])
                ])
            ] }, changeDetection: 0 });
    return DiceSymbolComponent;
}());

/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵsetClassMetadata"](DiceSymbolComponent, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_1__["Component"],
        args: [{
                selector: 'dice-symbol',
                templateUrl: './dice-symbol.component.html',
                styleUrls: ['./dice-symbol.component.css'],
                changeDetection: _angular_core__WEBPACK_IMPORTED_MODULE_1__["ChangeDetectionStrategy"].OnPush,
                animations: [
                    Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["trigger"])('diceRoll', [
                        Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["transition"])('* => active', [
                            Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["animate"])('800ms ease', Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["keyframes"])([
                                Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])({ transform: 'scale3d(0.8, 0.8, 0.8) rotateZ(0deg)', offset: 0 }),
                                Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])({ transform: 'scale3d(1.2, 1.2, 1.2) rotateZ(360deg)', offset: 0.5 }),
                                Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])({ transform: 'scale3d(0.75, 0.75, 0.75) rotateZ(520deg)', offset: 0.75 }),
                                Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])({ transform: 'scale3d(1.125, 1.125, 1.125) rotateZ(630deg)', offset: 0.875 }),
                                Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])({ transform: 'scale3d(1.0, 1.0, 1.0) rotateZ(720deg)', offset: 1.0 })
                            ]))
                        ])
                    ]),
                    Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["trigger"])('bounceInOut', [
                        Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["transition"])('void => *', [
                            Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["animate"])('600ms ease', Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["keyframes"])([
                                Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])({ transform: 'scale3d(0, 0, 0)', offset: 0 }),
                                Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])({ transform: 'scale3d(1.5, 1.5, 1.5)', offset: 0.5 }),
                                Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])({ transform: 'scale3d(0.75, 0.75, 0.75)', offset: 0.75 }),
                                Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])({ transform: 'scale3d(1.125, 1.125, 1.125)', offset: 0.875 }),
                                Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])({ transform: 'scale3d(1.0, 1.0, 1.0)', offset: 1.0 })
                            ]))
                        ]),
                        Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["transition"])('* => void', [
                            Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["animate"])(100, Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])({ transform: 'scale3d(0, 0, 0)' }))
                        ])
                    ])
                ]
            }]
    }], function () { return [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_1__["NgZone"] }, { type: service_panel_service__WEBPACK_IMPORTED_MODULE_11__["PanelService"] }, { type: service_context_menu_service__WEBPACK_IMPORTED_MODULE_10__["ContextMenuService"] }, { type: _angular_core__WEBPACK_IMPORTED_MODULE_1__["ElementRef"] }, { type: _angular_core__WEBPACK_IMPORTED_MODULE_1__["ChangeDetectorRef"] }, { type: service_pointer_device_service__WEBPACK_IMPORTED_MODULE_12__["PointerDeviceService"] }]; }, { diceSymbol: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_1__["Input"]
        }], is3D: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_1__["Input"]
        }], onDragstart: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_1__["HostListener"],
            args: ['dragstart', ['$event']]
        }], onContextMenu: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_1__["HostListener"],
            args: ['contextmenu', ['$event']]
        }] }); })();


/***/ }),

/***/ "FjwV":
/*!*******************************************************!*\
  !*** ./src/app/class/core/file-storage/image-file.ts ***!
  \*******************************************************/
/*! exports provided: ImageState, ImageFile */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ImageState", function() { return ImageState; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ImageFile", function() { return ImageFile; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "mrSG");
/* harmony import */ var _canvas_util__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./canvas-util */ "9Fxf");
/* harmony import */ var _file_reader_util__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./file-reader-util */ "N0uT");



var ImageState;
(function (ImageState) {
    ImageState[ImageState["NULL"] = 0] = "NULL";
    ImageState[ImageState["THUMBNAIL"] = 1] = "THUMBNAIL";
    ImageState[ImageState["COMPLETE"] = 2] = "COMPLETE";
    ImageState[ImageState["URL"] = 1000] = "URL";
})(ImageState || (ImageState = {}));
var ImageFile = /** @class */ (function () {
    function ImageFile() {
        this.context = {
            identifier: '',
            name: '',
            blob: null,
            type: '',
            url: '',
            thumbnail: {
                blob: null,
                type: '',
                url: '',
            }
        };
    }
    Object.defineProperty(ImageFile.prototype, "identifier", {
        get: function () { return this.context.identifier; },
        enumerable: false,
        configurable: true
    });
    ;
    Object.defineProperty(ImageFile.prototype, "name", {
        get: function () { return this.context.name; },
        enumerable: false,
        configurable: true
    });
    ;
    Object.defineProperty(ImageFile.prototype, "blob", {
        get: function () { return this.context.blob ? this.context.blob : this.context.thumbnail.blob; },
        enumerable: false,
        configurable: true
    });
    ;
    Object.defineProperty(ImageFile.prototype, "url", {
        get: function () { return this.context.url ? this.context.url : this.context.thumbnail.url; },
        enumerable: false,
        configurable: true
    });
    ;
    Object.defineProperty(ImageFile.prototype, "thumbnail", {
        get: function () { return this.context.thumbnail; },
        enumerable: false,
        configurable: true
    });
    ;
    Object.defineProperty(ImageFile.prototype, "state", {
        get: function () {
            if (!this.url && !this.blob)
                return ImageState.NULL;
            if (this.url && !this.blob)
                return ImageState.URL;
            if (this.blob === this.thumbnail.blob)
                return ImageState.THUMBNAIL;
            return ImageState.COMPLETE;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ImageFile.prototype, "isEmpty", {
        get: function () { return this.state <= ImageState.NULL; },
        enumerable: false,
        configurable: true
    });
    ImageFile.createEmpty = function (identifier) {
        var imageFile = new ImageFile();
        imageFile.context.identifier = identifier;
        return imageFile;
    };
    ImageFile.create = function (arg) {
        if (typeof arg === 'string') {
            var imageFile = new ImageFile();
            imageFile.context.identifier = arg;
            imageFile.context.name = arg;
            imageFile.context.url = arg;
            return imageFile;
        }
        else {
            var imageFile = new ImageFile();
            imageFile.apply(arg);
            return imageFile;
        }
    };
    ImageFile.createAsync = function (arg) {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function () {
            return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"])(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (!(arg instanceof File)) return [3 /*break*/, 2];
                        return [4 /*yield*/, ImageFile._createAsync(arg, arg.name)];
                    case 1: return [2 /*return*/, _a.sent()];
                    case 2:
                        if (!(arg instanceof Blob)) return [3 /*break*/, 4];
                        return [4 /*yield*/, ImageFile._createAsync(arg)];
                    case 3: return [2 /*return*/, _a.sent()];
                    case 4: return [2 /*return*/];
                }
            });
        });
    };
    ImageFile._createAsync = function (blob, name) {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function () {
            var arrayBuffer, imageFile, _a, _b, e_1;
            return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"])(this, function (_c) {
                switch (_c.label) {
                    case 0: return [4 /*yield*/, _file_reader_util__WEBPACK_IMPORTED_MODULE_2__["FileReaderUtil"].readAsArrayBufferAsync(blob)];
                    case 1:
                        arrayBuffer = _c.sent();
                        imageFile = new ImageFile();
                        _a = imageFile.context;
                        return [4 /*yield*/, _file_reader_util__WEBPACK_IMPORTED_MODULE_2__["FileReaderUtil"].calcSHA256Async(arrayBuffer)];
                    case 2:
                        _a.identifier = _c.sent();
                        imageFile.context.name = name;
                        imageFile.context.blob = new Blob([arrayBuffer], { type: blob.type });
                        imageFile.context.url = window.URL.createObjectURL(imageFile.context.blob);
                        _c.label = 3;
                    case 3:
                        _c.trys.push([3, 5, , 6]);
                        _b = imageFile.context;
                        return [4 /*yield*/, ImageFile.createThumbnailAsync(imageFile.context)];
                    case 4:
                        _b.thumbnail = _c.sent();
                        return [3 /*break*/, 6];
                    case 5:
                        e_1 = _c.sent();
                        throw e_1;
                    case 6:
                        if (imageFile.context.name != null)
                            imageFile.context.name = imageFile.context.identifier;
                        return [2 /*return*/, imageFile];
                }
            });
        });
    };
    ImageFile.prototype.destroy = function () {
        this.revokeURLs();
    };
    ImageFile.prototype.apply = function (context) {
        if (!this.context.identifier && context.identifier)
            this.context.identifier = context.identifier;
        if (!this.context.name && context.name)
            this.context.name = context.name;
        if (!this.context.blob && context.blob)
            this.context.blob = context.blob;
        if (!this.context.type && context.type)
            this.context.type = context.type;
        if (!this.context.url && context.url) {
            if (this.state !== ImageState.URL)
                window.URL.revokeObjectURL(this.context.url);
            this.context.url = context.url;
        }
        if (!this.context.thumbnail.blob && context.thumbnail.blob)
            this.context.thumbnail.blob = context.thumbnail.blob;
        if (!this.context.thumbnail.type && context.thumbnail.type)
            this.context.thumbnail.type = context.thumbnail.type;
        if (!this.context.thumbnail.url && context.thumbnail.url) {
            if (this.state !== ImageState.URL)
                window.URL.revokeObjectURL(this.context.thumbnail.url);
            this.context.thumbnail.url = context.thumbnail.url;
        }
        this.createURLs();
    };
    ImageFile.prototype.toContext = function () {
        return {
            identifier: this.context.identifier,
            name: this.context.name,
            blob: this.context.blob,
            type: this.context.type,
            url: this.context.url,
            thumbnail: {
                blob: this.context.thumbnail.blob,
                type: this.context.thumbnail.type,
                url: this.context.thumbnail.url,
            }
        };
    };
    ImageFile.prototype.createURLs = function () {
        if (this.state === ImageState.URL)
            return;
        if (this.context.blob && this.context.url === '')
            this.context.url = window.URL.createObjectURL(this.context.blob);
        if (this.context.thumbnail.blob && this.context.thumbnail.url === '')
            this.context.thumbnail.url = window.URL.createObjectURL(this.context.thumbnail.blob);
    };
    ImageFile.prototype.revokeURLs = function () {
        if (this.state === ImageState.URL)
            return;
        window.URL.revokeObjectURL(this.context.url);
        window.URL.revokeObjectURL(this.context.thumbnail.url);
    };
    ImageFile.createThumbnailAsync = function (context) {
        return new Promise(function (resolve, reject) {
            var canvas = document.createElement('canvas');
            var render = canvas.getContext('2d');
            var image = new Image();
            image.onload = function (event) {
                var scale = 128 / (image.width < image.height ? image.height : image.width);
                scale = scale < 1 ? scale : 1.0;
                var dstWidth = image.width * scale;
                var dstHeight = image.height * scale;
                canvas.width = image.width; //dstWidth;
                canvas.height = image.height; //dstHeight;
                render.drawImage(image, 0, 0);
                _canvas_util__WEBPACK_IMPORTED_MODULE_1__["CanvasUtil"].resize(canvas, dstWidth, dstHeight, true);
                canvas.toBlob(function (blob) {
                    var thumbnail = {
                        type: blob.type,
                        blob: blob,
                        url: window.URL.createObjectURL(blob),
                    };
                    resolve(thumbnail);
                }, context.blob.type);
            };
            image.onabort = image.onerror = function () {
                reject();
            };
            image.src = context.url;
        });
    };
    ImageFile.Empty = ImageFile.createEmpty('null');
    return ImageFile;
}());



/***/ }),

/***/ "GEdf":
/*!**********************************************************!*\
  !*** ./src/app/component/game-table/grid-line-render.ts ***!
  \**********************************************************/
/*! exports provided: GridLineRender */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GridLineRender", function() { return GridLineRender; });
/* harmony import */ var _udonarium_game_table__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @udonarium/game-table */ "RDF6");

var GridLineRender = /** @class */ (function () {
    function GridLineRender(canvasElement) {
        this.canvasElement = canvasElement;
    }
    GridLineRender.prototype.makeBrush = function (context, gridSize, gridColor) {
        // 座標描画用brush設定
        context.strokeStyle = gridColor;
        context.fillStyle = context.strokeStyle;
        context.lineWidth = 1;
        var fontSize = Math.floor(gridSize / 5);
        context.font = "bold " + fontSize + "px sans-serif";
        context.textBaseline = 'top';
        context.textAlign = 'center';
        return context;
    };
    GridLineRender.prototype.render = function (width, height, gridSize, gridType, gridColor) {
        if (gridSize === void 0) { gridSize = 50; }
        if (gridType === void 0) { gridType = _udonarium_game_table__WEBPACK_IMPORTED_MODULE_0__["GridType"].SQUARE; }
        if (gridColor === void 0) { gridColor = '#000000e6'; }
        this.canvasElement.width = width * gridSize;
        this.canvasElement.height = height * gridSize;
        var context = this.canvasElement.getContext('2d');
        if (gridType < 0)
            return;
        var calcGridPosition = this.generateCalcGridPositionFunc(gridType);
        this.makeBrush(context, gridSize, gridColor);
        for (var h = 0; h <= height; h++) {
            for (var w = 0; w <= width; w++) {
                var _a = calcGridPosition(w, h, gridSize), gx = _a.gx, gy = _a.gy;
                this.strokeSquare(context, gx, gy, gridSize);
                context.fillText((w + 1).toString() + '-' + (h + 1).toString(), gx + (gridSize / 2), gy + (gridSize / 2));
            }
        }
    };
    GridLineRender.prototype.generateCalcGridPositionFunc = function (gridType) {
        switch (gridType) {
            case _udonarium_game_table__WEBPACK_IMPORTED_MODULE_0__["GridType"].HEX_VERTICAL: // ヘクス縦揃え
                return function (w, h, gridSize) {
                    if ((w % 2) === 1) {
                        return { gx: w * gridSize, gy: h * gridSize };
                    }
                    else {
                        return { gx: w * gridSize, gy: h * gridSize + (gridSize / 2) };
                    }
                };
            case _udonarium_game_table__WEBPACK_IMPORTED_MODULE_0__["GridType"].HEX_HORIZONTAL: // ヘクス横揃え(どどんとふ互換)
                return function (w, h, gridSize) {
                    if ((h % 2) === 1) {
                        return { gx: w * gridSize, gy: h * gridSize };
                    }
                    else {
                        return { gx: w * gridSize + (gridSize / 2), gy: h * gridSize };
                    }
                };
            default: // スクエア(default)
                return function (w, h, gridSize) {
                    return { gx: w * gridSize, gy: h * gridSize };
                };
        }
    };
    GridLineRender.prototype.strokeSquare = function (context, gx, gy, gridSize) {
        context.beginPath();
        context.strokeRect(gx, gy, gridSize, gridSize);
    };
    GridLineRender.prototype.strokeHex = function (context, gx, gy, gridSize, gridType) {
        var deg = gridType === _udonarium_game_table__WEBPACK_IMPORTED_MODULE_0__["GridType"].HEX_HORIZONTAL ? -30 : 0;
        var radius = gridSize / Math.sqrt(3);
        var cx = gx + gridSize / 2;
        var cy = gy + gridSize / 2;
        context.beginPath();
        for (var i = 0; i < 6; i++) {
            deg += 60;
            var radian = Math.PI / 180 * deg;
            var x = Math.cos(radian) * radius + cx;
            var y = Math.sin(radian) * radius + cy;
            context.lineTo(x, y);
        }
        context.closePath();
        context.stroke();
    };
    return GridLineRender;
}());



/***/ }),

/***/ "GPP8":
/*!***************************************************!*\
  !*** ./src/app/service/pointer-device.service.ts ***!
  \***************************************************/
/*! exports provided: PointerDeviceService */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PointerDeviceService", function() { return PointerDeviceService; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "mrSG");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "fXoL");



var MOUSE_IDENTIFIER = -9999;
var PointerDeviceService = /** @class */ (function () {
    function PointerDeviceService(ngZone) {
        var _this = this;
        this.ngZone = ngZone;
        this.callbackOnPointerDown = function (e) { return _this.onPointerDown(e); };
        this.callbackOnPointerMove = function (e) { return _this.onPointerMove(e); };
        this.callbackOnPointerUp = function (e) { return _this.onPointerUp(e); };
        this.callbackOnContextMenu = function (e) { return _this.onContextMenu(e); };
        this._isAllowedToOpenContextMenu = false;
        this.pointers = [{ x: 0, y: 0, z: 0, identifier: -1 }];
        this.startPostion = this.pointers[0];
        this.primaryPointer = this.pointers[0];
        this.isDragging = false; // todo
    }
    Object.defineProperty(PointerDeviceService.prototype, "isAllowedToOpenContextMenu", {
        get: function () { return this._isAllowedToOpenContextMenu; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(PointerDeviceService.prototype, "pointer", {
        get: function () { return this.primaryPointer; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(PointerDeviceService.prototype, "pointerX", {
        get: function () { return this.primaryPointer.x; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(PointerDeviceService.prototype, "pointerY", {
        get: function () { return this.primaryPointer.y; },
        enumerable: false,
        configurable: true
    });
    PointerDeviceService.prototype.initialize = function () {
        this.addEventListeners();
    };
    PointerDeviceService.prototype.destroy = function () {
        this.removeEventListeners();
    };
    PointerDeviceService.prototype.onPointerDown = function (e) {
        this.onPointerMove(e);
        this._isAllowedToOpenContextMenu = true;
        this.startPostion = this.pointers[0];
    };
    PointerDeviceService.prototype.onPointerMove = function (e) {
        if (e.touches) {
            this.onTouchMove(e);
        }
        else {
            this.onMouseMove(e);
        }
        this.targetElement = e.target;
    };
    PointerDeviceService.prototype.onPointerUp = function (e) {
        this.onPointerMove(e);
    };
    PointerDeviceService.prototype.onMouseMove = function (e) {
        var mosuePointer = { x: e.pageX, y: e.pageY, z: 0, identifier: MOUSE_IDENTIFIER };
        if (this.isSyntheticEvent(mosuePointer))
            return;
        if (this._isAllowedToOpenContextMenu)
            this.preventContextMenuIfNeeded(mosuePointer);
        this.pointers = [mosuePointer];
        this.primaryPointer = mosuePointer;
    };
    PointerDeviceService.prototype.onTouchMove = function (e) {
        var length = e.touches.length;
        if (length < 1)
            return;
        this.pointers = [];
        for (var i = 0; i < length; i++) {
            var touch = e.touches[i];
            var touchPointer = { x: touch.pageX, y: touch.pageY, z: 0, identifier: touch.identifier };
            if (this._isAllowedToOpenContextMenu)
                this.preventContextMenuIfNeeded(touchPointer);
            this.pointers.push(touchPointer);
        }
        this.primaryPointer = this.pointers[0];
    };
    PointerDeviceService.prototype.onContextMenu = function (e) {
        this._isAllowedToOpenContextMenu = true;
        this.onPointerUp(e);
    };
    PointerDeviceService.prototype.preventContextMenuIfNeeded = function (pointer, threshold) {
        if (threshold === void 0) { threshold = 3; }
        var distance = Math.pow((pointer.x - this.startPostion.x), 2) + Math.pow((pointer.y - this.startPostion.y), 2);
        if (Math.pow(threshold, 2) < distance)
            this._isAllowedToOpenContextMenu = false;
    };
    PointerDeviceService.prototype.isSyntheticEvent = function (mosuePointer, threshold) {
        var e_1, _a;
        if (threshold === void 0) { threshold = 15; }
        try {
            for (var _b = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(this.pointers), _c = _b.next(); !_c.done; _c = _b.next()) {
                var pointer = _c.value;
                if (pointer.identifier === mosuePointer.identifier)
                    continue;
                var distance = Math.pow((mosuePointer.x - pointer.x), 2) + Math.pow((mosuePointer.y - pointer.y), 2);
                if (distance < Math.pow(threshold, 2))
                    return true;
            }
        }
        catch (e_1_1) { e_1 = { error: e_1_1 }; }
        finally {
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            }
            finally { if (e_1) throw e_1.error; }
        }
        return false;
    };
    PointerDeviceService.prototype.addEventListeners = function () {
        var _this = this;
        this.ngZone.runOutsideAngular(function () {
            document.body.addEventListener('mousedown', _this.callbackOnPointerDown, true);
            document.body.addEventListener('mousemove', _this.callbackOnPointerMove, true);
            document.body.addEventListener('mouseup', _this.callbackOnPointerUp, true);
            document.body.addEventListener('touchstart', _this.callbackOnPointerDown, true);
            document.body.addEventListener('touchmove', _this.callbackOnPointerMove, true);
            document.body.addEventListener('touchend', _this.callbackOnPointerUp, true);
            document.body.addEventListener('touchcancel', _this.callbackOnPointerUp, true);
            document.body.addEventListener('drop', _this.callbackOnPointerUp, true);
            document.body.addEventListener('contextmenu', _this.callbackOnContextMenu, true);
        });
    };
    PointerDeviceService.prototype.removeEventListeners = function () {
        document.body.removeEventListener('mousedown', this.callbackOnPointerDown, true);
        document.body.removeEventListener('mousemove', this.callbackOnPointerMove, true);
        document.body.removeEventListener('mouseup', this.callbackOnPointerUp, true);
        document.body.removeEventListener('touchstart', this.callbackOnPointerDown, true);
        document.body.removeEventListener('touchmove', this.callbackOnPointerMove, true);
        document.body.removeEventListener('touchend', this.callbackOnPointerUp, true);
        document.body.removeEventListener('touchcancel', this.callbackOnPointerUp, true);
        document.body.removeEventListener('drop', this.callbackOnPointerUp, true);
        document.body.removeEventListener('contextmenu', this.callbackOnContextMenu, true);
    };
    PointerDeviceService.ɵfac = function PointerDeviceService_Factory(t) { return new (t || PointerDeviceService)(_angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵinject"](_angular_core__WEBPACK_IMPORTED_MODULE_1__["NgZone"])); };
    PointerDeviceService.ɵprov = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdefineInjectable"]({ token: PointerDeviceService, factory: PointerDeviceService.ɵfac, providedIn: 'root' });
    return PointerDeviceService;
}());

/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵsetClassMetadata"](PointerDeviceService, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_1__["Injectable"],
        args: [{
                providedIn: 'root'
            }]
    }], function () { return [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_1__["NgZone"] }]; }, null); })();


/***/ }),

/***/ "Gipy":
/*!*********************************************************!*\
  !*** ./src/app/class/core/system/event/event-system.ts ***!
  \*********************************************************/
/*! exports provided: EventSystem */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "EventSystem", function() { return EventSystem; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "mrSG");
/* harmony import */ var _network_network__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../network/network */ "qBBt");
/* harmony import */ var _event__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./event */ "5MtU");
/* harmony import */ var _listener__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./listener */ "39Ym");




var EventSystem = /** @class */ (function () {
    function EventSystem() {
        this.listenerMap = new Map();
        console.log('EventSystem ready...');
    }
    Object.defineProperty(EventSystem, "instance", {
        get: function () {
            if (!EventSystem._instance) {
                EventSystem._instance = new EventSystem();
                EventSystem._instance.initializeNetworkEvent();
            }
            return EventSystem._instance;
        },
        enumerable: false,
        configurable: true
    });
    EventSystem.prototype.register = function (key) {
        var listener = new _listener__WEBPACK_IMPORTED_MODULE_3__["Listener"](this, key);
        return listener;
    };
    EventSystem.prototype.unregister = function () {
        var args = [];
        for (var _i = 0; _i < arguments.length; _i++) {
            args[_i] = arguments[_i];
        }
        if (args.length === 1) {
            this._unregister(args[0], null, null);
        }
        else if (args.length === 2) {
            if (typeof args[1] === 'string') {
                this._unregister(args[0], args[1], null);
            }
            else {
                this._unregister(args[0], null, args[1]);
            }
        }
        else {
            this._unregister(args[0], args[1], args[2]);
        }
    };
    EventSystem.prototype._unregister = function (key, eventName, callback) {
        var e_1, _a, e_2, _b;
        if (key === void 0) { key = this; }
        var listenersIterator = this.listenerMap.values();
        try {
            for (var listenersIterator_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(listenersIterator), listenersIterator_1_1 = listenersIterator_1.next(); !listenersIterator_1_1.done; listenersIterator_1_1 = listenersIterator_1.next()) {
                var listeners = listenersIterator_1_1.value;
                try {
                    for (var _c = (e_2 = void 0, Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(listeners.concat())), _d = _c.next(); !_d.done; _d = _c.next()) {
                        var listener = _d.value;
                        if (listener.isEqual(key, eventName, callback)) {
                            listener.unregister();
                        }
                    }
                }
                catch (e_2_1) { e_2 = { error: e_2_1 }; }
                finally {
                    try {
                        if (_d && !_d.done && (_b = _c.return)) _b.call(_c);
                    }
                    finally { if (e_2) throw e_2.error; }
                }
            }
        }
        catch (e_1_1) { e_1 = { error: e_1_1 }; }
        finally {
            try {
                if (listenersIterator_1_1 && !listenersIterator_1_1.done && (_a = listenersIterator_1.return)) _a.call(listenersIterator_1);
            }
            finally { if (e_1) throw e_1.error; }
        }
    };
    EventSystem.prototype.registerListener = function (listener) {
        var listeners = this.getListeners(listener.eventName);
        listeners.push(listener);
        listeners.sort(function (a, b) { return b.priority - a.priority; });
        this.listenerMap.set(listener.eventName, listeners);
        return listener;
    };
    EventSystem.prototype.unregisterListener = function (listener) {
        var listeners = this.getListeners(listener.eventName);
        var index = listeners.indexOf(listener);
        if (index < 0)
            return null;
        listeners.splice(index, 1);
        listener.unregister();
        if (listeners.length < 1)
            this.listenerMap.delete(listener.eventName);
        return listener;
    };
    EventSystem.prototype.call = function () {
        var args = [];
        for (var _i = 0; _i < arguments.length; _i++) {
            args[_i] = arguments[_i];
        }
        if (typeof args[0] === 'string') {
            this._call(new _event__WEBPACK_IMPORTED_MODULE_2__["Event"](args[0], args[1]), args[2]);
        }
        else {
            this._call(args[0], args[1]);
        }
    };
    EventSystem.prototype._call = function (event, sendTo) {
        var context = event.toContext();
        _network_network__WEBPACK_IMPORTED_MODULE_1__["Network"].instance.send(context, sendTo);
    };
    EventSystem.prototype.trigger = function () {
        var args = [];
        for (var _i = 0; _i < arguments.length; _i++) {
            args[_i] = arguments[_i];
        }
        if (args.length === 2) {
            this._trigger(new _event__WEBPACK_IMPORTED_MODULE_2__["Event"](args[0], args[1]));
        }
        else if (args[0] instanceof _event__WEBPACK_IMPORTED_MODULE_2__["Event"]) {
            return this._trigger(args[0]);
        }
        else {
            return this._trigger(new _event__WEBPACK_IMPORTED_MODULE_2__["Event"](args[0].eventName, args[0].data, args[0].sendFrom));
        }
    };
    EventSystem.prototype._trigger = function (event) {
        var e_3, _a;
        var listeners = this.getListeners(event.eventName).concat(this.getListeners('*'));
        try {
            for (var listeners_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(listeners), listeners_1_1 = listeners_1.next(); !listeners_1_1.done; listeners_1_1 = listeners_1.next()) {
                var listener = listeners_1_1.value;
                listener.trigger(event);
            }
        }
        catch (e_3_1) { e_3 = { error: e_3_1 }; }
        finally {
            try {
                if (listeners_1_1 && !listeners_1_1.done && (_a = listeners_1.return)) _a.call(listeners_1);
            }
            finally { if (e_3) throw e_3.error; }
        }
        return event;
    };
    EventSystem.prototype.getListeners = function (eventName) {
        return this.listenerMap.has(eventName) ? this.listenerMap.get(eventName) : [];
    };
    EventSystem.prototype.initializeNetworkEvent = function () {
        var _this = this;
        var callback = _network_network__WEBPACK_IMPORTED_MODULE_1__["Network"].instance.callback;
        callback.onOpen = function (peerId) {
            _this.trigger('OPEN_NETWORK', { peerId: peerId });
        };
        callback.onClose = function (peerId) {
            _this.trigger('CLOSE_NETWORK', { peerId: peerId });
        };
        callback.onConnect = function (peerId) {
            _this.sendSystemMessage('<' + peerId + '> connect <DataConnection>');
            _this.trigger('CONNECT_PEER', { peerId: peerId });
        };
        callback.onDisconnect = function (peerId) {
            _this.sendSystemMessage('<' + peerId + '> disconnect <DataConnection>');
            _this.trigger('DISCONNECT_PEER', { peerId: peerId });
        };
        callback.onData = function (peerId, data) {
            var e_4, _a;
            try {
                for (var data_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(data), data_1_1 = data_1.next(); !data_1_1.done; data_1_1 = data_1.next()) {
                    var event_1 = data_1_1.value;
                    _this.trigger(event_1);
                }
            }
            catch (e_4_1) { e_4 = { error: e_4_1 }; }
            finally {
                try {
                    if (data_1_1 && !data_1_1.done && (_a = data_1.return)) _a.call(data_1);
                }
                finally { if (e_4) throw e_4.error; }
            }
        };
        callback.onError = function (peerId, err) {
            _this.sendSystemMessage('<' + peerId + '> ' + err);
        };
    };
    EventSystem.prototype.sendSystemMessage = function (message) {
        console.log(message);
    };
    return EventSystem;
}());



/***/ }),

/***/ "GvTa":
/*!*****************************************!*\
  !*** ./src/app/class/table-selecter.ts ***!
  \*****************************************/
/*! exports provided: TableSelecter */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TableSelecter", function() { return TableSelecter; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "mrSG");
/* harmony import */ var _core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./core/synchronize-object/decorator */ "1lIu");
/* harmony import */ var _core_synchronize_object_game_object__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./core/synchronize-object/game-object */ "xdgh");
/* harmony import */ var _core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./core/synchronize-object/object-store */ "hm7o");
/* harmony import */ var _core_system__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./core/system */ "yNnI");
/* harmony import */ var _game_table__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./game-table */ "RDF6");






var TableSelecter = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"])(TableSelecter, _super);
    function TableSelecter() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.viewTableIdentifier = '';
        _this.gridShow = false; // true=常時グリッド表示
        _this.gridSnap = true;
        return _this;
    }
    // GameObject Lifecycle
    TableSelecter.prototype.onStoreAdded = function () {
        var _this = this;
        _super.prototype.onStoreAdded.call(this);
        _core_system__WEBPACK_IMPORTED_MODULE_4__["EventSystem"].register(this)
            .on('SELECT_GAME_TABLE', function (event) {
            console.log('SELECT_GAME_TABLE ' + _this.identifier);
            if (_this.viewTable)
                _this.viewTable.selected = false;
            _this.viewTableIdentifier = event.data.identifier;
            if (_this.viewTable)
                _this.viewTable.selected = true;
        });
    };
    // GameObject Lifecycle
    TableSelecter.prototype.onStoreRemoved = function () {
        _super.prototype.onStoreRemoved.call(this);
        _core_system__WEBPACK_IMPORTED_MODULE_4__["EventSystem"].unregister(this);
    };
    Object.defineProperty(TableSelecter.prototype, "viewTable", {
        get: function () {
            var table = _core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_3__["ObjectStore"].instance.get(this.viewTableIdentifier);
            if (!table) {
                table = _core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_3__["ObjectStore"].instance.getObjects(_game_table__WEBPACK_IMPORTED_MODULE_5__["GameTable"])[0];
                if (table && (this.viewTableIdentifier.length < 1 || _core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_3__["ObjectStore"].instance.isDeleted(this.viewTableIdentifier))) {
                    this.viewTableIdentifier = table.identifier;
                    _core_system__WEBPACK_IMPORTED_MODULE_4__["EventSystem"].trigger('SELECT_GAME_TABLE', { identifier: table.identifier });
                }
            }
            return table;
        },
        enumerable: false,
        configurable: true
    });
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_1__["SyncVar"])()
    ], TableSelecter.prototype, "viewTableIdentifier", void 0);
    TableSelecter = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_1__["SyncObject"])('TableSelecter')
    ], TableSelecter);
    return TableSelecter;
}(_core_synchronize_object_game_object__WEBPACK_IMPORTED_MODULE_2__["GameObject"]));



/***/ }),

/***/ "Hcv6":
/*!*********************************************************!*\
  !*** ./src/app/class/core/system/network/connection.ts ***!
  \*********************************************************/
/*! exports provided: ConnectionCallback */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ConnectionCallback", function() { return ConnectionCallback; });
var ConnectionCallback = /** @class */ (function () {
    function ConnectionCallback() {
    }
    return ConnectionCallback;
}());



/***/ }),

/***/ "Hvpu":
/*!******************************************!*\
  !*** ./src/app/service/image.service.ts ***!
  \******************************************/
/*! exports provided: ImageService */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ImageService", function() { return ImageService; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "fXoL");
/* harmony import */ var _udonarium_core_file_storage_image_file__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @udonarium/core/file-storage/image-file */ "FjwV");



var skeletonImage = _udonarium_core_file_storage_image_file__WEBPACK_IMPORTED_MODULE_1__["ImageFile"].create('./assets/images/skeleton.png');
var ImageService = /** @class */ (function () {
    function ImageService() {
    }
    ImageService.prototype.getSkeletonOr = function (image) {
        return image && !image.isEmpty ? image : skeletonImage;
    };
    ImageService.ɵfac = function ImageService_Factory(t) { return new (t || ImageService)(); };
    ImageService.ɵprov = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineInjectable"]({ token: ImageService, factory: ImageService.ɵfac, providedIn: 'root' });
    return ImageService;
}());

/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](ImageService, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Injectable"],
        args: [{
                providedIn: 'root'
            }]
    }], function () { return []; }, null); })();


/***/ }),

/***/ "Hvx2":
/*!**********************************!*\
  !*** ./src/app/class/IdoDice.ts ***!
  \**********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "mrSG");
/* harmony import */ var bcdice_lib_base__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! bcdice/lib/base */ "XO4f");
/* harmony import */ var bcdice_lib_base__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(bcdice_lib_base__WEBPACK_IMPORTED_MODULE_1__);
// original version from
// https://gist.github.com/h-mikisato/b5753689483b02b19585365b8ce5940f
// and
// https://github.com/blhsrwznrghfzpr/bcdice-js/blob/extend-samlpe/examples/ts/custom_dicebot.ts


var IdoDice = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"])(IdoDice, _super);
    function IdoDice(command, internal) {
        var _this = this;
        var found = command.replace(/^repeat/i, 'x').replace(/^rep/i, 'x').match(/^x([0-9]+)\s+(.*)$/i);
        var commandWithoutRepeat;
        var repeat;
        if (found !== null) {
            repeat = parseInt(found[1], 10);
            if (repeat <= 0) {
                repeat = 1;
            }
            commandWithoutRepeat = found[2];
        }
        else {
            repeat = 1;
            commandWithoutRepeat = command;
        }
        var changeText = '';
        // IDxコマンド
        var regExp = /^([S]?)ID(\d*)<=([\d\-\+\*\/\(\)CR]+)(.*)$/i;
        var matchResult = commandWithoutRepeat.match(regExp);
        if (matchResult) {
            var dicenum = matchResult[2] == '' ? '1' : matchResult[2]; // IDx x省略時は1
            var commandDiceNum = matchResult[2];
            if (parseInt(dicenum, 10) < 1) {
                dicenum = '1';
                commandDiceNum = '';
            }
            changeText = matchResult[1] + dicenum + 'b100<=' + matchResult[3]; // シークレットの場合はSをつけてxb100をロール
            if (repeat > 1) {
                _this = _super.call(this, "x" + repeat + " " + changeText, internal) || this;
            }
            else {
                _this = _super.call(this, changeText, internal) || this;
            }
            console.log('matchResult' + matchResult);
            _this.commandWithoutRepeat = commandWithoutRepeat;
            _this.repeat = repeat;
            _this.dicenum = parseInt(dicenum, 10);
            _this.option = matchResult[4].split(/\s/)[0]; // IDx<=n以降のオプション部分切り出し
            _this.optionCommand(_this.option);
            _this.dispCommandId = matchResult[1] + 'ID' + commandDiceNum + '<=';
            return;
        }
        // 1d100コマンド
        var regExpD100 = /^([S]?)1d100<=([\d\-\+\*\/\(\)CR]+)(.*)$/i;
        matchResult = commandWithoutRepeat.match(regExpD100);
        if (matchResult) {
            if (matchResult[3].split(/\s/)[0] == '') { // マッチ部分以降が空であるかスペース区切りのコメントかチェック
                console.log('matchResult' + matchResult);
                var dicenum = '1';
                changeText = matchResult[1] + '1d100<=' + matchResult[2];
                if (repeat > 1) {
                    _this = _super.call(this, "x" + repeat + " " + changeText, internal) || this;
                }
                else {
                    _this = _super.call(this, changeText, internal) || this;
                }
                console.log('matchResult' + matchResult);
                _this.commandWithoutRepeat = matchResult[1] + '1d100<=' + matchResult[2];
                _this.repeat = repeat;
                _this.dicenum = 1;
                _this.dispCommandId = '1d100<=';
                return;
            }
        }
        // RES(X-Y)コマンド
        var regExpRes = /^([S]?)RES\(([\d\-\+\*\/\(\)CR]+)\)(.*)$/i;
        matchResult = commandWithoutRepeat.match(regExpRes);
        if (matchResult) {
            if (matchResult[3].split(/\s/)[0] == '') { // マッチ部分以降が空であるかスペース区切りのコメントかチェック
                changeText = matchResult[1] + '1d100<=(' + matchResult[2] + ')*5+50';
                if (repeat > 1) {
                    _this = _super.call(this, "x" + repeat + " " + changeText, internal) || this;
                }
                else {
                    _this = _super.call(this, changeText, internal) || this;
                }
                console.log('matchResult' + matchResult);
                _this.commandWithoutRepeat = commandWithoutRepeat;
                _this.repeat = repeat;
                return;
            }
        }
        // CBR(X,Y)コマンド
        var regExpCbr = /^([S]?)CBR\((\d+),(\d+)\)(.*)$/i;
        matchResult = commandWithoutRepeat.match(regExpCbr);
        if (matchResult) {
            if (matchResult[4].split(/\s/)[0] == '') { // マッチ部分以降が空であるかスペース区切りのコメントかチェック
                var val1 = parseInt(matchResult[2], 10);
                var val2 = parseInt(matchResult[3], 10);
                var val = val1 < val2 ? val1 : val2;
                changeText = matchResult[1] + '1d100<=' + val;
                console.log('val1:' + val1 + ' val2:' + val2 + ' text:' + changeText);
                if (repeat > 1) {
                    _this = _super.call(this, "x" + repeat + " " + changeText, internal) || this;
                }
                else {
                    _this = _super.call(this, changeText, internal) || this;
                }
                console.log('matchResult' + matchResult);
                _this.commandWithoutRepeat = commandWithoutRepeat;
                _this.repeat = repeat;
                _this.dispCommandCbr = '1d100<=' + matchResult[2] + ',' + matchResult[3];
                return;
            }
        }
        // 専用コマンド不一致の場合通常ダイス
        changeText = commandWithoutRepeat;
        if (repeat > 1) {
            _this = _super.call(this, "x" + repeat + " " + changeText, internal) || this;
        }
        else {
            _this = _super.call(this, changeText, internal) || this;
        }
        _this.commandWithoutRepeat = commandWithoutRepeat;
        _this.repeat = repeat;
        _this.dispCommandId = '';
        return;
    }
    IdoDice.eval = function (command) {
        return new IdoDice(command).eval();
    };
    IdoDice.prototype.eval = function () {
        if (this.commandWithoutRepeat.match(/^S?ID/i)) {
            return this.chkOptionCommand(this.option) ? this.custom_dice_id() : null;
        }
        if (this.dispCommandId.match(/^1d100<=/i)) {
            return this.custom_dice_d100();
        }
        if (this.commandWithoutRepeat.match(/^S?RES/i)) {
            return this.custom_dice_res();
        }
        if (this.commandWithoutRepeat.match(/^S?CBR/i)) {
            return this.custom_dice_cbr();
        }
        return _super.prototype.eval.call(this);
    };
    // オプションコマンドの書式チェック
    IdoDice.prototype.chkOptionCommand = function (command) {
        var optionReplace = command.replace(/P/i, 'S4C10').replace(/S\d+/i, '').replace(/C\d+/i, '').replace(/F\d+|B/i, '');
        return optionReplace == '' ? true : false;
    };
    // オプションコマンドの解釈C,F,S倍率を変更
    IdoDice.prototype.optionCommand = function (command) {
        this.critical = 5;
        this.famble = 96;
        this.special = 5;
        var matchCritical = command.match(/C(\d+)/i);
        if (matchCritical) {
            this.critical = parseInt(matchCritical[1], 10);
        }
        var matchFamble = command.match(/F(\d+)/i);
        if (matchFamble) {
            this.famble = parseInt(matchFamble[1], 10);
        }
        var matchSpecial = command.match(/S(\d+)/i);
        if (matchSpecial) {
            this.special = parseInt(matchSpecial[1], 10);
        }
        var matchBoss = command.match(/B/i);
        if (matchBoss) {
            this.famble = 100;
        }
        var matchParfect = command.match(/P/i);
        if (matchParfect) {
            this.special = 4;
            this.critical = 10;
        }
        console.log('C:' + this.critical + ' F:' + this.famble + ' S:' + this.special);
        return;
    };
    // IDn<=xコマンド結果テキスト記述
    IdoDice.prototype.diceResultTextSingleId = function (diceValue) {
        var resultText = '(' + this.dispCommandId.toUpperCase() + this.target + ')';
        if (this.special != 5) {
            resultText += ' S' + this.special;
        }
        if (this.critical != 5) {
            resultText += ' C' + this.critical;
        }
        if (this.famble != 96) {
            resultText += ' F' + this.famble;
        }
        resultText += ' ＞ ';
        if (diceValue.length == 1) {
            resultText += diceValue[0] + ' ＞ ';
            if (diceValue[0] >= this.famble) {
                resultText += '致命的失敗';
            }
            else if (diceValue[0] > this.target) {
                resultText += '失敗';
            }
            else if (diceValue[0] <= this.critical && diceValue[0] <= (this.target / this.special)) {
                resultText += '決定的成功/スペシャル';
            }
            else if (diceValue[0] <= this.critical) {
                resultText += '決定的成功';
            }
            else if (diceValue[0] <= (this.target / this.special)) {
                resultText += 'スペシャル';
            }
            else {
                resultText += '成功';
            }
        }
        else {
            for (var i = 0; i < diceValue.length; i++) {
                if (i != 0) {
                    resultText += ',';
                }
                resultText += diceValue[i];
            }
            resultText += ' ＞ ';
            for (var i = 0; i < diceValue.length; i++) {
                if (i != 0) {
                    resultText += ',';
                }
                if (diceValue[i] >= 100) {
                    resultText += '100F';
                }
                else if (diceValue[i] >= this.famble) {
                    resultText += 'F';
                }
                else if (diceValue[i] > this.target) {
                    resultText += 'X';
                }
                else if (diceValue[i] <= 1) {
                    resultText += '1C';
                }
                else if (diceValue[i] <= this.critical) {
                    resultText += 'C';
                }
                else if (diceValue[i] <= (this.target / this.special)) {
                    resultText += 'S';
                }
                else {
                    resultText += 'N';
                }
            }
        }
        return resultText;
    };
    // IDn<=xコマンド結果処理
    IdoDice.prototype.custom_dice_id = function () {
        var result = _super.prototype.eval.call(this);
        if (result == null) {
            return null;
        }
        console.log('result:' + result.text);
        // BCDice結果から演算済みの目標値を取り出す
        var target = result.text.match(/b100<=(\d+)/i);
        if (!target) {
            return null;
        }
        this.target = parseInt(target[1], 10);
        // 書式が特殊なため自力書き出し
        var newResultText = '';
        for (var i = 0; i < this.repeat; i++) {
            var dice = [];
            // 1リピート分のダイスを取得
            for (var j = 0; j < this.dicenum; j++) {
                dice.push(result.detailedRands[this.dicenum * i + j].value);
            }
            // 結果のテキストを作成
            if (this.repeat > 1) {
                if (i > 0) {
                    newResultText += '\n\n';
                }
                newResultText += '#' + (i + 1) + '\n' + this.diceResultTextSingleId(dice);
            }
            else {
                newResultText += this.diceResultTextSingleId(dice);
            }
        }
        var text = newResultText;
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"])(Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"])({}, result), { text: text });
    };
    // 1d100<=xコマンド結果テキスト記述
    IdoDice.prototype.diceResultTextSingleD100 = function (diceValue) {
        var resultText = '(' + this.dispCommandId.toUpperCase() + this.target + ')';
        this.critical = 5;
        this.famble = 96;
        this.special = 5;
        resultText += ' ＞ ' + diceValue + ' ＞ ';
        if (diceValue >= this.famble) {
            resultText += '致命的失敗';
        }
        else if (diceValue > this.target) {
            resultText += '失敗';
        }
        else if (diceValue <= this.critical && diceValue <= (this.target / this.special)) {
            resultText += '決定的成功/スペシャル';
        }
        else if (diceValue <= this.critical) {
            resultText += '決定的成功';
        }
        else if (diceValue <= (this.target / this.special)) {
            resultText += 'スペシャル';
        }
        else {
            resultText += '成功';
        }
        return resultText;
    };
    // 1d100<=xコマンド結果処理
    IdoDice.prototype.custom_dice_d100 = function () {
        var result = _super.prototype.eval.call(this);
        if (result == null) {
            return null;
        }
        console.log('result:' + result.text);
        // BCDice結果から演算済みの目標値を取り出す
        var target = result.text.match(/1d100<=(\d+)/i);
        if (!target) {
            return null;
        }
        this.target = parseInt(target[1], 10);
        console.log('target:' + target);
        // 自力書き出し
        var newResultText = '';
        for (var i = 0; i < this.repeat; i++) {
            var dice = void 0;
            dice = result.detailedRands[i].value;
            // 結果のテキストを作成
            if (this.repeat > 1) {
                if (i > 0) {
                    newResultText += '\n\n';
                }
                newResultText += '#' + (i + 1) + '\n' + this.diceResultTextSingleD100(dice);
            }
            else {
                newResultText += this.diceResultTextSingleD100(dice);
            }
        }
        var text = newResultText;
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"])(Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"])({}, result), { text: text });
    };
    // RESコマンド結果テキスト記述
    IdoDice.prototype.diceResultTextSingleRes = function (diceValue, target) {
        var resultText = '(1D100<=' + target + ')' + ' ＞ ';
        if (target >= 100) {
            resultText += '自動成功';
        }
        else if (target <= 0) {
            resultText += '自動失敗';
        }
        else if (diceValue <= target) {
            resultText += diceValue + ' ＞ ';
            resultText += '成功';
        }
        else {
            resultText += diceValue + ' ＞ ';
            resultText += '失敗';
        }
        return resultText;
    };
    // RESコマンド結果処理
    IdoDice.prototype.custom_dice_res = function () {
        var result = _super.prototype.eval.call(this);
        if (result == null) {
            return null;
        }
        console.log('result:' + result.text);
        // BCDice結果から演算済みの目標値を取り出す
        var target = result.text.match(/1d100<=(\d+)/i);
        if (!target) {
            return null;
        }
        var targetNum = parseInt(target[1], 10);
        var newResultText = '';
        for (var i = 0; i < this.repeat; i++) {
            var value = result.detailedRands[i].value;
            console.log('dice value:' + value);
            if (this.repeat > 1) {
                if (i > 0) {
                    newResultText += '\n\n';
                }
                newResultText += '#' + (i + 1) + '\n' + this.diceResultTextSingleRes(value, targetNum);
            }
            else {
                newResultText += this.diceResultTextSingleRes(value, targetNum);
            }
        }
        var text = newResultText;
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"])(Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"])({}, result), { text: text });
    };
    // CBRコマンド結果テキスト記述
    IdoDice.prototype.diceResultTextSingleCbr = function (diceValue, target) {
        var resultText = '(' + this.dispCommandCbr + ')' + ' ＞ ';
        this.target = target;
        this.critical = 5;
        this.special = 5;
        this.famble = 96;
        resultText += diceValue + ' ＞ ';
        if (diceValue >= this.famble) {
            resultText += '致命的失敗';
        }
        else if (diceValue > this.target) {
            resultText += '失敗';
        }
        else if (diceValue <= this.critical && diceValue <= (this.target / this.special)) {
            resultText += '決定的成功/スペシャル';
        }
        else if (diceValue <= this.critical) {
            resultText += '決定的成功';
        }
        else if (diceValue <= (this.target / this.special)) {
            resultText += 'スペシャル';
        }
        else {
            resultText += '成功';
        }
        return resultText;
    };
    // RESコマンド結果処理
    IdoDice.prototype.custom_dice_cbr = function () {
        var result = _super.prototype.eval.call(this);
        if (result == null) {
            return null;
        }
        console.log('result:' + result.text);
        // BCDice結果から演算済みの目標値を取り出す
        var target = result.text.match(/1d100<=(\d+)/i);
        if (!target) {
            return null;
        }
        var targetNum = parseInt(target[1], 10);
        var newResultText = '';
        for (var i = 0; i < this.repeat; i++) {
            var value = result.detailedRands[i].value;
            console.log('dice value:' + value);
            if (this.repeat > 1) {
                if (i > 0) {
                    newResultText += '\n\n';
                }
                newResultText += '#' + (i + 1) + '\n' + this.diceResultTextSingleCbr(value, targetNum);
            }
            else {
                newResultText += this.diceResultTextSingleCbr(value, targetNum);
            }
        }
        var text = newResultText;
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"])(Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"])({}, result), { text: text });
    };
    IdoDice.ID = 'IdoDice';
    IdoDice.NAME = 'イドの証明';
    IdoDice.SORT_KEY = 'いとのしょうめい';
    IdoDice.COMMAND_PATTERN = /^S?([+\-(]*\d+|\d+B\d+|C[+\-(]*\d+|choice|D66|(repeat|rep|x)\d+|\d+R\d+|\d+U\d+|BCDiceVersion|ID\d*<=[+\-(]*\d+|RES\([\+\-\d\(\)\/\*CR]+\)|CBR\(\d+,\d+\))/i;
    // 下記は標準ダイスのコマンドパターンマッチするように書き加える
    /*
      /^S?([+\-(]*\d+|\d+B\d+|C[+\-(]*\d+|choice|D66|(repeat|rep|x)\d+|\d+R\d+|\d+U\d+|BCDiceVersion)/i
    */
    IdoDice.HELP_MESSAGE = "\n\u30FB\u5186\u67F1\u306E\u8EAB\u5185\u7528\u306B\u4F5C\u6210\u3057\u305F\u30AB\u30B9\u30BF\u30E0\u30C0\u30A4\u30B9\n1d100\u3068\u76EE\u6A19\u5024\u306B\u3088\u308B\u6210\u529F\u5EA6\u3092\u7B97\u51FA\u3057\u307E\u3059\u3002\n\n\u30FBCoC\u3068\u306F\u4F3C\u3066\u3044\u307E\u3059\u304C\u5224\u5B9A\u57FA\u6E96\u7D30\u90E8\u304C\u7570\u306A\u308A\u307E\u3059\u3002\n\n\u30FBF\u5024(\u6A19\u6E9696)\u4EE5\u4E0A\uFF1E\u30D5\u30A1\u30F3\u30D6\u30EB\n\u30FB\u76EE\u6A19\u5024\u3092\u8D85\u3048\u308B\uFF1E\u5931\u6557\n\u30FB\u76EE\u6A19\u5024\u3092\u4EE5\u4E0B\uFF1E\u6210\u529F\n\u30FB1/S\u5024(\u6A19\u6E961/5)\u4EE5\u4E0B\uFF1E\u30B9\u30DA\u30B7\u30E3\u30EB\n\u30FBC\u5024(\u6A19\u6E965)\u4EE5\u4E0B\uFF1E\u30AF\u30EA\u30C6\u30A3\u30AB\u30EB\n\n\u30FB\u5C02\u7528\u547D\u4EE4(ID<=x(\u30AA\u30D7\u30B7\u30E7\u30F3\u6587\u5B57\uFF1A\u7701\u7565\u53EF))\n  \u4F7F\u7528\u4F8B)\u6280\u80FD\u5024200\u3067\u5224\u5B9A\u3059\u308B\u5834\u5408\n  ID<=200 :1d100<=200\u3068\u540C\u3058\n  (ID<=200) \u2192 31 \u2192 \u30B9\u30DA\u30B7\u30E3\u30EB\n  \u25A0\u8FFD\u52A0\u6587\u5B57\u5B9A\u7FA9\n    Fn\uFF1AF\u5024n\u3067\u5224\u5B9A \u7121\u6307\u5B9A\u306Fn=96\u6271\u3044\n      ID<=200F90\n      (ID<=200F90) F90 \u2192 91 \u2192 \u81F4\u547D\u7684\u5931\u6557\n    Sn\uFF1AS\u5024\u30921/n\u306B\u5909\u66F4\u3059\u308B \u7121\u6307\u5B9An=5\u6271\u3044\n      ID<=200S3\n      (ID<=200S3) S3 \u2192 65 \u2192 \u30B9\u30DA\u30B7\u30E3\u30EB\n    Cn\uFF1AC\u5024\u3092n\u306B\u5909\u66F4\u3059\u308B \u7121\u6307\u5B9An=5\u6271\u3044\n      ID<=200C10\n      (ID<=200C10) C10 \u2192 10 \u2192 \u6C7A\u5B9A\u7684\u6210\u529F/\u30B9\u30DA\u30B7\u30E3\u30EB\n    P\uFF1A\u30D1\u30FC\u30D5\u30A7\u30AF\u30C8\u30AA\u30FC\u30C0\u30FC\u72B6\u614BS\u50241/4\u3001C10\u3067\u5224\u5B9A(S4C10\u3068\u540C\u3058)\n      ID<=200P\n      (ID<=200P) S4 C10 \u2192 41 \u2192 \u30B9\u30DA\u30B7 \u30E3\u30EB\n    B\uFF1A\u30DC\u30B9\u30D5\u30E9\u30B0F\u5024100\u3067\u5224\u5B9A(F100\u3068\u540C\u3058)\n    ID<=200B\n    (ID<=200B) F100 \u2192 99 \u2192 \u6210\u529F\n    \u8907\u6570\u7A2E\u540C\u6642\u5B9A\u7FA9\u53EF\u80FD\n      ID<=200BC20S3\u3000\u30DC\u30B9\u304CC\u502420S1/3\u3067\u5224\u5B9A\n      (ID<=200BC20S3) S3 C20 F100 \u2192 15 \u2192 \u6C7A\u5B9A\u7684\u6210\u529F/\u30B9\u30DA\u30B7\u30E3\u30EB\n\n\u30FB\u8907\u6570\u5224\u5B9A(IDy<=x(\u30AA\u30D7\u30B7\u30E7\u30F3\u6587\u5B57\uFF1A\u7701\u7565\u53EF)):\u30AA\u30D7\u30B7\u30E7\u30F3\u306F\u524D\u8FF0\u306E\u66F8\u5F0F\u3068\u540C\u69D8\n\n    y\u56DE\u306E\u5224\u5B9A\u7D50\u679C\u3092\n    C\uFF08\u30AF\u30EA\u30C6\u30A3\u30AB\u30EB\uFF09S\uFF08\u30B9\u30DA\u30B7\u30E3\u30EB\uFF091C\uFF081\u30AF\u30EA\uFF09F\uFF08\u30D5\u30A1\u30F3\u30D6\u30EB\uFF09\n    100F\uFF08100\u30D5\u30A1\u30F3\u30D6\u30EB\uFF09N\uFF08\u901A\u5E38\u6210\u529F\uFF09X\uFF08\u5931\u6557\uFF09\u3067\u8868\u793A\n\n    IDy<=x \u3067\u76EE\u6A19\u5024x\u3067y\u56DE\u5224\u5B9A\n      ID4<=85\u3000\u3000\u4FEE\u9A13\u5F8B\u52D54\u4EBA\u639B\u3051\u7B49\n      (ID4<=85) \u2192 73,60,12,64 \u2192 N,N,S,N\n\n    \u30AA\u30D7\u30B7\u30E7\u30F3\u6587\u5B57\u6307\u5B9A\u4F8B\n      ID3<=120PB \u30D1\u30D5\u30A7\u30AA\u30DC\u30B9\u4E71\u69CD\n      (ID3<=120PB) S4 C10 F100 \u2192 4,81,21 \u2192 C,N,S\n".trim();
    return IdoDice;
}(bcdice_lib_base__WEBPACK_IMPORTED_MODULE_1___default.a));
/* harmony default export */ __webpack_exports__["default"] = (IdoDice);


/***/ }),

/***/ "JKO1":
/*!**************************************************************************************!*\
  !*** ./src/app/component/game-data-element-buff/game-data-element-buff.component.ts ***!
  \**************************************************************************************/
/*! exports provided: GameDataElementBuffComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GameDataElementBuffComponent", function() { return GameDataElementBuffComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "fXoL");
/* harmony import */ var _udonarium_core_system__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @udonarium/core/system */ "yNnI");
/* harmony import */ var _udonarium_data_element__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @udonarium/data-element */ "gkrD");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/common */ "ofXK");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @angular/forms */ "3Pt+");






function GameDataElementBuffComponent_ng_container_0_ng_container_1_ng_container_1_ng_container_2_ng_container_6_Template(rf, ctx) { if (rf & 1) {
    var _r11 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "div", 14);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](3, "input", 15);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("ngModelChange", function GameDataElementBuffComponent_ng_container_0_ng_container_1_ng_container_1_ng_container_2_ng_container_6_Template_input_ngModelChange_3_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r11); var ctx_r10 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](5); return ctx_r10.name = $event; });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var ctx_r9 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](5);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate"](ctx_r9.name);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngModel", ctx_r9.name);
} }
function GameDataElementBuffComponent_ng_container_0_ng_container_1_ng_container_1_ng_container_2_Template(rf, ctx) { if (rf & 1) {
    var _r13 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "div", 5);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](2, "button", 6);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function GameDataElementBuffComponent_ng_container_0_ng_container_1_ng_container_1_ng_container_2_Template_button_click_2_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r13); var ctx_r12 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](4); return ctx_r12.deletBuff(ctx_r12.gameDataElement); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](3, "\u522A\u9664");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](4, "div", 7);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](5, "div", 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](6, GameDataElementBuffComponent_ng_container_0_ng_container_1_ng_container_1_ng_container_2_ng_container_6_Template, 4, 2, "ng-container", 0);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](7, "div", 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](8, "/");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](9, "div", 10);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](10, "input", 11);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("ngModelChange", function GameDataElementBuffComponent_ng_container_0_ng_container_1_ng_container_1_ng_container_2_Template_input_ngModelChange_10_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r13); var ctx_r14 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](4); return ctx_r14.currentValue = $event; });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](11, "div", 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](12, "/");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](13, "div", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](14, "input", 13);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("ngModelChange", function GameDataElementBuffComponent_ng_container_0_ng_container_1_ng_container_1_ng_container_2_Template_input_ngModelChange_14_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r13); var ctx_r15 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](4); return ctx_r15.value = $event; });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](15, "div", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](16, "R");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var ctx_r7 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](6);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", !ctx_r7.isTagLocked);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngModel", ctx_r7.currentValue);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngModel", ctx_r7.value);
} }
function GameDataElementBuffComponent_ng_container_0_ng_container_1_ng_container_1_ng_container_3_ng_container_3_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "div", 18);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var ctx_r16 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](5);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate"](ctx_r16.gameDataElement.name);
} }
function GameDataElementBuffComponent_ng_container_0_ng_container_1_ng_container_1_ng_container_3_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "div", 16);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](2, "div", 17);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](3, GameDataElementBuffComponent_ng_container_0_ng_container_1_ng_container_1_ng_container_3_ng_container_3_Template, 3, 1, "ng-container", 0);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var ctx_r8 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", !ctx_r8.isTagLocked);
} }
function GameDataElementBuffComponent_ng_container_0_ng_container_1_ng_container_1_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerStart"](1, 2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](2, GameDataElementBuffComponent_ng_container_0_ng_container_1_ng_container_1_ng_container_2_Template, 17, 3, "ng-container", 3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](3, GameDataElementBuffComponent_ng_container_0_ng_container_1_ng_container_1_ng_container_3_Template, 4, 1, "ng-container", 4);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var ctx_r5 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngSwitch", ctx_r5.gameDataElement.type);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngSwitchCase", "numberResource");
} }
function GameDataElementBuffComponent_ng_container_0_ng_container_1_ng_container_2_ng_container_3_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "div", 18);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var ctx_r17 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate"](ctx_r17.gameDataElement.name);
} }
function GameDataElementBuffComponent_ng_container_0_ng_container_1_ng_container_2_div_4_div_1_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](0, "div", 22);
} if (rf & 2) {
    var childElement_r20 = ctx.$implicit;
    var ctx_r19 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](5);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("gameDataElement", childElement_r20)("isEdit", ctx_r19.isEdit)("isTagLocked", ctx_r19.isTagLocked);
} }
function GameDataElementBuffComponent_ng_container_0_ng_container_1_ng_container_2_div_4_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 20);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](1, GameDataElementBuffComponent_ng_container_0_ng_container_1_ng_container_2_div_4_div_1_Template, 1, 3, "div", 21);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    var ctx_r18 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngForOf", ctx_r18.gameDataElement.children);
} }
function GameDataElementBuffComponent_ng_container_0_ng_container_1_ng_container_2_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "div", 16);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](2, "div", 17);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](3, GameDataElementBuffComponent_ng_container_0_ng_container_1_ng_container_2_ng_container_3_Template, 3, 1, "ng-container", 0);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](4, GameDataElementBuffComponent_ng_container_0_ng_container_1_ng_container_2_div_4_Template, 2, 1, "div", 19);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var ctx_r6 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", !ctx_r6.isTagLocked);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", 0 < ctx_r6.gameDataElement.children.length);
} }
function GameDataElementBuffComponent_ng_container_0_ng_container_1_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](1, GameDataElementBuffComponent_ng_container_0_ng_container_1_ng_container_1_Template, 4, 2, "ng-container", 0);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](2, GameDataElementBuffComponent_ng_container_0_ng_container_1_ng_container_2_Template, 5, 2, "ng-container", 0);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var ctx_r4 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r4.gameDataElement.children.length < 1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", 0 < ctx_r4.gameDataElement.children.length);
} }
function GameDataElementBuffComponent_ng_container_0_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](1, GameDataElementBuffComponent_ng_container_0_ng_container_1_Template, 3, 2, "ng-container", 0);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r0.gameDataElement);
} }
function GameDataElementBuffComponent_ng_container_1_ng_container_1_ng_container_2_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "span", 23);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var ctx_r23 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate3"](" ", ctx_r23.gameDataElement.name, " / ", ctx_r23.gameDataElement.currentValue, " / ", ctx_r23.gameDataElement.value, "R ");
} }
function GameDataElementBuffComponent_ng_container_1_ng_container_1_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerStart"](1, 2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](2, GameDataElementBuffComponent_ng_container_1_ng_container_1_ng_container_2_Template, 3, 3, "ng-container", 3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var ctx_r21 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngSwitch", ctx_r21.gameDataElement.type);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngSwitchCase", "numberResource");
} }
function GameDataElementBuffComponent_ng_container_1_ng_container_2_div_1_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](0, "div", 25);
} if (rf & 2) {
    var childElement_r25 = ctx.$implicit;
    var ctx_r24 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("gameDataElement", childElement_r25)("isEdit", ctx_r24.isEdit)("isTagLocked", ctx_r24.isTagLocked)("isPieceMode", ctx_r24.isPieceMode);
} }
function GameDataElementBuffComponent_ng_container_1_ng_container_2_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](1, GameDataElementBuffComponent_ng_container_1_ng_container_2_div_1_Template, 1, 4, "div", 24);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var ctx_r22 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngForOf", ctx_r22.gameDataElement.children);
} }
function GameDataElementBuffComponent_ng_container_1_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](1, GameDataElementBuffComponent_ng_container_1_ng_container_1_Template, 3, 2, "ng-container", 0);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](2, GameDataElementBuffComponent_ng_container_1_ng_container_2_Template, 2, 1, "ng-container", 0);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r1.gameDataElement.children.length < 1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", 0 < ctx_r1.gameDataElement.children.length);
} }
function GameDataElementBuffComponent_ng_template_2_Template(rf, ctx) { if (rf & 1) {
    var _r27 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "button", 26);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function GameDataElementBuffComponent_ng_template_2_Template_button_click_0_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r27); var ctx_r26 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](); return ctx_r26.addElement(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "i", 27);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](2, "add_circle");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](3, "button", 26);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function GameDataElementBuffComponent_ng_template_2_Template_button_click_3_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r27); var ctx_r28 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](); return ctx_r28.upElement(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](4, "i", 27);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](5, "arrow_upward");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](6, "br");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](7, "button", 26);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function GameDataElementBuffComponent_ng_template_2_Template_button_click_7_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r27); var ctx_r29 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](); return ctx_r29.deleteElement(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](8, "i", 27);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](9, "remove_circle_outline");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](10, "button", 26);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function GameDataElementBuffComponent_ng_template_2_Template_button_click_10_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r27); var ctx_r30 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](); return ctx_r30.downElement(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](11, "i", 27);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](12, "arrow_downward");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} }
var GameDataElementBuffComponent = /** @class */ (function () {
    function GameDataElementBuffComponent(changeDetector) {
        this.changeDetector = changeDetector;
        this.gameDataElement = null;
        this.isEdit = false;
        this.isTagLocked = false;
        this.isValueLocked = false;
        this.isPieceMode = false;
        this._name = '';
        this._value = 0;
        this._currentValue = 0;
        this.updateTimer = null;
    }
    Object.defineProperty(GameDataElementBuffComponent.prototype, "name", {
        get: function () { return this._name; },
        set: function (name) { this._name = name; this.setUpdateTimer(); },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(GameDataElementBuffComponent.prototype, "value", {
        get: function () { return this._value; },
        set: function (value) { this._value = value; this.setUpdateTimer(); },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(GameDataElementBuffComponent.prototype, "currentValue", {
        get: function () { return this._currentValue; },
        set: function (currentValue) { this._currentValue = currentValue; this.setUpdateTimer(); },
        enumerable: false,
        configurable: true
    });
    GameDataElementBuffComponent.prototype.ngOnInit = function () {
        var _this = this;
        if (this.gameDataElement)
            this.setValues(this.gameDataElement);
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_1__["EventSystem"].register(this)
            .on('UPDATE_GAME_OBJECT', -1000, function (event) {
            if (_this.gameDataElement && event.data.identifier === _this.gameDataElement.identifier) {
                _this.setValues(_this.gameDataElement);
                _this.changeDetector.markForCheck();
            }
        })
            .on('DELETE_GAME_OBJECT', -1000, function (event) {
            if (_this.gameDataElement && _this.gameDataElement.identifier === event.data.identifier) {
                _this.changeDetector.markForCheck();
            }
        });
    };
    GameDataElementBuffComponent.prototype.ngOnDestroy = function () {
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_1__["EventSystem"].unregister(this);
    };
    GameDataElementBuffComponent.prototype.ngAfterViewInit = function () {
    };
    GameDataElementBuffComponent.prototype.addElement = function () {
        this.gameDataElement.appendChild(_udonarium_data_element__WEBPACK_IMPORTED_MODULE_2__["DataElement"].create('TEST', 8, { 'type': 'numberResource', 'currentValue': '001' }, 'TEST')); // + '_' + character.identifier
    };
    GameDataElementBuffComponent.prototype.deleteElement = function () {
        this.gameDataElement.destroy();
    };
    GameDataElementBuffComponent.prototype.upElement = function () {
        var parentElement = this.gameDataElement.parent;
        var index = parentElement.children.indexOf(this.gameDataElement);
        if (0 < index) {
            var prevElement = parentElement.children[index - 1];
            parentElement.insertBefore(this.gameDataElement, prevElement);
        }
    };
    GameDataElementBuffComponent.prototype.downElement = function () {
        var parentElement = this.gameDataElement.parent;
        var index = parentElement.children.indexOf(this.gameDataElement);
        if (index < parentElement.children.length - 1) {
            var nextElement = parentElement.children[index + 1];
            parentElement.insertBefore(nextElement, this.gameDataElement);
        }
    };
    GameDataElementBuffComponent.prototype.setElementType = function (type) {
        this.gameDataElement.setAttribute('type', type);
    };
    GameDataElementBuffComponent.prototype.setValues = function (object) {
        this._name = object.name;
        this._currentValue = object.currentValue;
        this._value = object.value;
    };
    GameDataElementBuffComponent.prototype.setUpdateTimer = function () {
        var _this = this;
        clearTimeout(this.updateTimer);
        this.updateTimer = setTimeout(function () {
            if (_this.gameDataElement.name !== _this.name)
                _this.gameDataElement.name = _this.name;
            if (_this.gameDataElement.currentValue !== _this.currentValue)
                _this.gameDataElement.currentValue = _this.currentValue;
            if (_this.gameDataElement.value !== _this.value)
                _this.gameDataElement.value = _this.value;
            _this.updateTimer = null;
        }, 66);
    };
    GameDataElementBuffComponent.prototype.deletBuff = function (data) {
        data.destroy();
    };
    GameDataElementBuffComponent.ɵfac = function GameDataElementBuffComponent_Factory(t) { return new (t || GameDataElementBuffComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["ChangeDetectorRef"])); };
    GameDataElementBuffComponent.ɵcmp = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineComponent"]({ type: GameDataElementBuffComponent, selectors: [["game-data-element-buff"], ["", "game-data-element-buff", ""]], inputs: { gameDataElement: "gameDataElement", isEdit: "isEdit", isTagLocked: "isTagLocked", isValueLocked: "isValueLocked", isPieceMode: "isPieceMode" }, decls: 4, vars: 2, consts: [[4, "ngIf"], ["editButtons", ""], [3, "ngSwitch"], [4, "ngSwitchCase"], [4, "ngSwitchDefault"], [1, "table-cell", 2, "border-bottom", "none"], [2, "width", "5em", 3, "click"], [1, "table", "table-cell", 2, "border-bottom", "none"], [1, "table-cell", 2, "width", "60%"], [1, "table-cell", 2, "width", "0px"], [1, "table-cell", 2, "width", "30%"], ["size", "1", "type", "string", "placeholder", "Value", 2, "width", "100%", 3, "ngModel", "ngModelChange"], [1, "table-cell"], ["size", "1", "type", "number", "placeholder", "Value", 2, "width", "3em", 3, "ngModel", "ngModelChange"], [1, "hidden-spacer", 2, "font-family", "Cambria, Georgia", "font-size", "0.9rem"], ["size", "1", "placeholder", "Value", 2, "width", "100%", "min-width", "10px", "font-family", "Cambria, Georgia", "font-size", "0.9rem", 3, "ngModel", "ngModelChange"], [1, "table", 2, "width", "100%"], [1, "table-cell_inner-table-title"], [1, "inputLock"], ["class", "table", 4, "ngIf"], [1, "table"], ["game-data-element-buff", "", "class", "table-row", 3, "gameDataElement", "isEdit", "isTagLocked", 4, "ngFor", "ngForOf"], ["game-data-element-buff", "", 1, "table-row", 3, "gameDataElement", "isEdit", "isTagLocked"], [2, "font-family", "Cambria, Georgia", "font-size", "0.4rem"], ["game-data-element-buff", "", "class", "table-row", 3, "gameDataElement", "isEdit", "isTagLocked", "isPieceMode", 4, "ngFor", "ngForOf"], ["game-data-element-buff", "", 1, "table-row", 3, "gameDataElement", "isEdit", "isTagLocked", "isPieceMode"], [3, "click"], [1, "material-icons"]], template: function GameDataElementBuffComponent_Template(rf, ctx) { if (rf & 1) {
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](0, GameDataElementBuffComponent_ng_container_0_Template, 2, 1, "ng-container", 0);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](1, GameDataElementBuffComponent_ng_container_1_Template, 3, 2, "ng-container", 0);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](2, GameDataElementBuffComponent_ng_template_2_Template, 13, 0, "ng-template", null, 1, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplateRefExtractor"]);
        } if (rf & 2) {
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", !ctx.isPieceMode);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx.isPieceMode);
        } }, directives: [_angular_common__WEBPACK_IMPORTED_MODULE_3__["NgIf"], _angular_common__WEBPACK_IMPORTED_MODULE_3__["NgSwitch"], _angular_common__WEBPACK_IMPORTED_MODULE_3__["NgSwitchCase"], _angular_common__WEBPACK_IMPORTED_MODULE_3__["NgSwitchDefault"], _angular_forms__WEBPACK_IMPORTED_MODULE_4__["DefaultValueAccessor"], _angular_forms__WEBPACK_IMPORTED_MODULE_4__["NgControlStatus"], _angular_forms__WEBPACK_IMPORTED_MODULE_4__["NgModel"], _angular_forms__WEBPACK_IMPORTED_MODULE_4__["NumberValueAccessor"], _angular_common__WEBPACK_IMPORTED_MODULE_3__["NgForOf"], GameDataElementBuffComponent], styles: [".game-data-element[_ngcontent-%COMP%]{\r\n  margin-left: 10px;\r\n}\r\n.table[_ngcontent-%COMP%] {\r\n  display:table; \r\n  \r\n  \r\n  width :100%;\r\n  box-sizing: border-box;\r\n\r\n}\r\n.table-row[_ngcontent-%COMP%] {\r\n  padding-top: 10px;\r\n  display:table-row;\r\n  \r\n  \r\n  \r\n  box-sizing: border-box;\r\n  }\r\n.table-cell-2[_ngcontent-%COMP%] {\r\n  display:table-cell;\r\n  vertical-align: middle;\r\n  padding: 0.0em 0.0em 0.0em 0.0em;\r\n  \r\n  \r\n  \r\n}\r\n.table-cell[_ngcontent-%COMP%] {\r\n  display:table-cell;\r\n  vertical-align: bottom;\r\n  padding: 0.5em 0.0em 0.1em 0.5em;\r\n  \r\n  border-bottom:1px dotted #888;\r\n  box-sizing: border-box;\r\n}\r\n.table-cell_solid[_ngcontent-%COMP%] {\r\n  width :10px;\r\n  white-space: nowrap;\r\n}\r\n.table-cell_inner-table[_ngcontent-%COMP%] {\r\n  display:table-cell;\r\n  vertical-align: bottom;\r\n  padding: 0.2em 0.0em 0.1em 0.5em;\r\n  border: none;\r\n  \r\n  box-sizing: border-box;\r\n}\r\n.table-cell_inner-table-title[_ngcontent-%COMP%] {\r\n  border-bottom: 1px solid #444;\r\n  border-left: 8px solid #444;\r\n  padding-left:8px;\r\n}\r\n.box[_ngcontent-%COMP%] {\r\n  display: inline-block;\r\n  margin: 10px;\r\n  \r\n}\r\n.hidden-spacer[_ngcontent-%COMP%] {\r\n  visibility: hidden;\r\n  height: 0;\r\n  \r\n  max-width : 20em;\r\n  overflow: hidden;\r\n  padding: 0 3px;\r\n  box-sizing: border-box;\r\n}\r\n\r\ninput[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{\r\n\r\n  background: none;\r\n  border: none;\r\n  border-radius: 2px;\r\n  outline: none;\r\n\r\n  color: #444;\r\n  font-family: Cambria, Georgia;\r\n  font-size: 1.0em;\r\n  padding: 2px;\r\n  box-sizing: border-box;\r\n}\r\n.inputLock[_ngcontent-%COMP%]{\r\n\r\n  background: none;\r\n  border: none;\r\n  border-radius: 2px;\r\n  outline: none;\r\n\r\n  color: #444;\r\n  font-family: Cambria, Georgia;\r\n  font-size: 1.0em;\r\n  padding: 2px;\r\n  box-sizing: border-box;\r\n  width:100%;\r\n  min-width:10px; \r\n  font-weight: bold;\r\n}\r\ninput[_ngcontent-%COMP%]:hover, textarea[_ngcontent-%COMP%]:hover, select[_ngcontent-%COMP%]:hover  {\r\n  background: #EEE;\r\n}\r\ninput[_ngcontent-%COMP%]:focus, textarea[_ngcontent-%COMP%]:focus, select[_ngcontent-%COMP%]:focus  {\r\n  background: #FFF;\r\n}\r\nbutton[_ngcontent-%COMP%]   i[_ngcontent-%COMP%] {\r\n  font-size: 1.0rem;\r\n}\r\nbutton[_ngcontent-%COMP%]:hover  {\r\n  background: #444;\r\n  color: #CCC;\r\n}\r\n.table-cell[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{\r\n  font-size: 0.5rem;\r\n}\r\ninput[type='range'][_ngcontent-%COMP%] {\r\n  --slider-track-color: transparent; \r\n  --slider-fill-color: #555; \r\n  --slider-border-color: #777;\r\n  --slider-height: 0.8em;\r\n  --slider-thumb-size: 1.0em;\r\n  --range: calc(var(--max) - var(--min));\r\n  --ratio: calc((var(--val) - var(--min))/var(--range));\r\n  --sx: calc(.5*var(--slider-thumb-size) + var(--ratio)*(100% - var(--slider-thumb-size)));\r\n  margin: 0;\r\n  padding: 0;\r\n  background: transparent;\r\n  font: 1em/1 arial, sans-serif;\r\n  outline: 0;\r\n  -webkit-appearance: none;\r\n     -moz-appearance: none;\r\n          appearance: none;\r\n}\r\ninput[type='range'][_ngcontent-%COMP%], input[type='range'][_ngcontent-%COMP%]::-webkit-slider-thumb {\r\n  -webkit-appearance: none;\r\n}\r\ninput[type='range'][_ngcontent-%COMP%]::-webkit-slider-runnable-track {\r\n  box-sizing: border-box;\r\n  border-top: solid 1px var(--slider-border-color);\r\n  border-bottom: solid 1px var(--slider-border-color);\r\n  border-radius: var(--slider-height);\r\n  height: var(--slider-height);\r\n  background: var(--slider-track-color);\r\n}\r\ninput[type='range'][_ngcontent-%COMP%]::-webkit-slider-runnable-track {\r\n  background: linear-gradient(var(--slider-fill-color), var(--slider-fill-color)) 0/var(--sx) 100% no-repeat var(--slider-track-color);\r\n  cursor: pointer;\r\n}\r\ninput[type='range'][_ngcontent-%COMP%]::-moz-range-track {\r\n  box-sizing: border-box;\r\n  border: solid 1px var(--slider-border-color);\r\n  border-radius: var(--slider-height);\r\n  height: var(--slider-height);\r\n  background: var(--slider-track-color);\r\n}\r\ninput[type='range'][_ngcontent-%COMP%]::-ms-track {\r\n  box-sizing: border-box;\r\n  border: solid 1px var(--slider-border-color);\r\n  border-radius: var(--slider-height);\r\n  height: var(--slider-height);\r\n  background: var(--slider-track-color);\r\n}\r\ninput[type='range'][_ngcontent-%COMP%]::-moz-range-progress {\r\n  height: var(--slider-height);\r\n  background: var(--slider-fill-color);\r\n  border-radius: var(--slider-height);\r\n}\r\ninput[type='range'][_ngcontent-%COMP%]::-ms-fill-lower {\r\n  height: var(--slider-height);\r\n  background: var(--slider-fill-color);\r\n  border-radius: var(--slider-height);\r\n}\r\ninput[type='range'][_ngcontent-%COMP%]::-webkit-slider-thumb {\r\n  margin-top: calc((var(--slider-height) - var(--slider-thumb-size)) / 2 - 1px);\r\n  width: var(--slider-thumb-size);\r\n  height: var(--slider-thumb-size);\r\n  box-sizing: border-box;\r\n  border: solid 1px  var(--slider-border-color);\r\n  border-radius: 2em;\r\n  background: #ddd;\r\n  cursor: pointer;\r\n}\r\ninput[type='range'][_ngcontent-%COMP%]::-moz-range-thumb {\r\n  width: var(--slider-thumb-size);\r\n  height: var(--slider-thumb-size);\r\n  box-sizing: border-box;\r\n  border: solid 1px  var(--slider-border-color);\r\n  border-radius: 2em;\r\n  background: #ddd;\r\n  cursor: pointer;\r\n}\r\ninput[type='range'][_ngcontent-%COMP%]::-ms-thumb {\r\n  margin-top: 0;\r\n  width: var(--slider-thumb-size);\r\n  height: var(--slider-thumb-size);\r\n  box-sizing: border-box;\r\n  border: solid 1px  var(--slider-border-color);\r\n  border-radius: 2em;\r\n  background: #ddd;\r\n  cursor: pointer;\r\n}\r\ninput[type='range'][_ngcontent-%COMP%]::-ms-tooltip {\r\n  display: none;\r\n}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImdhbWUtZGF0YS1lbGVtZW50LWJ1ZmYuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLGlCQUFpQjtBQUNuQjtBQUNBO0VBQ0UsYUFBYTtFQUNiLHNCQUFzQjtFQUN0Qiw0QkFBNEI7RUFDNUIsV0FBVztFQUNYLHNCQUFzQjs7QUFFeEI7QUFDQTtFQUNFLGlCQUFpQjtFQUNqQixpQkFBaUI7RUFDakIsNEJBQTRCO0VBQzVCLGlDQUFpQztFQUNqQyxlQUFlO0VBQ2Ysc0JBQXNCO0VBQ3RCO0FBRUY7RUFDRSxrQkFBa0I7RUFDbEIsc0JBQXNCO0VBQ3RCLGdDQUFnQztFQUNoQyw0QkFBNEI7RUFDNUIsaUNBQWlDO0VBQ2pDLDBCQUEwQjtBQUM1QjtBQUdBO0VBQ0Usa0JBQWtCO0VBQ2xCLHNCQUFzQjtFQUN0QixnQ0FBZ0M7RUFDaEMsNEJBQTRCO0VBQzVCLDZCQUE2QjtFQUM3QixzQkFBc0I7QUFDeEI7QUFDQTtFQUNFLFdBQVc7RUFDWCxtQkFBbUI7QUFDckI7QUFDQTtFQUNFLGtCQUFrQjtFQUNsQixzQkFBc0I7RUFDdEIsZ0NBQWdDO0VBQ2hDLFlBQVk7RUFDWixnQ0FBZ0M7RUFDaEMsc0JBQXNCO0FBQ3hCO0FBQ0E7RUFDRSw2QkFBNkI7RUFDN0IsMkJBQTJCO0VBQzNCLGdCQUFnQjtBQUNsQjtBQUNBO0VBQ0UscUJBQXFCO0VBQ3JCLFlBQVk7RUFDWix5QkFBeUI7QUFDM0I7QUFDQTtFQUNFLGtCQUFrQjtFQUNsQixTQUFTO0VBQ1Qsb0JBQW9CO0VBQ3BCLGdCQUFnQjtFQUNoQixnQkFBZ0I7RUFDaEIsY0FBYztFQUNkLHNCQUFzQjtBQUN4QjtBQUVBLFNBQVM7QUFFVDtBQUNBLFdBQVc7RUFDVCxnQkFBZ0I7RUFDaEIsWUFBWTtFQUNaLGtCQUFrQjtFQUNsQixhQUFhOztFQUViLFdBQVc7RUFDWCw2QkFBNkI7RUFDN0IsZ0JBQWdCO0VBQ2hCLFlBQVk7RUFDWixzQkFBc0I7QUFDeEI7QUFFQTtBQUNBLFdBQVc7RUFDVCxnQkFBZ0I7RUFDaEIsWUFBWTtFQUNaLGtCQUFrQjtFQUNsQixhQUFhOztFQUViLFdBQVc7RUFDWCw2QkFBNkI7RUFDN0IsZ0JBQWdCO0VBQ2hCLFlBQVk7RUFDWixzQkFBc0I7RUFDdEIsVUFBVTtFQUNWLGNBQWM7RUFDZCxpQkFBaUI7QUFDbkI7QUFFQTtFQUNFLGdCQUFnQjtBQUNsQjtBQUNBO0VBQ0UsZ0JBQWdCO0FBQ2xCO0FBQ0E7RUFDRSxpQkFBaUI7QUFDbkI7QUFFQTtFQUNFLGdCQUFnQjtFQUNoQixXQUFXO0FBQ2I7QUFFQTtFQUNFLGlCQUFpQjtBQUNuQjtBQUVBO0VBQ0UsaUNBQWlDLEVBQUUsU0FBUztFQUM1Qyx5QkFBeUIsRUFBRSxRQUFRO0VBQ25DLDJCQUEyQjtFQUMzQixzQkFBc0I7RUFDdEIsMEJBQTBCO0VBQzFCLHNDQUFzQztFQUN0QyxxREFBcUQ7RUFDckQsd0ZBQXdGO0VBQ3hGLFNBQVM7RUFDVCxVQUFVO0VBQ1YsdUJBQXVCO0VBQ3ZCLDZCQUE2QjtFQUM3QixVQUFVO0VBQ1Ysd0JBQWdCO0tBQWhCLHFCQUFnQjtVQUFoQixnQkFBZ0I7QUFDbEI7QUFFQTtFQUNFLHdCQUF3QjtBQUMxQjtBQUVBO0VBQ0Usc0JBQXNCO0VBQ3RCLGdEQUFnRDtFQUNoRCxtREFBbUQ7RUFDbkQsbUNBQW1DO0VBQ25DLDRCQUE0QjtFQUM1QixxQ0FBcUM7QUFDdkM7QUFFQTtFQUNFLG9JQUFvSTtFQUNwSSxlQUFlO0FBQ2pCO0FBRUE7RUFDRSxzQkFBc0I7RUFDdEIsNENBQTRDO0VBQzVDLG1DQUFtQztFQUNuQyw0QkFBNEI7RUFDNUIscUNBQXFDO0FBQ3ZDO0FBRUE7RUFDRSxzQkFBc0I7RUFDdEIsNENBQTRDO0VBQzVDLG1DQUFtQztFQUNuQyw0QkFBNEI7RUFDNUIscUNBQXFDO0FBQ3ZDO0FBRUE7RUFDRSw0QkFBNEI7RUFDNUIsb0NBQW9DO0VBQ3BDLG1DQUFtQztBQUNyQztBQUVBO0VBQ0UsNEJBQTRCO0VBQzVCLG9DQUFvQztFQUNwQyxtQ0FBbUM7QUFDckM7QUFFQTtFQUNFLDZFQUE2RTtFQUM3RSwrQkFBK0I7RUFDL0IsZ0NBQWdDO0VBQ2hDLHNCQUFzQjtFQUN0Qiw2Q0FBNkM7RUFDN0Msa0JBQWtCO0VBQ2xCLGdCQUFnQjtFQUNoQixlQUFlO0FBQ2pCO0FBRUE7RUFDRSwrQkFBK0I7RUFDL0IsZ0NBQWdDO0VBQ2hDLHNCQUFzQjtFQUN0Qiw2Q0FBNkM7RUFDN0Msa0JBQWtCO0VBQ2xCLGdCQUFnQjtFQUNoQixlQUFlO0FBQ2pCO0FBRUE7RUFDRSxhQUFhO0VBQ2IsK0JBQStCO0VBQy9CLGdDQUFnQztFQUNoQyxzQkFBc0I7RUFDdEIsNkNBQTZDO0VBQzdDLGtCQUFrQjtFQUNsQixnQkFBZ0I7RUFDaEIsZUFBZTtBQUNqQjtBQUVBO0VBQ0UsYUFBYTtBQUNmIiwiZmlsZSI6ImdhbWUtZGF0YS1lbGVtZW50LWJ1ZmYuY29tcG9uZW50LmNzcyIsInNvdXJjZXNDb250ZW50IjpbIi5nYW1lLWRhdGEtZWxlbWVudHtcclxuICBtYXJnaW4tbGVmdDogMTBweDtcclxufVxyXG4udGFibGUge1xyXG4gIGRpc3BsYXk6dGFibGU7IFxyXG4gIC8qcGFkZGluZy1sZWZ0OiAxMHB4OyovXHJcbiAgLypib3JkZXI6MXB4IHNvbGlkICNGRjAwMDA7Ki9cclxuICB3aWR0aCA6MTAwJTtcclxuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xyXG5cclxufVxyXG4udGFibGUtcm93IHtcclxuICBwYWRkaW5nLXRvcDogMTBweDtcclxuICBkaXNwbGF5OnRhYmxlLXJvdztcclxuICAvKmJvcmRlcjo1cHggc29saWQgIzAwRkYwMDsqL1xyXG4gIC8qYm9yZGVyLWJvdHRvbToxcHggZG90dGVkICM4ODg7Ki9cclxuICAvKndpZHRoIDoxMDAlOyovXHJcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcclxuICB9XHJcblxyXG4udGFibGUtY2VsbC0yIHtcclxuICBkaXNwbGF5OnRhYmxlLWNlbGw7XHJcbiAgdmVydGljYWwtYWxpZ246IG1pZGRsZTtcclxuICBwYWRkaW5nOiAwLjBlbSAwLjBlbSAwLjBlbSAwLjBlbTtcclxuICAvKmJvcmRlcjoxcHggc29saWQgIzAwMDBGRjsqL1xyXG4gIC8qYm9yZGVyLWJvdHRvbToxcHggZG90dGVkICM4ODg7Ki9cclxuICAvKmJveC1zaXppbmc6IGJvcmRlci1ib3g7Ki9cclxufVxyXG5cclxuXHJcbi50YWJsZS1jZWxsIHtcclxuICBkaXNwbGF5OnRhYmxlLWNlbGw7XHJcbiAgdmVydGljYWwtYWxpZ246IGJvdHRvbTtcclxuICBwYWRkaW5nOiAwLjVlbSAwLjBlbSAwLjFlbSAwLjVlbTtcclxuICAvKmJvcmRlcjoxcHggc29saWQgIzAwMDBGRjsqL1xyXG4gIGJvcmRlci1ib3R0b206MXB4IGRvdHRlZCAjODg4O1xyXG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XHJcbn1cclxuLnRhYmxlLWNlbGxfc29saWQge1xyXG4gIHdpZHRoIDoxMHB4O1xyXG4gIHdoaXRlLXNwYWNlOiBub3dyYXA7XHJcbn1cclxuLnRhYmxlLWNlbGxfaW5uZXItdGFibGUge1xyXG4gIGRpc3BsYXk6dGFibGUtY2VsbDtcclxuICB2ZXJ0aWNhbC1hbGlnbjogYm90dG9tO1xyXG4gIHBhZGRpbmc6IDAuMmVtIDAuMGVtIDAuMWVtIDAuNWVtO1xyXG4gIGJvcmRlcjogbm9uZTtcclxuICAvKmJvcmRlci1ib3R0b206MXB4IHNvbGlkICMwZmY7Ki9cclxuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xyXG59XHJcbi50YWJsZS1jZWxsX2lubmVyLXRhYmxlLXRpdGxlIHtcclxuICBib3JkZXItYm90dG9tOiAxcHggc29saWQgIzQ0NDtcclxuICBib3JkZXItbGVmdDogOHB4IHNvbGlkICM0NDQ7XHJcbiAgcGFkZGluZy1sZWZ0OjhweDtcclxufVxyXG4uYm94IHtcclxuICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XHJcbiAgbWFyZ2luOiAxMHB4O1xyXG4gIC8qYm9yZGVyOjFweCBzb2xpZCAjRkZGOyovXHJcbn1cclxuLmhpZGRlbi1zcGFjZXIge1xyXG4gIHZpc2liaWxpdHk6IGhpZGRlbjtcclxuICBoZWlnaHQ6IDA7XHJcbiAgLypiYWNrZ3JvdW5kOiAjMEZGOyovXHJcbiAgbWF4LXdpZHRoIDogMjBlbTtcclxuICBvdmVyZmxvdzogaGlkZGVuO1xyXG4gIHBhZGRpbmc6IDAgM3B4O1xyXG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XHJcbn1cclxuXHJcbi8qYnV0dG9uKi9cclxuXHJcbmlucHV0LCB0ZXh0YXJlYSwgc2VsZWN0e1xyXG4vKi5pbnB1dCB7Ki9cclxuICBiYWNrZ3JvdW5kOiBub25lO1xyXG4gIGJvcmRlcjogbm9uZTtcclxuICBib3JkZXItcmFkaXVzOiAycHg7XHJcbiAgb3V0bGluZTogbm9uZTtcclxuXHJcbiAgY29sb3I6ICM0NDQ7XHJcbiAgZm9udC1mYW1pbHk6IENhbWJyaWEsIEdlb3JnaWE7XHJcbiAgZm9udC1zaXplOiAxLjBlbTtcclxuICBwYWRkaW5nOiAycHg7XHJcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcclxufVxyXG5cclxuLmlucHV0TG9ja3tcclxuLyouaW5wdXQgeyovXHJcbiAgYmFja2dyb3VuZDogbm9uZTtcclxuICBib3JkZXI6IG5vbmU7XHJcbiAgYm9yZGVyLXJhZGl1czogMnB4O1xyXG4gIG91dGxpbmU6IG5vbmU7XHJcblxyXG4gIGNvbG9yOiAjNDQ0O1xyXG4gIGZvbnQtZmFtaWx5OiBDYW1icmlhLCBHZW9yZ2lhO1xyXG4gIGZvbnQtc2l6ZTogMS4wZW07XHJcbiAgcGFkZGluZzogMnB4O1xyXG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XHJcbiAgd2lkdGg6MTAwJTtcclxuICBtaW4td2lkdGg6MTBweDsgXHJcbiAgZm9udC13ZWlnaHQ6IGJvbGQ7XHJcbn1cclxuXHJcbmlucHV0OmhvdmVyLCB0ZXh0YXJlYTpob3Zlciwgc2VsZWN0OmhvdmVyICB7XHJcbiAgYmFja2dyb3VuZDogI0VFRTtcclxufVxyXG5pbnB1dDpmb2N1cywgdGV4dGFyZWE6Zm9jdXMsIHNlbGVjdDpmb2N1cyAge1xyXG4gIGJhY2tncm91bmQ6ICNGRkY7XHJcbn1cclxuYnV0dG9uIGkge1xyXG4gIGZvbnQtc2l6ZTogMS4wcmVtO1xyXG59XHJcblxyXG5idXR0b246aG92ZXIgIHtcclxuICBiYWNrZ3JvdW5kOiAjNDQ0O1xyXG4gIGNvbG9yOiAjQ0NDO1xyXG59XHJcblxyXG4udGFibGUtY2VsbCBidXR0b257XHJcbiAgZm9udC1zaXplOiAwLjVyZW07XHJcbn1cclxuXHJcbmlucHV0W3R5cGU9J3JhbmdlJ10ge1xyXG4gIC0tc2xpZGVyLXRyYWNrLWNvbG9yOiB0cmFuc3BhcmVudDsgLyogI2NjYyAqL1xyXG4gIC0tc2xpZGVyLWZpbGwtY29sb3I6ICM1NTU7IC8qIzc3NyAqL1xyXG4gIC0tc2xpZGVyLWJvcmRlci1jb2xvcjogIzc3NztcclxuICAtLXNsaWRlci1oZWlnaHQ6IDAuOGVtO1xyXG4gIC0tc2xpZGVyLXRodW1iLXNpemU6IDEuMGVtO1xyXG4gIC0tcmFuZ2U6IGNhbGModmFyKC0tbWF4KSAtIHZhcigtLW1pbikpO1xyXG4gIC0tcmF0aW86IGNhbGMoKHZhcigtLXZhbCkgLSB2YXIoLS1taW4pKS92YXIoLS1yYW5nZSkpO1xyXG4gIC0tc3g6IGNhbGMoLjUqdmFyKC0tc2xpZGVyLXRodW1iLXNpemUpICsgdmFyKC0tcmF0aW8pKigxMDAlIC0gdmFyKC0tc2xpZGVyLXRodW1iLXNpemUpKSk7XHJcbiAgbWFyZ2luOiAwO1xyXG4gIHBhZGRpbmc6IDA7XHJcbiAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7XHJcbiAgZm9udDogMWVtLzEgYXJpYWwsIHNhbnMtc2VyaWY7XHJcbiAgb3V0bGluZTogMDtcclxuICBhcHBlYXJhbmNlOiBub25lO1xyXG59XHJcblxyXG5pbnB1dFt0eXBlPSdyYW5nZSddLCBpbnB1dFt0eXBlPSdyYW5nZSddOjotd2Via2l0LXNsaWRlci10aHVtYiB7XHJcbiAgLXdlYmtpdC1hcHBlYXJhbmNlOiBub25lO1xyXG59XHJcblxyXG5pbnB1dFt0eXBlPSdyYW5nZSddOjotd2Via2l0LXNsaWRlci1ydW5uYWJsZS10cmFjayB7XHJcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcclxuICBib3JkZXItdG9wOiBzb2xpZCAxcHggdmFyKC0tc2xpZGVyLWJvcmRlci1jb2xvcik7XHJcbiAgYm9yZGVyLWJvdHRvbTogc29saWQgMXB4IHZhcigtLXNsaWRlci1ib3JkZXItY29sb3IpO1xyXG4gIGJvcmRlci1yYWRpdXM6IHZhcigtLXNsaWRlci1oZWlnaHQpO1xyXG4gIGhlaWdodDogdmFyKC0tc2xpZGVyLWhlaWdodCk7XHJcbiAgYmFja2dyb3VuZDogdmFyKC0tc2xpZGVyLXRyYWNrLWNvbG9yKTtcclxufVxyXG5cclxuaW5wdXRbdHlwZT0ncmFuZ2UnXTo6LXdlYmtpdC1zbGlkZXItcnVubmFibGUtdHJhY2sge1xyXG4gIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCh2YXIoLS1zbGlkZXItZmlsbC1jb2xvciksIHZhcigtLXNsaWRlci1maWxsLWNvbG9yKSkgMC92YXIoLS1zeCkgMTAwJSBuby1yZXBlYXQgdmFyKC0tc2xpZGVyLXRyYWNrLWNvbG9yKTtcclxuICBjdXJzb3I6IHBvaW50ZXI7XHJcbn1cclxuXHJcbmlucHV0W3R5cGU9J3JhbmdlJ106Oi1tb3otcmFuZ2UtdHJhY2sge1xyXG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XHJcbiAgYm9yZGVyOiBzb2xpZCAxcHggdmFyKC0tc2xpZGVyLWJvcmRlci1jb2xvcik7XHJcbiAgYm9yZGVyLXJhZGl1czogdmFyKC0tc2xpZGVyLWhlaWdodCk7XHJcbiAgaGVpZ2h0OiB2YXIoLS1zbGlkZXItaGVpZ2h0KTtcclxuICBiYWNrZ3JvdW5kOiB2YXIoLS1zbGlkZXItdHJhY2stY29sb3IpO1xyXG59XHJcblxyXG5pbnB1dFt0eXBlPSdyYW5nZSddOjotbXMtdHJhY2sge1xyXG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XHJcbiAgYm9yZGVyOiBzb2xpZCAxcHggdmFyKC0tc2xpZGVyLWJvcmRlci1jb2xvcik7XHJcbiAgYm9yZGVyLXJhZGl1czogdmFyKC0tc2xpZGVyLWhlaWdodCk7XHJcbiAgaGVpZ2h0OiB2YXIoLS1zbGlkZXItaGVpZ2h0KTtcclxuICBiYWNrZ3JvdW5kOiB2YXIoLS1zbGlkZXItdHJhY2stY29sb3IpO1xyXG59XHJcblxyXG5pbnB1dFt0eXBlPSdyYW5nZSddOjotbW96LXJhbmdlLXByb2dyZXNzIHtcclxuICBoZWlnaHQ6IHZhcigtLXNsaWRlci1oZWlnaHQpO1xyXG4gIGJhY2tncm91bmQ6IHZhcigtLXNsaWRlci1maWxsLWNvbG9yKTtcclxuICBib3JkZXItcmFkaXVzOiB2YXIoLS1zbGlkZXItaGVpZ2h0KTtcclxufVxyXG5cclxuaW5wdXRbdHlwZT0ncmFuZ2UnXTo6LW1zLWZpbGwtbG93ZXIge1xyXG4gIGhlaWdodDogdmFyKC0tc2xpZGVyLWhlaWdodCk7XHJcbiAgYmFja2dyb3VuZDogdmFyKC0tc2xpZGVyLWZpbGwtY29sb3IpO1xyXG4gIGJvcmRlci1yYWRpdXM6IHZhcigtLXNsaWRlci1oZWlnaHQpO1xyXG59XHJcblxyXG5pbnB1dFt0eXBlPSdyYW5nZSddOjotd2Via2l0LXNsaWRlci10aHVtYiB7XHJcbiAgbWFyZ2luLXRvcDogY2FsYygodmFyKC0tc2xpZGVyLWhlaWdodCkgLSB2YXIoLS1zbGlkZXItdGh1bWItc2l6ZSkpIC8gMiAtIDFweCk7XHJcbiAgd2lkdGg6IHZhcigtLXNsaWRlci10aHVtYi1zaXplKTtcclxuICBoZWlnaHQ6IHZhcigtLXNsaWRlci10aHVtYi1zaXplKTtcclxuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xyXG4gIGJvcmRlcjogc29saWQgMXB4ICB2YXIoLS1zbGlkZXItYm9yZGVyLWNvbG9yKTtcclxuICBib3JkZXItcmFkaXVzOiAyZW07XHJcbiAgYmFja2dyb3VuZDogI2RkZDtcclxuICBjdXJzb3I6IHBvaW50ZXI7XHJcbn1cclxuXHJcbmlucHV0W3R5cGU9J3JhbmdlJ106Oi1tb3otcmFuZ2UtdGh1bWIge1xyXG4gIHdpZHRoOiB2YXIoLS1zbGlkZXItdGh1bWItc2l6ZSk7XHJcbiAgaGVpZ2h0OiB2YXIoLS1zbGlkZXItdGh1bWItc2l6ZSk7XHJcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcclxuICBib3JkZXI6IHNvbGlkIDFweCAgdmFyKC0tc2xpZGVyLWJvcmRlci1jb2xvcik7XHJcbiAgYm9yZGVyLXJhZGl1czogMmVtO1xyXG4gIGJhY2tncm91bmQ6ICNkZGQ7XHJcbiAgY3Vyc29yOiBwb2ludGVyO1xyXG59XHJcblxyXG5pbnB1dFt0eXBlPSdyYW5nZSddOjotbXMtdGh1bWIge1xyXG4gIG1hcmdpbi10b3A6IDA7XHJcbiAgd2lkdGg6IHZhcigtLXNsaWRlci10aHVtYi1zaXplKTtcclxuICBoZWlnaHQ6IHZhcigtLXNsaWRlci10aHVtYi1zaXplKTtcclxuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xyXG4gIGJvcmRlcjogc29saWQgMXB4ICB2YXIoLS1zbGlkZXItYm9yZGVyLWNvbG9yKTtcclxuICBib3JkZXItcmFkaXVzOiAyZW07XHJcbiAgYmFja2dyb3VuZDogI2RkZDtcclxuICBjdXJzb3I6IHBvaW50ZXI7XHJcbn1cclxuXHJcbmlucHV0W3R5cGU9J3JhbmdlJ106Oi1tcy10b29sdGlwIHtcclxuICBkaXNwbGF5OiBub25lO1xyXG59XHJcbiJdfQ== */"] });
    return GameDataElementBuffComponent;
}());

/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](GameDataElementBuffComponent, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"],
        args: [{
                selector: 'game-data-element-buff, [game-data-element-buff]',
                templateUrl: './game-data-element-buff.component.html',
                styleUrls: ['./game-data-element-buff.component.css'],
                //  changeDetection: ChangeDetectionStrategy.OnPush
                changeDetection: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ChangeDetectionStrategy"].Default
            }]
    }], function () { return [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ChangeDetectorRef"] }]; }, { gameDataElement: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], isEdit: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], isTagLocked: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], isValueLocked: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], isPieceMode: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }] }); })();


/***/ }),

/***/ "JKvL":
/*!****************************************************************************!*\
  !*** ./src/app/component/remote-controller/remote-controller.component.ts ***!
  \****************************************************************************/
/*! exports provided: RemoteControllerComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RemoteControllerComponent", function() { return RemoteControllerComponent; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "mrSG");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "fXoL");
/* harmony import */ var _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @udonarium/core/synchronize-object/object-store */ "hm7o");
/* harmony import */ var _udonarium_core_system__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @udonarium/core/system */ "yNnI");
/* harmony import */ var _udonarium_dice_bot__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @udonarium/dice-bot */ "JUIv");
/* harmony import */ var _udonarium_game_character__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @udonarium/game-character */ "M/aK");
/* harmony import */ var _udonarium_peer_cursor__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @udonarium/peer-cursor */ "+UEV");
/* harmony import */ var _udonarium_data_element__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @udonarium/data-element */ "gkrD");
/* harmony import */ var _udonarium_data_summary_setting__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @udonarium/data-summary-setting */ "zP96");
/* harmony import */ var _udonarium_tabletop_object__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @udonarium/tabletop-object */ "e8gA");
/* harmony import */ var component_game_character_buff_view_game_character_buff_view_component__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! component/game-character-buff-view/game-character-buff-view.component */ "Uxye");
/* harmony import */ var service_chat_message_service__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! service/chat-message.service */ "PEfN");
/* harmony import */ var service_panel_service__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! service/panel.service */ "M9xM");
/* harmony import */ var service_game_object_inventory_service__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! service/game-object-inventory.service */ "LjVp");
/* harmony import */ var service_context_menu_service__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! service/context-menu.service */ "9FhF");
/* harmony import */ var service_pointer_device_service__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! service/pointer-device.service */ "GPP8");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @angular/forms */ "3Pt+");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @angular/common */ "ofXK");
/* harmony import */ var component_controller_input_controller_input_component__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! component/controller-input/controller-input.component */ "ebOT");
/* harmony import */ var pipe_safe_pipe__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! pipe/safe.pipe */ "6HCy");






















var _c0 = ["controllerInput"];
var _c1 = ["chatPalette"];
function RemoteControllerComponent_label_6_Template(rf, ctx) { if (rf & 1) {
    var _r12 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "label");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](1, "input", 16);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("ngModelChange", function RemoteControllerComponent_label_6_Template_input_ngModelChange_1_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r12); var ctx_r11 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](); return ctx_r11.chatTabidentifier = $event; });
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](2, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
} if (rf & 2) {
    var chatTab_r10 = ctx.$implicit;
    var ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpropertyInterpolate"]("value", chatTab_r10.identifier);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngModel", ctx_r0.chatTabidentifier);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtextInterpolate"](chatTab_r10.name);
} }
function RemoteControllerComponent_ng_container_9_div_1_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
} if (rf & 2) {
    var ctx_r13 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtextInterpolate1"]("", ctx_r13.errorMessageBuff, " ");
} }
function RemoteControllerComponent_ng_container_9_div_2_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "div", 21);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](1, "i", 22);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](2, "info_outline");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](3, " BUFF\u7DE8\u8F2F\u4E2D");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
} }
var _c2 = function () { return { standalone: true }; };
function RemoteControllerComponent_ng_container_9_div_3_ng_container_4_Template(rf, ctx) { if (rf & 1) {
    var _r24 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](1, "textarea", 26, 27);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("ngModelChange", function RemoteControllerComponent_ng_container_9_div_3_ng_container_4_Template_textarea_ngModelChange_1_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r24); var ctx_r23 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](3); return ctx_r23.text = $event; })("input", function RemoteControllerComponent_ng_container_9_div_3_ng_container_4_Template_textarea_input_1_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r24); var ctx_r25 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](3); return ctx_r25.onInput(); })("keydown.enter", function RemoteControllerComponent_ng_container_9_div_3_ng_container_4_Template_textarea_keydown_enter_1_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r24); var ctx_r26 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](3); return ctx_r26.sendChat($event); });
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](3, "button", 28);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("click", function RemoteControllerComponent_ng_container_9_div_3_ng_container_4_Template_button_click_3_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r24); var ctx_r27 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](3); return ctx_r27.sendChat(null); });
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](4, "\u5BE6\u884C");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var ctx_r20 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngModel", ctx_r20.text)("ngModelOptions", _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpureFunction0"](2, _c2));
} }
function RemoteControllerComponent_ng_container_9_div_3_ng_container_5_option_1_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "option", 30);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
} if (rf & 2) {
    var palette_r29 = ctx.$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpropertyInterpolate"]("value", palette_r29);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtextInterpolate"](palette_r29);
} }
function RemoteControllerComponent_ng_container_9_div_3_ng_container_5_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](1, RemoteControllerComponent_ng_container_9_div_3_ng_container_5_option_1_Template, 2, 2, "option", 29);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var ctx_r21 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngForOf", ctx_r21.palette.getPalette());
} }
function RemoteControllerComponent_ng_container_9_div_3_Template(rf, ctx) { if (rf & 1) {
    var _r31 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "div", 23);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](1, "select", 24, 25);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("input", function RemoteControllerComponent_ng_container_9_div_3_Template_select_input_1_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r31); var ctx_r30 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](2); return ctx_r30.selectPalette($event.target.value); })("click", function RemoteControllerComponent_ng_container_9_div_3_Template_select_click_1_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r31); var ctx_r32 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](2); return ctx_r32.clickPalette($event.target.value); });
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](3, "form");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](4, RemoteControllerComponent_ng_container_9_div_3_ng_container_4_Template, 5, 3, "ng-container", 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](5, RemoteControllerComponent_ng_container_9_div_3_ng_container_5_Template, 2, 1, "ng-container", 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
} if (rf & 2) {
    var ctx_r15 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", !ctx_r15.buffHideIsChk);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", ctx_r15.palette);
} }
function RemoteControllerComponent_ng_container_9_div_4_Template(rf, ctx) { if (rf & 1) {
    var _r34 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "div", 23);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](1, "textarea", 31);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("ngModelChange", function RemoteControllerComponent_ng_container_9_div_4_Template_textarea_ngModelChange_1_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r34); var ctx_r33 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](2); return ctx_r33.editPalette = $event; });
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
} if (rf & 2) {
    var ctx_r16 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngModel", ctx_r16.editPalette);
} }
function RemoteControllerComponent_ng_container_9_span_7_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "span");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](1, "\u7DE8\u8F2FBUFF\u6B04");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
} }
function RemoteControllerComponent_ng_container_9_span_8_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "span");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](1, "\u78BA\u5B9ABUFF\u6B04");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
} }
function RemoteControllerComponent_ng_container_9_Template(rf, ctx) { if (rf & 1) {
    var _r36 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](1, RemoteControllerComponent_ng_container_9_div_1_Template, 2, 1, "div", 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](2, RemoteControllerComponent_ng_container_9_div_2_Template, 4, 0, "div", 17);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](3, RemoteControllerComponent_ng_container_9_div_3_Template, 6, 2, "div", 18);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](4, RemoteControllerComponent_ng_container_9_div_4_Template, 2, 1, "div", 18);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](5, "div", 3);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](6, "button", 19);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("click", function RemoteControllerComponent_ng_container_9_Template_button_click_6_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r36); var ctx_r35 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](); return ctx_r35.toggleEditMode(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](7, RemoteControllerComponent_ng_container_9_span_7_Template, 2, 0, "span", 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](8, RemoteControllerComponent_ng_container_9_span_8_Template, 2, 0, "span", 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelement"](9, "BR");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](10, "button", 20);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("click", function RemoteControllerComponent_ng_container_9_Template_button_click_10_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r36); var ctx_r37 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](); return ctx_r37.remotBuffRoundSelect(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](11, "span");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](12, "BUFF R\u6E1B\u5C11/\u9078\u64C7");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](13, "button", 20);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("click", function RemoteControllerComponent_ng_container_9_Template_button_click_13_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r36); var ctx_r38 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](); return ctx_r38.remotBuffRoundALL(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](14, "span");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](15, "BUFF R\u6E1B\u5C11/\u5168\u54E1");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](16, "button", 20);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("click", function RemoteControllerComponent_ng_container_9_Template_button_click_16_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r36); var ctx_r39 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](); return ctx_r39.remotBuffDeleteZeroRoundSelect(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](17, "span");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](18, "0R\u4EE5\u4E0B\u6D88\u53BB/\u9078\u64C7");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](19, "button", 20);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("click", function RemoteControllerComponent_ng_container_9_Template_button_click_19_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r36); var ctx_r40 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](); return ctx_r40.remotBuffDeleteZeroRoundALL(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](20, "span");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](21, "0R\u4EE5\u4E0B\u6D88\u53BB/\u5168\u54E1");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", ctx_r2.errorMessageBuff.length > 0);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", ctx_r2.isEdit);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", !ctx_r2.isEdit);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", ctx_r2.isEdit);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", !ctx_r2.isEdit);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", ctx_r2.isEdit);
} }
function RemoteControllerComponent_ng_container_16_div_13_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
} if (rf & 2) {
    var ctx_r41 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtextInterpolate1"]("", ctx_r41.errorMessageController, " ");
} }
function RemoteControllerComponent_ng_container_16_div_14_ng_container_2_ng_container_1_ng_container_1_div_2_Template(rf, ctx) { if (rf & 1) {
    var _r52 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](1, "label");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](2, "input", 40);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("click", function RemoteControllerComponent_ng_container_16_div_14_ng_container_2_ng_container_1_ng_container_1_div_2_Template_input_click_2_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r52); var dataElm_r46 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](2).$implicit; var ctx_r50 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](4); return ctx_r50.remotSelect(dataElm_r46.name, "currentValue", dataElm_r46.name + "\u73FE\u5728\u5024"); });
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](3, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](5, "label");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](6, "input", 40);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("click", function RemoteControllerComponent_ng_container_16_div_14_ng_container_2_ng_container_1_ng_container_1_div_2_Template_input_click_6_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r52); var dataElm_r46 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](2).$implicit; var ctx_r53 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](4); return ctx_r53.remotSelect(dataElm_r46.name, "value", dataElm_r46.name + "\u6700\u5927\u5024"); });
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](7, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](8);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
} if (rf & 2) {
    var dataElm_r46 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](2).$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpropertyInterpolate"]("value", dataElm_r46.name + "\u73FE\u5728\u5024");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtextInterpolate"](dataElm_r46.name + "\u73FE\u5728\u5024");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpropertyInterpolate"]("value", dataElm_r46.name + "\u6700\u5927\u5024");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtextInterpolate"](dataElm_r46.name + "\u6700\u5927\u5024");
} }
function RemoteControllerComponent_ng_container_16_div_14_ng_container_2_ng_container_1_ng_container_1_label_3_Template(rf, ctx) { if (rf & 1) {
    var _r58 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "label");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](1, "input", 40);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("click", function RemoteControllerComponent_ng_container_16_div_14_ng_container_2_ng_container_1_ng_container_1_label_3_Template_input_click_1_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r58); var dataElm_r46 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](2).$implicit; var ctx_r56 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](4); return ctx_r56.remotSelect(dataElm_r46.name, "value", dataElm_r46.name); });
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](2, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
} if (rf & 2) {
    var dataElm_r46 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](2).$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpropertyInterpolate"]("value", dataElm_r46.name);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtextInterpolate"](dataElm_r46.name);
} }
function RemoteControllerComponent_ng_container_16_div_14_ng_container_2_ng_container_1_ng_container_1_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerStart"](1, 37);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](2, RemoteControllerComponent_ng_container_16_div_14_ng_container_2_ng_container_1_ng_container_1_div_2_Template, 9, 4, "div", 38);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](3, RemoteControllerComponent_ng_container_16_div_14_ng_container_2_ng_container_1_ng_container_1_label_3_Template, 4, 2, "label", 39);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var dataElm_r46 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]().$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngSwitch", dataElm_r46.attributes["type"]);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngSwitchCase", "numberResource");
} }
function RemoteControllerComponent_ng_container_16_div_14_ng_container_2_ng_container_1_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](1, RemoteControllerComponent_ng_container_16_div_14_ng_container_2_ng_container_1_ng_container_1_Template, 4, 2, "ng-container", 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var dataElm_r46 = ctx.$implicit;
    var ctx_r45 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", dataElm_r46 && ctx_r45.dataTags.includes(dataElm_r46.name));
} }
function RemoteControllerComponent_ng_container_16_div_14_ng_container_2_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](1, RemoteControllerComponent_ng_container_16_div_14_ng_container_2_ng_container_1_Template, 2, 1, "ng-container", 5);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var data_r44 = ctx.$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngForOf", data_r44.children);
} }
function RemoteControllerComponent_ng_container_16_div_14_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](1, "div", 36);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](2, RemoteControllerComponent_ng_container_16_div_14_ng_container_2_Template, 2, 1, "ng-container", 5);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
} if (rf & 2) {
    var ctx_r42 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngForOf", ctx_r42.character.detailDataElement.children);
} }
function RemoteControllerComponent_ng_container_16_Template(rf, ctx) { if (rf & 1) {
    var _r62 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](1, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](2, " \u8B8A\u66F4\u91CF ");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](3, "input", 32);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("ngModelChange", function RemoteControllerComponent_ng_container_16_Template_input_ngModelChange_3_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r62); var ctx_r61 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](); return ctx_r61.remotNumber = $event; });
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](4, "button", 33);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("click", function RemoteControllerComponent_ng_container_16_Template_button_click_4_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r62); var ctx_r63 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](); return ctx_r63.reverseValue(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](5, "span");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](6, " \u00B1 ");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](7, "button", 28);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("click", function RemoteControllerComponent_ng_container_16_Template_button_click_7_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r62); var ctx_r64 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](); return ctx_r64.remotChangeValue(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](8, "span");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](9, "\u64CD\u4F5C");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](10, "div", 34);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](11, " \u6700\u5927\u5236\u9650 ");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](12, "input", 35);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("ngModelChange", function RemoteControllerComponent_ng_container_16_Template_input_ngModelChange_12_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r62); var ctx_r65 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](); return ctx_r65.recoveryLimitFlag = $event; })("change", function RemoteControllerComponent_ng_container_16_Template_input_change_12_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r62); var ctx_r66 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](); return ctx_r66.recoveryLimitFlagChange($event.target.checked); });
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](13, RemoteControllerComponent_ng_container_16_div_13_Template, 2, 1, "div", 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](14, RemoteControllerComponent_ng_container_16_div_14_Template, 3, 1, "div", 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var ctx_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngModel", ctx_r3.remotNumber);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](9);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngModel", ctx_r3.recoveryLimitFlag);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", ctx_r3.errorMessageController.length > 0);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", ctx_r3.character.rootDataElement);
} }
function RemoteControllerComponent_div_18_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
} if (rf & 2) {
    var ctx_r4 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtextInterpolate1"]("", ctx_r4.getTabTitle(ctx_r4.selectTab), "\u6E05\u55AE\u70BA\u7A7A");
} }
function RemoteControllerComponent_div_19_ng_container_1_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainer"](0);
} }
var _c3 = function () { return { "box": true, "selected": 0 }; };
var _c4 = function (a0) { return { gameObject: a0 }; };
function RemoteControllerComponent_div_19_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "div", 41);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](1, RemoteControllerComponent_div_19_ng_container_1_Template, 1, 0, "ng-container", 42);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
} if (rf & 2) {
    var gameObject_r67 = ctx.$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]();
    var _r6 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵreference"](21);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngClass", _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpureFunction0"](3, _c3));
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngTemplateOutlet", _r6)("ngTemplateOutletContext", _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpureFunction1"](4, _c4, gameObject_r67));
} }
function RemoteControllerComponent_ng_template_20_img_10_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelement"](0, "img", 53);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpipe"](1, "safe");
} if (rf & 2) {
    var gameObject_r69 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]().gameObject;
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("src", _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpipeBind2"](1, 1, gameObject_r69.imageFile.url, "resourceUrl"), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵsanitizeUrl"]);
} }
function RemoteControllerComponent_ng_template_20_div_13_ng_container_1_ng_container_1_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainer"](0);
} }
var _c5 = function (a0) { return { dataElm: a0 }; };
function RemoteControllerComponent_ng_template_20_div_13_ng_container_1_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](1, RemoteControllerComponent_ng_template_20_div_13_ng_container_1_ng_container_1_Template, 1, 0, "ng-container", 42);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var dataElm_r74 = ctx.$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](3);
    var _r8 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵreference"](23);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngTemplateOutlet", _r8)("ngTemplateOutletContext", _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpureFunction1"](2, _c5, dataElm_r74));
} }
function RemoteControllerComponent_ng_template_20_div_13_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](1, RemoteControllerComponent_ng_template_20_div_13_ng_container_1_Template, 2, 4, "ng-container", 54);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
} if (rf & 2) {
    var gameObject_r69 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]().gameObject;
    var ctx_r71 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngForOf", ctx_r71.getInventoryTags(gameObject_r69))("ngForTrackBy", ctx_r71.trackByGameObject);
} }
function RemoteControllerComponent_ng_template_20_Template(rf, ctx) { if (rf & 1) {
    var _r78 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "div", 43);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](1, "div", 44);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](2, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](3, "span", 45);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](5, "button", 46);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("click", function RemoteControllerComponent_ng_template_20_Template_button_click_5_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r78); var gameObject_r69 = ctx.gameObject; var ctx_r77 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](); return ctx_r77.buffEdit(gameObject_r69); });
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](6, "BUFF\u7DE8\u8F2F");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](7, "div", 47);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](8, "div", 48);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("click", function RemoteControllerComponent_ng_template_20_Template_div_click_8_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r78); var gameObject_r69 = ctx.gameObject; var ctx_r79 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](); return ctx_r79.targetBlockClick(gameObject_r69.identifier); });
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](9, "div", 49);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](10, RemoteControllerComponent_ng_template_20_img_10_Template, 2, 4, "img", 50);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](11, "input", 51);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("change", function RemoteControllerComponent_ng_template_20_Template_input_change_11_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r78); var gameObject_r69 = ctx.gameObject; var ctx_r80 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](); return ctx_r80.onChange(gameObject_r69.identifier); });
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](12, "div", 52);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](13, RemoteControllerComponent_ng_template_20_div_13_Template, 2, 2, "div", 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
} if (rf & 2) {
    var gameObject_r69 = ctx.gameObject;
    var ctx_r7 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtextInterpolate"](gameObject_r69.name);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](6);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", gameObject_r69.imageFile.url);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpropertyInterpolate2"]("id", "", gameObject_r69.identifier, "_", ctx_r7.initTimestamp, "");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", gameObject_r69.rootDataElement);
} }
function RemoteControllerComponent_ng_template_22_ng_container_0_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelement"](1, "br");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerEnd"]();
} }
function RemoteControllerComponent_ng_template_22_div_1_ng_container_2_Template(rf, ctx) { if (rf & 1) {
    var _r89 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](1, "div", 57);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](3, "div", 58);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](4, "div", 59);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](5, "div", 60);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](6, "div", 61);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](7);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](8, "div", 61);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](9);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](10, "div", 47);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](11, "div", 62);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](12, "div", 63);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](13, "\u00A0");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](14, "div", 63);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](15, "/");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](16, "div", 52);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](17, "input", 64);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("ngModelChange", function RemoteControllerComponent_ng_template_22_div_1_ng_container_2_Template_input_ngModelChange_17_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r89); var dataElm_r81 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](2).dataElm; return dataElm_r81.currentValue = $event; });
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](18, "input", 64);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("ngModelChange", function RemoteControllerComponent_ng_template_22_div_1_ng_container_2_Template_input_ngModelChange_18_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r89); var dataElm_r81 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](2).dataElm; return dataElm_r81.value = $event; });
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var dataElm_r81 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](2).dataElm;
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtextInterpolate"](dataElm_r81.name);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](5);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtextInterpolate1"]("\u00A0\u00A0", dataElm_r81.value, "");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtextInterpolate1"]("\u00A0\u00A0", dataElm_r81.currentValue, "");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](8);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngModel", dataElm_r81.currentValue);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngModel", dataElm_r81.value);
} }
function RemoteControllerComponent_ng_template_22_div_1_ng_container_3_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainer"](0);
} }
function RemoteControllerComponent_ng_template_22_div_1_ng_container_4_Template(rf, ctx) { if (rf & 1) {
    var _r95 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](1, "div", 57);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](3, "div", 58);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](4, "div", 59);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](5, "div", 60);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](6, "div", 61);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](7);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](8, "input", 64);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("ngModelChange", function RemoteControllerComponent_ng_template_22_div_1_ng_container_4_Template_input_ngModelChange_8_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r95); var dataElm_r81 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](2).dataElm; return dataElm_r81.value = $event; });
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var dataElm_r81 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](2).dataElm;
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtextInterpolate"](dataElm_r81.name);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](5);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtextInterpolate"](dataElm_r81.value);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngModel", dataElm_r81.value);
} }
function RemoteControllerComponent_ng_template_22_div_1_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "div", 56);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerStart"](1, 37);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](2, RemoteControllerComponent_ng_template_22_div_1_ng_container_2_Template, 19, 5, "ng-container", 38);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](3, RemoteControllerComponent_ng_template_22_div_1_ng_container_3_Template, 1, 0, "ng-container", 38);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](4, RemoteControllerComponent_ng_template_22_div_1_ng_container_4_Template, 9, 3, "ng-container", 39);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
} if (rf & 2) {
    var dataElm_r81 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]().dataElm;
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngSwitch", dataElm_r81.attributes["type"]);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngSwitchCase", "numberResource");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngSwitchCase", "note");
} }
function RemoteControllerComponent_ng_template_22_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](0, RemoteControllerComponent_ng_template_22_ng_container_0_Template, 2, 0, "ng-container", 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](1, RemoteControllerComponent_ng_template_22_div_1_Template, 5, 3, "div", 55);
} if (rf & 2) {
    var dataElm_r81 = ctx.dataElm;
    var ctx_r9 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", (dataElm_r81 == null ? null : dataElm_r81.name) === ctx_r9.newLineString);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", dataElm_r81 && dataElm_r81.name !== ctx_r9.newLineString);
} }
var RemotControllerSelect = /** @class */ (function () {
    function RemotControllerSelect() {
    }
    return RemotControllerSelect;
}());
var RemoteControllerComponent = /** @class */ (function () {
    function RemoteControllerComponent(chatMessageService, panelService, changeDetector, inventoryService, contextMenuService, pointerDeviceService) {
        this.chatMessageService = chatMessageService;
        this.panelService = panelService;
        this.changeDetector = changeDetector;
        this.inventoryService = inventoryService;
        this.contextMenuService = contextMenuService;
        this.pointerDeviceService = pointerDeviceService;
        this.character = null;
        this.errorMessageBuff = '';
        this.errorMessageController = '';
        this._gameType = '';
        this.initTimestamp = 0;
        this.buffAreaIsHide = false;
        this.controllerAreaIsHide = false;
        this.chatTabidentifier = '';
        this.remotNumber = 0;
        this.recoveryLimitFlag = false;
        this.disptimer = null;
        this.selectCharacter = null;
        this.remotControllerSelect = {
            identifier: '',
            type: '',
            name: ''
        };
        this.remotControllerRadio = '';
        this.remotControlleridentifier = ['test01', 'test02'];
        this.testTag = '0001';
        this.text = '';
        this.sendTo = '';
        this.isEdit = false;
        this.editPalette = '';
        this.doubleClickTimer = null;
        this.charList = [];
        this.inventoryTypes = ['table', 'common', 'graveyard'];
        this.selectTab = 'table';
        this.selectedIdentifier = '';
        this.initTimestamp = Date.now();
        console.log('this.initTimestamp ' + this.initTimestamp);
    }
    Object.defineProperty(RemoteControllerComponent.prototype, "palette", {
        get: function () { return this.character.remoteController; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(RemoteControllerComponent.prototype, "gameType", {
        get: function () { return this._gameSystem == null ? '' : this._gameSystem.ID; },
        set: function (gameType) {
            var _this = this;
            _udonarium_dice_bot__WEBPACK_IMPORTED_MODULE_4__["DiceBot"].loadGameSystemAsync(gameType).then(function (gameSystem) {
                _this._gameSystem = gameSystem;
                if (_this.character.remoteController)
                    _this.character.remoteController.dicebot = gameSystem.ID;
            });
        },
        enumerable: false,
        configurable: true
    });
    ;
    ;
    Object.defineProperty(RemoteControllerComponent.prototype, "sendFrom", {
        get: function () { return this.character.identifier; },
        set: function (sendFrom) {
            this.onSelectedCharacter(sendFrom);
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(RemoteControllerComponent.prototype, "diceBotInfos", {
        get: function () { return _udonarium_dice_bot__WEBPACK_IMPORTED_MODULE_4__["DiceBot"].diceBotInfos; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(RemoteControllerComponent.prototype, "chatTab", {
        get: function () { return _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_2__["ObjectStore"].instance.get(this.chatTabidentifier); },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(RemoteControllerComponent.prototype, "myPeer", {
        get: function () { return _udonarium_peer_cursor__WEBPACK_IMPORTED_MODULE_6__["PeerCursor"].myCursor; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(RemoteControllerComponent.prototype, "otherPeers", {
        get: function () { return _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_2__["ObjectStore"].instance.getObjects(_udonarium_peer_cursor__WEBPACK_IMPORTED_MODULE_6__["PeerCursor"]); },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(RemoteControllerComponent.prototype, "sortTag", {
        get: function () { return this.inventoryService.sortTag; },
        set: function (sortTag) { this.inventoryService.sortTag = sortTag; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(RemoteControllerComponent.prototype, "sortOrder", {
        get: function () { return this.inventoryService.sortOrder; },
        set: function (sortOrder) { this.inventoryService.sortOrder = sortOrder; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(RemoteControllerComponent.prototype, "dataTag", {
        get: function () { return this.inventoryService.dataTag; },
        set: function (dataTag) { this.inventoryService.dataTag = dataTag; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(RemoteControllerComponent.prototype, "dataTags", {
        get: function () { return this.inventoryService.dataTags; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(RemoteControllerComponent.prototype, "sortOrderName", {
        get: function () { return this.sortOrder === _udonarium_data_summary_setting__WEBPACK_IMPORTED_MODULE_8__["SortOrder"].ASC ? '昇順' : '降順'; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(RemoteControllerComponent.prototype, "newLineString", {
        get: function () { return this.inventoryService.newLineString; },
        enumerable: false,
        configurable: true
    });
    RemoteControllerComponent.prototype.hideChkBoxEvent = function (eventValue) {
        this.buffAreaIsHide = eventValue;
    };
    RemoteControllerComponent.prototype.controllerHideChkChange = function (eventValue) {
        this.controllerAreaIsHide = eventValue;
    };
    RemoteControllerComponent.prototype.recoveryLimitFlagChange = function (value) {
        // 現状特に処理なし
    };
    RemoteControllerComponent.prototype.reverseValue = function () {
        this.remotNumber = -this.remotNumber;
    };
    RemoteControllerComponent.prototype.remotSelect = function (identifier, type, name) {
        this.remotControllerSelect.identifier = identifier;
        this.remotControllerSelect.type = type;
        this.remotControllerSelect.name = name;
    };
    RemoteControllerComponent.prototype.charListChange = function (charName, checked) {
        if (checked) {
            if (this.charList.indexOf(charName) < 0) {
                this.charList.push(charName);
            }
        }
        else {
            if (this.charList.indexOf(charName) > -1) {
                this.charList.splice(this.charList.indexOf(charName), 1);
            }
        }
    };
    RemoteControllerComponent.prototype.ngOnInit = function () {
        var _this = this;
        Promise.resolve().then(function () { return _this.updatePanelTitle(); });
        this.chatTabidentifier = this.chatMessageService.chatTabs ? this.chatMessageService.chatTabs[0].identifier : '';
        this.gameType = this.character.remoteController ? this.character.remoteController.dicebot : '';
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_3__["EventSystem"].register(this)
            .on('DELETE_GAME_OBJECT', -1000, function (event) {
            if (_this.character && _this.character.identifier === event.data.identifier) {
                _this.panelService.close();
            }
            if (_this.chatTabidentifier === event.data.identifier) {
                _this.chatTabidentifier = _this.chatMessageService.chatTabs ? _this.chatMessageService.chatTabs[0].identifier : '';
            }
        });
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_3__["EventSystem"].register(this)
            .on('SELECT_TABLETOP_OBJECT', -1000, function (event) {
            if (_udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_2__["ObjectStore"].instance.get(event.data.identifier) instanceof _udonarium_tabletop_object__WEBPACK_IMPORTED_MODULE_9__["TabletopObject"]) {
                _this.selectedIdentifier = event.data.identifier;
                _this.changeDetector.markForCheck();
            }
        })
            .on('SYNCHRONIZE_FILE_LIST', function (event) {
            if (event.isSendFromSelf) {
                _this.changeDetector.markForCheck();
            }
        })
            .on('UPDATE_INVENTORY', function (event) {
            if (event.isSendFromSelf) {
                _this.changeDetector.markForCheck();
            }
        })
            .on('OPEN_NETWORK', function (event) {
            _this.inventoryTypes = ['table', 'common', _udonarium_core_system__WEBPACK_IMPORTED_MODULE_3__["Network"].peerId, 'graveyard'];
            if (!_this.inventoryTypes.includes(_this.selectTab)) {
                _this.selectTab = _udonarium_core_system__WEBPACK_IMPORTED_MODULE_3__["Network"].peerId;
            }
        });
        this.inventoryTypes = ['table', 'common', _udonarium_core_system__WEBPACK_IMPORTED_MODULE_3__["Network"].peerId, 'graveyard'];
        this.disptimer = setInterval(function () {
            _this.changeDetector.detectChanges();
        }, 200);
    };
    RemoteControllerComponent.prototype.ngOnDestroy = function () {
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_3__["EventSystem"].unregister(this);
        this.disptimer = null;
        if (this.isEdit) {
            this.toggleEditMode();
        }
    };
    RemoteControllerComponent.prototype.updatePanelTitle = function () {
        this.panelService.title = this.character.name + ' 的控制面板';
    };
    RemoteControllerComponent.prototype.onSelectedCharacter = function (identifier) {
        if (this.isEdit) {
            this.toggleEditMode();
        }
        var object = _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_2__["ObjectStore"].instance.get(identifier);
        if (object instanceof _udonarium_game_character__WEBPACK_IMPORTED_MODULE_5__["GameCharacter"]) {
            this.character = object;
            var gameType = this.character.remoteController ? this.character.remoteController.dicebot : '';
            if (0 < gameType.length) {
                this.gameType = gameType;
            }
        }
        this.updatePanelTitle();
    };
    RemoteControllerComponent.prototype.selectPalette = function (line) {
        this.text = line;
    };
    RemoteControllerComponent.prototype.clickPalette = function (line) {
        var _this = this;
        if (this.doubleClickTimer && this.text === line) {
            clearTimeout(this.doubleClickTimer);
            this.doubleClickTimer = null;
            this.controllerInputComponent.sendChat(null);
        }
        else {
            this.text = line;
            this.doubleClickTimer = setTimeout(function () { _this.doubleClickTimer = null; }, 400);
        }
    };
    RemoteControllerComponent.prototype.resetPaletteSelect = function () {
        if (!this.chatPaletteElementRef.nativeElement) {
            return;
        }
        this.chatPaletteElementRef.nativeElement.selectedIndex = -1;
    };
    RemoteControllerComponent.prototype.toggleEditMode = function () {
        this.isEdit = this.isEdit ? false : true;
        if (this.isEdit) {
            this.editPalette = this.palette.value + '';
        }
        else {
            this.palette.setPalette(this.editPalette);
        }
    };
    RemoteControllerComponent.prototype.ngAfterViewInit = function () {
    };
    RemoteControllerComponent.prototype.getTabTitle = function (inventoryType) {
        switch (inventoryType) {
            case 'table':
                return '桌面';
            case _udonarium_core_system__WEBPACK_IMPORTED_MODULE_3__["Network"].peerId:
                return '個人';
            case 'graveyard':
                return '墓場';
            default:
                return '共有';
        }
    };
    RemoteControllerComponent.prototype.getInventory = function (inventoryType) {
        switch (inventoryType) {
            case 'table':
                return this.inventoryService.tableInventory;
            case _udonarium_core_system__WEBPACK_IMPORTED_MODULE_3__["Network"].peerId:
                return this.inventoryService.privateInventory;
            case 'graveyard':
                return this.inventoryService.graveyardInventory;
            default:
                return this.inventoryService.commonInventory;
        }
    };
    RemoteControllerComponent.prototype.getGameObjects = function (inventoryType) {
        var e_1, _a;
        switch (inventoryType) {
            case 'table':
                var tableCharacterList_dest = [];
                var tableCharacterList_scr = this.inventoryService.tableInventory.tabletopObjects;
                try {
                    for (var tableCharacterList_scr_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(tableCharacterList_scr), tableCharacterList_scr_1_1 = tableCharacterList_scr_1.next(); !tableCharacterList_scr_1_1.done; tableCharacterList_scr_1_1 = tableCharacterList_scr_1.next()) {
                        var character = tableCharacterList_scr_1_1.value;
                        var character_ = character;
                        if (!character_.hideInventory) {
                            tableCharacterList_dest.push(character);
                        }
                    }
                }
                catch (e_1_1) { e_1 = { error: e_1_1 }; }
                finally {
                    try {
                        if (tableCharacterList_scr_1_1 && !tableCharacterList_scr_1_1.done && (_a = tableCharacterList_scr_1.return)) _a.call(tableCharacterList_scr_1);
                    }
                    finally { if (e_1) throw e_1.error; }
                }
                return tableCharacterList_dest;
        }
    };
    RemoteControllerComponent.prototype.getInventoryTags = function (gameObject) {
        return this.getInventory(gameObject.location.name).dataElementMap.get(gameObject.identifier);
    };
    RemoteControllerComponent.prototype.toggleEdit = function () {
        this.isEdit = !this.isEdit;
    };
    RemoteControllerComponent.prototype.selectGameObject = function (gameObject) {
        var aliasName = gameObject.aliasName;
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_3__["EventSystem"].trigger('SELECT_TABLETOP_OBJECT', { identifier: gameObject.identifier, className: gameObject.aliasName });
        this.selectCharacter = gameObject;
    };
    RemoteControllerComponent.prototype.getTargetCharacters = function (checkedOnly) {
        var e_2, _a;
        var gameCharacters = new Array();
        var objectList = this.getGameObjects(this.selectTab);
        try {
            for (var objectList_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(objectList), objectList_1_1 = objectList_1.next(); !objectList_1_1.done; objectList_1_1 = objectList_1.next()) {
                var object = objectList_1_1.value;
                if (object instanceof _udonarium_game_character__WEBPACK_IMPORTED_MODULE_5__["GameCharacter"]) {
                    if (object.hideInventory) {
                        continue;
                    } // 非表示対象の除外のため
                    var box = document.getElementById(object.identifier + '_' + this.initTimestamp);
                    if (box) {
                        if (box.checked || (!checkedOnly)) {
                            gameCharacters.push(object);
                        }
                    }
                }
            }
        }
        catch (e_2_1) { e_2 = { error: e_2_1 }; }
        finally {
            try {
                if (objectList_1_1 && !objectList_1_1.done && (_a = objectList_1.return)) _a.call(objectList_1);
            }
            finally { if (e_2) throw e_2.error; }
        }
        return gameCharacters;
    };
    RemoteControllerComponent.prototype.remotBuffRoundDo = function (gameCharacters) {
        var e_3, _a, e_4, _b, e_5, _c;
        if (gameCharacters.length <= 0) {
            return;
        }
        try {
            for (var gameCharacters_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(gameCharacters), gameCharacters_1_1 = gameCharacters_1.next(); !gameCharacters_1_1.done; gameCharacters_1_1 = gameCharacters_1.next()) {
                var character = gameCharacters_1_1.value;
                if (character.buffDataElement.children) {
                    try {
                        for (var _d = (e_4 = void 0, Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(character.buffDataElement.children)), _e = _d.next(); !_e.done; _e = _d.next()) {
                            var dataElm = _e.value;
                            try {
                                for (var _f = (e_5 = void 0, Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(dataElm.children)), _g = _f.next(); !_g.done; _g = _f.next()) {
                                    var data = _g.value;
                                    var oldNumS = '';
                                    var sum = void 0;
                                    oldNumS = data.value;
                                    sum = parseInt(oldNumS);
                                    sum = sum - 1;
                                    data.value = sum;
                                }
                            }
                            catch (e_5_1) { e_5 = { error: e_5_1 }; }
                            finally {
                                try {
                                    if (_g && !_g.done && (_c = _f.return)) _c.call(_f);
                                }
                                finally { if (e_5) throw e_5.error; }
                            }
                        }
                    }
                    catch (e_4_1) { e_4 = { error: e_4_1 }; }
                    finally {
                        try {
                            if (_e && !_e.done && (_b = _d.return)) _b.call(_d);
                        }
                        finally { if (e_4) throw e_4.error; }
                    }
                }
            }
        }
        catch (e_3_1) { e_3 = { error: e_3_1 }; }
        finally {
            try {
                if (gameCharacters_1_1 && !gameCharacters_1_1.done && (_a = gameCharacters_1.return)) _a.call(gameCharacters_1);
            }
            finally { if (e_3) throw e_3.error; }
        }
    };
    RemoteControllerComponent.prototype.remotBuffRound = function (checkedOnly) {
        var e_6, _a;
        var text = '';
        var gameCharacters = this.getTargetCharacters(checkedOnly);
        if (gameCharacters.length <= 0) {
            return;
        }
        if (!this.chatTab) {
            return;
        }
        var mess = '';
        if (gameCharacters.length > 0) {
            try {
                for (var gameCharacters_2 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(gameCharacters), gameCharacters_2_1 = gameCharacters_2.next(); !gameCharacters_2_1.done; gameCharacters_2_1 = gameCharacters_2.next()) {
                    var object = gameCharacters_2_1.value;
                    text = text + '[' + object.name + ']';
                }
            }
            catch (e_6_1) { e_6 = { error: e_6_1 }; }
            finally {
                try {
                    if (gameCharacters_2_1 && !gameCharacters_2_1.done && (_a = gameCharacters_2.return)) _a.call(gameCharacters_2);
                }
                finally { if (e_6) throw e_6.error; }
            }
            this.remotBuffRoundDo(gameCharacters);
            var mess_1 = '減少BUFF的R ' + text;
            this.chatMessageService.sendMessage(this.chatTab, mess_1, this._gameSystem, this.sendFrom, this.sendTo, this.controllerInputComponent.tachieNum);
        }
    };
    RemoteControllerComponent.prototype.remotBuffRoundSelect = function () {
        this.remotBuffRound(true);
    };
    RemoteControllerComponent.prototype.remotBuffRoundALL = function () {
        this.remotBuffRound(false);
    };
    RemoteControllerComponent.prototype.remotBuffDeleteZeroRoundDo = function (gameCharacters) {
        var e_7, _a, e_8, _b, e_9, _c;
        if (gameCharacters.length <= 0) {
            return;
        }
        try {
            for (var gameCharacters_3 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(gameCharacters), gameCharacters_3_1 = gameCharacters_3.next(); !gameCharacters_3_1.done; gameCharacters_3_1 = gameCharacters_3.next()) {
                var character = gameCharacters_3_1.value;
                if (character.buffDataElement.children) {
                    try {
                        for (var _d = (e_8 = void 0, Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(character.buffDataElement.children)), _e = _d.next(); !_e.done; _e = _d.next()) {
                            var dataElm = _e.value;
                            try {
                                for (var _f = (e_9 = void 0, Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(dataElm.children)), _g = _f.next(); !_g.done; _g = _f.next()) {
                                    var data = _g.value;
                                    var oldNumS = '';
                                    var num = void 0;
                                    oldNumS = data.value;
                                    num = parseInt(oldNumS);
                                    if (num <= 0) {
                                        data.destroy();
                                    }
                                }
                            }
                            catch (e_9_1) { e_9 = { error: e_9_1 }; }
                            finally {
                                try {
                                    if (_g && !_g.done && (_c = _f.return)) _c.call(_f);
                                }
                                finally { if (e_9) throw e_9.error; }
                            }
                        }
                    }
                    catch (e_8_1) { e_8 = { error: e_8_1 }; }
                    finally {
                        try {
                            if (_e && !_e.done && (_b = _d.return)) _b.call(_d);
                        }
                        finally { if (e_8) throw e_8.error; }
                    }
                }
            }
        }
        catch (e_7_1) { e_7 = { error: e_7_1 }; }
        finally {
            try {
                if (gameCharacters_3_1 && !gameCharacters_3_1.done && (_a = gameCharacters_3.return)) _a.call(gameCharacters_3);
            }
            finally { if (e_7) throw e_7.error; }
        }
    };
    RemoteControllerComponent.prototype.remotBuffDeleteZeroRound = function (checkedOnly) {
        var e_10, _a;
        var text = '';
        var gameCharacters = this.getTargetCharacters(checkedOnly);
        var mess = '';
        if (gameCharacters.length > 0) {
            try {
                for (var gameCharacters_4 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(gameCharacters), gameCharacters_4_1 = gameCharacters_4.next(); !gameCharacters_4_1.done; gameCharacters_4_1 = gameCharacters_4.next()) {
                    var object = gameCharacters_4_1.value;
                    text = text + '[' + object.name + ']';
                }
            }
            catch (e_10_1) { e_10 = { error: e_10_1 }; }
            finally {
                try {
                    if (gameCharacters_4_1 && !gameCharacters_4_1.done && (_a = gameCharacters_4.return)) _a.call(gameCharacters_4);
                }
                finally { if (e_10) throw e_10.error; }
            }
            this.remotBuffDeleteZeroRoundDo(gameCharacters);
            var mess_2 = '刪除0R以下的BUFF ' + text;
            this.chatMessageService.sendMessage(this.chatTab, mess_2, this._gameSystem, this.sendFrom, this.sendTo, this.controllerInputComponent.tachieNum);
        }
    };
    RemoteControllerComponent.prototype.remotBuffDeleteZeroRoundSelect = function () {
        this.remotBuffDeleteZeroRound(true);
    };
    RemoteControllerComponent.prototype.remotBuffDeleteZeroRoundALL = function () {
        this.remotBuffDeleteZeroRound(false);
    };
    RemoteControllerComponent.prototype.remotAddBuffRound = function (gameCharacters, name, subcom, round) {
        var e_11, _a, e_12, _b;
        var text = '';
        if (gameCharacters.length <= 0) {
            return;
        }
        try {
            for (var gameCharacters_5 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(gameCharacters), gameCharacters_5_1 = gameCharacters_5.next(); !gameCharacters_5_1.done; gameCharacters_5_1 = gameCharacters_5.next()) {
                var character = gameCharacters_5_1.value;
                if (character.buffDataElement.children) {
                    try {
                        for (var _c = (e_12 = void 0, Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(character.buffDataElement.children)), _d = _c.next(); !_d.done; _d = _c.next()) {
                            var dataElm = _d.value;
                            var data = character.buffDataElement.getFirstElementByName(name);
                            if (data) {
                                data.value = round;
                                data.currentValue = subcom;
                            }
                            else {
                                dataElm.appendChild(_udonarium_data_element__WEBPACK_IMPORTED_MODULE_7__["DataElement"].create(name, round, { type: 'numberResource', currentValue: subcom }));
                            }
                        }
                    }
                    catch (e_12_1) { e_12 = { error: e_12_1 }; }
                    finally {
                        try {
                            if (_d && !_d.done && (_b = _c.return)) _b.call(_c);
                        }
                        finally { if (e_12) throw e_12.error; }
                    }
                }
            }
        }
        catch (e_11_1) { e_11 = { error: e_11_1 }; }
        finally {
            try {
                if (gameCharacters_5_1 && !gameCharacters_5_1.done && (_a = gameCharacters_5.return)) _a.call(gameCharacters_5);
            }
            finally { if (e_11) throw e_11.error; }
        }
    };
    RemoteControllerComponent.prototype.sendChat = function (value) {
        var e_13, _a;
        var text = '';
        var gameCharacters = this.getTargetCharacters(true);
        var splittext = value.text.split(/\s+/);
        var round = 3;
        var sub = '';
        var buffname = '';
        var bufftext = '';
        if (splittext.length == 0) {
            return;
        }
        if (splittext[0] == '') {
            return;
        }
        buffname = splittext[0];
        bufftext = splittext[0];
        if (splittext.length > 1) {
            sub = splittext[1];
            bufftext = bufftext + '/' + splittext[1];
        }
        if (splittext.length > 2) {
            round = parseInt(splittext[2]);
            bufftext = bufftext + '/' + round + 'R';
        }
        if (gameCharacters.length > 0) {
            try {
                for (var gameCharacters_6 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(gameCharacters), gameCharacters_6_1 = gameCharacters_6.next(); !gameCharacters_6_1.done; gameCharacters_6_1 = gameCharacters_6.next()) {
                    var object = gameCharacters_6_1.value;
                    text = text + '[' + object.name + ']';
                }
            }
            catch (e_13_1) { e_13 = { error: e_13_1 }; }
            finally {
                try {
                    if (gameCharacters_6_1 && !gameCharacters_6_1.done && (_a = gameCharacters_6.return)) _a.call(gameCharacters_6);
                }
                finally { if (e_13) throw e_13.error; }
            }
            this.remotAddBuffRound(gameCharacters, buffname, sub, round);
            var mess = '賦予BUFF ' + bufftext + ' > ' + text;
            this.chatMessageService.sendMessage(this.chatTab, mess, this._gameSystem, this.sendFrom, this.sendTo, value.tachieNum, value.messColor);
            this.errorMessageBuff = '';
        }
        else {
            this.errorMessageBuff = '未選擇對象';
        }
    };
    RemoteControllerComponent.prototype.remotChangeValue = function () {
        var e_14, _a;
        var text = '';
        var gameCharacters = this.getTargetCharacters(true);
        if (this.remotControllerSelect.identifier == '') {
            this.errorMessageController = '未選擇變更項目';
            return;
        }
        try {
            for (var gameCharacters_7 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(gameCharacters), gameCharacters_7_1 = gameCharacters_7.next(); !gameCharacters_7_1.done; gameCharacters_7_1 = gameCharacters_7.next()) {
                var object = gameCharacters_7_1.value;
                var data = object.detailDataElement.getFirstElementByName(this.remotControllerSelect.identifier);
                if (data) {
                    var oldNumS = '';
                    var newNum = void 0;
                    var sum = void 0;
                    if (this.remotControllerSelect.type == 'value') {
                        oldNumS = data.value;
                        sum = parseInt(oldNumS);
                        sum = sum + this.remotNumber;
                        data.value = sum;
                        newNum = data.value;
                    }
                    var maxRecoveryMess = '';
                    if (this.remotControllerSelect.type == 'currentValue') {
                        oldNumS = data.currentValue;
                        sum = parseInt(oldNumS);
                        sum = sum + this.remotNumber;
                        data.currentValue = sum;
                        if (this.recoveryLimitFlag && data.currentValue >= data.value) {
                            maxRecoveryMess = '(最大)';
                            data.currentValue = data.value;
                        }
                        newNum = data.currentValue;
                    }
                    text = text + '[' + object.name + ' ' + oldNumS + '>' + newNum + maxRecoveryMess + '] ';
                }
            }
        }
        catch (e_14_1) { e_14 = { error: e_14_1 }; }
        finally {
            try {
                if (gameCharacters_7_1 && !gameCharacters_7_1.done && (_a = gameCharacters_7.return)) _a.call(gameCharacters_7);
            }
            finally { if (e_14) throw e_14.error; }
        }
        if (text != '') {
            var hugou = '+';
            if (this.remotNumber < 0)
                hugou = '';
            var mess = '[' + this.remotControllerSelect.name + ']変更[' + hugou + this.remotNumber + ']＞' + text;
            this.chatMessageService.sendMessage(this.chatTab, mess, this._gameSystem, this.sendFrom, this.sendTo, this.controllerInputComponent.tachieNum, this.controllerInputComponent.selectChatColor);
            this.errorMessageController = '';
        }
        else {
            this.errorMessageController = '未選擇對象角色';
        }
    };
    RemoteControllerComponent.prototype.trackByGameObject = function (index, gameObject) {
        return gameObject ? gameObject.identifier : index;
    };
    RemoteControllerComponent.prototype.buffEdit = function (gameCharacter) {
        var coordinate = this.pointerDeviceService.pointers[0];
        var option = { left: coordinate.x, top: coordinate.y, width: 420, height: 300 };
        option.title = gameCharacter.name + '的BUFF編輯';
        var component = this.panelService.open(component_game_character_buff_view_game_character_buff_view_component__WEBPACK_IMPORTED_MODULE_10__["GameCharacterBuffViewComponent"], option);
        component.character = gameCharacter;
    };
    RemoteControllerComponent.prototype.allBoxCheck = function (value) {
        var e_15, _a;
        var objectList = this.getGameObjects(this.selectTab);
        try {
            for (var objectList_2 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(objectList), objectList_2_1 = objectList_2.next(); !objectList_2_1.done; objectList_2_1 = objectList_2.next()) {
                var object = objectList_2_1.value;
                if (object instanceof _udonarium_game_character__WEBPACK_IMPORTED_MODULE_5__["GameCharacter"]) {
                    var box = document.getElementById(object.identifier + '_' + this.initTimestamp);
                    if (box) {
                        box.checked = value.check;
                    }
                }
            }
        }
        catch (e_15_1) { e_15 = { error: e_15_1 }; }
        finally {
            try {
                if (objectList_2_1 && !objectList_2_1.done && (_a = objectList_2.return)) _a.call(objectList_2);
            }
            finally { if (e_15) throw e_15.error; }
        }
    };
    RemoteControllerComponent.prototype.targetBlockClick = function (identifier) {
        console.log('identifier:' + identifier + ' initTimestamp:' + this.initTimestamp);
        var box = document.getElementById(identifier + '_' + this.initTimestamp);
        box.checked = !box.checked;
    };
    RemoteControllerComponent.prototype.onChange = function (identifier) {
        this.targetBlockClick(identifier);
    };
    RemoteControllerComponent.ɵfac = function RemoteControllerComponent_Factory(t) { return new (t || RemoteControllerComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdirectiveInject"](service_chat_message_service__WEBPACK_IMPORTED_MODULE_11__["ChatMessageService"]), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdirectiveInject"](service_panel_service__WEBPACK_IMPORTED_MODULE_12__["PanelService"]), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_1__["ChangeDetectorRef"]), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdirectiveInject"](service_game_object_inventory_service__WEBPACK_IMPORTED_MODULE_13__["GameObjectInventoryService"]), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdirectiveInject"](service_context_menu_service__WEBPACK_IMPORTED_MODULE_14__["ContextMenuService"]), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdirectiveInject"](service_pointer_device_service__WEBPACK_IMPORTED_MODULE_15__["PointerDeviceService"])); };
    RemoteControllerComponent.ɵcmp = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdefineComponent"]({ type: RemoteControllerComponent, selectors: [["remote-controller"]], viewQuery: function RemoteControllerComponent_Query(rf, ctx) { if (rf & 1) {
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵstaticViewQuery"](_c0, true);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵviewQuery"](_c1, true);
        } if (rf & 2) {
            var _t = void 0;
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵqueryRefresh"](_t = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵloadQuery"]()) && (ctx.controllerInputComponent = _t.first);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵqueryRefresh"](_t = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵloadQuery"]()) && (ctx.chatPaletteElementRef = _t.first);
        } }, inputs: { character: "character" }, decls: 24, vars: 12, consts: [[1, "remote-controller-wrapper"], [1, "sticky-top-left"], [1, "flex-container"], [2, "flex-grow", "0"], [1, "chat-tab"], [4, "ngFor", "ngForOf"], [3, "onlyCharacters", "chatTabidentifier", "gameType", "sendFrom", "text", "selectNum", "gameTypeChange", "sendFromChange", "textChange", "selectNumChange", "allBox", "chat", "hideChkEvent"], ["controllerInput", ""], [4, "ngIf"], [2, "width", "100%"], [2, "float", "right", "text-align", "right"], ["name", "buff_hide_chk", "type", "checkbox", 3, "change"], [1, "controller-right"], [3, "ngClass", 4, "ngFor", "ngForOf", "ngForTrackBy"], ["gameObjectTags", ""], ["dataElmTag", ""], ["name", "chat-tab", "type", "radio", "ng-control", "options", 3, "value", "ngModel", "ngModelChange"], ["class", "edit-info", 4, "ngIf"], ["style", "flex-grow: 1; height: 0; min-height: 100px;", 4, "ngIf"], ["type", "submit", 2, "width", "20em", 3, "click"], ["type", "submit", 2, "width", "10em", 3, "click"], [1, "edit-info"], [1, "material-icons", 2, "vertical-align", "bottom", "size", "0.8rem"], [2, "flex-grow", "1", "height", "0", "min-height", "100px"], ["size", "5", 1, "palette", 2, "overflow-y", "auto", 3, "input", "click"], ["chatPalette", ""], ["placeholder", "\u6309Enter\u9001\u51FA", 1, "controller-input", 3, "ngModel", "ngModelOptions", "ngModelChange", "input", "keydown.enter"], ["textArea", ""], ["type", "submit", 3, "click"], [3, "value", 4, "ngFor", "ngForOf"], [3, "value"], ["placeholder", "BUFF\u7DE8\u8F2F\u677F", 1, "palette", 2, "resize", "none", 3, "ngModel", "ngModelChange"], ["size", "1", "type", "number", "placeholder", "Value", 2, "width", "3.0em", "font-size", "1.2em", 3, "ngModel", "ngModelChange"], [3, "click"], [2, "float", "right", "text-align", "right", "margin-top", "5px"], ["name", "max_limit_chk", "type", "checkbox", 3, "ngModel", "ngModelChange", "change"], [1, "controller"], [3, "ngSwitch"], [4, "ngSwitchCase"], [4, "ngSwitchDefault"], ["name", "controller", "type", "radio", "ng-control", "options", 3, "value", "click"], [3, "ngClass"], [4, "ngTemplateOutlet", "ngTemplateOutletContext"], [1, "inventory-object"], [1, "object-tags-box"], [1, "object-name"], [1, "tab-setting", "small-font", 3, "click"], [1, "table"], [1, "table-cell", "click-area", 3, "click"], [1, "image-box"], [3, "src", 4, "ngIf"], ["name", "target_chk", "type", "checkbox", 1, "target_chk", 3, "id", "change"], [1, "table-cell"], [3, "src"], [4, "ngFor", "ngForOf", "ngForTrackBy"], ["class", "object-tag", 4, "ngIf"], [1, "object-tag"], [1, "tag-name"], [2, "text-align", "center"], [2, "display", "inline-block"], [1, "tag-value-box"], [1, "hidden-spacer", 2, "font-weight", "bold"], [1, "table-cell", "tag-slash"], [2, "padding", "2px"], ["size", "1", "placeholder", "", 1, "input", "tag-value", 3, "ngModel", "ngModelChange"]], template: function RemoteControllerComponent_Template(rf, ctx) { if (rf & 1) {
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "div", 0);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](1, "div", 1);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](2, "div", 2);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](3, "div", 3);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](4, "form");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](5, "div", 4);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](6, RemoteControllerComponent_label_6_Template, 4, 3, "label", 5);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](7, "controller-input", 6, 7);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("gameTypeChange", function RemoteControllerComponent_Template_controller_input_gameTypeChange_7_listener($event) { return ctx.gameType = $event; })("sendFromChange", function RemoteControllerComponent_Template_controller_input_sendFromChange_7_listener($event) { return ctx.sendFrom = $event; })("textChange", function RemoteControllerComponent_Template_controller_input_textChange_7_listener($event) { return ctx.text = $event; })("selectNumChange", function RemoteControllerComponent_Template_controller_input_selectNumChange_7_listener($event) { return ctx.getTargetCharacters(true).length = $event; })("allBox", function RemoteControllerComponent_Template_controller_input_allBox_7_listener($event) { return ctx.allBoxCheck($event); })("chat", function RemoteControllerComponent_Template_controller_input_chat_7_listener($event) { return ctx.sendChat($event); })("hideChkEvent", function RemoteControllerComponent_Template_controller_input_hideChkEvent_7_listener($event) { return ctx.hideChkBoxEvent($event); });
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](9, RemoteControllerComponent_ng_container_9_Template, 22, 6, "ng-container", 8);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelement"](10, "hr");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](11, "div", 9);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](12, "\u8A08\u6578\u63A7\u5236 ");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](13, "div", 10);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](14, "\u96B1\u85CF ");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](15, "input", 11);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("change", function RemoteControllerComponent_Template_input_change_15_listener($event) { return ctx.controllerHideChkChange($event.target.checked); });
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](16, RemoteControllerComponent_ng_container_16_Template, 15, 4, "ng-container", 8);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](17, "div", 12);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](18, RemoteControllerComponent_div_18_Template, 2, 1, "div", 8);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](19, RemoteControllerComponent_div_19_Template, 2, 6, "div", 13);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](20, RemoteControllerComponent_ng_template_20_Template, 14, 5, "ng-template", null, 14, _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplateRefExtractor"]);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](22, RemoteControllerComponent_ng_template_22_Template, 2, 2, "ng-template", null, 15, _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplateRefExtractor"]);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
        } if (rf & 2) {
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](6);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngForOf", ctx.chatMessageService.chatTabs);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("onlyCharacters", true)("chatTabidentifier", ctx.chatTabidentifier)("gameType", ctx.gameType)("sendFrom", ctx.sendFrom)("text", ctx.text)("selectNum", ctx.getTargetCharacters(true).length);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](2);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", !ctx.buffAreaIsHide);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](7);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", !ctx.controllerAreaIsHide);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](2);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", ctx.getGameObjects(ctx.selectTab).length < 1);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngForOf", ctx.getGameObjects(ctx.selectTab))("ngForTrackBy", ctx.trackByGameObject);
        } }, directives: [_angular_forms__WEBPACK_IMPORTED_MODULE_16__["ɵangular_packages_forms_forms_y"], _angular_forms__WEBPACK_IMPORTED_MODULE_16__["NgControlStatusGroup"], _angular_forms__WEBPACK_IMPORTED_MODULE_16__["NgForm"], _angular_common__WEBPACK_IMPORTED_MODULE_17__["NgForOf"], component_controller_input_controller_input_component__WEBPACK_IMPORTED_MODULE_18__["ControllerInputComponent"], _angular_common__WEBPACK_IMPORTED_MODULE_17__["NgIf"], _angular_forms__WEBPACK_IMPORTED_MODULE_16__["RadioControlValueAccessor"], _angular_forms__WEBPACK_IMPORTED_MODULE_16__["DefaultValueAccessor"], _angular_forms__WEBPACK_IMPORTED_MODULE_16__["NgControlStatus"], _angular_forms__WEBPACK_IMPORTED_MODULE_16__["NgModel"], _angular_forms__WEBPACK_IMPORTED_MODULE_16__["NgSelectOption"], _angular_forms__WEBPACK_IMPORTED_MODULE_16__["ɵangular_packages_forms_forms_x"], _angular_forms__WEBPACK_IMPORTED_MODULE_16__["NumberValueAccessor"], _angular_forms__WEBPACK_IMPORTED_MODULE_16__["CheckboxControlValueAccessor"], _angular_common__WEBPACK_IMPORTED_MODULE_17__["NgSwitch"], _angular_common__WEBPACK_IMPORTED_MODULE_17__["NgSwitchCase"], _angular_common__WEBPACK_IMPORTED_MODULE_17__["NgSwitchDefault"], _angular_common__WEBPACK_IMPORTED_MODULE_17__["NgClass"], _angular_common__WEBPACK_IMPORTED_MODULE_17__["NgTemplateOutlet"]], pipes: [pipe_safe_pipe__WEBPACK_IMPORTED_MODULE_19__["SafePipe"]], styles: [".edit-info[_ngcontent-%COMP%] {\r\n  width: 100%;\r\n  text-align: center;\r\n  color: #CCC;\r\n  background-color: rgba(30, 30, 30, 0.8);\r\n}\r\n.palette[_ngcontent-%COMP%] {\r\n\r\n  box-sizing: border-box;\r\n  font-family: -apple-system, BlinkMacSystemFont, \"Helvetica Neue\", Verdana, Meiryo, sans-serif;\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n.remote-controller-wrapper[_ngcontent-%COMP%] {\r\n  display: flex;\r\n  flex-direction: row;\r\n  height: 100%;\r\n}\r\n.flex-container[_ngcontent-%COMP%] {\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n.chat-tab[_ngcontent-%COMP%] {\r\n  padding : 0 5px 5px 5px;\r\n  -webkit-user-select: none;\r\n          user-select: none;\r\n}\r\n.chat-tab[_ngcontent-%COMP%]   label[_ngcontent-%COMP%] {\r\n  display: inline-block;\r\n  position: relative;\r\n}\r\n.chat-tab[_ngcontent-%COMP%]   input[type=\"radio\"][_ngcontent-%COMP%] {\r\n  display: none;\r\n}\r\n.chat-tab[_ngcontent-%COMP%]   input[type=\"radio\"][_ngcontent-%COMP%]    + div[_ngcontent-%COMP%] {\r\n  display: inline-block;\r\n  vertical-align: middle;\r\n  outline: 0;\r\n  font-size: 8px;\r\n  background-color: transparent;\r\n  color: #444; \r\n  border: solid 1px #555;\r\n  padding: 2px 8px;\r\n  margin: 2px;\r\n  border-radius: 100px;\r\n  cursor: pointer;\r\n}\r\n.chat-tab[_ngcontent-%COMP%]   input[type=\"radio\"][_ngcontent-%COMP%]    + div[_ngcontent-%COMP%]:hover {\r\n  background-color: #888;\r\n  color: #eee;\r\n  border: solid 1px #555;\r\n}\r\n.chat-tab[_ngcontent-%COMP%]   input[type=\"radio\"][_ngcontent-%COMP%]:checked    + div[_ngcontent-%COMP%] {\r\n  background: #555;\r\n  color: #CCC;\r\n}\r\n\r\n.controller[_ngcontent-%COMP%] {\r\n  padding : 0 5px 5px 5px;\r\n  -webkit-user-select: none;\r\n          user-select: none;\r\n}\r\n.controller[_ngcontent-%COMP%]   label[_ngcontent-%COMP%] {\r\n  display: inline-block;\r\n  position: relative;\r\n}\r\n.controller[_ngcontent-%COMP%]   input[type=\"radio\"][_ngcontent-%COMP%] {\r\n  display: none;\r\n}\r\n.controller[_ngcontent-%COMP%]   input[type=\"radio\"][_ngcontent-%COMP%]    + div[_ngcontent-%COMP%] {\r\n  display: inline-block;\r\n  vertical-align: middle;\r\n  outline: 0;\r\n  font-size: 12px;\r\n  background-color: transparent;\r\n  color: #444; \r\n  border: solid 1px #555;\r\n  padding: 2px 8px;\r\n  margin: 2px;\r\n  border-radius: 100px;\r\n  cursor: pointer;\r\n}\r\n.controller[_ngcontent-%COMP%]   input[type=\"radio\"][_ngcontent-%COMP%]    + div[_ngcontent-%COMP%]:hover {\r\n  background-color: #888;\r\n  color: #eee;\r\n  border: solid 1px #555;\r\n}\r\n.controller[_ngcontent-%COMP%]   input[type=\"radio\"][_ngcontent-%COMP%]:checked    + div[_ngcontent-%COMP%] {\r\n  background: #555;\r\n  color: #CCC;\r\n}\r\n\r\n.badge[_ngcontent-%COMP%] {\r\n  position: absolute;\r\n  top: -4px;\r\n  right: 0;\r\n}\r\n\r\n.component[_ngcontent-%COMP%] {\r\n  width: 100%;\r\n}\r\n.box[_ngcontent-%COMP%] {\r\n  border: transparent 2px solid;\r\n  border-left: transparent 6px solid;\r\n  margin-top: 2px;\r\n  padding: 2px;\r\n  padding-bottom: 3px;\r\n  box-sizing: border-box;\r\n\r\n  border-bottom: 1px dotted #666;\r\n}\r\n.selected[_ngcontent-%COMP%] {\r\n  padding: 2px;\r\n  border: 2px dotted #666;\r\n  border-left: 6px solid #444;\r\n}\r\n.hidden-spacer[_ngcontent-%COMP%] {\r\n  visibility: hidden;\r\n  height: 0;\r\n  font-size: 1.0em;\r\n  min-width:1em; \r\n  max-width : 12em;\r\n  overflow: hidden;\r\n  padding: 0 2px;\r\n  box-sizing: border-box;\r\n  white-space: nowrap;\r\n}\r\n.input[_ngcontent-%COMP%] {\r\n  background: none;\r\n  border: none;\r\n  border-radius: 2px;\r\n  outline: none;\r\n  color: #444;\r\n  padding: 2px;\r\n  box-sizing: border-box;\r\n}\r\n.input[_ngcontent-%COMP%]:hover {\r\n  background: #EEE;\r\n}\r\n.input[_ngcontent-%COMP%]:focus {\r\n  background: #FFF;\r\n}\r\ninput[type=number][_ngcontent-%COMP%] {\r\n  -moz-appearance: textfield;\r\n}\r\ninput[type=number][_ngcontent-%COMP%]:hover, input[type=number][_ngcontent-%COMP%]:focus {\r\n  -moz-appearance: number-input;\r\n}\r\ninput[type='range'][_ngcontent-%COMP%] {\r\n  --slider-track-color: transparent; \r\n  --slider-fill-color: #555; \r\n  --slider-border-color: #777;\r\n  --slider-height: 0.8em;\r\n  --slider-thumb-size: 1.0em;\r\n  --range: calc(var(--max) - var(--min));\r\n  --ratio: calc((var(--val) - var(--min))/var(--range));\r\n  --sx: calc(.5*var(--slider-thumb-size) + var(--ratio)*(100% - var(--slider-thumb-size)));\r\n  margin: 0;\r\n  padding: 0;\r\n  background: transparent;\r\n  font: 1em/1 arial, sans-serif;\r\n  outline: 0;\r\n  -webkit-appearance: none;\r\n     -moz-appearance: none;\r\n          appearance: none;\r\n}\r\ninput[type='range'][_ngcontent-%COMP%], input[type='range'][_ngcontent-%COMP%]::-webkit-slider-thumb {\r\n  -webkit-appearance: none;\r\n}\r\ninput[type='range'][_ngcontent-%COMP%]::-webkit-slider-runnable-track {\r\n  box-sizing: border-box;\r\n  border-top: solid 1px var(--slider-border-color);\r\n  border-bottom: solid 1px var(--slider-border-color);\r\n  border-radius: var(--slider-height);\r\n  height: var(--slider-height);\r\n  background: var(--slider-track-color);\r\n}\r\ninput[type='range'][_ngcontent-%COMP%]::-webkit-slider-runnable-track {\r\n  background: linear-gradient(var(--slider-fill-color), var(--slider-fill-color)) 0/var(--sx) 100% no-repeat var(--slider-track-color);\r\n  cursor: pointer;\r\n}\r\ninput[type='range'][_ngcontent-%COMP%]::-moz-range-track {\r\n  box-sizing: border-box;\r\n  border: solid 1px var(--slider-border-color);\r\n  border-radius: var(--slider-height);\r\n  height: var(--slider-height);\r\n  background: var(--slider-track-color);\r\n}\r\ninput[type='range'][_ngcontent-%COMP%]::-ms-track {\r\n  box-sizing: border-box;\r\n  border: solid 1px var(--slider-border-color);\r\n  border-radius: var(--slider-height);\r\n  height: var(--slider-height);\r\n  background: var(--slider-track-color);\r\n}\r\ninput[type='range'][_ngcontent-%COMP%]::-moz-range-progress {\r\n  height: var(--slider-height);\r\n  background: var(--slider-fill-color);\r\n  border-radius: var(--slider-height);\r\n}\r\ninput[type='range'][_ngcontent-%COMP%]::-ms-fill-lower {\r\n  height: var(--slider-height);\r\n  background: var(--slider-fill-color);\r\n  border-radius: var(--slider-height);\r\n}\r\ninput[type='range'][_ngcontent-%COMP%]::-webkit-slider-thumb {\r\n  margin-top: calc((var(--slider-height) - var(--slider-thumb-size)) / 2 - 1px);\r\n  width: var(--slider-thumb-size);\r\n  height: var(--slider-thumb-size);\r\n  box-sizing: border-box;\r\n  border: solid 1px var(--slider-border-color);\r\n  border-radius: 2em;\r\n  background: #ddd;\r\n  cursor: pointer;\r\n}\r\ninput[type='range'][_ngcontent-%COMP%]::-moz-range-thumb {\r\n  width: var(--slider-thumb-size);\r\n  height: var(--slider-thumb-size);\r\n  box-sizing: border-box;\r\n  border: solid 1px var(--slider-border-color);\r\n  border-radius: 2em;\r\n  background: #ddd;\r\n  cursor: pointer;\r\n}\r\ninput[type='range'][_ngcontent-%COMP%]::-ms-thumb {\r\n  margin-top: 0;\r\n  width: var(--slider-thumb-size);\r\n  height: var(--slider-thumb-size);\r\n  box-sizing: border-box;\r\n  border: solid 1px  var(--slider-border-color);\r\n  border-radius: 2em;\r\n  background: #ddd;\r\n  cursor: pointer;\r\n}\r\ninput[type='range'][_ngcontent-%COMP%]::-ms-tooltip {\r\n  display: none;\r\n}\r\n.tab[_ngcontent-%COMP%] {\r\n  padding : 5px;\r\n  -webkit-user-select: none;\r\n          user-select: none;\r\n}\r\n.tab[_ngcontent-%COMP%] {\r\n  padding : 0px;\r\n  border: solid 1px #555;\r\n  border-radius: 0.3em;\r\n  overflow: hidden;\r\n\r\n  display: flex;\r\n  flex-flow:  row nowrap;\r\n  justify-content: space-around;\r\n  align-items: stretch;\r\n\r\n  text-align: center;\r\n\r\n  margin: 0px; \r\n  max-width: 500px;\r\n\r\n  background-color: rgba(240,218,189, 0.9);\r\n}\r\n.tab[_ngcontent-%COMP%]   label[_ngcontent-%COMP%] {\r\n  display: inline-block;\r\n  flex: 1 0 auto;\r\n  flex-grow: 1;\r\n}\r\n.tab[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:hover {\r\n  background-color: #888;\r\n  color: #eee;\r\n  border-color: #555;\r\n}\r\n.tab[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:checked {\r\n  background: #555;\r\n  color: #CCC;\r\n}\r\n.tab[_ngcontent-%COMP%]   input[type=\"radio\"][_ngcontent-%COMP%] {\r\n  display: none;\r\n}\r\n.tab[_ngcontent-%COMP%]   input[type=\"radio\"][_ngcontent-%COMP%]    + div[_ngcontent-%COMP%] {\r\n  vertical-align: middle;\r\n  outline: 0;\r\n  font-size: 0.6em;\r\n  background-color: transparent;\r\n  color: #444; \r\n  \r\n  box-sizing: border-box;\r\n\r\n  margin: 0px; \r\n  padding: 2px 8px;\r\n\r\n  cursor: pointer;\r\n}\r\n.tab[_ngcontent-%COMP%]   input[type=\"radio\"][_ngcontent-%COMP%]    + div[_ngcontent-%COMP%]:hover {\r\n  background-color: #888;\r\n  color: #eee;\r\n  border-color: #555;\r\n}\r\n.tab[_ngcontent-%COMP%]   input[type=\"radio\"][_ngcontent-%COMP%]:checked    + div[_ngcontent-%COMP%] {\r\n  background: #555;\r\n  color: #CCC;\r\n}\r\n.tab-setting[_ngcontent-%COMP%] {\r\n  background-color: transparent;\r\n  color: #444; \r\n  border: solid 1px #555;\r\n  padding: 2px 8px;\r\n  border-radius: 5px;\r\n  cursor: pointer;\r\n}\r\n.tab-setting[_ngcontent-%COMP%]:hover {\r\n  background-color: #888;\r\n  color: #eee;\r\n  border: solid 1px #555;\r\n}\r\n.small-font[_ngcontent-%COMP%] {\r\n  font-size: 12px;\r\n  vertical-align: middle;\r\n}\r\n.material-icons[_ngcontent-%COMP%] {\r\n  vertical-align: middle;\r\n  font-size: 1.0rem;\r\n}\r\n.table[_ngcontent-%COMP%] {\r\n  display: table;\r\n  width: 100%;\r\n}\r\n.table-cell[_ngcontent-%COMP%] {\r\n  display: table-cell;\r\n}\r\n.click-area[_ngcontent-%COMP%]{\r\n  border: 1px dotted #666;\r\n}\r\n.image-box[_ngcontent-%COMP%] {\r\n  padding: 0px;\r\n  width: 32px;\r\n  height: 32px;\r\n  max-width: 32px;\r\n  max-height: 32px;\r\n  vertical-align: top;\r\n}\r\n.image-box[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{\r\n  width: 100%;\r\n  height: 100%;\r\n  vertical-align: bottom;\r\n  object-fit: cover;\r\n  object-position: 50% 0%;\r\n}\r\n.inventory-object[_ngcontent-%COMP%] {\r\n  font-size: 14px;\r\n  display: inline-block;\r\n  vertical-align: text-top;\r\n}\r\n.object-name[_ngcontent-%COMP%] {\r\n  font-size: 0.8em;\r\n  font-weight: bold;\r\n  padding: 0 0.25em;\r\n}\r\n.object-tags-box[_ngcontent-%COMP%] {\r\n  display: table;\r\n  table-layout: fixed;\r\n}\r\n.object-tag[_ngcontent-%COMP%] {\r\n  display: inline-block;\r\n  padding: 0 0.25em;\r\n  vertical-align: middle;\r\n}\r\n.resource-tag[_ngcontent-%COMP%] {\r\n  text-align: center;\r\n  vertical-align: bottom;\r\n  overflow: hidden;\r\n  white-space: nowrap;\r\n}\r\n.resource-value[_ngcontent-%COMP%] {\r\n  font-weight: bold;\r\n  width: 4em;\r\n  text-align: right;\r\n  font-family: inherit;\r\n}\r\n.tag-name[_ngcontent-%COMP%] {\r\n  font-size: 0.8em;\r\n  text-align: left;\r\n  vertical-align: bottom;\r\n  min-width:1em;\r\n  max-width: 12em;\r\n  overflow: hidden;\r\n  white-space: nowrap;\r\n}\r\n.tag-value-box[_ngcontent-%COMP%]{\r\n  display: table-cell;\r\n  width: 10px;\r\n}\r\n.tag-slash[_ngcontent-%COMP%] {\r\n  font-size: 1.0em;\r\n  min-width: 0.1em;\r\n  max-width: 0.1em;\r\n  text-align: center;\r\n  font-family: inherit;\r\n}\r\n.tag-value[_ngcontent-%COMP%] {\r\n  font-size: 1.0em;\r\n  font-weight: bold;\r\n  width: 100%;\r\n  min-width: 1em;\r\n  max-width: 12em;\r\n  text-align: center;\r\n  font-family: inherit;\r\n}\r\n.flex-item[_ngcontent-%COMP%] {\r\n  margin: 5px 0px;\r\n  padding: 10px; \r\n  flex: 1 0 auto;\r\n  \r\n  box-sizing: border-box;\r\n  min-width: 25px;\r\n\r\n  background-color: rgba(234,201,157, 0.8);\r\n  background-color: rgba(240,218,189, 0.8);\r\n  color: #444;\r\n}\r\n.table[_ngcontent-%COMP%] {\r\n  display:table;\r\n  width :100%;\r\n  box-sizing: border-box;\r\n  \r\n}\r\n.table-row[_ngcontent-%COMP%] {\r\n  display:table-row;\r\n  box-sizing: border-box;\r\n}\r\n.table-row[_ngcontent-%COMP%]    > div[_ngcontent-%COMP%] {\r\n  display:table-cell;\r\n  border:1px solid #FFF;\r\n  vertical-align: top;\r\n  box-sizing: border-box;\r\n}\r\n.sticky-top-left[_ngcontent-%COMP%] {\r\n  flex: 1;\r\n  max-width: 21em;\r\n  height: calc(100% - 11px);\r\n  overflow-y: scroll;\r\n  background-color: rgba(240,218,189, 0.8);\r\n  border-top:1px dotted #666;\r\n  padding:5px 5px;\r\n  margin-top: 0;\r\n}\r\n.controller-right[_ngcontent-%COMP%] {\r\n  flex: 1;\r\n  height: 100%;\r\n  overflow-y: scroll;\r\n}\r\n.tab-setting[_ngcontent-%COMP%] {\r\n  background-color: transparent;\r\n  color: #444; \r\n  border: solid 1px #555;\r\n  padding: 2px 8px;\r\n  border-radius: 5px;\r\n  cursor: pointer;\r\n}\r\n.tab-setting[_ngcontent-%COMP%]:hover {\r\n  background-color: #888;\r\n  color: #eee;\r\n  border: solid 1px #555;\r\n}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJlbW90ZS1jb250cm9sbGVyLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxXQUFXO0VBQ1gsa0JBQWtCO0VBQ2xCLFdBQVc7RUFDWCx1Q0FBdUM7QUFDekM7QUFDQTtBQUNBLFdBQVc7RUFDVCxzQkFBc0I7RUFDdEIsNkZBQTZGO0VBQzdGLFdBQVc7RUFDWCxZQUFZO0FBQ2Q7QUFFQTtFQUNFLGFBQWE7RUFDYixtQkFBbUI7RUFDbkIsWUFBWTtBQUNkO0FBRUE7RUFDRSxhQUFhO0VBQ2Isc0JBQXNCO0FBQ3hCO0FBRUE7RUFDRSx1QkFBdUI7RUFDdkIseUJBQWlCO1VBQWpCLGlCQUFpQjtBQUNuQjtBQUVBO0VBQ0UscUJBQXFCO0VBQ3JCLGtCQUFrQjtBQUNwQjtBQUVBO0VBQ0UsYUFBYTtBQUNmO0FBRUE7RUFDRSxxQkFBcUI7RUFDckIsc0JBQXNCO0VBQ3RCLFVBQVU7RUFDVixjQUFjO0VBQ2QsNkJBQTZCO0VBQzdCLFdBQVc7RUFDWCxzQkFBc0I7RUFDdEIsZ0JBQWdCO0VBQ2hCLFdBQVc7RUFDWCxvQkFBb0I7RUFDcEIsZUFBZTtBQUNqQjtBQUVBO0VBQ0Usc0JBQXNCO0VBQ3RCLFdBQVc7RUFDWCxzQkFBc0I7QUFDeEI7QUFFQTtFQUNFLGdCQUFnQjtFQUNoQixXQUFXO0FBQ2I7QUFFQSxrQkFBa0I7QUFFbEI7RUFDRSx1QkFBdUI7RUFDdkIseUJBQWlCO1VBQWpCLGlCQUFpQjtBQUNuQjtBQUVBO0VBQ0UscUJBQXFCO0VBQ3JCLGtCQUFrQjtBQUNwQjtBQUVBO0VBQ0UsYUFBYTtBQUNmO0FBRUE7RUFDRSxxQkFBcUI7RUFDckIsc0JBQXNCO0VBQ3RCLFVBQVU7RUFDVixlQUFlO0VBQ2YsNkJBQTZCO0VBQzdCLFdBQVc7RUFDWCxzQkFBc0I7RUFDdEIsZ0JBQWdCO0VBQ2hCLFdBQVc7RUFDWCxvQkFBb0I7RUFDcEIsZUFBZTtBQUNqQjtBQUVBO0VBQ0Usc0JBQXNCO0VBQ3RCLFdBQVc7RUFDWCxzQkFBc0I7QUFDeEI7QUFFQTtFQUNFLGdCQUFnQjtFQUNoQixXQUFXO0FBQ2I7QUFDQSxrQkFBa0I7QUFHbEI7RUFDRSxrQkFBa0I7RUFDbEIsU0FBUztFQUNULFFBQVE7QUFDVjtBQUVBLEdBQUc7QUFDSDtFQUNFLFdBQVc7QUFDYjtBQUVBO0VBQ0UsNkJBQTZCO0VBQzdCLGtDQUFrQztFQUNsQyxlQUFlO0VBQ2YsWUFBWTtFQUNaLG1CQUFtQjtFQUNuQixzQkFBc0I7O0VBRXRCLDhCQUE4QjtBQUNoQztBQUNBO0VBQ0UsWUFBWTtFQUNaLHVCQUF1QjtFQUN2QiwyQkFBMkI7QUFDN0I7QUFFQTtFQUNFLGtCQUFrQjtFQUNsQixTQUFTO0VBQ1QsZ0JBQWdCO0VBQ2hCLGFBQWE7RUFDYixnQkFBZ0I7RUFDaEIsZ0JBQWdCO0VBQ2hCLGNBQWM7RUFDZCxzQkFBc0I7RUFDdEIsbUJBQW1CO0FBQ3JCO0FBRUE7RUFDRSxnQkFBZ0I7RUFDaEIsWUFBWTtFQUNaLGtCQUFrQjtFQUNsQixhQUFhO0VBQ2IsV0FBVztFQUNYLFlBQVk7RUFDWixzQkFBc0I7QUFDeEI7QUFFQTtFQUNFLGdCQUFnQjtBQUNsQjtBQUVBO0VBQ0UsZ0JBQWdCO0FBQ2xCO0FBRUE7RUFDRSwwQkFBMEI7QUFDNUI7QUFFQTtFQUNFLDZCQUE2QjtBQUMvQjtBQUVBO0VBQ0UsaUNBQWlDLEVBQUUsU0FBUztFQUM1Qyx5QkFBeUIsRUFBRSxRQUFRO0VBQ25DLDJCQUEyQjtFQUMzQixzQkFBc0I7RUFDdEIsMEJBQTBCO0VBQzFCLHNDQUFzQztFQUN0QyxxREFBcUQ7RUFDckQsd0ZBQXdGO0VBQ3hGLFNBQVM7RUFDVCxVQUFVO0VBQ1YsdUJBQXVCO0VBQ3ZCLDZCQUE2QjtFQUM3QixVQUFVO0VBQ1Ysd0JBQWdCO0tBQWhCLHFCQUFnQjtVQUFoQixnQkFBZ0I7QUFDbEI7QUFFQTtFQUNFLHdCQUF3QjtBQUMxQjtBQUVBO0VBQ0Usc0JBQXNCO0VBQ3RCLGdEQUFnRDtFQUNoRCxtREFBbUQ7RUFDbkQsbUNBQW1DO0VBQ25DLDRCQUE0QjtFQUM1QixxQ0FBcUM7QUFDdkM7QUFFQTtFQUNFLG9JQUFvSTtFQUNwSSxlQUFlO0FBQ2pCO0FBRUE7RUFDRSxzQkFBc0I7RUFDdEIsNENBQTRDO0VBQzVDLG1DQUFtQztFQUNuQyw0QkFBNEI7RUFDNUIscUNBQXFDO0FBQ3ZDO0FBRUE7RUFDRSxzQkFBc0I7RUFDdEIsNENBQTRDO0VBQzVDLG1DQUFtQztFQUNuQyw0QkFBNEI7RUFDNUIscUNBQXFDO0FBQ3ZDO0FBRUE7RUFDRSw0QkFBNEI7RUFDNUIsb0NBQW9DO0VBQ3BDLG1DQUFtQztBQUNyQztBQUVBO0VBQ0UsNEJBQTRCO0VBQzVCLG9DQUFvQztFQUNwQyxtQ0FBbUM7QUFDckM7QUFFQTtFQUNFLDZFQUE2RTtFQUM3RSwrQkFBK0I7RUFDL0IsZ0NBQWdDO0VBQ2hDLHNCQUFzQjtFQUN0Qiw0Q0FBNEM7RUFDNUMsa0JBQWtCO0VBQ2xCLGdCQUFnQjtFQUNoQixlQUFlO0FBQ2pCO0FBRUE7RUFDRSwrQkFBK0I7RUFDL0IsZ0NBQWdDO0VBQ2hDLHNCQUFzQjtFQUN0Qiw0Q0FBNEM7RUFDNUMsa0JBQWtCO0VBQ2xCLGdCQUFnQjtFQUNoQixlQUFlO0FBQ2pCO0FBRUE7RUFDRSxhQUFhO0VBQ2IsK0JBQStCO0VBQy9CLGdDQUFnQztFQUNoQyxzQkFBc0I7RUFDdEIsNkNBQTZDO0VBQzdDLGtCQUFrQjtFQUNsQixnQkFBZ0I7RUFDaEIsZUFBZTtBQUNqQjtBQUVBO0VBQ0UsYUFBYTtBQUNmO0FBRUE7RUFDRSxhQUFhO0VBQ2IseUJBQWlCO1VBQWpCLGlCQUFpQjtBQUNuQjtBQUVBO0VBQ0UsYUFBYTtFQUNiLHNCQUFzQjtFQUN0QixvQkFBb0I7RUFDcEIsZ0JBQWdCOztFQUVoQixhQUFhO0VBQ2Isc0JBQXNCO0VBQ3RCLDZCQUE2QjtFQUM3QixvQkFBb0I7O0VBRXBCLGtCQUFrQjs7RUFFbEIsV0FBVztFQUNYLGdCQUFnQjs7RUFFaEIsd0NBQXdDO0FBQzFDO0FBRUE7RUFDRSxxQkFBcUI7RUFDckIsY0FBYztFQUNkLFlBQVk7QUFDZDtBQUVBO0VBQ0Usc0JBQXNCO0VBQ3RCLFdBQVc7RUFDWCxrQkFBa0I7QUFDcEI7QUFFQTtFQUNFLGdCQUFnQjtFQUNoQixXQUFXO0FBQ2I7QUFFQTtFQUNFLGFBQWE7QUFDZjtBQUVBO0VBQ0Usc0JBQXNCO0VBQ3RCLFVBQVU7RUFDVixnQkFBZ0I7RUFDaEIsNkJBQTZCO0VBQzdCLFdBQVc7O0VBRVgsc0JBQXNCOztFQUV0QixXQUFXO0VBQ1gsZ0JBQWdCOztFQUVoQixlQUFlO0FBQ2pCO0FBRUE7RUFDRSxzQkFBc0I7RUFDdEIsV0FBVztFQUNYLGtCQUFrQjtBQUNwQjtBQUVBO0VBQ0UsZ0JBQWdCO0VBQ2hCLFdBQVc7QUFDYjtBQUVBO0VBQ0UsNkJBQTZCO0VBQzdCLFdBQVc7RUFDWCxzQkFBc0I7RUFDdEIsZ0JBQWdCO0VBQ2hCLGtCQUFrQjtFQUNsQixlQUFlO0FBQ2pCO0FBRUE7RUFDRSxzQkFBc0I7RUFDdEIsV0FBVztFQUNYLHNCQUFzQjtBQUN4QjtBQUVBO0VBQ0UsZUFBZTtFQUNmLHNCQUFzQjtBQUN4QjtBQUVBO0VBQ0Usc0JBQXNCO0VBQ3RCLGlCQUFpQjtBQUNuQjtBQUVBO0VBQ0UsY0FBYztFQUNkLFdBQVc7QUFDYjtBQUdBO0VBQ0UsbUJBQW1CO0FBQ3JCO0FBRUE7RUFDRSx1QkFBdUI7QUFDekI7QUFFQTtFQUNFLFlBQVk7RUFDWixXQUFXO0VBQ1gsWUFBWTtFQUNaLGVBQWU7RUFDZixnQkFBZ0I7RUFDaEIsbUJBQW1CO0FBQ3JCO0FBRUE7RUFDRSxXQUFXO0VBQ1gsWUFBWTtFQUNaLHNCQUFzQjtFQUN0QixpQkFBaUI7RUFDakIsdUJBQXVCO0FBQ3pCO0FBRUE7RUFDRSxlQUFlO0VBQ2YscUJBQXFCO0VBQ3JCLHdCQUF3QjtBQUMxQjtBQUVBO0VBQ0UsZ0JBQWdCO0VBQ2hCLGlCQUFpQjtFQUNqQixpQkFBaUI7QUFDbkI7QUFFQTtFQUNFLGNBQWM7RUFDZCxtQkFBbUI7QUFDckI7QUFFQTtFQUNFLHFCQUFxQjtFQUNyQixpQkFBaUI7RUFDakIsc0JBQXNCO0FBQ3hCO0FBRUE7RUFDRSxrQkFBa0I7RUFDbEIsc0JBQXNCO0VBQ3RCLGdCQUFnQjtFQUNoQixtQkFBbUI7QUFDckI7QUFFQTtFQUNFLGlCQUFpQjtFQUNqQixVQUFVO0VBQ1YsaUJBQWlCO0VBQ2pCLG9CQUFvQjtBQUN0QjtBQUVBO0VBQ0UsZ0JBQWdCO0VBQ2hCLGdCQUFnQjtFQUNoQixzQkFBc0I7RUFDdEIsYUFBYTtFQUNiLGVBQWU7RUFDZixnQkFBZ0I7RUFDaEIsbUJBQW1CO0FBQ3JCO0FBRUE7RUFDRSxtQkFBbUI7RUFDbkIsV0FBVztBQUNiO0FBRUE7RUFDRSxnQkFBZ0I7RUFDaEIsZ0JBQWdCO0VBQ2hCLGdCQUFnQjtFQUNoQixrQkFBa0I7RUFDbEIsb0JBQW9CO0FBQ3RCO0FBR0E7RUFDRSxnQkFBZ0I7RUFDaEIsaUJBQWlCO0VBQ2pCLFdBQVc7RUFDWCxjQUFjO0VBQ2QsZUFBZTtFQUNmLGtCQUFrQjtFQUNsQixvQkFBb0I7QUFDdEI7QUFFQTtFQUNFLGVBQWU7RUFDZixhQUFhLEVBQ1csV0FBVztFQUNuQyxjQUFjO0VBQ2QsMEJBQTBCO0VBQzFCLHNCQUFzQjtFQUN0QixlQUFlOztFQUVmLHdDQUF3QztFQUN4Qyx3Q0FBd0M7RUFDeEMsV0FBVztBQUNiO0FBRUE7RUFDRSxhQUFhO0VBQ2IsV0FBVztFQUNYLHNCQUFzQjtFQUN0Qiw0QkFBNEI7QUFDOUI7QUFDQTtFQUNFLGlCQUFpQjtFQUNqQixzQkFBc0I7QUFDeEI7QUFDQTtFQUNFLGtCQUFrQjtFQUNsQixxQkFBcUI7RUFDckIsbUJBQW1CO0VBQ25CLHNCQUFzQjtBQUN4QjtBQUVBO0VBQ0UsT0FBTztFQUNQLGVBQWU7RUFDZix5QkFBeUI7RUFDekIsa0JBQWtCO0VBQ2xCLHdDQUF3QztFQUN4QywwQkFBMEI7RUFDMUIsZUFBZTtFQUNmLGFBQWE7QUFDZjtBQUVBO0VBQ0UsT0FBTztFQUNQLFlBQVk7RUFDWixrQkFBa0I7QUFDcEI7QUFFQTtFQUNFLDZCQUE2QjtFQUM3QixXQUFXO0VBQ1gsc0JBQXNCO0VBQ3RCLGdCQUFnQjtFQUNoQixrQkFBa0I7RUFDbEIsZUFBZTtBQUNqQjtBQUVBO0VBQ0Usc0JBQXNCO0VBQ3RCLFdBQVc7RUFDWCxzQkFBc0I7QUFDeEIiLCJmaWxlIjoicmVtb3RlLWNvbnRyb2xsZXIuY29tcG9uZW50LmNzcyIsInNvdXJjZXNDb250ZW50IjpbIi5lZGl0LWluZm8ge1xyXG4gIHdpZHRoOiAxMDAlO1xyXG4gIHRleHQtYWxpZ246IGNlbnRlcjtcclxuICBjb2xvcjogI0NDQztcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDMwLCAzMCwgMzAsIDAuOCk7XHJcbn1cclxuLnBhbGV0dGUge1xyXG4vKi5pbnB1dCB7Ki9cclxuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xyXG4gIGZvbnQtZmFtaWx5OiAtYXBwbGUtc3lzdGVtLCBCbGlua01hY1N5c3RlbUZvbnQsIFwiSGVsdmV0aWNhIE5ldWVcIiwgVmVyZGFuYSwgTWVpcnlvLCBzYW5zLXNlcmlmO1xyXG4gIHdpZHRoOiAxMDAlO1xyXG4gIGhlaWdodDogMTAwJTtcclxufVxyXG5cclxuLnJlbW90ZS1jb250cm9sbGVyLXdyYXBwZXIge1xyXG4gIGRpc3BsYXk6IGZsZXg7XHJcbiAgZmxleC1kaXJlY3Rpb246IHJvdztcclxuICBoZWlnaHQ6IDEwMCU7XHJcbn1cclxuXHJcbi5mbGV4LWNvbnRhaW5lciB7XHJcbiAgZGlzcGxheTogZmxleDtcclxuICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xyXG59XHJcblxyXG4uY2hhdC10YWIge1xyXG4gIHBhZGRpbmcgOiAwIDVweCA1cHggNXB4O1xyXG4gIHVzZXItc2VsZWN0OiBub25lO1xyXG59XHJcblxyXG4uY2hhdC10YWIgbGFiZWwge1xyXG4gIGRpc3BsYXk6IGlubGluZS1ibG9jaztcclxuICBwb3NpdGlvbjogcmVsYXRpdmU7XHJcbn1cclxuXHJcbi5jaGF0LXRhYiBpbnB1dFt0eXBlPVwicmFkaW9cIl0ge1xyXG4gIGRpc3BsYXk6IG5vbmU7XHJcbn1cclxuXHJcbi5jaGF0LXRhYiBpbnB1dFt0eXBlPVwicmFkaW9cIl0gKyBkaXYge1xyXG4gIGRpc3BsYXk6IGlubGluZS1ibG9jaztcclxuICB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlO1xyXG4gIG91dGxpbmU6IDA7XHJcbiAgZm9udC1zaXplOiA4cHg7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogdHJhbnNwYXJlbnQ7XHJcbiAgY29sb3I6ICM0NDQ7IFxyXG4gIGJvcmRlcjogc29saWQgMXB4ICM1NTU7XHJcbiAgcGFkZGluZzogMnB4IDhweDtcclxuICBtYXJnaW46IDJweDtcclxuICBib3JkZXItcmFkaXVzOiAxMDBweDtcclxuICBjdXJzb3I6IHBvaW50ZXI7XHJcbn1cclxuXHJcbi5jaGF0LXRhYiBpbnB1dFt0eXBlPVwicmFkaW9cIl0gKyBkaXY6aG92ZXIge1xyXG4gIGJhY2tncm91bmQtY29sb3I6ICM4ODg7XHJcbiAgY29sb3I6ICNlZWU7XHJcbiAgYm9yZGVyOiBzb2xpZCAxcHggIzU1NTtcclxufVxyXG5cclxuLmNoYXQtdGFiIGlucHV0W3R5cGU9XCJyYWRpb1wiXTpjaGVja2VkICsgZGl2IHtcclxuICBiYWNrZ3JvdW5kOiAjNTU1O1xyXG4gIGNvbG9yOiAjQ0NDO1xyXG59XHJcblxyXG4vKi0tLS0tLS0tLS0tLS0tLSovXHJcblxyXG4uY29udHJvbGxlciB7XHJcbiAgcGFkZGluZyA6IDAgNXB4IDVweCA1cHg7XHJcbiAgdXNlci1zZWxlY3Q6IG5vbmU7XHJcbn1cclxuXHJcbi5jb250cm9sbGVyIGxhYmVsIHtcclxuICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XHJcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xyXG59XHJcblxyXG4uY29udHJvbGxlciBpbnB1dFt0eXBlPVwicmFkaW9cIl0ge1xyXG4gIGRpc3BsYXk6IG5vbmU7XHJcbn1cclxuXHJcbi5jb250cm9sbGVyIGlucHV0W3R5cGU9XCJyYWRpb1wiXSArIGRpdiB7XHJcbiAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xyXG4gIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7XHJcbiAgb3V0bGluZTogMDtcclxuICBmb250LXNpemU6IDEycHg7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogdHJhbnNwYXJlbnQ7XHJcbiAgY29sb3I6ICM0NDQ7IFxyXG4gIGJvcmRlcjogc29saWQgMXB4ICM1NTU7XHJcbiAgcGFkZGluZzogMnB4IDhweDtcclxuICBtYXJnaW46IDJweDtcclxuICBib3JkZXItcmFkaXVzOiAxMDBweDtcclxuICBjdXJzb3I6IHBvaW50ZXI7XHJcbn1cclxuXHJcbi5jb250cm9sbGVyIGlucHV0W3R5cGU9XCJyYWRpb1wiXSArIGRpdjpob3ZlciB7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogIzg4ODtcclxuICBjb2xvcjogI2VlZTtcclxuICBib3JkZXI6IHNvbGlkIDFweCAjNTU1O1xyXG59XHJcblxyXG4uY29udHJvbGxlciBpbnB1dFt0eXBlPVwicmFkaW9cIl06Y2hlY2tlZCArIGRpdiB7XHJcbiAgYmFja2dyb3VuZDogIzU1NTtcclxuICBjb2xvcjogI0NDQztcclxufVxyXG4vKi0tLS0tLS0tLS0tLS0tLSovXHJcblxyXG5cclxuLmJhZGdlIHtcclxuICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgdG9wOiAtNHB4O1xyXG4gIHJpZ2h0OiAwO1xyXG59XHJcblxyXG4vKiovXHJcbi5jb21wb25lbnQge1xyXG4gIHdpZHRoOiAxMDAlO1xyXG59XHJcblxyXG4uYm94IHtcclxuICBib3JkZXI6IHRyYW5zcGFyZW50IDJweCBzb2xpZDtcclxuICBib3JkZXItbGVmdDogdHJhbnNwYXJlbnQgNnB4IHNvbGlkO1xyXG4gIG1hcmdpbi10b3A6IDJweDtcclxuICBwYWRkaW5nOiAycHg7XHJcbiAgcGFkZGluZy1ib3R0b206IDNweDtcclxuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xyXG5cclxuICBib3JkZXItYm90dG9tOiAxcHggZG90dGVkICM2NjY7XHJcbn1cclxuLnNlbGVjdGVkIHtcclxuICBwYWRkaW5nOiAycHg7XHJcbiAgYm9yZGVyOiAycHggZG90dGVkICM2NjY7XHJcbiAgYm9yZGVyLWxlZnQ6IDZweCBzb2xpZCAjNDQ0O1xyXG59XHJcblxyXG4uaGlkZGVuLXNwYWNlciB7XHJcbiAgdmlzaWJpbGl0eTogaGlkZGVuO1xyXG4gIGhlaWdodDogMDtcclxuICBmb250LXNpemU6IDEuMGVtO1xyXG4gIG1pbi13aWR0aDoxZW07IFxyXG4gIG1heC13aWR0aCA6IDEyZW07XHJcbiAgb3ZlcmZsb3c6IGhpZGRlbjtcclxuICBwYWRkaW5nOiAwIDJweDtcclxuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xyXG4gIHdoaXRlLXNwYWNlOiBub3dyYXA7XHJcbn1cclxuXHJcbi5pbnB1dCB7XHJcbiAgYmFja2dyb3VuZDogbm9uZTtcclxuICBib3JkZXI6IG5vbmU7XHJcbiAgYm9yZGVyLXJhZGl1czogMnB4O1xyXG4gIG91dGxpbmU6IG5vbmU7XHJcbiAgY29sb3I6ICM0NDQ7XHJcbiAgcGFkZGluZzogMnB4O1xyXG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XHJcbn1cclxuXHJcbi5pbnB1dDpob3ZlciB7XHJcbiAgYmFja2dyb3VuZDogI0VFRTtcclxufVxyXG5cclxuLmlucHV0OmZvY3VzIHtcclxuICBiYWNrZ3JvdW5kOiAjRkZGO1xyXG59XHJcblxyXG5pbnB1dFt0eXBlPW51bWJlcl0ge1xyXG4gIC1tb3otYXBwZWFyYW5jZTogdGV4dGZpZWxkO1xyXG59XHJcblxyXG5pbnB1dFt0eXBlPW51bWJlcl06aG92ZXIsIGlucHV0W3R5cGU9bnVtYmVyXTpmb2N1cyB7XHJcbiAgLW1vei1hcHBlYXJhbmNlOiBudW1iZXItaW5wdXQ7XHJcbn1cclxuXHJcbmlucHV0W3R5cGU9J3JhbmdlJ10ge1xyXG4gIC0tc2xpZGVyLXRyYWNrLWNvbG9yOiB0cmFuc3BhcmVudDsgLyogI2NjYyAqL1xyXG4gIC0tc2xpZGVyLWZpbGwtY29sb3I6ICM1NTU7IC8qIzc3NyAqL1xyXG4gIC0tc2xpZGVyLWJvcmRlci1jb2xvcjogIzc3NztcclxuICAtLXNsaWRlci1oZWlnaHQ6IDAuOGVtO1xyXG4gIC0tc2xpZGVyLXRodW1iLXNpemU6IDEuMGVtO1xyXG4gIC0tcmFuZ2U6IGNhbGModmFyKC0tbWF4KSAtIHZhcigtLW1pbikpO1xyXG4gIC0tcmF0aW86IGNhbGMoKHZhcigtLXZhbCkgLSB2YXIoLS1taW4pKS92YXIoLS1yYW5nZSkpO1xyXG4gIC0tc3g6IGNhbGMoLjUqdmFyKC0tc2xpZGVyLXRodW1iLXNpemUpICsgdmFyKC0tcmF0aW8pKigxMDAlIC0gdmFyKC0tc2xpZGVyLXRodW1iLXNpemUpKSk7XHJcbiAgbWFyZ2luOiAwO1xyXG4gIHBhZGRpbmc6IDA7XHJcbiAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7XHJcbiAgZm9udDogMWVtLzEgYXJpYWwsIHNhbnMtc2VyaWY7XHJcbiAgb3V0bGluZTogMDtcclxuICBhcHBlYXJhbmNlOiBub25lO1xyXG59XHJcblxyXG5pbnB1dFt0eXBlPSdyYW5nZSddLCBpbnB1dFt0eXBlPSdyYW5nZSddOjotd2Via2l0LXNsaWRlci10aHVtYiB7XHJcbiAgLXdlYmtpdC1hcHBlYXJhbmNlOiBub25lO1xyXG59XHJcblxyXG5pbnB1dFt0eXBlPSdyYW5nZSddOjotd2Via2l0LXNsaWRlci1ydW5uYWJsZS10cmFjayB7XHJcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcclxuICBib3JkZXItdG9wOiBzb2xpZCAxcHggdmFyKC0tc2xpZGVyLWJvcmRlci1jb2xvcik7XHJcbiAgYm9yZGVyLWJvdHRvbTogc29saWQgMXB4IHZhcigtLXNsaWRlci1ib3JkZXItY29sb3IpO1xyXG4gIGJvcmRlci1yYWRpdXM6IHZhcigtLXNsaWRlci1oZWlnaHQpO1xyXG4gIGhlaWdodDogdmFyKC0tc2xpZGVyLWhlaWdodCk7XHJcbiAgYmFja2dyb3VuZDogdmFyKC0tc2xpZGVyLXRyYWNrLWNvbG9yKTtcclxufVxyXG5cclxuaW5wdXRbdHlwZT0ncmFuZ2UnXTo6LXdlYmtpdC1zbGlkZXItcnVubmFibGUtdHJhY2sge1xyXG4gIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCh2YXIoLS1zbGlkZXItZmlsbC1jb2xvciksIHZhcigtLXNsaWRlci1maWxsLWNvbG9yKSkgMC92YXIoLS1zeCkgMTAwJSBuby1yZXBlYXQgdmFyKC0tc2xpZGVyLXRyYWNrLWNvbG9yKTtcclxuICBjdXJzb3I6IHBvaW50ZXI7XHJcbn1cclxuXHJcbmlucHV0W3R5cGU9J3JhbmdlJ106Oi1tb3otcmFuZ2UtdHJhY2sge1xyXG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XHJcbiAgYm9yZGVyOiBzb2xpZCAxcHggdmFyKC0tc2xpZGVyLWJvcmRlci1jb2xvcik7XHJcbiAgYm9yZGVyLXJhZGl1czogdmFyKC0tc2xpZGVyLWhlaWdodCk7XHJcbiAgaGVpZ2h0OiB2YXIoLS1zbGlkZXItaGVpZ2h0KTtcclxuICBiYWNrZ3JvdW5kOiB2YXIoLS1zbGlkZXItdHJhY2stY29sb3IpO1xyXG59XHJcblxyXG5pbnB1dFt0eXBlPSdyYW5nZSddOjotbXMtdHJhY2sge1xyXG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XHJcbiAgYm9yZGVyOiBzb2xpZCAxcHggdmFyKC0tc2xpZGVyLWJvcmRlci1jb2xvcik7XHJcbiAgYm9yZGVyLXJhZGl1czogdmFyKC0tc2xpZGVyLWhlaWdodCk7XHJcbiAgaGVpZ2h0OiB2YXIoLS1zbGlkZXItaGVpZ2h0KTtcclxuICBiYWNrZ3JvdW5kOiB2YXIoLS1zbGlkZXItdHJhY2stY29sb3IpO1xyXG59XHJcblxyXG5pbnB1dFt0eXBlPSdyYW5nZSddOjotbW96LXJhbmdlLXByb2dyZXNzIHtcclxuICBoZWlnaHQ6IHZhcigtLXNsaWRlci1oZWlnaHQpO1xyXG4gIGJhY2tncm91bmQ6IHZhcigtLXNsaWRlci1maWxsLWNvbG9yKTtcclxuICBib3JkZXItcmFkaXVzOiB2YXIoLS1zbGlkZXItaGVpZ2h0KTtcclxufVxyXG5cclxuaW5wdXRbdHlwZT0ncmFuZ2UnXTo6LW1zLWZpbGwtbG93ZXIge1xyXG4gIGhlaWdodDogdmFyKC0tc2xpZGVyLWhlaWdodCk7XHJcbiAgYmFja2dyb3VuZDogdmFyKC0tc2xpZGVyLWZpbGwtY29sb3IpO1xyXG4gIGJvcmRlci1yYWRpdXM6IHZhcigtLXNsaWRlci1oZWlnaHQpO1xyXG59XHJcblxyXG5pbnB1dFt0eXBlPSdyYW5nZSddOjotd2Via2l0LXNsaWRlci10aHVtYiB7XHJcbiAgbWFyZ2luLXRvcDogY2FsYygodmFyKC0tc2xpZGVyLWhlaWdodCkgLSB2YXIoLS1zbGlkZXItdGh1bWItc2l6ZSkpIC8gMiAtIDFweCk7XHJcbiAgd2lkdGg6IHZhcigtLXNsaWRlci10aHVtYi1zaXplKTtcclxuICBoZWlnaHQ6IHZhcigtLXNsaWRlci10aHVtYi1zaXplKTtcclxuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xyXG4gIGJvcmRlcjogc29saWQgMXB4IHZhcigtLXNsaWRlci1ib3JkZXItY29sb3IpO1xyXG4gIGJvcmRlci1yYWRpdXM6IDJlbTtcclxuICBiYWNrZ3JvdW5kOiAjZGRkO1xyXG4gIGN1cnNvcjogcG9pbnRlcjtcclxufVxyXG5cclxuaW5wdXRbdHlwZT0ncmFuZ2UnXTo6LW1vei1yYW5nZS10aHVtYiB7XHJcbiAgd2lkdGg6IHZhcigtLXNsaWRlci10aHVtYi1zaXplKTtcclxuICBoZWlnaHQ6IHZhcigtLXNsaWRlci10aHVtYi1zaXplKTtcclxuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xyXG4gIGJvcmRlcjogc29saWQgMXB4IHZhcigtLXNsaWRlci1ib3JkZXItY29sb3IpO1xyXG4gIGJvcmRlci1yYWRpdXM6IDJlbTtcclxuICBiYWNrZ3JvdW5kOiAjZGRkO1xyXG4gIGN1cnNvcjogcG9pbnRlcjtcclxufVxyXG5cclxuaW5wdXRbdHlwZT0ncmFuZ2UnXTo6LW1zLXRodW1iIHtcclxuICBtYXJnaW4tdG9wOiAwO1xyXG4gIHdpZHRoOiB2YXIoLS1zbGlkZXItdGh1bWItc2l6ZSk7XHJcbiAgaGVpZ2h0OiB2YXIoLS1zbGlkZXItdGh1bWItc2l6ZSk7XHJcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcclxuICBib3JkZXI6IHNvbGlkIDFweCAgdmFyKC0tc2xpZGVyLWJvcmRlci1jb2xvcik7XHJcbiAgYm9yZGVyLXJhZGl1czogMmVtO1xyXG4gIGJhY2tncm91bmQ6ICNkZGQ7XHJcbiAgY3Vyc29yOiBwb2ludGVyO1xyXG59XHJcblxyXG5pbnB1dFt0eXBlPSdyYW5nZSddOjotbXMtdG9vbHRpcCB7XHJcbiAgZGlzcGxheTogbm9uZTtcclxufVxyXG5cclxuLnRhYiB7XHJcbiAgcGFkZGluZyA6IDVweDtcclxuICB1c2VyLXNlbGVjdDogbm9uZTtcclxufVxyXG5cclxuLnRhYiB7XHJcbiAgcGFkZGluZyA6IDBweDtcclxuICBib3JkZXI6IHNvbGlkIDFweCAjNTU1O1xyXG4gIGJvcmRlci1yYWRpdXM6IDAuM2VtO1xyXG4gIG92ZXJmbG93OiBoaWRkZW47XHJcblxyXG4gIGRpc3BsYXk6IGZsZXg7XHJcbiAgZmxleC1mbG93OiAgcm93IG5vd3JhcDtcclxuICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWFyb3VuZDtcclxuICBhbGlnbi1pdGVtczogc3RyZXRjaDtcclxuXHJcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xyXG5cclxuICBtYXJnaW46IDBweDsgXHJcbiAgbWF4LXdpZHRoOiA1MDBweDtcclxuXHJcbiAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgyNDAsMjE4LDE4OSwgMC45KTtcclxufVxyXG5cclxuLnRhYiBsYWJlbCB7XHJcbiAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xyXG4gIGZsZXg6IDEgMCBhdXRvO1xyXG4gIGZsZXgtZ3JvdzogMTtcclxufVxyXG5cclxuLnRhYiBsYWJlbDpob3ZlciB7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogIzg4ODtcclxuICBjb2xvcjogI2VlZTtcclxuICBib3JkZXItY29sb3I6ICM1NTU7XHJcbn1cclxuXHJcbi50YWIgbGFiZWw6Y2hlY2tlZCB7XHJcbiAgYmFja2dyb3VuZDogIzU1NTtcclxuICBjb2xvcjogI0NDQztcclxufVxyXG5cclxuLnRhYiBpbnB1dFt0eXBlPVwicmFkaW9cIl0ge1xyXG4gIGRpc3BsYXk6IG5vbmU7XHJcbn1cclxuXHJcbi50YWIgaW5wdXRbdHlwZT1cInJhZGlvXCJdICsgZGl2IHtcclxuICB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlO1xyXG4gIG91dGxpbmU6IDA7XHJcbiAgZm9udC1zaXplOiAwLjZlbTtcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudDtcclxuICBjb2xvcjogIzQ0NDsgXHJcbiAgXHJcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcclxuXHJcbiAgbWFyZ2luOiAwcHg7IFxyXG4gIHBhZGRpbmc6IDJweCA4cHg7XHJcblxyXG4gIGN1cnNvcjogcG9pbnRlcjtcclxufVxyXG5cclxuLnRhYiBpbnB1dFt0eXBlPVwicmFkaW9cIl0gKyBkaXY6aG92ZXIge1xyXG4gIGJhY2tncm91bmQtY29sb3I6ICM4ODg7XHJcbiAgY29sb3I6ICNlZWU7XHJcbiAgYm9yZGVyLWNvbG9yOiAjNTU1O1xyXG59XHJcblxyXG4udGFiIGlucHV0W3R5cGU9XCJyYWRpb1wiXTpjaGVja2VkICsgZGl2IHtcclxuICBiYWNrZ3JvdW5kOiAjNTU1O1xyXG4gIGNvbG9yOiAjQ0NDO1xyXG59XHJcblxyXG4udGFiLXNldHRpbmcge1xyXG4gIGJhY2tncm91bmQtY29sb3I6IHRyYW5zcGFyZW50O1xyXG4gIGNvbG9yOiAjNDQ0OyBcclxuICBib3JkZXI6IHNvbGlkIDFweCAjNTU1O1xyXG4gIHBhZGRpbmc6IDJweCA4cHg7XHJcbiAgYm9yZGVyLXJhZGl1czogNXB4O1xyXG4gIGN1cnNvcjogcG9pbnRlcjtcclxufVxyXG5cclxuLnRhYi1zZXR0aW5nOmhvdmVyIHtcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiAjODg4O1xyXG4gIGNvbG9yOiAjZWVlO1xyXG4gIGJvcmRlcjogc29saWQgMXB4ICM1NTU7XHJcbn1cclxuXHJcbi5zbWFsbC1mb250IHtcclxuICBmb250LXNpemU6IDEycHg7XHJcbiAgdmVydGljYWwtYWxpZ246IG1pZGRsZTtcclxufVxyXG5cclxuLm1hdGVyaWFsLWljb25zIHtcclxuICB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlO1xyXG4gIGZvbnQtc2l6ZTogMS4wcmVtO1xyXG59XHJcblxyXG4udGFibGUge1xyXG4gIGRpc3BsYXk6IHRhYmxlO1xyXG4gIHdpZHRoOiAxMDAlO1xyXG59XHJcblxyXG5cclxuLnRhYmxlLWNlbGwge1xyXG4gIGRpc3BsYXk6IHRhYmxlLWNlbGw7XHJcbn1cclxuXHJcbi5jbGljay1hcmVhe1xyXG4gIGJvcmRlcjogMXB4IGRvdHRlZCAjNjY2O1xyXG59XHJcblxyXG4uaW1hZ2UtYm94IHtcclxuICBwYWRkaW5nOiAwcHg7XHJcbiAgd2lkdGg6IDMycHg7XHJcbiAgaGVpZ2h0OiAzMnB4O1xyXG4gIG1heC13aWR0aDogMzJweDtcclxuICBtYXgtaGVpZ2h0OiAzMnB4O1xyXG4gIHZlcnRpY2FsLWFsaWduOiB0b3A7XHJcbn1cclxuXHJcbi5pbWFnZS1ib3ggaW1ne1xyXG4gIHdpZHRoOiAxMDAlO1xyXG4gIGhlaWdodDogMTAwJTtcclxuICB2ZXJ0aWNhbC1hbGlnbjogYm90dG9tO1xyXG4gIG9iamVjdC1maXQ6IGNvdmVyO1xyXG4gIG9iamVjdC1wb3NpdGlvbjogNTAlIDAlO1xyXG59XHJcblxyXG4uaW52ZW50b3J5LW9iamVjdCB7XHJcbiAgZm9udC1zaXplOiAxNHB4O1xyXG4gIGRpc3BsYXk6IGlubGluZS1ibG9jaztcclxuICB2ZXJ0aWNhbC1hbGlnbjogdGV4dC10b3A7XHJcbn1cclxuXHJcbi5vYmplY3QtbmFtZSB7XHJcbiAgZm9udC1zaXplOiAwLjhlbTtcclxuICBmb250LXdlaWdodDogYm9sZDtcclxuICBwYWRkaW5nOiAwIDAuMjVlbTtcclxufVxyXG5cclxuLm9iamVjdC10YWdzLWJveCB7XHJcbiAgZGlzcGxheTogdGFibGU7XHJcbiAgdGFibGUtbGF5b3V0OiBmaXhlZDtcclxufVxyXG5cclxuLm9iamVjdC10YWcge1xyXG4gIGRpc3BsYXk6IGlubGluZS1ibG9jaztcclxuICBwYWRkaW5nOiAwIDAuMjVlbTtcclxuICB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlO1xyXG59XHJcblxyXG4ucmVzb3VyY2UtdGFnIHtcclxuICB0ZXh0LWFsaWduOiBjZW50ZXI7XHJcbiAgdmVydGljYWwtYWxpZ246IGJvdHRvbTtcclxuICBvdmVyZmxvdzogaGlkZGVuO1xyXG4gIHdoaXRlLXNwYWNlOiBub3dyYXA7XHJcbn1cclxuXHJcbi5yZXNvdXJjZS12YWx1ZSB7XHJcbiAgZm9udC13ZWlnaHQ6IGJvbGQ7XHJcbiAgd2lkdGg6IDRlbTtcclxuICB0ZXh0LWFsaWduOiByaWdodDtcclxuICBmb250LWZhbWlseTogaW5oZXJpdDtcclxufVxyXG5cclxuLnRhZy1uYW1lIHtcclxuICBmb250LXNpemU6IDAuOGVtO1xyXG4gIHRleHQtYWxpZ246IGxlZnQ7XHJcbiAgdmVydGljYWwtYWxpZ246IGJvdHRvbTtcclxuICBtaW4td2lkdGg6MWVtO1xyXG4gIG1heC13aWR0aDogMTJlbTtcclxuICBvdmVyZmxvdzogaGlkZGVuO1xyXG4gIHdoaXRlLXNwYWNlOiBub3dyYXA7XHJcbn1cclxuXHJcbi50YWctdmFsdWUtYm94e1xyXG4gIGRpc3BsYXk6IHRhYmxlLWNlbGw7XHJcbiAgd2lkdGg6IDEwcHg7XHJcbn1cclxuXHJcbi50YWctc2xhc2gge1xyXG4gIGZvbnQtc2l6ZTogMS4wZW07XHJcbiAgbWluLXdpZHRoOiAwLjFlbTtcclxuICBtYXgtd2lkdGg6IDAuMWVtO1xyXG4gIHRleHQtYWxpZ246IGNlbnRlcjtcclxuICBmb250LWZhbWlseTogaW5oZXJpdDtcclxufVxyXG5cclxuXHJcbi50YWctdmFsdWUge1xyXG4gIGZvbnQtc2l6ZTogMS4wZW07XHJcbiAgZm9udC13ZWlnaHQ6IGJvbGQ7XHJcbiAgd2lkdGg6IDEwMCU7XHJcbiAgbWluLXdpZHRoOiAxZW07XHJcbiAgbWF4LXdpZHRoOiAxMmVtO1xyXG4gIHRleHQtYWxpZ246IGNlbnRlcjtcclxuICBmb250LWZhbWlseTogaW5oZXJpdDtcclxufVxyXG5cclxuLmZsZXgtaXRlbSB7XHJcbiAgbWFyZ2luOiA1cHggMHB4O1xyXG4gIHBhZGRpbmc6IDEwcHg7XHJcbiAgLXdlYmtpdC1mbGV4OiAxIDAgYXV0bzsgLyogU2FmYXJpICovXHJcbiAgZmxleDogMSAwIGF1dG87XHJcbiAgLypib3JkZXI6IDFweCBzb2xpZCAjOTk5OyovXHJcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcclxuICBtaW4td2lkdGg6IDI1cHg7XHJcblxyXG4gIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMjM0LDIwMSwxNTcsIDAuOCk7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgyNDAsMjE4LDE4OSwgMC44KTtcclxuICBjb2xvcjogIzQ0NDtcclxufVxyXG5cclxuLnRhYmxlIHtcclxuICBkaXNwbGF5OnRhYmxlO1xyXG4gIHdpZHRoIDoxMDAlO1xyXG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XHJcbiAgLypib3JkZXI6MXB4IHNvbGlkICNGRkZGMDA7Ki9cclxufVxyXG4udGFibGUtcm93IHtcclxuICBkaXNwbGF5OnRhYmxlLXJvdztcclxuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xyXG59XHJcbi50YWJsZS1yb3cgPiBkaXYge1xyXG4gIGRpc3BsYXk6dGFibGUtY2VsbDtcclxuICBib3JkZXI6MXB4IHNvbGlkICNGRkY7XHJcbiAgdmVydGljYWwtYWxpZ246IHRvcDtcclxuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xyXG59XHJcblxyXG4uc3RpY2t5LXRvcC1sZWZ0IHtcclxuICBmbGV4OiAxO1xyXG4gIG1heC13aWR0aDogMjFlbTtcclxuICBoZWlnaHQ6IGNhbGMoMTAwJSAtIDExcHgpO1xyXG4gIG92ZXJmbG93LXk6IHNjcm9sbDtcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDI0MCwyMTgsMTg5LCAwLjgpO1xyXG4gIGJvcmRlci10b3A6MXB4IGRvdHRlZCAjNjY2O1xyXG4gIHBhZGRpbmc6NXB4IDVweDtcclxuICBtYXJnaW4tdG9wOiAwO1xyXG59XHJcblxyXG4uY29udHJvbGxlci1yaWdodCB7XHJcbiAgZmxleDogMTtcclxuICBoZWlnaHQ6IDEwMCU7XHJcbiAgb3ZlcmZsb3cteTogc2Nyb2xsO1xyXG59XHJcblxyXG4udGFiLXNldHRpbmcge1xyXG4gIGJhY2tncm91bmQtY29sb3I6IHRyYW5zcGFyZW50O1xyXG4gIGNvbG9yOiAjNDQ0OyBcclxuICBib3JkZXI6IHNvbGlkIDFweCAjNTU1O1xyXG4gIHBhZGRpbmc6IDJweCA4cHg7XHJcbiAgYm9yZGVyLXJhZGl1czogNXB4O1xyXG4gIGN1cnNvcjogcG9pbnRlcjtcclxufVxyXG5cclxuLnRhYi1zZXR0aW5nOmhvdmVyIHtcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiAjODg4O1xyXG4gIGNvbG9yOiAjZWVlO1xyXG4gIGJvcmRlcjogc29saWQgMXB4ICM1NTU7XHJcbn1cclxuIl19 */"] });
    return RemoteControllerComponent;
}());

/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵsetClassMetadata"](RemoteControllerComponent, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_1__["Component"],
        args: [{
                selector: 'remote-controller',
                templateUrl: './remote-controller.component.html',
                styleUrls: ['./remote-controller.component.css']
            }]
    }], function () { return [{ type: service_chat_message_service__WEBPACK_IMPORTED_MODULE_11__["ChatMessageService"] }, { type: service_panel_service__WEBPACK_IMPORTED_MODULE_12__["PanelService"] }, { type: _angular_core__WEBPACK_IMPORTED_MODULE_1__["ChangeDetectorRef"] }, { type: service_game_object_inventory_service__WEBPACK_IMPORTED_MODULE_13__["GameObjectInventoryService"] }, { type: service_context_menu_service__WEBPACK_IMPORTED_MODULE_14__["ContextMenuService"] }, { type: service_pointer_device_service__WEBPACK_IMPORTED_MODULE_15__["PointerDeviceService"] }]; }, { controllerInputComponent: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_1__["ViewChild"],
            args: ['controllerInput', { static: true }]
        }], chatPaletteElementRef: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_1__["ViewChild"],
            args: ['chatPalette']
        }], character: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_1__["Input"]
        }] }); })();


/***/ }),

/***/ "JQpJ":
/*!**********************************************************!*\
  !*** ./src/app/class/core/file-storage/image-storage.ts ***!
  \**********************************************************/
/*! exports provided: ImageStorage */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ImageStorage", function() { return ImageStorage; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "mrSG");
/* harmony import */ var _system__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../system */ "yNnI");
/* harmony import */ var _system_util_resettable_timeout__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../system/util/resettable-timeout */ "9ht1");
/* harmony import */ var _image_file__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./image-file */ "FjwV");




var ImageStorage = /** @class */ (function () {
    function ImageStorage() {
        this.imageHash = {};
        console.log('ImageStorage ready...');
    }
    Object.defineProperty(ImageStorage, "instance", {
        get: function () {
            if (!ImageStorage._instance)
                ImageStorage._instance = new ImageStorage();
            return ImageStorage._instance;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ImageStorage.prototype, "images", {
        get: function () {
            var images = [];
            for (var identifier in this.imageHash) {
                images.push(this.imageHash[identifier]);
            }
            return images;
        },
        enumerable: false,
        configurable: true
    });
    ImageStorage.prototype.destroy = function () {
        for (var identifier in this.imageHash) {
            this.delete(identifier);
        }
    };
    ImageStorage.prototype.addAsync = function (arg) {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function () {
            var image;
            return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"])(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, _image_file__WEBPACK_IMPORTED_MODULE_3__["ImageFile"].createAsync(arg)];
                    case 1:
                        image = _a.sent();
                        return [2 /*return*/, this._add(image)];
                }
            });
        });
    };
    ImageStorage.prototype.add = function (arg) {
        var image;
        if (typeof arg === 'string') {
            image = _image_file__WEBPACK_IMPORTED_MODULE_3__["ImageFile"].create(arg);
        }
        else if (arg instanceof _image_file__WEBPACK_IMPORTED_MODULE_3__["ImageFile"]) {
            image = arg;
        }
        else {
            if (this.update(arg))
                return this.imageHash[arg.identifier];
            image = _image_file__WEBPACK_IMPORTED_MODULE_3__["ImageFile"].create(arg);
        }
        return this._add(image);
    };
    ImageStorage.prototype._add = function (image) {
        if (_image_file__WEBPACK_IMPORTED_MODULE_3__["ImageState"].COMPLETE <= image.state)
            this.lazySynchronize(100);
        if (this.update(image))
            return this.imageHash[image.identifier];
        this.imageHash[image.identifier] = image;
        console.log('add Image: ' + image.identifier);
        return image;
    };
    ImageStorage.prototype.update = function (image) {
        var context;
        if (image instanceof _image_file__WEBPACK_IMPORTED_MODULE_3__["ImageFile"]) {
            context = image.toContext();
        }
        else {
            context = image;
        }
        var updatingImage = this.imageHash[image.identifier];
        if (updatingImage) {
            updatingImage.apply(image);
            return true;
        }
        return false;
    };
    ImageStorage.prototype.delete = function (identifier) {
        var deleteImage = this.imageHash[identifier];
        if (deleteImage) {
            deleteImage.destroy();
            delete this.imageHash[identifier];
            return true;
        }
        return false;
    };
    ImageStorage.prototype.get = function (identifier) {
        var image = this.imageHash[identifier];
        if (image)
            return image;
        return null;
    };
    ImageStorage.prototype.synchronize = function (peer) {
        if (this.lazyTimer)
            this.lazyTimer.stop();
        _system__WEBPACK_IMPORTED_MODULE_1__["EventSystem"].call('SYNCHRONIZE_FILE_LIST', this.getCatalog(), peer);
    };
    ImageStorage.prototype.lazySynchronize = function (ms, peer) {
        var _this = this;
        if (this.lazyTimer == null)
            this.lazyTimer = new _system_util_resettable_timeout__WEBPACK_IMPORTED_MODULE_2__["ResettableTimeout"](function () { return _this.synchronize(peer); }, ms);
        this.lazyTimer.reset(ms);
    };
    ImageStorage.prototype.getCatalog = function () {
        var e_1, _a;
        var catalog = [];
        try {
            for (var _b = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(this.images), _c = _b.next(); !_c.done; _c = _b.next()) {
                var image = _c.value;
                if (_image_file__WEBPACK_IMPORTED_MODULE_3__["ImageState"].COMPLETE <= image.state) {
                    catalog.push({ identifier: image.identifier, state: image.state });
                }
            }
        }
        catch (e_1_1) { e_1 = { error: e_1_1 }; }
        finally {
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            }
            finally { if (e_1) throw e_1.error; }
        }
        return catalog;
    };
    return ImageStorage;
}());



/***/ }),

/***/ "JUIv":
/*!***********************************!*\
  !*** ./src/app/class/dice-bot.ts ***!
  \***********************************/
/*! exports provided: DiceBot */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DiceBot", function() { return DiceBot; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "mrSG");
/* harmony import */ var bcdice_lib_loader_loader__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! bcdice/lib/loader/loader */ "LI4K");
/* harmony import */ var bcdice_lib_loader_loader__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(bcdice_lib_loader_loader__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./core/synchronize-object/decorator */ "1lIu");
/* harmony import */ var _core_synchronize_object_game_object__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./core/synchronize-object/game-object */ "xdgh");
/* harmony import */ var _game_character__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./game-character */ "M/aK");
/* harmony import */ var _core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./core/synchronize-object/object-store */ "hm7o");
/* harmony import */ var _core_system__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./core/system */ "yNnI");
/* harmony import */ var _core_system_util_promise_queue__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./core/system/util/promise-queue */ "w5+g");
/* harmony import */ var _core_system_util_string_util__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./core/system/util/string-util */ "baV6");
/* harmony import */ var _dice_table__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./dice-table */ "NjCw");
/* harmony import */ var _peer_cursor__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./peer-cursor */ "+UEV");
/* harmony import */ var _KariDice__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./KariDice */ "8qtv");
/* harmony import */ var _IdoDice__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./IdoDice */ "Hvx2");













// bcdice-js custom loader class
var WebpackLoader = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"])(WebpackLoader, _super);
    function WebpackLoader() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    WebpackLoader.prototype.dynamicImport = function (className) {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function () {
            return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"])(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, __webpack_require__("fesB")("./" + className)];
                    case 1:
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    return WebpackLoader;
}(bcdice_lib_loader_loader__WEBPACK_IMPORTED_MODULE_1___default.a));
var DiceBot = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"])(DiceBot, _super);
    function DiceBot() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    DiceBot_1 = DiceBot;
    DiceBot.getCustomGameSystemInfo = function (ststem) {
        var gameSystemInfo = {
            id: ststem.ID,
            name: ststem.NAME,
            className: ststem.ID,
            sortKey: ststem.SORT_KEY
        };
        return gameSystemInfo;
    };
    DiceBot.listAvailableGameSystems = function () {
        var diceBotInfos = DiceBot_1.loader.listAvailableGameSystems();
        diceBotInfos.push(this.getCustomGameSystemInfo(_KariDice__WEBPACK_IMPORTED_MODULE_11__["default"]));
        diceBotInfos.push(this.getCustomGameSystemInfo(_IdoDice__WEBPACK_IMPORTED_MODULE_12__["default"]));
        // 追加カスタムダイスは下記追記
        // diceBotInfos.push( getCustomGameSystemInfo( *** ));
        return diceBotInfos;
    };
    DiceBot.diceRollAsync = function (message, gameSystem) {
        return DiceBot_1.queue.add(function () {
            try {
                var result = gameSystem.eval(message);
                if (result) {
                    console.log('diceRoll!!!', result.text);
                    console.log('isSecret!!!', result.secret);
                    return {
                        result: gameSystem.ID + " : " + result.text,
                        isSecret: result.secret,
                    };
                }
            }
            catch (e) {
                console.error(e);
            }
            return { result: '', isSecret: false };
        });
    };
    /*
      static getDiceBotId(gameType: string): Promise<string> {
        return DiceBot.queue.add(async (resolve, reject) => {
          let id = '';
          try {
            const gameSystem = await DiceBot.loadGameSystemAsync(gameType);
            id = gameSystem.ID;
          } catch (e) {
            console.error(e);
          }
          resolve(id);
          return;
        });
      }
    */
    DiceBot.getHelpMessage = function (gameType) {
        var _this = this;
        return DiceBot_1.queue.add(function (resolve, reject) { return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(_this, void 0, void 0, function () {
            var help, gameSystem, e_1;
            return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"])(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        help = '';
                        _a.label = 1;
                    case 1:
                        _a.trys.push([1, 3, , 4]);
                        return [4 /*yield*/, DiceBot_1.loadGameSystemAsync(gameType)];
                    case 2:
                        gameSystem = _a.sent();
                        help = gameSystem.HELP_MESSAGE;
                        return [3 /*break*/, 4];
                    case 3:
                        e_1 = _a.sent();
                        console.error(e_1);
                        return [3 /*break*/, 4];
                    case 4:
                        resolve(help);
                        return [2 /*return*/];
                }
            });
        }); });
    };
    DiceBot.loadCustomGameSystem = function (gameType) {
        if (gameType == 'KariDice') {
            return _KariDice__WEBPACK_IMPORTED_MODULE_11__["default"];
        }
        if (gameType == 'IdoDice') {
            return _IdoDice__WEBPACK_IMPORTED_MODULE_12__["default"];
        }
        // 追加カスタムダイスは下記追記
        // if( gameType == '***') return ***;
        return null;
    };
    DiceBot.loadGameSystemAsync = function (gameType) {
        var _this = this;
        var id = this.diceBotInfos.some(function (info) { return info.id === gameType; })
            ? gameType
            : 'DiceBot';
        return new Promise(function (resolve) {
            var system = _this.loadCustomGameSystem(gameType);
            if (!system) {
                system = DiceBot_1.loader.dynamicLoad(id);
            }
            resolve(system);
        });
    };
    DiceBot.prototype.getDiceTables = function () {
        return _core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_5__["ObjectStore"].instance.getObjects(_dice_table__WEBPACK_IMPORTED_MODULE_9__["DiceTable"]);
    };
    // 繰り返しコマンドを除去し、sより後ろがCOMMAND_PATTERNにマッチするか確認
    DiceBot.prototype.checkSecretDiceCommand = function (gameSystem, chatText) {
        var text = _core_system_util_string_util__WEBPACK_IMPORTED_MODULE_8__["StringUtil"].toHalfWidth(chatText).toLowerCase();
        var nonRepeatText = text.replace(/^(\d+)?\s+/, 'repeat1 ').replace(/^x(\d+)?\s+/, 'repeat1 ').replace(/repeat(\d+)?\s+/, '');
        var regArray = /^s(.*)?/ig.exec(nonRepeatText);
        console.log('checkSecretDiceCommand:' + chatText + ' gameSystem.name:' + gameSystem.name);
        if (gameSystem.COMMAND_PATTERN) {
            return regArray && gameSystem.COMMAND_PATTERN.test(regArray[1]);
        }
        console.log('checkSecretDiceCommand:' + false);
        return false;
    };
    // GameObject Lifecycle
    DiceBot.prototype.onStoreAdded = function () {
        var _this = this;
        _super.prototype.onStoreAdded.call(this);
        _core_system__WEBPACK_IMPORTED_MODULE_6__["EventSystem"].register(this)
            .on('SEND_MESSAGE', function (event) { return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(_this, void 0, void 0, function () {
            var chatMessage, text, gameType, regArray, repeat, rollText, gameSystem, rollResult, e_2;
            return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"])(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        chatMessage = _core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_5__["ObjectStore"].instance.get(event.data.messageIdentifier);
                        if (!chatMessage || !chatMessage.isSendFromSelf || chatMessage.isSystem) {
                            return [2 /*return*/];
                        }
                        text = _core_system_util_string_util__WEBPACK_IMPORTED_MODULE_8__["StringUtil"].toHalfWidth(chatMessage.text);
                        gameType = chatMessage.tags ? chatMessage.tags[0] : '';
                        _a.label = 1;
                    case 1:
                        _a.trys.push([1, 4, , 5]);
                        regArray = /^((\d+)?\s+)?(.*)?/ig.exec(text);
                        repeat = (regArray[2] != null) ? Number(regArray[2]) : 1;
                        rollText = (regArray[3] != null) ? regArray[3] : text;
                        console.log('SEND_MESSAGE gameType :' + gameType);
                        return [4 /*yield*/, DiceBot_1.loadGameSystemAsync(gameType)];
                    case 2:
                        gameSystem = _a.sent();
                        if (gameSystem.COMMAND_PATTERN) {
                            if (!gameSystem.COMMAND_PATTERN.test(rollText)) {
                                return [2 /*return*/];
                            }
                        }
                        if (!rollText || repeat < 1) {
                            return [2 /*return*/];
                        }
                        // 繰り返しコマンドに変換
                        if (repeat > 1) {
                            rollText = "x" + repeat + " " + rollText;
                        }
                        return [4 /*yield*/, DiceBot_1.diceRollAsync(rollText, gameSystem)];
                    case 3:
                        rollResult = _a.sent();
                        if (!rollResult.result) {
                            return [2 /*return*/];
                        }
                        rollResult.result = rollResult.result.replace(/\n?(#\d+)\n/ig, '$1 '); // 繰り返しロールを詰める
                        this.sendResultMessage(rollResult, chatMessage);
                        return [3 /*break*/, 5];
                    case 4:
                        e_2 = _a.sent();
                        console.error(e_2);
                        return [3 /*break*/, 5];
                    case 5: return [2 /*return*/];
                }
            });
        }); })
            .on('DICE_TABLE_MESSAGE', function (event) { return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(_this, void 0, void 0, function () {
            var chatMessage, text, splitText, diceTable, rollDice, rollTable, diceTable_1, diceTable_1_1, table, regArray, repeat, rollText, finalResult, i, gameSystem, rollResult, rolledDiceNum, tableAns, tablePalette, i, splitOneTable, e_3;
            var e_4, _a;
            return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"])(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        console.log('ダイス表判定');
                        chatMessage = _core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_5__["ObjectStore"].instance.get(event.data.messageIdentifier);
                        if (!chatMessage || !chatMessage.isSendFromSelf || chatMessage.isSystem) {
                            return [2 /*return*/];
                        }
                        text = _core_system_util_string_util__WEBPACK_IMPORTED_MODULE_8__["StringUtil"].toHalfWidth(chatMessage.text);
                        splitText = text.split(/\s/);
                        diceTable = this.getDiceTables();
                        if (!diceTable) {
                            return [2 /*return*/];
                        }
                        if (splitText.length == 0) {
                            return [2 /*return*/];
                        }
                        console.log('コマンド候補:' + splitText[0]);
                        rollDice = null;
                        rollTable = null;
                        try {
                            for (diceTable_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(diceTable), diceTable_1_1 = diceTable_1.next(); !diceTable_1_1.done; diceTable_1_1 = diceTable_1.next()) {
                                table = diceTable_1_1.value;
                                if (table.command == splitText[0]) {
                                    rollTable = table;
                                }
                            }
                        }
                        catch (e_4_1) { e_4 = { error: e_4_1 }; }
                        finally {
                            try {
                                if (diceTable_1_1 && !diceTable_1_1.done && (_a = diceTable_1.return)) _a.call(diceTable_1);
                            }
                            finally { if (e_4) throw e_4.error; }
                        }
                        if (!rollTable) {
                            return [2 /*return*/];
                        }
                        _b.label = 1;
                    case 1:
                        _b.trys.push([1, 7, , 8]);
                        regArray = /^((\d+)?\s+)?([^\s]*)?/ig.exec(rollTable.dice);
                        repeat = (regArray[2] != null) ? Number(regArray[2]) : 1;
                        rollText = (regArray[3] != null) ? regArray[3] : text;
                        finalResult = { result: '', isSecret: false };
                        i = 0;
                        _b.label = 2;
                    case 2:
                        if (!(i < repeat && i < 32)) return [3 /*break*/, 6];
                        return [4 /*yield*/, DiceBot_1.loadGameSystemAsync(rollTable.diceTablePalette.dicebot)];
                    case 3:
                        gameSystem = _b.sent();
                        return [4 /*yield*/, DiceBot_1.diceRollAsync(rollText, gameSystem)];
                    case 4:
                        rollResult = _b.sent();
                        if (rollResult.result.length < 1) {
                            return [3 /*break*/, 6];
                        }
                        finalResult.result += rollResult.result;
                        finalResult.isSecret = finalResult.isSecret || rollResult.isSecret;
                        if (1 < repeat) {
                            finalResult.result += " #" + (i + 1);
                        }
                        _b.label = 5;
                    case 5:
                        i++;
                        return [3 /*break*/, 2];
                    case 6:
                        rolledDiceNum = finalResult.result.match(/\d+$/);
                        tableAns = 'ダイス目の番号が表にありません';
                        if (rolledDiceNum) {
                            console.log('rolledDiceNum:' + rolledDiceNum[0]);
                            tablePalette = rollTable.diceTablePalette.getPalette();
                            console.log('tablePalette:' + tablePalette);
                            for (i in tablePalette) {
                                console.log('oneTable:' + tablePalette[i]);
                                splitOneTable = tablePalette[i].split(/[:：,，\s]/);
                                if (splitOneTable[0] == rolledDiceNum[0]) {
                                    tableAns = tablePalette[i];
                                }
                            }
                        }
                        finalResult.result += '\n' + tableAns;
                        this.sendResultMessage(finalResult, chatMessage);
                        return [3 /*break*/, 8];
                    case 7:
                        e_3 = _b.sent();
                        console.error(e_3);
                        return [3 /*break*/, 8];
                    case 8: return [2 /*return*/];
                }
            });
        }); })
            .on('RESOURCE_EDIT_MESSAGE', function (event) { return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(_this, void 0, void 0, function () {
            var chatMessage, text, gameType;
            return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"])(this, function (_a) {
                chatMessage = _core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_5__["ObjectStore"].instance.get(event.data.messageIdentifier);
                if (!chatMessage || !chatMessage.isSendFromSelf || chatMessage.isSystem) {
                    return [2 /*return*/];
                }
                text = _core_system_util_string_util__WEBPACK_IMPORTED_MODULE_8__["StringUtil"].toHalfWidth(chatMessage.text);
                gameType = chatMessage.tags ? chatMessage.tags[0] : '';
                this.checkResourceEditCommand(chatMessage);
                return [2 /*return*/];
            });
        }); })
            // ダイスからぶりによる擬似的なダイス交換を行う
            // 注※
            // 空振り処理は実装しているが
            // 数学上　実行によって実行後の判定の成功率やダイスの偏りに影響は及ぼさない
            // コードを実装した円柱は、採用しているユドナリウムリリィのダイスの乱数発生器にχ二乗検定による統計的検証は行い、
            // 乱数性質に問題がないことは確認、理解した上で作っている
            // あくまで
            // 『ダイスを交換したり　悪い出目が偶然続いたときに　ダイスを空振りしてお祓いをしたくなる　今日のダイスは偏っている気がする』など
            // 人間の心理をターゲートとしたコマンドである
            // このコマンドでダイスロール時に表示されるアイコンが変更されるがこれは視覚上演出であり
            // 空振りした回数やダイスの乱数とは無関係に差し替えている
            // 別のオンラインセッションツールの「どどんとふむせる」のまそっぷ機能のオマージュであり(細部実装は異なる)
            // 性質上　2021年エイプリールフールコマンドとして実装した
            // 実装意図はユーモアであることを記しておく
            .on('APRIL_MESSAGE', function (event) { return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(_this, void 0, void 0, function () {
            var chatMessage, text, splitText, gameSystem, diceTable, diceType, rollDiceType, chkType, nowDiceImageIndex, newDiceImageIndex, imageIndexMax, changeFate0, changeFate1, changeFate2, aprilRollDice, regArray, rollText, rollResult, e_5;
            var _this = this;
            return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"])(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        chatMessage = _core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_5__["ObjectStore"].instance.get(event.data.messageIdentifier);
                        if (!chatMessage || !chatMessage.isSendFromSelf || chatMessage.isSystem) {
                            return [2 /*return*/];
                        }
                        text = _core_system_util_string_util__WEBPACK_IMPORTED_MODULE_8__["StringUtil"].toHalfWidth(chatMessage.text);
                        splitText = text.split(/\s/);
                        return [4 /*yield*/, DiceBot_1.loadGameSystemAsync(chatMessage.tags ? chatMessage.tags[0] : '')];
                    case 1:
                        gameSystem = _a.sent();
                        diceTable = this.getDiceTables();
                        if (!diceTable) {
                            return [2 /*return*/];
                        }
                        if (splitText.length == 0) {
                            return [2 /*return*/];
                        }
                        if (splitText[0] == '#まそっぷ' || splitText[0] == '#エイプリル') {
                            setTimeout(function () { _this.alertAprilMessage(chatMessage); }, 10);
                            return [2 /*return*/];
                        }
                        if (splitText[0] != '#えいぷりる') {
                            return [2 /*return*/];
                        }
                        console.log('えいぷりる実行:' + splitText[0] + ':' + splitText[1] + ':' + splitText.length);
                        diceType = '2d6';
                        rollDiceType = 'd6';
                        if (splitText.length >= 2) {
                            chkType = splitText[1].toLowerCase();
                            if (chkType == '1d4' || chkType == '4') {
                                diceType = '1d4';
                                rollDiceType = 'd4';
                            }
                            if (chkType == '1d6' || chkType == '6') {
                                diceType = '1d6';
                                rollDiceType = 'd6';
                            }
                            if (chkType == '2d6') {
                                diceType = '2d6';
                                rollDiceType = 'd6';
                            }
                            if (chkType == '1d8' || chkType == '8') {
                                diceType = '1d8';
                                rollDiceType = 'd8';
                            }
                            if (chkType == '1d10' || chkType == '10') {
                                diceType = '1d10';
                                rollDiceType = 'd10';
                            }
                            if (chkType == '1d12' || chkType == '12') {
                                diceType = '1d12';
                                rollDiceType = 'd12';
                            }
                            if (chkType == '1d20' || chkType == '20') {
                                diceType = '1d20';
                                rollDiceType = 'd20';
                            }
                            if (chkType == '1d100' || chkType == '100') {
                                diceType = '1d100';
                                rollDiceType = 'd100';
                            }
                            if (chkType == '0') {
                                diceType = '';
                            }
                        }
                        console.log('えいぷりる ダイスタイプ:' + diceType);
                        nowDiceImageIndex = _peer_cursor__WEBPACK_IMPORTED_MODULE_10__["PeerCursor"].myCursor.diceImageIndex;
                        newDiceImageIndex = 0;
                        imageIndexMax = 3;
                        if (nowDiceImageIndex < 0) { // 画像のランダム決定は標準乱数つかう
                            newDiceImageIndex = Math.floor(Math.random() * (imageIndexMax + 1));
                        }
                        else {
                            newDiceImageIndex = Math.floor(Math.random() * (imageIndexMax));
                            if (nowDiceImageIndex <= newDiceImageIndex) {
                                newDiceImageIndex++;
                            }
                        }
                        _peer_cursor__WEBPACK_IMPORTED_MODULE_10__["PeerCursor"].myCursor.diceImageType = diceType;
                        if (diceType == '') {
                            _peer_cursor__WEBPACK_IMPORTED_MODULE_10__["PeerCursor"].myCursor.diceImageIndex = -1;
                            setTimeout(function () { _this.unDispDiceAprilMessage(chatMessage); }, 10);
                            return [2 /*return*/];
                        }
                        else {
                            _peer_cursor__WEBPACK_IMPORTED_MODULE_10__["PeerCursor"].myCursor.diceImageIndex = newDiceImageIndex;
                        }
                        changeFate0 = 100;
                        changeFate1 = Math.floor(Math.random() * 100) + 1;
                        if (changeFate1 < 1) {
                            changeFate1 = 1;
                        }
                        if (changeFate1 > 100) {
                            changeFate1 = 100;
                        }
                        changeFate2 = Math.floor(Math.random() * 100) + 1;
                        if (changeFate2 < 1) {
                            changeFate2 = 1;
                        }
                        if (changeFate2 > 100) {
                            changeFate2 = 100;
                        }
                        aprilRollDice = '';
                        if (diceType == '2d6') {
                            aprilRollDice = changeFate0 + rollDiceType + '+' + changeFate0 + rollDiceType + '+' +
                                changeFate1 + rollDiceType + '+' + changeFate1 + rollDiceType + '+' +
                                changeFate2 + rollDiceType + '+' + changeFate2 + rollDiceType;
                        }
                        else {
                            aprilRollDice = changeFate0 + rollDiceType + '+' + changeFate1 + rollDiceType + '+' + changeFate2 + rollDiceType;
                        }
                        _a.label = 2;
                    case 2:
                        _a.trys.push([2, 4, , 5]);
                        regArray = /^((\d+)?\s+)?([^\s]*)?/ig.exec(aprilRollDice);
                        rollText = (regArray[3] != null) ? regArray[3] : text;
                        return [4 /*yield*/, DiceBot_1.diceRollAsync(rollText, gameSystem)];
                    case 3:
                        rollResult = _a.sent();
                        if (!rollResult.result) {
                            return [2 /*return*/];
                        }
                        this.sendAprilMessage(rollResult, changeFate0 + changeFate1 + changeFate2, chatMessage);
                        return [3 /*break*/, 5];
                    case 4:
                        e_5 = _a.sent();
                        console.error(e_5);
                        return [3 /*break*/, 5];
                    case 5: return [2 /*return*/];
                }
            });
        }); });
    };
    DiceBot.prototype.alertAprilMessage = function (originalMessage) {
        var text = '「ちゃんと『#えいぷりる』ってよんでください！ダイス運下げますよっ！？」';
        var aprilMessage = {
            identifier: '',
            tabIdentifier: originalMessage.tabIdentifier,
            originFrom: originalMessage.from,
            from: 'System',
            timestamp: originalMessage.timestamp + 1,
            imageIdentifier: 'april[01]',
            tag: 'system',
            name: '<えいぷりる>',
            text: text,
            messColor: originalMessage.messColor,
            imagePos: originalMessage.imagePos ? originalMessage.imagePos : null
        };
        var chatTab = _core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_5__["ObjectStore"].instance.get(originalMessage.tabIdentifier);
        if (chatTab) {
            chatTab.addMessage(aprilMessage);
        }
    };
    DiceBot.prototype.unDispDiceAprilMessage = function (originalMessage) {
        var text = 'ダイス画像をデフォルト(非表示)にしました';
        var aprilMessage = {
            identifier: '',
            tabIdentifier: originalMessage.tabIdentifier,
            originFrom: originalMessage.from,
            from: 'System',
            timestamp: originalMessage.timestamp + 1,
            imageIdentifier: 'april[00]',
            tag: 'system',
            name: '<えいぷりる>',
            text: text,
            messColor: originalMessage.messColor
        };
        var chatTab = _core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_5__["ObjectStore"].instance.get(originalMessage.tabIdentifier);
        if (chatTab) {
            chatTab.addMessage(aprilMessage);
        }
    };
    DiceBot.prototype.sendAprilMessage = function (rollResult, roollNum, originalMessage) {
        var result = rollResult.result;
        var isSecret = rollResult.isSecret;
        if (result.length < 1) {
            return;
        }
        console.log('result.length:' + result.length);
        var totalFate = result.match(/\d+$/);
        var text = '「まそっぷ！」えいぷりるは炎の剣で ' + roollNum + ' 連続でダイスを突いた → ' + totalFate + ' 運命が変わったかもしれない';
        var diceBotMessage = {
            identifier: '',
            tabIdentifier: originalMessage.tabIdentifier,
            originFrom: originalMessage.from,
            from: 'System-BCDice',
            timestamp: originalMessage.timestamp + 1,
            imageIdentifier: 'april[00]',
            tag: 'system',
            name: '<BCDice：' + 'えいぷりる' + '>',
            text: text,
            messColor: originalMessage.messColor,
            imagePos: originalMessage.imagePos ? originalMessage.imagePos : null
        };
        if (originalMessage.to != null && 0 < originalMessage.to.length) {
            diceBotMessage.to = originalMessage.to;
            if (originalMessage.to.indexOf(originalMessage.from) < 0) {
                diceBotMessage.to += ' ' + originalMessage.from;
            }
        }
        var chatTab = _core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_5__["ObjectStore"].instance.get(originalMessage.tabIdentifier);
        if (chatTab) {
            chatTab.addMessage(diceBotMessage);
        }
    };
    DiceBot.prototype.checkResourceEditCommand = function (originalMessage) {
        var e_6, _a;
        var splitText = originalMessage.text.split(/\s/);
        var result = null;
        var allEditList = null;
        console.log('checkResourceEditCommand' + splitText);
        try {
            for (var splitText_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(splitText), splitText_1_1 = splitText_1.next(); !splitText_1_1.done; splitText_1_1 = splitText_1.next()) {
                var chktxt = splitText_1_1.value;
                console.log('chktxt' + chktxt);
                if (chktxt.match(/^[:：].+/gi)) {
                    console.log('checkResourceEditCommand 2');
                    result = chktxt.match(/[:：][^:：]+/gi);
                    if (result) {
                        this.resourceEditProcess(result, originalMessage);
                    }
                }
            }
        }
        catch (e_6_1) { e_6 = { error: e_6_1 }; }
        finally {
            try {
                if (splitText_1_1 && !splitText_1_1.done && (_a = splitText_1.return)) _a.call(splitText_1);
            }
            finally { if (e_6) throw e_6.error; }
        }
    };
    DiceBot.prototype.resourceEditProcess = function (result, originalMessage) {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function () {
            var object, allEditList, data, gameSystem, result_1, result_1_1, oneText, oneResourceEdit, replaceText, resourceEditRegExp, resourceEditResult, reg1, reg2, reg3, commandPrefix, rollResult, splitResult, resultMatch, e_7, e_8_1;
            var e_8, _a;
            return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"])(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        object = _core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_5__["ObjectStore"].instance.get(originalMessage.sendFrom);
                        if (object instanceof _game_character__WEBPACK_IMPORTED_MODULE_4__["GameCharacter"]) {
                            console.log('object.location.name' + object.location.name);
                        }
                        else {
                            console.log('キャラクタじゃないので操作できません');
                            return [2 /*return*/];
                        }
                        allEditList = [];
                        return [4 /*yield*/, DiceBot_1.loadGameSystemAsync(originalMessage.tags ? originalMessage.tags[0] : '')];
                    case 1:
                        gameSystem = _b.sent();
                        _b.label = 2;
                    case 2:
                        _b.trys.push([2, 10, 11, 12]);
                        result_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(result), result_1_1 = result_1.next();
                        _b.label = 3;
                    case 3:
                        if (!!result_1_1.done) return [3 /*break*/, 9];
                        oneText = result_1_1.value;
                        oneResourceEdit = {
                            target: '',
                            targetHalfWidth: '',
                            operator: '',
                            diceResult: '',
                            command: '',
                            isDiceRoll: false,
                            hitName: '',
                            calcAns: 0,
                            detaElm: null
                        };
                        replaceText = oneText.replace('：', ':').replace('＋', '+').replace('－', '-').replace('＝', '=');
                        console.log('リソース変更：' + replaceText);
                        resourceEditRegExp = /[:]([^-+=]+)([-+=])(.+)/;
                        resourceEditResult = replaceText.match(resourceEditRegExp);
                        if (!resourceEditResult) {
                            return [2 /*return*/];
                        }
                        reg1 = resourceEditResult[1];
                        reg2 = resourceEditResult[2];
                        reg3 = resourceEditResult[3];
                        console.log(reg1 + '/' + reg2 + '/' + reg3);
                        oneResourceEdit.target = reg1; // 操作対象検索文字タイプ生値
                        oneResourceEdit.targetHalfWidth = _core_system_util_string_util__WEBPACK_IMPORTED_MODULE_8__["StringUtil"].toHalfWidth(reg1); // 操作対象検索文字半角化
                        oneResourceEdit.operator = reg2; // 演算符号
                        commandPrefix = reg2 == '-' ? '-' : '';
                        oneResourceEdit.command = commandPrefix + _core_system_util_string_util__WEBPACK_IMPORTED_MODULE_8__["StringUtil"].toHalfWidth(reg3) + '+(1d1-1)';
                        // 操作量C()とダイスロールが必要な場合分けをしないために+(1d1-1)を付加してダイスロール命令にしている
                        if (_core_system_util_string_util__WEBPACK_IMPORTED_MODULE_8__["StringUtil"].toHalfWidth(reg3).match(/\d[dD]/)) {
                            oneResourceEdit.isDiceRoll = true;
                        }
                        else {
                            oneResourceEdit.isDiceRoll = false;
                        }
                        // 操作対象検索
                        data = object.detailDataElement.getFirstElementByName(oneResourceEdit.target);
                        if (data) {
                            oneResourceEdit.hitName = oneResourceEdit.target;
                            oneResourceEdit.detaElm = data;
                        }
                        else {
                            data = object.detailDataElement.getFirstElementByName(oneResourceEdit.targetHalfWidth);
                            if (data) {
                                oneResourceEdit.hitName = oneResourceEdit.targetHalfWidth;
                                oneResourceEdit.detaElm = data;
                            }
                            else {
                                // 検索リソースヒットせず
                                return [2 /*return*/]; // 実行失敗
                            }
                        }
                        console.log('oneResourceEdit.detaElm :V' + oneResourceEdit.detaElm.value + ' cV ' + oneResourceEdit.detaElm.currentValue);
                        _b.label = 4;
                    case 4:
                        _b.trys.push([4, 6, , 7]);
                        return [4 /*yield*/, DiceBot_1.diceRollAsync(oneResourceEdit.command, gameSystem)];
                    case 5:
                        rollResult = _b.sent();
                        if (!rollResult.result) {
                            return [2 /*return*/, null];
                        }
                        splitResult = rollResult.result.split(' ＞ ');
                        oneResourceEdit.diceResult = splitResult[splitResult.length - 2].replace(/\+\(1\[1\]\-1\)$/, '');
                        resultMatch = rollResult.result.match(/([-+]?\d+)$/);
                        console.log('calcAns:' + resultMatch[1]);
                        oneResourceEdit.calcAns = parseInt(resultMatch[1], 10);
                        return [3 /*break*/, 7];
                    case 6:
                        e_7 = _b.sent();
                        console.error(e_7);
                        return [3 /*break*/, 7];
                    case 7:
                        console.log('target:' + oneResourceEdit.target + ' operator:' + oneResourceEdit.operator + ' command:' + oneResourceEdit.command + ' ans:' + oneResourceEdit.calcAns);
                        allEditList.push(oneResourceEdit);
                        _b.label = 8;
                    case 8:
                        result_1_1 = result_1.next();
                        return [3 /*break*/, 3];
                    case 9: return [3 /*break*/, 12];
                    case 10:
                        e_8_1 = _b.sent();
                        e_8 = { error: e_8_1 };
                        return [3 /*break*/, 12];
                    case 11:
                        try {
                            if (result_1_1 && !result_1_1.done && (_a = result_1.return)) _a.call(result_1);
                        }
                        finally { if (e_8) throw e_8.error; }
                        return [7 /*endfinally*/];
                    case 12:
                        this.resourceEdit(allEditList, originalMessage);
                        return [2 /*return*/];
                }
            });
        });
    };
    DiceBot.prototype.resourceEdit = function (allEditList, originalMessage) {
        var e_9, _a;
        var text = '';
        var oldValueS = '';
        var oldValue = 0;
        var calc = 0;
        var isDiceRoll = false;
        try {
            for (var allEditList_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(allEditList), allEditList_1_1 = allEditList_1.next(); !allEditList_1_1.done; allEditList_1_1 = allEditList_1.next()) {
                var edit = allEditList_1_1.value;
                if (edit.detaElm.type == 'numberResource') {
                    oldValueS = edit.detaElm.currentValue;
                    if (edit.operator == '=') {
                        calc = edit.calcAns;
                    }
                    else {
                        calc = parseInt(oldValueS, 10) + edit.calcAns;
                    }
                    edit.detaElm.currentValue = calc;
                }
                else if (edit.detaElm.type != 'note') {
                    oldValueS = edit.detaElm.value;
                    if (edit.operator == '=') {
                        calc = edit.calcAns;
                    }
                    else {
                        calc = parseInt(oldValueS, 10) + edit.calcAns;
                    }
                    edit.detaElm.value = calc;
                }
                /*
                let textoperator;
                if( edit.operator == '='){
                  textoperator = ' ＞ ';
                }else{
                  textoperator = edit.operator;
                }
                */
                var operatorText = edit.operator == '-' ? '' : edit.operator;
                text += edit.hitName + ':' + oldValueS + operatorText + edit.diceResult + '＞' + calc + '    ';
                if (edit.isDiceRoll) {
                    isDiceRoll = true;
                }
            }
        }
        catch (e_9_1) { e_9 = { error: e_9_1 }; }
        finally {
            try {
                if (allEditList_1_1 && !allEditList_1_1.done && (_a = allEditList_1.return)) _a.call(allEditList_1);
            }
            finally { if (e_9) throw e_9.error; }
        }
        text = text.replace(/\s\s\s\s$/, '');
        console.log('text:' + text);
        var fromText;
        var nameText;
        if (isDiceRoll) {
            fromText = 'System-BCDice';
            nameText = '<BCDice：' + originalMessage.name + '>';
        }
        else {
            fromText = 'System';
            nameText = originalMessage.name;
        }
        var resourceMessage = {
            identifier: '',
            tabIdentifier: originalMessage.tabIdentifier,
            originFrom: originalMessage.from,
            from: fromText,
            timestamp: originalMessage.timestamp + 2,
            imageIdentifier: _peer_cursor__WEBPACK_IMPORTED_MODULE_10__["PeerCursor"].myCursor.diceImageIdentifier,
            tag: 'system',
            name: nameText,
            text: text,
            messColor: originalMessage.messColor
        };
        var chatTab = _core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_5__["ObjectStore"].instance.get(originalMessage.tabIdentifier);
        if (chatTab) {
            chatTab.addMessage(resourceMessage);
        }
    };
    DiceBot.prototype.sendResultMessage = function (rollResult, originalMessage) {
        var result = rollResult.result;
        var isSecret = rollResult.isSecret;
        if (result.length < 1) {
            return;
        }
        console.log('result.length:' + result.length);
        result = result.replace(/[＞]/g, function (s) { return '→'; }).trim();
        var diceBotMessage = {
            identifier: '',
            tabIdentifier: originalMessage.tabIdentifier,
            originFrom: originalMessage.from,
            from: 'System-BCDice',
            timestamp: originalMessage.timestamp + 1,
            imageIdentifier: _peer_cursor__WEBPACK_IMPORTED_MODULE_10__["PeerCursor"].myCursor.diceImageIdentifier,
            tag: isSecret ? 'system secret' : 'system',
            name: isSecret ? '<Secret-BCDice：' + originalMessage.name + '>' : '<BCDice：' + originalMessage.name + '>',
            text: result,
            messColor: originalMessage.messColor
        };
        if (originalMessage.to != null && 0 < originalMessage.to.length) {
            diceBotMessage.to = originalMessage.to;
            if (originalMessage.to.indexOf(originalMessage.from) < 0) {
                diceBotMessage.to += ' ' + originalMessage.from;
            }
        }
        var chatTab = _core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_5__["ObjectStore"].instance.get(originalMessage.tabIdentifier);
        if (chatTab) {
            chatTab.addMessage(diceBotMessage);
        }
    };
    // GameObject Lifecycle
    DiceBot.prototype.onStoreRemoved = function () {
        _super.prototype.onStoreRemoved.call(this);
        _core_system__WEBPACK_IMPORTED_MODULE_6__["EventSystem"].unregister(this);
    };
    var DiceBot_1;
    DiceBot.loader = new WebpackLoader();
    DiceBot.queue = new _core_system_util_promise_queue__WEBPACK_IMPORTED_MODULE_7__["PromiseQueue"]('DiceBotQueue');
    DiceBot.diceBotInfos = DiceBot_1.listAvailableGameSystems().sort(function (a, b) {
        var aKey = a.sortKey;
        var bKey = b.sortKey;
        if (aKey < bKey) {
            return -1;
        }
        if (aKey > bKey) {
            return 1;
        }
        return 0;
    });
    DiceBot = DiceBot_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_2__["SyncObject"])('dice-bot')
    ], DiceBot);
    return DiceBot;
}(_core_synchronize_object_game_object__WEBPACK_IMPORTED_MODULE_3__["GameObject"]));



/***/ }),

/***/ "KUN8":
/*!******************************************************************!*\
  !*** ./src/app/component/chat-message/chat-message.component.ts ***!
  \******************************************************************/
/*! exports provided: ChatMessageComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ChatMessageComponent", function() { return ChatMessageComponent; });
/* harmony import */ var _angular_animations__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/animations */ "R0Ic");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "fXoL");
/* harmony import */ var _udonarium_core_file_storage_image_file__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @udonarium/core/file-storage/image-file */ "FjwV");
/* harmony import */ var _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @udonarium/core/synchronize-object/object-store */ "hm7o");
/* harmony import */ var service_chat_message_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! service/chat-message.service */ "PEfN");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @angular/common */ "ofXK");
/* harmony import */ var pipe_safe_pipe__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! pipe/safe.pipe */ "6HCy");
/* harmony import */ var ngx_linky__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ngx-linky */ "fAHl");









function ChatMessageComponent_ng_container_2_img_3_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelement"](0, "img", 14);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpipe"](1, "safe");
} if (rf & 2) {
    var ctx_r6 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("src", _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpipeBind2"](1, 1, ctx_r6.imageFile == null ? null : ctx_r6.imageFile.url, "resourceUrl"), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵsanitizeUrl"]);
} }
function ChatMessageComponent_ng_container_2_ng_container_14_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainer"](0);
} }
var _c0 = function (a0, a1, a2) { return { "direct-message": a0, "system-message": a1, "dicebot-message": a2 }; };
var _c1 = function (a0) { return { "color": a0 }; };
function ChatMessageComponent_ng_container_2_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](1, "div", 4);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](2, "div", 5);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](3, ChatMessageComponent_ng_container_2_img_3_Template, 2, 4, "img", 6);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](4, "div", 7);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](5, "div", 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](6, "span", 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](7);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](8, "span", 10);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](9);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](10, "span", 11);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](11);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpipe"](12, "date");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](13, "div", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](14, ChatMessageComponent_ng_container_2_ng_container_14_Template, 1, 0, "ng-container", 13);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]();
    var _r2 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵreference"](5);
    var _r4 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵreference"](7);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngClass", _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpureFunction3"](12, _c0, ctx_r0.chatMessage.isDirect || ctx_r0.chatMessage.isSecret, ctx_r0.chatMessage.isSystem, ctx_r0.chatMessage.isDicebot));
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", 0 < (ctx_r0.imageFile == null ? null : ctx_r0.imageFile.url == null ? null : ctx_r0.imageFile.url.length));
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngStyle", _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpureFunction1"](16, _c1, ctx_r0.chatMessage.messColor));
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtextInterpolate"](ctx_r0.chatMessage.name);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtextInterpolate"](ctx_r0.chatMessage.from);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtextInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpipeBind2"](12, 9, ctx_r0.chatMessage.timestamp, "y/M/d H:mm"));
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", !ctx_r0.chatMessage.isSecret || ctx_r0.chatMessage.isSendFromSelf)("ngIfThen", _r2)("ngIfElse", _r4);
} }
function ChatMessageComponent_ng_container_3_font_7_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "font", 10);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
} if (rf & 2) {
    var ctx_r8 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtextInterpolate"](ctx_r8.chatMessage.from);
} }
function ChatMessageComponent_ng_container_3_font_8_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "font", 11);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpipe"](2, "date");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
} if (rf & 2) {
    var ctx_r9 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtextInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpipeBind2"](2, 1, ctx_r9.chatMessage.timestamp, "H:mm"));
} }
function ChatMessageComponent_ng_container_3_ng_container_10_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainer"](0);
} }
function ChatMessageComponent_ng_container_3_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](1, "div", 15);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](2, "div", 7);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](3, "span", 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](4, "font", 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](5);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](6, "\uFF1A ");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](7, ChatMessageComponent_ng_container_3_font_7_Template, 2, 1, "font", 16);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](8, ChatMessageComponent_ng_container_3_font_8_Template, 3, 4, "font", 17);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](9, "font", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](10, ChatMessageComponent_ng_container_3_ng_container_10_Template, 1, 0, "ng-container", 13);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]();
    var _r2 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵreference"](5);
    var _r4 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵreference"](7);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngClass", _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpureFunction3"](8, _c0, ctx_r1.chatMessage.isDirect || ctx_r1.chatMessage.isSecret, ctx_r1.chatMessage.isSystem, ctx_r1.chatMessage.isDicebot));
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngStyle", _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpureFunction1"](12, _c1, ctx_r1.chatMessage.messColor));
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtextInterpolate"](ctx_r1.chatMessage.name);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", ctx_r1.simpleDispFlagUserId);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", ctx_r1.simpleDispFlagTime);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", !ctx_r1.chatMessage.isSecret || ctx_r1.chatMessage.isSendFromSelf)("ngIfThen", _r2)("ngIfElse", _r4);
} }
function ChatMessageComponent_ng_template_4_button_2_Template(rf, ctx) { if (rf & 1) {
    var _r13 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "button", 20);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("click", function ChatMessageComponent_ng_template_4_button_2_Template_button_click_0_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r13); var ctx_r12 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](2); return ctx_r12.discloseMessage(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](1, "\u516C\u958B\u7D50\u679C");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
} }
var _c2 = function () { return { stripPrefix: false }; };
function ChatMessageComponent_ng_template_4_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelement"](0, "span", 18);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpipe"](1, "linky");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](2, ChatMessageComponent_ng_template_4_button_2_Template, 2, 0, "button", 19);
} if (rf & 2) {
    var ctx_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("innerHTML", _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpipeBind2"](1, 2, ctx_r3.escapeHtml(ctx_r3.chatMessage.text), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpureFunction0"](5, _c2)), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵsanitizeHtml"]);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", ctx_r3.chatMessage.isSecret);
} }
function ChatMessageComponent_ng_template_6_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "span");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](1, "\uFF08\u6697\u9AB0\uFF09");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
} }
var ChatMessageComponent = /** @class */ (function () {
    function ChatMessageComponent(chatMessageService) {
        this.chatMessageService = chatMessageService;
        this.simpleDispFlagTime = false;
        this.simpleDispFlagUserId = false;
        this.chatSimpleDispFlag = false;
        this.imageFile = _udonarium_core_file_storage_image_file__WEBPACK_IMPORTED_MODULE_2__["ImageFile"].Empty;
        this.animeState = 'inactive';
    }
    Object.defineProperty(ChatMessageComponent.prototype, "chatTabList", {
        get: function () { return _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_3__["ObjectStore"].instance.get('ChatTabList'); },
        enumerable: false,
        configurable: true
    });
    ChatMessageComponent.prototype.ngOnInit = function () {
        var file = this.chatMessage.image;
        if (file)
            this.imageFile = file;
        var time = this.chatMessageService.getTime();
        if (time - 10 * 1000 < this.chatMessage.timestamp)
            this.animeState = 'active';
    };
    ChatMessageComponent.prototype.ngAfterViewInit = function () {
    };
    ChatMessageComponent.prototype.discloseMessage = function () {
        this.chatMessage.tag = this.chatMessage.tag.replace('secret', '');
    };
    ChatMessageComponent.prototype.escapeHtml = function (text) {
        return text.replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;")
            .replace(/"/g, "&quot;").replace(/'/g, "&#039;");
    };
    ChatMessageComponent.ɵfac = function ChatMessageComponent_Factory(t) { return new (t || ChatMessageComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdirectiveInject"](service_chat_message_service__WEBPACK_IMPORTED_MODULE_4__["ChatMessageService"])); };
    ChatMessageComponent.ɵcmp = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdefineComponent"]({ type: ChatMessageComponent, selectors: [["chat-message"]], inputs: { chatMessage: "chatMessage", simpleDispFlagTime: "simpleDispFlagTime", simpleDispFlagUserId: "simpleDispFlagUserId", chatSimpleDispFlag: "chatSimpleDispFlag" }, decls: 8, vars: 3, consts: [[1, "container"], [4, "ngIf"], ["visible", ""], ["secret", ""], [1, "message", 3, "ngClass"], [1, "image"], [3, "src", 4, "ngIf"], [1, "body", 3, "ngStyle"], [1, "title"], [1, "msg-name"], [1, "tip", "msg-from"], [1, "tip", "msg-timestamp"], [1, "text", "msg-text"], [4, "ngIf", "ngIfThen", "ngIfElse"], [3, "src"], [1, "message-small", 3, "ngClass"], ["class", "tip msg-from", 4, "ngIf"], ["class", "tip msg-timestamp", 4, "ngIf"], [3, "innerHTML"], [3, "click", 4, "ngIf"], [3, "click"]], template: function ChatMessageComponent_Template(rf, ctx) { if (rf & 1) {
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "div", 0);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](1, "div");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](2, ChatMessageComponent_ng_container_2_Template, 15, 18, "ng-container", 1);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](3, ChatMessageComponent_ng_container_3_Template, 11, 14, "ng-container", 1);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](4, ChatMessageComponent_ng_template_4_Template, 3, 6, "ng-template", null, 2, _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplateRefExtractor"]);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](6, ChatMessageComponent_ng_template_6_Template, 2, 0, "ng-template", null, 3, _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplateRefExtractor"]);
        } if (rf & 2) {
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("@flyInOut", ctx.animeState);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", !ctx.chatSimpleDispFlag);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", ctx.chatSimpleDispFlag);
        } }, directives: [_angular_common__WEBPACK_IMPORTED_MODULE_5__["NgIf"], _angular_common__WEBPACK_IMPORTED_MODULE_5__["NgClass"], _angular_common__WEBPACK_IMPORTED_MODULE_5__["NgStyle"]], pipes: [_angular_common__WEBPACK_IMPORTED_MODULE_5__["DatePipe"], pipe_safe_pipe__WEBPACK_IMPORTED_MODULE_6__["SafePipe"], ngx_linky__WEBPACK_IMPORTED_MODULE_7__["LinkyPipe"]], styles: ["[_nghost-%COMP%] {\r\n  display: block;\r\n}\r\n\r\n.container[_ngcontent-%COMP%] {\r\n  width: 100%;\r\n  overflow-x: hidden;\r\n}\r\n\r\n.message[_ngcontent-%COMP%] {\r\n  display: flex;\r\n  flex-flow: row nowrap;\r\n  box-sizing: border-box;\r\n  padding: 5px 5px;\r\n  width: 100%;\r\n  word-wrap: break-word;\r\n  overflow-wrap: anywhere;\r\n  word-break: break-word;\r\n  border-bottom:1px dotted #999;\r\n}\r\n\r\n.message-small[_ngcontent-%COMP%] {\r\n  display: flex;\r\n  flex-flow: row nowrap;\r\n  box-sizing: border-box;\r\n  padding: 2px 2px;\r\n  width: 100%;\r\n  word-wrap: break-word;\r\n  overflow-wrap: anywhere;\r\n  word-break: break-word;\r\n  border-bottom:1px dotted #999;\r\n}\r\n\r\n.direct-message[_ngcontent-%COMP%] {\r\n  background-color: #555;\r\n  color: #CCC;\r\n}\r\n\r\n.message[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%] {\r\n  padding: 0px;\r\n  width: 50px;\r\n  height: 50px;\r\n  flex-shrink: 0;\r\n  vertical-align: top;\r\n}\r\n\r\n.message[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%] {\r\n  width: 100%;\r\n  height: 100%;\r\n  vertical-align: bottom;\r\n  object-fit: cover;\r\n  object-position: 50% 0%;\r\n}\r\n\r\n.message[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%] {\r\n  flex-grow: 1;\r\n}\r\n\r\n.message-small[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%] {\r\n  flex-grow: 1;\r\n}\r\n\r\n.message[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%] {\r\n  vertical-align: top;\r\n  font-size: 14px;\r\n  padding-left: 12px;\r\n}\r\n\r\n.message-small[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%] {\r\n  vertical-align: top;\r\n  font-size: 14px;\r\n  padding-left: 12px;\r\n}\r\n\r\n.message[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%] {\r\n  vertical-align: top;\r\n  padding: 2px 12px 0 12px;\r\n  font-size: 14px;\r\n}\r\n\r\n.message-small[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%] {\r\n  vertical-align: top;\r\n  padding: 2px 12px 0 12px;\r\n  font-size: 14px;\r\n}\r\n\r\n.message[_ngcontent-%COMP%]   .tip[_ngcontent-%COMP%] {\r\n  font-size: 8px;\r\n  padding-left: 12px;\r\n}\r\n\r\n.message-small[_ngcontent-%COMP%]   .tip[_ngcontent-%COMP%] {\r\n  font-size: 8px;\r\n  padding-left: 12px;\r\n}\r\n\r\n.msg-name[_ngcontent-%COMP%] {\r\n  font-weight: bold;\r\n}\r\n\r\n.msg-text[_ngcontent-%COMP%] {\r\n  white-space: pre-wrap;\r\n}\r\n\r\n.dicebot-message[_ngcontent-%COMP%]   .msg-name[_ngcontent-%COMP%] {\r\n  font-size: 8px;\r\n}\r\n\r\n.dicebot-message[_ngcontent-%COMP%]   .msg-text[_ngcontent-%COMP%] {\r\n  \r\n}\r\n\r\n.direct-message.dicebot-message[_ngcontent-%COMP%]   .msg-text[_ngcontent-%COMP%] {\r\n  \r\n}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNoYXQtbWVzc2FnZS5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UsY0FBYztBQUNoQjs7QUFFQTtFQUNFLFdBQVc7RUFDWCxrQkFBa0I7QUFDcEI7O0FBQ0E7RUFDRSxhQUFhO0VBQ2IscUJBQXFCO0VBQ3JCLHNCQUFzQjtFQUN0QixnQkFBZ0I7RUFDaEIsV0FBVztFQUNYLHFCQUFxQjtFQUNyQix1QkFBdUI7RUFDdkIsc0JBQXNCO0VBQ3RCLDZCQUE2QjtBQUMvQjs7QUFFQTtFQUNFLGFBQWE7RUFDYixxQkFBcUI7RUFDckIsc0JBQXNCO0VBQ3RCLGdCQUFnQjtFQUNoQixXQUFXO0VBQ1gscUJBQXFCO0VBQ3JCLHVCQUF1QjtFQUN2QixzQkFBc0I7RUFDdEIsNkJBQTZCO0FBQy9COztBQUVBO0VBQ0Usc0JBQXNCO0VBQ3RCLFdBQVc7QUFDYjs7QUFFQTtFQUNFLFlBQVk7RUFDWixXQUFXO0VBQ1gsWUFBWTtFQUNaLGNBQWM7RUFDZCxtQkFBbUI7QUFDckI7O0FBQ0E7RUFDRSxXQUFXO0VBQ1gsWUFBWTtFQUNaLHNCQUFzQjtFQUN0QixpQkFBaUI7RUFDakIsdUJBQXVCO0FBQ3pCOztBQUNBO0VBQ0UsWUFBWTtBQUNkOztBQUVBO0VBQ0UsWUFBWTtBQUNkOztBQUVBO0VBQ0UsbUJBQW1CO0VBQ25CLGVBQWU7RUFDZixrQkFBa0I7QUFDcEI7O0FBRUE7RUFDRSxtQkFBbUI7RUFDbkIsZUFBZTtFQUNmLGtCQUFrQjtBQUNwQjs7QUFFQTtFQUNFLG1CQUFtQjtFQUNuQix3QkFBd0I7RUFDeEIsZUFBZTtBQUNqQjs7QUFFQTtFQUNFLG1CQUFtQjtFQUNuQix3QkFBd0I7RUFDeEIsZUFBZTtBQUNqQjs7QUFFQTtFQUNFLGNBQWM7RUFDZCxrQkFBa0I7QUFDcEI7O0FBRUE7RUFDRSxjQUFjO0VBQ2Qsa0JBQWtCO0FBQ3BCOztBQUdBO0VBQ0UsaUJBQWlCO0FBQ25COztBQUVBO0VBQ0UscUJBQXFCO0FBQ3ZCOztBQUVBO0VBQ0UsY0FBYztBQUNoQjs7QUFFQTtFQUNFLGNBQWM7QUFDaEI7O0FBRUE7RUFDRSxjQUFjO0FBQ2hCIiwiZmlsZSI6ImNoYXQtbWVzc2FnZS5jb21wb25lbnQuY3NzIiwic291cmNlc0NvbnRlbnQiOlsiOmhvc3Qge1xyXG4gIGRpc3BsYXk6IGJsb2NrO1xyXG59XHJcblxyXG4uY29udGFpbmVyIHtcclxuICB3aWR0aDogMTAwJTtcclxuICBvdmVyZmxvdy14OiBoaWRkZW47XHJcbn1cclxuLm1lc3NhZ2Uge1xyXG4gIGRpc3BsYXk6IGZsZXg7XHJcbiAgZmxleC1mbG93OiByb3cgbm93cmFwO1xyXG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XHJcbiAgcGFkZGluZzogNXB4IDVweDtcclxuICB3aWR0aDogMTAwJTtcclxuICB3b3JkLXdyYXA6IGJyZWFrLXdvcmQ7XHJcbiAgb3ZlcmZsb3ctd3JhcDogYW55d2hlcmU7XHJcbiAgd29yZC1icmVhazogYnJlYWstd29yZDtcclxuICBib3JkZXItYm90dG9tOjFweCBkb3R0ZWQgIzk5OTtcclxufVxyXG5cclxuLm1lc3NhZ2Utc21hbGwge1xyXG4gIGRpc3BsYXk6IGZsZXg7XHJcbiAgZmxleC1mbG93OiByb3cgbm93cmFwO1xyXG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XHJcbiAgcGFkZGluZzogMnB4IDJweDtcclxuICB3aWR0aDogMTAwJTtcclxuICB3b3JkLXdyYXA6IGJyZWFrLXdvcmQ7XHJcbiAgb3ZlcmZsb3ctd3JhcDogYW55d2hlcmU7XHJcbiAgd29yZC1icmVhazogYnJlYWstd29yZDtcclxuICBib3JkZXItYm90dG9tOjFweCBkb3R0ZWQgIzk5OTtcclxufVxyXG5cclxuLmRpcmVjdC1tZXNzYWdlIHtcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiAjNTU1O1xyXG4gIGNvbG9yOiAjQ0NDO1xyXG59XHJcblxyXG4ubWVzc2FnZSAuaW1hZ2Uge1xyXG4gIHBhZGRpbmc6IDBweDtcclxuICB3aWR0aDogNTBweDtcclxuICBoZWlnaHQ6IDUwcHg7XHJcbiAgZmxleC1zaHJpbms6IDA7XHJcbiAgdmVydGljYWwtYWxpZ246IHRvcDtcclxufVxyXG4ubWVzc2FnZSAuaW1hZ2UgaW1nIHtcclxuICB3aWR0aDogMTAwJTtcclxuICBoZWlnaHQ6IDEwMCU7XHJcbiAgdmVydGljYWwtYWxpZ246IGJvdHRvbTtcclxuICBvYmplY3QtZml0OiBjb3ZlcjtcclxuICBvYmplY3QtcG9zaXRpb246IDUwJSAwJTtcclxufVxyXG4ubWVzc2FnZSAuYm9keSB7XHJcbiAgZmxleC1ncm93OiAxO1xyXG59XHJcblxyXG4ubWVzc2FnZS1zbWFsbCAuYm9keSB7XHJcbiAgZmxleC1ncm93OiAxO1xyXG59XHJcblxyXG4ubWVzc2FnZSAudGl0bGUge1xyXG4gIHZlcnRpY2FsLWFsaWduOiB0b3A7XHJcbiAgZm9udC1zaXplOiAxNHB4O1xyXG4gIHBhZGRpbmctbGVmdDogMTJweDtcclxufVxyXG5cclxuLm1lc3NhZ2Utc21hbGwgLnRpdGxlIHtcclxuICB2ZXJ0aWNhbC1hbGlnbjogdG9wO1xyXG4gIGZvbnQtc2l6ZTogMTRweDtcclxuICBwYWRkaW5nLWxlZnQ6IDEycHg7XHJcbn1cclxuXHJcbi5tZXNzYWdlIC50ZXh0IHtcclxuICB2ZXJ0aWNhbC1hbGlnbjogdG9wO1xyXG4gIHBhZGRpbmc6IDJweCAxMnB4IDAgMTJweDtcclxuICBmb250LXNpemU6IDE0cHg7XHJcbn1cclxuXHJcbi5tZXNzYWdlLXNtYWxsIC50ZXh0IHtcclxuICB2ZXJ0aWNhbC1hbGlnbjogdG9wO1xyXG4gIHBhZGRpbmc6IDJweCAxMnB4IDAgMTJweDtcclxuICBmb250LXNpemU6IDE0cHg7XHJcbn1cclxuXHJcbi5tZXNzYWdlIC50aXAge1xyXG4gIGZvbnQtc2l6ZTogOHB4O1xyXG4gIHBhZGRpbmctbGVmdDogMTJweDtcclxufVxyXG5cclxuLm1lc3NhZ2Utc21hbGwgLnRpcCB7XHJcbiAgZm9udC1zaXplOiA4cHg7XHJcbiAgcGFkZGluZy1sZWZ0OiAxMnB4O1xyXG59XHJcblxyXG5cclxuLm1zZy1uYW1lIHtcclxuICBmb250LXdlaWdodDogYm9sZDtcclxufVxyXG5cclxuLm1zZy10ZXh0IHtcclxuICB3aGl0ZS1zcGFjZTogcHJlLXdyYXA7XHJcbn1cclxuXHJcbi5kaWNlYm90LW1lc3NhZ2UgLm1zZy1uYW1lIHtcclxuICBmb250LXNpemU6IDhweDtcclxufVxyXG5cclxuLmRpY2Vib3QtbWVzc2FnZSAubXNnLXRleHQge1xyXG4gIC8qY29sb3I6IzIyRjsqL1xyXG59XHJcblxyXG4uZGlyZWN0LW1lc3NhZ2UuZGljZWJvdC1tZXNzYWdlIC5tc2ctdGV4dCB7XHJcbiAgLypjb2xvcjojQ0NGOyovXHJcbn1cclxuIl19 */"], data: { animation: [
                Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["trigger"])('flyInOut', [
                    Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["transition"])('* => active', [
                        Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["animate"])('200ms ease-out', Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["keyframes"])([
                            Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])({ transform: 'translateX(100px)', opacity: '0', offset: 0 }),
                            Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])({ transform: 'translateX(0)', opacity: '1', offset: 1.0 })
                        ]))
                    ]),
                    Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["transition"])('void => *', [
                        Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["animate"])('200ms ease-out', Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["keyframes"])([
                            Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])({ opacity: '0', offset: 0 }),
                            Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])({ opacity: '1', offset: 1.0 })
                        ]))
                    ])
                ])
            ] } });
    return ChatMessageComponent;
}());

/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵsetClassMetadata"](ChatMessageComponent, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_1__["Component"],
        args: [{
                selector: 'chat-message',
                templateUrl: './chat-message.component.html',
                styleUrls: ['./chat-message.component.css'],
                animations: [
                    Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["trigger"])('flyInOut', [
                        Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["transition"])('* => active', [
                            Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["animate"])('200ms ease-out', Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["keyframes"])([
                                Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])({ transform: 'translateX(100px)', opacity: '0', offset: 0 }),
                                Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])({ transform: 'translateX(0)', opacity: '1', offset: 1.0 })
                            ]))
                        ]),
                        Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["transition"])('void => *', [
                            Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["animate"])('200ms ease-out', Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["keyframes"])([
                                Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])({ opacity: '0', offset: 0 }),
                                Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])({ opacity: '1', offset: 1.0 })
                            ]))
                        ])
                    ])
                ],
                changeDetection: _angular_core__WEBPACK_IMPORTED_MODULE_1__["ChangeDetectionStrategy"].Default
            }]
    }], function () { return [{ type: service_chat_message_service__WEBPACK_IMPORTED_MODULE_4__["ChatMessageService"] }]; }, { chatMessage: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_1__["Input"]
        }], simpleDispFlagTime: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_1__["Input"]
        }], simpleDispFlagUserId: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_1__["Input"]
        }], chatSimpleDispFlag: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_1__["Input"]
        }] }); })();


/***/ }),

/***/ "LjVp":
/*!**********************************************************!*\
  !*** ./src/app/service/game-object-inventory.service.ts ***!
  \**********************************************************/
/*! exports provided: GameObjectInventoryService */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GameObjectInventoryService", function() { return GameObjectInventoryService; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "mrSG");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "fXoL");
/* harmony import */ var _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @udonarium/core/synchronize-object/object-store */ "hm7o");
/* harmony import */ var _udonarium_core_system__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @udonarium/core/system */ "yNnI");
/* harmony import */ var _udonarium_core_system_util_string_util__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @udonarium/core/system/util/string-util */ "baV6");
/* harmony import */ var _udonarium_data_element__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @udonarium/data-element */ "gkrD");
/* harmony import */ var _udonarium_data_summary_setting__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @udonarium/data-summary-setting */ "zP96");
/* harmony import */ var _udonarium_game_character__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @udonarium/game-character */ "M/aK");









var GameObjectInventoryService = /** @class */ (function () {
    function GameObjectInventoryService() {
        var _this = this;
        this.tableInventory = new ObjectInventory(function (object) { return object.location.name === 'table'; });
        this.commonInventory = new ObjectInventory(function (object) { return !_this.isAnyLocation(object.location.name); });
        this.privateInventory = new ObjectInventory(function (object) { return object.location.name === _udonarium_core_system__WEBPACK_IMPORTED_MODULE_3__["Network"].peerId; });
        this.graveyardInventory = new ObjectInventory(function (object) { return object.location.name === 'graveyard'; });
        this.locationMap = new Map();
        this.tagNameMap = new Map();
        this.newLineString = '/';
        this.newLineDataElement = _udonarium_data_element__WEBPACK_IMPORTED_MODULE_5__["DataElement"].create(this.newLineString);
        this.initialize();
    }
    Object.defineProperty(GameObjectInventoryService.prototype, "summarySetting", {
        get: function () { return _udonarium_data_summary_setting__WEBPACK_IMPORTED_MODULE_6__["DataSummarySetting"].instance; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(GameObjectInventoryService.prototype, "sortTag", {
        get: function () { return this.summarySetting.sortTag; },
        set: function (sortTag) { this.summarySetting.sortTag = sortTag; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(GameObjectInventoryService.prototype, "sortOrder", {
        get: function () { return this.summarySetting.sortOrder; },
        set: function (sortOrder) { this.summarySetting.sortOrder = sortOrder; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(GameObjectInventoryService.prototype, "dataTag", {
        get: function () { return this.summarySetting.dataTag; },
        set: function (dataTag) { this.summarySetting.dataTag = dataTag; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(GameObjectInventoryService.prototype, "dataTags", {
        get: function () { return this.summarySetting.dataTags; },
        enumerable: false,
        configurable: true
    });
    GameObjectInventoryService.prototype.initialize = function () {
        var _this = this;
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_3__["EventSystem"].register(this)
            .on('OPEN_NETWORK', function (event) { _this.refresh(); })
            .on('CONNECT_PEER', function (event) { _this.refresh(); })
            .on('DISCONNECT_PEER', function (event) { _this.refresh(); })
            .on('UPDATE_GAME_OBJECT', -1000, function (event) {
            var object = _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_2__["ObjectStore"].instance.get(event.data.identifier);
            if (!object)
                return;
            if (object instanceof _udonarium_game_character__WEBPACK_IMPORTED_MODULE_7__["GameCharacter"]) {
                var prevLocation = _this.locationMap.get(object.identifier);
                if (object.location.name !== prevLocation) {
                    _this.locationMap.set(object.identifier, object.location.name);
                    _this.refresh();
                }
            }
            else if (object instanceof _udonarium_data_element__WEBPACK_IMPORTED_MODULE_5__["DataElement"]) {
                if (!_this.containsInGameCharacter(object))
                    return;
                var prevName = _this.tagNameMap.get(object.identifier);
                if ((_this.dataTags.includes(prevName) || _this.dataTags.includes(object.name)) && object.name !== prevName) {
                    _this.tagNameMap.set(object.identifier, object.name);
                    _this.refreshDataElements();
                }
                if (_this.sortTag === object.name) {
                    _this.refreshSort();
                }
                if (0 < object.children.length) {
                    _this.refreshDataElements();
                    _this.refreshSort();
                }
                _this.callInventoryUpdate();
            }
            else if (object instanceof _udonarium_data_summary_setting__WEBPACK_IMPORTED_MODULE_6__["DataSummarySetting"]) {
                _this.refreshDataElements();
                _this.refreshSort();
                _this.callInventoryUpdate();
            }
        })
            .on('DELETE_GAME_OBJECT', 1000, function (event) {
            _this.locationMap.delete(event.data.identifier);
            _this.tagNameMap.delete(event.data.identifier);
            _this.refresh();
        })
            .on('SYNCHRONIZE_FILE_LIST', function (event) {
            if (event.isSendFromSelf)
                _this.callInventoryUpdate();
        });
    };
    GameObjectInventoryService.prototype.containsInGameCharacter = function (element) {
        var parent = element.parent;
        var aliasName = _udonarium_game_character__WEBPACK_IMPORTED_MODULE_7__["GameCharacter"].aliasName;
        while (parent) {
            if (parent.aliasName === aliasName)
                return true;
            parent = parent.parent;
        }
        return false;
    };
    GameObjectInventoryService.prototype.refresh = function () {
        this.refreshObjects();
        this.refreshDataElements();
        this.refreshSort();
        this.callInventoryUpdate();
    };
    GameObjectInventoryService.prototype.refreshObjects = function () {
        this.tableInventory.refreshObjects();
        this.commonInventory.refreshObjects();
        this.privateInventory.refreshObjects();
        this.graveyardInventory.refreshObjects();
    };
    GameObjectInventoryService.prototype.refreshDataElements = function () {
        this.tableInventory.refreshDataElements();
        this.commonInventory.refreshDataElements();
        this.privateInventory.refreshDataElements();
        this.graveyardInventory.refreshDataElements();
    };
    GameObjectInventoryService.prototype.refreshSort = function () {
        this.tableInventory.refreshSort();
        this.commonInventory.refreshSort();
        this.privateInventory.refreshSort();
        this.graveyardInventory.refreshSort();
    };
    GameObjectInventoryService.prototype.callInventoryUpdate = function () {
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_3__["EventSystem"].trigger('UPDATE_INVENTORY', null);
    };
    GameObjectInventoryService.prototype.isAnyLocation = function (location) {
        var e_1, _a;
        if (location === 'table' || location === _udonarium_core_system__WEBPACK_IMPORTED_MODULE_3__["Network"].peerId || location === 'graveyard')
            return true;
        try {
            for (var _b = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(_udonarium_core_system__WEBPACK_IMPORTED_MODULE_3__["Network"].peerContexts), _c = _b.next(); !_c.done; _c = _b.next()) {
                var conn = _c.value;
                if (conn.isOpen && location === conn.peerId) {
                    return true;
                }
            }
        }
        catch (e_1_1) { e_1 = { error: e_1_1 }; }
        finally {
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            }
            finally { if (e_1) throw e_1.error; }
        }
        return false;
    };
    GameObjectInventoryService.ɵfac = function GameObjectInventoryService_Factory(t) { return new (t || GameObjectInventoryService)(); };
    GameObjectInventoryService.ɵprov = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdefineInjectable"]({ token: GameObjectInventoryService, factory: GameObjectInventoryService.ɵfac, providedIn: 'root' });
    return GameObjectInventoryService;
}());

/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵsetClassMetadata"](GameObjectInventoryService, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_1__["Injectable"],
        args: [{
                providedIn: 'root'
            }]
    }], function () { return []; }, null); })();
var ObjectInventory = /** @class */ (function () {
    function ObjectInventory(classifier) {
        this.classifier = classifier;
        this.newLineString = '/';
        this.newLineDataElement = _udonarium_data_element__WEBPACK_IMPORTED_MODULE_5__["DataElement"].create(this.newLineString);
        this._tabletopObjects = [];
        this._dataElementMap = new Map();
        this.needsRefreshObjects = true;
        this.needsRefreshElements = true;
        this.needsSort = true;
    }
    Object.defineProperty(ObjectInventory.prototype, "summarySetting", {
        get: function () { return _udonarium_data_summary_setting__WEBPACK_IMPORTED_MODULE_6__["DataSummarySetting"].instance; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ObjectInventory.prototype, "sortTag", {
        get: function () { return this.summarySetting.sortTag; },
        set: function (sortTag) { this.summarySetting.sortTag = sortTag; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ObjectInventory.prototype, "sortOrder", {
        get: function () { return this.summarySetting.sortOrder; },
        set: function (sortOrder) { this.summarySetting.sortOrder = sortOrder; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ObjectInventory.prototype, "dataTag", {
        get: function () { return this.summarySetting.dataTag; },
        set: function (dataTag) { this.summarySetting.dataTag = dataTag; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ObjectInventory.prototype, "dataTags", {
        get: function () { return this.summarySetting.dataTags; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ObjectInventory.prototype, "tabletopObjects", {
        get: function () {
            if (this.needsRefreshObjects) {
                this._tabletopObjects = this.searchTabletopObjects();
                this.needsRefreshObjects = false;
            }
            if (this.needsSort) {
                this._tabletopObjects = this.sortTabletopObjects(this._tabletopObjects);
                this.needsSort = false;
            }
            return this._tabletopObjects;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ObjectInventory.prototype, "length", {
        get: function () {
            if (this.needsRefreshObjects) {
                this._tabletopObjects = this.searchTabletopObjects();
                this.needsRefreshObjects = false;
            }
            return this._tabletopObjects.length;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ObjectInventory.prototype, "dataElementMap", {
        get: function () {
            var e_2, _a;
            var _this = this;
            if (this.needsRefreshElements) {
                this._dataElementMap.clear();
                var caches_2 = this.tabletopObjects;
                var _loop_1 = function (object) {
                    if (!object.rootDataElement)
                        return "continue";
                    var elements = this_1.dataTags.map(function (tag) { return tag === _this.newLineString ? _this.newLineDataElement : object.rootDataElement.getFirstElementByName(tag); });
                    this_1._dataElementMap.set(object.identifier, elements);
                };
                var this_1 = this;
                try {
                    for (var caches_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(caches_2), caches_1_1 = caches_1.next(); !caches_1_1.done; caches_1_1 = caches_1.next()) {
                        var object = caches_1_1.value;
                        _loop_1(object);
                    }
                }
                catch (e_2_1) { e_2 = { error: e_2_1 }; }
                finally {
                    try {
                        if (caches_1_1 && !caches_1_1.done && (_a = caches_1.return)) _a.call(caches_1);
                    }
                    finally { if (e_2) throw e_2.error; }
                }
                this.needsRefreshElements = false;
            }
            return this._dataElementMap;
        },
        enumerable: false,
        configurable: true
    });
    ObjectInventory.prototype.refreshObjects = function () {
        this.needsRefreshObjects = true;
    };
    ObjectInventory.prototype.refreshDataElements = function () {
        this.needsRefreshElements = true;
    };
    ObjectInventory.prototype.refreshSort = function () {
        this.needsSort = true;
    };
    ObjectInventory.prototype.searchTabletopObjects = function () {
        var e_3, _a;
        var objects = _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_2__["ObjectStore"].instance.getObjects(_udonarium_game_character__WEBPACK_IMPORTED_MODULE_7__["GameCharacter"]);
        var caches = [];
        try {
            for (var objects_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(objects), objects_1_1 = objects_1.next(); !objects_1_1.done; objects_1_1 = objects_1.next()) {
                var object = objects_1_1.value;
                if (this.classifier(object))
                    caches.push(object);
            }
        }
        catch (e_3_1) { e_3 = { error: e_3_1 }; }
        finally {
            try {
                if (objects_1_1 && !objects_1_1.done && (_a = objects_1.return)) _a.call(objects_1);
            }
            finally { if (e_3) throw e_3.error; }
        }
        return caches;
    };
    ObjectInventory.prototype.sortTabletopObjects = function (objects) {
        var _this = this;
        var sortTag = this.sortTag.length ? this.sortTag.trim() : '';
        var sortOrder = this.sortOrder === 'ASC' ? -1 : 1;
        if (sortTag.length < 1)
            return objects;
        objects.sort(function (a, b) {
            var aElm = a.rootDataElement.getFirstElementByName(sortTag);
            var bElm = b.rootDataElement.getFirstElementByName(sortTag);
            if (!aElm && !bElm)
                return 0;
            if (!bElm)
                return -1;
            if (!aElm)
                return 1;
            var aValue = _this.convertToSortableValue(aElm);
            var bValue = _this.convertToSortableValue(bElm);
            if (aValue < bValue)
                return sortOrder;
            if (aValue > bValue)
                return sortOrder * -1;
            return 0;
        });
        return objects;
    };
    ObjectInventory.prototype.convertToSortableValue = function (dataElement) {
        var value = dataElement.isNumberResource ? dataElement.currentValue : dataElement.value;
        var resultStr = _udonarium_core_system_util_string_util__WEBPACK_IMPORTED_MODULE_4__["StringUtil"].toHalfWidth((value + '').trim());
        var resultNum = +resultStr;
        return Number.isNaN(resultNum) ? resultStr : resultNum;
    };
    return ObjectInventory;
}());


/***/ }),

/***/ "M/aK":
/*!*****************************************!*\
  !*** ./src/app/class/game-character.ts ***!
  \*****************************************/
/*! exports provided: GameCharacter */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GameCharacter", function() { return GameCharacter; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "mrSG");
/* harmony import */ var _chat_palette__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./chat-palette */ "uH+U");
/* harmony import */ var _core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./core/synchronize-object/decorator */ "1lIu");
/* harmony import */ var _data_element__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./data-element */ "gkrD");
/* harmony import */ var _tabletop_object__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./tabletop-object */ "e8gA");
/* harmony import */ var _core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./core/synchronize-object/object-store */ "hm7o");





//import { GameObjectInventoryService } from 'service/game-object-inventory.service';

var GameCharacter = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"])(GameCharacter, _super);
    function GameCharacter() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.rotate = 0;
        _this.roll = 0;
        _this.hideInventory = false;
        _this.nonTalkFlag = false;
        _this.overViewWidth = 270;
        _this.overViewMaxHeight = 250;
        _this.chatColorCode = ["#000000", "#FF0000", "#0099FF"];
        _this.syncDummyCounter = 0;
        _this._selectedTachieNum = 0;
        return _this;
    }
    GameCharacter_1 = GameCharacter;
    Object.defineProperty(GameCharacter.prototype, "selectedTachieNum", {
        get: function () {
            if (this._selectedTachieNum > (this.imageDataElement.children.length - 1)) {
                this._selectedTachieNum = this.imageDataElement.children.length - 1;
            }
            if (this._selectedTachieNum < 0) {
                this._selectedTachieNum = 0;
            }
            return this._selectedTachieNum;
        },
        set: function (num) {
            console.log("set selectedTachieNum NUM=" + num + " len" + this.imageDataElement.children.length);
            if (num > (this.imageDataElement.children.length - 1)) {
                num = this.imageDataElement.children.length - 1;
            }
            if (num < 0) {
                num = 0;
            }
            this._selectedTachieNum = num;
            console.log("set selectedTachieNum" + this._selectedTachieNum);
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(GameCharacter.prototype, "name", {
        get: function () { return this.getCommonValue('name', ''); },
        set: function (value) { this.setCommonValue('name', value); },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(GameCharacter.prototype, "size", {
        get: function () { return this.getCommonValue('size', 1); },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(GameCharacter.prototype, "chatPalette", {
        get: function () {
            var e_1, _a;
            try {
                for (var _b = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(this.children), _c = _b.next(); !_c.done; _c = _b.next()) {
                    var child = _c.value;
                    if (child instanceof _chat_palette__WEBPACK_IMPORTED_MODULE_1__["ChatPalette"])
                        return child;
                }
            }
            catch (e_1_1) { e_1 = { error: e_1_1 }; }
            finally {
                try {
                    if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
                }
                finally { if (e_1) throw e_1.error; }
            }
            return null;
        },
        enumerable: false,
        configurable: true
    });
    GameCharacter.prototype.TestExec = function () {
        console.log('TestExec');
    };
    Object.defineProperty(GameCharacter.prototype, "remoteController", {
        get: function () {
            var e_2, _a;
            try {
                for (var _b = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(this.children), _c = _b.next(); !_c.done; _c = _b.next()) {
                    var child = _c.value;
                    if (child instanceof _chat_palette__WEBPACK_IMPORTED_MODULE_1__["BuffPalette"]) {
                        return child;
                    }
                }
            }
            catch (e_2_1) { e_2 = { error: e_2_1 }; }
            finally {
                try {
                    if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
                }
                finally { if (e_2) throw e_2.error; }
            }
            return null;
        },
        enumerable: false,
        configurable: true
    });
    GameCharacter.create = function (name, size, imageIdentifier) {
        var gameCharacter = new GameCharacter_1();
        gameCharacter.createDataElements();
        gameCharacter.initialize();
        gameCharacter.createTestGameDataElement(name, size, imageIdentifier);
        return gameCharacter;
    };
    GameCharacter.prototype.addExtendData = function () {
        this.addBuffDataElement();
        var istachie = this.detailDataElement.getElementsByName('立絵位置');
        if (istachie.length == 0) {
            var testElement = _data_element__WEBPACK_IMPORTED_MODULE_3__["DataElement"].create('立絵位置', '', {}, '立絵位置' + this.identifier);
            this.detailDataElement.appendChild(testElement);
            testElement.appendChild(_data_element__WEBPACK_IMPORTED_MODULE_3__["DataElement"].create('POS', 11, { 'type': 'numberResource', 'currentValue': '0' }, 'POS_' + this.identifier));
        }
        var isbuff = this.buffDataElement.getElementsByName('BUFF/DEBUFF');
        if (isbuff.length == 0) {
            var buffElement = _data_element__WEBPACK_IMPORTED_MODULE_3__["DataElement"].create('BUFF/DEBUFF', '', {}, 'BUFF/DEBUFF' + this.identifier);
            this.buffDataElement.appendChild(buffElement);
        }
        if (this.remoteController == null) {
            var controller = new _chat_palette__WEBPACK_IMPORTED_MODULE_1__["BuffPalette"]('RemotController_' + this.identifier);
            controller.setPalette("\u7BC4\u4F8B\uFF1A\n\u30DE\u30C3\u30B9\u30EB\u30D9\u30A2\u30FC DB+2 3\n\u30AF\u30EA\u30C6\u30A3\u30AB\u30EB\u30EC\u30A4 A 18\n\u30BB\u30A4\u30AF\u30EA\u30C3\u30C9\u30A6\u30A7\u30DD\u30F3 \u547D+1\u653B+2 18");
            controller.initialize();
            this.appendChild(controller);
        }
    };
    GameCharacter.prototype.clone = function () {
        var e_3, _a;
        var cloneObject = _super.prototype.clone.call(this);
        var objectname;
        var reg = new RegExp('^(.*)_([0-9]+)$');
        var res = cloneObject.name.match(reg);
        var cloneNumber = 0;
        if (res != null && res.length == 3) {
            objectname = res[1];
            cloneNumber = parseInt(res[2]) + 1;
        }
        else {
            objectname = cloneObject.name;
            cloneNumber = 2;
        }
        var list = _core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_5__["ObjectStore"].instance.getObjects(GameCharacter_1);
        try {
            for (var list_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(list), list_1_1 = list_1.next(); !list_1_1.done; list_1_1 = list_1.next()) {
                var character = list_1_1.value;
                if (character.location.name == 'graveyard')
                    continue;
                res = character.name.match(reg);
                if (res != null && res.length == 3 && res[1] == objectname) {
                    var numberChk = parseInt(res[2]) + 1;
                    if (cloneNumber <= numberChk) {
                        cloneNumber = numberChk;
                    }
                }
            }
        }
        catch (e_3_1) { e_3 = { error: e_3_1 }; }
        finally {
            try {
                if (list_1_1 && !list_1_1.done && (_a = list_1.return)) _a.call(list_1);
            }
            finally { if (e_3) throw e_3.error; }
        }
        cloneObject.name = objectname + '_' + cloneNumber;
        cloneObject.update();
        return cloneObject;
    };
    GameCharacter.prototype.createTestGameDataElement = function (name, size, imageIdentifier) {
        this.createDataElements();
        var nameElement = _data_element__WEBPACK_IMPORTED_MODULE_3__["DataElement"].create('name', name, {}, 'name_' + this.identifier);
        var sizeElement = _data_element__WEBPACK_IMPORTED_MODULE_3__["DataElement"].create('size', size, {}, 'size_' + this.identifier);
        if (this.imageDataElement.getFirstElementByName('imageIdentifier')) {
            this.imageDataElement.getFirstElementByName('imageIdentifier').value = imageIdentifier;
        }
        var resourceElement = _data_element__WEBPACK_IMPORTED_MODULE_3__["DataElement"].create('資源', '', {}, '資源' + this.identifier);
        var hpElement = _data_element__WEBPACK_IMPORTED_MODULE_3__["DataElement"].create('HP', 200, { 'type': 'numberResource', 'currentValue': '200' }, 'HP_' + this.identifier);
        var mpElement = _data_element__WEBPACK_IMPORTED_MODULE_3__["DataElement"].create('MP', 100, { 'type': 'numberResource', 'currentValue': '100' }, 'MP_' + this.identifier);
        this.commonDataElement.appendChild(nameElement);
        this.commonDataElement.appendChild(sizeElement);
        this.detailDataElement.appendChild(resourceElement);
        resourceElement.appendChild(hpElement);
        resourceElement.appendChild(mpElement);
        //TEST
        var testElement = _data_element__WEBPACK_IMPORTED_MODULE_3__["DataElement"].create('情報', '', {}, '情報' + this.identifier);
        this.detailDataElement.appendChild(testElement);
        testElement.appendChild(_data_element__WEBPACK_IMPORTED_MODULE_3__["DataElement"].create('説明', '在這裡寫上說明\nABCDE', { 'type': 'note' }, '説明' + this.identifier));
        testElement.appendChild(_data_element__WEBPACK_IMPORTED_MODULE_3__["DataElement"].create('筆記', '任意文字列\n１\n２\n３\n４\n５', { 'type': 'note' }, '筆記' + this.identifier));
        //TEST
        testElement = _data_element__WEBPACK_IMPORTED_MODULE_3__["DataElement"].create('能力', '', {}, '能力' + this.identifier);
        this.detailDataElement.appendChild(testElement);
        testElement.appendChild(_data_element__WEBPACK_IMPORTED_MODULE_3__["DataElement"].create('器用度', 24, {}, '器用度' + this.identifier));
        testElement.appendChild(_data_element__WEBPACK_IMPORTED_MODULE_3__["DataElement"].create('敏捷度', 24, {}, '敏捷度' + this.identifier));
        testElement.appendChild(_data_element__WEBPACK_IMPORTED_MODULE_3__["DataElement"].create('筋力', 24, {}, '筋力' + this.identifier));
        testElement.appendChild(_data_element__WEBPACK_IMPORTED_MODULE_3__["DataElement"].create('生命力', 24, {}, '生命力' + this.identifier));
        testElement.appendChild(_data_element__WEBPACK_IMPORTED_MODULE_3__["DataElement"].create('知力', 24, {}, '知力' + this.identifier));
        testElement.appendChild(_data_element__WEBPACK_IMPORTED_MODULE_3__["DataElement"].create('精神力', 24, {}, '精神力' + this.identifier));
        //TEST
        testElement = _data_element__WEBPACK_IMPORTED_MODULE_3__["DataElement"].create('戰鬥特技', '', {}, '戰鬥特技' + this.identifier);
        this.detailDataElement.appendChild(testElement);
        testElement.appendChild(_data_element__WEBPACK_IMPORTED_MODULE_3__["DataElement"].create('Lv1', '全力攻撃', {}, 'Lv1' + this.identifier));
        testElement.appendChild(_data_element__WEBPACK_IMPORTED_MODULE_3__["DataElement"].create('Lv3', '武器嫻熟/劍', {}, 'Lv3' + this.identifier));
        testElement.appendChild(_data_element__WEBPACK_IMPORTED_MODULE_3__["DataElement"].create('Lv5', '武器嫻熟/劍Ⅱ', {}, 'Lv5' + this.identifier));
        testElement.appendChild(_data_element__WEBPACK_IMPORTED_MODULE_3__["DataElement"].create('Lv7', '頑強', {}, 'Lv7' + this.identifier));
        testElement.appendChild(_data_element__WEBPACK_IMPORTED_MODULE_3__["DataElement"].create('Lv9', '順勢斬', {}, 'Lv9' + this.identifier));
        testElement.appendChild(_data_element__WEBPACK_IMPORTED_MODULE_3__["DataElement"].create('自動', '治癒適正', {}, '自動' + this.identifier));
        //
        var domParser = new DOMParser();
        var gameCharacterXMLDocument = domParser.parseFromString(this.rootDataElement.toXml(), 'application/xml');
        var palette = new _chat_palette__WEBPACK_IMPORTED_MODULE_1__["ChatPalette"]('ChatPalette_' + this.identifier);
        palette.setPalette("\u5C0D\u8A71\u7D44\u5408\u7248\u7BC4\u4F8B\uFF1A\n2d6+1 \u30C0\u30A4\u30B9\u30ED\u30FC\u30EB\n\uFF11\uFF44\uFF12\uFF10\uFF0B{\u654F\u6377}\uFF0B\uFF5B\u683C\u95D8\uFF5D\u3000{name}\u306E\u683C\u95D8\uFF01\n//\u654F\u6377=10+{\u654F\u6377A}\n//\u654F\u6377A=10\n//\u683C\u95D8\uFF1D\uFF11");
        palette.initialize();
        this.appendChild(palette);
        this.addExtendData();
    };
    GameCharacter.prototype.createTestGameDataElementExtendSample = function (name, size, imageIdentifier) {
        this.createDataElements();
        var nameElement = _data_element__WEBPACK_IMPORTED_MODULE_3__["DataElement"].create('name', name, {}, 'name_' + this.identifier);
        var sizeElement = _data_element__WEBPACK_IMPORTED_MODULE_3__["DataElement"].create('size', size, {}, 'size_' + this.identifier);
        if (this.imageDataElement.getFirstElementByName('imageIdentifier')) {
            this.imageDataElement.getFirstElementByName('imageIdentifier').value = imageIdentifier;
        }
        //    let resourceElement: DataElement = DataElement.create('リソース', '', {}, 'リソース' + this.identifier);
        //    let hpElement: DataElement = DataElement.create('HP', 200, { 'type': 'numberResource', 'currentValue': '200' }, 'HP_' + this.identifier);
        //    let mpElement: DataElement = DataElement.create('MP', 100, { 'type': 'numberResource', 'currentValue': '100' }, 'MP_' + this.identifier);
        this.commonDataElement.appendChild(nameElement);
        this.commonDataElement.appendChild(sizeElement);
        //    this.detailDataElement.appendChild(resourceElement);
        //    resourceElement.appendChild(hpElement);
        //    resourceElement.appendChild(mpElement);
        //TEST
        var testElement = _data_element__WEBPACK_IMPORTED_MODULE_3__["DataElement"].create('情報', '', {}, '情報' + this.identifier);
        this.detailDataElement.appendChild(testElement);
        testElement.appendChild(_data_element__WEBPACK_IMPORTED_MODULE_3__["DataElement"].create('説明', "\u3053\u306E\u30AD\u30E3\u30E9\u30AF\u30BF\u30FC\u306F\u30AD\u30E3\u30E9\u30AF\u30BF\u30FCB\u306E\u88DC\u52A9\u7528\u306E\u30B3\u30DE\u3092\u4F5C\u308B\u3068\u304D\u306E\u30B5\u30F3\u30D7\u30EB\u3067\u3059\u3002\n\u307E\u305A\u3001\u3053\u306E\u30AD\u30E3\u30E9\u30AF\u30BF\u30FC\u306F\u30AD\u30E3\u30E9\u30AF\u30BF\u30FC\u30B7\u30FC\u30C8\u306E\u8A2D\u5B9A\u3067\u300C\u30C6\u30FC\u30D6\u30EB\u30A4\u30F3\u30D9\u30F3\u30C8\u30EA\u975E\u8868\u793A\u300D\u300C\u767A\u8A00\u3092\u3057\u306A\u3044\u300D\u306E\u30C1\u30A7\u30C3\u30AF\u304C\u5165\u3063\u3066\u3044\u307E\u3059\u3002\n\u3053\u306E\u3088\u3046\u306B\u8A2D\u5B9A\u3057\u305F\u30AD\u30E3\u30E9\u30AF\u30BF\u30FC\u306F\u300C\u975E\u8868\u793A\u300D\u3067\u8DB3\u5143\u306E\u30B5\u30FC\u30AF\u30EB\u306E\u8272\u304C\u9752\u306B\u5909\u308F\u308A\u3001\u30C6\u30FC\u30D6\u30EB\u30A4\u30F3\u30D9\u30F3\u30C8\u30EA\u3084\u30EA\u30EA\u30A3\u8FFD\u52A0\u6A5F\u80FD\u306E\u30AB\u30A6\u30F3\u30BF\u30FC\u30EA\u30E2\u30B3\u30F3\u306B\u8868\u793A\u3055\u308C\u306A\u304F\u306A\u308A\u307E\u3059\u3002\n\u6226\u95D8\u975E\u53C2\u52A0\u30AD\u30E3\u30E9\u3092\u7ACB\u3061\u7D75\u3084\u30B3\u30DE\u306E\u305F\u3081\u306B\u30C6\u30FC\u30D6\u30EB\u306B\u51FA\u3057\u305F\u3044\u5834\u5408\u306B\u4F7F\u7528\u3067\u304D\u307E\u3059\u3002\n\u307E\u305F\u3001\u30D7\u30ED\u30D5\u7B49\u306E\u8FFD\u52A0\u60C5\u5831\u3092\u8868\u793A\u3059\u308B\u305F\u3081\u306E\u30B3\u30DE\u7B49\u3001\u767A\u8A00\u304C\u4E0D\u8981\u306A\u5834\u5408\u3001\u300C\u767A\u8A00\u3092\u3057\u306A\u3044\u300D\u306E\u30C1\u30A7\u30C3\u30AF\u3092\u5165\u308C\u308B\u3053\u3068\u3067\u30C1\u30E3\u30C3\u30C8\u30BF\u30D6\u7B49\u306E\u30EA\u30B9\u30C8\u306B\u8868\u793A\u3055\u308C\u306A\u304F\u306A\u308A\u307E\u3059\u3002\n\u90E8\u4F4D\u6570\u304C10\u3042\u308B\u30E2\u30F3\u30B9\u30BF\u30FC\u306E\u99D2\u3092\u51FA\u3057\u305F\u3051\u3069\u982D\u3060\u3051\u558B\u308C\u3070\u3044\u3044\u3001\u7B49\u306E\u5834\u5408\u306B\u4F7F\u3044\u307E\u3059\u3002\u3053\u306E\u30C1\u30A7\u30C3\u30AF\u3092ON\u306B\u3059\u308B\u3068\u30B3\u30DE\u306E\u4E0A\u306E\u30AD\u30E3\u30E9\u540D\u304C\u767D\u5730\u306B\u9ED2\u6587\u5B57\u306B\u5909\u308F\u308A\u307E\u3059\u3002\n\u6B21\u306B\u3001\u30DD\u30C3\u30D7\u30A2\u30C3\u30D7\u306E\u30B5\u30A4\u30BA\u8A2D\u5B9A\u3067\u3059\u3002\u30EA\u30EA\u30A3\u3067\u306F\u30AD\u30E3\u30E9\u30AF\u30BF\u30FC\u30B7\u30FC\u30C8\u304B\u3089\u30DD\u30C3\u30D7\u30A2\u30C3\u30D7\u306E\u6A2A\u5E45\u3001\u6700\u5927\u7E26\u5E45\u3092\u5909\u66F4\u53EF\u80FD\u306A\u69D8\u306B\u62E1\u5F35\u3057\u3066\u3044\u307E\u3059\u3002\n\u3053\u308C\u3067\u904A\u3076\u4EF2\u9593\u304C\u8A31\u3057\u3066\u304F\u308C\u308C\u3070\u3001\u6570\u5343\u6587\u5B57\u306E\u30D7\u30ED\u30D5\u30A3\u30FC\u30EB\u3092\u66F8\u3044\u3066\u3082\u5927\u4E08\u592B\u3067\u3059\u3002\n\n\u306A\u304A\u3001\u30DD\u30C3\u30D7\u30A2\u30C3\u30D7\u3059\u308B\u9805\u76EE\u306E\u8A2D\u5B9A\u306F \u30A4\u30F3\u30D9\u30F3\u30C8\u30EA\uFF1E\u8A2D\u5B9A\uFF1E\u8868\u793A\u9805\u76EE \u3067\u884C\u3044\u307E\u3059\u3002\n\u30EA\u30EA\u30A3\u3067\u306F\u8AAC\u660E\u306E\u305F\u3081\u521D\u671F\u306E\u9805\u76EE\u306B\u60C5\u5831\u3092\u306B\u8FFD\u52A0\u3057\u3066\u3044\u308B\u306E\u3067\u3001\u60C5\u5831\u306E\u5B50\u9805\u76EE\u306E\u3053\u306E\u6587\u7AE0\u3067\u3042\u308B\u300C\u8AAC\u660E\u300D\u3068\u300C\u6301\u3061\u7269\u300D\u304C\u8868\u793A\u3055\u308C\u3066\u3044\u307E\u3059\u3002\n\u5B9A\u7FA9\u3055\u308C\u3066\u3044\u3066\u3082\u6301\u3063\u3066\u3044\u306A\u3044\u9805\u76EE\u306F\u8868\u793A\u3055\u308C\u306A\u3044\u306E\u3067\u3053\u306E\u30B3\u30DE\u304B\u3089\u306FHP\u3084\u80FD\u529B\u5024\u3092\u524A\u3063\u3066\u3044\u307E\u3059\u3002\n\u30B2\u30FC\u30E0\u3054\u3068\u306B\u4F7F\u3044\u3084\u3059\u3044\u3088\u3046\u306B\u4F7F\u3063\u3066\u304F\u3060\u3055\u3044\u3002\n", { 'type': 'note' }, '説明' + this.identifier));
        testElement.appendChild(_data_element__WEBPACK_IMPORTED_MODULE_3__["DataElement"].create('持有物', "\u3053\u3046\u3044\u3063\u305F\u6587\u7AE0\u3082\u898B\u3084\u3059\u304F\u306A\u308A\u307E\u3059\u3002\n\u30A2\u30A4\u30C6\u30E01\uFF1A3\u500B\u3000\u52B9\u679C\u3007\u3007\n\u30A2\u30A4\u30C6\u30E02\uFF1A3\u500B\u3000\u52B9\u679C\u30D1\u30FC\u30C6\u30A3\u5185\u4E00\u4EBA\u306EHP\u3092XX\u3059\u308B\n\u30A2\u30A4\u30C6\u30E03\uFF1A3\u500B\u3000\u52B9\u679C\u6575\u4E00\u4EBA\u306E\u9B54\u6CD5\u3092\u25B3\u3059\u308B\n\u30A2\u30A4\u30C6\u30E04\uFF1A3\u500B\u3000\u52B9\u679CA\n\u30A2\u30A4\u30C6\u30E05\uFF1A3\u500B\u3000\u52B9\u679CB", { 'type': 'note' }, '持有物' + this.identifier));
        var domParser = new DOMParser();
        var gameCharacterXMLDocument = domParser.parseFromString(this.rootDataElement.toXml(), 'application/xml');
        var palette = new _chat_palette__WEBPACK_IMPORTED_MODULE_1__["ChatPalette"]('ChatPalette_' + this.identifier);
        palette.setPalette("\u5C0D\u8A71\u7D44\u5408\u7248\u7BC4\u4F8B\uFF1A\n2d6+1 \u30C0\u30A4\u30B9\u30ED\u30FC\u30EB\n\uFF11\uFF44\uFF12\uFF10\uFF0B{\u654F\u6377}\uFF0B\uFF5B\u683C\u95D8\uFF5D\u3000{name}\u306E\u683C\u95D8\uFF01\n//\u654F\u6377=10+{\u654F\u6377A}\n//\u654F\u6377A=10\n//\u683C\u95D8\uFF1D\uFF11");
        palette.initialize();
        this.appendChild(palette);
        this.addExtendData();
    };
    var GameCharacter_1;
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_2__["SyncVar"])()
    ], GameCharacter.prototype, "rotate", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_2__["SyncVar"])()
    ], GameCharacter.prototype, "roll", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_2__["SyncVar"])()
    ], GameCharacter.prototype, "hideInventory", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_2__["SyncVar"])()
    ], GameCharacter.prototype, "nonTalkFlag", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_2__["SyncVar"])()
    ], GameCharacter.prototype, "overViewWidth", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_2__["SyncVar"])()
    ], GameCharacter.prototype, "overViewMaxHeight", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_2__["SyncVar"])()
    ], GameCharacter.prototype, "chatColorCode", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_2__["SyncVar"])()
    ], GameCharacter.prototype, "syncDummyCounter", void 0);
    GameCharacter = GameCharacter_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_2__["SyncObject"])('character')
    ], GameCharacter);
    return GameCharacter;
}(_tabletop_object__WEBPACK_IMPORTED_MODULE_4__["TabletopObject"]));



/***/ }),

/***/ "M9xM":
/*!******************************************!*\
  !*** ./src/app/service/panel.service.ts ***!
  \******************************************/
/*! exports provided: PanelService */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PanelService", function() { return PanelService; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "fXoL");


var PanelService = /** @class */ (function () {
    function PanelService(componentFactoryResolver) {
        this.componentFactoryResolver = componentFactoryResolver;
        this.title = '無名のパネル';
        this.left = 0;
        this.top = 0;
        this.width = 100;
        this.height = 100;
        this.isCutIn = false; //この方式でよいか検討のこと
        this.cutInIdentifier = '';
        this.chatTab = null;
        this.scrollablePanel = null;
    }
    Object.defineProperty(PanelService.prototype, "isShow", {
        get: function () {
            return this.panelComponentRef ? true : false;
        },
        enumerable: false,
        configurable: true
    });
    PanelService.prototype.open = function (childComponent, option, parentViewContainerRef) {
        if (!parentViewContainerRef) {
            parentViewContainerRef = PanelService.defaultParentViewContainerRef;
        }
        var panelComponentRef;
        var injector = parentViewContainerRef.injector;
        var panelComponentFactory = this.componentFactoryResolver.resolveComponentFactory(PanelService.UIPanelComponentClass);
        var bodyComponentFactory = this.componentFactoryResolver.resolveComponentFactory(childComponent);
        panelComponentRef = parentViewContainerRef.createComponent(panelComponentFactory, parentViewContainerRef.length, injector);
        var bodyComponentRef = panelComponentRef.instance.content.createComponent(bodyComponentFactory);
        var childPanelService = panelComponentRef.injector.get(PanelService);
        childPanelService.panelComponentRef = panelComponentRef;
        if (option) {
            if (option.title)
                childPanelService.title = option.title;
            if (option.top)
                childPanelService.top = option.top;
            if (option.left)
                childPanelService.left = option.left;
            if (option.width)
                childPanelService.width = option.width;
            if (option.height)
                childPanelService.height = option.height;
            if (option.isCutIn) {
                childPanelService.isCutIn = option.isCutIn; //この方式でよいか検討のこと
            }
            if (option.cutInIdentifier) {
                childPanelService.cutInIdentifier = option.cutInIdentifier; //この方式でよいか検討のこと
            }
            //      if (option.chatTab){
            //         childPanelService.chatTab = option.chatTab;  //この方式でよいか検討のこと
            //      }
        }
        panelComponentRef.onDestroy(function () {
            childPanelService.panelComponentRef = null;
        });
        return bodyComponentRef.instance;
    };
    PanelService.prototype.close = function () {
        if (this.panelComponentRef) {
            this.panelComponentRef.destroy();
            this.panelComponentRef = null;
        }
    };
    PanelService.UIPanelComponentClass = null;
    PanelService.ɵfac = function PanelService_Factory(t) { return new (t || PanelService)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["ComponentFactoryResolver"])); };
    PanelService.ɵprov = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineInjectable"]({ token: PanelService, factory: PanelService.ɵfac });
    return PanelService;
}());

/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](PanelService, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Injectable"]
    }], function () { return [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ComponentFactoryResolver"] }]; }, null); })();


/***/ }),

/***/ "MDT1":
/*!********************************************************************!*\
  !*** ./src/app/class/core/synchronize-object/object-serializer.ts ***!
  \********************************************************************/
/*! exports provided: ObjectSerializer */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ObjectSerializer", function() { return ObjectSerializer; });
/* harmony import */ var _system_util_xml_util__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../system/util/xml-util */ "cfGu");
/* harmony import */ var _object_factory__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./object-factory */ "+FYa");


var objectPropertyKeys = Object.getOwnPropertyNames(Object.prototype);
var arrayPropertyKeys = Object.getOwnPropertyNames(Array.prototype);
var ObjectSerializer = /** @class */ (function () {
    function ObjectSerializer() {
        console.log('ObjectSerializer ready...');
    }
    Object.defineProperty(ObjectSerializer, "instance", {
        get: function () {
            if (!ObjectSerializer._instance)
                ObjectSerializer._instance = new ObjectSerializer();
            return ObjectSerializer._instance;
        },
        enumerable: false,
        configurable: true
    });
    ;
    ObjectSerializer.prototype.toXml = function (gameObject) {
        var xml = '';
        var attributes = 'toAttributes' in gameObject ? gameObject.toAttributes() : ObjectSerializer.toAttributes(gameObject.toContext().syncData);
        var tagName = gameObject.aliasName;
        var attrStr = '';
        for (var name_1 in attributes) {
            var attribute = _system_util_xml_util__WEBPACK_IMPORTED_MODULE_0__["XmlUtil"].encodeEntityReference(attributes[name_1] + '');
            if (attribute == null)
                continue;
            attrStr += ' ' + name_1 + '="' + attribute + '"';
        }
        xml += "<" + (tagName + attrStr) + ">";
        xml += 'innerXml' in gameObject ? gameObject.innerXml() : '';
        xml += "</" + tagName + ">";
        return xml;
    };
    ObjectSerializer.toAttributes = function (syncData) {
        var attributes = {};
        for (var syncVar in syncData) {
            var item = syncData[syncVar];
            var key = syncVar;
            var childAttr = ObjectSerializer.make2Attributes(item, key);
            for (var name_2 in childAttr) {
                attributes[name_2] = childAttr[name_2];
            }
        }
        return attributes;
    };
    ObjectSerializer.make2Attributes = function (item, key) {
        var attributes = {};
        if (Array.isArray(item)) {
            var arrayAttributes = ObjectSerializer.array2attributes(item, key);
            for (var name_3 in arrayAttributes) {
                attributes[name_3] = arrayAttributes[name_3];
            }
        }
        else if (typeof item === 'object') {
            var objAttributes = ObjectSerializer.object2attributes(item, key);
            for (var name_4 in objAttributes) {
                attributes[name_4] = objAttributes[name_4];
            }
        }
        else {
            attributes[key] = item;
        }
        return attributes;
    };
    ObjectSerializer.object2attributes = function (obj, rootKey) {
        var attributes = {};
        for (var objKey in obj) {
            var item = obj[objKey];
            var key = rootKey + '.' + objKey;
            var childAttr = ObjectSerializer.make2Attributes(item, key);
            for (var name_5 in childAttr) {
                attributes[name_5] = childAttr[name_5];
            }
        }
        return attributes;
    };
    ObjectSerializer.array2attributes = function (array, rootKey) {
        var attributes = {};
        var length = array.length;
        for (var i = 0; i < length; i++) {
            var item = array[i];
            var key = rootKey + '.' + i;
            var childAttr = ObjectSerializer.make2Attributes(item, key);
            for (var name_6 in childAttr) {
                attributes[name_6] = childAttr[name_6];
            }
        }
        return attributes;
    };
    ObjectSerializer.prototype.parseXml = function (xml) {
        var xmlElement = null;
        if (typeof xml === 'string') {
            xmlElement = _system_util_xml_util__WEBPACK_IMPORTED_MODULE_0__["XmlUtil"].xml2element(xml);
        }
        else {
            xmlElement = xml;
        }
        if (!xmlElement) {
            console.error('xmlElementが空です');
            return null;
        }
        var gameObject = _object_factory__WEBPACK_IMPORTED_MODULE_1__["ObjectFactory"].instance.create(xmlElement.tagName);
        if (!gameObject)
            return null;
        if ('parseAttributes' in gameObject) {
            gameObject.parseAttributes(xmlElement.attributes);
        }
        else {
            var context = gameObject.toContext();
            ObjectSerializer.parseAttributes(context.syncData, xmlElement.attributes);
            gameObject.apply(context);
        }
        gameObject.initialize();
        if ('parseInnerXml' in gameObject) {
            gameObject.parseInnerXml(xmlElement);
        }
        return gameObject;
    };
    ObjectSerializer.parseAttributes = function (syncData, attributes) {
        var _a;
        var length = attributes.length;
        for (var i = 0; i < length; i++) {
            var value = attributes[i].value;
            value = _system_util_xml_util__WEBPACK_IMPORTED_MODULE_0__["XmlUtil"].decodeEntityReference(value);
            var split = attributes[i].name.split('.');
            var key = split[0];
            var obj = syncData;
            var pollutionKey = split.find(function (splitKey) { return objectPropertyKeys.includes(splitKey); });
            if (pollutionKey != null) {
                console.log("skip invalid key (" + pollutionKey + ")");
                continue;
            }
            if (1 < split.length) {
                (_a = ObjectSerializer.attributes2object(split, obj, key), obj = _a.obj, key = _a.key);
                if (key == null)
                    continue;
            }
            var type = typeof obj[key];
            if (type !== 'string' && obj[key] != null) {
                value = JSON.parse(value);
            }
            obj[key] = value;
        }
        return syncData;
    };
    ObjectSerializer.attributes2object = function (split, obj, key) {
        // 階層構造の解析 foo.bar.0="abc" 等
        // 処理として実装こそしているが、xmlの仕様としては良くないので使用するべきではない.
        var parentObj = null;
        var length = split.length;
        for (var i = 0; i < length; i++) {
            var index = parseInt(split[i]);
            if (parentObj && !Number.isNaN(index) && !Array.isArray(obj) && Object.keys(parentObj).length) {
                parentObj[key] = [];
                obj = parentObj[key];
            }
            key = Number.isNaN(index) ? split[i] : index;
            if (Array.isArray(obj) && typeof key !== 'number') {
                console.warn('Arrayにはindexの挿入しか許可しない');
                return { obj: obj, key: null };
            }
            if (i + 1 < length) {
                if (obj[key] == null)
                    obj[key] = typeof key === 'number' ? [] : {};
                parentObj = obj;
                obj = obj[key];
            }
        }
        return { obj: obj, key: key };
    };
    ObjectSerializer.parseInnerXml = function (element) {
        return null;
    };
    return ObjectSerializer;
}());



/***/ }),

/***/ "N0uT":
/*!*************************************************************!*\
  !*** ./src/app/class/core/file-storage/file-reader-util.ts ***!
  \*************************************************************/
/*! exports provided: FileReaderUtil */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FileReaderUtil", function() { return FileReaderUtil; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "mrSG");
/* harmony import */ var crypto_js_lib_typedarrays_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! crypto-js/lib-typedarrays.js */ "F+F2");
/* harmony import */ var crypto_js_lib_typedarrays_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(crypto_js_lib_typedarrays_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var crypto_js_sha256_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! crypto-js/sha256.js */ "lPiR");
/* harmony import */ var crypto_js_sha256_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(crypto_js_sha256_js__WEBPACK_IMPORTED_MODULE_2__);



var FileReaderUtil;
(function (FileReaderUtil) {
    function readAsArrayBufferAsync(blob) {
        return new Promise(function (resolve, reject) {
            var reader = new FileReader();
            reader.onload = function (event) { resolve(reader.result); };
            reader.onabort = reader.onerror = function (e) { reject(e); };
            reader.readAsArrayBuffer(blob);
        });
    }
    FileReaderUtil.readAsArrayBufferAsync = readAsArrayBufferAsync;
    function readAsTextAsync(blob) {
        return new Promise(function (resolve, reject) {
            var reader = new FileReader();
            reader.onload = function (event) { resolve(reader.result); };
            reader.onabort = reader.onerror = function (e) { reject(e); };
            reader.readAsText(blob);
        });
    }
    FileReaderUtil.readAsTextAsync = readAsTextAsync;
    function calcSHA256Async(arg) {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function () {
            return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"])(this, function (_a) {
                if (arg instanceof Blob) {
                    return [2 /*return*/, _calcSHA256Async(arg)];
                }
                else {
                    return [2 /*return*/, _calcSHA256(arg)];
                }
                return [2 /*return*/];
            });
        });
    }
    FileReaderUtil.calcSHA256Async = calcSHA256Async;
    function _calcSHA256Async(blob) {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function () {
            var _a;
            return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"])(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        _a = _calcSHA256;
                        return [4 /*yield*/, FileReaderUtil.readAsArrayBufferAsync(blob)];
                    case 1: return [2 /*return*/, _a.apply(void 0, [_b.sent()])];
                }
            });
        });
    }
    function _calcSHA256(arrayBuffer) {
        var wordArray = crypto_js_lib_typedarrays_js__WEBPACK_IMPORTED_MODULE_1__["create"](arrayBuffer);
        return crypto_js_sha256_js__WEBPACK_IMPORTED_MODULE_2__(wordArray).toString();
    }
})(FileReaderUtil || (FileReaderUtil = {}));


/***/ }),

/***/ "N5Fg":
/*!*********************************************************************!*\
  !*** ./src/app/class/core/system/network/skyway-data-connection.ts ***!
  \*********************************************************************/
/*! exports provided: SkyWayDataConnection */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SkyWayDataConnection", function() { return SkyWayDataConnection; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "mrSG");
/* harmony import */ var events__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! events */ "+qE3");
/* harmony import */ var events__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(events__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var msgpack_lite__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! msgpack-lite */ "HlZf");
/* harmony import */ var msgpack_lite__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(msgpack_lite__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _util_uuid__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../util/uuid */ "P9Dn");
/* harmony import */ var _util_zero_timeout__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../util/zero-timeout */ "eS09");





;
;
var SkyWayDataConnection = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"])(SkyWayDataConnection, _super);
    function SkyWayDataConnection(conn) {
        var _this = _super.call(this) || this;
        _this.conn = conn;
        _this.chunkSize = 15.5 * 1024;
        _this.receivedMap = new Map();
        _this.timeoutTimer = null;
        conn.on('data', function (data) { return _this.onData(data); });
        conn.on('open', function () {
            _this.clearTimeoutTimer();
            exchangeSkyWayImplementation(conn);
            _this.emit('open');
        });
        conn.on('close', function () {
            _this.clearTimeoutTimer();
            _this.emit('close');
        });
        conn.on('error', function (err) {
            _this.clearTimeoutTimer();
            _this.emit('error', err);
        });
        _this.setTimeoutTimer();
        return _this;
    }
    Object.defineProperty(SkyWayDataConnection.prototype, "open", {
        get: function () { return this.conn.open; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(SkyWayDataConnection.prototype, "remoteId", {
        get: function () { return this.conn.remoteId; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(SkyWayDataConnection.prototype, "metadata", {
        get: function () { return this.conn.metadata; },
        enumerable: false,
        configurable: true
    });
    SkyWayDataConnection.prototype.close = function () {
        this.clearTimeoutTimer();
        this.conn.close();
    };
    SkyWayDataConnection.prototype.send = function (data) {
        var encodedData = msgpack_lite__WEBPACK_IMPORTED_MODULE_2__["encode"](data);
        var total = Math.ceil(encodedData.byteLength / this.chunkSize);
        if (total <= 1) {
            this.conn.send(encodedData);
            return;
        }
        var id = _util_uuid__WEBPACK_IMPORTED_MODULE_3__["UUID"].generateUuid();
        var sliceData = null;
        var chank = null;
        for (var sliceIndex = 0; sliceIndex < total; sliceIndex++) {
            sliceData = encodedData.slice(sliceIndex * this.chunkSize, (sliceIndex + 1) * this.chunkSize);
            chank = { id: id, data: sliceData, index: sliceIndex, total: total };
            this.conn.send(msgpack_lite__WEBPACK_IMPORTED_MODULE_2__["encode"](chank));
        }
    };
    SkyWayDataConnection.prototype.onData = function (data) {
        var e_1, _a;
        var chank = msgpack_lite__WEBPACK_IMPORTED_MODULE_2__["decode"](new Uint8Array(data));
        if (chank.id == null) {
            this.emit('data', chank);
            return;
        }
        var received = this.receivedMap.get(chank.id);
        if (received == null) {
            received = { id: chank.id, chanks: new Array(chank.total), length: 0, byteLength: 0 };
            this.receivedMap.set(chank.id, received);
        }
        if (received.chanks[chank.index] != null)
            return;
        received.length++;
        received.byteLength += chank.data.byteLength;
        received.chanks[chank.index] = chank.data;
        if (received.length < chank.total)
            return;
        this.receivedMap.delete(chank.id);
        var uint8Array = new Uint8Array(received.byteLength);
        var pos = 0;
        try {
            for (var _b = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(received.chanks), _c = _b.next(); !_c.done; _c = _b.next()) {
                var c = _c.value;
                uint8Array.set(c, pos);
                pos += c.byteLength;
            }
        }
        catch (e_1_1) { e_1 = { error: e_1_1 }; }
        finally {
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            }
            finally { if (e_1) throw e_1.error; }
        }
        var decodedData = msgpack_lite__WEBPACK_IMPORTED_MODULE_2__["decode"](uint8Array);
        this.emit('data', decodedData);
    };
    SkyWayDataConnection.prototype.setTimeoutTimer = function () {
        var _this = this;
        this.clearTimeoutTimer();
        this.timeoutTimer = setTimeout(function () {
            console.warn("timeout " + _this.conn.remoteId);
            _this.timeoutTimer = null;
            _this.emit('close');
        }, 15000);
    };
    SkyWayDataConnection.prototype.clearTimeoutTimer = function () {
        if (this.timeoutTimer == null)
            return;
        clearTimeout(this.timeoutTimer);
        this.timeoutTimer = null;
    };
    return SkyWayDataConnection;
}(events__WEBPACK_IMPORTED_MODULE_1__["EventEmitter"]));

/*
SkyWay の DataConnection._startSendLoop() を取り替える.
setInterval() に由来する遅延を解消するが skyway-js-sdk の更新次第で動作しなくなるので注意.

https://github.com/skyway/skyway-js-sdk/blob/master/src/peer/dataConnection.js
*/
function exchangeSkyWayImplementation(conn) {
    if (conn._dc && conn._sendBuffer) {
        conn._startSendLoop = startSendLoopZeroTimeout;
    }
}
function startSendLoopZeroTimeout() {
    if (!this.sendInterval) {
        this.sendInterval = Object(_util_zero_timeout__WEBPACK_IMPORTED_MODULE_4__["setZeroTimeout"])(sendBuffertZeroTimeout.bind(this));
    }
}
function sendBuffertZeroTimeout() {
    var currMsg = this._sendBuffer.shift();
    try {
        this._dc.send(currMsg);
    }
    catch (error) {
        this._sendBuffer.push(currMsg);
    }
    if (this._sendBuffer.length === 0) {
        this.sendInterval = undefined;
    }
    else {
        this.sendInterval = Object(_util_zero_timeout__WEBPACK_IMPORTED_MODULE_4__["setZeroTimeout"])(sendBuffertZeroTimeout.bind(this));
    }
}


/***/ }),

/***/ "NVMP":
/*!******************************************************!*\
  !*** ./src/app/class/core/file-storage/mime-type.ts ***!
  \******************************************************/
/*! exports provided: MimeType */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MimeType", function() { return MimeType; });
var MimeType;
(function (MimeType) {
    var types = {
        gif: 'image/gif',
        jpg: 'image/jpeg',
        jpeg: 'image/jpeg',
        jpe: 'image/jpeg',
        png: 'image/png',
        apng: 'image/apng',
        webp: 'image/webp',
        svg: 'image/svg+xml',
        svgz: 'image/svg+xml',
        ico: 'image/x-icon',
        cur: 'image/x-icon',
        bmp: 'image/bmp',
        html: 'text/html',
        htm: 'text/html',
        shtml: 'text/html',
        xml: 'text/xml',
        yml: 'text/yaml',
        yaml: 'text/yaml',
        json: 'application/json',
        map: 'application/json',
        zip: 'application/zip',
        mp3: 'audio/mp3',
        wav: 'audio/wav',
        m4a: 'audio/aac',
        ogg: 'audio/ogg',
        mpg: 'video/mpeg',
        mpeg: 'video/mpeg',
        mp4: 'video/mp4',
        webm: 'video/webm'
    };
    function type(fileName) {
        var ext = fileName.replace(/.*[\.\/\\]/, '').toLowerCase();
        return types[ext] ? types[ext] : '';
    }
    MimeType.type = type;
    function extension(mimeType) {
        for (var key in types) {
            if (types[key] === mimeType) {
                return key;
            }
        }
        return mimeType.split('/')[1];
    }
    MimeType.extension = extension;
})(MimeType || (MimeType = {}));


/***/ }),

/***/ "NjCw":
/*!*************************************!*\
  !*** ./src/app/class/dice-table.ts ***!
  \*************************************/
/*! exports provided: DiceTable */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DiceTable", function() { return DiceTable; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "mrSG");
/* harmony import */ var _core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./core/synchronize-object/decorator */ "1lIu");
/* harmony import */ var _core_synchronize_object_object_node__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./core/synchronize-object/object-node */ "F67Z");
/* harmony import */ var _chat_palette__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./chat-palette */ "uH+U");




var DiceTable = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"])(DiceTable, _super);
    function DiceTable() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.name = 'ダイス表';
        _this.command = 'SAMPLE';
        _this.dice = '1d6';
        _this.text = '';
        return _this;
    }
    DiceTable_1 = DiceTable;
    Object.defineProperty(DiceTable.prototype, "diceTablePalette", {
        get: function () {
            var e_1, _a;
            try {
                for (var _b = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(this.children), _c = _b.next(); !_c.done; _c = _b.next()) {
                    var child = _c.value;
                    if (child instanceof _chat_palette__WEBPACK_IMPORTED_MODULE_3__["DiceTablePalette"]) {
                        return child;
                    }
                }
            }
            catch (e_1_1) { e_1 = { error: e_1_1 }; }
            finally {
                try {
                    if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
                }
                finally { if (e_1) throw e_1.error; }
            }
            return null;
        },
        enumerable: false,
        configurable: true
    });
    DiceTable.create = function () {
        var diceTable = new DiceTable_1();
        diceTable.name = '白紙のダイス表';
        diceTable.initialize();
        var palette = new _chat_palette__WEBPACK_IMPORTED_MODULE_3__["DiceTablePalette"]('table_' + diceTable.identifier);
        palette.setPalette("\u30C0\u30A4\u30B9\u8868\u5165\u529B\u4F8B\uFF1A\n1:\u30C0\u30A4\u30B9\u8868\u30C1\u30E3\u30FC\u30C8\u4F8B\u3010\u68EE\u3011\n2:\u30C0\u30A4\u30B9\u8868\u30C1\u30E3\u30FC\u30C8\u4F8B\u3010\u6D77\u3011\n3:\u30C0\u30A4\u30B9\u8868\u30C1\u30E3\u30FC\u30C8\u4F8B\u3010\u5E73\u5730\u3011\n4:\u30C0\u30A4\u30B9\u8868\u30C1\u30E3\u30FC\u30C8\u4F8B\u3010\u6CBC\u3011\n5:\u30C0\u30A4\u30B9\u8868\u30C1\u30E3\u30FC\u30C8\u4F8B\u3010\u7A7A\u3011\n6:\u30C0\u30A4\u30B9\u8868\u30C1\u30E3\u30FC\u30C8\u4F8B\u3010\u5C71\u3011");
        palette.initialize();
        diceTable.appendChild(palette);
        return diceTable;
    };
    // override
    DiceTable.prototype.apply = function (context) {
        _super.prototype.apply.call(this, context);
    };
    var DiceTable_1;
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_1__["SyncVar"])()
    ], DiceTable.prototype, "name", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_1__["SyncVar"])()
    ], DiceTable.prototype, "command", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_1__["SyncVar"])()
    ], DiceTable.prototype, "dice", void 0);
    DiceTable = DiceTable_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_1__["SyncObject"])('dice-table')
    ], DiceTable);
    return DiceTable;
}(_core_synchronize_object_object_node__WEBPACK_IMPORTED_MODULE_2__["ObjectNode"]));



/***/ }),

/***/ "NnWs":
/*!**************************************************************!*\
  !*** ./src/app/component/cut-in-bgm/cut-in-bgm.component.ts ***!
  \**************************************************************/
/*! exports provided: CutInBgmComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CutInBgmComponent", function() { return CutInBgmComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "fXoL");
/* harmony import */ var _udonarium_core_file_storage_audio_player__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @udonarium/core/file-storage/audio-player */ "zeEm");
/* harmony import */ var _udonarium_core_file_storage_audio_storage__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @udonarium/core/file-storage/audio-storage */ "Prh6");
/* harmony import */ var _udonarium_core_file_storage_file_archiver__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @udonarium/core/file-storage/file-archiver */ "wBZT");
/* harmony import */ var _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @udonarium/core/synchronize-object/object-store */ "hm7o");
/* harmony import */ var _udonarium_core_system__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @udonarium/core/system */ "yNnI");
/* harmony import */ var service_modal_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! service/modal.service */ "CE6K");
/* harmony import */ var service_panel_service__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! service/panel.service */ "M9xM");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @angular/common */ "ofXK");










function CutInBgmComponent_div_1_button_3_Template(rf, ctx) { if (rf & 1) {
    var _r8 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "button", 5);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function CutInBgmComponent_div_1_button_3_Template_button_click_0_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r8); var audio_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]().$implicit; var ctx_r6 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](); return ctx_r6.play(audio_r2); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](1, "\u8A66\u8074/\u518D\u751F");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    var audio_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]().$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("disabled", !audio_r2.isReady);
} }
function CutInBgmComponent_div_1_button_4_Template(rf, ctx) { if (rf & 1) {
    var _r11 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "button", 5);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function CutInBgmComponent_div_1_button_4_Template_button_click_0_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r11); var ctx_r10 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2); return ctx_r10.stop(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](1, "\u8A66\u8074/\u505C\u6B62");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    var audio_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]().$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("disabled", !audio_r2.isReady);
} }
function CutInBgmComponent_div_1_span_5_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "span");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](1, "\u3010\u8A66\u8074\u4E2D\u3011");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} }
function CutInBgmComponent_div_1_Template(rf, ctx) { if (rf & 1) {
    var _r14 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "button", 3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function CutInBgmComponent_div_1_Template_button_click_1_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r14); var audio_r2 = ctx.$implicit; var ctx_r13 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](); return ctx_r13.selectBgm(audio_r2); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](2, "\u767B\u9332");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](3, CutInBgmComponent_div_1_button_3_Template, 2, 1, "button", 4);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](4, CutInBgmComponent_div_1_button_4_Template, 2, 1, "button", 4);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](5, CutInBgmComponent_div_1_span_5_Template, 2, 0, "span", 1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](6, "span");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](7);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    var audio_r2 = ctx.$implicit;
    var ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", audio_r2 !== (ctx_r0.auditionPlayer == null ? null : ctx_r0.auditionPlayer.audio) || (ctx_r0.auditionPlayer == null ? null : ctx_r0.auditionPlayer.paused));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", audio_r2 === (ctx_r0.auditionPlayer == null ? null : ctx_r0.auditionPlayer.audio) && !(ctx_r0.auditionPlayer == null ? null : ctx_r0.auditionPlayer.paused));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", audio_r2 === (ctx_r0.auditionPlayer == null ? null : ctx_r0.auditionPlayer.audio) && !(ctx_r0.auditionPlayer == null ? null : ctx_r0.auditionPlayer.paused));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate"](audio_r2.name);
} }
function CutInBgmComponent_div_2_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](1, "\u97F3\u697D\u304C\u30A2\u30C3\u30D7\u30ED\u30FC\u30C9\u3055\u308C\u3066\u3044\u307E\u305B\u3093\u3002");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} }
var CutInBgmComponent = /** @class */ (function () {
    function CutInBgmComponent(modalService, panelService, ngZone) {
        this.modalService = modalService;
        this.panelService = panelService;
        this.ngZone = ngZone;
        this.auditionPlayer = new _udonarium_core_file_storage_audio_player__WEBPACK_IMPORTED_MODULE_1__["AudioPlayer"]();
        this.lazyUpdateTimer = null;
    }
    Object.defineProperty(CutInBgmComponent.prototype, "volume", {
        get: function () { return _udonarium_core_file_storage_audio_player__WEBPACK_IMPORTED_MODULE_1__["AudioPlayer"].volume; },
        set: function (volume) { _udonarium_core_file_storage_audio_player__WEBPACK_IMPORTED_MODULE_1__["AudioPlayer"].volume = volume; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(CutInBgmComponent.prototype, "auditionVolume", {
        get: function () { return _udonarium_core_file_storage_audio_player__WEBPACK_IMPORTED_MODULE_1__["AudioPlayer"].auditionVolume; },
        set: function (auditionVolume) { _udonarium_core_file_storage_audio_player__WEBPACK_IMPORTED_MODULE_1__["AudioPlayer"].auditionVolume = auditionVolume; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(CutInBgmComponent.prototype, "audios", {
        get: function () { return _udonarium_core_file_storage_audio_storage__WEBPACK_IMPORTED_MODULE_2__["AudioStorage"].instance.audios.filter(function (audio) { return !audio.isHidden; }); },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(CutInBgmComponent.prototype, "jukebox", {
        get: function () { return _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_4__["ObjectStore"].instance.get('Jukebox'); },
        enumerable: false,
        configurable: true
    });
    CutInBgmComponent.prototype.ngOnInit = function () {
        var _this = this;
        Promise.resolve().then(function () { return _this.modalService.title = _this.panelService.title = 'カットインBGM選択'; });
        this.auditionPlayer.volumeType = _udonarium_core_file_storage_audio_player__WEBPACK_IMPORTED_MODULE_1__["VolumeType"].AUDITION;
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_5__["EventSystem"].register(this)
            .on('*', function (event) {
        });
    };
    CutInBgmComponent.prototype.ngOnDestroy = function () {
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_5__["EventSystem"].unregister(this);
        this.stop();
    };
    CutInBgmComponent.prototype.play = function (audio) {
        this.auditionPlayer.play(audio);
    };
    CutInBgmComponent.prototype.stop = function () {
        this.auditionPlayer.stop();
    };
    CutInBgmComponent.prototype.selectBgm = function (file) {
        if (!file)
            return;
        console.log('onSelectedFile', file);
        console.log('file.identifier' + file.identifier);
        console.log('file.name' + file.name);
        this.modalService.resolve(file.identifier);
    };
    CutInBgmComponent.prototype.handleFileSelect = function (event) {
        var files = event.target.files;
        if (files.length)
            _udonarium_core_file_storage_file_archiver__WEBPACK_IMPORTED_MODULE_3__["FileArchiver"].instance.load(files);
    };
    CutInBgmComponent.prototype.lazyNgZoneUpdate = function () {
        var _this = this;
        if (this.lazyUpdateTimer !== null)
            return;
        this.lazyUpdateTimer = setTimeout(function () {
            _this.lazyUpdateTimer = null;
            _this.ngZone.run(function () { });
        }, 100);
    };
    CutInBgmComponent.ɵfac = function CutInBgmComponent_Factory(t) { return new (t || CutInBgmComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](service_modal_service__WEBPACK_IMPORTED_MODULE_6__["ModalService"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](service_panel_service__WEBPACK_IMPORTED_MODULE_7__["PanelService"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["NgZone"])); };
    CutInBgmComponent.ɵcmp = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineComponent"]({ type: CutInBgmComponent, selectors: [["app-cut-in-bgm"]], decls: 3, vars: 2, consts: [["class", "box", 4, "ngFor", "ngForOf"], [4, "ngIf"], [1, "box"], [3, "click"], [3, "disabled", "click", 4, "ngIf"], [3, "disabled", "click"]], template: function CutInBgmComponent_Template(rf, ctx) { if (rf & 1) {
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div");
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](1, CutInBgmComponent_div_1_Template, 8, 4, "div", 0);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](2, CutInBgmComponent_div_2_Template, 2, 0, "div", 1);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        } if (rf & 2) {
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngForOf", ctx.audios);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx.audios.length < 1);
        } }, directives: [_angular_common__WEBPACK_IMPORTED_MODULE_8__["NgForOf"], _angular_common__WEBPACK_IMPORTED_MODULE_8__["NgIf"]], styles: [".drop-zone[_ngcontent-%COMP%] {\r\n  border: 2px dashed #555;\r\n  border-radius: 5px;\r\n  padding: 25px;\r\n  text-align: center;\r\n  font: 24px bold 'Vollkorn';\r\n  color: #444;\r\n  cursor: pointer;\r\n}\r\n\r\n.large-font[_ngcontent-%COMP%] {\r\n  font-size: 64px;\r\n}\r\n\r\n.small-font[_ngcontent-%COMP%] {\r\n  font-size: 12px;\r\n}\r\n\r\n.box[_ngcontent-%COMP%] {\r\n  border-bottom:1px dotted #888;\r\n}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImN1dC1pbi1iZ20uY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLHVCQUF1QjtFQUd2QixrQkFBa0I7RUFDbEIsYUFBYTtFQUNiLGtCQUFrQjtFQUNsQiwwQkFBMEI7RUFDMUIsV0FBVztFQUNYLGVBQWU7QUFDakI7O0FBRUE7RUFDRSxlQUFlO0FBQ2pCOztBQUVBO0VBQ0UsZUFBZTtBQUNqQjs7QUFFQTtFQUNFLDZCQUE2QjtBQUMvQiIsImZpbGUiOiJjdXQtaW4tYmdtLmNvbXBvbmVudC5jc3MiLCJzb3VyY2VzQ29udGVudCI6WyIuZHJvcC16b25lIHtcclxuICBib3JkZXI6IDJweCBkYXNoZWQgIzU1NTtcclxuICAtbW96LWJvcmRlci1yYWRpdXM6IDVweDtcclxuICAtd2Via2l0LWJvcmRlci1yYWRpdXM6IDVweDtcclxuICBib3JkZXItcmFkaXVzOiA1cHg7XHJcbiAgcGFkZGluZzogMjVweDtcclxuICB0ZXh0LWFsaWduOiBjZW50ZXI7XHJcbiAgZm9udDogMjRweCBib2xkICdWb2xsa29ybic7XHJcbiAgY29sb3I6ICM0NDQ7XHJcbiAgY3Vyc29yOiBwb2ludGVyO1xyXG59XHJcblxyXG4ubGFyZ2UtZm9udCB7XHJcbiAgZm9udC1zaXplOiA2NHB4O1xyXG59XHJcblxyXG4uc21hbGwtZm9udCB7XHJcbiAgZm9udC1zaXplOiAxMnB4O1xyXG59XHJcblxyXG4uYm94IHtcclxuICBib3JkZXItYm90dG9tOjFweCBkb3R0ZWQgIzg4ODtcclxufSJdfQ== */"] });
    return CutInBgmComponent;
}());

/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](CutInBgmComponent, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"],
        args: [{
                selector: 'app-cut-in-bgm',
                templateUrl: './cut-in-bgm.component.html',
                styleUrls: ['./cut-in-bgm.component.css']
            }]
    }], function () { return [{ type: service_modal_service__WEBPACK_IMPORTED_MODULE_6__["ModalService"] }, { type: service_panel_service__WEBPACK_IMPORTED_MODULE_7__["PanelService"] }, { type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["NgZone"] }]; }, null); })();


/***/ }),

/***/ "OBv1":
/*!******************************************************************************!*\
  !*** ./src/app/component/dice-table-setting/dice-table-setting.component.ts ***!
  \******************************************************************************/
/*! exports provided: DiceTableSettingComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DiceTableSettingComponent", function() { return DiceTableSettingComponent; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "mrSG");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "fXoL");
/* harmony import */ var _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @udonarium/core/synchronize-object/object-store */ "hm7o");
/* harmony import */ var _udonarium_dice_bot__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @udonarium/dice-bot */ "JUIv");
/* harmony import */ var _udonarium_dice_table__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @udonarium/dice-table */ "NjCw");
/* harmony import */ var _udonarium_chat_palette__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @udonarium/chat-palette */ "uH+U");
/* harmony import */ var service_modal_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! service/modal.service */ "CE6K");
/* harmony import */ var service_save_data_service__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! service/save-data.service */ "Uvtn");
/* harmony import */ var service_panel_service__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! service/panel.service */ "M9xM");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @angular/forms */ "3Pt+");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @angular/common */ "ofXK");
/* harmony import */ var _ng_select_ng_select__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @ng-select/ng-select */ "ZOsW");













function DiceTableSettingComponent_option_6_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "option", 19);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
} if (rf & 2) {
    var diceTable_r9 = ctx.$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpropertyInterpolate"]("value", diceTable_r9.identifier);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtextInterpolate"](diceTable_r9.name);
} }
function DiceTableSettingComponent_ng_option_29_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "ng-option", 19);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
} if (rf & 2) {
    var diceBotInfo_r10 = ctx.$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("value", diceBotInfo_r10.id);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtextInterpolate"](diceBotInfo_r10.name);
} }
function DiceTableSettingComponent_div_30_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "div", 20);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](1, "i", 21);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](2, "info_outline");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](3, " \u9AB0\u5B50\u8868\u7DE8\u8F2F\u4E2D ");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
} }
function DiceTableSettingComponent_div_31_ng_container_2_ng_container_1_option_1_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "option", 19);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
} if (rf & 2) {
    var palette_r14 = ctx.$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpropertyInterpolate"]("value", palette_r14);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtextInterpolate"](palette_r14);
} }
function DiceTableSettingComponent_div_31_ng_container_2_ng_container_1_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](1, DiceTableSettingComponent_div_31_ng_container_2_ng_container_1_option_1_Template, 2, 2, "option", 4);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var ctx_r12 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngForOf", ctx_r12.selectedTable.diceTablePalette.getPalette());
} }
function DiceTableSettingComponent_div_31_ng_container_2_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](1, DiceTableSettingComponent_div_31_ng_container_2_ng_container_1_Template, 2, 1, "ng-container", 18);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var ctx_r11 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", ctx_r11.selectedTable.diceTablePalette);
} }
function DiceTableSettingComponent_div_31_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "div", 22);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](1, "select", 23);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](2, DiceTableSettingComponent_div_31_ng_container_2_Template, 2, 1, "ng-container", 18);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
} if (rf & 2) {
    var ctx_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", ctx_r3.selectedTable);
} }
function DiceTableSettingComponent_div_32_Template(rf, ctx) { if (rf & 1) {
    var _r16 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "div", 22);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](1, "textarea", 24);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("ngModelChange", function DiceTableSettingComponent_div_32_Template_textarea_ngModelChange_1_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r16); var ctx_r15 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](); return ctx_r15.editPalette = $event; });
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
} if (rf & 2) {
    var ctx_r4 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngModel", ctx_r4.editPalette);
} }
function DiceTableSettingComponent_span_35_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "span");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](1, "\u7DE8\u8F2F\u9AB0\u5B50\u8868");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
} }
function DiceTableSettingComponent_span_36_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "span");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](1, "\u78BA\u5B9A\u9AB0\u5B50\u8868");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
} }
function DiceTableSettingComponent_ng_container_39_Template(rf, ctx) { if (rf & 1) {
    var _r18 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](1, "button", 2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("click", function DiceTableSettingComponent_ng_container_39_Template_button_click_1_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r18); var ctx_r17 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](); return ctx_r17.save(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](2, "\u4FDD\u5B58");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](3, "button", 25);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("click", function DiceTableSettingComponent_ng_container_39_Template_button_click_3_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r18); var ctx_r19 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](); return ctx_r19.delete(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](4, "\u522A\u9664");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var ctx_r7 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵattribute"]("disabled", ctx_r7.getDiceTables().length <= 0 ? "" : null);
} }
function DiceTableSettingComponent_ng_container_40_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](1, "div", 26);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](2, "\u203B\u5C1A\u672A\u5275\u5EFA\u9AB0\u5B50\u8868\u3002 \u60A8\u53EF\u4EE5\u5F9E\u201C\u5275\u5EFA\u65B0\u8868\u201D\u4E2D\u5275\u5EFA\u4E00\u500B\u65B0\u7684\u9AB0\u5B50\u8868\u3002");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerEnd"]();
} }
var _c0 = function () { return { standalone: true }; };
var DiceTableSettingComponent = /** @class */ (function () {
    function DiceTableSettingComponent(modalService, saveDataService, panelService) {
        this.modalService = modalService;
        this.saveDataService = saveDataService;
        this.panelService = panelService;
        this._gameType = '';
        this.gameTypeChange = new _angular_core__WEBPACK_IMPORTED_MODULE_1__["EventEmitter"]();
        this.isEdit = false;
        this.selectedTable = null;
        this.editPalette = '';
        this.isSaveing = false;
        this.progresPercent = 0;
    }
    Object.defineProperty(DiceTableSettingComponent.prototype, "gameType", {
        get: function () {
            return this.isEditable ? this.selectedTable.diceTablePalette.dicebot : '';
        },
        set: function (gameType) {
            if (this.isEditable) {
                this.selectedTable.diceTablePalette.dicebot = gameType;
                this._gameType = gameType;
                this.gameTypeChange.emit(gameType);
            }
        },
        enumerable: false,
        configurable: true
    });
    DiceTableSettingComponent.prototype.loadDiceBot = function (gameType) {
        console.log('onChangeGameType ready');
        _udonarium_dice_bot__WEBPACK_IMPORTED_MODULE_3__["DiceBot"].getHelpMessage(gameType).then(function (help) {
            console.log('onChangeGameType done\n' + help);
        });
    };
    Object.defineProperty(DiceTableSettingComponent.prototype, "diceBotInfos", {
        get: function () { return _udonarium_dice_bot__WEBPACK_IMPORTED_MODULE_3__["DiceBot"].diceBotInfos; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(DiceTableSettingComponent.prototype, "tableName", {
        get: function () { return this.isEditable ? this.selectedTable.name : ''; },
        set: function (tableName) { if (this.isEditable)
            this.selectedTable.name = tableName; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(DiceTableSettingComponent.prototype, "tableDice", {
        get: function () { return this.isEditable ? this.selectedTable.dice : ''; },
        set: function (tableDice) { if (this.isEditable)
            this.selectedTable.dice = tableDice; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(DiceTableSettingComponent.prototype, "tableCommand", {
        get: function () { return this.isEditable ? this.selectedTable.command : ''; },
        set: function (tableCommand) { if (this.isEditable)
            this.selectedTable.command = tableCommand; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(DiceTableSettingComponent.prototype, "tableText", {
        get: function () {
            return this.isEditable ? this.selectedTable.text : '';
        },
        set: function (tableText) {
            if (this.isEditable)
                console.log(tableText);
            if (this.isEditable)
                this.selectedTable.text = tableText + '';
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(DiceTableSettingComponent.prototype, "diceTablePalette", {
        get: function () {
            var e_1, _a;
            if (!this.isEditable)
                return null;
            try {
                for (var _b = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(this.selectedTable.children), _c = _b.next(); !_c.done; _c = _b.next()) {
                    var child = _c.value;
                    if (child instanceof _udonarium_chat_palette__WEBPACK_IMPORTED_MODULE_5__["DiceTablePalette"])
                        return child;
                }
            }
            catch (e_1_1) { e_1 = { error: e_1_1 }; }
            finally {
                try {
                    if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
                }
                finally { if (e_1) throw e_1.error; }
            }
            return null;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(DiceTableSettingComponent.prototype, "isEmpty", {
        //  get isEmpty(): boolean { return this.tableSelecter ? (this.tableSelecter.viewTable ? false : true) : true; }
        get: function () { return false; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(DiceTableSettingComponent.prototype, "isSelected", {
        get: function () { return this.selectedTable ? true : false; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(DiceTableSettingComponent.prototype, "isDeleted", {
        get: function () {
            if (!this.selectedTable)
                return true;
            return _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_2__["ObjectStore"].instance.get(this.selectedTable.identifier) == null;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(DiceTableSettingComponent.prototype, "isEditable", {
        get: function () {
            //    return !this.isEmpty && !this.isDeleted;
            return !this.isEmpty && this.isSelected && !this.isDeleted;
        },
        enumerable: false,
        configurable: true
    });
    DiceTableSettingComponent.prototype.ngOnInit = function () {
        var _this = this;
        Promise.resolve().then(function () { return _this.modalService.title = _this.panelService.title = 'ダイス表設定'; });
    };
    DiceTableSettingComponent.prototype.ngAfterViewInit = function () { };
    DiceTableSettingComponent.prototype.ngOnDestroy = function () {
    };
    DiceTableSettingComponent.prototype.selectDiceTable = function (identifier) {
        this.selectedTable = _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_2__["ObjectStore"].instance.get(identifier);
    };
    DiceTableSettingComponent.prototype.getDiceTables = function () {
        return _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_2__["ObjectStore"].instance.getObjects(_udonarium_dice_table__WEBPACK_IMPORTED_MODULE_4__["DiceTable"]);
    };
    DiceTableSettingComponent.prototype.createDiceTable = function () {
        var diceTable = _udonarium_dice_table__WEBPACK_IMPORTED_MODULE_4__["DiceTable"].create();
        this.selectDiceTable(diceTable.identifier);
    };
    DiceTableSettingComponent.prototype.save = function () {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function () {
            var fileName;
            var _this = this;
            return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"])(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (!this.selectedTable)
                            return [2 /*return*/];
                        this.isSaveing = true;
                        this.progresPercent = 0;
                        fileName = 'dice_table_' + this.selectedTable.name;
                        return [4 /*yield*/, this.saveDataService.saveGameObjectAsync(this.selectedTable, fileName, function (percent) {
                                _this.progresPercent = percent;
                            })];
                    case 1:
                        _a.sent();
                        setTimeout(function () {
                            _this.isSaveing = false;
                            _this.progresPercent = 0;
                        }, 500);
                        return [2 /*return*/];
                }
            });
        });
    };
    DiceTableSettingComponent.prototype.delete = function () {
        if (!this.isEmpty && this.selectedTable) {
            this.selectedTable.destroy();
        }
    };
    DiceTableSettingComponent.prototype.toggleEditMode = function () {
        this.isEdit = this.isEdit ? false : true;
        if (this.isEdit) {
            this.editPalette = this.selectedTable.diceTablePalette.value + '';
        }
        else {
            this.selectedTable.diceTablePalette.setPalette(this.editPalette);
        }
    };
    DiceTableSettingComponent.ɵfac = function DiceTableSettingComponent_Factory(t) { return new (t || DiceTableSettingComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdirectiveInject"](service_modal_service__WEBPACK_IMPORTED_MODULE_6__["ModalService"]), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdirectiveInject"](service_save_data_service__WEBPACK_IMPORTED_MODULE_7__["SaveDataService"]), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdirectiveInject"](service_panel_service__WEBPACK_IMPORTED_MODULE_8__["PanelService"])); };
    DiceTableSettingComponent.ɵcmp = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdefineComponent"]({ type: DiceTableSettingComponent, selectors: [["dice-table-setting"]], inputs: { _gameType: ["gameType", "_gameType"] }, outputs: { gameTypeChange: "gameTypeChange" }, decls: 41, vars: 24, consts: [[1, "table"], [1, "table-cell", 2, "width", "13em"], [3, "click"], ["size", "15;padding-right:5px", 2, "width", "100%", 3, "ngModel", "change"], [3, "value", 4, "ngFor", "ngForOf"], [1, "table-cell", 2, "width", "5px", "max-width", "5px"], [1, "table-cell"], [1, "table-cell", 2, "width", "7em"], [2, "width", "7em", "display", "inline-block"], [1, "table-cell", 2, "width", "100%", "padding-right", "10px"], ["placeholder", "Name", 2, "width", "100%", 3, "ngModel", "ngModelChange"], ["placeholder", "Dice", 2, "width", "100%", 3, "ngModel", "ngModelChange"], ["placeholder", "Command", 2, "width", "100%", 3, "ngModel", "ngModelChange"], [1, "ud-select", 2, "width", "12em", 3, "ngModel", "ngModelOptions", "clearable", "change", "ngModelChange"], ["class", "edit-info", 4, "ngIf"], ["style", "flex-grow: 1; height: 0; min-height: 150px;", 4, "ngIf"], [2, "flex-grow", "0"], ["type", "submit", 3, "click"], [4, "ngIf"], [3, "value"], [1, "edit-info"], [1, "material-icons", 2, "vertical-align", "bottom", "size", "0.8rem"], [2, "flex-grow", "1", "height", "0", "min-height", "150px"], ["size", "5", 1, "palette", 2, "overflow-y", "auto"], ["placeholder", "\u9AB0\u5B50\u8868", 1, "palette", 2, "resize", "none", 3, "ngModel", "ngModelChange"], [1, "danger", 3, "click"], [2, "font-size", "12px"]], template: function DiceTableSettingComponent_Template(rf, ctx) { if (rf & 1) {
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "div", 0);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](1, "div", 1);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](2, "div");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](3, "button", 2);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("click", function DiceTableSettingComponent_Template_button_click_3_listener() { return ctx.createDiceTable(); });
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](4, "\u5275\u5EFA\u65B0\u8868");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](5, "select", 3);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("change", function DiceTableSettingComponent_Template_select_change_5_listener($event) { return ctx.selectDiceTable($event.target.value); });
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](6, DiceTableSettingComponent_option_6_Template, 2, 2, "option", 4);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelement"](7, "div", 5);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](8, "div", 6);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](9, "div", 0);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](10, "div", 7);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](11, "span", 8);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](12, "\u9AB0\u5B50\u8868\u6A19\u984C :");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](13, "div", 9);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](14, "input", 10);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("ngModelChange", function DiceTableSettingComponent_Template_input_ngModelChange_14_listener($event) { return ctx.tableName = $event; });
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](15, "div", 0);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](16, "div", 7);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](17, "span", 8);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](18, "\u9AB0\u5B50 :");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](19, "div", 9);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](20, "input", 11);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("ngModelChange", function DiceTableSettingComponent_Template_input_ngModelChange_20_listener($event) { return ctx.tableDice = $event; });
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](21, "div");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](22, "div", 7);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](23, "span", 8);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](24, "\u6307\u4EE4 :");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](25, "div", 9);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](26, "input", 12);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("ngModelChange", function DiceTableSettingComponent_Template_input_ngModelChange_26_listener($event) { return ctx.tableCommand = $event; });
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](27, "div");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](28, "ng-select", 13);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("change", function DiceTableSettingComponent_Template_ng_select_change_28_listener($event) { return ctx.loadDiceBot($event); })("ngModelChange", function DiceTableSettingComponent_Template_ng_select_ngModelChange_28_listener($event) { return ctx.gameType = $event; });
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](29, DiceTableSettingComponent_ng_option_29_Template, 2, 2, "ng-option", 4);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](30, DiceTableSettingComponent_div_30_Template, 4, 0, "div", 14);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](31, DiceTableSettingComponent_div_31_Template, 3, 1, "div", 15);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](32, DiceTableSettingComponent_div_32_Template, 2, 1, "div", 15);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](33, "div", 16);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](34, "button", 17);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("click", function DiceTableSettingComponent_Template_button_click_34_listener() { return ctx.toggleEditMode(); });
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](35, DiceTableSettingComponent_span_35_Template, 2, 0, "span", 18);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](36, DiceTableSettingComponent_span_36_Template, 2, 0, "span", 18);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelement"](37, "hr");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](38, "div");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](39, DiceTableSettingComponent_ng_container_39_Template, 5, 1, "ng-container", 18);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](40, DiceTableSettingComponent_ng_container_40_Template, 3, 0, "ng-container", 18);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
        } if (rf & 2) {
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](3);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵattribute"]("disabled", ctx.isEdit ? "" : null);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](2);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngModel", ctx.selectedTable == null ? null : ctx.selectedTable.identifier);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵattribute"]("disabled", ctx.isEdit ? "" : null);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngForOf", ctx.getDiceTables());
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](8);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngModel", ctx.tableName);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵattribute"]("disabled", !ctx.isEditable ? "" : null);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](6);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngModel", ctx.tableDice);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵattribute"]("disabled", !ctx.isEditable ? "" : null);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](6);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngModel", ctx.tableCommand);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵattribute"]("disabled", !ctx.isEditable ? "" : null);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](2);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngModel", ctx.gameType)("ngModelOptions", _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpureFunction0"](23, _c0))("clearable", false);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵattribute"]("disabled", !ctx.isEditable ? "" : null);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngForOf", ctx.diceBotInfos);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", ctx.isEdit);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", !ctx.isEdit);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", ctx.isEdit);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](2);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵattribute"]("disabled", !ctx.isEditable ? "" : null);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", !ctx.isEdit);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", ctx.isEdit);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](3);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", !ctx.isDeleted);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", ctx.isEmpty);
        } }, directives: [_angular_forms__WEBPACK_IMPORTED_MODULE_9__["SelectControlValueAccessor"], _angular_forms__WEBPACK_IMPORTED_MODULE_9__["NgControlStatus"], _angular_forms__WEBPACK_IMPORTED_MODULE_9__["NgModel"], _angular_common__WEBPACK_IMPORTED_MODULE_10__["NgForOf"], _angular_forms__WEBPACK_IMPORTED_MODULE_9__["DefaultValueAccessor"], _ng_select_ng_select__WEBPACK_IMPORTED_MODULE_11__["NgSelectComponent"], _angular_common__WEBPACK_IMPORTED_MODULE_10__["NgIf"], _angular_forms__WEBPACK_IMPORTED_MODULE_9__["NgSelectOption"], _angular_forms__WEBPACK_IMPORTED_MODULE_9__["ɵangular_packages_forms_forms_x"], _ng_select_ng_select__WEBPACK_IMPORTED_MODULE_11__["ɵr"]], styles: [".edit-info[_ngcontent-%COMP%] {\r\n  width: 100%;\r\n  text-align: center;\r\n  color: #CCC;\r\n  background-color: rgba(30, 30, 30, 0.8);\r\n}\r\n.palette[_ngcontent-%COMP%] {\r\n\r\n  box-sizing: border-box;\r\n  font-family: -apple-system, BlinkMacSystemFont, \"Helvetica Neue\", Verdana, Meiryo, sans-serif;\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n.flex-container[_ngcontent-%COMP%] {\r\n  display: flex;\r\n  flex-direction: column;\r\n  height: 100%;\r\n  width:100%;\r\n}\r\n.dice-table[_ngcontent-%COMP%] {\r\n\r\n  box-sizing: border-box;\r\n  font-family: -apple-system, BlinkMacSystemFont, \"Helvetica Neue\", Verdana, Meiryo, sans-serif;\r\n  width: 100%;\r\n  height: 15em;\r\n}\r\n.flex-container[_ngcontent-%COMP%] { \r\n  display: flex; \r\n  flex-flow:  row wrap; \r\n  justify-content: flex-start; \r\n  align-items: stretch;\r\n\r\n}\r\n.flex-item[_ngcontent-%COMP%] {\r\n  margin: 5px;\r\n\r\n\r\n\r\n \r\n\r\n  max-width: 100%;\r\n}\r\n.no-grow[_ngcontent-%COMP%]{ \r\n  flex-grow: 0;\r\n}\r\n.images-select[_ngcontent-%COMP%] {\r\n  display: flex;\r\n}\r\n.table[_ngcontent-%COMP%] {\r\n  display:table;\r\n  width :100%;\r\n  box-sizing: border-box;\r\n  \r\n}\r\n.table-cell[_ngcontent-%COMP%] {\r\n  display:table-cell;\r\n  vertical-align: top;\r\n  box-sizing: border-box;\r\n}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRpY2UtdGFibGUtc2V0dGluZy5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UsV0FBVztFQUNYLGtCQUFrQjtFQUNsQixXQUFXO0VBQ1gsdUNBQXVDO0FBQ3pDO0FBQ0E7QUFDQSxXQUFXO0VBQ1Qsc0JBQXNCO0VBQ3RCLDZGQUE2RjtFQUM3RixXQUFXO0VBQ1gsWUFBWTtBQUNkO0FBRUE7RUFDRSxhQUFhO0VBQ2Isc0JBQXNCO0VBQ3RCLFlBQVk7RUFDWixVQUFVO0FBQ1o7QUFHQTtBQUNBLFdBQVc7RUFDVCxzQkFBc0I7RUFDdEIsNkZBQTZGO0VBQzdGLFdBQVc7RUFDWCxZQUFZO0FBQ2Q7QUFFQSxrQkFDeUIsV0FBVztFQUNsQyxhQUFhLEVBRWdCLFdBQVc7RUFDeEMsb0JBQW9CLEVBRWlCLFdBQVc7RUFDaEQsMkJBQTJCLEVBRUcsV0FBVztFQUN6QyxvQkFBb0I7O0FBRXRCO0FBQ0E7RUFDRSxXQUFXO0FBQ2IsNkJBQTZCLENBQUMsV0FBVztBQUN6QyxvQkFBb0I7QUFDcEIsNEJBQTRCO0FBQzVCLDBCQUEwQixFQUFFLFdBQVc7QUFDdkMsa0JBQWtCO0VBQ2hCLGVBQWU7QUFDakI7QUFFQSxVQUN3QixXQUFXO0VBQ2pDLFlBQVk7QUFDZDtBQUVBO0VBQ0UsYUFBYTtBQUNmO0FBRUE7RUFDRSxhQUFhO0VBQ2IsV0FBVztFQUNYLHNCQUFzQjtFQUN0Qiw0QkFBNEI7QUFDOUI7QUFFQTtFQUNFLGtCQUFrQjtFQUNsQixtQkFBbUI7RUFDbkIsc0JBQXNCO0FBQ3hCIiwiZmlsZSI6ImRpY2UtdGFibGUtc2V0dGluZy5jb21wb25lbnQuY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLmVkaXQtaW5mbyB7XHJcbiAgd2lkdGg6IDEwMCU7XHJcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xyXG4gIGNvbG9yOiAjQ0NDO1xyXG4gIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMzAsIDMwLCAzMCwgMC44KTtcclxufVxyXG4ucGFsZXR0ZSB7XHJcbi8qLmlucHV0IHsqL1xyXG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XHJcbiAgZm9udC1mYW1pbHk6IC1hcHBsZS1zeXN0ZW0sIEJsaW5rTWFjU3lzdGVtRm9udCwgXCJIZWx2ZXRpY2EgTmV1ZVwiLCBWZXJkYW5hLCBNZWlyeW8sIHNhbnMtc2VyaWY7XHJcbiAgd2lkdGg6IDEwMCU7XHJcbiAgaGVpZ2h0OiAxMDAlO1xyXG59XHJcblxyXG4uZmxleC1jb250YWluZXIge1xyXG4gIGRpc3BsYXk6IGZsZXg7XHJcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcclxuICBoZWlnaHQ6IDEwMCU7XHJcbiAgd2lkdGg6MTAwJTtcclxufVxyXG5cclxuXHJcbi5kaWNlLXRhYmxlIHtcclxuLyouaW5wdXQgeyovXHJcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcclxuICBmb250LWZhbWlseTogLWFwcGxlLXN5c3RlbSwgQmxpbmtNYWNTeXN0ZW1Gb250LCBcIkhlbHZldGljYSBOZXVlXCIsIFZlcmRhbmEsIE1laXJ5bywgc2Fucy1zZXJpZjtcclxuICB3aWR0aDogMTAwJTtcclxuICBoZWlnaHQ6IDE1ZW07XHJcbn1cclxuXHJcbi5mbGV4LWNvbnRhaW5lciB7XHJcbiAgZGlzcGxheTogLXdlYmtpdC1mbGV4OyAvKiBTYWZhcmkgKi9cclxuICBkaXNwbGF5OiBmbGV4O1xyXG5cclxuICAtd2Via2l0LWZsZXgtZmxvdzogcm93IHdyYXA7IC8qIFNhZmFyaSAqL1xyXG4gIGZsZXgtZmxvdzogIHJvdyB3cmFwO1xyXG5cclxuICAtd2Via2l0LWp1c3RpZnktY29udGVudDogZmxleC1zdGFydDsgLyogU2FmYXJpICovXHJcbiAganVzdGlmeS1jb250ZW50OiBmbGV4LXN0YXJ0O1xyXG5cclxuICAtd2Via2l0LWFsaWduLWl0ZW1zOiBzdHJldGNoOyAvKiBTYWZhcmkgKi9cclxuICBhbGlnbi1pdGVtczogc3RyZXRjaDtcclxuXHJcbn1cclxuLmZsZXgtaXRlbSB7XHJcbiAgbWFyZ2luOiA1cHg7XHJcbi8qICAtd2Via2l0LWZsZXg6IDEgMCBhdXRvOyAqLy8qIFNhZmFyaSAqL1xyXG4vKiAgZmxleDogMSAwIGF1dG87Ki9cclxuLyogIGJveC1zaXppbmc6IGJvcmRlci1ib3g7Ki9cclxuLyogIC13ZWJraXQtZmxleC1ncm93OiAxOyovIC8qIFNhZmFyaSAqL1xyXG4vKiAgZmxleC1ncm93OiAxOyovXHJcbiAgbWF4LXdpZHRoOiAxMDAlO1xyXG59XHJcblxyXG4ubm8tZ3Jvd3tcclxuICAtd2Via2l0LWZsZXgtZ3JvdzogMDsgLyogU2FmYXJpICovXHJcbiAgZmxleC1ncm93OiAwO1xyXG59XHJcblxyXG4uaW1hZ2VzLXNlbGVjdCB7XHJcbiAgZGlzcGxheTogZmxleDtcclxufVxyXG5cclxuLnRhYmxlIHtcclxuICBkaXNwbGF5OnRhYmxlO1xyXG4gIHdpZHRoIDoxMDAlO1xyXG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XHJcbiAgLypib3JkZXI6MXB4IHNvbGlkICNGRkZGMDA7Ki9cclxufVxyXG5cclxuLnRhYmxlLWNlbGwge1xyXG4gIGRpc3BsYXk6dGFibGUtY2VsbDtcclxuICB2ZXJ0aWNhbC1hbGlnbjogdG9wO1xyXG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XHJcbn1cclxuXHJcbiJdfQ== */"] });
    return DiceTableSettingComponent;
}());

/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵsetClassMetadata"](DiceTableSettingComponent, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_1__["Component"],
        args: [{
                selector: 'dice-table-setting',
                templateUrl: './dice-table-setting.component.html',
                styleUrls: ['./dice-table-setting.component.css']
            }]
    }], function () { return [{ type: service_modal_service__WEBPACK_IMPORTED_MODULE_6__["ModalService"] }, { type: service_save_data_service__WEBPACK_IMPORTED_MODULE_7__["SaveDataService"] }, { type: service_panel_service__WEBPACK_IMPORTED_MODULE_8__["PanelService"] }]; }, { _gameType: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_1__["Input"],
            args: ['gameType']
        }], gameTypeChange: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_1__["Output"]
        }] }); })();


/***/ }),

/***/ "OOM5":
/*!******************************************************************!*\
  !*** ./src/app/component/file-storage/file-storage.component.ts ***!
  \******************************************************************/
/*! exports provided: FileStorageComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FileStorageComponent", function() { return FileStorageComponent; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "mrSG");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "fXoL");
/* harmony import */ var _udonarium_core_file_storage_file_archiver__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @udonarium/core/file-storage/file-archiver */ "wBZT");
/* harmony import */ var _udonarium_core_file_storage_image_storage__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @udonarium/core/file-storage/image-storage */ "JQpJ");
/* harmony import */ var _udonarium_core_system__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @udonarium/core/system */ "yNnI");
/* harmony import */ var _udonarium_image_tag__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @udonarium/image-tag */ "WHGT");
/* harmony import */ var service_panel_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! service/panel.service */ "M9xM");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @angular/forms */ "3Pt+");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @angular/common */ "ofXK");
/* harmony import */ var pipe_safe_pipe__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! pipe/safe.pipe */ "6HCy");





 //本家PR #92より





function FileStorageComponent_label_2_div_2_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](1, "\u672A\u8A2D\u5B9A");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
} }
function FileStorageComponent_label_2_div_3_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
} if (rf & 2) {
    var tag_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]().$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtextInterpolate"](tag_r2);
} }
function FileStorageComponent_label_2_Template(rf, ctx) { if (rf & 1) {
    var _r7 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "label");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](1, "input", 11);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("ngModelChange", function FileStorageComponent_label_2_Template_input_ngModelChange_1_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r7); var ctx_r6 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](); return ctx_r6.selectTag = $event; })("change", function FileStorageComponent_label_2_Template_input_change_1_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r7); var ctx_r8 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](); return ctx_r8.resetBtn(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](2, FileStorageComponent_label_2_div_2_Template, 2, 0, "div", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](3, FileStorageComponent_label_2_div_3_Template, 2, 1, "div", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
} if (rf & 2) {
    var tag_r2 = ctx.$implicit;
    var ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpropertyInterpolate"]("value", tag_r2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngModel", ctx_r0.selectTag);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", tag_r2.length == 0);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", tag_r2.length > 0);
} }
function FileStorageComponent_span_22_img_2_Template(rf, ctx) { if (rf & 1) {
    var _r15 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "img", 18);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("click", function FileStorageComponent_span_22_img_2_Template_img_click_0_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r15); var file_r9 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]().$implicit; var ctx_r13 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](); return ctx_r13.onSelectedFile(file_r9); });
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpipe"](1, "safe");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
} if (rf & 2) {
    var file_r9 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]().$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("src", _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpipeBind2"](1, 2, file_r9.url, "resourceUrl"), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵsanitizeUrl"])("alt", file_r9.name);
} }
function FileStorageComponent_span_22_img_3_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelement"](0, "img", 19);
} if (rf & 2) {
    var file_r9 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]().$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpropertyInterpolate"]("alt", file_r9.name);
} }
function FileStorageComponent_span_22_input_4_Template(rf, ctx) { if (rf & 1) {
    var _r20 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "input", 20);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("change", function FileStorageComponent_span_22_input_4_Template_input_change_0_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r20); var file_r9 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]().$implicit; var ctx_r18 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](); return ctx_r18.onChange(file_r9.identifier); });
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
} if (rf & 2) {
    var file_r9 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]().$implicit;
    var ctx_r12 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpropertyInterpolate2"]("id", "", file_r9.identifier, "_", ctx_r12.initTimestamp, "");
} }
function FileStorageComponent_span_22_Template(rf, ctx) { if (rf & 1) {
    var _r23 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "span", 13);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](1, "div", 14);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("click", function FileStorageComponent_span_22_Template_div_click_1_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r23); var file_r9 = ctx.$implicit; var ctx_r22 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](); return ctx_r22.imgBlockClick(file_r9.identifier); });
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](2, FileStorageComponent_span_22_img_2_Template, 2, 5, "img", 15);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](3, FileStorageComponent_span_22_img_3_Template, 1, 1, "img", 16);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](4, FileStorageComponent_span_22_input_4_Template, 1, 2, "input", 17);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
} if (rf & 2) {
    var file_r9 = ctx.$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", 0 < file_r9.url.length);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", file_r9.url.length <= 0);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", 0 < file_r9.url.length);
} }
var FileStorageComponent = /** @class */ (function () {
    //本家PR #92より
    function FileStorageComponent(changeDetector, panelService) {
        this.changeDetector = changeDetector;
        this.panelService = panelService;
        this.initTimestamp = 0;
        //本家PR #92より
        this.searchWord = '';
        this.selectedFile = null;
        this.fileStorageService = _udonarium_core_file_storage_image_storage__WEBPACK_IMPORTED_MODULE_3__["ImageStorage"].instance;
        this.selectTag = '';
        this.newTagName = '';
        this.initTimestamp = Date.now();
    }
    Object.defineProperty(FileStorageComponent.prototype, "searchWords", {
        get: function () {
            if (this._searchWord !== this.searchWord) {
                this._searchWord = this.searchWord;
                this._searchWords = this.searchWord != null && 0 < this.searchWord.trim().length ? this.searchWord.trim().split(/\s+/) : [];
            }
            return this._searchWords;
        },
        enumerable: false,
        configurable: true
    });
    FileStorageComponent.prototype.getAllImage = function () {
        var e_1, _a;
        var imageFileList = [];
        try {
            for (var _b = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(this.fileStorageService.images), _c = _b.next(); !_c.done; _c = _b.next()) {
                var imageFile = _c.value;
                var identifier = imageFile.context.identifier;
                var tag = '';
                if (_udonarium_image_tag__WEBPACK_IMPORTED_MODULE_5__["ImageTag"].get(identifier))
                    tag = _udonarium_image_tag__WEBPACK_IMPORTED_MODULE_5__["ImageTag"].get(identifier).tag;
                if (tag != 'システム予約') //システム予約名を非表示
                    imageFileList.push(imageFile);
            }
        }
        catch (e_1_1) { e_1 = { error: e_1_1 }; }
        finally {
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            }
            finally { if (e_1) throw e_1.error; }
        }
        return imageFileList;
    };
    Object.defineProperty(FileStorageComponent.prototype, "images", {
        get: function () {
            var e_2, _a;
            var imageFileList = [];
            if (this.selectTag == '全て')
                return this.getAllImage();
            try {
                for (var _b = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(this.fileStorageService.images), _c = _b.next(); !_c.done; _c = _b.next()) {
                    var imageFile = _c.value;
                    var identifier = imageFile.context.identifier;
                    if (_udonarium_image_tag__WEBPACK_IMPORTED_MODULE_5__["ImageTag"].get(identifier)) { //
                        var tag = _udonarium_image_tag__WEBPACK_IMPORTED_MODULE_5__["ImageTag"].get(identifier).tag;
                        if (tag == this.selectTag) {
                            imageFileList.push(imageFile);
                        }
                    }
                    else { //タグ未設定の場合 画像投下直後は ImageTag.get(identifier) は空文字ではなく該当なしとなるため
                        if (this.selectTag == '') {
                            imageFileList.push(imageFile);
                        }
                    }
                }
            }
            catch (e_2_1) { e_2 = { error: e_2_1 }; }
            finally {
                try {
                    if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
                }
                finally { if (e_2) throw e_2.error; }
            }
            return imageFileList;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(FileStorageComponent.prototype, "isSelected", {
        get: function () { return this.selectedFile != null; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(FileStorageComponent.prototype, "selectedImageTag", {
        get: function () {
            if (!this.isSelected)
                return null;
            var imageTag = _udonarium_image_tag__WEBPACK_IMPORTED_MODULE_5__["ImageTag"].get(this.selectedFile.identifier);
            return imageTag ? imageTag : _udonarium_image_tag__WEBPACK_IMPORTED_MODULE_5__["ImageTag"].create(this.selectedFile.identifier);
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(FileStorageComponent.prototype, "tagList", {
        get: function () {
            var e_3, _a;
            var tags = [];
            try {
                for (var _b = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(this.fileStorageService.images), _c = _b.next(); !_c.done; _c = _b.next()) {
                    var imageFile = _c.value;
                    var identifier = imageFile.context.identifier;
                    var imageTag = _udonarium_image_tag__WEBPACK_IMPORTED_MODULE_5__["ImageTag"].get(identifier);
                    if (imageTag) {
                        if (imageTag.tag) {
                            if (imageTag.tag != 'システム予約') //システム予約名を非表示
                                tags.push(imageTag.tag);
                        }
                    }
                }
            }
            catch (e_3_1) { e_3 = { error: e_3_1 }; }
            finally {
                try {
                    if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
                }
                finally { if (e_3) throw e_3.error; }
            }
            var tags2 = Array.from(new Set(tags));
            tags2.unshift('全て');
            tags2.unshift('');
            return tags2;
        },
        enumerable: false,
        configurable: true
    });
    FileStorageComponent.prototype.inputNewTag = function (newTag) {
        this.newTagName = newTag;
    };
    FileStorageComponent.prototype.changeTag = function () {
        var e_4, _a;
        if (this.newTagName == '全て')
            return; //表示上混乱するタグの禁止
        if (this.newTagName == 'システム予約')
            return; //システム予約名称
        var changeableImages = this.images;
        console.log("this.newTagName" + this.newTagName);
        try {
            for (var changeableImages_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(changeableImages), changeableImages_1_1 = changeableImages_1.next(); !changeableImages_1_1.done; changeableImages_1_1 = changeableImages_1.next()) {
                var img = changeableImages_1_1.value;
                //    console.log("img.context.identifier:"+img.context.identifier);
                var box = document.getElementById(img.context.identifier + '_' + this.initTimestamp);
                if (box) {
                    if (box.checked) {
                        var imageTag = _udonarium_image_tag__WEBPACK_IMPORTED_MODULE_5__["ImageTag"].get(img.context.identifier);
                        imageTag = imageTag ? imageTag : _udonarium_image_tag__WEBPACK_IMPORTED_MODULE_5__["ImageTag"].create(img.context.identifier);
                        if (this.newTagName == '未設定') {
                            imageTag.tag = '';
                        }
                        else {
                            imageTag.tag = this.newTagName;
                        }
                    }
                }
            }
        }
        catch (e_4_1) { e_4 = { error: e_4_1 }; }
        finally {
            try {
                if (changeableImages_1_1 && !changeableImages_1_1.done && (_a = changeableImages_1.return)) _a.call(changeableImages_1);
            }
            finally { if (e_4) throw e_4.error; }
        }
    };
    FileStorageComponent.prototype.resetBtn = function () {
        //  処理なし
    };
    FileStorageComponent.prototype.ngOnInit = function () {
        var _this = this;
        Promise.resolve().then(function () { return _this.panelService.title = 'ファイル一覧'; });
    };
    FileStorageComponent.prototype.ngAfterViewInit = function () {
        var _this = this;
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_4__["EventSystem"].register(this).on('SYNCHRONIZE_FILE_LIST', function (event) {
            if (event.isSendFromSelf) {
                _this.changeDetector.markForCheck();
            }
        });
    };
    FileStorageComponent.prototype.ngOnDestroy = function () {
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_4__["EventSystem"].unregister(this);
    };
    FileStorageComponent.prototype.handleFileSelect = function (event) {
        var input = event.target;
        var files = input.files;
        if (files.length)
            _udonarium_core_file_storage_file_archiver__WEBPACK_IMPORTED_MODULE_2__["FileArchiver"].instance.load(files);
        input.value = '';
    };
    FileStorageComponent.prototype.onSelectedFile = function (file) {
        console.log('onSelectedFile', file);
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_4__["EventSystem"].call('SELECT_FILE', { fileIdentifier: file.identifier }, _udonarium_core_system__WEBPACK_IMPORTED_MODULE_4__["Network"].peerId);
        this.selectedFile = file; //本家PR #92より
    };
    FileStorageComponent.prototype.imgBlockClick = function (identifier) {
        console.log("identifier:" + identifier);
        var box = document.getElementById(identifier + '_' + this.initTimestamp);
        box.checked = !box.checked;
    };
    FileStorageComponent.prototype.onChange = function (identifier) {
        this.imgBlockClick(identifier);
    };
    FileStorageComponent.ɵfac = function FileStorageComponent_Factory(t) { return new (t || FileStorageComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_1__["ChangeDetectorRef"]), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdirectiveInject"](service_panel_service__WEBPACK_IMPORTED_MODULE_6__["PanelService"])); };
    FileStorageComponent.ɵcmp = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdefineComponent"]({ type: FileStorageComponent, selectors: [["file-storage"]], decls: 23, vars: 2, consts: [[1, "image-chg"], [4, "ngFor", "ngForOf"], [1, "drop-zone"], [1, "material-icons", "large-font"], [1, "small-font"], ["type", "file", "multiple", "", "accept", "image/*", 2, "display", "none", 3, "change"], [1, "sticky-top"], [3, "click"], ["maxlength", "12", "placeholder", "\u65B0\u6A19\u7C64\u540D", 1, "input", 3, "input"], ["id", "file-list"], ["class", "image_", 4, "ngFor", "ngForOf"], ["name", "image-chg", "type", "radio", 3, "value", "ngModel", "ngModelChange", "change"], [4, "ngIf"], [1, "image_"], [1, "img-box", 2, "float", "left", 3, "click"], ["height", "120", 3, "src", "alt", "click", 4, "ngIf"], ["src", "assets/images/loading.gif", 3, "alt", 4, "ngIf"], ["class", "img-chk", "name", "tag_chg_chk", "type", "checkbox", 3, "id", "change", 4, "ngIf"], ["height", "120", 3, "src", "alt", "click"], ["src", "assets/images/loading.gif", 3, "alt"], ["name", "tag_chg_chk", "type", "checkbox", 1, "img-chk", 3, "id", "change"]], template: function FileStorageComponent_Template(rf, ctx) { if (rf & 1) {
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "form");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](1, "div", 0);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](2, FileStorageComponent_label_2_Template, 4, 4, "label", 1);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](3, "label");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](4, "div", 2);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](5, "div");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](6, "i", 3);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](7, "add_photo_alternate");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](8, "div");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](9, "\u62D6\u66F3\u5716\u7247\u5230\u9019\u88E1\u4E0A\u50B3");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](10, "div", 4);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](11, "\u6216\u9EDE\u64CA\u9019\u88E1\u9078\u64C7\u5716\u7247");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](12, "input", 5);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("change", function FileStorageComponent_Template_input_change_12_listener($event) { return ctx.handleFileSelect($event); });
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](13, "div", 4);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelement"](14, "br");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](15, "\u6BCF\u5F35\u5716\u7247\u6700\u59272MB");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](16, "div", 6);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](17, "div");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](18, "button", 7);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("click", function FileStorageComponent_Template_button_click_18_listener() { return ctx.changeTag(); });
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](19, "\u8B8A\u66F4\u6A19\u7C64");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](20, "input", 8);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("input", function FileStorageComponent_Template_input_input_20_listener($event) { return ctx.inputNewTag($event.target.value); });
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](21, "div", 9);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](22, FileStorageComponent_span_22_Template, 5, 3, "span", 10);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
        } if (rf & 2) {
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](2);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngForOf", ctx.tagList);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](20);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngForOf", ctx.images);
        } }, directives: [_angular_forms__WEBPACK_IMPORTED_MODULE_7__["ɵangular_packages_forms_forms_y"], _angular_forms__WEBPACK_IMPORTED_MODULE_7__["NgControlStatusGroup"], _angular_forms__WEBPACK_IMPORTED_MODULE_7__["NgForm"], _angular_common__WEBPACK_IMPORTED_MODULE_8__["NgForOf"], _angular_forms__WEBPACK_IMPORTED_MODULE_7__["RadioControlValueAccessor"], _angular_forms__WEBPACK_IMPORTED_MODULE_7__["DefaultValueAccessor"], _angular_forms__WEBPACK_IMPORTED_MODULE_7__["NgControlStatus"], _angular_forms__WEBPACK_IMPORTED_MODULE_7__["NgModel"], _angular_common__WEBPACK_IMPORTED_MODULE_8__["NgIf"]], pipes: [pipe_safe_pipe__WEBPACK_IMPORTED_MODULE_9__["SafePipe"]], styles: [".drop-zone[_ngcontent-%COMP%] {\r\n  border: 2px dashed #555;\r\n  border-radius: 5px;\r\n  padding: 25px;\r\n  text-align: center;\r\n  font: 24px bold 'Vollkorn';\r\n  color: #444;\r\n  cursor: pointer;\r\n\r\n  margin-bottom: 5px;\r\n\r\n}\r\n\r\n.large-font[_ngcontent-%COMP%] {\r\n  font-size: 64px;\r\n}\r\n\r\n.small-font[_ngcontent-%COMP%] {\r\n  font-size: 12px;\r\n}\r\n\r\n.image[_ngcontent-%COMP%] {\r\n  font-size: 0;\r\n  \r\n  display: inline-block;\r\n  padding: 2px;\r\n  border: transparent 2px solid;\r\n  border-top: transparent 6px solid;\r\n  \r\n}\r\n\r\n\r\n\r\n.image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%] {\r\n  vertical-align: bottom;\r\n}\r\n\r\n.img-chk[_ngcontent-%COMP%]{\r\n  height:1em;\r\n  margin-left:0px;\r\n}\r\n\r\n.img-box[_ngcontent-%COMP%]{\r\n  border: 2px dotted #666;\r\n}\r\n\r\n.selected[_ngcontent-%COMP%] {\r\n  border: 2px dotted #666;\r\n  border-top: 6px solid #444;\r\n}\r\n\r\n.sticky-top[_ngcontent-%COMP%] {\r\n  padding: 5px;\r\n  position: sticky;\r\n  top: 0;\r\n  background-color: rgba(240, 218, 189, 0.8);\r\n  border-top: 1px dotted #666;\r\n  border-bottom: 1px dotted #666;\r\n}\r\n\r\n.sticky-top[_ngcontent-%COMP%]   input[_ngcontent-%COMP%] {\r\n  width: calc(100% - 75px);\r\n}\r\n\r\n\r\n\r\n\r\n\r\n.image-chg[_ngcontent-%COMP%] {\r\n  padding : 5px;\r\n  -webkit-user-select: none;\r\n          user-select: none;\r\n}\r\n\r\n.image-chg[_ngcontent-%COMP%]   label[_ngcontent-%COMP%] {\r\n  display: inline-block;\r\n  position: relative;\r\n}\r\n\r\n.image-chg[_ngcontent-%COMP%]   input[type=\"radio\"][_ngcontent-%COMP%] {\r\n  display: none;\r\n}\r\n\r\n.image-chg[_ngcontent-%COMP%]   input[type=\"radio\"][_ngcontent-%COMP%]    + div[_ngcontent-%COMP%] {\r\n  display: inline-block;\r\n  vertical-align: middle;\r\n  outline: 0;\r\n  font-size: 12px;\r\n  background-color: transparent;\r\n  color: #444; \r\n  border: solid 1px #555;\r\n  padding: 2px 8px;\r\n  margin: 2px;\r\n  border-radius: 100px;\r\n  cursor: pointer;\r\n}\r\n\r\n.image-chg[_ngcontent-%COMP%]   input[type=\"radio\"][_ngcontent-%COMP%]    + div[_ngcontent-%COMP%]:hover {\r\n  background-color: #888;\r\n  color: #eee;\r\n  border: solid 1px #555;\r\n}\r\n\r\n.image-chg[_ngcontent-%COMP%]   input[type=\"radio\"][_ngcontent-%COMP%]:checked    + div[_ngcontent-%COMP%] {\r\n  background: #555;\r\n  color: #CCC;\r\n}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZpbGUtc3RvcmFnZS5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UsdUJBQXVCO0VBR3ZCLGtCQUFrQjtFQUNsQixhQUFhO0VBQ2Isa0JBQWtCO0VBQ2xCLDBCQUEwQjtFQUMxQixXQUFXO0VBQ1gsZUFBZTtBQUNqQixjQUFjO0VBQ1osa0JBQWtCO0FBQ3BCLEdBQUc7QUFDSDs7QUFFQTtFQUNFLGVBQWU7QUFDakI7O0FBRUE7RUFDRSxlQUFlO0FBQ2pCOztBQUVBO0VBQ0UsWUFBWTtFQUNaLFVBQVU7RUFDVixxQkFBcUI7RUFDckIsWUFBWTtFQUNaLDZCQUE2QjtFQUM3QixpQ0FBaUM7RUFDakMsR0FBRztBQUNMOztBQUVBLGNBQWM7O0FBQ2Q7RUFDRSxzQkFBc0I7QUFDeEI7O0FBRUE7RUFDRSxVQUFVO0VBQ1YsZUFBZTtBQUNqQjs7QUFFQTtFQUNFLHVCQUF1QjtBQUN6Qjs7QUFFQTtFQUNFLHVCQUF1QjtFQUN2QiwwQkFBMEI7QUFDNUI7O0FBRUE7RUFDRSxZQUFZO0VBQ1osZ0JBQWdCO0VBQ2hCLE1BQU07RUFDTiwwQ0FBMEM7RUFDMUMsMkJBQTJCO0VBQzNCLDhCQUE4QjtBQUNoQzs7QUFFQTtFQUNFLHdCQUF3QjtBQUMxQjs7QUFDQSxHQUFHOztBQUdILFVBQVU7O0FBQ1Y7RUFDRSxhQUFhO0VBQ2IseUJBQWlCO1VBQWpCLGlCQUFpQjtBQUNuQjs7QUFFQTtFQUNFLHFCQUFxQjtFQUNyQixrQkFBa0I7QUFDcEI7O0FBRUE7RUFDRSxhQUFhO0FBQ2Y7O0FBRUE7RUFDRSxxQkFBcUI7RUFDckIsc0JBQXNCO0VBQ3RCLFVBQVU7RUFDVixlQUFlO0VBQ2YsNkJBQTZCO0VBQzdCLFdBQVc7RUFDWCxzQkFBc0I7RUFDdEIsZ0JBQWdCO0VBQ2hCLFdBQVc7RUFDWCxvQkFBb0I7RUFDcEIsZUFBZTtBQUNqQjs7QUFFQTtFQUNFLHNCQUFzQjtFQUN0QixXQUFXO0VBQ1gsc0JBQXNCO0FBQ3hCOztBQUVBO0VBQ0UsZ0JBQWdCO0VBQ2hCLFdBQVc7QUFDYjs7QUFDQSxHQUFHIiwiZmlsZSI6ImZpbGUtc3RvcmFnZS5jb21wb25lbnQuY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLmRyb3Atem9uZSB7XHJcbiAgYm9yZGVyOiAycHggZGFzaGVkICM1NTU7XHJcbiAgLW1vei1ib3JkZXItcmFkaXVzOiA1cHg7XHJcbiAgLXdlYmtpdC1ib3JkZXItcmFkaXVzOiA1cHg7XHJcbiAgYm9yZGVyLXJhZGl1czogNXB4O1xyXG4gIHBhZGRpbmc6IDI1cHg7XHJcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xyXG4gIGZvbnQ6IDI0cHggYm9sZCAnVm9sbGtvcm4nO1xyXG4gIGNvbG9yOiAjNDQ0O1xyXG4gIGN1cnNvcjogcG9pbnRlcjtcclxuLyplbnR5dV8yICM5MiovXHJcbiAgbWFyZ2luLWJvdHRvbTogNXB4O1xyXG4vKiovXHJcbn1cclxuXHJcbi5sYXJnZS1mb250IHtcclxuICBmb250LXNpemU6IDY0cHg7XHJcbn1cclxuXHJcbi5zbWFsbC1mb250IHtcclxuICBmb250LXNpemU6IDEycHg7XHJcbn1cclxuXHJcbi5pbWFnZSB7XHJcbiAgZm9udC1zaXplOiAwO1xyXG4gIC8qZW50eXVfMiovXHJcbiAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xyXG4gIHBhZGRpbmc6IDJweDtcclxuICBib3JkZXI6IHRyYW5zcGFyZW50IDJweCBzb2xpZDtcclxuICBib3JkZXItdG9wOiB0cmFuc3BhcmVudCA2cHggc29saWQ7XHJcbiAgLyoqL1xyXG59XHJcblxyXG4vKmVudHl1XzIgIzkyKi9cclxuLmltYWdlIGltZyB7XHJcbiAgdmVydGljYWwtYWxpZ246IGJvdHRvbTtcclxufVxyXG5cclxuLmltZy1jaGt7XHJcbiAgaGVpZ2h0OjFlbTtcclxuICBtYXJnaW4tbGVmdDowcHg7XHJcbn1cclxuXHJcbi5pbWctYm94e1xyXG4gIGJvcmRlcjogMnB4IGRvdHRlZCAjNjY2O1xyXG59XHJcblxyXG4uc2VsZWN0ZWQge1xyXG4gIGJvcmRlcjogMnB4IGRvdHRlZCAjNjY2O1xyXG4gIGJvcmRlci10b3A6IDZweCBzb2xpZCAjNDQ0O1xyXG59XHJcblxyXG4uc3RpY2t5LXRvcCB7XHJcbiAgcGFkZGluZzogNXB4O1xyXG4gIHBvc2l0aW9uOiBzdGlja3k7XHJcbiAgdG9wOiAwO1xyXG4gIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMjQwLCAyMTgsIDE4OSwgMC44KTtcclxuICBib3JkZXItdG9wOiAxcHggZG90dGVkICM2NjY7XHJcbiAgYm9yZGVyLWJvdHRvbTogMXB4IGRvdHRlZCAjNjY2O1xyXG59XHJcblxyXG4uc3RpY2t5LXRvcCBpbnB1dCB7XHJcbiAgd2lkdGg6IGNhbGMoMTAwJSAtIDc1cHgpO1xyXG59XHJcbi8qKi9cclxuXHJcblxyXG4vKmVudHl1XzIqL1xyXG4uaW1hZ2UtY2hnIHtcclxuICBwYWRkaW5nIDogNXB4O1xyXG4gIHVzZXItc2VsZWN0OiBub25lO1xyXG59XHJcblxyXG4uaW1hZ2UtY2hnIGxhYmVsIHtcclxuICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XHJcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xyXG59XHJcblxyXG4uaW1hZ2UtY2hnIGlucHV0W3R5cGU9XCJyYWRpb1wiXSB7XHJcbiAgZGlzcGxheTogbm9uZTtcclxufVxyXG5cclxuLmltYWdlLWNoZyBpbnB1dFt0eXBlPVwicmFkaW9cIl0gKyBkaXYge1xyXG4gIGRpc3BsYXk6IGlubGluZS1ibG9jaztcclxuICB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlO1xyXG4gIG91dGxpbmU6IDA7XHJcbiAgZm9udC1zaXplOiAxMnB4O1xyXG4gIGJhY2tncm91bmQtY29sb3I6IHRyYW5zcGFyZW50O1xyXG4gIGNvbG9yOiAjNDQ0OyBcclxuICBib3JkZXI6IHNvbGlkIDFweCAjNTU1O1xyXG4gIHBhZGRpbmc6IDJweCA4cHg7XHJcbiAgbWFyZ2luOiAycHg7XHJcbiAgYm9yZGVyLXJhZGl1czogMTAwcHg7XHJcbiAgY3Vyc29yOiBwb2ludGVyO1xyXG59XHJcblxyXG4uaW1hZ2UtY2hnIGlucHV0W3R5cGU9XCJyYWRpb1wiXSArIGRpdjpob3ZlciB7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogIzg4ODtcclxuICBjb2xvcjogI2VlZTtcclxuICBib3JkZXI6IHNvbGlkIDFweCAjNTU1O1xyXG59XHJcblxyXG4uaW1hZ2UtY2hnIGlucHV0W3R5cGU9XCJyYWRpb1wiXTpjaGVja2VkICsgZGl2IHtcclxuICBiYWNrZ3JvdW5kOiAjNTU1O1xyXG4gIGNvbG9yOiAjQ0NDO1xyXG59XHJcbi8qKi9cclxuXHJcbiJdfQ== */"], changeDetection: 0 });
    return FileStorageComponent;
}());

/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵsetClassMetadata"](FileStorageComponent, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_1__["Component"],
        args: [{
                selector: 'file-storage',
                templateUrl: './file-storage.component.html',
                styleUrls: ['./file-storage.component.css'],
                changeDetection: _angular_core__WEBPACK_IMPORTED_MODULE_1__["ChangeDetectionStrategy"].OnPush
            }]
    }], function () { return [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_1__["ChangeDetectorRef"] }, { type: service_panel_service__WEBPACK_IMPORTED_MODULE_6__["PanelService"] }]; }, null); })();


/***/ }),

/***/ "P9Dn":
/*!************************************************!*\
  !*** ./src/app/class/core/system/util/uuid.ts ***!
  \************************************************/
/*! exports provided: UUID */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "UUID", function() { return UUID; });
var UUID;
(function (UUID) {
    var lut = [];
    for (var i = 0; i < 256; i++) {
        lut[i] = (i < 16 ? '0' : '') + (i).toString(16);
    }
    function generateUuid() {
        var dvals = new Uint32Array(4);
        window.crypto.getRandomValues(dvals);
        var d0 = dvals[0];
        var d1 = dvals[1];
        var d2 = dvals[2];
        var d3 = dvals[3];
        return lut[d0 & 0xff] + lut[d0 >> 8 & 0xff] + lut[d0 >> 16 & 0xff] + lut[d0 >> 24 & 0xff] + '-' +
            lut[d1 & 0xff] + lut[d1 >> 8 & 0xff] + '-' + lut[d1 >> 16 & 0x0f | 0x40] + lut[d1 >> 24 & 0xff] + '-' +
            lut[d2 & 0x3f | 0x80] + lut[d2 >> 8 & 0xff] + '-' + lut[d2 >> 16 & 0xff] + lut[d2 >> 24 & 0xff] + lut[d3 & 0xff] + lut[d3 >> 8 & 0xff] + lut[d3 >> 16 & 0xff] + lut[d3 >> 24 & 0xff];
    }
    UUID.generateUuid = generateUuid;
})(UUID || (UUID = {}));


/***/ }),

/***/ "PEfN":
/*!*************************************************!*\
  !*** ./src/app/service/chat-message.service.ts ***!
  \*************************************************/
/*! exports provided: ChatMessageService */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ChatMessageService", function() { return ChatMessageService; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "fXoL");
/* harmony import */ var _udonarium_chat_tab_list__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @udonarium/chat-tab-list */ "YZvQ");
/* harmony import */ var _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @udonarium/core/synchronize-object/object-store */ "hm7o");
/* harmony import */ var _udonarium_core_system__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @udonarium/core/system */ "yNnI");
/* harmony import */ var _udonarium_game_character__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @udonarium/game-character */ "M/aK");
/* harmony import */ var _udonarium_peer_cursor__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @udonarium/peer-cursor */ "+UEV");
/* harmony import */ var _udonarium_core_file_storage_image_storage__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @udonarium/core/file-storage/image-storage */ "JQpJ");
/* harmony import */ var _udonarium_core_system_util_string_util__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @udonarium/core/system/util/string-util */ "baV6");









var HOURS = 60 * 60 * 1000;
var ChatMessageService = /** @class */ (function () {
    function ChatMessageService() {
        this.intervalTimer = null;
        this.timeOffset = Date.now();
        this.performanceOffset = performance.now();
        this.ntpApiUrls = [
            'https://ntp-a1.nict.go.jp/cgi-bin/json',
            'https://ntp-b1.nict.go.jp/cgi-bin/json',
        ];
        this.gameType = 'DiceBot';
    }
    Object.defineProperty(ChatMessageService.prototype, "chatTabs", {
        get: function () {
            return _udonarium_chat_tab_list__WEBPACK_IMPORTED_MODULE_1__["ChatTabList"].instance.chatTabs;
        },
        enumerable: false,
        configurable: true
    });
    ChatMessageService.prototype.calibrateTimeOffset = function () {
        var _this = this;
        if (this.intervalTimer != null) {
            console.log('calibrateTimeOffset was canceled.');
            return;
        }
        var index = Math.floor(Math.random() * this.ntpApiUrls.length);
        var ntpApiUrl = this.ntpApiUrls[index];
        var sendTime = performance.now();
        fetch(ntpApiUrl)
            .then(function (response) {
            if (response.ok)
                return response.json();
            throw new Error('Network response was not ok.');
        })
            .then(function (jsonObj) {
            var endTime = performance.now();
            var latency = (endTime - sendTime) / 2;
            var timeobj = jsonObj;
            var st = timeobj.st * 1000;
            var fixedTime = st + latency;
            _this.timeOffset = fixedTime;
            _this.performanceOffset = endTime;
            console.log('latency: ' + latency + 'ms');
            console.log('st: ' + st + '');
            console.log('timeOffset: ' + _this.timeOffset);
            console.log('performanceOffset: ' + _this.performanceOffset);
            _this.setIntervalTimer();
        })
            .catch(function (error) {
            console.warn('There has been a problem with your fetch operation: ', error.message);
            _this.setIntervalTimer();
        });
        this.setIntervalTimer();
    };
    ChatMessageService.prototype.setIntervalTimer = function () {
        var _this = this;
        if (this.intervalTimer != null)
            clearTimeout(this.intervalTimer);
        this.intervalTimer = setTimeout(function () {
            _this.intervalTimer = null;
            _this.calibrateTimeOffset();
        }, 6 * HOURS);
    };
    ChatMessageService.prototype.getTime = function () {
        return Math.floor(this.timeOffset + (performance.now() - this.performanceOffset));
    };
    // 本家からachieNum?: number color? :string を追加
    ChatMessageService.prototype.sendMessage = function (chatTab, text, gameSystem, sendFrom, sendTo, tachieNum, color) {
        var img;
        var imgIndex;
        if (tachieNum > 0) {
            imgIndex = tachieNum;
        }
        else {
            imgIndex = 0;
        }
        var _color;
        if (!color) {
            _color = "#000000";
        }
        else {
            _color = color;
        }
        var dicebot = _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_2__["ObjectStore"].instance.get('DiceBot');
        var chatMessageTag;
        if (gameSystem == null) {
            chatMessageTag = '';
        }
        else if (dicebot.checkSecretDiceCommand(gameSystem, text)) {
            chatMessageTag = gameSystem.ID + " secret";
        }
        else {
            chatMessageTag = gameSystem.ID;
        }
        var chatMessage = {
            from: _udonarium_core_system__WEBPACK_IMPORTED_MODULE_3__["Network"].peerContext.userId,
            to: this.findId(sendTo),
            name: this.makeMessageName(sendFrom, sendTo),
            imageIdentifier: this.findImageIdentifier(sendFrom, imgIndex),
            timestamp: this.calcTimeStamp(chatTab),
            tag: chatMessageTag,
            text: text,
            imagePos: this.findImagePos(sendFrom),
            messColor: _color,
            sendFrom: sendFrom //lily
        };
        // ハイド処理
        var chkMessage = ' ' + _udonarium_core_system_util_string_util__WEBPACK_IMPORTED_MODULE_7__["StringUtil"].toHalfWidth(text).toLowerCase();
        var matches_array = chkMessage.match(/\s@(\S+)$/i);
        if (matches_array) {
            if (RegExp.$1 == 'hide')
                chatMessage.imageIdentifier = '';
            chatMessage.text = text.replace(/([@＠]\S+)$/i, '');
        }
        // 立ち絵置き換え
        var matches_array_num = chkMessage.match(/\s@(\d+)$/i);
        if (matches_array_num) {
            var num = parseInt(RegExp.$1);
            chatMessage.imageIdentifier = this.findImageIdentifier(sendFrom, num);
            chatMessage.text = text.replace(/([@＠]\S+)$/i, '');
        }
        return chatTab.addMessage(chatMessage);
    };
    ChatMessageService.prototype.findId = function (identifier) {
        var object = _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_2__["ObjectStore"].instance.get(identifier);
        if (object instanceof _udonarium_game_character__WEBPACK_IMPORTED_MODULE_4__["GameCharacter"]) {
            return object.identifier;
        }
        else if (object instanceof _udonarium_peer_cursor__WEBPACK_IMPORTED_MODULE_5__["PeerCursor"]) {
            return object.userId;
        }
        return null;
    };
    ChatMessageService.prototype.findObjectName = function (identifier) {
        var object = _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_2__["ObjectStore"].instance.get(identifier);
        if (object instanceof _udonarium_game_character__WEBPACK_IMPORTED_MODULE_4__["GameCharacter"]) {
            return object.name;
        }
        else if (object instanceof _udonarium_peer_cursor__WEBPACK_IMPORTED_MODULE_5__["PeerCursor"]) {
            return object.name;
        }
        return identifier;
    };
    ChatMessageService.prototype.makeMessageName = function (sendFrom, sendTo) {
        var sendFromName = this.findObjectName(sendFrom);
        if (sendTo == null || sendTo.length < 1)
            return sendFromName;
        var sendToName = this.findObjectName(sendTo);
        return sendFromName + ' > ' + sendToName;
    };
    ChatMessageService.prototype.findImageIdentifier = function (sendFrom, index) {
        var object = _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_2__["ObjectStore"].instance.get(sendFrom);
        if (object instanceof _udonarium_game_character__WEBPACK_IMPORTED_MODULE_4__["GameCharacter"]) {
            console.log("object.imageDataElement.children.length" + object.imageDataElement.children.length);
            if (object.imageDataElement.children.length > index) {
                var img = _udonarium_core_file_storage_image_storage__WEBPACK_IMPORTED_MODULE_6__["ImageStorage"].instance.get(object.imageDataElement.children[index].value);
                if (img) {
                    return img.identifier;
                }
            }
            return '';
        }
        else if (object instanceof _udonarium_peer_cursor__WEBPACK_IMPORTED_MODULE_5__["PeerCursor"]) {
            return object.imageIdentifier;
        }
        return sendFrom;
    };
    //entyu
    ChatMessageService.prototype.findImagePos = function (identifier) {
        var object = _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_2__["ObjectStore"].instance.get(identifier);
        if (object instanceof _udonarium_game_character__WEBPACK_IMPORTED_MODULE_4__["GameCharacter"]) {
            //        let element = object.getElement('POS', object.detailDataElement);
            var element = object.detailDataElement.getFirstElementByName('POS'); //1.13.xとのmargeで修正
            if (element)
                if (0 <= element.currentValue && element.currentValue <= 11)
                    return element.currentValue;
            return 0;
        }
        return -1;
    };
    //
    ChatMessageService.prototype.calcTimeStamp = function (chatTab) {
        var now = this.getTime();
        var latest = chatTab.latestTimeStamp;
        return now <= latest ? latest + 1 : now;
    };
    ChatMessageService.ɵfac = function ChatMessageService_Factory(t) { return new (t || ChatMessageService)(); };
    ChatMessageService.ɵprov = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineInjectable"]({ token: ChatMessageService, factory: ChatMessageService.ɵfac });
    return ChatMessageService;
}());

/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](ChatMessageService, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Injectable"]
    }], function () { return []; }, null); })();


/***/ }),

/***/ "PYk/":
/*!****************************************************************!*\
  !*** ./src/app/class/core/file-storage/buffer-sharing-task.ts ***!
  \****************************************************************/
/*! exports provided: BufferSharingTask */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BufferSharingTask", function() { return BufferSharingTask; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "mrSG");
/* harmony import */ var msgpack_lite__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! msgpack-lite */ "HlZf");
/* harmony import */ var msgpack_lite__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(msgpack_lite__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _system__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../system */ "yNnI");
/* harmony import */ var _system_util_resettable_timeout__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../system/util/resettable-timeout */ "9ht1");
/* harmony import */ var _system_util_zero_timeout__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../system/util/zero-timeout */ "eS09");





var BufferSharingTask = /** @class */ (function () {
    function BufferSharingTask(identifier, sendTo, data) {
        this.chanks = [];
        this.chankSize = 32 * 1024;
        this.chankReceiveCount = 0;
        this.sentChankIndex = 0;
        this.completedChankIndex = 0;
        this.startTime = 0;
        this.isCanceled = false;
        this.identifier = identifier;
        this.sendTo = sendTo;
        this.data = data;
    }
    BufferSharingTask.createSendTask = function (identifier, sendTo, data) {
        var task = new BufferSharingTask(identifier, sendTo, data);
        task.onstart = function () { return task.initializeSend(); };
        return task;
    };
    BufferSharingTask.createReceiveTask = function (identifier) {
        var task = new BufferSharingTask(identifier);
        task.onstart = function () { return task.initializeReceive(); };
        return task;
    };
    BufferSharingTask.prototype.start = function (data) {
        if (!this.onstart) {
            console.warn('再起動する仕様など無い。');
            return;
        }
        this.data = data;
        this.onstart();
        this.onstart = null;
    };
    BufferSharingTask.prototype.progress = function (loded, total) {
        if (this.onprogress)
            this.onprogress(this, loded, total);
    };
    BufferSharingTask.prototype.finish = function () {
        if (this.isCanceled)
            return;
        this.isCanceled = true;
        if (this.onfinish)
            this.onfinish(this, this.data);
        this.dispose();
    };
    BufferSharingTask.prototype.timeout = function () {
        if (this.isCanceled)
            return;
        this.isCanceled = true;
        if (this.ontimeout)
            this.ontimeout(this);
        if (this.onfinish)
            this.onfinish(this, this.data);
        this.dispose();
    };
    BufferSharingTask.prototype.cancel = function () {
        if (this.isCanceled)
            return;
        if (this.sendTo != null)
            _system__WEBPACK_IMPORTED_MODULE_2__["EventSystem"].call('CANCEL_TASK_' + this.identifier, null, this.sendTo);
        this._cancel();
    };
    BufferSharingTask.prototype._cancel = function () {
        if (this.isCanceled)
            return;
        this.isCanceled = true;
        if (this.oncancel)
            this.oncancel(this);
        if (this.onfinish)
            this.onfinish(this, this.data);
        this.dispose();
    };
    BufferSharingTask.prototype.dispose = function () {
        _system__WEBPACK_IMPORTED_MODULE_2__["EventSystem"].unregister(this);
        if (this.sendChankTimer)
            Object(_system_util_zero_timeout__WEBPACK_IMPORTED_MODULE_4__["clearZeroTimeout"])(this.sendChankTimer);
        if (this.timeoutTimer)
            this.timeoutTimer.clear();
        this.sendChankTimer = null;
        this.timeoutTimer = null;
        this.onprogress = this.onfinish = this.ontimeout = this.oncancel = null;
    };
    BufferSharingTask.prototype.initializeSend = function () {
        var _this = this;
        this.uint8Array = msgpack_lite__WEBPACK_IMPORTED_MODULE_1__["encode"](this.data);
        var total = Math.ceil(this.uint8Array.byteLength / this.chankSize);
        this.chanks = new Array(total);
        console.log('チャンク分割 ' + this.identifier, this.chanks.length);
        _system__WEBPACK_IMPORTED_MODULE_2__["EventSystem"].register(this)
            .on('FILE_MORE_CHANK_' + this.identifier, function (event) {
            if (_this.sendTo !== event.sendFrom)
                return;
            _this.completedChankIndex = event.data;
            if (_this.sendChankTimer == null) {
                _this.resetTimeout();
                _this.sendChank(_this.sentChankIndex + 1);
            }
        })
            .on('DISCONNECT_PEER', function (event) {
            if (event.data.peerId !== _this.sendTo)
                return;
            console.warn('送信キャンセル（Peer切断）', _this, event.data.peerId);
            _this._cancel();
        })
            .on('CANCEL_TASK_' + this.identifier, function (event) {
            console.warn('送信キャンセル', _this, event.sendFrom);
            _this._cancel();
        });
        this.sentChankIndex = this.completedChankIndex = 0;
        Object(_system_util_zero_timeout__WEBPACK_IMPORTED_MODULE_4__["setZeroTimeout"])(function () { return _this.sendChank(0); });
    };
    BufferSharingTask.prototype.sendChank = function (index) {
        var _this = this;
        var chank = this.uint8Array.slice(index * this.chankSize, (index + 1) * this.chankSize);
        var data = { index: index, length: this.chanks.length, chank: chank };
        _system__WEBPACK_IMPORTED_MODULE_2__["EventSystem"].call('FILE_SEND_CHANK_' + this.identifier, data, this.sendTo);
        this.sentChankIndex = index;
        this.sendChankTimer = null;
        if (this.chanks.length <= index + 1) {
            console.log('バッファ送信完了', this.identifier);
            Object(_system_util_zero_timeout__WEBPACK_IMPORTED_MODULE_4__["setZeroTimeout"])(function () { return _this.finish(); });
        }
        else if (this.completedChankIndex + 4 <= index) {
            this.resetTimeout();
        }
        else {
            this.sendChankTimer = Object(_system_util_zero_timeout__WEBPACK_IMPORTED_MODULE_4__["setZeroTimeout"])(function () { _this.sendChank(_this.sentChankIndex + 1); });
        }
    };
    BufferSharingTask.prototype.initializeReceive = function () {
        var _this = this;
        this.resetTimeout();
        this.startTime = performance.now();
        this.chankReceiveCount = 0;
        _system__WEBPACK_IMPORTED_MODULE_2__["EventSystem"].register(this)
            .on('FILE_SEND_CHANK_' + this.identifier, function (event) {
            if (_this.chanks.length < 1)
                _this.chanks = new Array(event.data.length);
            if (_this.chanks[event.data.index] != null) {
                console.log("already received. [" + event.data.index + "] <" + _this.identifier + ">");
                return;
            }
            _this.chankReceiveCount++;
            _this.chanks[event.data.index] = event.data.chank;
            _this.progress(event.data.index, event.data.length);
            if (_this.chanks.length <= _this.chankReceiveCount) {
                _this.finishReceive();
            }
            else {
                _this.resetTimeout();
                _system__WEBPACK_IMPORTED_MODULE_2__["EventSystem"].call('FILE_MORE_CHANK_' + _this.identifier, event.data.index, event.sendFrom);
            }
        })
            .on('DISCONNECT_PEER', function (event) {
            if (event.data.peerId !== _this.sendTo)
                return;
            console.warn('受信キャンセル（Peer切断）', _this, event.data.peerId);
            _this._cancel();
        })
            .on('CANCEL_TASK_' + this.identifier, function (event) {
            console.warn('受信キャンセル', _this, event.sendFrom);
            _this._cancel();
        });
    };
    BufferSharingTask.prototype.finishReceive = function () {
        var e_1, _a, e_2, _b;
        console.log('バッファ受信完了', this.identifier);
        var sumLength = 0;
        try {
            for (var _c = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(this.chanks), _d = _c.next(); !_d.done; _d = _c.next()) {
                var chank = _d.value;
                sumLength += chank.byteLength;
            }
        }
        catch (e_1_1) { e_1 = { error: e_1_1 }; }
        finally {
            try {
                if (_d && !_d.done && (_a = _c.return)) _a.call(_c);
            }
            finally { if (e_1) throw e_1.error; }
        }
        var time = performance.now() - this.startTime;
        var rate = (sumLength / 1024 / 1024) / (time / 1000);
        console.log((sumLength / 1024).toFixed(2) + "KB " + (time / 1000).toFixed(2) + "\u79D2 \u8EE2\u9001\u901F\u5EA6: " + rate.toFixed(2) + "MB/s");
        var uint8Array = new Uint8Array(sumLength);
        var pos = 0;
        try {
            for (var _e = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(this.chanks), _f = _e.next(); !_f.done; _f = _e.next()) {
                var chank = _f.value;
                uint8Array.set(chank, pos);
                pos += chank.byteLength;
            }
        }
        catch (e_2_1) { e_2 = { error: e_2_1 }; }
        finally {
            try {
                if (_f && !_f.done && (_b = _e.return)) _b.call(_e);
            }
            finally { if (e_2) throw e_2.error; }
        }
        this.data = msgpack_lite__WEBPACK_IMPORTED_MODULE_1__["decode"](uint8Array);
        this.finish();
    };
    BufferSharingTask.prototype.resetTimeout = function () {
        var _this = this;
        if (this.timeoutTimer == null)
            this.timeoutTimer = new _system_util_resettable_timeout__WEBPACK_IMPORTED_MODULE_3__["ResettableTimeout"](function () { return _this.timeout(); }, 30 * 1000);
        this.timeoutTimer.reset();
    };
    return BufferSharingTask;
}());



/***/ }),

/***/ "Prh6":
/*!**********************************************************!*\
  !*** ./src/app/class/core/file-storage/audio-storage.ts ***!
  \**********************************************************/
/*! exports provided: AudioStorage */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AudioStorage", function() { return AudioStorage; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "mrSG");
/* harmony import */ var _system__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../system */ "yNnI");
/* harmony import */ var _system_util_resettable_timeout__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../system/util/resettable-timeout */ "9ht1");
/* harmony import */ var _audio_file__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./audio-file */ "eRQf");




var AudioStorage = /** @class */ (function () {
    function AudioStorage() {
        this.hash = {};
        console.log('AudioStorage ready...');
    }
    Object.defineProperty(AudioStorage, "instance", {
        get: function () {
            if (!AudioStorage._instance)
                AudioStorage._instance = new AudioStorage();
            return AudioStorage._instance;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(AudioStorage.prototype, "audios", {
        get: function () {
            var audios = [];
            for (var identifier in this.hash) {
                audios.push(this.hash[identifier]);
            }
            return audios;
        },
        enumerable: false,
        configurable: true
    });
    AudioStorage.prototype.destroy = function () {
        for (var identifier in this.hash) {
            this.delete(identifier);
        }
    };
    AudioStorage.prototype.addAsync = function (arg) {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function () {
            var audio;
            return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"])(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, _audio_file__WEBPACK_IMPORTED_MODULE_3__["AudioFile"].createAsync(arg)];
                    case 1:
                        audio = _a.sent();
                        return [2 /*return*/, this._add(audio)];
                }
            });
        });
    };
    AudioStorage.prototype.add = function (arg) {
        var audio;
        if (typeof arg === 'string') {
            audio = _audio_file__WEBPACK_IMPORTED_MODULE_3__["AudioFile"].create(arg);
        }
        else if (arg instanceof _audio_file__WEBPACK_IMPORTED_MODULE_3__["AudioFile"]) {
            audio = arg;
        }
        else {
            if (this.update(arg))
                return this.hash[arg.identifier];
            audio = _audio_file__WEBPACK_IMPORTED_MODULE_3__["AudioFile"].create(arg);
        }
        return this._add(audio);
    };
    AudioStorage.prototype._add = function (audio) {
        if (_audio_file__WEBPACK_IMPORTED_MODULE_3__["AudioState"].COMPLETE <= audio.state)
            this.lazySynchronize(100);
        if (this.update(audio))
            return this.hash[audio.identifier];
        this.hash[audio.identifier] = audio;
        console.log('add Audio: ' + audio.identifier);
        return audio;
    };
    AudioStorage.prototype.update = function (audio) {
        var context;
        if (audio instanceof _audio_file__WEBPACK_IMPORTED_MODULE_3__["AudioFile"]) {
            context = audio.toContext();
        }
        else {
            context = audio;
        }
        var updateAudio = this.hash[audio.identifier];
        if (updateAudio) {
            updateAudio.apply(audio);
            return true;
        }
        return false;
    };
    AudioStorage.prototype.delete = function (identifier) {
        var audio = this.hash[identifier];
        if (audio) {
            audio.destroy();
            delete this.hash[identifier];
            return true;
        }
        return false;
    };
    AudioStorage.prototype.get = function (identifier) {
        var audio = this.hash[identifier];
        if (audio)
            return audio;
        return null;
    };
    AudioStorage.prototype.synchronize = function (peer) {
        if (this.lazyTimer)
            this.lazyTimer.stop();
        _system__WEBPACK_IMPORTED_MODULE_1__["EventSystem"].call('SYNCHRONIZE_AUDIO_LIST', this.getCatalog(), peer);
    };
    AudioStorage.prototype.lazySynchronize = function (ms, peer) {
        var _this = this;
        if (this.lazyTimer == null)
            this.lazyTimer = new _system_util_resettable_timeout__WEBPACK_IMPORTED_MODULE_2__["ResettableTimeout"](function () { return _this.synchronize(peer); }, ms);
        this.lazyTimer.reset(ms);
    };
    AudioStorage.prototype.getCatalog = function () {
        var e_1, _a;
        var catalog = [];
        try {
            for (var _b = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(AudioStorage.instance.audios), _c = _b.next(); !_c.done; _c = _b.next()) {
                var audio = _c.value;
                if (_audio_file__WEBPACK_IMPORTED_MODULE_3__["AudioState"].COMPLETE <= audio.state) {
                    catalog.push({ identifier: audio.identifier, state: audio.state });
                }
            }
        }
        catch (e_1_1) { e_1 = { error: e_1_1 }; }
        finally {
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            }
            finally { if (e_1) throw e_1.error; }
        }
        return catalog;
    };
    return AudioStorage;
}());



/***/ }),

/***/ "R1wr":
/*!************************************************************************************!*\
  !*** ./src/app/component/game-object-inventory/game-object-inventory.component.ts ***!
  \************************************************************************************/
/*! exports provided: GameObjectInventoryComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GameObjectInventoryComponent", function() { return GameObjectInventoryComponent; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "mrSG");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "fXoL");
/* harmony import */ var _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @udonarium/core/synchronize-object/object-store */ "hm7o");
/* harmony import */ var _udonarium_core_system__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @udonarium/core/system */ "yNnI");
/* harmony import */ var _udonarium_data_summary_setting__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @udonarium/data-summary-setting */ "zP96");
/* harmony import */ var _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @udonarium/sound-effect */ "veT5");
/* harmony import */ var _udonarium_tabletop_object__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @udonarium/tabletop-object */ "e8gA");
/* harmony import */ var component_chat_palette_chat_palette_component__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! component/chat-palette/chat-palette.component */ "jC/+");
/* harmony import */ var component_game_character_sheet_game_character_sheet_component__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! component/game-character-sheet/game-character-sheet.component */ "zXSY");
/* harmony import */ var service_context_menu_service__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! service/context-menu.service */ "9FhF");
/* harmony import */ var component_remote_controller_remote_controller_component__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! component/remote-controller/remote-controller.component */ "JKvL");
/* harmony import */ var service_panel_service__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! service/panel.service */ "M9xM");
/* harmony import */ var service_game_object_inventory_service__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! service/game-object-inventory.service */ "LjVp");
/* harmony import */ var service_pointer_device_service__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! service/pointer-device.service */ "GPP8");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @angular/common */ "ofXK");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @angular/forms */ "3Pt+");
/* harmony import */ var pipe_safe_pipe__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! pipe/safe.pipe */ "6HCy");



















function GameObjectInventoryComponent_ng_container_1_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainer"](0);
} }
function GameObjectInventoryComponent_ng_container_2_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainer"](0);
} }
function GameObjectInventoryComponent_div_3_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
} if (rf & 2) {
    var ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtextInterpolate1"]("", ctx_r2.getTabTitle(ctx_r2.selectTab), "\u6E05\u55AE\u70BA\u7A7A");
} }
function GameObjectInventoryComponent_div_4_ng_container_1_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainer"](0);
} }
var _c0 = function (a1) { return { "box": true, "selected": a1 }; };
var _c1 = function (a0) { return { gameObject: a0 }; };
function GameObjectInventoryComponent_div_4_Template(rf, ctx) { if (rf & 1) {
    var _r16 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "div", 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("contextmenu", function GameObjectInventoryComponent_div_4_Template_div_contextmenu_0_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r16); var gameObject_r13 = ctx.$implicit; var ctx_r15 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](); return ctx_r15.onContextMenu($event, gameObject_r13); })("click", function GameObjectInventoryComponent_div_4_Template_div_click_0_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r16); var gameObject_r13 = ctx.$implicit; var ctx_r17 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](); return ctx_r17.selectGameObject(gameObject_r13); })("dblclick", function GameObjectInventoryComponent_div_4_Template_div_dblclick_0_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r16); var gameObject_r13 = ctx.$implicit; var ctx_r18 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](); return ctx_r18.focusToObject($event, gameObject_r13); });
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](1, GameObjectInventoryComponent_div_4_ng_container_1_Template, 1, 0, "ng-container", 10);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
} if (rf & 2) {
    var gameObject_r13 = ctx.$implicit;
    var ctx_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]();
    var _r9 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵreference"](11);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngClass", _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpureFunction1"](3, _c0, ctx_r3.selectedIdentifier === gameObject_r13.identifier));
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngTemplateOutlet", _r9)("ngTemplateOutletContext", _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpureFunction1"](5, _c1, gameObject_r13));
} }
function GameObjectInventoryComponent_div_5_Template(rf, ctx) { if (rf & 1) {
    var _r20 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "div", 11);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](1, "button", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("click", function GameObjectInventoryComponent_div_5_Template_button_click_1_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r20); var ctx_r19 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](); return ctx_r19.cleanInventory(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](2, "\u6E05\u7A7A\u5893\u5730");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
} if (rf & 2) {
    var ctx_r4 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵattribute"]("disabled", ctx_r4.getGameObjects(ctx_r4.selectTab).length < 1 ? "" : null);
} }
function GameObjectInventoryComponent_ng_template_6_label_2_Template(rf, ctx) { if (rf & 1) {
    var _r24 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "label");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](1, "input", 16);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("ngModelChange", function GameObjectInventoryComponent_ng_template_6_label_2_Template_input_ngModelChange_1_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r24); var ctx_r23 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](2); return ctx_r23.selectTab = $event; });
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](2, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
} if (rf & 2) {
    var inventoryType_r22 = ctx.$implicit;
    var ctx_r21 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpropertyInterpolate"]("value", inventoryType_r22);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngModel", ctx_r21.selectTab);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtextInterpolate2"]("", ctx_r21.getTabTitle(inventoryType_r22), " (", ctx_r21.getInventory(inventoryType_r22).length, ")");
} }
function GameObjectInventoryComponent_ng_template_6_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "form", 13);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](1, "div", 14);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](2, GameObjectInventoryComponent_ng_template_6_label_2_Template, 4, 4, "label", 15);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
} if (rf & 2) {
    var ctx_r6 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngForOf", ctx_r6.inventoryTypes);
} }
function GameObjectInventoryComponent_ng_template_8_ng_container_0_Template(rf, ctx) { if (rf & 1) {
    var _r28 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](1, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](2, "div", 17);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](3, "\u6392\u5217\u6B21\u5E8F");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](4, "input", 18);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("ngModelChange", function GameObjectInventoryComponent_ng_template_8_ng_container_0_Template_input_ngModelChange_4_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r28); var ctx_r27 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](2); return ctx_r27.sortTag = $event; });
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](5, "select", 19);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("ngModelChange", function GameObjectInventoryComponent_ng_template_8_ng_container_0_Template_select_ngModelChange_5_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r28); var ctx_r29 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](2); return ctx_r29.sortOrder = $event; });
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](6, "option", 20);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](7, "\u6607\u9806");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](8, "option", 21);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](9, "\u964D\u9806");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](10, "div", 22);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](11, "\u986F\u793A\u9805\u76EE");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](12, "input", 23);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("ngModelChange", function GameObjectInventoryComponent_ng_template_8_ng_container_0_Template_input_ngModelChange_12_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r28); var ctx_r30 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](2); return ctx_r30.dataTag = $event; });
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](13, "div", 11);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](14, "button", 24);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("click", function GameObjectInventoryComponent_ng_template_8_ng_container_0_Template_button_click_14_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r28); var ctx_r31 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](2); return ctx_r31.toggleEdit(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](15, "i", 25);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](16, "settings");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](17, "\u5B8C\u4E86");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var ctx_r25 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngModel", ctx_r25.sortTag);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngModel", ctx_r25.sortOrder);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](7);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngModel", ctx_r25.dataTag);
} }
function GameObjectInventoryComponent_ng_template_8_ng_container_1_ng_container_6_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var ctx_r32 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtextInterpolate2"]("", ctx_r32.sortTag, " (", ctx_r32.sortOrderName, ")");
} }
function GameObjectInventoryComponent_ng_template_8_ng_container_1_ng_container_7_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](1, "-");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerEnd"]();
} }
function GameObjectInventoryComponent_ng_template_8_ng_container_1_Template(rf, ctx) { if (rf & 1) {
    var _r35 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](1, "table", 26);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](2, "tr");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](3, "th", 27);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](4, "\u6392\u5217\u6B21\u5E8F:");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](5, "td", 27);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](6, GameObjectInventoryComponent_ng_template_8_ng_container_1_ng_container_6_Template, 2, 2, "ng-container", 2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](7, GameObjectInventoryComponent_ng_template_8_ng_container_1_ng_container_7_Template, 2, 0, "ng-container", 2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](8, "td");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](9, "button", 24);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("click", function GameObjectInventoryComponent_ng_template_8_ng_container_1_Template_button_click_9_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r35); var ctx_r34 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](2); return ctx_r34.toggleEdit(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](10, "i", 25);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](11, "settings");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](12, "\u8A2D\u5B9A");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var ctx_r26 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](6);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", 0 < ctx_r26.sortTag.length);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", ctx_r26.sortTag.length < 1);
} }
function GameObjectInventoryComponent_ng_template_8_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](0, GameObjectInventoryComponent_ng_template_8_ng_container_0_Template, 18, 3, "ng-container", 2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](1, GameObjectInventoryComponent_ng_template_8_ng_container_1_Template, 13, 2, "ng-container", 2);
} if (rf & 2) {
    var ctx_r8 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", ctx_r8.isEdit);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", !ctx_r8.isEdit);
} }
function GameObjectInventoryComponent_ng_template_10_button_3_Template(rf, ctx) { if (rf & 1) {
    var _r42 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "button", 35);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("click", function GameObjectInventoryComponent_ng_template_10_button_3_Template_button_click_0_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r42); var gameObject_r36 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]().gameObject; var ctx_r40 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](); return ctx_r40.onContextMenu($event, gameObject_r36); });
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](1, "i", 36);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](2, "settings");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
} }
function GameObjectInventoryComponent_ng_template_10_img_6_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelement"](0, "img", 37);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpipe"](1, "safe");
} if (rf & 2) {
    var gameObject_r36 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]().gameObject;
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("src", _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpipeBind2"](1, 1, gameObject_r36.imageFile.url, "resourceUrl"), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵsanitizeUrl"]);
} }
function GameObjectInventoryComponent_ng_template_10_div_8_ng_container_1_ng_container_1_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainer"](0);
} }
var _c2 = function (a0) { return { dataElm: a0 }; };
function GameObjectInventoryComponent_ng_template_10_div_8_ng_container_1_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](1, GameObjectInventoryComponent_ng_template_10_div_8_ng_container_1_ng_container_1_Template, 1, 0, "ng-container", 10);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var dataElm_r45 = ctx.$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](3);
    var _r11 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵreference"](13);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngTemplateOutlet", _r11)("ngTemplateOutletContext", _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpureFunction1"](2, _c2, dataElm_r45));
} }
function GameObjectInventoryComponent_ng_template_10_div_8_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](1, GameObjectInventoryComponent_ng_template_10_div_8_ng_container_1_Template, 2, 4, "ng-container", 38);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
} if (rf & 2) {
    var gameObject_r36 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]().gameObject;
    var ctx_r39 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngForOf", ctx_r39.getInventoryTags(gameObject_r36))("ngForTrackBy", ctx_r39.trackByGameObject);
} }
function GameObjectInventoryComponent_ng_template_10_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "div", 28);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](1, "div", 29);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](3, GameObjectInventoryComponent_ng_template_10_button_3_Template, 3, 0, "button", 30);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](4, "div", 31);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](5, "div", 32);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](6, GameObjectInventoryComponent_ng_template_10_img_6_Template, 2, 4, "img", 33);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](7, "div", 34);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](8, GameObjectInventoryComponent_ng_template_10_div_8_Template, 2, 2, "div", 2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
} if (rf & 2) {
    var gameObject_r36 = ctx.gameObject;
    var ctx_r10 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtextInterpolate1"]("", gameObject_r36.name, " ");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", ctx_r10.selectedIdentifier === gameObject_r36.identifier);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", gameObject_r36.imageFile.url);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", gameObject_r36.rootDataElement);
} }
function GameObjectInventoryComponent_ng_template_12_ng_container_0_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelement"](1, "br");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerEnd"]();
} }
function GameObjectInventoryComponent_ng_template_12_div_1_ng_container_2_Template(rf, ctx) { if (rf & 1) {
    var _r55 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](1, "div", 44);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](2, "div", 45);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](4, "input", 46);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("ngModelChange", function GameObjectInventoryComponent_ng_template_12_div_1_ng_container_2_Template_input_ngModelChange_4_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r55); var dataElm_r48 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](2).dataElm; return dataElm_r48.currentValue = $event; });
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](5, "div", 44);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](6, "input", 47);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("ngModelChange", function GameObjectInventoryComponent_ng_template_12_div_1_ng_container_2_Template_input_ngModelChange_6_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r55); var dataElm_r48 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](2).dataElm; return dataElm_r48.currentValue = $event; });
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpipe"](7, "safe");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var dataElm_r48 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](2).dataElm;
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtextInterpolate"](dataElm_r48.name);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngModel", dataElm_r48.currentValue);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵstyleMap"](_angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpipeBind2"](7, 6, "font-size: 0.8em; min-width: 1em; width:" + (dataElm_r48.name.length + 4.5) + "em; --min: 0; --max: " + dataElm_r48.value + "; --val:" + dataElm_r48.currentValue + ";", "style"));
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpropertyInterpolate"]("max", dataElm_r48.value);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngModel", dataElm_r48.currentValue);
} }
function GameObjectInventoryComponent_ng_template_12_div_1_ng_container_3_Template(rf, ctx) { if (rf & 1) {
    var _r61 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](1, "div", 48);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](3, "div", 49);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](4, "div", 50);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](5, "div", 51);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](6, "div", 52);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](7);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](8, "input", 53);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("ngModelChange", function GameObjectInventoryComponent_ng_template_12_div_1_ng_container_3_Template_input_ngModelChange_8_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r61); var dataElm_r48 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](2).dataElm; return dataElm_r48.value = $event; });
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var dataElm_r48 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](2).dataElm;
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtextInterpolate"](dataElm_r48.name);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](5);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtextInterpolate"](dataElm_r48.value);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngModel", dataElm_r48.value);
} }
function GameObjectInventoryComponent_ng_template_12_div_1_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "div", 40);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerStart"](1, 41);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](2, GameObjectInventoryComponent_ng_template_12_div_1_ng_container_2_Template, 8, 9, "ng-container", 42);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](3, GameObjectInventoryComponent_ng_template_12_div_1_ng_container_3_Template, 9, 3, "ng-container", 43);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
} if (rf & 2) {
    var dataElm_r48 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]().dataElm;
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngSwitch", dataElm_r48.attributes["type"]);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngSwitchCase", "numberResource");
} }
function GameObjectInventoryComponent_ng_template_12_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](0, GameObjectInventoryComponent_ng_template_12_ng_container_0_Template, 2, 0, "ng-container", 2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](1, GameObjectInventoryComponent_ng_template_12_div_1_Template, 4, 2, "div", 39);
} if (rf & 2) {
    var dataElm_r48 = ctx.dataElm;
    var ctx_r12 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", (dataElm_r48 == null ? null : dataElm_r48.name) === ctx_r12.newLineString);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", dataElm_r48 && dataElm_r48.name !== ctx_r12.newLineString);
} }
var GameObjectInventoryComponent = /** @class */ (function () {
    function GameObjectInventoryComponent(changeDetector, panelService, inventoryService, contextMenuService, pointerDeviceService) {
        this.changeDetector = changeDetector;
        this.panelService = panelService;
        this.inventoryService = inventoryService;
        this.contextMenuService = contextMenuService;
        this.pointerDeviceService = pointerDeviceService;
        this.inventoryTypes = ['table', 'common', 'graveyard'];
        this.selectTab = 'table';
        this.selectedIdentifier = '';
        this.isEdit = false;
        this.disptimer = null;
    }
    Object.defineProperty(GameObjectInventoryComponent.prototype, "sortTag", {
        get: function () { return this.inventoryService.sortTag; },
        set: function (sortTag) { this.inventoryService.sortTag = sortTag; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(GameObjectInventoryComponent.prototype, "sortOrder", {
        get: function () { return this.inventoryService.sortOrder; },
        set: function (sortOrder) { this.inventoryService.sortOrder = sortOrder; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(GameObjectInventoryComponent.prototype, "dataTag", {
        get: function () { return this.inventoryService.dataTag; },
        set: function (dataTag) { this.inventoryService.dataTag = dataTag; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(GameObjectInventoryComponent.prototype, "dataTags", {
        get: function () { return this.inventoryService.dataTags; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(GameObjectInventoryComponent.prototype, "sortOrderName", {
        get: function () { return this.sortOrder === _udonarium_data_summary_setting__WEBPACK_IMPORTED_MODULE_4__["SortOrder"].ASC ? '昇順' : '降順'; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(GameObjectInventoryComponent.prototype, "newLineString", {
        get: function () { return this.inventoryService.newLineString; },
        enumerable: false,
        configurable: true
    });
    GameObjectInventoryComponent.prototype.ngOnInit = function () {
        var _this = this;
        Promise.resolve().then(function () { return _this.panelService.title = 'インベントリ'; });
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_3__["EventSystem"].register(this)
            .on('SELECT_TABLETOP_OBJECT', -1000, function (event) {
            if (_udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_2__["ObjectStore"].instance.get(event.data.identifier) instanceof _udonarium_tabletop_object__WEBPACK_IMPORTED_MODULE_6__["TabletopObject"]) {
                _this.selectedIdentifier = event.data.identifier;
                _this.changeDetector.markForCheck();
            }
        })
            .on('SYNCHRONIZE_FILE_LIST', function (event) {
            if (event.isSendFromSelf)
                _this.changeDetector.markForCheck();
        })
            .on('UPDATE_INVENTORY', function (event) {
            if (event.isSendFromSelf)
                _this.changeDetector.markForCheck();
        })
            .on('OPEN_NETWORK', function (event) {
            _this.inventoryTypes = ['table', 'common', _udonarium_core_system__WEBPACK_IMPORTED_MODULE_3__["Network"].peerId, 'graveyard'];
            if (!_this.inventoryTypes.includes(_this.selectTab)) {
                _this.selectTab = _udonarium_core_system__WEBPACK_IMPORTED_MODULE_3__["Network"].peerId;
            }
        });
        this.inventoryTypes = ['table', 'common', _udonarium_core_system__WEBPACK_IMPORTED_MODULE_3__["Network"].peerId, 'graveyard'];
    };
    GameObjectInventoryComponent.prototype.ngAfterViewInit = function () {
        var _this = this;
        this.disptimer = setInterval(function () {
            _this.changeDetector.detectChanges();
        }, 200);
        //インベントリ非表示機能のために追加、操作を検知して更新する方式に変えたい
    };
    GameObjectInventoryComponent.prototype.ngOnDestroy = function () {
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_3__["EventSystem"].unregister(this);
        this.disptimer = null;
    };
    GameObjectInventoryComponent.prototype.getTabTitle = function (inventoryType) {
        switch (inventoryType) {
            case 'table':
                return 'テーブル';
            case _udonarium_core_system__WEBPACK_IMPORTED_MODULE_3__["Network"].peerId:
                return '個人';
            case 'graveyard':
                return '墓場';
            default:
                return '共有';
        }
    };
    GameObjectInventoryComponent.prototype.getInventory = function (inventoryType) {
        switch (inventoryType) {
            case 'table':
                return this.inventoryService.tableInventory;
            case _udonarium_core_system__WEBPACK_IMPORTED_MODULE_3__["Network"].peerId:
                return this.inventoryService.privateInventory;
            case 'graveyard':
                return this.inventoryService.graveyardInventory;
            default:
                return this.inventoryService.commonInventory;
        }
    };
    GameObjectInventoryComponent.prototype.getGameObjects = function (inventoryType) {
        var e_1, _a;
        switch (inventoryType) {
            case 'table':
                var tableCharacterList_dest = [];
                var tableCharacterList_scr = this.inventoryService.tableInventory.tabletopObjects;
                try {
                    for (var tableCharacterList_scr_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(tableCharacterList_scr), tableCharacterList_scr_1_1 = tableCharacterList_scr_1.next(); !tableCharacterList_scr_1_1.done; tableCharacterList_scr_1_1 = tableCharacterList_scr_1.next()) {
                        var character = tableCharacterList_scr_1_1.value;
                        var character_ = character;
                        if (!character_.hideInventory)
                            tableCharacterList_dest.push(character);
                    }
                }
                catch (e_1_1) { e_1 = { error: e_1_1 }; }
                finally {
                    try {
                        if (tableCharacterList_scr_1_1 && !tableCharacterList_scr_1_1.done && (_a = tableCharacterList_scr_1.return)) _a.call(tableCharacterList_scr_1);
                    }
                    finally { if (e_1) throw e_1.error; }
                }
                return tableCharacterList_dest;
            default:
                return this.getInventory(inventoryType).tabletopObjects;
        }
    };
    GameObjectInventoryComponent.prototype.getInventoryTags = function (gameObject) {
        return this.getInventory(gameObject.location.name).dataElementMap.get(gameObject.identifier);
    };
    GameObjectInventoryComponent.prototype.onContextMenu = function (e, gameObject) {
        var e_2, _a;
        var _this = this;
        if (document.activeElement instanceof HTMLInputElement && document.activeElement.getAttribute('type') !== 'range')
            return;
        e.stopPropagation();
        e.preventDefault();
        if (!this.pointerDeviceService.isAllowedToOpenContextMenu)
            return;
        this.selectGameObject(gameObject);
        var position = this.pointerDeviceService.pointers[0];
        var actions = [];
        actions.push({ name: '詳細を表示', action: function () { _this.showDetail(gameObject); } });
        if (gameObject.location.name !== 'graveyard') {
            actions.push({ name: 'チャットパレットを表示', action: function () { _this.showChatPalette(gameObject); } });
            actions.push({ name: 'リモコンを表示', action: function () { _this.showRemoteController(gameObject); } });
        }
        actions.push(service_context_menu_service__WEBPACK_IMPORTED_MODULE_9__["ContextMenuSeparator"]);
        var locations = [
            { name: 'table', alias: 'テーブルに移動' },
            { name: 'common', alias: '共有イベントリに移動' },
            { name: _udonarium_core_system__WEBPACK_IMPORTED_MODULE_3__["Network"].peerId, alias: '個人イベントリに移動' },
            { name: 'graveyard', alias: '墓場に移動' }
        ];
        var _loop_1 = function (location_1) {
            if (gameObject.location.name === location_1.name)
                return "continue";
            actions.push({
                name: location_1.alias,
                action: function () {
                    gameObject.setLocation(location_1.name);
                    _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_5__["SoundEffect"].play(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_5__["PresetSound"].piecePut);
                }
            });
        };
        try {
            for (var locations_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(locations), locations_1_1 = locations_1.next(); !locations_1_1.done; locations_1_1 = locations_1.next()) {
                var location_1 = locations_1_1.value;
                _loop_1(location_1);
            }
        }
        catch (e_2_1) { e_2 = { error: e_2_1 }; }
        finally {
            try {
                if (locations_1_1 && !locations_1_1.done && (_a = locations_1.return)) _a.call(locations_1);
            }
            finally { if (e_2) throw e_2.error; }
        }
        if (gameObject.location.name === 'graveyard') {
            actions.push({
                name: '削除する',
                action: function () {
                    _this.deleteGameObject(gameObject);
                    _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_5__["SoundEffect"].play(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_5__["PresetSound"].sweep);
                }
            });
        }
        actions.push(service_context_menu_service__WEBPACK_IMPORTED_MODULE_9__["ContextMenuSeparator"]);
        actions.push({
            name: 'コピーを作る',
            action: function () {
                _this.cloneGameObject(gameObject);
                _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_5__["SoundEffect"].play(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_5__["PresetSound"].piecePut);
            }
        });
        this.contextMenuService.open(position, actions, gameObject.name);
    };
    GameObjectInventoryComponent.prototype.toggleEdit = function () {
        this.isEdit = !this.isEdit;
    };
    GameObjectInventoryComponent.prototype.cleanInventory = function () {
        var e_3, _a;
        var tabTitle = this.getTabTitle(this.selectTab);
        var gameObjects = this.getGameObjects(this.selectTab);
        if (!confirm(tabTitle + "\u306B\u5B58\u5728\u3059\u308B" + gameObjects.length + "\u500B\u306E\u8981\u7D20\u3092\u5B8C\u5168\u306B\u524A\u9664\u3057\u307E\u3059\u304B\uFF1F"))
            return;
        try {
            for (var gameObjects_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(gameObjects), gameObjects_1_1 = gameObjects_1.next(); !gameObjects_1_1.done; gameObjects_1_1 = gameObjects_1.next()) {
                var gameObject = gameObjects_1_1.value;
                this.deleteGameObject(gameObject);
            }
        }
        catch (e_3_1) { e_3 = { error: e_3_1 }; }
        finally {
            try {
                if (gameObjects_1_1 && !gameObjects_1_1.done && (_a = gameObjects_1.return)) _a.call(gameObjects_1);
            }
            finally { if (e_3) throw e_3.error; }
        }
        _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_5__["SoundEffect"].play(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_5__["PresetSound"].sweep);
    };
    GameObjectInventoryComponent.prototype.cloneGameObject = function (gameObject) {
        gameObject.clone();
    };
    GameObjectInventoryComponent.prototype.showDetail = function (gameObject) {
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_3__["EventSystem"].trigger('SELECT_TABLETOP_OBJECT', { identifier: gameObject.identifier, className: gameObject.aliasName });
        var coordinate = this.pointerDeviceService.pointers[0];
        var title = 'キャラクターシート';
        if (gameObject.name.length)
            title += ' - ' + gameObject.name;
        var option = { title: title, left: coordinate.x - 800, top: coordinate.y - 300, width: 800, height: 600 };
        var component = this.panelService.open(component_game_character_sheet_game_character_sheet_component__WEBPACK_IMPORTED_MODULE_8__["GameCharacterSheetComponent"], option);
        component.tabletopObject = gameObject;
    };
    GameObjectInventoryComponent.prototype.showChatPalette = function (gameObject) {
        var coordinate = this.pointerDeviceService.pointers[0];
        var option = { left: coordinate.x - 250, top: coordinate.y - 175, width: 615, height: 350 };
        var component = this.panelService.open(component_chat_palette_chat_palette_component__WEBPACK_IMPORTED_MODULE_7__["ChatPaletteComponent"], option);
        component.character = gameObject;
    };
    GameObjectInventoryComponent.prototype.showRemoteController = function (gameObject) {
        var coordinate = this.pointerDeviceService.pointers[0];
        var option = { left: coordinate.x - 250, top: coordinate.y - 175, width: 700, height: 600 };
        var component = this.panelService.open(component_remote_controller_remote_controller_component__WEBPACK_IMPORTED_MODULE_10__["RemoteControllerComponent"], option);
        component.character = gameObject;
    };
    GameObjectInventoryComponent.prototype.focusToObject = function (e, gameObject) {
        if (!(e.target instanceof HTMLElement)) {
            return;
        }
        if (e.target.tagName.toLowerCase() == 'input') {
            return;
        }
        if (gameObject.location.name != "table") {
            return;
        }
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_3__["EventSystem"].trigger('FOCUS_TO_TABLETOP_COORDINATE', { x: gameObject.location.x, y: gameObject.location.y });
    };
    GameObjectInventoryComponent.prototype.selectGameObject = function (gameObject) {
        var aliasName = gameObject.aliasName;
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_3__["EventSystem"].trigger('SELECT_TABLETOP_OBJECT', { identifier: gameObject.identifier, className: gameObject.aliasName });
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_3__["EventSystem"].trigger('HIGHTLIGHT_TABLETOP_OBJECT', { identifier: gameObject.identifier });
    };
    GameObjectInventoryComponent.prototype.deleteGameObject = function (gameObject) {
        gameObject.destroy();
        this.changeDetector.markForCheck();
    };
    GameObjectInventoryComponent.prototype.trackByGameObject = function (index, gameObject) {
        return gameObject ? gameObject.identifier : index;
    };
    GameObjectInventoryComponent.ɵfac = function GameObjectInventoryComponent_Factory(t) { return new (t || GameObjectInventoryComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_1__["ChangeDetectorRef"]), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdirectiveInject"](service_panel_service__WEBPACK_IMPORTED_MODULE_11__["PanelService"]), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdirectiveInject"](service_game_object_inventory_service__WEBPACK_IMPORTED_MODULE_12__["GameObjectInventoryService"]), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdirectiveInject"](service_context_menu_service__WEBPACK_IMPORTED_MODULE_9__["ContextMenuService"]), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdirectiveInject"](service_pointer_device_service__WEBPACK_IMPORTED_MODULE_13__["PointerDeviceService"])); };
    GameObjectInventoryComponent.ɵcmp = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdefineComponent"]({ type: GameObjectInventoryComponent, selectors: [["game-object-inventory"]], decls: 14, vars: 6, consts: [[1, "component"], [4, "ngTemplateOutlet"], [4, "ngIf"], [3, "ngClass", "contextmenu", "click", "dblclick", 4, "ngFor", "ngForOf", "ngForTrackBy"], ["style", "padding-top: 6px;", 4, "ngIf"], ["inventoryTab", ""], ["inventoryViewSetting", ""], ["gameObjectTags", ""], ["dataElmTag", ""], [3, "ngClass", "contextmenu", "click", "dblclick"], [4, "ngTemplateOutlet", "ngTemplateOutletContext"], [2, "padding-top", "6px"], [1, "danger", 3, "click"], [1, "is-sticky-top"], [1, "tab"], [4, "ngFor", "ngForOf"], ["name", "tab", "type", "radio", "ng-control", "options", 3, "value", "ngModel", "ngModelChange"], [2, "font-size", "12px"], ["placeholder", "\u6A19\u7C64\u540D\u7A31", 3, "ngModel", "ngModelChange"], [3, "ngModel", "ngModelChange"], ["value", "ASC"], ["value", "DESC"], [2, "font-size", "12px", "padding-top", "6px"], ["placeholder", "\u7528\u7A7A\u683C\u5C07\u5404\u6A19\u7C64\u5206\u9694 \u659C\u7DDA\u9694\u884C ex.\u300CHP MP / \u5099\u8A3B\u300D", 2, "width", "100%", "box-sizing", "border-box", 3, "ngModel", "ngModelChange"], [1, "tab-setting", "small-font", 3, "click"], [1, "material-icons", "small-font"], [2, "font-size", "0.8em"], [2, "vertical-align", "middle"], [1, "inventory-object"], [1, "object-name"], ["style", "font-size: 0.8em; padding: 2px 5px;", 3, "click", 4, "ngIf"], [1, "object-tags-box"], [1, "table-cell", "image-box"], [3, "src", 4, "ngIf"], [1, "table-cell"], [2, "font-size", "0.8em", "padding", "2px 5px", 3, "click"], [1, "material-icons", 2, "font-size", "1em"], [3, "src"], [4, "ngFor", "ngForOf", "ngForTrackBy"], ["class", "object-tag", 4, "ngIf"], [1, "object-tag"], [3, "ngSwitch"], [4, "ngSwitchCase"], [4, "ngSwitchDefault"], [1, "resource-tag"], [2, "font-size", "0.8em", "display", "inline-block", "margin-right", "0.5em"], ["type", "number", "size", "1", "placeholder", "Value", 1, "input", "resource-value", 3, "ngModel", "ngModelChange"], ["type", "range", "min", "0", 3, "max", "ngModel", "ngModelChange"], [1, "tag-name"], [2, "text-align", "center"], [2, "display", "inline-block"], [1, "tag-value-box"], [1, "hidden-spacer", 2, "font-weight", "bold"], ["size", "1", "placeholder", "", 1, "input", "tag-value", 3, "ngModel", "ngModelChange"]], template: function GameObjectInventoryComponent_Template(rf, ctx) { if (rf & 1) {
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "div", 0);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](1, GameObjectInventoryComponent_ng_container_1_Template, 1, 0, "ng-container", 1);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](2, GameObjectInventoryComponent_ng_container_2_Template, 1, 0, "ng-container", 1);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](3, GameObjectInventoryComponent_div_3_Template, 2, 1, "div", 2);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](4, GameObjectInventoryComponent_div_4_Template, 2, 7, "div", 3);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](5, GameObjectInventoryComponent_div_5_Template, 3, 1, "div", 4);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](6, GameObjectInventoryComponent_ng_template_6_Template, 3, 1, "ng-template", null, 5, _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplateRefExtractor"]);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](8, GameObjectInventoryComponent_ng_template_8_Template, 2, 2, "ng-template", null, 6, _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplateRefExtractor"]);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](10, GameObjectInventoryComponent_ng_template_10_Template, 9, 4, "ng-template", null, 7, _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplateRefExtractor"]);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](12, GameObjectInventoryComponent_ng_template_12_Template, 2, 2, "ng-template", null, 8, _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplateRefExtractor"]);
        } if (rf & 2) {
            var _r5 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵreference"](7);
            var _r7 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵreference"](9);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngTemplateOutlet", _r5);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngTemplateOutlet", _r7);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", ctx.getGameObjects(ctx.selectTab).length < 1);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngForOf", ctx.getGameObjects(ctx.selectTab))("ngForTrackBy", ctx.trackByGameObject);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", ctx.selectTab === "graveyard");
        } }, directives: [_angular_common__WEBPACK_IMPORTED_MODULE_14__["NgTemplateOutlet"], _angular_common__WEBPACK_IMPORTED_MODULE_14__["NgIf"], _angular_common__WEBPACK_IMPORTED_MODULE_14__["NgForOf"], _angular_common__WEBPACK_IMPORTED_MODULE_14__["NgClass"], _angular_forms__WEBPACK_IMPORTED_MODULE_15__["ɵangular_packages_forms_forms_y"], _angular_forms__WEBPACK_IMPORTED_MODULE_15__["NgControlStatusGroup"], _angular_forms__WEBPACK_IMPORTED_MODULE_15__["NgForm"], _angular_forms__WEBPACK_IMPORTED_MODULE_15__["RadioControlValueAccessor"], _angular_forms__WEBPACK_IMPORTED_MODULE_15__["DefaultValueAccessor"], _angular_forms__WEBPACK_IMPORTED_MODULE_15__["NgControlStatus"], _angular_forms__WEBPACK_IMPORTED_MODULE_15__["NgModel"], _angular_forms__WEBPACK_IMPORTED_MODULE_15__["SelectControlValueAccessor"], _angular_forms__WEBPACK_IMPORTED_MODULE_15__["NgSelectOption"], _angular_forms__WEBPACK_IMPORTED_MODULE_15__["ɵangular_packages_forms_forms_x"], _angular_common__WEBPACK_IMPORTED_MODULE_14__["NgSwitch"], _angular_common__WEBPACK_IMPORTED_MODULE_14__["NgSwitchCase"], _angular_common__WEBPACK_IMPORTED_MODULE_14__["NgSwitchDefault"], _angular_forms__WEBPACK_IMPORTED_MODULE_15__["NumberValueAccessor"], _angular_forms__WEBPACK_IMPORTED_MODULE_15__["RangeValueAccessor"]], pipes: [pipe_safe_pipe__WEBPACK_IMPORTED_MODULE_16__["SafePipe"]], styles: [".component[_ngcontent-%COMP%] {\r\n  width: 100%;\r\n}\r\n\r\n.box[_ngcontent-%COMP%] {\r\n  border: transparent 2px solid;\r\n  border-left: transparent 6px solid;\r\n  margin-top: 2px;\r\n  padding: 2px;\r\n  padding-bottom: 3px;\r\n  box-sizing: border-box;\r\n\r\n  border-bottom: 1px dotted #666;\r\n}\r\n\r\n.selected[_ngcontent-%COMP%] {\r\n  padding: 2px;\r\n  border: 2px dotted #666;\r\n  border-left: 6px solid #444;\r\n}\r\n\r\n.hidden-spacer[_ngcontent-%COMP%] {\r\n  visibility: hidden;\r\n  height: 0;\r\n  font-size: 1.0em;\r\n  min-width:1em; \r\n  max-width : 12em;\r\n  overflow: hidden;\r\n  padding: 0 2px;\r\n  box-sizing: border-box;\r\n  white-space: nowrap;\r\n}\r\n\r\n.input[_ngcontent-%COMP%] {\r\n  background: none;\r\n  border: none;\r\n  border-radius: 2px;\r\n  outline: none;\r\n  color: #444;\r\n  padding: 2px;\r\n  box-sizing: border-box;\r\n}\r\n\r\n.input[_ngcontent-%COMP%]:hover {\r\n  background: #EEE;\r\n}\r\n\r\n.input[_ngcontent-%COMP%]:focus {\r\n  background: #FFF;\r\n}\r\n\r\ninput[type=number][_ngcontent-%COMP%] {\r\n  -moz-appearance: textfield;\r\n}\r\n\r\ninput[type=number][_ngcontent-%COMP%]:hover, input[type=number][_ngcontent-%COMP%]:focus {\r\n  -moz-appearance: number-input;\r\n}\r\n\r\ninput[type='range'][_ngcontent-%COMP%] {\r\n  --slider-track-color: transparent; \r\n  --slider-fill-color: #555; \r\n  --slider-border-color: #777;\r\n  --slider-height: 0.8em;\r\n  --slider-thumb-size: 1.0em;\r\n  --range: calc(var(--max) - var(--min));\r\n  --ratio: calc((var(--val) - var(--min))/var(--range));\r\n  --sx: calc(.5*var(--slider-thumb-size) + var(--ratio)*(100% - var(--slider-thumb-size)));\r\n  margin: 0;\r\n  padding: 0;\r\n  background: transparent;\r\n  font: 1em/1 arial, sans-serif;\r\n  outline: 0;\r\n  -webkit-appearance: none;\r\n     -moz-appearance: none;\r\n          appearance: none;\r\n}\r\n\r\ninput[type='range'][_ngcontent-%COMP%], input[type='range'][_ngcontent-%COMP%]::-webkit-slider-thumb {\r\n  -webkit-appearance: none;\r\n}\r\n\r\ninput[type='range'][_ngcontent-%COMP%]::-webkit-slider-runnable-track {\r\n  box-sizing: border-box;\r\n  border-top: solid 1px var(--slider-border-color);\r\n  border-bottom: solid 1px var(--slider-border-color);\r\n  border-radius: var(--slider-height);\r\n  height: var(--slider-height);\r\n  background: var(--slider-track-color);\r\n}\r\n\r\ninput[type='range'][_ngcontent-%COMP%]::-webkit-slider-runnable-track {\r\n  background: linear-gradient(var(--slider-fill-color), var(--slider-fill-color)) 0/var(--sx) 100% no-repeat var(--slider-track-color);\r\n  cursor: pointer;\r\n}\r\n\r\ninput[type='range'][_ngcontent-%COMP%]::-moz-range-track {\r\n  box-sizing: border-box;\r\n  border: solid 1px var(--slider-border-color);\r\n  border-radius: var(--slider-height);\r\n  height: var(--slider-height);\r\n  background: var(--slider-track-color);\r\n}\r\n\r\ninput[type='range'][_ngcontent-%COMP%]::-ms-track {\r\n  box-sizing: border-box;\r\n  border: solid 1px var(--slider-border-color);\r\n  border-radius: var(--slider-height);\r\n  height: var(--slider-height);\r\n  background: var(--slider-track-color);\r\n}\r\n\r\ninput[type='range'][_ngcontent-%COMP%]::-moz-range-progress {\r\n  height: var(--slider-height);\r\n  background: var(--slider-fill-color);\r\n  border-radius: var(--slider-height);\r\n}\r\n\r\ninput[type='range'][_ngcontent-%COMP%]::-ms-fill-lower {\r\n  height: var(--slider-height);\r\n  background: var(--slider-fill-color);\r\n  border-radius: var(--slider-height);\r\n}\r\n\r\ninput[type='range'][_ngcontent-%COMP%]::-webkit-slider-thumb {\r\n  margin-top: calc((var(--slider-height) - var(--slider-thumb-size)) / 2 - 1px);\r\n  width: var(--slider-thumb-size);\r\n  height: var(--slider-thumb-size);\r\n  box-sizing: border-box;\r\n  border: solid 1px var(--slider-border-color);\r\n  border-radius: 2em;\r\n  background: #ddd;\r\n  cursor: pointer;\r\n}\r\n\r\ninput[type='range'][_ngcontent-%COMP%]::-moz-range-thumb {\r\n  width: var(--slider-thumb-size);\r\n  height: var(--slider-thumb-size);\r\n  box-sizing: border-box;\r\n  border: solid 1px var(--slider-border-color);\r\n  border-radius: 2em;\r\n  background: #ddd;\r\n  cursor: pointer;\r\n}\r\n\r\ninput[type='range'][_ngcontent-%COMP%]::-ms-thumb {\r\n  margin-top: 0;\r\n  width: var(--slider-thumb-size);\r\n  height: var(--slider-thumb-size);\r\n  box-sizing: border-box;\r\n  border: solid 1px  var(--slider-border-color);\r\n  border-radius: 2em;\r\n  background: #ddd;\r\n  cursor: pointer;\r\n}\r\n\r\ninput[type='range'][_ngcontent-%COMP%]::-ms-tooltip {\r\n  display: none;\r\n}\r\n\r\n.tab[_ngcontent-%COMP%] {\r\n  padding : 5px;\r\n  -webkit-user-select: none;\r\n          user-select: none;\r\n}\r\n\r\n.tab[_ngcontent-%COMP%] {\r\n  padding : 0px;\r\n  border: solid 1px #555;\r\n  border-radius: 0.3em;\r\n  overflow: hidden;\r\n\r\n  display: flex;\r\n  flex-flow:  row nowrap;\r\n  justify-content: space-around;\r\n  align-items: stretch;\r\n\r\n  text-align: center;\r\n\r\n  margin: 0px; \r\n  max-width: 500px;\r\n\r\n  background-color: rgba(240,218,189, 0.9);\r\n}\r\n\r\n.tab[_ngcontent-%COMP%]   label[_ngcontent-%COMP%] {\r\n  display: inline-block;\r\n  flex: 1 0 auto;\r\n  flex-grow: 1;\r\n}\r\n\r\n.tab[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:hover {\r\n  background-color: #888;\r\n  color: #eee;\r\n  border-color: #555;\r\n}\r\n\r\n.tab[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:checked {\r\n  background: #555;\r\n  color: #CCC;\r\n}\r\n\r\n.tab[_ngcontent-%COMP%]   input[type=\"radio\"][_ngcontent-%COMP%] {\r\n  display: none;\r\n}\r\n\r\n.tab[_ngcontent-%COMP%]   input[type=\"radio\"][_ngcontent-%COMP%]    + div[_ngcontent-%COMP%] {\r\n  vertical-align: middle;\r\n  outline: 0;\r\n  font-size: 0.6em;\r\n  background-color: transparent;\r\n  color: #444; \r\n  \r\n  box-sizing: border-box;\r\n\r\n  margin: 0px; \r\n  padding: 2px 8px;\r\n\r\n  cursor: pointer;\r\n}\r\n\r\n.tab[_ngcontent-%COMP%]   input[type=\"radio\"][_ngcontent-%COMP%]    + div[_ngcontent-%COMP%]:hover {\r\n  background-color: #888;\r\n  color: #eee;\r\n  border-color: #555;\r\n}\r\n\r\n.tab[_ngcontent-%COMP%]   input[type=\"radio\"][_ngcontent-%COMP%]:checked    + div[_ngcontent-%COMP%] {\r\n  background: #555;\r\n  color: #CCC;\r\n}\r\n\r\n.is-sticky-top[_ngcontent-%COMP%] {\r\n  position: sticky;\r\n  top : 0;\r\n}\r\n\r\n.tab-setting[_ngcontent-%COMP%] {\r\n  background-color: transparent;\r\n  color: #444; \r\n  border: solid 1px #555;\r\n  padding: 2px 8px;\r\n  border-radius: 5px;\r\n  cursor: pointer;\r\n}\r\n\r\n.tab-setting[_ngcontent-%COMP%]:hover {\r\n  background-color: #888;\r\n  color: #eee;\r\n  border: solid 1px #555;\r\n}\r\n\r\n.small-font[_ngcontent-%COMP%] {\r\n  font-size: 12px;\r\n  vertical-align: middle;\r\n}\r\n\r\n.material-icons[_ngcontent-%COMP%] {\r\n  vertical-align: middle;\r\n  font-size: 1.0rem;\r\n}\r\n\r\n.table-cell[_ngcontent-%COMP%] {\r\n  display: table-cell;\r\n}\r\n\r\n.image-box[_ngcontent-%COMP%] {\r\n  padding: 0px;\r\n  width: 32px;\r\n  height: 32px;\r\n  display: table-cell;\r\n  vertical-align: top;\r\n}\r\n\r\n.image-box[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{\r\n  width: 100%;\r\n  height: 100%;\r\n  vertical-align: bottom;\r\n  object-fit: cover;\r\n  object-position: 50% 0%;\r\n}\r\n\r\n.inventory-object[_ngcontent-%COMP%] {\r\n  font-size: 14px;\r\n  display: inline-block;\r\n  vertical-align: text-top;\r\n}\r\n\r\n.object-name[_ngcontent-%COMP%] {\r\n  font-size: 0.8em;\r\n  font-weight: bold;\r\n  padding: 0 0.25em;\r\n}\r\n\r\n.object-tags-box[_ngcontent-%COMP%] {\r\n  display: table;\r\n  table-layout: fixed;\r\n}\r\n\r\n.object-tag[_ngcontent-%COMP%] {\r\n  display: inline-block;\r\n  padding: 0 0.25em;\r\n  vertical-align: middle;\r\n}\r\n\r\n.resource-tag[_ngcontent-%COMP%] {\r\n  text-align: center;\r\n  vertical-align: bottom;\r\n  overflow: hidden;\r\n  white-space: nowrap;\r\n}\r\n\r\n.resource-value[_ngcontent-%COMP%] {\r\n  font-weight: bold;\r\n  width: 4em;\r\n  text-align: right;\r\n  font-family: inherit;\r\n}\r\n\r\n.tag-name[_ngcontent-%COMP%] {\r\n  font-size: 0.8em;\r\n  text-align: left;\r\n  vertical-align: bottom;\r\n  min-width:1em;\r\n  max-width: 12em;\r\n  overflow: hidden;\r\n  white-space: nowrap;\r\n}\r\n\r\n.tag-value-box[_ngcontent-%COMP%]{\r\n  display: table-cell;\r\n  width: 10px;\r\n}\r\n\r\n.tag-value[_ngcontent-%COMP%] {\r\n  font-size: 1.0em;\r\n  font-weight: bold;\r\n  width: 100%;\r\n  min-width: 1em;\r\n  max-width: 12em;\r\n  text-align: center;\r\n  font-family: inherit;\r\n}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImdhbWUtb2JqZWN0LWludmVudG9yeS5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UsV0FBVztBQUNiOztBQUVBO0VBQ0UsNkJBQTZCO0VBQzdCLGtDQUFrQztFQUNsQyxlQUFlO0VBQ2YsWUFBWTtFQUNaLG1CQUFtQjtFQUNuQixzQkFBc0I7O0VBRXRCLDhCQUE4QjtBQUNoQzs7QUFDQTtFQUNFLFlBQVk7RUFDWix1QkFBdUI7RUFDdkIsMkJBQTJCO0FBQzdCOztBQUVBO0VBQ0Usa0JBQWtCO0VBQ2xCLFNBQVM7RUFDVCxnQkFBZ0I7RUFDaEIsYUFBYTtFQUNiLGdCQUFnQjtFQUNoQixnQkFBZ0I7RUFDaEIsY0FBYztFQUNkLHNCQUFzQjtFQUN0QixtQkFBbUI7QUFDckI7O0FBRUE7RUFDRSxnQkFBZ0I7RUFDaEIsWUFBWTtFQUNaLGtCQUFrQjtFQUNsQixhQUFhO0VBQ2IsV0FBVztFQUNYLFlBQVk7RUFDWixzQkFBc0I7QUFDeEI7O0FBRUE7RUFDRSxnQkFBZ0I7QUFDbEI7O0FBRUE7RUFDRSxnQkFBZ0I7QUFDbEI7O0FBRUE7RUFDRSwwQkFBMEI7QUFDNUI7O0FBRUE7RUFDRSw2QkFBNkI7QUFDL0I7O0FBRUE7RUFDRSxpQ0FBaUMsRUFBRSxTQUFTO0VBQzVDLHlCQUF5QixFQUFFLFFBQVE7RUFDbkMsMkJBQTJCO0VBQzNCLHNCQUFzQjtFQUN0QiwwQkFBMEI7RUFDMUIsc0NBQXNDO0VBQ3RDLHFEQUFxRDtFQUNyRCx3RkFBd0Y7RUFDeEYsU0FBUztFQUNULFVBQVU7RUFDVix1QkFBdUI7RUFDdkIsNkJBQTZCO0VBQzdCLFVBQVU7RUFDVix3QkFBZ0I7S0FBaEIscUJBQWdCO1VBQWhCLGdCQUFnQjtBQUNsQjs7QUFFQTtFQUNFLHdCQUF3QjtBQUMxQjs7QUFFQTtFQUNFLHNCQUFzQjtFQUN0QixnREFBZ0Q7RUFDaEQsbURBQW1EO0VBQ25ELG1DQUFtQztFQUNuQyw0QkFBNEI7RUFDNUIscUNBQXFDO0FBQ3ZDOztBQUVBO0VBQ0Usb0lBQW9JO0VBQ3BJLGVBQWU7QUFDakI7O0FBRUE7RUFDRSxzQkFBc0I7RUFDdEIsNENBQTRDO0VBQzVDLG1DQUFtQztFQUNuQyw0QkFBNEI7RUFDNUIscUNBQXFDO0FBQ3ZDOztBQUVBO0VBQ0Usc0JBQXNCO0VBQ3RCLDRDQUE0QztFQUM1QyxtQ0FBbUM7RUFDbkMsNEJBQTRCO0VBQzVCLHFDQUFxQztBQUN2Qzs7QUFFQTtFQUNFLDRCQUE0QjtFQUM1QixvQ0FBb0M7RUFDcEMsbUNBQW1DO0FBQ3JDOztBQUVBO0VBQ0UsNEJBQTRCO0VBQzVCLG9DQUFvQztFQUNwQyxtQ0FBbUM7QUFDckM7O0FBRUE7RUFDRSw2RUFBNkU7RUFDN0UsK0JBQStCO0VBQy9CLGdDQUFnQztFQUNoQyxzQkFBc0I7RUFDdEIsNENBQTRDO0VBQzVDLGtCQUFrQjtFQUNsQixnQkFBZ0I7RUFDaEIsZUFBZTtBQUNqQjs7QUFFQTtFQUNFLCtCQUErQjtFQUMvQixnQ0FBZ0M7RUFDaEMsc0JBQXNCO0VBQ3RCLDRDQUE0QztFQUM1QyxrQkFBa0I7RUFDbEIsZ0JBQWdCO0VBQ2hCLGVBQWU7QUFDakI7O0FBRUE7RUFDRSxhQUFhO0VBQ2IsK0JBQStCO0VBQy9CLGdDQUFnQztFQUNoQyxzQkFBc0I7RUFDdEIsNkNBQTZDO0VBQzdDLGtCQUFrQjtFQUNsQixnQkFBZ0I7RUFDaEIsZUFBZTtBQUNqQjs7QUFFQTtFQUNFLGFBQWE7QUFDZjs7QUFFQTtFQUNFLGFBQWE7RUFDYix5QkFBaUI7VUFBakIsaUJBQWlCO0FBQ25COztBQUVBO0VBQ0UsYUFBYTtFQUNiLHNCQUFzQjtFQUN0QixvQkFBb0I7RUFDcEIsZ0JBQWdCOztFQUVoQixhQUFhO0VBQ2Isc0JBQXNCO0VBQ3RCLDZCQUE2QjtFQUM3QixvQkFBb0I7O0VBRXBCLGtCQUFrQjs7RUFFbEIsV0FBVztFQUNYLGdCQUFnQjs7RUFFaEIsd0NBQXdDO0FBQzFDOztBQUVBO0VBQ0UscUJBQXFCO0VBQ3JCLGNBQWM7RUFDZCxZQUFZO0FBQ2Q7O0FBRUE7RUFDRSxzQkFBc0I7RUFDdEIsV0FBVztFQUNYLGtCQUFrQjtBQUNwQjs7QUFFQTtFQUNFLGdCQUFnQjtFQUNoQixXQUFXO0FBQ2I7O0FBRUE7RUFDRSxhQUFhO0FBQ2Y7O0FBRUE7RUFDRSxzQkFBc0I7RUFDdEIsVUFBVTtFQUNWLGdCQUFnQjtFQUNoQiw2QkFBNkI7RUFDN0IsV0FBVzs7RUFFWCxzQkFBc0I7O0VBRXRCLFdBQVc7RUFDWCxnQkFBZ0I7O0VBRWhCLGVBQWU7QUFDakI7O0FBRUE7RUFDRSxzQkFBc0I7RUFDdEIsV0FBVztFQUNYLGtCQUFrQjtBQUNwQjs7QUFFQTtFQUNFLGdCQUFnQjtFQUNoQixXQUFXO0FBQ2I7O0FBRUE7RUFDRSxnQkFBZ0I7RUFDaEIsT0FBTztBQUNUOztBQUVBO0VBQ0UsNkJBQTZCO0VBQzdCLFdBQVc7RUFDWCxzQkFBc0I7RUFDdEIsZ0JBQWdCO0VBQ2hCLGtCQUFrQjtFQUNsQixlQUFlO0FBQ2pCOztBQUVBO0VBQ0Usc0JBQXNCO0VBQ3RCLFdBQVc7RUFDWCxzQkFBc0I7QUFDeEI7O0FBRUE7RUFDRSxlQUFlO0VBQ2Ysc0JBQXNCO0FBQ3hCOztBQUVBO0VBQ0Usc0JBQXNCO0VBQ3RCLGlCQUFpQjtBQUNuQjs7QUFFQTtFQUNFLG1CQUFtQjtBQUNyQjs7QUFFQTtFQUNFLFlBQVk7RUFDWixXQUFXO0VBQ1gsWUFBWTtFQUNaLG1CQUFtQjtFQUNuQixtQkFBbUI7QUFDckI7O0FBRUE7RUFDRSxXQUFXO0VBQ1gsWUFBWTtFQUNaLHNCQUFzQjtFQUN0QixpQkFBaUI7RUFDakIsdUJBQXVCO0FBQ3pCOztBQUVBO0VBQ0UsZUFBZTtFQUNmLHFCQUFxQjtFQUNyQix3QkFBd0I7QUFDMUI7O0FBRUE7RUFDRSxnQkFBZ0I7RUFDaEIsaUJBQWlCO0VBQ2pCLGlCQUFpQjtBQUNuQjs7QUFFQTtFQUNFLGNBQWM7RUFDZCxtQkFBbUI7QUFDckI7O0FBRUE7RUFDRSxxQkFBcUI7RUFDckIsaUJBQWlCO0VBQ2pCLHNCQUFzQjtBQUN4Qjs7QUFFQTtFQUNFLGtCQUFrQjtFQUNsQixzQkFBc0I7RUFDdEIsZ0JBQWdCO0VBQ2hCLG1CQUFtQjtBQUNyQjs7QUFFQTtFQUNFLGlCQUFpQjtFQUNqQixVQUFVO0VBQ1YsaUJBQWlCO0VBQ2pCLG9CQUFvQjtBQUN0Qjs7QUFFQTtFQUNFLGdCQUFnQjtFQUNoQixnQkFBZ0I7RUFDaEIsc0JBQXNCO0VBQ3RCLGFBQWE7RUFDYixlQUFlO0VBQ2YsZ0JBQWdCO0VBQ2hCLG1CQUFtQjtBQUNyQjs7QUFFQTtFQUNFLG1CQUFtQjtFQUNuQixXQUFXO0FBQ2I7O0FBRUE7RUFDRSxnQkFBZ0I7RUFDaEIsaUJBQWlCO0VBQ2pCLFdBQVc7RUFDWCxjQUFjO0VBQ2QsZUFBZTtFQUNmLGtCQUFrQjtFQUNsQixvQkFBb0I7QUFDdEIiLCJmaWxlIjoiZ2FtZS1vYmplY3QtaW52ZW50b3J5LmNvbXBvbmVudC5jc3MiLCJzb3VyY2VzQ29udGVudCI6WyIuY29tcG9uZW50IHtcclxuICB3aWR0aDogMTAwJTtcclxufVxyXG5cclxuLmJveCB7XHJcbiAgYm9yZGVyOiB0cmFuc3BhcmVudCAycHggc29saWQ7XHJcbiAgYm9yZGVyLWxlZnQ6IHRyYW5zcGFyZW50IDZweCBzb2xpZDtcclxuICBtYXJnaW4tdG9wOiAycHg7XHJcbiAgcGFkZGluZzogMnB4O1xyXG4gIHBhZGRpbmctYm90dG9tOiAzcHg7XHJcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcclxuXHJcbiAgYm9yZGVyLWJvdHRvbTogMXB4IGRvdHRlZCAjNjY2O1xyXG59XHJcbi5zZWxlY3RlZCB7XHJcbiAgcGFkZGluZzogMnB4O1xyXG4gIGJvcmRlcjogMnB4IGRvdHRlZCAjNjY2O1xyXG4gIGJvcmRlci1sZWZ0OiA2cHggc29saWQgIzQ0NDtcclxufVxyXG5cclxuLmhpZGRlbi1zcGFjZXIge1xyXG4gIHZpc2liaWxpdHk6IGhpZGRlbjtcclxuICBoZWlnaHQ6IDA7XHJcbiAgZm9udC1zaXplOiAxLjBlbTtcclxuICBtaW4td2lkdGg6MWVtOyBcclxuICBtYXgtd2lkdGggOiAxMmVtO1xyXG4gIG92ZXJmbG93OiBoaWRkZW47XHJcbiAgcGFkZGluZzogMCAycHg7XHJcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcclxuICB3aGl0ZS1zcGFjZTogbm93cmFwO1xyXG59XHJcblxyXG4uaW5wdXQge1xyXG4gIGJhY2tncm91bmQ6IG5vbmU7XHJcbiAgYm9yZGVyOiBub25lO1xyXG4gIGJvcmRlci1yYWRpdXM6IDJweDtcclxuICBvdXRsaW5lOiBub25lO1xyXG4gIGNvbG9yOiAjNDQ0O1xyXG4gIHBhZGRpbmc6IDJweDtcclxuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xyXG59XHJcblxyXG4uaW5wdXQ6aG92ZXIge1xyXG4gIGJhY2tncm91bmQ6ICNFRUU7XHJcbn1cclxuXHJcbi5pbnB1dDpmb2N1cyB7XHJcbiAgYmFja2dyb3VuZDogI0ZGRjtcclxufVxyXG5cclxuaW5wdXRbdHlwZT1udW1iZXJdIHtcclxuICAtbW96LWFwcGVhcmFuY2U6IHRleHRmaWVsZDtcclxufVxyXG5cclxuaW5wdXRbdHlwZT1udW1iZXJdOmhvdmVyLCBpbnB1dFt0eXBlPW51bWJlcl06Zm9jdXMge1xyXG4gIC1tb3otYXBwZWFyYW5jZTogbnVtYmVyLWlucHV0O1xyXG59XHJcblxyXG5pbnB1dFt0eXBlPSdyYW5nZSddIHtcclxuICAtLXNsaWRlci10cmFjay1jb2xvcjogdHJhbnNwYXJlbnQ7IC8qICNjY2MgKi9cclxuICAtLXNsaWRlci1maWxsLWNvbG9yOiAjNTU1OyAvKiM3NzcgKi9cclxuICAtLXNsaWRlci1ib3JkZXItY29sb3I6ICM3Nzc7XHJcbiAgLS1zbGlkZXItaGVpZ2h0OiAwLjhlbTtcclxuICAtLXNsaWRlci10aHVtYi1zaXplOiAxLjBlbTtcclxuICAtLXJhbmdlOiBjYWxjKHZhcigtLW1heCkgLSB2YXIoLS1taW4pKTtcclxuICAtLXJhdGlvOiBjYWxjKCh2YXIoLS12YWwpIC0gdmFyKC0tbWluKSkvdmFyKC0tcmFuZ2UpKTtcclxuICAtLXN4OiBjYWxjKC41KnZhcigtLXNsaWRlci10aHVtYi1zaXplKSArIHZhcigtLXJhdGlvKSooMTAwJSAtIHZhcigtLXNsaWRlci10aHVtYi1zaXplKSkpO1xyXG4gIG1hcmdpbjogMDtcclxuICBwYWRkaW5nOiAwO1xyXG4gIGJhY2tncm91bmQ6IHRyYW5zcGFyZW50O1xyXG4gIGZvbnQ6IDFlbS8xIGFyaWFsLCBzYW5zLXNlcmlmO1xyXG4gIG91dGxpbmU6IDA7XHJcbiAgYXBwZWFyYW5jZTogbm9uZTtcclxufVxyXG5cclxuaW5wdXRbdHlwZT0ncmFuZ2UnXSwgaW5wdXRbdHlwZT0ncmFuZ2UnXTo6LXdlYmtpdC1zbGlkZXItdGh1bWIge1xyXG4gIC13ZWJraXQtYXBwZWFyYW5jZTogbm9uZTtcclxufVxyXG5cclxuaW5wdXRbdHlwZT0ncmFuZ2UnXTo6LXdlYmtpdC1zbGlkZXItcnVubmFibGUtdHJhY2sge1xyXG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XHJcbiAgYm9yZGVyLXRvcDogc29saWQgMXB4IHZhcigtLXNsaWRlci1ib3JkZXItY29sb3IpO1xyXG4gIGJvcmRlci1ib3R0b206IHNvbGlkIDFweCB2YXIoLS1zbGlkZXItYm9yZGVyLWNvbG9yKTtcclxuICBib3JkZXItcmFkaXVzOiB2YXIoLS1zbGlkZXItaGVpZ2h0KTtcclxuICBoZWlnaHQ6IHZhcigtLXNsaWRlci1oZWlnaHQpO1xyXG4gIGJhY2tncm91bmQ6IHZhcigtLXNsaWRlci10cmFjay1jb2xvcik7XHJcbn1cclxuXHJcbmlucHV0W3R5cGU9J3JhbmdlJ106Oi13ZWJraXQtc2xpZGVyLXJ1bm5hYmxlLXRyYWNrIHtcclxuICBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQodmFyKC0tc2xpZGVyLWZpbGwtY29sb3IpLCB2YXIoLS1zbGlkZXItZmlsbC1jb2xvcikpIDAvdmFyKC0tc3gpIDEwMCUgbm8tcmVwZWF0IHZhcigtLXNsaWRlci10cmFjay1jb2xvcik7XHJcbiAgY3Vyc29yOiBwb2ludGVyO1xyXG59XHJcblxyXG5pbnB1dFt0eXBlPSdyYW5nZSddOjotbW96LXJhbmdlLXRyYWNrIHtcclxuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xyXG4gIGJvcmRlcjogc29saWQgMXB4IHZhcigtLXNsaWRlci1ib3JkZXItY29sb3IpO1xyXG4gIGJvcmRlci1yYWRpdXM6IHZhcigtLXNsaWRlci1oZWlnaHQpO1xyXG4gIGhlaWdodDogdmFyKC0tc2xpZGVyLWhlaWdodCk7XHJcbiAgYmFja2dyb3VuZDogdmFyKC0tc2xpZGVyLXRyYWNrLWNvbG9yKTtcclxufVxyXG5cclxuaW5wdXRbdHlwZT0ncmFuZ2UnXTo6LW1zLXRyYWNrIHtcclxuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xyXG4gIGJvcmRlcjogc29saWQgMXB4IHZhcigtLXNsaWRlci1ib3JkZXItY29sb3IpO1xyXG4gIGJvcmRlci1yYWRpdXM6IHZhcigtLXNsaWRlci1oZWlnaHQpO1xyXG4gIGhlaWdodDogdmFyKC0tc2xpZGVyLWhlaWdodCk7XHJcbiAgYmFja2dyb3VuZDogdmFyKC0tc2xpZGVyLXRyYWNrLWNvbG9yKTtcclxufVxyXG5cclxuaW5wdXRbdHlwZT0ncmFuZ2UnXTo6LW1vei1yYW5nZS1wcm9ncmVzcyB7XHJcbiAgaGVpZ2h0OiB2YXIoLS1zbGlkZXItaGVpZ2h0KTtcclxuICBiYWNrZ3JvdW5kOiB2YXIoLS1zbGlkZXItZmlsbC1jb2xvcik7XHJcbiAgYm9yZGVyLXJhZGl1czogdmFyKC0tc2xpZGVyLWhlaWdodCk7XHJcbn1cclxuXHJcbmlucHV0W3R5cGU9J3JhbmdlJ106Oi1tcy1maWxsLWxvd2VyIHtcclxuICBoZWlnaHQ6IHZhcigtLXNsaWRlci1oZWlnaHQpO1xyXG4gIGJhY2tncm91bmQ6IHZhcigtLXNsaWRlci1maWxsLWNvbG9yKTtcclxuICBib3JkZXItcmFkaXVzOiB2YXIoLS1zbGlkZXItaGVpZ2h0KTtcclxufVxyXG5cclxuaW5wdXRbdHlwZT0ncmFuZ2UnXTo6LXdlYmtpdC1zbGlkZXItdGh1bWIge1xyXG4gIG1hcmdpbi10b3A6IGNhbGMoKHZhcigtLXNsaWRlci1oZWlnaHQpIC0gdmFyKC0tc2xpZGVyLXRodW1iLXNpemUpKSAvIDIgLSAxcHgpO1xyXG4gIHdpZHRoOiB2YXIoLS1zbGlkZXItdGh1bWItc2l6ZSk7XHJcbiAgaGVpZ2h0OiB2YXIoLS1zbGlkZXItdGh1bWItc2l6ZSk7XHJcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcclxuICBib3JkZXI6IHNvbGlkIDFweCB2YXIoLS1zbGlkZXItYm9yZGVyLWNvbG9yKTtcclxuICBib3JkZXItcmFkaXVzOiAyZW07XHJcbiAgYmFja2dyb3VuZDogI2RkZDtcclxuICBjdXJzb3I6IHBvaW50ZXI7XHJcbn1cclxuXHJcbmlucHV0W3R5cGU9J3JhbmdlJ106Oi1tb3otcmFuZ2UtdGh1bWIge1xyXG4gIHdpZHRoOiB2YXIoLS1zbGlkZXItdGh1bWItc2l6ZSk7XHJcbiAgaGVpZ2h0OiB2YXIoLS1zbGlkZXItdGh1bWItc2l6ZSk7XHJcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcclxuICBib3JkZXI6IHNvbGlkIDFweCB2YXIoLS1zbGlkZXItYm9yZGVyLWNvbG9yKTtcclxuICBib3JkZXItcmFkaXVzOiAyZW07XHJcbiAgYmFja2dyb3VuZDogI2RkZDtcclxuICBjdXJzb3I6IHBvaW50ZXI7XHJcbn1cclxuXHJcbmlucHV0W3R5cGU9J3JhbmdlJ106Oi1tcy10aHVtYiB7XHJcbiAgbWFyZ2luLXRvcDogMDtcclxuICB3aWR0aDogdmFyKC0tc2xpZGVyLXRodW1iLXNpemUpO1xyXG4gIGhlaWdodDogdmFyKC0tc2xpZGVyLXRodW1iLXNpemUpO1xyXG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XHJcbiAgYm9yZGVyOiBzb2xpZCAxcHggIHZhcigtLXNsaWRlci1ib3JkZXItY29sb3IpO1xyXG4gIGJvcmRlci1yYWRpdXM6IDJlbTtcclxuICBiYWNrZ3JvdW5kOiAjZGRkO1xyXG4gIGN1cnNvcjogcG9pbnRlcjtcclxufVxyXG5cclxuaW5wdXRbdHlwZT0ncmFuZ2UnXTo6LW1zLXRvb2x0aXAge1xyXG4gIGRpc3BsYXk6IG5vbmU7XHJcbn1cclxuXHJcbi50YWIge1xyXG4gIHBhZGRpbmcgOiA1cHg7XHJcbiAgdXNlci1zZWxlY3Q6IG5vbmU7XHJcbn1cclxuXHJcbi50YWIge1xyXG4gIHBhZGRpbmcgOiAwcHg7XHJcbiAgYm9yZGVyOiBzb2xpZCAxcHggIzU1NTtcclxuICBib3JkZXItcmFkaXVzOiAwLjNlbTtcclxuICBvdmVyZmxvdzogaGlkZGVuO1xyXG5cclxuICBkaXNwbGF5OiBmbGV4O1xyXG4gIGZsZXgtZmxvdzogIHJvdyBub3dyYXA7XHJcbiAganVzdGlmeS1jb250ZW50OiBzcGFjZS1hcm91bmQ7XHJcbiAgYWxpZ24taXRlbXM6IHN0cmV0Y2g7XHJcblxyXG4gIHRleHQtYWxpZ246IGNlbnRlcjtcclxuXHJcbiAgbWFyZ2luOiAwcHg7IFxyXG4gIG1heC13aWR0aDogNTAwcHg7XHJcblxyXG4gIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMjQwLDIxOCwxODksIDAuOSk7XHJcbn1cclxuXHJcbi50YWIgbGFiZWwge1xyXG4gIGRpc3BsYXk6IGlubGluZS1ibG9jaztcclxuICBmbGV4OiAxIDAgYXV0bztcclxuICBmbGV4LWdyb3c6IDE7XHJcbn1cclxuXHJcbi50YWIgbGFiZWw6aG92ZXIge1xyXG4gIGJhY2tncm91bmQtY29sb3I6ICM4ODg7XHJcbiAgY29sb3I6ICNlZWU7XHJcbiAgYm9yZGVyLWNvbG9yOiAjNTU1O1xyXG59XHJcblxyXG4udGFiIGxhYmVsOmNoZWNrZWQge1xyXG4gIGJhY2tncm91bmQ6ICM1NTU7XHJcbiAgY29sb3I6ICNDQ0M7XHJcbn1cclxuXHJcbi50YWIgaW5wdXRbdHlwZT1cInJhZGlvXCJdIHtcclxuICBkaXNwbGF5OiBub25lO1xyXG59XHJcblxyXG4udGFiIGlucHV0W3R5cGU9XCJyYWRpb1wiXSArIGRpdiB7XHJcbiAgdmVydGljYWwtYWxpZ246IG1pZGRsZTtcclxuICBvdXRsaW5lOiAwO1xyXG4gIGZvbnQtc2l6ZTogMC42ZW07XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogdHJhbnNwYXJlbnQ7XHJcbiAgY29sb3I6ICM0NDQ7IFxyXG4gIFxyXG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XHJcblxyXG4gIG1hcmdpbjogMHB4OyBcclxuICBwYWRkaW5nOiAycHggOHB4O1xyXG5cclxuICBjdXJzb3I6IHBvaW50ZXI7XHJcbn1cclxuXHJcbi50YWIgaW5wdXRbdHlwZT1cInJhZGlvXCJdICsgZGl2OmhvdmVyIHtcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiAjODg4O1xyXG4gIGNvbG9yOiAjZWVlO1xyXG4gIGJvcmRlci1jb2xvcjogIzU1NTtcclxufVxyXG5cclxuLnRhYiBpbnB1dFt0eXBlPVwicmFkaW9cIl06Y2hlY2tlZCArIGRpdiB7XHJcbiAgYmFja2dyb3VuZDogIzU1NTtcclxuICBjb2xvcjogI0NDQztcclxufVxyXG5cclxuLmlzLXN0aWNreS10b3Age1xyXG4gIHBvc2l0aW9uOiBzdGlja3k7XHJcbiAgdG9wIDogMDtcclxufVxyXG5cclxuLnRhYi1zZXR0aW5nIHtcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudDtcclxuICBjb2xvcjogIzQ0NDsgXHJcbiAgYm9yZGVyOiBzb2xpZCAxcHggIzU1NTtcclxuICBwYWRkaW5nOiAycHggOHB4O1xyXG4gIGJvcmRlci1yYWRpdXM6IDVweDtcclxuICBjdXJzb3I6IHBvaW50ZXI7XHJcbn1cclxuXHJcbi50YWItc2V0dGluZzpob3ZlciB7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogIzg4ODtcclxuICBjb2xvcjogI2VlZTtcclxuICBib3JkZXI6IHNvbGlkIDFweCAjNTU1O1xyXG59XHJcblxyXG4uc21hbGwtZm9udCB7XHJcbiAgZm9udC1zaXplOiAxMnB4O1xyXG4gIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7XHJcbn1cclxuXHJcbi5tYXRlcmlhbC1pY29ucyB7XHJcbiAgdmVydGljYWwtYWxpZ246IG1pZGRsZTtcclxuICBmb250LXNpemU6IDEuMHJlbTtcclxufVxyXG5cclxuLnRhYmxlLWNlbGwge1xyXG4gIGRpc3BsYXk6IHRhYmxlLWNlbGw7XHJcbn1cclxuXHJcbi5pbWFnZS1ib3gge1xyXG4gIHBhZGRpbmc6IDBweDtcclxuICB3aWR0aDogMzJweDtcclxuICBoZWlnaHQ6IDMycHg7XHJcbiAgZGlzcGxheTogdGFibGUtY2VsbDtcclxuICB2ZXJ0aWNhbC1hbGlnbjogdG9wO1xyXG59XHJcblxyXG4uaW1hZ2UtYm94IGltZ3tcclxuICB3aWR0aDogMTAwJTtcclxuICBoZWlnaHQ6IDEwMCU7XHJcbiAgdmVydGljYWwtYWxpZ246IGJvdHRvbTtcclxuICBvYmplY3QtZml0OiBjb3ZlcjtcclxuICBvYmplY3QtcG9zaXRpb246IDUwJSAwJTtcclxufVxyXG5cclxuLmludmVudG9yeS1vYmplY3Qge1xyXG4gIGZvbnQtc2l6ZTogMTRweDtcclxuICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XHJcbiAgdmVydGljYWwtYWxpZ246IHRleHQtdG9wO1xyXG59XHJcblxyXG4ub2JqZWN0LW5hbWUge1xyXG4gIGZvbnQtc2l6ZTogMC44ZW07XHJcbiAgZm9udC13ZWlnaHQ6IGJvbGQ7XHJcbiAgcGFkZGluZzogMCAwLjI1ZW07XHJcbn1cclxuXHJcbi5vYmplY3QtdGFncy1ib3gge1xyXG4gIGRpc3BsYXk6IHRhYmxlO1xyXG4gIHRhYmxlLWxheW91dDogZml4ZWQ7XHJcbn1cclxuXHJcbi5vYmplY3QtdGFnIHtcclxuICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XHJcbiAgcGFkZGluZzogMCAwLjI1ZW07XHJcbiAgdmVydGljYWwtYWxpZ246IG1pZGRsZTtcclxufVxyXG5cclxuLnJlc291cmNlLXRhZyB7XHJcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xyXG4gIHZlcnRpY2FsLWFsaWduOiBib3R0b207XHJcbiAgb3ZlcmZsb3c6IGhpZGRlbjtcclxuICB3aGl0ZS1zcGFjZTogbm93cmFwO1xyXG59XHJcblxyXG4ucmVzb3VyY2UtdmFsdWUge1xyXG4gIGZvbnQtd2VpZ2h0OiBib2xkO1xyXG4gIHdpZHRoOiA0ZW07XHJcbiAgdGV4dC1hbGlnbjogcmlnaHQ7XHJcbiAgZm9udC1mYW1pbHk6IGluaGVyaXQ7XHJcbn1cclxuXHJcbi50YWctbmFtZSB7XHJcbiAgZm9udC1zaXplOiAwLjhlbTtcclxuICB0ZXh0LWFsaWduOiBsZWZ0O1xyXG4gIHZlcnRpY2FsLWFsaWduOiBib3R0b207XHJcbiAgbWluLXdpZHRoOjFlbTtcclxuICBtYXgtd2lkdGg6IDEyZW07XHJcbiAgb3ZlcmZsb3c6IGhpZGRlbjtcclxuICB3aGl0ZS1zcGFjZTogbm93cmFwO1xyXG59XHJcblxyXG4udGFnLXZhbHVlLWJveHtcclxuICBkaXNwbGF5OiB0YWJsZS1jZWxsO1xyXG4gIHdpZHRoOiAxMHB4O1xyXG59XHJcblxyXG4udGFnLXZhbHVlIHtcclxuICBmb250LXNpemU6IDEuMGVtO1xyXG4gIGZvbnQtd2VpZ2h0OiBib2xkO1xyXG4gIHdpZHRoOiAxMDAlO1xyXG4gIG1pbi13aWR0aDogMWVtO1xyXG4gIG1heC13aWR0aDogMTJlbTtcclxuICB0ZXh0LWFsaWduOiBjZW50ZXI7XHJcbiAgZm9udC1mYW1pbHk6IGluaGVyaXQ7XHJcbn0iXX0= */"], changeDetection: 0 });
    return GameObjectInventoryComponent;
}());

/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵsetClassMetadata"](GameObjectInventoryComponent, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_1__["Component"],
        args: [{
                selector: 'game-object-inventory',
                templateUrl: './game-object-inventory.component.html',
                styleUrls: ['./game-object-inventory.component.css'],
                changeDetection: _angular_core__WEBPACK_IMPORTED_MODULE_1__["ChangeDetectionStrategy"].OnPush
            }]
    }], function () { return [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_1__["ChangeDetectorRef"] }, { type: service_panel_service__WEBPACK_IMPORTED_MODULE_11__["PanelService"] }, { type: service_game_object_inventory_service__WEBPACK_IMPORTED_MODULE_12__["GameObjectInventoryService"] }, { type: service_context_menu_service__WEBPACK_IMPORTED_MODULE_9__["ContextMenuService"] }, { type: service_pointer_device_service__WEBPACK_IMPORTED_MODULE_13__["PointerDeviceService"] }]; }, null); })();


/***/ }),

/***/ "RDF6":
/*!*************************************!*\
  !*** ./src/app/class/game-table.ts ***!
  \*************************************/
/*! exports provided: GridType, FilterType, GameTable */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GridType", function() { return GridType; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FilterType", function() { return FilterType; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GameTable", function() { return GameTable; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "mrSG");
/* harmony import */ var _core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./core/synchronize-object/decorator */ "1lIu");
/* harmony import */ var _core_synchronize_object_object_node__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./core/synchronize-object/object-node */ "F67Z");
/* harmony import */ var _core_system__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./core/system */ "yNnI");
/* harmony import */ var _game_table_mask__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./game-table-mask */ "AyjR");
/* harmony import */ var _terrain__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./terrain */ "gKYc");






var GridType;
(function (GridType) {
    GridType[GridType["NONE"] = -1] = "NONE";
    GridType[GridType["SQUARE"] = 0] = "SQUARE";
    GridType[GridType["HEX_VERTICAL"] = 1] = "HEX_VERTICAL";
    GridType[GridType["HEX_HORIZONTAL"] = 2] = "HEX_HORIZONTAL";
})(GridType || (GridType = {}));
var FilterType;
(function (FilterType) {
    FilterType["NONE"] = "";
    FilterType["WHITE"] = "white";
    FilterType["BLACK"] = "black";
})(FilterType || (FilterType = {}));
var GameTable = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"])(GameTable, _super);
    function GameTable() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.name = '桌面';
        _this.width = 20;
        _this.height = 20;
        _this.gridSize = 50;
        _this.imageIdentifier = 'imageIdentifier';
        _this.backgroundImageIdentifier = 'imageIdentifier';
        _this.backgroundFilterType = FilterType.NONE;
        _this.selected = false;
        _this.gridType = GridType.SQUARE;
        _this.gridColor = '#000000e6';
        return _this;
    }
    Object.defineProperty(GameTable.prototype, "terrains", {
        get: function () {
            var terrains = [];
            this.children.forEach(function (object) {
                if (object instanceof _terrain__WEBPACK_IMPORTED_MODULE_5__["Terrain"])
                    terrains.push(object);
            });
            return terrains;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(GameTable.prototype, "masks", {
        get: function () {
            var masks = [];
            this.children.forEach(function (object) {
                if (object instanceof _game_table_mask__WEBPACK_IMPORTED_MODULE_4__["GameTableMask"])
                    masks.push(object);
            });
            return masks;
        },
        enumerable: false,
        configurable: true
    });
    // GameObject Lifecycle
    GameTable.prototype.onStoreAdded = function () {
        _super.prototype.onStoreAdded.call(this);
        if (this.selected)
            _core_system__WEBPACK_IMPORTED_MODULE_3__["EventSystem"].trigger('SELECT_GAME_TABLE', { identifier: this.identifier });
    };
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_1__["SyncVar"])()
    ], GameTable.prototype, "name", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_1__["SyncVar"])()
    ], GameTable.prototype, "width", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_1__["SyncVar"])()
    ], GameTable.prototype, "height", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_1__["SyncVar"])()
    ], GameTable.prototype, "gridSize", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_1__["SyncVar"])()
    ], GameTable.prototype, "imageIdentifier", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_1__["SyncVar"])()
    ], GameTable.prototype, "backgroundImageIdentifier", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_1__["SyncVar"])()
    ], GameTable.prototype, "backgroundFilterType", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_1__["SyncVar"])()
    ], GameTable.prototype, "selected", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_1__["SyncVar"])()
    ], GameTable.prototype, "gridType", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_1__["SyncVar"])()
    ], GameTable.prototype, "gridColor", void 0);
    GameTable = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_1__["SyncObject"])('game-table')
    ], GameTable);
    return GameTable;
}(_core_synchronize_object_object_node__WEBPACK_IMPORTED_MODULE_2__["ObjectNode"]));



/***/ }),

/***/ "Sdfd":
/*!*********************************************!*\
  !*** ./src/app/service/tabletop.service.ts ***!
  \*********************************************/
/*! exports provided: TabletopService */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TabletopService", function() { return TabletopService; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "mrSG");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "fXoL");
/* harmony import */ var _udonarium_card__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @udonarium/card */ "jiu3");
/* harmony import */ var _udonarium_card_stack__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @udonarium/card-stack */ "23G+");
/* harmony import */ var _udonarium_chat_tab__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @udonarium/chat-tab */ "Sqpr");
/* harmony import */ var _udonarium_chat_tab_list__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @udonarium/chat-tab-list */ "YZvQ");
/* harmony import */ var _udonarium_core_synchronize_object_object_serializer__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @udonarium/core/synchronize-object/object-serializer */ "MDT1");
/* harmony import */ var _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @udonarium/core/synchronize-object/object-store */ "hm7o");
/* harmony import */ var _udonarium_core_system__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @udonarium/core/system */ "yNnI");
/* harmony import */ var _udonarium_dice_symbol__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @udonarium/dice-symbol */ "l22b");
/* harmony import */ var _udonarium_game_character__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @udonarium/game-character */ "M/aK");
/* harmony import */ var _udonarium_game_table__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @udonarium/game-table */ "RDF6");
/* harmony import */ var _udonarium_game_table_mask__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @udonarium/game-table-mask */ "AyjR");
/* harmony import */ var _udonarium_peer_cursor__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @udonarium/peer-cursor */ "+UEV");
/* harmony import */ var _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @udonarium/sound-effect */ "veT5");
/* harmony import */ var _udonarium_tabletop_object__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @udonarium/tabletop-object */ "e8gA");
/* harmony import */ var _udonarium_terrain__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @udonarium/terrain */ "gKYc");
/* harmony import */ var _udonarium_text_note__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @udonarium/text-note */ "WeD8");
/* harmony import */ var _coordinate_service__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./coordinate.service */ "TzEH");




















var TabletopService = /** @class */ (function () {
    function TabletopService(coordinateService) {
        var _this = this;
        this.coordinateService = coordinateService;
        this._emptyTable = new _udonarium_game_table__WEBPACK_IMPORTED_MODULE_11__["GameTable"]('');
        this.locationMap = new Map();
        this.parentMap = new Map();
        this.characterCache = new TabletopCache(function () { return _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_7__["ObjectStore"].instance.getObjects(_udonarium_game_character__WEBPACK_IMPORTED_MODULE_10__["GameCharacter"]).filter(function (obj) { return obj.isVisibleOnTable; }); });
        this.cardCache = new TabletopCache(function () { return _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_7__["ObjectStore"].instance.getObjects(_udonarium_card__WEBPACK_IMPORTED_MODULE_2__["Card"]).filter(function (obj) { return obj.isVisibleOnTable; }); });
        this.cardStackCache = new TabletopCache(function () { return _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_7__["ObjectStore"].instance.getObjects(_udonarium_card_stack__WEBPACK_IMPORTED_MODULE_3__["CardStack"]).filter(function (obj) { return obj.isVisibleOnTable; }); });
        this.tableMaskCache = new TabletopCache(function () {
            var viewTable = _this.tableSelecter.viewTable;
            return viewTable ? viewTable.masks : [];
        });
        this.terrainCache = new TabletopCache(function () {
            var viewTable = _this.tableSelecter.viewTable;
            return viewTable ? viewTable.terrains : [];
        });
        this.textNoteCache = new TabletopCache(function () { return _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_7__["ObjectStore"].instance.getObjects(_udonarium_text_note__WEBPACK_IMPORTED_MODULE_17__["TextNote"]); });
        this.diceSymbolCache = new TabletopCache(function () { return _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_7__["ObjectStore"].instance.getObjects(_udonarium_dice_symbol__WEBPACK_IMPORTED_MODULE_9__["DiceSymbol"]); });
        console.log('円柱 constructor時');
        this.initialize();
    }
    Object.defineProperty(TabletopService.prototype, "tableSelecter", {
        get: function () { return _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_7__["ObjectStore"].instance.get('tableSelecter'); },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(TabletopService.prototype, "currentTable", {
        get: function () {
            var table = this.tableSelecter.viewTable;
            return table ? table : this._emptyTable;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(TabletopService.prototype, "characters", {
        get: function () { return this.characterCache.objects; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(TabletopService.prototype, "cards", {
        get: function () { return this.cardCache.objects; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(TabletopService.prototype, "cardStacks", {
        get: function () { return this.cardStackCache.objects; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(TabletopService.prototype, "tableMasks", {
        get: function () { return this.tableMaskCache.objects; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(TabletopService.prototype, "terrains", {
        get: function () { return this.terrainCache.objects; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(TabletopService.prototype, "textNotes", {
        get: function () { return this.textNoteCache.objects; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(TabletopService.prototype, "diceSymbols", {
        get: function () { return this.diceSymbolCache.objects; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(TabletopService.prototype, "peerCursors", {
        get: function () { return _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_7__["ObjectStore"].instance.getObjects(_udonarium_peer_cursor__WEBPACK_IMPORTED_MODULE_13__["PeerCursor"]); },
        enumerable: false,
        configurable: true
    });
    TabletopService.prototype.initialize = function () {
        var _this = this;
        this.refreshCacheAll();
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_8__["EventSystem"].register(this)
            .on('UPDATE_GAME_OBJECT', -1000, function (event) {
            console.log('UPDATE_GAME_OBJECT' + event);
            if (event.data.identifier === _this.currentTable.identifier || event.data.identifier === _this.tableSelecter.identifier) {
                _this.refreshCache(_udonarium_game_table_mask__WEBPACK_IMPORTED_MODULE_12__["GameTableMask"].aliasName);
                _this.refreshCache(_udonarium_terrain__WEBPACK_IMPORTED_MODULE_16__["Terrain"].aliasName);
                return;
            }
            var object = _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_7__["ObjectStore"].instance.get(event.data.identifier);
            if (!object || !(object instanceof _udonarium_tabletop_object__WEBPACK_IMPORTED_MODULE_15__["TabletopObject"])) {
                _this.refreshCache(event.data.aliasName);
            }
            else if (_this.shouldRefreshCache(object)) {
                _this.refreshCache(event.data.aliasName);
                _this.updateMap(object);
            }
        })
            .on('DELETE_GAME_OBJECT', -1000, function (event) {
            var garbage = _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_7__["ObjectStore"].instance.get(event.data.identifier);
            console.log('DELETE_GAME_OBJECT');
            if (garbage == null || garbage.aliasName.length < 1) {
                _this.refreshCacheAll();
            }
            else {
                _this.refreshCache(garbage.aliasName);
            }
        })
            .on('XML_LOADED', function (event) {
            var e_1, _a;
            var xmlElement = event.data.xmlElement;
            // todo:立体地形の上にドロップした時の挙動
            console.log('parseXml todo:立体地形の上にドロップした時の挙動');
            var gameObject = _udonarium_core_synchronize_object_object_serializer__WEBPACK_IMPORTED_MODULE_6__["ObjectSerializer"].instance.parseXml(xmlElement);
            if (gameObject instanceof _udonarium_tabletop_object__WEBPACK_IMPORTED_MODULE_15__["TabletopObject"]) {
                console.log('TabletopObject 追加');
                var pointer = _this.coordinateService.calcTabletopLocalCoordinate();
                gameObject.location.x = pointer.x - 25;
                gameObject.location.y = pointer.y - 25;
                gameObject.posZ = pointer.z;
                _this.placeToTabletop(gameObject);
                _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_14__["SoundEffect"].play(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_14__["PresetSound"].piecePut);
            }
            else if (gameObject instanceof _udonarium_chat_tab__WEBPACK_IMPORTED_MODULE_4__["ChatTab"]) {
                _udonarium_chat_tab_list__WEBPACK_IMPORTED_MODULE_5__["ChatTabList"].instance.addChatTab(gameObject);
            }
            //通常版データが投下されたときに、追加が必要な要素を追加
            var objects = _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_7__["ObjectStore"].instance.getObjects(_udonarium_game_character__WEBPACK_IMPORTED_MODULE_10__["GameCharacter"]);
            try {
                for (var objects_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(objects), objects_1_1 = objects_1.next(); !objects_1_1.done; objects_1_1 = objects_1.next()) {
                    var gameObject_1 = objects_1_1.value;
                    if (gameObject_1 instanceof _udonarium_game_character__WEBPACK_IMPORTED_MODULE_10__["GameCharacter"]) {
                        console.log('GameCharacter Load 追加データ確認');
                        var gameCharacter = gameObject_1;
                        gameCharacter.addExtendData();
                    }
                }
            }
            catch (e_1_1) { e_1 = { error: e_1_1 }; }
            finally {
                try {
                    if (objects_1_1 && !objects_1_1.done && (_a = objects_1.return)) _a.call(objects_1);
                }
                finally { if (e_1) throw e_1.error; }
            }
        });
    };
    TabletopService.prototype.findCache = function (aliasName) {
        switch (aliasName) {
            case _udonarium_game_character__WEBPACK_IMPORTED_MODULE_10__["GameCharacter"].aliasName:
                return this.characterCache;
            case _udonarium_card__WEBPACK_IMPORTED_MODULE_2__["Card"].aliasName:
                return this.cardCache;
            case _udonarium_card_stack__WEBPACK_IMPORTED_MODULE_3__["CardStack"].aliasName:
                return this.cardStackCache;
            case _udonarium_game_table_mask__WEBPACK_IMPORTED_MODULE_12__["GameTableMask"].aliasName:
                return this.tableMaskCache;
            case _udonarium_terrain__WEBPACK_IMPORTED_MODULE_16__["Terrain"].aliasName:
                return this.terrainCache;
            case _udonarium_text_note__WEBPACK_IMPORTED_MODULE_17__["TextNote"].aliasName:
                return this.textNoteCache;
            case _udonarium_dice_symbol__WEBPACK_IMPORTED_MODULE_9__["DiceSymbol"].aliasName:
                return this.diceSymbolCache;
            default:
                return null;
        }
    };
    TabletopService.prototype.refreshCache = function (aliasName) {
        var cache = this.findCache(aliasName);
        if (cache)
            cache.refresh();
    };
    TabletopService.prototype.refreshCacheAll = function () {
        this.characterCache.refresh();
        this.cardCache.refresh();
        this.cardStackCache.refresh();
        this.tableMaskCache.refresh();
        this.terrainCache.refresh();
        this.textNoteCache.refresh();
        this.diceSymbolCache.refresh();
        this.clearMap();
    };
    TabletopService.prototype.shouldRefreshCache = function (object) {
        return this.locationMap.get(object.identifier) !== object.location.name || this.parentMap.get(object.identifier) !== object.parentId;
    };
    TabletopService.prototype.updateMap = function (object) {
        this.locationMap.set(object.identifier, object.location.name);
        this.parentMap.set(object.identifier, object.parentId);
    };
    TabletopService.prototype.clearMap = function () {
        this.locationMap.clear();
        this.parentMap.clear();
    };
    TabletopService.prototype.placeToTabletop = function (gameObject) {
        switch (gameObject.aliasName) {
            case _udonarium_game_table_mask__WEBPACK_IMPORTED_MODULE_12__["GameTableMask"].aliasName:
                if (gameObject instanceof _udonarium_game_table_mask__WEBPACK_IMPORTED_MODULE_12__["GameTableMask"])
                    gameObject.isLock = false;
            case _udonarium_terrain__WEBPACK_IMPORTED_MODULE_16__["Terrain"].aliasName:
                if (gameObject instanceof _udonarium_terrain__WEBPACK_IMPORTED_MODULE_16__["Terrain"])
                    gameObject.isLocked = false;
                if (!this.tableSelecter || !this.tableSelecter.viewTable)
                    return;
                this.tableSelecter.viewTable.appendChild(gameObject);
                break;
            default:
                gameObject.setLocation('table');
                break;
        }
    };
    TabletopService.ɵfac = function TabletopService_Factory(t) { return new (t || TabletopService)(_angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵinject"](_coordinate_service__WEBPACK_IMPORTED_MODULE_18__["CoordinateService"])); };
    TabletopService.ɵprov = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdefineInjectable"]({ token: TabletopService, factory: TabletopService.ɵfac });
    return TabletopService;
}());

/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵsetClassMetadata"](TabletopService, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_1__["Injectable"]
    }], function () { return [{ type: _coordinate_service__WEBPACK_IMPORTED_MODULE_18__["CoordinateService"] }]; }, null); })();
var TabletopCache = /** @class */ (function () {
    function TabletopCache(refreshCollector) {
        this.refreshCollector = refreshCollector;
        this.needsRefresh = true;
        this._objects = [];
    }
    Object.defineProperty(TabletopCache.prototype, "objects", {
        get: function () {
            if (this.needsRefresh) {
                this._objects = this.refreshCollector();
                this._objects = this._objects ? this._objects : [];
                this.needsRefresh = false;
            }
            return this._objects;
        },
        enumerable: false,
        configurable: true
    });
    TabletopCache.prototype.refresh = function () {
        this.needsRefresh = true;
    };
    return TabletopCache;
}());


/***/ }),

/***/ "Sqpr":
/*!***********************************!*\
  !*** ./src/app/class/chat-tab.ts ***!
  \***********************************/
/*! exports provided: ChatTab */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ChatTab", function() { return ChatTab; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "mrSG");
/* harmony import */ var _chat_message__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./chat-message */ "edKV");
/* harmony import */ var _core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./core/synchronize-object/decorator */ "1lIu");
/* harmony import */ var _core_synchronize_object_object_node__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./core/synchronize-object/object-node */ "F67Z");
/* harmony import */ var _core_synchronize_object_object_serializer__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./core/synchronize-object/object-serializer */ "MDT1");
/* harmony import */ var _core_system__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./core/system */ "yNnI");
/* harmony import */ var _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @udonarium/core/synchronize-object/object-store */ "hm7o");








var ChatTab = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"])(ChatTab, _super);
    function ChatTab() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.name = 'タブ';
        _this.pos_num = -1;
        _this.imageIdentifier = ['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l'];
        _this.imageCharactorName = ['#0', '#1', '#2', '#3', '#4', '#5', '#6', '#7', '#8', '#9', '#10', '#11'];
        _this.imageIdentifierZpos = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11];
        _this.count = 0;
        _this.imageIdentifierDummy = 'test'; //通信開始ために使わなくても書かなきゃだめっぽい後日見直し
        //  imageDispFlag: boolean[] = [false,false,false,false,false,false,false,false,false,false,false,false];
        _this.imageDispFlag = [true, true, true, true, true, true, true, true, true, true, true, true];
        _this.chatSimpleDispFlag = 0;
        _this.tachieDispFlag = 1;
        _this._dispCharctorIcon = true;
        _this._unreadLength = 0;
        return _this;
    }
    Object.defineProperty(ChatTab.prototype, "cutInLauncher", {
        get: function () { return _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_6__["ObjectStore"].instance.get('CutInLauncher'); },
        enumerable: false,
        configurable: true
    });
    ChatTab.prototype.tachieReset = function () {
        this.imageIdentifier = ['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l'];
        this.imageCharactorName = ['#0', '#1', '#2', '#3', '#4', '#5', '#6', '#7', '#8', '#9', '#10', '#11'];
        this.imageIdentifierZpos = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11];
        this.imageIdentifierDummy = 'test';
    };
    Object.defineProperty(ChatTab.prototype, "chatMessages", {
        get: function () { return this.children; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ChatTab.prototype, "imageZposList", {
        get: function () {
            var ret = this.imageIdentifierZpos.slice();
            return ret;
        },
        enumerable: false,
        configurable: true
    });
    ChatTab.prototype.getImageCharactorPos = function (name) {
        for (var i = 0; i < this.imageCharactorName.length; i++) {
            if (name == this.imageCharactorName[i]) {
                return i;
            }
        }
        return -1;
    };
    ChatTab.prototype.tachiePosHide = function (pos) {
        this.imageDispFlag[pos] = false;
        console.log(this.imageDispFlag);
    };
    ChatTab.prototype.tachiePosIsDisp = function (pos) {
        return this.imageDispFlag[pos];
    };
    ChatTab.prototype.tachieZindex = function (toppos) {
        var index = this.imageIdentifierZpos.indexOf(Number(toppos));
        return index;
    };
    ChatTab.prototype.replaceTachieZindex = function (toppos) {
        var index = this.imageIdentifierZpos.indexOf(Number(toppos));
        if (index >= 0) {
            this.imageIdentifierZpos.splice(index, 1);
            this.imageIdentifierZpos.push(Number(toppos));
            console.log('imageIdentifierZpos = ' + this.imageIdentifierZpos);
        }
    };
    Object.defineProperty(ChatTab.prototype, "dispCharctorIcon", {
        get: function () { return this._dispCharctorIcon; },
        set: function (flag) { this._dispCharctorIcon = flag; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ChatTab.prototype, "unreadLength", {
        get: function () { return this._unreadLength; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ChatTab.prototype, "hasUnread", {
        get: function () { return 0 < this.unreadLength; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ChatTab.prototype, "latestTimeStamp", {
        get: function () {
            var lastIndex = this.chatMessages.length - 1;
            return lastIndex < 0 ? 0 : this.chatMessages[lastIndex].timestamp;
        },
        enumerable: false,
        configurable: true
    });
    // ObjectNode Lifecycle
    ChatTab.prototype.onChildAdded = function (child) {
        _super.prototype.onChildAdded.call(this, child);
        if (child.parent === this && child instanceof _chat_message__WEBPACK_IMPORTED_MODULE_1__["ChatMessage"] && child.isDisplayable) {
            if (this.children.length == 1) { //ログデリート時
                this._unreadLength = 1;
            }
            else {
                this._unreadLength++;
            }
            if (child.to != null && child.to !== '') {
                // 秘話時に立ち絵の更新をかけない(処理なし)
            }
            else {
                //マウスクリック非表示を復帰する
                this.imageDispFlag[child.imagePos] = true;
                //        console.log("立ち絵テスト3 this.imageDispFlag[child.imagePos]" + child.imagePos + " / "+this.imageDispFlag[child.imagePos] + ":");
            }
            _core_system__WEBPACK_IMPORTED_MODULE_5__["EventSystem"].trigger('MESSAGE_ADDED', { tabIdentifier: this.identifier, messageIdentifier: child.identifier });
        }
    };
    ChatTab.prototype.addMessage = function (message) {
        message.tabIdentifier = this.identifier;
        var chat = new _chat_message__WEBPACK_IMPORTED_MODULE_1__["ChatMessage"]();
        for (var key in message) {
            console.log('addMessage:' + key);
            if (key === 'identifier')
                continue;
            if (key === 'tabIdentifier')
                continue;
            if (key === 'text') {
                chat.value = message[key];
                continue;
            }
            if (message[key] == null || message[key] === '')
                continue;
            if (key === 'imagePos') {
                if (message['to'] != null && message['to'] !== '') {
                    continue;
                } // 秘話時に立ち絵の更新をかけない
                this.pos_num = message[key];
                if (0 <= this.pos_num && this.pos_num < this.imageIdentifier.length) {
                    var oldpos = this.getImageCharactorPos(message['name']);
                    if (oldpos >= 0) { //同名キャラの古い位置を消去
                        this.imageIdentifier[oldpos] = '';
                        this.imageCharactorName[oldpos] = '';
                        this.imageDispFlag[oldpos] = false;
                    }
                    //非表示コマンド\s
                    if (message['imageIdentifier'] == '') {
                        //事前に古い立ち絵は消す処理をしているため処理なし
                    }
                    else {
                        this.imageIdentifier[this.pos_num] = message['imageIdentifier'];
                        this.imageCharactorName[this.pos_num] = message['name'];
                        this.replaceTachieZindex(this.pos_num);
                        this.imageDispFlag[this.pos_num] = true;
                        chat.setAttribute(key, message[key]);
                    }
                    this.imageIdentifierDummy = message['imageIdentifier']; //同期方法が無理やり感がある、後日
                }
                continue;
            }
            chat.setAttribute(key, message[key]);
        }
        chat.initialize();
        if (0 > chat.tags.indexOf('secret')) {
            this.cutInLauncher.chatActivateCutIn(chat.text, message['to']); //カットイン末尾発動
        }
        _core_system__WEBPACK_IMPORTED_MODULE_5__["EventSystem"].trigger('SEND_MESSAGE', { tabIdentifier: this.identifier, messageIdentifier: chat.identifier });
        _core_system__WEBPACK_IMPORTED_MODULE_5__["EventSystem"].trigger('DICE_TABLE_MESSAGE', { tabIdentifier: this.identifier, messageIdentifier: chat.identifier });
        _core_system__WEBPACK_IMPORTED_MODULE_5__["EventSystem"].trigger('RESOURCE_EDIT_MESSAGE', { tabIdentifier: this.identifier, messageIdentifier: chat.identifier });
        //2021年4月実装のえいぷりるコマンド判定    
        _core_system__WEBPACK_IMPORTED_MODULE_5__["EventSystem"].trigger('APRIL_MESSAGE', { tabIdentifier: this.identifier, messageIdentifier: chat.identifier });
        this.appendChild(chat);
        return chat;
    };
    ChatTab.prototype.markForRead = function () {
        this._unreadLength = 0;
    };
    ChatTab.prototype.innerXml = function () {
        var e_1, _a;
        var xml = '';
        try {
            for (var _b = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(this.children), _c = _b.next(); !_c.done; _c = _b.next()) {
                var child = _c.value;
                if (child instanceof _chat_message__WEBPACK_IMPORTED_MODULE_1__["ChatMessage"] && !child.isDisplayable)
                    continue;
                xml += _core_synchronize_object_object_serializer__WEBPACK_IMPORTED_MODULE_4__["ObjectSerializer"].instance.toXml(child);
            }
        }
        catch (e_1_1) { e_1 = { error: e_1_1 }; }
        finally {
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            }
            finally { if (e_1) throw e_1.error; }
        }
        return xml;
    };
    ;
    //ChatMessageに入れるか考えたがログ以外に使わないのでここにおく
    ChatTab.prototype.messageHtml = function (isTime, tabName, message) {
        var str = '';
        if (message) {
            if (tabName)
                str += "[" + this.escapeHtml(tabName) + "]";
            if (isTime) {
                var date = new Date(message.timestamp);
                str += ('00' + date.getHours()).slice(-2) + ":" + ('00' + date.getMinutes()).slice(-2) + "：";
            }
            str += "<font color='";
            if (message.messColor)
                str += message.messColor.toLowerCase();
            str += "'>";
            str += "<b>";
            if (message.name)
                str += this.escapeHtml(message.name);
            str += "</b>";
            str += "：";
            if (!message.isSecret || message.isSendFromSelf) {
                if (message.text)
                    str += this.escapeHtml(message.text).replace(/\n/g, '<br>');
            }
            else {
                str += "（シークレットダイス）";
            }
            str += "</font><br>";
            str += '\n';
        }
        return str;
    };
    ChatTab.prototype.escapeHtml = function (string) {
        if (typeof string !== 'string') {
            return string;
        }
        return string.replace(/[&'`"<>]/g, function (match) {
            return {
                '&': '&amp;',
                "'": '&#x27;',
                '`': '&#x60;',
                '"': '&quot;',
                '<': '&lt;',
                '>': '&gt;',
            }[match];
        });
    };
    ChatTab.prototype.logHtml = function () {
        var e_2, _a;
        var head = "<?xml version='1.0' encoding='UTF-8'?>" + '\n' +
            "<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Transitional//EN' 'http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd'>" + '\n' +
            "<html xmlns='http://www.w3.org/1999/xhtml' lang='ja'>" + '\n' +
            "  <head>" + '\n' +
            "    <meta http-equiv='Content-Type' content='text/html; charset=UTF-8' />" + '\n' +
            "    <title>チャットログ：" + this.escapeHtml(this.name) + "</title>" + '\n' +
            "  </head>" + '\n' +
            "  <body>" + '\n';
        var last = "" + '\n' +
            "  </body>" + '\n' +
            "</html>";
        var main = "";
        try {
            for (var _b = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(this.chatMessages), _c = _b.next(); !_c.done; _c = _b.next()) {
                var mess = _c.value;
                var to = mess.to;
                var from = mess.from;
                var myId = _core_system__WEBPACK_IMPORTED_MODULE_5__["Network"].peerContext.userId; //1.13.xとのmargeで修正
                console.log("from:" + mess.from
                    + " To:" + mess.to + "myId:" + myId);
                if (to) {
                    if ((to != myId) && (from != myId)) {
                        continue;
                    }
                }
                main += this.messageHtml(true, '', mess);
            }
        }
        catch (e_2_1) { e_2 = { error: e_2_1 }; }
        finally {
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            }
            finally { if (e_2) throw e_2.error; }
        }
        var str = head + main + last;
        return str;
    };
    ChatTab.prototype.parseInnerXml = function (element) {
        return _super.prototype.parseInnerXml.call(this, element);
    };
    ;
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_2__["SyncVar"])()
    ], ChatTab.prototype, "name", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_2__["SyncVar"])()
    ], ChatTab.prototype, "pos_num", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_2__["SyncVar"])()
    ], ChatTab.prototype, "imageIdentifier", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_2__["SyncVar"])()
    ], ChatTab.prototype, "imageCharactorName", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_2__["SyncVar"])()
    ], ChatTab.prototype, "imageIdentifierZpos", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_2__["SyncVar"])()
    ], ChatTab.prototype, "count", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_2__["SyncVar"])()
    ], ChatTab.prototype, "imageIdentifierDummy", void 0);
    ChatTab = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_2__["SyncObject"])('chat-tab')
    ], ChatTab);
    return ChatTab;
}(_core_synchronize_object_object_node__WEBPACK_IMPORTED_MODULE_3__["ObjectNode"]));



/***/ }),

/***/ "SxCr":
/*!****************************************************************!*\
  !*** ./src/app/component/cut-in-list/cut-in-list.component.ts ***!
  \****************************************************************/
/*! exports provided: CutInListComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CutInListComponent", function() { return CutInListComponent; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "mrSG");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "fXoL");
/* harmony import */ var _udonarium_core_file_storage_audio_storage__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @udonarium/core/file-storage/audio-storage */ "Prh6");
/* harmony import */ var _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @udonarium/core/synchronize-object/object-store */ "hm7o");
/* harmony import */ var _udonarium_core_file_storage_image_file__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @udonarium/core/file-storage/image-file */ "FjwV");
/* harmony import */ var _udonarium_core_file_storage_image_storage__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @udonarium/core/file-storage/image-storage */ "JQpJ");
/* harmony import */ var _udonarium_core_system__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @udonarium/core/system */ "yNnI");
/* harmony import */ var _udonarium_cut_in__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @udonarium/cut-in */ "pq3H");
/* harmony import */ var component_file_selecter_file_selecter_component__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! component/file-selecter/file-selecter.component */ "FR7b");
/* harmony import */ var component_cut_in_bgm_cut_in_bgm_component__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! component/cut-in-bgm/cut-in-bgm.component */ "NnWs");
/* harmony import */ var service_pointer_device_service__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! service/pointer-device.service */ "GPP8");
/* harmony import */ var service_modal_service__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! service/modal.service */ "CE6K");
/* harmony import */ var service_save_data_service__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! service/save-data.service */ "Uvtn");
/* harmony import */ var service_panel_service__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! service/panel.service */ "M9xM");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @angular/forms */ "3Pt+");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @angular/common */ "ofXK");
/* harmony import */ var pipe_safe_pipe__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! pipe/safe.pipe */ "6HCy");


















function CutInListComponent_option_6_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "option", 7);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
} if (rf & 2) {
    var cutIn_r3 = ctx.$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpropertyInterpolate"]("value", cutIn_r3.identifier);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtextInterpolate"](cutIn_r3.name);
} }
function CutInListComponent_ng_container_8_span_24_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "span");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](1, "OK\uFF1A");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
} }
function CutInListComponent_ng_container_8_span_25_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "span");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](1, "NG\uFF1A");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
} }
function CutInListComponent_ng_container_8_ng_container_27_span_1_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "span");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](1, "\u97F3\u6A02\u6587\u4EF6\u672A\u4E0A\u50B3");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
} }
function CutInListComponent_ng_container_8_ng_container_27_span_2_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "span");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](1, "\u672A\u8A2D\u7F6E\u97F3\u6A02\u6587\u4EF6");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
} }
function CutInListComponent_ng_container_8_ng_container_27_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](1, CutInListComponent_ng_container_8_ng_container_27_span_1_Template, 2, 0, "span", 6);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](2, CutInListComponent_ng_container_8_ng_container_27_span_2_Template, 2, 0, "span", 6);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var ctx_r6 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", ctx_r6.cutInAudioName.length > 0);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", ctx_r6.cutInAudioName.length <= 0);
} }
function CutInListComponent_ng_container_8_ng_container_29_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var ctx_r7 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtextInterpolate"](ctx_r7.cutInAudioName);
} }
function CutInListComponent_ng_container_8_ng_container_75_Template(rf, ctx) { if (rf & 1) {
    var _r12 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](1, "button", 2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("click", function CutInListComponent_ng_container_8_ng_container_75_Template_button_click_1_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r12); var ctx_r11 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](2); return ctx_r11.save(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](2, "\u4FDD\u5B58");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](3, "button", 23);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("click", function CutInListComponent_ng_container_8_ng_container_75_Template_button_click_3_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r12); var ctx_r13 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](2); return ctx_r13.delete(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](4, "\u522A\u9664");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var ctx_r8 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵattribute"]("disabled", ctx_r8.getCutIns().length <= 0 ? "" : null);
} }
function CutInListComponent_ng_container_8_Template(rf, ctx) { if (rf & 1) {
    var _r15 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](1, "div", 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](2, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](3, " \u5716\u7247 ");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](4, "div", 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("click", function CutInListComponent_ng_container_8_Template_div_click_4_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r15); var ctx_r14 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](); return ctx_r14.openCutInImageModal(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelement"](5, "img", 10);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpipe"](6, "safe");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelement"](7, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](8, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](9, "\u540D\u7A31 : ");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](10, "input", 11);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("ngModelChange", function CutInListComponent_ng_container_8_Template_input_ngModelChange_10_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r15); var ctx_r16 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](); return ctx_r16.cutInName = $event; });
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](11, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](12, "\u97F3\u6A02\u6A94 : ");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](13, "button", 2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("click", function CutInListComponent_ng_container_8_Template_button_click_13_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r15); var ctx_r17 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](); return ctx_r17.openCutInBgmModal(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](14, "\u8A2D\u5B9A");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelement"](15, "br");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](16, "button", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("click", function CutInListComponent_ng_container_8_Template_button_click_16_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r15); var ctx_r18 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](); return ctx_r18.playCutIn(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](17, "Cut in\u64AD\u653E");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](18, "button", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("click", function CutInListComponent_ng_container_8_Template_button_click_18_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r15); var ctx_r19 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](); return ctx_r19.stopCutIn(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](19, "Cut in\u505C\u6B62");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](20, "button", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("click", function CutInListComponent_ng_container_8_Template_button_click_20_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r15); var ctx_r20 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](); return ctx_r20.previewCutIn(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](21, "Cut in\u9810\u89BD");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelement"](22, "br");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](23, " LINK:");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](24, CutInListComponent_ng_container_8_span_24_Template, 2, 0, "span", 6);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](25, CutInListComponent_ng_container_8_span_25_Template, 2, 0, "span", 6);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelement"](26, "br");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](27, CutInListComponent_ng_container_8_ng_container_27_Template, 3, 2, "ng-container", 6);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelement"](28, "br");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](29, CutInListComponent_ng_container_8_ng_container_29_Template, 2, 1, "ng-container", 6);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelement"](30, "br");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](31, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](32, " \u986F\u793A\u539F\u5C3A\u5BF8\uFF1A");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](33, "input", 13);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("ngModelChange", function CutInListComponent_ng_container_8_Template_input_ngModelChange_33_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r15); var ctx_r21 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](); return ctx_r21.cutInOriginalSize = $event; });
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](34, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](35, " Width :");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](36, "input", 14);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("ngModelChange", function CutInListComponent_ng_container_8_Template_input_ngModelChange_36_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r15); var ctx_r22 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](); return ctx_r22.cutInWidth = $event; });
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](37, " \u7DAD\u6301\u9577\u5BEC\u6BD4 :");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](38, "input", 15);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("ngModelChange", function CutInListComponent_ng_container_8_Template_input_ngModelChange_38_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r15); var ctx_r23 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](); return ctx_r23.keepImageAspect = $event; })("click", function CutInListComponent_ng_container_8_Template_input_click_38_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r15); var ctx_r24 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](); return ctx_r24.chkImageAspect(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](39, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](40, " Height :");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](41, "input", 14);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("ngModelChange", function CutInListComponent_ng_container_8_Template_input_ngModelChange_41_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r15); var ctx_r25 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](); return ctx_r25.cutInHeight = $event; });
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](42, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](43, "input", 16);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("ngModelChange", function CutInListComponent_ng_container_8_Template_input_ngModelChange_43_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r15); var ctx_r26 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](); return ctx_r26.cutInX_Pos = $event; });
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](44, " X\u4F4D\u7F6E :");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](45, "input", 17);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("ngModelChange", function CutInListComponent_ng_container_8_Template_input_ngModelChange_45_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r15); var ctx_r27 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](); return ctx_r27.cutInX_Pos = $event; });
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](46, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](47, "input", 16);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("ngModelChange", function CutInListComponent_ng_container_8_Template_input_ngModelChange_47_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r15); var ctx_r28 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](); return ctx_r28.cutInY_Pos = $event; });
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](48, " Y\u4F4D\u7F6E :");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](49, "input", 17);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("ngModelChange", function CutInListComponent_ng_container_8_Template_input_ngModelChange_49_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r15); var ctx_r29 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](); return ctx_r29.cutInY_Pos = $event; });
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](50, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](51, " \u5FAA\u74B0\u64AD\u653E\uFF1A");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](52, "input", 18);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("ngModelChange", function CutInListComponent_ng_container_8_Template_input_ngModelChange_52_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r15); var ctx_r30 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](); return ctx_r30.cutInIsLoop = $event; });
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](53, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](54, " \u64AD\u653E\u6642\u9593 :");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](55, "input", 19);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("ngModelChange", function CutInListComponent_ng_container_8_Template_input_ngModelChange_55_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r15); var ctx_r31 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](); return ctx_r31.cutInOutTime = $event; });
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](56, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](57, " \u6A19\u7C64\u540D\u7A31 :");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](58, "input", 20);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("ngModelChange", function CutInListComponent_ng_container_8_Template_input_ngModelChange_58_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r15); var ctx_r32 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](); return ctx_r32.cutInTagName = $event; });
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](59, " \u53F0\u8A5E\u672B\u5C3E\u767C\u52D5\uFF1A");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](60, "input", 21);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("ngModelChange", function CutInListComponent_ng_container_8_Template_input_ngModelChange_60_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r15); var ctx_r33 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](); return ctx_r33.chatActivate = $event; });
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](61, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](62, "p", 22);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](63, "\u203BCut in\u7684\u884C\u70BA");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelement"](64, "br");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](65, "\n\u5177\u6709\u76F8\u540C\u6A19\u7C64\u540D\u7A31\u7684Cut in\u5C07\u505C\u6B62\u6700\u5148\u64AD\u653E\u7684\u6A19\u7C64\uFF08\u5305\u62EC\u7A7A\u767D\u6A19\u7C64\uFF09");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelement"](66, "br");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](67, "\n\u5982\u679C\u6A19\u7C64\u540D\u7A31\u70BA\u7A7A\u4E14\u8A2D\u7F6E\u4E86\u97F3\u6A02\uFF0C\u5247\u97F3\u6A02\u64AD\u653E\u5668\u7684BGM\u5C07\u505C\u6B62\u3002");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelement"](68, "br");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](69, "\n\u6B64\u5916\uFF0C\u5728\u97F3\u6A02\u64AD\u653E\u5668\u4E2D\u64AD\u653EBGM\u6642\uFF0C\u6B64\u985ECut in\u4E5F\u6703\u505C\u6B62");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelement"](70, "br");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](71, "\n\u8ACB\u70BA\u60A8\u60F3\u8981\u8207BGM\u540C\u6642\u64AD\u653E\u7684Cut in\u8A2D\u7F6E\u6A19\u7C64\uFF0C\u4F8B\u5982\u69CD\u8072\u7684SE\u3002");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelement"](72, "br");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelement"](73, "hr");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](74, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](75, CutInListComponent_ng_container_8_ng_container_75_Template, 5, 1, "ng-container", 6);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](5);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("src", _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpipeBind2"](6, 36, ctx_r1.cutInImage.url, "resourceUrl"), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵsanitizeUrl"]);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](5);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngModel", ctx_r1.cutInName);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵattribute"]("disabled", !ctx_r1.isEditable ? "" : null);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](14);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", ctx_r1.isCutInBgmUploaded());
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", !ctx_r1.isCutInBgmUploaded());
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", !ctx_r1.isCutInBgmUploaded());
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", ctx_r1.isEditable);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngModel", ctx_r1.cutInOriginalSize);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵattribute"]("disabled", !ctx_r1.isEditable ? "" : null);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpropertyInterpolate"]("min", ctx_r1.minSize);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpropertyInterpolate"]("max", ctx_r1.maxSize);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngModel", ctx_r1.cutInWidth);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵattribute"]("disabled", !ctx_r1.isEditable || ctx_r1.cutInOriginalSize ? "" : null);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngModel", ctx_r1.keepImageAspect);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵattribute"]("disabled", !ctx_r1.isEditable || ctx_r1.cutInOriginalSize ? "" : null);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpropertyInterpolate"]("min", ctx_r1.minSize);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpropertyInterpolate"]("max", ctx_r1.maxSize);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngModel", ctx_r1.cutInHeight);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵattribute"]("disabled", !ctx_r1.isEditable || ctx_r1.cutInOriginalSize ? "" : null);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngModel", ctx_r1.cutInX_Pos);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵattribute"]("disabled", !ctx_r1.isEditable ? "" : null);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngModel", ctx_r1.cutInX_Pos);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵattribute"]("disabled", !ctx_r1.isEditable ? "" : null);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngModel", ctx_r1.cutInY_Pos);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵattribute"]("disabled", !ctx_r1.isEditable ? "" : null);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngModel", ctx_r1.cutInY_Pos);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵattribute"]("disabled", !ctx_r1.isEditable ? "" : null);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngModel", ctx_r1.cutInIsLoop);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵattribute"]("disabled", !ctx_r1.isEditable ? "" : null);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngModel", ctx_r1.cutInOutTime);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵattribute"]("disabled", !ctx_r1.isEditable ? "" : null);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngModel", ctx_r1.cutInTagName);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵattribute"]("disabled", !ctx_r1.isEditable ? "" : null);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngModel", ctx_r1.chatActivate);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵattribute"]("disabled", !ctx_r1.isEditable ? "" : null);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](15);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", !ctx_r1.isDeleted);
} }
function CutInListComponent_ng_container_9_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](1, "div", 24);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](2, "\u203B\u5C1A\u672A\u5275\u5EFACut in\u3002 \u60A8\u53EF\u4EE5\u5F9E\u201C\u5275\u5EFA\u65B0Cut in\u201D\u5275\u5EFA\u65B0\u7684Cut in\u3002");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerEnd"]();
} }
var CutInListComponent = /** @class */ (function () {
    function CutInListComponent(pointerDeviceService, //
    modalService, saveDataService, panelService, ngZone) {
        this.pointerDeviceService = pointerDeviceService;
        this.modalService = modalService;
        this.saveDataService = saveDataService;
        this.panelService = panelService;
        this.ngZone = ngZone;
        this.minSize = 10;
        this.maxSize = 1200;
        this.keepImageAspect = false;
        this.lazyUpdateTimer = null;
        this.selectedCutIn = null;
        this.isSaveing = false;
        this.progresPercent = 0;
    }
    Object.defineProperty(CutInListComponent.prototype, "cutInLauncher", {
        get: function () { return _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_3__["ObjectStore"].instance.get('CutInLauncher'); },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(CutInListComponent.prototype, "cutInName", {
        get: function () { return this.isEditable ? this.selectedCutIn.name : ''; },
        set: function (cutInName) { if (this.isEditable)
            this.selectedCutIn.name = cutInName; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(CutInListComponent.prototype, "cutInWidth", {
        get: function () {
            if (!this.isEditable)
                return 0;
            if (!this.selectedCutIn)
                return 0;
            if (this.cutInOriginalSize) {
                this.selectedCutIn.width = this.originalImgWidth();
            }
            return this.selectedCutIn.width;
        },
        set: function (cutInWidth) {
            if (this.isEditable)
                this.selectedCutIn.width = cutInWidth;
            if (this.keepImageAspect) {
                this.selectedCutIn.height = Math.floor(cutInWidth * this.originalImgHeight() / this.originalImgWidth());
                console.log(" this.keepImageAspect H" + this.selectedCutIn.height);
            }
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(CutInListComponent.prototype, "cutInHeight", {
        get: function () {
            if (!this.isEditable)
                return 0;
            if (!this.selectedCutIn)
                return 0;
            if (this.cutInOriginalSize) {
                this.selectedCutIn.height = this.originalImgHeight();
            }
            return this.selectedCutIn.height;
        },
        set: function (cutInHeight) {
            if (this.isEditable)
                this.selectedCutIn.height = cutInHeight;
            if (this.keepImageAspect) {
                this.selectedCutIn.width = Math.floor(cutInHeight * this.originalImgWidth() / this.originalImgHeight());
                console.log(" this.keepImageAspect W" + this.selectedCutIn.width);
            }
        },
        enumerable: false,
        configurable: true
    });
    CutInListComponent.prototype.chkImageAspect = function () {
        var _this = this;
        if (!this.isEditable)
            return 0;
        if (!this.selectedCutIn)
            return 0;
        setTimeout(function () {
            if (_this.keepImageAspect) {
                var imageurl = _this.selectedCutIn.cutInImage.url;
                if (imageurl.length > 0) {
                    var img = new Image();
                    img.src = imageurl;
                    console.log("img.height /  img.width " + img.height + " " + img.width);
                    _this.selectedCutIn.height = Math.floor(_this.selectedCutIn.width * img.height / img.width);
                }
            }
        });
    };
    Object.defineProperty(CutInListComponent.prototype, "cutInX_Pos", {
        get: function () { return this.isEditable ? this.selectedCutIn.x_pos : 0; },
        set: function (cutInX_Pos) { if (this.isEditable)
            this.selectedCutIn.x_pos = cutInX_Pos; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(CutInListComponent.prototype, "cutInY_Pos", {
        get: function () { return this.isEditable ? this.selectedCutIn.y_pos : 0; },
        set: function (cutInY_Pos) { if (this.isEditable)
            this.selectedCutIn.y_pos = cutInY_Pos; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(CutInListComponent.prototype, "cutInOriginalSize", {
        get: function () { return this.isEditable ? this.selectedCutIn.originalSize : false; },
        set: function (cutInOriginalSize) { if (this.isEditable)
            this.selectedCutIn.originalSize = cutInOriginalSize; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(CutInListComponent.prototype, "cutInIsLoop", {
        get: function () { return this.isEditable ? this.selectedCutIn.isLoop : false; },
        set: function (cutInIsLoop) { if (this.isEditable)
            this.selectedCutIn.isLoop = cutInIsLoop; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(CutInListComponent.prototype, "chatActivate", {
        get: function () { return this.isEditable ? this.selectedCutIn.chatActivate : false; },
        set: function (chatActivate) { if (this.isEditable)
            this.selectedCutIn.chatActivate = chatActivate; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(CutInListComponent.prototype, "cutInOutTime", {
        get: function () { return this.isEditable ? this.selectedCutIn.outTime : 0; },
        set: function (cutInOutTime) { if (this.isEditable)
            this.selectedCutIn.outTime = cutInOutTime; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(CutInListComponent.prototype, "cutInUseOutUrl", {
        get: function () { return this.isEditable ? this.selectedCutIn.useOutUrl : false; },
        set: function (cutInUseOutUrl) { if (this.isEditable)
            this.selectedCutIn.useOutUrl = cutInUseOutUrl; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(CutInListComponent.prototype, "cutInOutUrl", {
        get: function () { return this.isEditable ? this.selectedCutIn.outUrl : ''; },
        set: function (cutInOutUrl) { if (this.isEditable)
            this.selectedCutIn.outUrl = cutInOutUrl; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(CutInListComponent.prototype, "cutInTagName", {
        get: function () { return this.isEditable ? this.selectedCutIn.tagName : ''; },
        set: function (cutInTagName) { if (this.isEditable)
            this.selectedCutIn.tagName = cutInTagName; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(CutInListComponent.prototype, "cutInAudioName", {
        get: function () { return this.isEditable ? this.selectedCutIn.audioName : ''; },
        set: function (cutInAudioName) { if (this.isEditable)
            this.selectedCutIn.audioName = cutInAudioName; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(CutInListComponent.prototype, "cutInAudioIdentifier", {
        get: function () { return this.isEditable ? this.selectedCutIn.audioIdentifier : ''; },
        set: function (cutInAudioIdentifier) { if (this.isEditable)
            this.selectedCutIn.audioIdentifier = cutInAudioIdentifier; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(CutInListComponent.prototype, "audios", {
        get: function () { return _udonarium_core_file_storage_audio_storage__WEBPACK_IMPORTED_MODULE_2__["AudioStorage"].instance.audios.filter(function (audio) { return !audio.isHidden; }); },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(CutInListComponent.prototype, "jukebox", {
        get: function () { return _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_3__["ObjectStore"].instance.get('Jukebox'); },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(CutInListComponent.prototype, "cutInImage", {
        get: function () {
            if (!this.selectedCutIn)
                return _udonarium_core_file_storage_image_file__WEBPACK_IMPORTED_MODULE_4__["ImageFile"].Empty;
            var file = _udonarium_core_file_storage_image_storage__WEBPACK_IMPORTED_MODULE_5__["ImageStorage"].instance.get(this.selectedCutIn.imageIdentifier);
            return file ? file : _udonarium_core_file_storage_image_file__WEBPACK_IMPORTED_MODULE_4__["ImageFile"].Empty;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(CutInListComponent.prototype, "isSelected", {
        get: function () { return this.selectedCutIn ? true : false; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(CutInListComponent.prototype, "isEditable", {
        get: function () {
            return !this.isEmpty && this.isSelected;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(CutInListComponent.prototype, "isEmpty", {
        get: function () { return false; },
        enumerable: false,
        configurable: true
    });
    CutInListComponent.prototype.ngOnInit = function () {
        var _this = this;
        Promise.resolve().then(function () { return _this.modalService.title = _this.panelService.title = 'カットインリスト'; });
    };
    CutInListComponent.prototype.ngOnDestroy = function () {
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_6__["EventSystem"].unregister(this);
    };
    CutInListComponent.prototype.selectCutIn = function (identifier) {
        this.selectedCutIn = _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_3__["ObjectStore"].instance.get(identifier);
    };
    CutInListComponent.prototype.getCutIns = function () {
        return _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_3__["ObjectStore"].instance.getObjects(_udonarium_cut_in__WEBPACK_IMPORTED_MODULE_7__["CutIn"]);
    };
    CutInListComponent.prototype.createCutIn = function () {
        var cutIn = new _udonarium_cut_in__WEBPACK_IMPORTED_MODULE_7__["CutIn"]();
        cutIn.name = '未設定のカットイン';
        cutIn.imageIdentifier = 'testTableBackgroundImage_image';
        cutIn.initialize();
        this.selectCutIn(cutIn.identifier);
    };
    CutInListComponent.prototype.save = function () {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function () {
            var fileName;
            var _this = this;
            return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"])(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (!this.selectedCutIn)
                            return [2 /*return*/];
                        this.isSaveing = true;
                        this.progresPercent = 0;
                        this.selectedCutIn.selected = true;
                        fileName = 'cut_' + this.selectedCutIn.name;
                        return [4 /*yield*/, this.saveDataService.saveGameObjectAsync(this.selectedCutIn, fileName, function (percent) {
                                _this.progresPercent = percent;
                            })];
                    case 1:
                        _a.sent();
                        setTimeout(function () {
                            _this.isSaveing = false;
                            _this.progresPercent = 0;
                        }, 500);
                        return [2 /*return*/];
                }
            });
        });
    };
    CutInListComponent.prototype.delete = function () {
        if (!this.isEmpty && this.selectedCutIn) {
            this.selectedCutIn.destroy();
            this.selectedCutIn = null;
        }
    };
    CutInListComponent.prototype.openCutInImageModal = function () {
        var _this = this;
        if (!this.isSelected)
            return;
        this.modalService.open(component_file_selecter_file_selecter_component__WEBPACK_IMPORTED_MODULE_8__["FileSelecterComponent"]).then(function (value) {
            if (!_this.selectedCutIn || !value)
                return;
            _this.selectedCutIn.imageIdentifier = value;
        });
    };
    CutInListComponent.prototype.openCutInBgmModal = function () {
        var _this = this;
        if (!this.isSelected)
            return;
        this.modalService.open(component_cut_in_bgm_cut_in_bgm_component__WEBPACK_IMPORTED_MODULE_9__["CutInBgmComponent"]).then(function (value) {
            console.log('CUTIN ' + value);
            if (!_this.selectedCutIn || !value)
                return;
            _this.cutInAudioIdentifier = value;
            var audio = _udonarium_core_file_storage_audio_storage__WEBPACK_IMPORTED_MODULE_2__["AudioStorage"].instance.get(value);
            if (audio) {
                _this.cutInAudioName = audio.name;
                console.log('cutInAudioName' + _this.cutInAudioName);
            }
        });
    };
    CutInListComponent.prototype.isCutInBgmUploaded = function () {
        if (!this.isSelected)
            return false;
        var audio = _udonarium_core_file_storage_audio_storage__WEBPACK_IMPORTED_MODULE_2__["AudioStorage"].instance.get(this.cutInAudioIdentifier);
        return audio ? true : false;
    };
    CutInListComponent.prototype.stoppreviewCutIn = function () {
        //jukuと同じにする
    };
    CutInListComponent.prototype.originalImgWidth = function () {
        if (!this.isSelected)
            return 0;
        if (!this.selectedCutIn)
            return 0;
        if (!this.selectedCutIn.cutInImage)
            return 0;
        var imageurl = this.selectedCutIn.cutInImage.url;
        if (imageurl.length > 0) {
            var img = new Image();
            img.src = imageurl;
            return img.width;
        }
        return 0;
    };
    CutInListComponent.prototype.originalImgHeight = function () {
        if (!this.isSelected)
            return 0;
        if (!this.selectedCutIn)
            return 0;
        if (!this.selectedCutIn.cutInImage)
            return 0;
        var imageurl = this.selectedCutIn.cutInImage.url;
        if (imageurl.length > 0) {
            var img = new Image();
            img.src = imageurl;
            return img.height;
        }
        return 0;
    };
    CutInListComponent.prototype.previewCutIn = function () {
        if (this.selectedCutIn.originalSize) {
            var imageurl = this.selectedCutIn.cutInImage.url;
            if (imageurl.length > 0) {
                var img = new Image();
                img.src = imageurl;
                this.selectedCutIn.width = this.originalImgWidth();
                this.selectedCutIn.height = this.originalImgHeight();
            }
        }
        //プレビューではジューク音楽の停止をしない
        this.cutInLauncher.startCutInMySelf(this.selectedCutIn);
    };
    CutInListComponent.prototype.playCutIn = function () {
        if (this.selectedCutIn.originalSize) {
            var imageurl = this.selectedCutIn.cutInImage.url;
            if (imageurl.length > 0) {
                var img = new Image();
                img.src = imageurl;
                this.selectedCutIn.width = this.originalImgWidth();
                this.selectedCutIn.height = this.originalImgHeight();
            }
        }
        //同名タグが再生中の場合そのタグのカットインを停止してから生成
        //無タグ、かつ音楽が指定されている場合　jukebox　を停止する
        //タグ名有りの場合、音楽が設定されていない場合　jukebox　は停止しない
        if (this.isCutInBgmUploaded() && (this.cutInTagName == '')) {
            this.jukebox.stop();
        }
        this.cutInLauncher.startCutIn(this.selectedCutIn);
    };
    CutInListComponent.prototype.stopCutIn = function () {
        if (!this.isSelected)
            return;
        this.cutInLauncher.stopCutIn(this.selectedCutIn);
    };
    CutInListComponent.ɵfac = function CutInListComponent_Factory(t) { return new (t || CutInListComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdirectiveInject"](service_pointer_device_service__WEBPACK_IMPORTED_MODULE_10__["PointerDeviceService"]), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdirectiveInject"](service_modal_service__WEBPACK_IMPORTED_MODULE_11__["ModalService"]), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdirectiveInject"](service_save_data_service__WEBPACK_IMPORTED_MODULE_12__["SaveDataService"]), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdirectiveInject"](service_panel_service__WEBPACK_IMPORTED_MODULE_13__["PanelService"]), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_1__["NgZone"])); };
    CutInListComponent.ɵcmp = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdefineComponent"]({ type: CutInListComponent, selectors: [["app-cut-in-list"]], decls: 10, vars: 4, consts: [[1, "flex-container"], [1, "flex-item", "no-grow"], [3, "click"], ["size", "20", 2, "width", "15em", 3, "ngModel", "change"], [3, "value", 4, "ngFor", "ngForOf"], [1, "flex-item", 2, "width", "380px"], [4, "ngIf"], [3, "value"], [1, "images-select"], [2, "height", "120px", 3, "click"], ["height", "120", 3, "src"], ["placeholder", "Name", 3, "ngModel", "ngModelChange"], [3, "disabled", "click"], ["type", "checkbox", "name", "cutInOriginalSize", 3, "ngModel", "ngModelChange"], ["type", "number", 2, "width", "5em", 3, "ngModel", "min", "max", "ngModelChange"], ["type", "checkbox", "name", "keepImageAspect", 3, "ngModel", "ngModelChange", "click"], ["type", "range", "min", "0", "max", "100", "name", "cutInX_PosWidth", 3, "ngModel", "ngModelChange"], ["type", "number", "min", "0", "max", "100", 2, "width", "5em", 3, "ngModel", "ngModelChange"], ["type", "checkbox", "name", "cutInIsLoop", 3, "ngModel", "ngModelChange"], ["type", "number", "min", "0", 2, "width", "5em", 3, "ngModel", "ngModelChange"], ["placeholder", "", 2, "width", "5em", 3, "ngModel", "ngModelChange"], ["type", "checkbox", "name", "chatActivate", 3, "ngModel", "ngModelChange"], [2, "font-size", "0.4em"], [1, "danger", 3, "click"], [2, "font-size", "12px"]], template: function CutInListComponent_Template(rf, ctx) { if (rf & 1) {
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "div", 0);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](1, "div", 1);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](2, "div");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](3, "button", 2);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("click", function CutInListComponent_Template_button_click_3_listener() { return ctx.createCutIn(); });
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](4, "\u5275\u5EFA\u65B0Cut in");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](5, "select", 3);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("change", function CutInListComponent_Template_select_change_5_listener($event) { return ctx.selectCutIn($event.target.value); });
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](6, CutInListComponent_option_6_Template, 2, 2, "option", 4);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](7, "div", 5);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](8, CutInListComponent_ng_container_8_Template, 76, 39, "ng-container", 6);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](9, CutInListComponent_ng_container_9_Template, 3, 0, "ng-container", 6);
        } if (rf & 2) {
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](5);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngModel", ctx.selectedCutIn == null ? null : ctx.selectedCutIn.identifier);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngForOf", ctx.getCutIns());
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](2);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", !ctx.isEmpty || ctx.selectedCutIn);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", ctx.isEmpty);
        } }, directives: [_angular_forms__WEBPACK_IMPORTED_MODULE_14__["SelectControlValueAccessor"], _angular_forms__WEBPACK_IMPORTED_MODULE_14__["NgControlStatus"], _angular_forms__WEBPACK_IMPORTED_MODULE_14__["NgModel"], _angular_common__WEBPACK_IMPORTED_MODULE_15__["NgForOf"], _angular_common__WEBPACK_IMPORTED_MODULE_15__["NgIf"], _angular_forms__WEBPACK_IMPORTED_MODULE_14__["NgSelectOption"], _angular_forms__WEBPACK_IMPORTED_MODULE_14__["ɵangular_packages_forms_forms_x"], _angular_forms__WEBPACK_IMPORTED_MODULE_14__["DefaultValueAccessor"], _angular_forms__WEBPACK_IMPORTED_MODULE_14__["CheckboxControlValueAccessor"], _angular_forms__WEBPACK_IMPORTED_MODULE_14__["NumberValueAccessor"], _angular_forms__WEBPACK_IMPORTED_MODULE_14__["RangeValueAccessor"]], pipes: [pipe_safe_pipe__WEBPACK_IMPORTED_MODULE_16__["SafePipe"]], styles: [".flex-container[_ngcontent-%COMP%] { \r\n  display: flex; \r\n  flex-flow:  row wrap; \r\n  justify-content: flex-start; \r\n  align-items: stretch;\r\n\r\n}\r\n.flex-item[_ngcontent-%COMP%] {\r\n  margin: 5px; \r\n  flex: 1 0 auto;\r\n  box-sizing: border-box; \r\n  flex-grow: 1;\r\n  max-width: 100%;\r\n}\r\n.no-grow[_ngcontent-%COMP%]{ \r\n  flex-grow: 0;\r\n}\r\n.images-select[_ngcontent-%COMP%] {\r\n  display: flex;\r\n}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImN1dC1pbi1saXN0LmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsa0JBQ3lCLFdBQVc7RUFDbEMsYUFBYSxFQUVnQixXQUFXO0VBQ3hDLG9CQUFvQixFQUVpQixXQUFXO0VBQ2hELDJCQUEyQixFQUVHLFdBQVc7RUFDekMsb0JBQW9COztBQUV0QjtBQUNBO0VBQ0UsV0FBVyxFQUNhLFdBQVc7RUFDbkMsY0FBYztFQUNkLHNCQUFzQixFQUNBLFdBQVc7RUFDakMsWUFBWTtFQUNaLGVBQWU7QUFDakI7QUFFQSxVQUN3QixXQUFXO0VBQ2pDLFlBQVk7QUFDZDtBQUVBO0VBQ0UsYUFBYTtBQUNmIiwiZmlsZSI6ImN1dC1pbi1saXN0LmNvbXBvbmVudC5jc3MiLCJzb3VyY2VzQ29udGVudCI6WyIuZmxleC1jb250YWluZXIge1xyXG4gIGRpc3BsYXk6IC13ZWJraXQtZmxleDsgLyogU2FmYXJpICovXHJcbiAgZGlzcGxheTogZmxleDtcclxuXHJcbiAgLXdlYmtpdC1mbGV4LWZsb3c6IHJvdyB3cmFwOyAvKiBTYWZhcmkgKi9cclxuICBmbGV4LWZsb3c6ICByb3cgd3JhcDtcclxuXHJcbiAgLXdlYmtpdC1qdXN0aWZ5LWNvbnRlbnQ6IGZsZXgtc3RhcnQ7IC8qIFNhZmFyaSAqL1xyXG4gIGp1c3RpZnktY29udGVudDogZmxleC1zdGFydDtcclxuXHJcbiAgLXdlYmtpdC1hbGlnbi1pdGVtczogc3RyZXRjaDsgLyogU2FmYXJpICovXHJcbiAgYWxpZ24taXRlbXM6IHN0cmV0Y2g7XHJcblxyXG59XHJcbi5mbGV4LWl0ZW0ge1xyXG4gIG1hcmdpbjogNXB4O1xyXG4gIC13ZWJraXQtZmxleDogMSAwIGF1dG87IC8qIFNhZmFyaSAqL1xyXG4gIGZsZXg6IDEgMCBhdXRvO1xyXG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XHJcbiAgLXdlYmtpdC1mbGV4LWdyb3c6IDE7IC8qIFNhZmFyaSAqL1xyXG4gIGZsZXgtZ3JvdzogMTtcclxuICBtYXgtd2lkdGg6IDEwMCU7XHJcbn1cclxuXHJcbi5uby1ncm93e1xyXG4gIC13ZWJraXQtZmxleC1ncm93OiAwOyAvKiBTYWZhcmkgKi9cclxuICBmbGV4LWdyb3c6IDA7XHJcbn1cclxuXHJcbi5pbWFnZXMtc2VsZWN0IHtcclxuICBkaXNwbGF5OiBmbGV4O1xyXG59XHJcbiJdfQ== */"] });
    return CutInListComponent;
}());

/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵsetClassMetadata"](CutInListComponent, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_1__["Component"],
        args: [{
                selector: 'app-cut-in-list',
                templateUrl: './cut-in-list.component.html',
                styleUrls: ['./cut-in-list.component.css']
            }]
    }], function () { return [{ type: service_pointer_device_service__WEBPACK_IMPORTED_MODULE_10__["PointerDeviceService"] }, { type: service_modal_service__WEBPACK_IMPORTED_MODULE_11__["ModalService"] }, { type: service_save_data_service__WEBPACK_IMPORTED_MODULE_12__["SaveDataService"] }, { type: service_panel_service__WEBPACK_IMPORTED_MODULE_13__["PanelService"] }, { type: _angular_core__WEBPACK_IMPORTED_MODULE_1__["NgZone"] }]; }, null); })();


/***/ }),

/***/ "Sy1n":
/*!**********************************!*\
  !*** ./src/app/app.component.ts ***!
  \**********************************/
/*! exports provided: AppComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AppComponent", function() { return AppComponent; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "mrSG");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "fXoL");
/* harmony import */ var _udonarium_chat_tab_list__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @udonarium/chat-tab-list */ "YZvQ");
/* harmony import */ var _udonarium_core_file_storage_audio_player__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @udonarium/core/file-storage/audio-player */ "zeEm");
/* harmony import */ var _udonarium_core_file_storage_audio_sharing_system__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @udonarium/core/file-storage/audio-sharing-system */ "XMVy");
/* harmony import */ var _udonarium_core_file_storage_audio_storage__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @udonarium/core/file-storage/audio-storage */ "Prh6");
/* harmony import */ var _udonarium_core_file_storage_file_archiver__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @udonarium/core/file-storage/file-archiver */ "wBZT");
/* harmony import */ var _udonarium_core_file_storage_image_file__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @udonarium/core/file-storage/image-file */ "FjwV");
/* harmony import */ var _udonarium_core_file_storage_image_sharing_system__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @udonarium/core/file-storage/image-sharing-system */ "xbks");
/* harmony import */ var _udonarium_core_file_storage_image_storage__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @udonarium/core/file-storage/image-storage */ "JQpJ");
/* harmony import */ var _udonarium_core_synchronize_object_object_factory__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @udonarium/core/synchronize-object/object-factory */ "+FYa");
/* harmony import */ var _udonarium_core_synchronize_object_object_serializer__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @udonarium/core/synchronize-object/object-serializer */ "MDT1");
/* harmony import */ var _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @udonarium/core/synchronize-object/object-store */ "hm7o");
/* harmony import */ var _udonarium_core_synchronize_object_object_synchronizer__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @udonarium/core/synchronize-object/object-synchronizer */ "dQfN");
/* harmony import */ var _udonarium_core_system__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @udonarium/core/system */ "yNnI");
/* harmony import */ var _udonarium_data_summary_setting__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @udonarium/data-summary-setting */ "zP96");
/* harmony import */ var _udonarium_dice_bot__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @udonarium/dice-bot */ "JUIv");
/* harmony import */ var _udonarium_Jukebox__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @udonarium/Jukebox */ "glHC");
/* harmony import */ var _udonarium_peer_cursor__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! @udonarium/peer-cursor */ "+UEV");
/* harmony import */ var _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! @udonarium/sound-effect */ "veT5");
/* harmony import */ var _udonarium_cut_in_launcher__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! @udonarium/cut-in-launcher */ "9Fid");
/* harmony import */ var component_chat_window_chat_window_component__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! component/chat-window/chat-window.component */ "wPqI");
/* harmony import */ var component_context_menu_context_menu_component__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! component/context-menu/context-menu.component */ "e1FT");
/* harmony import */ var component_file_storage_file_storage_component__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! component/file-storage/file-storage.component */ "OOM5");
/* harmony import */ var component_game_character_generator_game_character_generator_component__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! component/game-character-generator/game-character-generator.component */ "0cI7");
/* harmony import */ var component_game_character_sheet_game_character_sheet_component__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! component/game-character-sheet/game-character-sheet.component */ "zXSY");
/* harmony import */ var component_game_object_inventory_game_object_inventory_component__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! component/game-object-inventory/game-object-inventory.component */ "R1wr");
/* harmony import */ var component_game_table_setting_game_table_setting_component__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! component/game-table-setting/game-table-setting.component */ "zhae");
/* harmony import */ var component_jukebox_jukebox_component__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! component/jukebox/jukebox.component */ "TaI1");
/* harmony import */ var component_modal_modal_component__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! component/modal/modal.component */ "EfKb");
/* harmony import */ var component_peer_menu_peer_menu_component__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! component/peer-menu/peer-menu.component */ "F+Vt");
/* harmony import */ var component_text_view_text_view_component__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! component/text-view/text-view.component */ "AsCv");
/* harmony import */ var component_ui_panel_ui_panel_component__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! component/ui-panel/ui-panel.component */ "VnuA");
/* harmony import */ var service_context_menu_service__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(/*! service/context-menu.service */ "9FhF");
/* harmony import */ var service_modal_service__WEBPACK_IMPORTED_MODULE_34__ = __webpack_require__(/*! service/modal.service */ "CE6K");
/* harmony import */ var service_panel_service__WEBPACK_IMPORTED_MODULE_35__ = __webpack_require__(/*! service/panel.service */ "M9xM");
/* harmony import */ var component_cut_in_window_cut_in_window_component__WEBPACK_IMPORTED_MODULE_36__ = __webpack_require__(/*! component/cut-in-window/cut-in-window.component */ "xphS");
/* harmony import */ var service_pointer_device_service__WEBPACK_IMPORTED_MODULE_37__ = __webpack_require__(/*! service/pointer-device.service */ "GPP8");
/* harmony import */ var service_chat_message_service__WEBPACK_IMPORTED_MODULE_38__ = __webpack_require__(/*! service/chat-message.service */ "PEfN");
/* harmony import */ var service_app_config_service__WEBPACK_IMPORTED_MODULE_39__ = __webpack_require__(/*! service/app-config.service */ "6VpD");
/* harmony import */ var service_save_data_service__WEBPACK_IMPORTED_MODULE_40__ = __webpack_require__(/*! service/save-data.service */ "Uvtn");
/* harmony import */ var _ng_select_ng_select__WEBPACK_IMPORTED_MODULE_41__ = __webpack_require__(/*! @ng-select/ng-select */ "ZOsW");
/* harmony import */ var component_game_table_game_table_component__WEBPACK_IMPORTED_MODULE_42__ = __webpack_require__(/*! component/game-table/game-table.component */ "Umgr");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_43__ = __webpack_require__(/*! @angular/common */ "ofXK");
/* harmony import */ var component_network_indicator_network_indicator_component__WEBPACK_IMPORTED_MODULE_44__ = __webpack_require__(/*! component/network-indicator/network-indicator.component */ "kf6k");

















































var _c0 = ["modalLayer"];
function AppComponent_li_56_Template(rf, ctx) { if (rf & 1) {
    var _r4 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "li", 2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("click", function AppComponent_li_56_Template_li_click_0_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r4); var ctx_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](); return ctx_r3.save(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](1, "a", 3);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](2, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](3, "i", 5);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](4, "sd_storage");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](5, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](6, "\u4FDD\u5B58\u623F\u9593");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
} }
function AppComponent_li_57_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "li", 11);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](1, "a");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](2, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](3, "i", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](4, "sd_storage");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](5, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](6);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
} if (rf & 2) {
    var ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](6);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtextInterpolate1"]("", ctx_r1.progresPercent, "%");
} }
var AppComponent = /** @class */ (function () {
    function AppComponent(modalService, panelService, pointerDeviceService, chatMessageService, appConfigService, saveDataService, ngSelectConfig, ngZone) {
        var _this = this;
        this.modalService = modalService;
        this.panelService = panelService;
        this.pointerDeviceService = pointerDeviceService;
        this.chatMessageService = chatMessageService;
        this.appConfigService = appConfigService;
        this.saveDataService = saveDataService;
        this.ngSelectConfig = ngSelectConfig;
        this.ngZone = ngZone;
        this.immediateUpdateTimer = null;
        this.lazyUpdateTimer = null;
        this.openPanelCount = 0;
        this.isSaveing = false;
        this.progresPercent = 0;
        this.dispcounter = 10; //表示更新用ダミーカットインを閉じるときに無理やり更新させている。
        this.ngZone.runOutsideAngular(function () {
            _udonarium_core_system__WEBPACK_IMPORTED_MODULE_14__["EventSystem"];
            _udonarium_core_system__WEBPACK_IMPORTED_MODULE_14__["Network"];
            _udonarium_core_file_storage_file_archiver__WEBPACK_IMPORTED_MODULE_6__["FileArchiver"].instance.initialize();
            _udonarium_core_file_storage_image_sharing_system__WEBPACK_IMPORTED_MODULE_8__["ImageSharingSystem"].instance.initialize();
            _udonarium_core_file_storage_image_storage__WEBPACK_IMPORTED_MODULE_9__["ImageStorage"].instance;
            _udonarium_core_file_storage_audio_sharing_system__WEBPACK_IMPORTED_MODULE_4__["AudioSharingSystem"].instance.initialize();
            _udonarium_core_file_storage_audio_storage__WEBPACK_IMPORTED_MODULE_5__["AudioStorage"].instance;
            _udonarium_core_synchronize_object_object_factory__WEBPACK_IMPORTED_MODULE_10__["ObjectFactory"].instance;
            _udonarium_core_synchronize_object_object_serializer__WEBPACK_IMPORTED_MODULE_11__["ObjectSerializer"].instance;
            _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_12__["ObjectStore"].instance;
            _udonarium_core_synchronize_object_object_synchronizer__WEBPACK_IMPORTED_MODULE_13__["ObjectSynchronizer"].instance.initialize();
        });
        this.appConfigService.initialize();
        this.pointerDeviceService.initialize();
        this.ngSelectConfig.appendTo = 'body';
        _udonarium_chat_tab_list__WEBPACK_IMPORTED_MODULE_2__["ChatTabList"].instance.initialize();
        _udonarium_data_summary_setting__WEBPACK_IMPORTED_MODULE_15__["DataSummarySetting"].instance.initialize();
        var diceBot = new _udonarium_dice_bot__WEBPACK_IMPORTED_MODULE_16__["DiceBot"]('DiceBot');
        diceBot.initialize();
        var jukebox = new _udonarium_Jukebox__WEBPACK_IMPORTED_MODULE_17__["Jukebox"]('Jukebox');
        jukebox.initialize();
        var cutInLauncher = new _udonarium_cut_in_launcher__WEBPACK_IMPORTED_MODULE_20__["CutInLauncher"]('CutInLauncher');
        cutInLauncher.initialize();
        var soundEffect = new _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_19__["SoundEffect"]('SoundEffect');
        soundEffect.initialize();
        _udonarium_chat_tab_list__WEBPACK_IMPORTED_MODULE_2__["ChatTabList"].instance.addChatTab('メインタブ', 'MainTab');
        _udonarium_chat_tab_list__WEBPACK_IMPORTED_MODULE_2__["ChatTabList"].instance.addChatTab('サブタブ', 'SubTab');
        var fileContext = _udonarium_core_file_storage_image_file__WEBPACK_IMPORTED_MODULE_7__["ImageFile"].createEmpty('none_icon').toContext();
        fileContext.url = './assets/images/ic_account_circle_black_24dp_2x.png';
        var noneIconImage = _udonarium_core_file_storage_image_storage__WEBPACK_IMPORTED_MODULE_9__["ImageStorage"].instance.add(fileContext);
        _udonarium_core_file_storage_audio_player__WEBPACK_IMPORTED_MODULE_3__["AudioPlayer"].resumeAudioContext();
        _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_19__["PresetSound"].dicePick = _udonarium_core_file_storage_audio_storage__WEBPACK_IMPORTED_MODULE_5__["AudioStorage"].instance.add('./assets/sounds/soundeffect-lab/shoulder-touch1.mp3').identifier;
        _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_19__["PresetSound"].dicePut = _udonarium_core_file_storage_audio_storage__WEBPACK_IMPORTED_MODULE_5__["AudioStorage"].instance.add('./assets/sounds/soundeffect-lab/book-stack1.mp3').identifier;
        _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_19__["PresetSound"].diceRoll1 = _udonarium_core_file_storage_audio_storage__WEBPACK_IMPORTED_MODULE_5__["AudioStorage"].instance.add('./assets/sounds/on-jin/spo_ge_saikoro_teburu01.mp3').identifier;
        _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_19__["PresetSound"].diceRoll2 = _udonarium_core_file_storage_audio_storage__WEBPACK_IMPORTED_MODULE_5__["AudioStorage"].instance.add('./assets/sounds/on-jin/spo_ge_saikoro_teburu02.mp3').identifier;
        _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_19__["PresetSound"].cardDraw = _udonarium_core_file_storage_audio_storage__WEBPACK_IMPORTED_MODULE_5__["AudioStorage"].instance.add('./assets/sounds/soundeffect-lab/card-turn-over1.mp3').identifier;
        _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_19__["PresetSound"].cardPick = _udonarium_core_file_storage_audio_storage__WEBPACK_IMPORTED_MODULE_5__["AudioStorage"].instance.add('./assets/sounds/soundeffect-lab/shoulder-touch1.mp3').identifier;
        _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_19__["PresetSound"].cardPut = _udonarium_core_file_storage_audio_storage__WEBPACK_IMPORTED_MODULE_5__["AudioStorage"].instance.add('./assets/sounds/soundeffect-lab/book-stack1.mp3').identifier;
        _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_19__["PresetSound"].cardShuffle = _udonarium_core_file_storage_audio_storage__WEBPACK_IMPORTED_MODULE_5__["AudioStorage"].instance.add('./assets/sounds/soundeffect-lab/card-open1.mp3').identifier;
        _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_19__["PresetSound"].piecePick = _udonarium_core_file_storage_audio_storage__WEBPACK_IMPORTED_MODULE_5__["AudioStorage"].instance.add('./assets/sounds/soundeffect-lab/shoulder-touch1.mp3').identifier;
        _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_19__["PresetSound"].piecePut = _udonarium_core_file_storage_audio_storage__WEBPACK_IMPORTED_MODULE_5__["AudioStorage"].instance.add('./assets/sounds/soundeffect-lab/book-stack1.mp3').identifier;
        _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_19__["PresetSound"].blockPick = _udonarium_core_file_storage_audio_storage__WEBPACK_IMPORTED_MODULE_5__["AudioStorage"].instance.add('./assets/sounds/tm2/tm2_pon002.wav').identifier;
        _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_19__["PresetSound"].blockPut = _udonarium_core_file_storage_audio_storage__WEBPACK_IMPORTED_MODULE_5__["AudioStorage"].instance.add('./assets/sounds/tm2/tm2_pon002.wav').identifier;
        _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_19__["PresetSound"].lock = _udonarium_core_file_storage_audio_storage__WEBPACK_IMPORTED_MODULE_5__["AudioStorage"].instance.add('./assets/sounds/tm2/tm2_switch001.wav').identifier;
        _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_19__["PresetSound"].unlock = _udonarium_core_file_storage_audio_storage__WEBPACK_IMPORTED_MODULE_5__["AudioStorage"].instance.add('./assets/sounds/tm2/tm2_switch001.wav').identifier;
        _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_19__["PresetSound"].sweep = _udonarium_core_file_storage_audio_storage__WEBPACK_IMPORTED_MODULE_5__["AudioStorage"].instance.add('./assets/sounds/tm2/tm2_swing003.wav').identifier;
        _udonarium_core_file_storage_audio_storage__WEBPACK_IMPORTED_MODULE_5__["AudioStorage"].instance.get(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_19__["PresetSound"].dicePick).isHidden = true;
        _udonarium_core_file_storage_audio_storage__WEBPACK_IMPORTED_MODULE_5__["AudioStorage"].instance.get(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_19__["PresetSound"].dicePut).isHidden = true;
        _udonarium_core_file_storage_audio_storage__WEBPACK_IMPORTED_MODULE_5__["AudioStorage"].instance.get(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_19__["PresetSound"].diceRoll1).isHidden = true;
        _udonarium_core_file_storage_audio_storage__WEBPACK_IMPORTED_MODULE_5__["AudioStorage"].instance.get(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_19__["PresetSound"].diceRoll2).isHidden = true;
        _udonarium_core_file_storage_audio_storage__WEBPACK_IMPORTED_MODULE_5__["AudioStorage"].instance.get(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_19__["PresetSound"].cardDraw).isHidden = true;
        _udonarium_core_file_storage_audio_storage__WEBPACK_IMPORTED_MODULE_5__["AudioStorage"].instance.get(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_19__["PresetSound"].cardPick).isHidden = true;
        _udonarium_core_file_storage_audio_storage__WEBPACK_IMPORTED_MODULE_5__["AudioStorage"].instance.get(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_19__["PresetSound"].cardPut).isHidden = true;
        _udonarium_core_file_storage_audio_storage__WEBPACK_IMPORTED_MODULE_5__["AudioStorage"].instance.get(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_19__["PresetSound"].cardShuffle).isHidden = true;
        _udonarium_core_file_storage_audio_storage__WEBPACK_IMPORTED_MODULE_5__["AudioStorage"].instance.get(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_19__["PresetSound"].piecePick).isHidden = true;
        _udonarium_core_file_storage_audio_storage__WEBPACK_IMPORTED_MODULE_5__["AudioStorage"].instance.get(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_19__["PresetSound"].piecePut).isHidden = true;
        _udonarium_core_file_storage_audio_storage__WEBPACK_IMPORTED_MODULE_5__["AudioStorage"].instance.get(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_19__["PresetSound"].blockPick).isHidden = true;
        _udonarium_core_file_storage_audio_storage__WEBPACK_IMPORTED_MODULE_5__["AudioStorage"].instance.get(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_19__["PresetSound"].blockPut).isHidden = true;
        _udonarium_core_file_storage_audio_storage__WEBPACK_IMPORTED_MODULE_5__["AudioStorage"].instance.get(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_19__["PresetSound"].lock).isHidden = true;
        _udonarium_core_file_storage_audio_storage__WEBPACK_IMPORTED_MODULE_5__["AudioStorage"].instance.get(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_19__["PresetSound"].unlock).isHidden = true;
        _udonarium_core_file_storage_audio_storage__WEBPACK_IMPORTED_MODULE_5__["AudioStorage"].instance.get(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_19__["PresetSound"].sweep).isHidden = true;
        _udonarium_peer_cursor__WEBPACK_IMPORTED_MODULE_18__["PeerCursor"].createMyCursor();
        _udonarium_peer_cursor__WEBPACK_IMPORTED_MODULE_18__["PeerCursor"].myCursor.name = 'プレイヤー';
        _udonarium_peer_cursor__WEBPACK_IMPORTED_MODULE_18__["PeerCursor"].myCursor.imageIdentifier = noneIconImage.identifier;
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_14__["EventSystem"].register(this)
            .on('START_CUT_IN', function (event) {
            _this.startCutIn(event.data.cutIn);
        })
            .on('STOP_CUT_IN', function (event) {
            if (!event.data.cutIn)
                return;
            console.log('カットインイベント_ストップ' + event.data.cutIn.name);
        })
            .on('UPDATE_GAME_OBJECT', function (event) { _this.lazyNgZoneUpdate(event.isSendFromSelf); })
            .on('DELETE_GAME_OBJECT', function (event) { _this.lazyNgZoneUpdate(event.isSendFromSelf); })
            .on('SYNCHRONIZE_AUDIO_LIST', function (event) { if (event.isSendFromSelf)
            _this.lazyNgZoneUpdate(false); })
            .on('SYNCHRONIZE_FILE_LIST', function (event) { if (event.isSendFromSelf)
            _this.lazyNgZoneUpdate(false); })
            .on('LOAD_CONFIG', function (event) {
            console.log('LOAD_CONFIG !!!', event.data);
            _udonarium_core_system__WEBPACK_IMPORTED_MODULE_14__["Network"].setApiKey(event.data.webrtc.key);
            _udonarium_core_system__WEBPACK_IMPORTED_MODULE_14__["Network"].open();
        })
            .on('FILE_LOADED', function (event) {
            _this.lazyNgZoneUpdate(false);
        })
            .on('OPEN_NETWORK', function (event) {
            console.log('OPEN_NETWORK', event.data.peerId);
            _udonarium_peer_cursor__WEBPACK_IMPORTED_MODULE_18__["PeerCursor"].myCursor.peerId = _udonarium_core_system__WEBPACK_IMPORTED_MODULE_14__["Network"].peerContext.peerId;
            _udonarium_peer_cursor__WEBPACK_IMPORTED_MODULE_18__["PeerCursor"].myCursor.userId = _udonarium_core_system__WEBPACK_IMPORTED_MODULE_14__["Network"].peerContext.userId;
        })
            .on('CLOSE_NETWORK', function (event) {
            console.log('CLOSE_NETWORK', event.data.peerId);
            _this.ngZone.run(function () { return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(_this, void 0, void 0, function () {
                return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"])(this, function (_a) {
                    switch (_a.label) {
                        case 0:
                            if (!(1 < _udonarium_core_system__WEBPACK_IMPORTED_MODULE_14__["Network"].peerIds.length)) return [3 /*break*/, 2];
                            return [4 /*yield*/, this.modalService.open(component_text_view_text_view_component__WEBPACK_IMPORTED_MODULE_31__["TextViewComponent"], { title: 'ネットワークエラー', text: 'ネットワーク接続に何らかの異常が発生しました。\nこの表示以後、接続が不安定であれば、ページリロードと再接続を試みてください。' })];
                        case 1:
                            _a.sent();
                            return [3 /*break*/, 4];
                        case 2: return [4 /*yield*/, this.modalService.open(component_text_view_text_view_component__WEBPACK_IMPORTED_MODULE_31__["TextViewComponent"], { title: 'ネットワークエラー', text: '接続情報が破棄されました。\nこのウィンドウを閉じると再接続を試みます。' })];
                        case 3:
                            _a.sent();
                            _udonarium_core_system__WEBPACK_IMPORTED_MODULE_14__["Network"].open();
                            _a.label = 4;
                        case 4: return [2 /*return*/];
                    }
                });
            }); });
        })
            .on('CONNECT_PEER', function (event) {
            if (event.isSendFromSelf)
                _this.chatMessageService.calibrateTimeOffset();
            _this.lazyNgZoneUpdate(event.isSendFromSelf);
        })
            .on('DISCONNECT_PEER', function (event) {
            _this.lazyNgZoneUpdate(event.isSendFromSelf);
        });
    }
    AppComponent.prototype.ngAfterViewInit = function () {
        var _this = this;
        service_panel_service__WEBPACK_IMPORTED_MODULE_35__["PanelService"].defaultParentViewContainerRef = service_modal_service__WEBPACK_IMPORTED_MODULE_34__["ModalService"].defaultParentViewContainerRef = service_context_menu_service__WEBPACK_IMPORTED_MODULE_33__["ContextMenuService"].defaultParentViewContainerRef = this.modalLayerViewContainerRef;
        setTimeout(function () {
            _this.panelService.open(component_peer_menu_peer_menu_component__WEBPACK_IMPORTED_MODULE_30__["PeerMenuComponent"], { width: 500, height: 450, left: 100 });
            _this.panelService.open(component_chat_window_chat_window_component__WEBPACK_IMPORTED_MODULE_21__["ChatWindowComponent"], { width: 700, height: 400, left: 100, top: 450 });
        }, 0);
        setInterval(function () {
            _this.dispcounter = _this.dispcounter + 1;
            if (_this.dispcounter > 100)
                _this.dispcounter = 0;
        }, 200);
    };
    AppComponent.prototype.ngOnDestroy = function () {
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_14__["EventSystem"].unregister(this);
    };
    AppComponent.prototype.startCutIn = function (cutIn) {
        if (!cutIn)
            return;
        console.log('カットインイベント_スタート' + cutIn.name);
        var option = { width: 200, height: 100, left: 300, top: 100 };
        option.title = 'カットイン : ' + cutIn.name;
        console.log('画面領域 w:' + window.innerWidth + ' h:' + window.innerHeight);
        var cutin_w = cutIn.width;
        var cutin_h = cutIn.height;
        console.log('画像サイズ w:' + cutin_w + ' h:' + cutin_h);
        var margin_w = window.innerWidth - cutin_w;
        var margin_h = window.innerHeight - cutin_h - 25;
        if (margin_w < 0)
            margin_w = 0;
        if (margin_h < 0)
            margin_h = 0;
        var margin_x = margin_w * cutIn.x_pos / 100;
        var margin_y = margin_h * cutIn.y_pos / 100;
        option.width = cutin_w;
        option.height = cutin_h + 25;
        option.left = margin_x;
        option.top = margin_y;
        option.isCutIn = true;
        option.cutInIdentifier = cutIn.identifier;
        var component = this.panelService.open(component_cut_in_window_cut_in_window_component__WEBPACK_IMPORTED_MODULE_36__["CutInWindowComponent"], option);
        component.cutIn = cutIn;
        component.startCutIn();
    };
    AppComponent.prototype.open = function (componentName) {
        var component = null;
        var option = { width: 450, height: 600, left: 100 };
        switch (componentName) {
            case 'PeerMenuComponent':
                component = component_peer_menu_peer_menu_component__WEBPACK_IMPORTED_MODULE_30__["PeerMenuComponent"];
                break;
            case 'ChatWindowComponent':
                component = component_chat_window_chat_window_component__WEBPACK_IMPORTED_MODULE_21__["ChatWindowComponent"];
                option.width = 700;
                break;
            case 'GameTableSettingComponent':
                component = component_game_table_setting_game_table_setting_component__WEBPACK_IMPORTED_MODULE_27__["GameTableSettingComponent"];
                option = { width: 630, height: 400, left: 100 };
                break;
            case 'FileStorageComponent':
                component = component_file_storage_file_storage_component__WEBPACK_IMPORTED_MODULE_23__["FileStorageComponent"];
                break;
            case 'GameCharacterSheetComponent':
                component = component_game_character_sheet_game_character_sheet_component__WEBPACK_IMPORTED_MODULE_25__["GameCharacterSheetComponent"];
                break;
            case 'JukeboxComponent':
                component = component_jukebox_jukebox_component__WEBPACK_IMPORTED_MODULE_28__["JukeboxComponent"];
                break;
            case 'GameCharacterGeneratorComponent':
                component = component_game_character_generator_game_character_generator_component__WEBPACK_IMPORTED_MODULE_24__["GameCharacterGeneratorComponent"];
                option = { width: 500, height: 300, left: 100 };
                break;
            case 'GameObjectInventoryComponent':
                component = component_game_object_inventory_game_object_inventory_component__WEBPACK_IMPORTED_MODULE_26__["GameObjectInventoryComponent"];
                break;
        }
        if (component) {
            option.top = (this.openPanelCount % 10 + 1) * 20;
            option.left = 100 + (this.openPanelCount % 20 + 1) * 5;
            this.openPanelCount = this.openPanelCount + 1;
            this.panelService.open(component, option);
        }
    };
    AppComponent.prototype.save = function () {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function () {
            var roomName;
            var _this = this;
            return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"])(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (this.isSaveing)
                            return [2 /*return*/];
                        this.isSaveing = true;
                        this.progresPercent = 0;
                        roomName = _udonarium_core_system__WEBPACK_IMPORTED_MODULE_14__["Network"].peerContext && 0 < _udonarium_core_system__WEBPACK_IMPORTED_MODULE_14__["Network"].peerContext.roomName.length
                            ? _udonarium_core_system__WEBPACK_IMPORTED_MODULE_14__["Network"].peerContext.roomName
                            : 'ルームデータ';
                        return [4 /*yield*/, this.saveDataService.saveRoomAsync(roomName, function (percent) {
                                _this.progresPercent = percent;
                            })];
                    case 1:
                        _a.sent();
                        setTimeout(function () {
                            _this.isSaveing = false;
                            _this.progresPercent = 0;
                        }, 500);
                        return [2 /*return*/];
                }
            });
        });
    };
    AppComponent.prototype.handleFileSelect = function (event) {
        var input = event.target;
        var files = input.files;
        if (files.length)
            _udonarium_core_file_storage_file_archiver__WEBPACK_IMPORTED_MODULE_6__["FileArchiver"].instance.load(files);
        input.value = '';
    };
    AppComponent.prototype.lazyNgZoneUpdate = function (isImmediate) {
        var _this = this;
        if (isImmediate) {
            if (this.immediateUpdateTimer !== null)
                return;
            this.immediateUpdateTimer = setTimeout(function () {
                _this.immediateUpdateTimer = null;
                if (_this.lazyUpdateTimer != null) {
                    clearTimeout(_this.lazyUpdateTimer);
                    _this.lazyUpdateTimer = null;
                }
                _this.ngZone.run(function () { });
            }, 0);
        }
        else {
            if (this.lazyUpdateTimer !== null)
                return;
            this.lazyUpdateTimer = setTimeout(function () {
                _this.lazyUpdateTimer = null;
                if (_this.immediateUpdateTimer != null) {
                    clearTimeout(_this.immediateUpdateTimer);
                    _this.immediateUpdateTimer = null;
                }
                _this.ngZone.run(function () { });
            }, 100);
        }
    };
    AppComponent.ɵfac = function AppComponent_Factory(t) { return new (t || AppComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdirectiveInject"](service_modal_service__WEBPACK_IMPORTED_MODULE_34__["ModalService"]), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdirectiveInject"](service_panel_service__WEBPACK_IMPORTED_MODULE_35__["PanelService"]), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdirectiveInject"](service_pointer_device_service__WEBPACK_IMPORTED_MODULE_37__["PointerDeviceService"]), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdirectiveInject"](service_chat_message_service__WEBPACK_IMPORTED_MODULE_38__["ChatMessageService"]), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdirectiveInject"](service_app_config_service__WEBPACK_IMPORTED_MODULE_39__["AppConfigService"]), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdirectiveInject"](service_save_data_service__WEBPACK_IMPORTED_MODULE_40__["SaveDataService"]), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdirectiveInject"](_ng_select_ng_select__WEBPACK_IMPORTED_MODULE_41__["NgSelectConfig"]), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_1__["NgZone"])); };
    AppComponent.ɵcmp = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdefineComponent"]({ type: AppComponent, selectors: [["app-root"]], viewQuery: function AppComponent_Query(rf, ctx) { if (rf & 1) {
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵstaticViewQuery"](_c0, true, _angular_core__WEBPACK_IMPORTED_MODULE_1__["ViewContainerRef"]);
        } if (rf & 2) {
            var _t = void 0;
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵqueryRefresh"](_t = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵloadQuery"]()) && (ctx.modalLayerViewContainerRef = _t.first);
        } }, decls: 61, vars: 7, consts: [["id", "app-table-layer", 2, "position", "absolute", "width", "100%", "height", "100%", "overflow", "hidden"], [3, "top", "left", "width", "height", "title"], [3, "click"], ["routerLink", "/", "routerLinkActive", "active"], [1, "material-icons", "icon-size"], [1, "material-icons"], ["type", "file", "multiple", "", "accept", "application/xml,text/xml,application/zip", 2, "display", "none", 3, "change"], [3, "click", 4, "ngIf"], ["style", "pointer-events: none;", 4, "ngIf"], ["modalLayer", ""], [1, "networkIndicator"], [2, "pointer-events", "none"], [1, "material-icons", "vibration-amine"]], template: function AppComponent_Template(rf, ctx) { if (rf & 1) {
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "div", 0);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelement"](1, "game-table");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](2, "ui-panel", 1);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](3, "nav");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](4, "ul");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](5, "li", 2);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("click", function AppComponent_Template_li_click_5_listener() { return ctx.open("PeerMenuComponent"); });
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](6, "a", 3);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](7, "div");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](8, "i", 4);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](9, "people");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](10, "div");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](11, "\u9023\u7DDA");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](12, "li", 2);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("click", function AppComponent_Template_li_click_12_listener() { return ctx.open("ChatWindowComponent"); });
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](13, "a", 3);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](14, "div");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](15, "i", 4);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](16, "speaker_notes");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](17, "div");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](18, "\u804A\u5929\u8996\u7A97");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](19, "li", 2);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("click", function AppComponent_Template_li_click_19_listener() { return ctx.open("GameTableSettingComponent"); });
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](20, "a", 3);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](21, "div");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](22, "i", 4);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](23, "layers");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](24, "div");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](25, "\u684C\u9762\u5730\u5716");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](26, "li", 2);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("click", function AppComponent_Template_li_click_26_listener() { return ctx.open("FileStorageComponent"); });
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](27, "a", 3);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](28, "div");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](29, "i", 4);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](30, "photo_library");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](31, "div");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](32, "\u4E0A\u50B3\u5716\u7247");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](33, "li", 2);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("click", function AppComponent_Template_li_click_33_listener() { return ctx.open("JukeboxComponent"); });
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](34, "a", 3);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](35, "div");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](36, "i", 5);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](37, "queue_music");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](38, "div");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](39, "\u97F3\u6A02");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](40, "li", 2);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("click", function AppComponent_Template_li_click_40_listener() { return ctx.open("GameObjectInventoryComponent"); });
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](41, "a", 3);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](42, "div");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](43, "i", 4);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](44, "folder_shared");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](45, "div");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](46, "\u89D2\u8272\u5009\u5EAB");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](47, "li");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](48, "a", 3);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](49, "label");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](50, "div");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](51, "i", 5);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](52, "open_in_browser");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](53, "div");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](54, "\u8B80\u53D6\u623F\u9593");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](55, "input", 6);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("change", function AppComponent_Template_input_change_55_listener($event) { return ctx.handleFileSelect($event); });
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](56, AppComponent_li_56_Template, 7, 0, "li", 7);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](57, AppComponent_li_57_Template, 7, 1, "li", 8);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelement"](58, "div", null, 9);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelement"](60, "network-indicator", 10);
        } if (rf & 2) {
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](2);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("top", 0)("left", 0)("width", 105)("height", 475)("title", "\u30E1\u30CB\u30E5\u30FC");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](54);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", !ctx.isSaveing);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", ctx.isSaveing);
        } }, directives: [component_game_table_game_table_component__WEBPACK_IMPORTED_MODULE_42__["GameTableComponent"], component_ui_panel_ui_panel_component__WEBPACK_IMPORTED_MODULE_32__["UIPanelComponent"], _angular_common__WEBPACK_IMPORTED_MODULE_43__["NgIf"], component_network_indicator_network_indicator_component__WEBPACK_IMPORTED_MODULE_44__["NetworkIndicatorComponent"]], styles: ["img[_ngcontent-%COMP%] {\r\n  hight: 5px;\r\n  width: 5px;\r\n}\r\n.dummydisp[_ngcontent-%COMP%] {\r\n  position: absolute;\r\n  color: rgba(30, 30, 30, 0.0);\r\n  font-size: 10px;\r\n  max-hight: 5px;\r\n}\r\nnav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] {\r\n    list-style:none;\r\n    padding: 0px;\r\n    margin: 0px;\r\n  \r\n}\r\nnav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]    > li[_ngcontent-%COMP%] {\r\n  text-align: center;\r\n  padding: 5px;\r\n  color: #CCC;\r\n  color: #444;\r\n\r\n  cursor: -moz-pointer;\r\n  cursor: -webkit-pointer;\r\n  cursor: pointer;\r\n}\r\nnav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]    > li[_ngcontent-%COMP%]:hover {\r\n  color: #CCC;\r\n  background-color: rgba(30, 30, 30, 0.8);\r\n}\r\nnav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]    > li[_ngcontent-%COMP%]    > a[_ngcontent-%COMP%] {\r\n  height: 128px;\r\n  width: 128px;\r\n  font-size: 8px;\r\n  -webkit-user-select: none;\r\n          user-select: none;\r\n}\r\nnav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]    > li[_ngcontent-%COMP%]    > a[_ngcontent-%COMP%]    > label[_ngcontent-%COMP%] {\r\n  cursor: -moz-pointer;\r\n  cursor: -webkit-pointer;\r\n  cursor: pointer;\r\n}\r\nnav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   i[_ngcontent-%COMP%] {\r\n  font-size: 24px;\r\n}\r\nnav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:active, nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:visited {\r\n  text-decoration: none;\r\n}\r\n.icon-size[_ngcontent-%COMP%] {\r\n  font-size: 40px;\r\n}\r\n.side-menu[_ngcontent-%COMP%] {\r\n  top: 0px;\r\n  left: 0px;\r\n  box-sizing: border-box;\r\n  overflow: auto;\r\n  position: absolute;\r\n  color: #CCC;\r\n  background-color: rgba(30, 30, 30, 0.8);\r\n  border:solid 1px #999;\r\n  padding: 0px;\r\n  height: 100%;\r\n  width: 300px;\r\n}\r\n.networkIndicator[_ngcontent-%COMP%] {\r\n  display: none;\r\n  z-index: 9999;\r\n  pointer-events: none;\r\n  position: absolute;\r\n  top: 3px;\r\n  right: 3px;\r\n  height: 30px;\r\n  width: 30px;\r\n}\r\n.vibration-amine[_ngcontent-%COMP%] {\r\n  animation: vibration 0.2s infinite;\r\n}\r\n@keyframes vibration {\r\n  0%   { transform: scale(1.0, 1.0) translate(0%, 0%); }\r\n  50%  { transform: scale(1.02, 0.95) translate(0%, 5%); }\r\n  100% { transform: scale(1.0, 1.0) translate(0%, 0%); }\r\n}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UsVUFBVTtFQUNWLFVBQVU7QUFDWjtBQUNBO0VBQ0Usa0JBQWtCO0VBQ2xCLDRCQUE0QjtFQUM1QixlQUFlO0VBQ2YsY0FBYztBQUNoQjtBQUVBO0lBQ0ksZUFBZTtJQUNmLFlBQVk7SUFDWixXQUFXO0VBQ2I7Ozs7O0dBS0M7QUFDSDtBQUVBO0VBQ0Usa0JBQWtCO0VBQ2xCLFlBQVk7RUFDWixXQUFXO0VBQ1gsV0FBVzs7RUFFWCxvQkFBb0I7RUFDcEIsdUJBQXVCO0VBQ3ZCLGVBQWU7QUFDakI7QUFFQTtFQUNFLFdBQVc7RUFDWCx1Q0FBdUM7QUFDekM7QUFDQTtFQUNFLGFBQWE7RUFDYixZQUFZO0VBQ1osY0FBYztFQUNkLHlCQUFpQjtVQUFqQixpQkFBaUI7QUFDbkI7QUFDQTtFQUNFLG9CQUFvQjtFQUNwQix1QkFBdUI7RUFDdkIsZUFBZTtBQUNqQjtBQUNBO0VBQ0UsZUFBZTtBQUNqQjtBQUNBO0VBQ0UscUJBQXFCO0FBQ3ZCO0FBRUE7RUFDRSxlQUFlO0FBQ2pCO0FBRUE7RUFDRSxRQUFRO0VBQ1IsU0FBUztFQUNULHNCQUFzQjtFQUN0QixjQUFjO0VBQ2Qsa0JBQWtCO0VBQ2xCLFdBQVc7RUFDWCx1Q0FBdUM7RUFDdkMscUJBQXFCO0VBQ3JCLFlBQVk7RUFDWixZQUFZO0VBQ1osWUFBWTtBQUNkO0FBRUE7RUFDRSxhQUFhO0VBQ2IsYUFBYTtFQUNiLG9CQUFvQjtFQUNwQixrQkFBa0I7RUFDbEIsUUFBUTtFQUNSLFVBQVU7RUFDVixZQUFZO0VBQ1osV0FBVztBQUNiO0FBRUE7RUFDRSxrQ0FBa0M7QUFDcEM7QUFFQTtFQUNFLE9BQU8sNENBQTRDLEVBQUU7RUFDckQsT0FBTyw4Q0FBOEMsRUFBRTtFQUN2RCxPQUFPLDRDQUE0QyxFQUFFO0FBQ3ZEIiwiZmlsZSI6ImFwcC5jb21wb25lbnQuY3NzIiwic291cmNlc0NvbnRlbnQiOlsiaW1nIHtcclxuICBoaWdodDogNXB4O1xyXG4gIHdpZHRoOiA1cHg7XHJcbn1cclxuLmR1bW15ZGlzcCB7XHJcbiAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gIGNvbG9yOiByZ2JhKDMwLCAzMCwgMzAsIDAuMCk7XHJcbiAgZm9udC1zaXplOiAxMHB4O1xyXG4gIG1heC1oaWdodDogNXB4O1xyXG59XHJcblxyXG5uYXYgdWwge1xyXG4gICAgbGlzdC1zdHlsZTpub25lO1xyXG4gICAgcGFkZGluZzogMHB4O1xyXG4gICAgbWFyZ2luOiAwcHg7XHJcbiAgLypcclxuICBib3JkZXI6IDFweCBzb2xpZCAjYmJiO1xyXG4gIGJvcmRlci1yYWRpdXM6IDVweDtcclxuICBwYWRkaW5nOiA1cHg7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgzMCwgMzAsIDMwLCAwLjgpO1xyXG4gICovXHJcbn1cclxuXHJcbm5hdiB1bCA+IGxpIHtcclxuICB0ZXh0LWFsaWduOiBjZW50ZXI7XHJcbiAgcGFkZGluZzogNXB4O1xyXG4gIGNvbG9yOiAjQ0NDO1xyXG4gIGNvbG9yOiAjNDQ0O1xyXG5cclxuICBjdXJzb3I6IC1tb3otcG9pbnRlcjtcclxuICBjdXJzb3I6IC13ZWJraXQtcG9pbnRlcjtcclxuICBjdXJzb3I6IHBvaW50ZXI7XHJcbn1cclxuXHJcbm5hdiB1bCA+IGxpOmhvdmVyIHtcclxuICBjb2xvcjogI0NDQztcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDMwLCAzMCwgMzAsIDAuOCk7XHJcbn1cclxubmF2IHVsID4gbGkgPiBhIHtcclxuICBoZWlnaHQ6IDEyOHB4O1xyXG4gIHdpZHRoOiAxMjhweDtcclxuICBmb250LXNpemU6IDhweDtcclxuICB1c2VyLXNlbGVjdDogbm9uZTtcclxufVxyXG5uYXYgdWwgPiBsaSA+IGEgPiBsYWJlbCB7XHJcbiAgY3Vyc29yOiAtbW96LXBvaW50ZXI7XHJcbiAgY3Vyc29yOiAtd2Via2l0LXBvaW50ZXI7XHJcbiAgY3Vyc29yOiBwb2ludGVyO1xyXG59XHJcbm5hdiB1bCBpIHtcclxuICBmb250LXNpemU6IDI0cHg7XHJcbn1cclxubmF2IHVsIGEsIG5hdiB1bCBhOmhvdmVyLCBuYXYgdWwgYTphY3RpdmUsIG5hdiB1bCBhOnZpc2l0ZWQge1xyXG4gIHRleHQtZGVjb3JhdGlvbjogbm9uZTtcclxufVxyXG5cclxuLmljb24tc2l6ZSB7XHJcbiAgZm9udC1zaXplOiA0MHB4O1xyXG59XHJcblxyXG4uc2lkZS1tZW51IHtcclxuICB0b3A6IDBweDtcclxuICBsZWZ0OiAwcHg7XHJcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcclxuICBvdmVyZmxvdzogYXV0bztcclxuICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgY29sb3I6ICNDQ0M7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgzMCwgMzAsIDMwLCAwLjgpO1xyXG4gIGJvcmRlcjpzb2xpZCAxcHggIzk5OTtcclxuICBwYWRkaW5nOiAwcHg7XHJcbiAgaGVpZ2h0OiAxMDAlO1xyXG4gIHdpZHRoOiAzMDBweDtcclxufVxyXG5cclxuLm5ldHdvcmtJbmRpY2F0b3Ige1xyXG4gIGRpc3BsYXk6IG5vbmU7XHJcbiAgei1pbmRleDogOTk5OTtcclxuICBwb2ludGVyLWV2ZW50czogbm9uZTtcclxuICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgdG9wOiAzcHg7XHJcbiAgcmlnaHQ6IDNweDtcclxuICBoZWlnaHQ6IDMwcHg7XHJcbiAgd2lkdGg6IDMwcHg7XHJcbn1cclxuXHJcbi52aWJyYXRpb24tYW1pbmUge1xyXG4gIGFuaW1hdGlvbjogdmlicmF0aW9uIDAuMnMgaW5maW5pdGU7XHJcbn1cclxuXHJcbkBrZXlmcmFtZXMgdmlicmF0aW9uIHtcclxuICAwJSAgIHsgdHJhbnNmb3JtOiBzY2FsZSgxLjAsIDEuMCkgdHJhbnNsYXRlKDAlLCAwJSk7IH1cclxuICA1MCUgIHsgdHJhbnNmb3JtOiBzY2FsZSgxLjAyLCAwLjk1KSB0cmFuc2xhdGUoMCUsIDUlKTsgfVxyXG4gIDEwMCUgeyB0cmFuc2Zvcm06IHNjYWxlKDEuMCwgMS4wKSB0cmFuc2xhdGUoMCUsIDAlKTsgfVxyXG59XHJcbiJdfQ== */"] });
    return AppComponent;
}());

/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵsetClassMetadata"](AppComponent, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_1__["Component"],
        args: [{
                selector: 'app-root',
                templateUrl: './app.component.html',
                styleUrls: ['./app.component.css']
            }]
    }], function () { return [{ type: service_modal_service__WEBPACK_IMPORTED_MODULE_34__["ModalService"] }, { type: service_panel_service__WEBPACK_IMPORTED_MODULE_35__["PanelService"] }, { type: service_pointer_device_service__WEBPACK_IMPORTED_MODULE_37__["PointerDeviceService"] }, { type: service_chat_message_service__WEBPACK_IMPORTED_MODULE_38__["ChatMessageService"] }, { type: service_app_config_service__WEBPACK_IMPORTED_MODULE_39__["AppConfigService"] }, { type: service_save_data_service__WEBPACK_IMPORTED_MODULE_40__["SaveDataService"] }, { type: _ng_select_ng_select__WEBPACK_IMPORTED_MODULE_41__["NgSelectConfig"] }, { type: _angular_core__WEBPACK_IMPORTED_MODULE_1__["NgZone"] }]; }, { modalLayerViewContainerRef: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_1__["ViewChild"],
            args: ['modalLayer', { read: _angular_core__WEBPACK_IMPORTED_MODULE_1__["ViewContainerRef"], static: true }]
        }] }); })();
service_panel_service__WEBPACK_IMPORTED_MODULE_35__["PanelService"].UIPanelComponentClass = component_ui_panel_ui_panel_component__WEBPACK_IMPORTED_MODULE_32__["UIPanelComponent"];
service_context_menu_service__WEBPACK_IMPORTED_MODULE_33__["ContextMenuService"].ContextMenuComponentClass = component_context_menu_context_menu_component__WEBPACK_IMPORTED_MODULE_22__["ContextMenuComponent"];
service_modal_service__WEBPACK_IMPORTED_MODULE_34__["ModalService"].ModalComponentClass = component_modal_modal_component__WEBPACK_IMPORTED_MODULE_29__["ModalComponent"];


/***/ }),

/***/ "TaI1":
/*!********************************************************!*\
  !*** ./src/app/component/jukebox/jukebox.component.ts ***!
  \********************************************************/
/*! exports provided: JukeboxComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "JukeboxComponent", function() { return JukeboxComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "fXoL");
/* harmony import */ var _udonarium_core_file_storage_audio_player__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @udonarium/core/file-storage/audio-player */ "zeEm");
/* harmony import */ var _udonarium_core_file_storage_audio_storage__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @udonarium/core/file-storage/audio-storage */ "Prh6");
/* harmony import */ var _udonarium_core_file_storage_file_archiver__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @udonarium/core/file-storage/file-archiver */ "wBZT");
/* harmony import */ var _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @udonarium/core/synchronize-object/object-store */ "hm7o");
/* harmony import */ var _udonarium_core_system__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @udonarium/core/system */ "yNnI");
/* harmony import */ var component_cut_in_list_cut_in_list_component__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! component/cut-in-list/cut-in-list.component */ "SxCr");
/* harmony import */ var service_modal_service__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! service/modal.service */ "CE6K");
/* harmony import */ var service_panel_service__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! service/panel.service */ "M9xM");
/* harmony import */ var service_pointer_device_service__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! service/pointer-device.service */ "GPP8");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @angular/forms */ "3Pt+");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @angular/common */ "ofXK");













function JukeboxComponent_button_6_Template(rf, ctx) { if (rf & 1) {
    var _r4 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "button", 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function JukeboxComponent_button_6_Template_button_click_0_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r4); var ctx_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](); return ctx_r3.openCutInList(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](1, "cut in\u7DE8\u8F2F");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("disabled", 0);
} }
function JukeboxComponent_div_9_button_1_Template(rf, ctx) { if (rf & 1) {
    var _r14 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "button", 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function JukeboxComponent_div_9_button_1_Template_button_click_0_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r14); var audio_r5 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]().$implicit; var ctx_r12 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](); return ctx_r12.play(audio_r5); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](1, "\u8A66\u8074/\u64AD\u653E");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    var audio_r5 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]().$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("disabled", !audio_r5.isReady);
} }
function JukeboxComponent_div_9_button_2_Template(rf, ctx) { if (rf & 1) {
    var _r17 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "button", 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function JukeboxComponent_div_9_button_2_Template_button_click_0_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r17); var ctx_r16 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2); return ctx_r16.stop(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](1, "\u8A66\u8074/\u505C\u6B62");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    var audio_r5 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]().$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("disabled", !audio_r5.isReady);
} }
function JukeboxComponent_div_9_button_3_Template(rf, ctx) { if (rf & 1) {
    var _r21 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "button", 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function JukeboxComponent_div_9_button_3_Template_button_click_0_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r21); var audio_r5 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]().$implicit; var ctx_r19 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](); return ctx_r19.playBGM(audio_r5); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](1, "BGM/\u64AD\u653E");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    var audio_r5 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]().$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("disabled", !audio_r5.isReady);
} }
function JukeboxComponent_div_9_button_4_Template(rf, ctx) { if (rf & 1) {
    var _r25 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "button", 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function JukeboxComponent_div_9_button_4_Template_button_click_0_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r25); var audio_r5 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]().$implicit; var ctx_r23 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](); return ctx_r23.stopBGM(audio_r5); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](1, "BGM/\u505C\u6B62");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    var audio_r5 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]().$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("disabled", !audio_r5.isReady);
} }
function JukeboxComponent_div_9_span_5_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "span");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](1, "\u3010\u8A66\u8074\u4E2D\u3011");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} }
function JukeboxComponent_div_9_span_6_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "span");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](1, "\u3010BGM\u3011");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} }
function JukeboxComponent_div_9_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 10);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](1, JukeboxComponent_div_9_button_1_Template, 2, 1, "button", 1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](2, JukeboxComponent_div_9_button_2_Template, 2, 1, "button", 1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](3, JukeboxComponent_div_9_button_3_Template, 2, 1, "button", 1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](4, JukeboxComponent_div_9_button_4_Template, 2, 1, "button", 1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](5, JukeboxComponent_div_9_span_5_Template, 2, 0, "span", 3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](6, JukeboxComponent_div_9_span_6_Template, 2, 0, "span", 3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](7, "span");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](8);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](9, "br");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    var audio_r5 = ctx.$implicit;
    var ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", audio_r5 !== (ctx_r1.auditionPlayer == null ? null : ctx_r1.auditionPlayer.audio) || (ctx_r1.auditionPlayer == null ? null : ctx_r1.auditionPlayer.paused));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", audio_r5 === (ctx_r1.auditionPlayer == null ? null : ctx_r1.auditionPlayer.audio) && !(ctx_r1.auditionPlayer == null ? null : ctx_r1.auditionPlayer.paused));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", audio_r5 !== (ctx_r1.jukebox == null ? null : ctx_r1.jukebox.audio));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", audio_r5 === (ctx_r1.jukebox == null ? null : ctx_r1.jukebox.audio));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", audio_r5 === (ctx_r1.auditionPlayer == null ? null : ctx_r1.auditionPlayer.audio) && !(ctx_r1.auditionPlayer == null ? null : ctx_r1.auditionPlayer.paused));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", audio_r5 === (ctx_r1.jukebox == null ? null : ctx_r1.jukebox.audio));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate"](audio_r5.name);
} }
function JukeboxComponent_div_10_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](1, "\u4E0A\u50B3\u7684\u97F3\u6A02\u6A94\u6848\u5C07\u986F\u793A\u5728\u6B64\u8655\u3002");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} }
var JukeboxComponent = /** @class */ (function () {
    function JukeboxComponent(modalService, panelService, pointerDeviceService, ngZone) {
        this.modalService = modalService;
        this.panelService = panelService;
        this.pointerDeviceService = pointerDeviceService;
        this.ngZone = ngZone;
        this.auditionPlayer = new _udonarium_core_file_storage_audio_player__WEBPACK_IMPORTED_MODULE_1__["AudioPlayer"]();
        this.lazyUpdateTimer = null;
    }
    Object.defineProperty(JukeboxComponent.prototype, "volume", {
        get: function () { return _udonarium_core_file_storage_audio_player__WEBPACK_IMPORTED_MODULE_1__["AudioPlayer"].volume; },
        set: function (volume) { _udonarium_core_file_storage_audio_player__WEBPACK_IMPORTED_MODULE_1__["AudioPlayer"].volume = volume; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(JukeboxComponent.prototype, "auditionVolume", {
        get: function () { return _udonarium_core_file_storage_audio_player__WEBPACK_IMPORTED_MODULE_1__["AudioPlayer"].auditionVolume; },
        set: function (auditionVolume) { _udonarium_core_file_storage_audio_player__WEBPACK_IMPORTED_MODULE_1__["AudioPlayer"].auditionVolume = auditionVolume; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(JukeboxComponent.prototype, "audios", {
        get: function () { return _udonarium_core_file_storage_audio_storage__WEBPACK_IMPORTED_MODULE_2__["AudioStorage"].instance.audios.filter(function (audio) { return !audio.isHidden; }); },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(JukeboxComponent.prototype, "jukebox", {
        get: function () { return _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_4__["ObjectStore"].instance.get('Jukebox'); },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(JukeboxComponent.prototype, "cutInLauncher", {
        get: function () { return _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_4__["ObjectStore"].instance.get('CutInLauncher'); },
        enumerable: false,
        configurable: true
    });
    JukeboxComponent.prototype.ngOnInit = function () {
        var _this = this;
        Promise.resolve().then(function () { return _this.modalService.title = _this.panelService.title = 'ジュークボックス'; });
        this.auditionPlayer.volumeType = _udonarium_core_file_storage_audio_player__WEBPACK_IMPORTED_MODULE_1__["VolumeType"].AUDITION;
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_5__["EventSystem"].register(this)
            .on('*', function (event) {
            if (event.eventName.startsWith('FILE_'))
                _this.lazyNgZoneUpdate();
        });
    };
    JukeboxComponent.prototype.ngOnDestroy = function () {
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_5__["EventSystem"].unregister(this);
        this.stop();
    };
    JukeboxComponent.prototype.play = function (audio) {
        this.auditionPlayer.play(audio);
    };
    JukeboxComponent.prototype.stop = function () {
        this.auditionPlayer.stop();
    };
    JukeboxComponent.prototype.playBGM = function (audio) {
        //タグなしのBGM付きカットインはジュークボックスと同時に鳴らさないようにする
        //BGM駆動のためのインスタンスを別にしているため現状この処理で止める
        this.cutInLauncher.stopBlankTagCutIn();
        this.jukebox.play(audio.identifier, true);
    };
    JukeboxComponent.prototype.stopBGM = function (audio) {
        if (this.jukebox.audio === audio)
            this.jukebox.stop();
    };
    JukeboxComponent.prototype.handleFileSelect = function (event) {
        var input = event.target;
        var files = input.files;
        if (files.length)
            _udonarium_core_file_storage_file_archiver__WEBPACK_IMPORTED_MODULE_3__["FileArchiver"].instance.load(files);
        input.value = '';
    };
    JukeboxComponent.prototype.lazyNgZoneUpdate = function () {
        var _this = this;
        if (this.lazyUpdateTimer !== null)
            return;
        this.lazyUpdateTimer = setTimeout(function () {
            _this.lazyUpdateTimer = null;
            _this.ngZone.run(function () { });
        }, 100);
    };
    JukeboxComponent.prototype.openCutInList = function () {
        var coordinate = this.pointerDeviceService.pointers[0];
        var option = { left: coordinate.x + 25, top: coordinate.y + 25, width: 650, height: 700 };
        this.panelService.open(component_cut_in_list_cut_in_list_component__WEBPACK_IMPORTED_MODULE_6__["CutInListComponent"], option);
    };
    JukeboxComponent.ɵfac = function JukeboxComponent_Factory(t) { return new (t || JukeboxComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](service_modal_service__WEBPACK_IMPORTED_MODULE_7__["ModalService"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](service_panel_service__WEBPACK_IMPORTED_MODULE_8__["PanelService"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](service_pointer_device_service__WEBPACK_IMPORTED_MODULE_9__["PointerDeviceService"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["NgZone"])); };
    JukeboxComponent.ɵcmp = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineComponent"]({ type: JukeboxComponent, selectors: [["app-jukebox"]], decls: 30, vars: 5, consts: [["type", "range", "min", "0", "max", "1", "step", "0.01", 3, "ngModel", "ngModelChange"], [3, "disabled", "click", 4, "ngIf"], ["class", "box", 4, "ngFor", "ngForOf"], [4, "ngIf"], [1, "drop-zone"], [1, "material-icons", "large-font"], [1, "small-font"], ["type", "file", "multiple", "", "accept", "audio/*", 2, "display", "none", 3, "change"], [2, "font-size", "12px"], [3, "disabled", "click"], [1, "box"]], template: function JukeboxComponent_Template(rf, ctx) { if (rf & 1) {
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div");
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](1, "\u8A66\u8074\u97F3\u91CF\uFF1A");
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](2, "input", 0);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("ngModelChange", function JukeboxComponent_Template_input_ngModelChange_2_listener($event) { return ctx.auditionVolume = $event; });
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](3, "div");
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](4, "BGM\u97F3\u91CF\uFF1A");
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](5, "input", 0);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("ngModelChange", function JukeboxComponent_Template_input_ngModelChange_5_listener($event) { return ctx.volume = $event; });
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](6, JukeboxComponent_button_6_Template, 2, 1, "button", 1);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](7, "hr");
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](8, "div");
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](9, JukeboxComponent_div_9_Template, 10, 7, "div", 2);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](10, JukeboxComponent_div_10_Template, 2, 0, "div", 3);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](11, "label");
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](12, "div", 4);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](13, "div");
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](14, "i", 5);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](15, "playlist_add");
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](16, "div");
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](17, "\u5C07\u97F3\u6A02\u6A94\u6848\u62D6\u66F3\u5230\u9019\u88E1\u4E0A\u50B3");
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](18, "div", 6);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](19, "\u6216\u9EDE\u89E3\u9019\u88E1\u9078\u64C7\u6A94\u6848");
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](20, "input", 7);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("change", function JukeboxComponent_Template_input_change_20_listener($event) { return ctx.handleFileSelect($event); });
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](21, "div", 6);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](22, "br");
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](23, "\u4E00\u500B\u6A94\u6848\u6700\u592710MB");
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](24, "div", 8);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](25, "\u203B\u300C\u8A66\u807D\u300D\u53EA\u6703\u64AD\u653E\u7D66\u81EA\u5DF1\u4E00\u6B21\u3002");
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](26, "div", 8);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](27, "\u203B\u300CBGM\u300D\u6703\u628A\u97F3\u6A02\u64AD\u653E\u7D66\u6240\u6709\u623F\u9593\u6210\u54E1\u3002");
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](28, "div", 8);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](29, "\u203B\u73FE\u884C\u7248\u672C\u4E0D\u6703\u4FDD\u5B58\u97F3\u6A02\u5230ZIP\u88E1\u3002\uFF08\u6BCE\u6B21\u90FD\u8981\u91CD\u65B0\u4E0A\u50B3\uFF09");
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        } if (rf & 2) {
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngModel", ctx.auditionVolume);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngModel", ctx.volume);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", 1);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngForOf", ctx.audios);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx.audios.length < 1);
        } }, directives: [_angular_forms__WEBPACK_IMPORTED_MODULE_10__["RangeValueAccessor"], _angular_forms__WEBPACK_IMPORTED_MODULE_10__["DefaultValueAccessor"], _angular_forms__WEBPACK_IMPORTED_MODULE_10__["NgControlStatus"], _angular_forms__WEBPACK_IMPORTED_MODULE_10__["NgModel"], _angular_common__WEBPACK_IMPORTED_MODULE_11__["NgIf"], _angular_common__WEBPACK_IMPORTED_MODULE_11__["NgForOf"]], styles: [".drop-zone[_ngcontent-%COMP%] {\r\n  border: 2px dashed #555;\r\n  border-radius: 5px;\r\n  padding: 25px;\r\n  text-align: center;\r\n  font: 24px bold 'Vollkorn';\r\n  color: #444;\r\n  cursor: pointer;\r\n}\r\n\r\n.large-font[_ngcontent-%COMP%] {\r\n  font-size: 64px;\r\n}\r\n\r\n.small-font[_ngcontent-%COMP%] {\r\n  font-size: 12px;\r\n}\r\n\r\n.box[_ngcontent-%COMP%] {\r\n  border-bottom:1px dotted #888;\r\n}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImp1a2Vib3guY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLHVCQUF1QjtFQUd2QixrQkFBa0I7RUFDbEIsYUFBYTtFQUNiLGtCQUFrQjtFQUNsQiwwQkFBMEI7RUFDMUIsV0FBVztFQUNYLGVBQWU7QUFDakI7O0FBRUE7RUFDRSxlQUFlO0FBQ2pCOztBQUVBO0VBQ0UsZUFBZTtBQUNqQjs7QUFFQTtFQUNFLDZCQUE2QjtBQUMvQiIsImZpbGUiOiJqdWtlYm94LmNvbXBvbmVudC5jc3MiLCJzb3VyY2VzQ29udGVudCI6WyIuZHJvcC16b25lIHtcclxuICBib3JkZXI6IDJweCBkYXNoZWQgIzU1NTtcclxuICAtbW96LWJvcmRlci1yYWRpdXM6IDVweDtcclxuICAtd2Via2l0LWJvcmRlci1yYWRpdXM6IDVweDtcclxuICBib3JkZXItcmFkaXVzOiA1cHg7XHJcbiAgcGFkZGluZzogMjVweDtcclxuICB0ZXh0LWFsaWduOiBjZW50ZXI7XHJcbiAgZm9udDogMjRweCBib2xkICdWb2xsa29ybic7XHJcbiAgY29sb3I6ICM0NDQ7XHJcbiAgY3Vyc29yOiBwb2ludGVyO1xyXG59XHJcblxyXG4ubGFyZ2UtZm9udCB7XHJcbiAgZm9udC1zaXplOiA2NHB4O1xyXG59XHJcblxyXG4uc21hbGwtZm9udCB7XHJcbiAgZm9udC1zaXplOiAxMnB4O1xyXG59XHJcblxyXG4uYm94IHtcclxuICBib3JkZXItYm90dG9tOjFweCBkb3R0ZWQgIzg4ODtcclxufSJdfQ== */"] });
    return JukeboxComponent;
}());

/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](JukeboxComponent, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"],
        args: [{
                selector: 'app-jukebox',
                templateUrl: './jukebox.component.html',
                styleUrls: ['./jukebox.component.css']
            }]
    }], function () { return [{ type: service_modal_service__WEBPACK_IMPORTED_MODULE_7__["ModalService"] }, { type: service_panel_service__WEBPACK_IMPORTED_MODULE_8__["PanelService"] }, { type: service_pointer_device_service__WEBPACK_IMPORTED_MODULE_9__["PointerDeviceService"] }, { type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["NgZone"] }]; }, null); })();


/***/ }),

/***/ "TzEH":
/*!***********************************************!*\
  !*** ./src/app/service/coordinate.service.ts ***!
  \***********************************************/
/*! exports provided: CoordinateService */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CoordinateService", function() { return CoordinateService; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "fXoL");
/* harmony import */ var _udonarium_transform_transform__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @udonarium/transform/transform */ "tRmd");
/* harmony import */ var _pointer_device_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./pointer-device.service */ "GPP8");




var CoordinateService = /** @class */ (function () {
    function CoordinateService(pointerDeviceService) {
        this.pointerDeviceService = pointerDeviceService;
        this.tabletopOriginElement = document.body;
    }
    CoordinateService.prototype.convertToLocal = function (pointer, element) {
        if (element === void 0) { element = document.body; }
        var transformer = new _udonarium_transform_transform__WEBPACK_IMPORTED_MODULE_1__["Transform"](element);
        var ray = transformer.globalToLocal(pointer.x, pointer.y, pointer.z ? pointer.z : 0);
        transformer.clear();
        return { x: ray.x, y: ray.y, z: ray.z };
    };
    CoordinateService.prototype.convertToGlobal = function (pointer, element) {
        if (element === void 0) { element = document.body; }
        var transformer = new _udonarium_transform_transform__WEBPACK_IMPORTED_MODULE_1__["Transform"](element);
        var ray = transformer.localToGlobal(pointer.x, pointer.y, pointer.z ? pointer.z : 0);
        transformer.clear();
        return { x: ray.x, y: ray.y, z: ray.z };
    };
    CoordinateService.prototype.convertLocalToLocal = function (pointer, from, to) {
        var transformer = new _udonarium_transform_transform__WEBPACK_IMPORTED_MODULE_1__["Transform"](from);
        var local = transformer.globalToLocal(pointer.x, pointer.y, pointer.z ? pointer.z : 0);
        var ray = transformer.localToLocal(local.x, local.y, 0, to);
        transformer.clear();
        return { x: ray.x, y: ray.y, z: ray.z };
    };
    CoordinateService.prototype.calcTabletopLocalCoordinate = function (coordinate, target) {
        if (coordinate === void 0) { coordinate = { x: this.pointerDeviceService.pointers[0].x, y: this.pointerDeviceService.pointers[0].y, z: 0 }; }
        if (target === void 0) { target = this.pointerDeviceService.targetElement; }
        if (target.contains(this.tabletopOriginElement)) {
            coordinate = this.convertToLocal(coordinate, this.tabletopOriginElement);
            coordinate.z = 0;
        }
        else {
            coordinate = this.convertLocalToLocal(coordinate, target, this.tabletopOriginElement);
        }
        return { x: coordinate.x, y: coordinate.y, z: 0 < coordinate.z ? coordinate.z : 0 };
    };
    CoordinateService.ɵfac = function CoordinateService_Factory(t) { return new (t || CoordinateService)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](_pointer_device_service__WEBPACK_IMPORTED_MODULE_2__["PointerDeviceService"])); };
    CoordinateService.ɵprov = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineInjectable"]({ token: CoordinateService, factory: CoordinateService.ɵfac, providedIn: 'root' });
    return CoordinateService;
}());

/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](CoordinateService, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Injectable"],
        args: [{
                providedIn: 'root'
            }]
    }], function () { return [{ type: _pointer_device_service__WEBPACK_IMPORTED_MODULE_2__["PointerDeviceService"] }]; }, null); })();


/***/ }),

/***/ "Umgr":
/*!**************************************************************!*\
  !*** ./src/app/component/game-table/game-table.component.ts ***!
  \**************************************************************/
/*! exports provided: GameTableComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GameTableComponent", function() { return GameTableComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "fXoL");
/* harmony import */ var _udonarium_core_file_storage_image_file__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @udonarium/core/file-storage/image-file */ "FjwV");
/* harmony import */ var _udonarium_core_file_storage_image_storage__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @udonarium/core/file-storage/image-storage */ "JQpJ");
/* harmony import */ var _udonarium_core_system__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @udonarium/core/system */ "yNnI");
/* harmony import */ var _udonarium_game_table__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @udonarium/game-table */ "RDF6");
/* harmony import */ var component_game_table_setting_game_table_setting_component__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! component/game-table-setting/game-table-setting.component */ "zhae");
/* harmony import */ var directive_input_handler__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! directive/input-handler */ "96Ug");
/* harmony import */ var service_context_menu_service__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! service/context-menu.service */ "9FhF");
/* harmony import */ var _grid_line_render__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./grid-line-render */ "GEdf");
/* harmony import */ var _table_touch_gesture__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./table-touch-gesture */ "5d7p");
/* harmony import */ var service_pointer_device_service__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! service/pointer-device.service */ "GPP8");
/* harmony import */ var service_coordinate_service__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! service/coordinate.service */ "TzEH");
/* harmony import */ var service_image_service__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! service/image.service */ "Hvpu");
/* harmony import */ var service_tabletop_service__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! service/tabletop.service */ "Sdfd");
/* harmony import */ var service_tabletop_action_service__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! service/tabletop-action.service */ "AFBa");
/* harmony import */ var service_modal_service__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! service/modal.service */ "CE6K");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @angular/common */ "ofXK");
/* harmony import */ var component_terrain_terrain_component__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! component/terrain/terrain.component */ "4v+P");
/* harmony import */ var component_game_table_mask_game_table_mask_component__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! component/game-table-mask/game-table-mask.component */ "3v9A");
/* harmony import */ var component_text_note_text_note_component__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! component/text-note/text-note.component */ "7AbD");
/* harmony import */ var directive_tooltip_directive__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! directive/tooltip.directive */ "ts4F");
/* harmony import */ var component_card_stack_card_stack_component__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! component/card-stack/card-stack.component */ "tLw4");
/* harmony import */ var component_card_card_component__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! component/card/card.component */ "4fXm");
/* harmony import */ var component_dice_symbol_dice_symbol_component__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! component/dice-symbol/dice-symbol.component */ "FREB");
/* harmony import */ var component_game_character_game_character_component__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! component/game-character/game-character.component */ "AHLi");
/* harmony import */ var component_peer_cursor_peer_cursor_component__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! component/peer-cursor/peer-cursor.component */ "gfSO");
/* harmony import */ var pipe_safe_pipe__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! pipe/safe.pipe */ "6HCy");





























var _c0 = ["root"];
var _c1 = ["gameTable"];
var _c2 = ["gameObjects"];
var _c3 = ["gridCanvas"];
function GameTableComponent_terrain_11_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](0, "terrain", 17);
} if (rf & 2) {
    var terrain_r12 = ctx.$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("terrain", terrain_r12);
} }
function GameTableComponent_game_table_mask_12_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](0, "game-table-mask", 18);
} if (rf & 2) {
    var mask_r13 = ctx.$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("gameTableMask", mask_r13);
} }
var _c4 = function (a0) { return { "z-index": a0 }; };
function GameTableComponent_text_note_13_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](0, "text-note", 19);
} if (rf & 2) {
    var textNote_r14 = ctx.$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("textNote", textNote_r14)("appTooltip", textNote_r14)("ngStyle", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction1"](3, _c4, textNote_r14.zindex));
} }
var _c5 = function (a0, a1) { return { "z-index": a0, "transform": a1 }; };
function GameTableComponent_card_stack_14_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](0, "card-stack", 20);
} if (rf & 2) {
    var cardStack_r15 = ctx.$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("cardStack", cardStack_r15)("appTooltip", cardStack_r15)("ngStyle", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction2"](3, _c5, cardStack_r15.zindex, "translateZ(" + cardStack_r15.zindex * 0.001 + "px)"));
} }
function GameTableComponent_card_15_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](0, "card", 21);
} if (rf & 2) {
    var card_r16 = ctx.$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("card", card_r16)("appTooltip", card_r16)("ngStyle", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction2"](3, _c5, card_r16.zindex, "translateZ(" + card_r16.zindex * 0.001 + "px)"));
} }
function GameTableComponent_dice_symbol_16_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](0, "dice-symbol", 22);
} if (rf & 2) {
    var diceSymbol_r17 = ctx.$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("diceSymbol", diceSymbol_r17)("appTooltip", diceSymbol_r17);
} }
function GameTableComponent_game_character_17_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](0, "game-character", 23);
} if (rf & 2) {
    var character_r18 = ctx.$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("gameCharacter", character_r18)("appTooltip", character_r18);
} }
function GameTableComponent_peer_cursor_18_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](0, "peer-cursor", 24);
} if (rf & 2) {
    var cursor_r19 = ctx.$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("cursor", cursor_r19);
} }
var _c6 = function (a0, a1) { return [a0, a1]; };
var _c7 = function (a0) { return { "is-grabbing": a0 }; };
var Keyboard;
(function (Keyboard) {
    Keyboard["ArrowLeft"] = "ArrowLeft";
    Keyboard["ArrowUp"] = "ArrowUp";
    Keyboard["ArrowRight"] = "ArrowRight";
    Keyboard["ArrowDown"] = "ArrowDown";
})(Keyboard || (Keyboard = {}));
var GameTableComponent = /** @class */ (function () {
    function GameTableComponent(ngZone, contextMenuService, elementRef, pointerDeviceService, coordinateService, imageService, tabletopService, tabletopActionService, modalService) {
        this.ngZone = ngZone;
        this.contextMenuService = contextMenuService;
        this.elementRef = elementRef;
        this.pointerDeviceService = pointerDeviceService;
        this.coordinateService = coordinateService;
        this.imageService = imageService;
        this.tabletopService = tabletopService;
        this.tabletopActionService = tabletopActionService;
        this.modalService = modalService;
        this.isTransformMode = false;
        this.currentPositionX = 0;
        this.currentPositionY = 0;
        this.viewPotisonX = 100;
        this.viewPotisonY = 0;
        this.viewPotisonZ = 0;
        this.viewRotateX = 50;
        this.viewRotateY = 0;
        this.viewRotateZ = 10;
        this.buttonCode = 0;
        this.input = null;
        this.gesture = null;
    }
    Object.defineProperty(GameTableComponent.prototype, "tableSelecter", {
        get: function () { return this.tabletopService.tableSelecter; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(GameTableComponent.prototype, "currentTable", {
        get: function () { return this.tabletopService.currentTable; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(GameTableComponent.prototype, "tableImage", {
        get: function () {
            var file = _udonarium_core_file_storage_image_storage__WEBPACK_IMPORTED_MODULE_2__["ImageStorage"].instance.get(this.currentTable.imageIdentifier);
            return this.imageService.getSkeletonOr(file);
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(GameTableComponent.prototype, "backgroundImage", {
        get: function () {
            var file = _udonarium_core_file_storage_image_storage__WEBPACK_IMPORTED_MODULE_2__["ImageStorage"].instance.get(this.currentTable.backgroundImageIdentifier);
            return file ? file : _udonarium_core_file_storage_image_file__WEBPACK_IMPORTED_MODULE_1__["ImageFile"].Empty;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(GameTableComponent.prototype, "backgroundFilterType", {
        get: function () {
            return this.currentTable.backgroundFilterType;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(GameTableComponent.prototype, "isPointerDragging", {
        get: function () { return this.pointerDeviceService.isDragging; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(GameTableComponent.prototype, "characters", {
        get: function () { return this.tabletopService.characters; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(GameTableComponent.prototype, "tableMasks", {
        get: function () { return this.tabletopService.tableMasks; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(GameTableComponent.prototype, "cards", {
        get: function () { return this.tabletopService.cards; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(GameTableComponent.prototype, "cardStacks", {
        get: function () { return this.tabletopService.cardStacks; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(GameTableComponent.prototype, "terrains", {
        get: function () { return this.tabletopService.terrains; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(GameTableComponent.prototype, "textNotes", {
        get: function () { return this.tabletopService.textNotes; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(GameTableComponent.prototype, "diceSymbols", {
        get: function () { return this.tabletopService.diceSymbols; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(GameTableComponent.prototype, "peerCursors", {
        get: function () { return this.tabletopService.peerCursors; },
        enumerable: false,
        configurable: true
    });
    GameTableComponent.prototype.ngOnInit = function () {
        var _this = this;
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_3__["EventSystem"].register(this)
            .on('UPDATE_GAME_OBJECT', -1000, function (event) {
            if (event.data.identifier !== _this.currentTable.identifier && event.data.identifier !== _this.tableSelecter.identifier)
                return;
            console.log('UPDATE_GAME_OBJECT GameTableComponent ' + _this.currentTable.identifier);
            _this.setGameTableGrid(_this.currentTable.width, _this.currentTable.height, _this.currentTable.gridSize, _this.currentTable.gridType, _this.currentTable.gridColor);
        })
            .on('DRAG_LOCKED_OBJECT', function (event) {
            _this.isTransformMode = true;
            _this.pointerDeviceService.isDragging = false;
            var opacity = _this.tableSelecter.gridShow ? 1.0 : 0.0;
            _this.gridCanvas.nativeElement.style.opacity = opacity + '';
        })
            .on('FOCUS_TO_TABLETOP_COORDINATE', function (event) {
            setTimeout(function () {
                console.log("move table to focus (" + event.data.x + ", " + event.data.y + ")");
                _this.gameTable.nativeElement.style.transition = '0.2s ease-out';
                setTimeout(function () {
                    _this.gameTable.nativeElement.style.transition = null;
                }, 100);
                // 座標変換
                var centerX = _this.gridCanvas.nativeElement.clientWidth / 2;
                var centerY = _this.gridCanvas.nativeElement.clientHeight / 2;
                var movedX = event.data.x - centerX;
                var movedY = event.data.y - centerY;
                // z軸回転
                var rotateZRad = _this.viewRotateZ / 180 * Math.PI;
                var rotatedMovedX = movedX * Math.cos(rotateZRad) - movedY * Math.sin(rotateZRad);
                var zRotatedMovedY = movedX * Math.sin(rotateZRad) + movedY * Math.cos(rotateZRad);
                // x軸回転
                var rotateXRad = _this.viewRotateX / 180 * Math.PI;
                var rotatedMovedY = zRotatedMovedY * Math.cos(rotateXRad);
                var rotatedMovedZ = zRotatedMovedY * Math.sin(rotateXRad);
                // 移動
                _this.setTransform(100 - rotatedMovedX - _this.viewPotisonX, -rotatedMovedY - _this.viewPotisonY, -rotatedMovedZ - _this.viewPotisonZ, 0, 0, 0);
            }, 50);
        });
        this.tabletopActionService.makeDefaultTable();
        this.tabletopActionService.makeDefaultTabletopObjects();
        this.tabletopActionService.initAprilDiceImage();
    };
    GameTableComponent.prototype.ngAfterViewInit = function () {
        var _this = this;
        this.ngZone.runOutsideAngular(function () {
            _this.input = new directive_input_handler__WEBPACK_IMPORTED_MODULE_6__["InputHandler"](_this.elementRef.nativeElement, { capture: true });
            _this.initializeTableTouchGesture();
        });
        this.input.onStart = this.onInputStart.bind(this);
        this.input.onMove = this.onInputMove.bind(this);
        this.input.onEnd = this.onInputEnd.bind(this);
        this.cancelInput();
        this.setGameTableGrid(this.currentTable.width, this.currentTable.height, this.currentTable.gridSize, this.currentTable.gridType, this.currentTable.gridColor);
        this.setTransform(0, 0, 0, 0, 0, 0);
        this.coordinateService.tabletopOriginElement = this.gameObjects.nativeElement;
    };
    GameTableComponent.prototype.ngOnDestroy = function () {
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_3__["EventSystem"].unregister(this);
        this.input.destroy();
        this.gesture.destroy();
    };
    GameTableComponent.prototype.initializeTableTouchGesture = function () {
        this.gesture = new _table_touch_gesture__WEBPACK_IMPORTED_MODULE_9__["TableTouchGesture"](this.rootElementRef.nativeElement, this.ngZone);
        this.gesture.onstart = this.onTableTouchStart.bind(this);
        this.gesture.onend = this.onTableTouchEnd.bind(this);
        this.gesture.ongesture = this.onTableTouchGesture.bind(this);
        this.gesture.ontransform = this.onTableTouchTransform.bind(this);
    };
    GameTableComponent.prototype.onTableTouchStart = function () {
        this.input.cancel();
    };
    GameTableComponent.prototype.onTableTouchEnd = function () {
        this.cancelInput();
    };
    GameTableComponent.prototype.onTableTouchGesture = function () {
        this.cancelInput();
    };
    GameTableComponent.prototype.onTableTouchTransform = function (transformX, transformY, transformZ, rotateX, rotateY, rotateZ, event, srcEvent) {
        var _this = this;
        if (event === _table_touch_gesture__WEBPACK_IMPORTED_MODULE_9__["TableTouchGestureEvent"].PAN && (!this.isTransformMode || this.input.isGrabbing))
            return;
        if (!this.pointerDeviceService.isAllowedToOpenContextMenu && this.contextMenuService.isShow) {
            this.ngZone.run(function () { return _this.contextMenuService.close(); });
        }
        if (srcEvent.cancelable)
            srcEvent.preventDefault();
        //
        var scale = (1000 + Math.abs(this.viewPotisonZ)) / 1000;
        transformX *= scale;
        transformY *= scale;
        if (80 < rotateX + this.viewRotateX)
            rotateX += 80 - (rotateX + this.viewRotateX);
        if (rotateX + this.viewRotateX < 0)
            rotateX += 0 - (rotateX + this.viewRotateX);
        if (750 < transformZ + this.viewPotisonZ)
            transformZ += 750 - (transformZ + this.viewPotisonZ);
        this.setTransform(transformX, transformY, transformZ, rotateX, rotateY, rotateZ);
    };
    GameTableComponent.prototype.onInputStart = function (e) {
        this.currentPositionX = this.input.pointer.x;
        this.currentPositionY = this.input.pointer.y;
        if (e.target.contains(this.gameObjects.nativeElement) || e.button === 1 || e.button === 2) {
            this.isTransformMode = true;
        }
        else {
            this.isTransformMode = false;
            this.pointerDeviceService.isDragging = true;
            this.gridCanvas.nativeElement.style.opacity = 1.0 + '';
        }
        this.buttonCode = e.button;
        if (!document.activeElement.contains(e.target)) {
            this.removeSelectionRanges();
            this.removeFocus();
        }
    };
    GameTableComponent.prototype.onInputEnd = function (e) {
        this.cancelInput();
    };
    GameTableComponent.prototype.onInputMove = function (e) {
        var _this = this;
        if (!this.isTransformMode)
            return;
        var x = this.input.pointer.x;
        var y = this.input.pointer.y;
        var deltaX = x - this.currentPositionX;
        var deltaY = y - this.currentPositionY;
        var transformX = 0;
        var transformY = 0;
        var transformZ = 0;
        var rotateX = 0;
        var rotateY = 0;
        var rotateZ = 0;
        if (this.buttonCode === 2) {
            rotateZ = -deltaX / 5;
            rotateX = -deltaY / 5;
        }
        else {
            var scale = (1000 + Math.abs(this.viewPotisonZ)) / 1000;
            transformX = deltaX * scale;
            transformY = deltaY * scale;
        }
        if (!this.pointerDeviceService.isAllowedToOpenContextMenu && this.contextMenuService.isShow) {
            this.ngZone.run(function () { _this.contextMenuService.close(); });
        }
        this.currentPositionX = x;
        this.currentPositionY = y;
        if (e.cancelable)
            e.preventDefault();
        this.setTransform(transformX, transformY, transformZ, rotateX, rotateY, rotateZ);
    };
    GameTableComponent.prototype.cancelInput = function () {
        this.input.cancel();
        this.isTransformMode = true;
        this.pointerDeviceService.isDragging = false;
        var opacity = this.tableSelecter.gridShow ? 1.0 : 0.0;
        this.gridCanvas.nativeElement.style.opacity = opacity + '';
    };
    GameTableComponent.prototype.onWheel = function (e) {
        if (!this.isTransformMode)
            return;
        var pixelDeltaY = 0;
        switch (e.deltaMode) {
            case WheelEvent.DOM_DELTA_LINE:
                pixelDeltaY = e.deltaY * 16;
                break;
            case WheelEvent.DOM_DELTA_PAGE:
                pixelDeltaY = e.deltaY * window.innerHeight;
                break;
            default:
                pixelDeltaY = e.deltaY;
                break;
        }
        var transformX = 0;
        var transformY = 0;
        var transformZ = 0;
        var rotateX = 0;
        var rotateY = 0;
        var rotateZ = 0;
        transformZ = pixelDeltaY * -1.5;
        if (Math.pow(300, 2) < Math.pow(transformZ, 2))
            transformZ = Math.min(Math.max(transformZ, -300), 300);
        this.setTransform(transformX, transformY, transformZ, rotateX, rotateY, rotateZ);
    };
    GameTableComponent.prototype.onKeydown = function (e) {
        if (!this.isTransformMode || document.body !== document.activeElement)
            return;
        var transformX = 0;
        var transformY = 0;
        var transformZ = 0;
        var rotateX = 0;
        var rotateY = 0;
        var rotateZ = 0;
        var key = this.getKeyName(e);
        switch (key) {
            case Keyboard.ArrowLeft:
                if (e.shiftKey) {
                    rotateZ = -2;
                }
                else {
                    transformX = 10;
                }
                break;
            case Keyboard.ArrowUp:
                if (e.shiftKey) {
                    rotateX = -2;
                }
                else if (e.ctrlKey) {
                    transformZ = 150;
                }
                else {
                    transformY = 10;
                }
                break;
            case Keyboard.ArrowRight:
                if (e.shiftKey) {
                    rotateZ = 2;
                }
                else {
                    transformX = -10;
                }
                break;
            case Keyboard.ArrowDown:
                if (e.shiftKey) {
                    rotateX = 2;
                }
                else if (e.ctrlKey) {
                    transformZ = -150;
                }
                else {
                    transformY = -10;
                }
                break;
        }
        var isArrowKey = Keyboard[key] != null;
        if (isArrowKey)
            e.preventDefault();
        this.setTransform(transformX, transformY, transformZ, rotateX, rotateY, rotateZ);
    };
    GameTableComponent.prototype.onContextMenu = function (e) {
        var _this = this;
        if (!document.activeElement.contains(this.gameObjects.nativeElement))
            return;
        e.preventDefault();
        if (!this.pointerDeviceService.isAllowedToOpenContextMenu)
            return;
        var menuPosition = this.pointerDeviceService.pointers[0];
        var objectPosition = this.coordinateService.calcTabletopLocalCoordinate();
        var menuActions = [];
        Array.prototype.push.apply(menuActions, this.tabletopActionService.makeDefaultContextMenuActions(objectPosition));
        menuActions.push(service_context_menu_service__WEBPACK_IMPORTED_MODULE_7__["ContextMenuSeparator"]);
        menuActions.push({
            name: '盤面設定',
            action: function () {
                _this.modalService.open(component_game_table_setting_game_table_setting_component__WEBPACK_IMPORTED_MODULE_5__["GameTableSettingComponent"]);
            }
        });
        this.contextMenuService.open(menuPosition, menuActions, this.currentTable.name);
    };
    GameTableComponent.prototype.getKeyName = function (keyboard) {
        if (keyboard.key)
            return keyboard.key;
        switch (keyboard.keyCode) {
            case 37: return Keyboard.ArrowLeft;
            case 38: return Keyboard.ArrowUp;
            case 39: return Keyboard.ArrowRight;
            case 40: return Keyboard.ArrowDown;
            default: return '';
        }
    };
    GameTableComponent.prototype.setTransform = function (transformX, transformY, transformZ, rotateX, rotateY, rotateZ) {
        this.viewRotateX += rotateX;
        this.viewRotateY += rotateY;
        this.viewRotateZ += rotateZ;
        this.viewPotisonX += transformX;
        this.viewPotisonY += transformY;
        this.viewPotisonZ += transformZ;
        this.gameTable.nativeElement.style.transform = 'translateZ(' + this.viewPotisonZ + 'px) translateY(' + this.viewPotisonY + 'px) translateX(' + this.viewPotisonX + 'px) rotateY(' + this.viewRotateY + 'deg) rotateX(' + this.viewRotateX + 'deg) rotateZ(' + this.viewRotateZ + 'deg) ';
    };
    GameTableComponent.prototype.setGameTableGrid = function (width, height, gridSize, gridType, gridColor) {
        if (gridSize === void 0) { gridSize = 50; }
        if (gridType === void 0) { gridType = _udonarium_game_table__WEBPACK_IMPORTED_MODULE_4__["GridType"].SQUARE; }
        if (gridColor === void 0) { gridColor = '#000000e6'; }
        this.gameTable.nativeElement.style.width = width * gridSize + 'px';
        this.gameTable.nativeElement.style.height = height * gridSize + 'px';
        var render = new _grid_line_render__WEBPACK_IMPORTED_MODULE_8__["GridLineRender"](this.gridCanvas.nativeElement);
        render.render(width, height, gridSize, gridType, gridColor);
        var opacity = this.tableSelecter.gridShow ? 1.0 : 0.0;
        this.gridCanvas.nativeElement.style.opacity = opacity + '';
    };
    GameTableComponent.prototype.removeSelectionRanges = function () {
        var selection = window.getSelection();
        if (!selection.isCollapsed) {
            selection.removeAllRanges();
        }
    };
    GameTableComponent.prototype.removeFocus = function () {
        if (document.activeElement instanceof HTMLElement) {
            document.activeElement.blur();
        }
    };
    GameTableComponent.prototype.trackByGameObject = function (index, gameObject) {
        return gameObject.identifier;
    };
    GameTableComponent.ɵfac = function GameTableComponent_Factory(t) { return new (t || GameTableComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["NgZone"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](service_context_menu_service__WEBPACK_IMPORTED_MODULE_7__["ContextMenuService"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["ElementRef"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](service_pointer_device_service__WEBPACK_IMPORTED_MODULE_10__["PointerDeviceService"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](service_coordinate_service__WEBPACK_IMPORTED_MODULE_11__["CoordinateService"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](service_image_service__WEBPACK_IMPORTED_MODULE_12__["ImageService"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](service_tabletop_service__WEBPACK_IMPORTED_MODULE_13__["TabletopService"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](service_tabletop_action_service__WEBPACK_IMPORTED_MODULE_14__["TabletopActionService"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](service_modal_service__WEBPACK_IMPORTED_MODULE_15__["ModalService"])); };
    GameTableComponent.ɵcmp = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineComponent"]({ type: GameTableComponent, selectors: [["game-table"]], viewQuery: function GameTableComponent_Query(rf, ctx) { if (rf & 1) {
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵstaticViewQuery"](_c0, true);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵstaticViewQuery"](_c1, true);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵstaticViewQuery"](_c2, true);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵstaticViewQuery"](_c3, true);
        } if (rf & 2) {
            var _t = void 0;
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵqueryRefresh"](_t = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵloadQuery"]()) && (ctx.rootElementRef = _t.first);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵqueryRefresh"](_t = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵloadQuery"]()) && (ctx.gameTable = _t.first);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵqueryRefresh"](_t = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵloadQuery"]()) && (ctx.gameObjects = _t.first);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵqueryRefresh"](_t = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵloadQuery"]()) && (ctx.gridCanvas = _t.first);
        } }, hostBindings: function GameTableComponent_HostBindings(rf, ctx) { if (rf & 1) {
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("wheel", function GameTableComponent_wheel_HostBindingHandler($event) { return ctx.onWheel($event); })("keydown", function GameTableComponent_keydown_HostBindingHandler($event) { return ctx.onKeydown($event); }, false, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵresolveDocument"])("contextmenu", function GameTableComponent_contextmenu_HostBindingHandler($event) { return ctx.onContextMenu($event); });
        } }, decls: 19, vars: 33, consts: [[1, "background-image", "is-pointer-events-none", 3, "ngClass"], [1, "component", "is-fill", "is-perspective", 3, "ngClass"], ["root", ""], [1, "component-content", "is-fill", "is-3d"], ["gameTable", ""], ["id", "app-game-table", 1, "game-table", "table-image", "is-3d"], ["gameObjects", ""], [1, "grid-canvas", "is-fill", "is-pointer-events-none"], ["gridCanvas", ""], ["class", "is-3d", 3, "terrain", 4, "ngFor", "ngForOf", "ngForTrackBy"], ["class", "is-3d", 3, "gameTableMask", 4, "ngFor", "ngForOf", "ngForTrackBy"], ["class", "is-3d", 3, "textNote", "appTooltip", "ngStyle", 4, "ngFor", "ngForOf", "ngForTrackBy"], ["class", "is-3d", 3, "cardStack", "appTooltip", "ngStyle", 4, "ngFor", "ngForOf", "ngForTrackBy"], ["class", "is-3d", 3, "card", "appTooltip", "ngStyle", 4, "ngFor", "ngForOf", "ngForTrackBy"], ["class", "is-3d", 3, "diceSymbol", "appTooltip", 4, "ngFor", "ngForOf", "ngForTrackBy"], ["class", "is-3d", 3, "gameCharacter", "appTooltip", 4, "ngFor", "ngForOf", "ngForTrackBy"], ["class", "is-3d", 3, "cursor", 4, "ngFor", "ngForOf", "ngForTrackBy"], [1, "is-3d", 3, "terrain"], [1, "is-3d", 3, "gameTableMask"], [1, "is-3d", 3, "textNote", "appTooltip", "ngStyle"], [1, "is-3d", 3, "cardStack", "appTooltip", "ngStyle"], [1, "is-3d", 3, "card", "appTooltip", "ngStyle"], [1, "is-3d", 3, "diceSymbol", "appTooltip"], [1, "is-3d", 3, "gameCharacter", "appTooltip"], [1, "is-3d", 3, "cursor"]], template: function GameTableComponent_Template(rf, ctx) { if (rf & 1) {
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 0);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](1, "safe");
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](2, "div", 1, 2);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](4, "div", 3, 4);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](6, "div", 5, 6);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](8, "safe");
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](9, "canvas", 7, 8);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](11, GameTableComponent_terrain_11_Template, 1, 1, "terrain", 9);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](12, GameTableComponent_game_table_mask_12_Template, 1, 1, "game-table-mask", 10);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](13, GameTableComponent_text_note_13_Template, 1, 5, "text-note", 11);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](14, GameTableComponent_card_stack_14_Template, 1, 6, "card-stack", 12);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](15, GameTableComponent_card_15_Template, 1, 6, "card", 13);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](16, GameTableComponent_dice_symbol_16_Template, 1, 2, "dice-symbol", 14);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](17, GameTableComponent_game_character_17_Template, 1, 2, "game-character", 15);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](18, GameTableComponent_peer_cursor_18_Template, 1, 1, "peer-cursor", 16);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        } if (rf & 2) {
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵstyleProp"]("background-image", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind2"](1, 22, "url(" + ctx.backgroundImage.url + ")", "style"));
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngClass", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction2"](28, _c6, ctx.backgroundFilterType ? "is-filter" : "", ctx.backgroundFilterType));
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngClass", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction1"](31, _c7, ctx.isPointerDragging));
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](4);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵstyleProp"]("background-image", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind2"](8, 25, "url(" + ctx.tableImage.url + ")", "style"));
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](5);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngForOf", ctx.terrains)("ngForTrackBy", ctx.trackByGameObject);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngForOf", ctx.tableMasks)("ngForTrackBy", ctx.trackByGameObject);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngForOf", ctx.textNotes)("ngForTrackBy", ctx.trackByGameObject);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngForOf", ctx.cardStacks)("ngForTrackBy", ctx.trackByGameObject);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngForOf", ctx.cards)("ngForTrackBy", ctx.trackByGameObject);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngForOf", ctx.diceSymbols)("ngForTrackBy", ctx.trackByGameObject);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngForOf", ctx.characters)("ngForTrackBy", ctx.trackByGameObject);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngForOf", ctx.peerCursors)("ngForTrackBy", ctx.trackByGameObject);
        } }, directives: [_angular_common__WEBPACK_IMPORTED_MODULE_16__["NgClass"], _angular_common__WEBPACK_IMPORTED_MODULE_16__["NgForOf"], component_terrain_terrain_component__WEBPACK_IMPORTED_MODULE_17__["TerrainComponent"], component_game_table_mask_game_table_mask_component__WEBPACK_IMPORTED_MODULE_18__["GameTableMaskComponent"], component_text_note_text_note_component__WEBPACK_IMPORTED_MODULE_19__["TextNoteComponent"], directive_tooltip_directive__WEBPACK_IMPORTED_MODULE_20__["TooltipDirective"], _angular_common__WEBPACK_IMPORTED_MODULE_16__["NgStyle"], component_card_stack_card_stack_component__WEBPACK_IMPORTED_MODULE_21__["CardStackComponent"], component_card_card_component__WEBPACK_IMPORTED_MODULE_22__["CardComponent"], component_dice_symbol_dice_symbol_component__WEBPACK_IMPORTED_MODULE_23__["DiceSymbolComponent"], component_game_character_game_character_component__WEBPACK_IMPORTED_MODULE_24__["GameCharacterComponent"], component_peer_cursor_peer_cursor_component__WEBPACK_IMPORTED_MODULE_25__["PeerCursorComponent"]], pipes: [pipe_safe_pipe__WEBPACK_IMPORTED_MODULE_26__["SafePipe"]], styles: [".is-grabbing[_ngcontent-%COMP%] {\r\n  cursor: grabbing;\r\n}\r\n\r\n.is-perspective[_ngcontent-%COMP%] {\r\n  perspective: 1000px;\r\n}\r\n\r\n.is-fill[_ngcontent-%COMP%] {\r\n  display: block;\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  bottom: 0;\r\n  right: 0;\r\n  margin: auto;\r\n}\r\n\r\n.is-3d[_ngcontent-%COMP%] {\r\n  transform-style: preserve-3d;\r\n  -webkit-backface-visibility: hidden;\r\n          backface-visibility: hidden;\r\n  position: absolute;\r\n}\r\n\r\n.is-pointer-events-none[_ngcontent-%COMP%] {\r\n  pointer-events: none;\r\n}\r\n\r\n.component[_ngcontent-%COMP%] {\r\n  -webkit-user-select: none;\r\n  user-select: none;\r\n  -moz-user-drag: none;\r\n  -webkit-user-drag: none;\r\n\r\n  touch-action: manipulation;\r\n\r\n  height: 100%;\r\n  width: 100%;\r\n\r\n  overflow: hidden;\r\n}\r\n\r\n.component-content[_ngcontent-%COMP%] {\r\n  height: 2000px;\r\n  width: 2000px;\r\n}\r\n\r\n.grid-canvas[_ngcontent-%COMP%] {\r\n  opacity: 0.0;\r\n  transform: translateZ(0.15px);\r\n  transition: 0.3s ease-out;\r\n\r\n  -webkit-backface-visibility: hidden;\r\n\r\n          backface-visibility: hidden;\r\n}\r\n\r\n.game-table[_ngcontent-%COMP%] {\r\n  height: 100%;\r\n  width: 100%;\r\n}\r\n\r\n.table-image[_ngcontent-%COMP%] {\r\n  -webkit-backface-visibility: hidden;\r\n          backface-visibility: hidden;\r\n  position: absolute;\r\n  height: 100%;\r\n  width: 100%;\r\n  background-repeat: no-repeat;\r\n  background-size: 100% 100%;\r\n}\r\n\r\n.background-image[_ngcontent-%COMP%] {\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  bottom: 0;\r\n  right: 0;\r\n  margin: -5px;\r\n  background-repeat: no-repeat;\r\n  background-position: center;\r\n  background-size: cover;\r\n}\r\n\r\n.background-image.is-filter[_ngcontent-%COMP%] {\r\n  will-change: filter;\r\n}\r\n\r\n.background-image.is-filter.white[_ngcontent-%COMP%] {\r\n  filter: blur(5px);\r\n}\r\n\r\n.background-image.is-filter.black[_ngcontent-%COMP%] {\r\n  filter: blur(5px);\r\n}\r\n\r\n.background-image.is-filter[_ngcontent-%COMP%]::after {\r\n  display: block;\r\n  content: '';\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n\r\n.background-image.is-filter.white[_ngcontent-%COMP%]::after {\r\n  background-color: hsl(0, 0%, 97%);\r\n  filter: opacity(0.2);\r\n}\r\n\r\n.background-image.is-filter.black[_ngcontent-%COMP%]::after {\r\n  background-color: hsl(0, 0%, 10%);\r\n  filter: opacity(0.3);\r\n}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImdhbWUtdGFibGUuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUdFLGdCQUFnQjtBQUNsQjs7QUFFQTtFQUVFLG1CQUFtQjtBQUNyQjs7QUFFQTtFQUNFLGNBQWM7RUFDZCxrQkFBa0I7RUFDbEIsTUFBTTtFQUNOLE9BQU87RUFDUCxTQUFTO0VBQ1QsUUFBUTtFQUNSLFlBQVk7QUFDZDs7QUFFQTtFQUVFLDRCQUE0QjtFQUM1QixtQ0FBMkI7VUFBM0IsMkJBQTJCO0VBQzNCLGtCQUFrQjtBQUNwQjs7QUFFQTtFQUNFLG9CQUFvQjtBQUN0Qjs7QUFFQTtFQUVFLHlCQUF5QjtFQUN6QixpQkFBaUI7RUFDakIsb0JBQW9CO0VBQ3BCLHVCQUF1Qjs7RUFFdkIsMEJBQTBCOztFQUUxQixZQUFZO0VBQ1osV0FBVzs7RUFFWCxnQkFBZ0I7QUFDbEI7O0FBRUE7RUFDRSxjQUFjO0VBQ2QsYUFBYTtBQUNmOztBQUVBO0VBQ0UsWUFBWTtFQUNaLDZCQUE2QjtFQUk3Qix5QkFBeUI7O0VBRXpCLG1DQUEyQjs7VUFBM0IsMkJBQTJCO0FBQzdCOztBQUVBO0VBQ0UsWUFBWTtFQUNaLFdBQVc7QUFDYjs7QUFFQTtFQUNFLG1DQUEyQjtVQUEzQiwyQkFBMkI7RUFDM0Isa0JBQWtCO0VBQ2xCLFlBQVk7RUFDWixXQUFXO0VBQ1gsNEJBQTRCO0VBQzVCLDBCQUEwQjtBQUM1Qjs7QUFFQTtFQUNFLGtCQUFrQjtFQUNsQixNQUFNO0VBQ04sT0FBTztFQUNQLFNBQVM7RUFDVCxRQUFRO0VBQ1IsWUFBWTtFQUNaLDRCQUE0QjtFQUM1QiwyQkFBMkI7RUFDM0Isc0JBQXNCO0FBQ3hCOztBQUVBO0VBQ0UsbUJBQW1CO0FBQ3JCOztBQUVBO0VBQ0UsaUJBQWlCO0FBQ25COztBQUVBO0VBQ0UsaUJBQWlCO0FBQ25COztBQUVBO0VBQ0UsY0FBYztFQUNkLFdBQVc7RUFDWCxXQUFXO0VBQ1gsWUFBWTtBQUNkOztBQUVBO0VBQ0UsaUNBQWlDO0VBQ2pDLG9CQUFvQjtBQUN0Qjs7QUFFQTtFQUNFLGlDQUFpQztFQUNqQyxvQkFBb0I7QUFDdEIiLCJmaWxlIjoiZ2FtZS10YWJsZS5jb21wb25lbnQuY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLmlzLWdyYWJiaW5nIHtcclxuICBjdXJzb3I6IC1tb3otZ3JhYmJpbmc7XHJcbiAgY3Vyc29yOiAtd2Via2l0LWdyYWJiaW5nO1xyXG4gIGN1cnNvcjogZ3JhYmJpbmc7XHJcbn1cclxuXHJcbi5pcy1wZXJzcGVjdGl2ZSB7XHJcbiAgLXdlYmtpdC1wZXJzcGVjdGl2ZTogMTAwMHB4O1xyXG4gIHBlcnNwZWN0aXZlOiAxMDAwcHg7XHJcbn1cclxuXHJcbi5pcy1maWxsIHtcclxuICBkaXNwbGF5OiBibG9jaztcclxuICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgdG9wOiAwO1xyXG4gIGxlZnQ6IDA7XHJcbiAgYm90dG9tOiAwO1xyXG4gIHJpZ2h0OiAwO1xyXG4gIG1hcmdpbjogYXV0bztcclxufVxyXG5cclxuLmlzLTNkIHtcclxuICAtd2Via2l0LXRyYW5zZm9ybS1zdHlsZTogcHJlc2VydmUtM2Q7XHJcbiAgdHJhbnNmb3JtLXN0eWxlOiBwcmVzZXJ2ZS0zZDtcclxuICBiYWNrZmFjZS12aXNpYmlsaXR5OiBoaWRkZW47XHJcbiAgcG9zaXRpb246IGFic29sdXRlO1xyXG59XHJcblxyXG4uaXMtcG9pbnRlci1ldmVudHMtbm9uZSB7XHJcbiAgcG9pbnRlci1ldmVudHM6IG5vbmU7XHJcbn1cclxuXHJcbi5jb21wb25lbnQge1xyXG4gIC1tb3otdXNlci1zZWxlY3Q6IG5vbmU7XHJcbiAgLXdlYmtpdC11c2VyLXNlbGVjdDogbm9uZTtcclxuICB1c2VyLXNlbGVjdDogbm9uZTtcclxuICAtbW96LXVzZXItZHJhZzogbm9uZTtcclxuICAtd2Via2l0LXVzZXItZHJhZzogbm9uZTtcclxuXHJcbiAgdG91Y2gtYWN0aW9uOiBtYW5pcHVsYXRpb247XHJcblxyXG4gIGhlaWdodDogMTAwJTtcclxuICB3aWR0aDogMTAwJTtcclxuXHJcbiAgb3ZlcmZsb3c6IGhpZGRlbjtcclxufVxyXG5cclxuLmNvbXBvbmVudC1jb250ZW50IHtcclxuICBoZWlnaHQ6IDIwMDBweDtcclxuICB3aWR0aDogMjAwMHB4O1xyXG59XHJcblxyXG4uZ3JpZC1jYW52YXMge1xyXG4gIG9wYWNpdHk6IDAuMDtcclxuICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVooMC4xNXB4KTtcclxuICAtd2Via2l0LXRyYW5zaXRpb246IDAuM3MgZWFzZS1vdXQ7XHJcbiAgLW1vei10cmFuc2l0aW9uOiAwLjNzIGVhc2Utb3V0O1xyXG4gIC1vLXRyYW5zaXRpb246IDAuM3MgZWFzZS1vdXQ7XHJcbiAgdHJhbnNpdGlvbjogMC4zcyBlYXNlLW91dDtcclxuXHJcbiAgYmFja2ZhY2UtdmlzaWJpbGl0eTogaGlkZGVuO1xyXG59XHJcblxyXG4uZ2FtZS10YWJsZSB7XHJcbiAgaGVpZ2h0OiAxMDAlO1xyXG4gIHdpZHRoOiAxMDAlO1xyXG59XHJcblxyXG4udGFibGUtaW1hZ2Uge1xyXG4gIGJhY2tmYWNlLXZpc2liaWxpdHk6IGhpZGRlbjtcclxuICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgaGVpZ2h0OiAxMDAlO1xyXG4gIHdpZHRoOiAxMDAlO1xyXG4gIGJhY2tncm91bmQtcmVwZWF0OiBuby1yZXBlYXQ7XHJcbiAgYmFja2dyb3VuZC1zaXplOiAxMDAlIDEwMCU7XHJcbn1cclxuXHJcbi5iYWNrZ3JvdW5kLWltYWdlIHtcclxuICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgdG9wOiAwO1xyXG4gIGxlZnQ6IDA7XHJcbiAgYm90dG9tOiAwO1xyXG4gIHJpZ2h0OiAwO1xyXG4gIG1hcmdpbjogLTVweDtcclxuICBiYWNrZ3JvdW5kLXJlcGVhdDogbm8tcmVwZWF0O1xyXG4gIGJhY2tncm91bmQtcG9zaXRpb246IGNlbnRlcjtcclxuICBiYWNrZ3JvdW5kLXNpemU6IGNvdmVyO1xyXG59XHJcblxyXG4uYmFja2dyb3VuZC1pbWFnZS5pcy1maWx0ZXIge1xyXG4gIHdpbGwtY2hhbmdlOiBmaWx0ZXI7XHJcbn1cclxuXHJcbi5iYWNrZ3JvdW5kLWltYWdlLmlzLWZpbHRlci53aGl0ZSB7XHJcbiAgZmlsdGVyOiBibHVyKDVweCk7XHJcbn1cclxuXHJcbi5iYWNrZ3JvdW5kLWltYWdlLmlzLWZpbHRlci5ibGFjayB7XHJcbiAgZmlsdGVyOiBibHVyKDVweCk7XHJcbn1cclxuXHJcbi5iYWNrZ3JvdW5kLWltYWdlLmlzLWZpbHRlcjo6YWZ0ZXIge1xyXG4gIGRpc3BsYXk6IGJsb2NrO1xyXG4gIGNvbnRlbnQ6ICcnO1xyXG4gIHdpZHRoOiAxMDAlO1xyXG4gIGhlaWdodDogMTAwJTtcclxufVxyXG5cclxuLmJhY2tncm91bmQtaW1hZ2UuaXMtZmlsdGVyLndoaXRlOjphZnRlciB7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogaHNsKDAsIDAlLCA5NyUpO1xyXG4gIGZpbHRlcjogb3BhY2l0eSgwLjIpO1xyXG59XHJcblxyXG4uYmFja2dyb3VuZC1pbWFnZS5pcy1maWx0ZXIuYmxhY2s6OmFmdGVyIHtcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiBoc2woMCwgMCUsIDEwJSk7XHJcbiAgZmlsdGVyOiBvcGFjaXR5KDAuMyk7XHJcbn1cclxuIl19 */"] });
    return GameTableComponent;
}());

/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](GameTableComponent, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"],
        args: [{
                selector: 'game-table',
                templateUrl: './game-table.component.html',
                styleUrls: ['./game-table.component.css'],
            }]
    }], function () { return [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["NgZone"] }, { type: service_context_menu_service__WEBPACK_IMPORTED_MODULE_7__["ContextMenuService"] }, { type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ElementRef"] }, { type: service_pointer_device_service__WEBPACK_IMPORTED_MODULE_10__["PointerDeviceService"] }, { type: service_coordinate_service__WEBPACK_IMPORTED_MODULE_11__["CoordinateService"] }, { type: service_image_service__WEBPACK_IMPORTED_MODULE_12__["ImageService"] }, { type: service_tabletop_service__WEBPACK_IMPORTED_MODULE_13__["TabletopService"] }, { type: service_tabletop_action_service__WEBPACK_IMPORTED_MODULE_14__["TabletopActionService"] }, { type: service_modal_service__WEBPACK_IMPORTED_MODULE_15__["ModalService"] }]; }, { rootElementRef: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"],
            args: ['root', { static: true }]
        }], gameTable: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"],
            args: ['gameTable', { static: true }]
        }], gameObjects: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"],
            args: ['gameObjects', { static: true }]
        }], gridCanvas: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"],
            args: ['gridCanvas', { static: true }]
        }], onWheel: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["HostListener"],
            args: ['wheel', ['$event']]
        }], onKeydown: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["HostListener"],
            args: ['document:keydown', ['$event']]
        }], onContextMenu: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["HostListener"],
            args: ['contextmenu', ['$event']]
        }] }); })();


/***/ }),

/***/ "Uvtn":
/*!**********************************************!*\
  !*** ./src/app/service/save-data.service.ts ***!
  \**********************************************/
/*! exports provided: SaveDataService */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SaveDataService", function() { return SaveDataService; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "mrSG");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "fXoL");
/* harmony import */ var _udonarium_chat_tab_list__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @udonarium/chat-tab-list */ "YZvQ");
/* harmony import */ var _udonarium_core_file_storage_file_archiver__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @udonarium/core/file-storage/file-archiver */ "wBZT");
/* harmony import */ var _udonarium_core_file_storage_image_file__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @udonarium/core/file-storage/image-file */ "FjwV");
/* harmony import */ var _udonarium_core_file_storage_image_storage__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @udonarium/core/file-storage/image-storage */ "JQpJ");
/* harmony import */ var _udonarium_core_file_storage_mime_type__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @udonarium/core/file-storage/mime-type */ "NVMP");
/* harmony import */ var _udonarium_core_system_util_promise_queue__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @udonarium/core/system/util/promise-queue */ "w5+g");
/* harmony import */ var _udonarium_core_system_util_xml_util__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @udonarium/core/system/util/xml-util */ "cfGu");
/* harmony import */ var _udonarium_data_summary_setting__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @udonarium/data-summary-setting */ "zP96");
/* harmony import */ var _udonarium_room__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @udonarium/room */ "Dmu7");
/* harmony import */ var file_saver__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! file-saver */ "Iab2");
/* harmony import */ var file_saver__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(file_saver__WEBPACK_IMPORTED_MODULE_11__);
/* harmony import */ var vkbeautify__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! vkbeautify */ "NH6c");
/* harmony import */ var vkbeautify__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(vkbeautify__WEBPACK_IMPORTED_MODULE_12__);
/* harmony import */ var _udonarium_image_tag_list__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @udonarium/image-tag-list */ "xrta");













//本家PR #92より


var SaveDataService = /** @class */ (function () {
    function SaveDataService(ngZone) {
        this.ngZone = ngZone;
    }
    SaveDataService.prototype.saveRoomAsync = function (fileName, updateCallback) {
        var _this = this;
        if (fileName === void 0) { fileName = 'ルームデータ'; }
        return SaveDataService.queue.add(function (resolve, reject) { return resolve(_this._saveRoomAsync(fileName, updateCallback)); });
    };
    SaveDataService.prototype._saveRoomAsync = function (fileName, updateCallback) {
        var e_1, _a;
        if (fileName === void 0) { fileName = 'ルームデータ'; }
        var files = [];
        var roomXml = this.convertToXml(new _udonarium_room__WEBPACK_IMPORTED_MODULE_10__["Room"]());
        var chatXml = this.convertToXml(_udonarium_chat_tab_list__WEBPACK_IMPORTED_MODULE_2__["ChatTabList"].instance);
        var summarySetting = this.convertToXml(_udonarium_data_summary_setting__WEBPACK_IMPORTED_MODULE_9__["DataSummarySetting"].instance);
        files.push(new File([roomXml], 'data.xml', { type: 'text/plain' }));
        files.push(new File([chatXml], 'chat.xml', { type: 'text/plain' }));
        files.push(new File([summarySetting], 'summary.xml', { type: 'text/plain' }));
        //本家PR #92より
        //    files = files.concat(this.searchImageFiles(roomXml));
        //    files = files.concat(this.searchImageFiles(chatXml));
        var images = [];
        images = images.concat(this.searchImageFiles(roomXml));
        images = images.concat(this.searchImageFiles(chatXml));
        try {
            for (var images_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(images), images_1_1 = images_1.next(); !images_1_1.done; images_1_1 = images_1.next()) {
                var image = images_1_1.value;
                if (image.state === _udonarium_core_file_storage_image_file__WEBPACK_IMPORTED_MODULE_4__["ImageState"].COMPLETE) {
                    files.push(new File([image.blob], image.identifier + '.' + _udonarium_core_file_storage_mime_type__WEBPACK_IMPORTED_MODULE_6__["MimeType"].extension(image.blob.type), { type: image.blob.type }));
                }
            }
        }
        catch (e_1_1) { e_1 = { error: e_1_1 }; }
        finally {
            try {
                if (images_1_1 && !images_1_1.done && (_a = images_1.return)) _a.call(images_1);
            }
            finally { if (e_1) throw e_1.error; }
        }
        var imageTagXml = this.convertToXml(_udonarium_image_tag_list__WEBPACK_IMPORTED_MODULE_13__["ImageTagList"].create(images));
        files.push(new File([imageTagXml], 'imagetag.xml', { type: 'text/plain' }));
        return this.saveAsync(files, this.appendTimestamp(fileName), updateCallback);
    };
    SaveDataService.prototype.saveGameObjectAsync = function (gameObject, fileName, updateCallback) {
        var _this = this;
        if (fileName === void 0) { fileName = 'xml_data'; }
        return SaveDataService.queue.add(function (resolve, reject) { return resolve(_this._saveGameObjectAsync(gameObject, fileName, updateCallback)); });
    };
    SaveDataService.prototype._saveGameObjectAsync = function (gameObject, fileName, updateCallback) {
        var e_2, _a;
        if (fileName === void 0) { fileName = 'xml_data'; }
        var files = [];
        var xml = this.convertToXml(gameObject);
        files.push(new File([xml], 'data.xml', { type: 'text/plain' }));
        //本家PR #92より
        //    files = files.concat(this.searchImageFiles(xml));
        var images = [];
        images = images.concat(this.searchImageFiles(xml));
        try {
            for (var images_2 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(images), images_2_1 = images_2.next(); !images_2_1.done; images_2_1 = images_2.next()) {
                var image = images_2_1.value;
                if (image.state === _udonarium_core_file_storage_image_file__WEBPACK_IMPORTED_MODULE_4__["ImageState"].COMPLETE) {
                    files.push(new File([image.blob], image.identifier + '.' + _udonarium_core_file_storage_mime_type__WEBPACK_IMPORTED_MODULE_6__["MimeType"].extension(image.blob.type), { type: image.blob.type }));
                }
            }
        }
        catch (e_2_1) { e_2 = { error: e_2_1 }; }
        finally {
            try {
                if (images_2_1 && !images_2_1.done && (_a = images_2.return)) _a.call(images_2);
            }
            finally { if (e_2) throw e_2.error; }
        }
        var imageTagXml = this.convertToXml(_udonarium_image_tag_list__WEBPACK_IMPORTED_MODULE_13__["ImageTagList"].create(images));
        files.push(new File([imageTagXml], 'imagetag.xml', { type: 'text/plain' }));
        return this.saveAsync(files, this.appendTimestamp(fileName), updateCallback);
    };
    SaveDataService.prototype.saveAsync = function (files, zipName, updateCallback) {
        var _this = this;
        var progresPercent = -1;
        return _udonarium_core_file_storage_file_archiver__WEBPACK_IMPORTED_MODULE_3__["FileArchiver"].instance.saveAsync(files, zipName, function (meta) {
            var percent = meta.percent | 0;
            if (percent <= progresPercent)
                return;
            progresPercent = percent;
            _this.ngZone.run(function () { return updateCallback(progresPercent); });
        });
    };
    SaveDataService.prototype.convertToXml = function (gameObject) {
        var xmlDeclaration = '<?xml version="1.0" encoding="UTF-8"?>';
        //    return xmlDeclaration + '\n' + gameObject.toXml();
        return xmlDeclaration + '\n' + vkbeautify__WEBPACK_IMPORTED_MODULE_12__["xml"](gameObject.toXml(), 2);
    };
    //本家PR #92より
    //  private searchImageFiles(xml: string): File[] {
    SaveDataService.prototype.searchImageFiles = function (xml) {
        //
        var xmlElement = _udonarium_core_system_util_xml_util__WEBPACK_IMPORTED_MODULE_8__["XmlUtil"].xml2element(xml);
        //本家PR #92より
        //    let files: File[] = [];
        var files = [];
        //
        if (!xmlElement)
            return files;
        var images = {};
        var imageElements = xmlElement.ownerDocument.querySelectorAll('*[type="image"]');
        for (var i = 0; i < imageElements.length; i++) {
            var identifier = imageElements[i].innerHTML;
            images[identifier] = _udonarium_core_file_storage_image_storage__WEBPACK_IMPORTED_MODULE_5__["ImageStorage"].instance.get(identifier);
        }
        imageElements = xmlElement.ownerDocument.querySelectorAll('*[imageIdentifier], *[backgroundImageIdentifier]');
        for (var i = 0; i < imageElements.length; i++) {
            var identifier = imageElements[i].getAttribute('imageIdentifier');
            if (identifier)
                images[identifier] = _udonarium_core_file_storage_image_storage__WEBPACK_IMPORTED_MODULE_5__["ImageStorage"].instance.get(identifier);
            var backgroundImageIdentifier = imageElements[i].getAttribute('backgroundImageIdentifier');
            if (backgroundImageIdentifier)
                images[backgroundImageIdentifier] = _udonarium_core_file_storage_image_storage__WEBPACK_IMPORTED_MODULE_5__["ImageStorage"].instance.get(backgroundImageIdentifier);
        }
        for (var identifier in images) {
            var image = images[identifier];
            //本家PR #92より
            //      if (image && image.state === ImageState.COMPLETE) {
            //        files.push(new File([image.blob], image.identifier + '.' + MimeType.extension(image.blob.type), { type: image.blob.type }));
            //      }
            if (image) {
                files.push(image);
            }
        }
        return files;
    };
    SaveDataService.prototype.saveHtmlChatLog = function (chatTab, fileName) {
        //    let files: File[] = [];
        var text = chatTab.logHtml();
        var blob = new Blob([text], { type: "text/plain;charset=utf-8" });
        Object(file_saver__WEBPACK_IMPORTED_MODULE_11__["saveAs"])(blob, fileName + ".html");
    };
    SaveDataService.prototype.saveHtmlChatLogAll = function (fileName) {
        //    let files: File[] = [];
        var text = _udonarium_chat_tab_list__WEBPACK_IMPORTED_MODULE_2__["ChatTabList"].instance.logHtml();
        var blob = new Blob([text], { type: "text/plain;charset=utf-8" });
        Object(file_saver__WEBPACK_IMPORTED_MODULE_11__["saveAs"])(blob, fileName + ".html");
    };
    SaveDataService.prototype.appendTimestamp = function (fileName) {
        var date = new Date();
        var year = date.getFullYear();
        var month = ('00' + (date.getMonth() + 1)).slice(-2);
        var day = ('00' + date.getDate()).slice(-2);
        var hours = ('00' + date.getHours()).slice(-2);
        var minutes = ('00' + date.getMinutes()).slice(-2);
        return fileName + ("_" + year + "-" + month + "-" + day + "_" + hours + minutes);
    };
    SaveDataService.queue = new _udonarium_core_system_util_promise_queue__WEBPACK_IMPORTED_MODULE_7__["PromiseQueue"]('SaveDataServiceQueue');
    SaveDataService.ɵfac = function SaveDataService_Factory(t) { return new (t || SaveDataService)(_angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵinject"](_angular_core__WEBPACK_IMPORTED_MODULE_1__["NgZone"])); };
    SaveDataService.ɵprov = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdefineInjectable"]({ token: SaveDataService, factory: SaveDataService.ɵfac, providedIn: 'root' });
    return SaveDataService;
}());

/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵsetClassMetadata"](SaveDataService, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_1__["Injectable"],
        args: [{
                providedIn: 'root'
            }]
    }], function () { return [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_1__["NgZone"] }]; }, null); })();


/***/ }),

/***/ "Uxye":
/*!******************************************************************************************!*\
  !*** ./src/app/component/game-character-buff-view/game-character-buff-view.component.ts ***!
  \******************************************************************************************/
/*! exports provided: GameCharacterBuffViewComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GameCharacterBuffViewComponent", function() { return GameCharacterBuffViewComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "fXoL");
/* harmony import */ var service_panel_service__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! service/panel.service */ "M9xM");
/* harmony import */ var service_modal_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! service/modal.service */ "CE6K");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/common */ "ofXK");
/* harmony import */ var component_game_data_element_buff_game_data_element_buff_component__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! component/game-data-element-buff/game-data-element-buff.component */ "JKO1");






function GameCharacterBuffViewComponent_ng_container_0_ng_container_2_div_2_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 4);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](1, "div", 5);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    var childElement_r3 = ctx.$implicit;
    var ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("gameDataElement", childElement_r3)("isEdit", ctx_r2.isEdit)("isPieceMode", false);
} }
function GameCharacterBuffViewComponent_ng_container_0_ng_container_2_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "div", 2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](2, GameCharacterBuffViewComponent_ng_container_0_ng_container_2_div_2_Template, 2, 3, "div", 3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngForOf", ctx_r1.character.buffDataElement.children);
} }
function GameCharacterBuffViewComponent_ng_container_0_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "div", 1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](2, GameCharacterBuffViewComponent_ng_container_0_ng_container_2_Template, 3, 1, "ng-container", 0);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r0.character.buffDataElement);
} }
var GameCharacterBuffViewComponent = /** @class */ (function () {
    function GameCharacterBuffViewComponent(panelService, modalService) {
        this.panelService = panelService;
        this.modalService = modalService;
        //  @Input() title: string = '';
        this.character = null;
    }
    GameCharacterBuffViewComponent.prototype.ngOnInit = function () {
        /*
            Promise.resolve().then(() => {
              this.panelService.title = this.title;
              if (this.modalService.option && this.modalService.option.title != null) {
                this.modalService.title = this.modalService.option.title ? this.modalService.option.title : '';
                this.text = this.modalService.option.text ? this.modalService.option.text : '';
              }
            });
        */
    };
    GameCharacterBuffViewComponent.ɵfac = function GameCharacterBuffViewComponent_Factory(t) { return new (t || GameCharacterBuffViewComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](service_panel_service__WEBPACK_IMPORTED_MODULE_1__["PanelService"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](service_modal_service__WEBPACK_IMPORTED_MODULE_2__["ModalService"])); };
    GameCharacterBuffViewComponent.ɵcmp = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineComponent"]({ type: GameCharacterBuffViewComponent, selectors: [["game-character-buff-view"]], inputs: { character: "character" }, decls: 1, vars: 1, consts: [[4, "ngIf"], [1, "controller"], [1, "table"], ["class", "flex-item", 4, "ngFor", "ngForOf"], [1, "flex-item"], ["game-data-element-buff", "", 1, "table-row", 3, "gameDataElement", "isEdit", "isPieceMode"]], template: function GameCharacterBuffViewComponent_Template(rf, ctx) { if (rf & 1) {
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](0, GameCharacterBuffViewComponent_ng_container_0_Template, 3, 1, "ng-container", 0);
        } if (rf & 2) {
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx.character);
        } }, directives: [_angular_common__WEBPACK_IMPORTED_MODULE_3__["NgIf"], _angular_common__WEBPACK_IMPORTED_MODULE_3__["NgForOf"], component_game_data_element_buff_game_data_element_buff_component__WEBPACK_IMPORTED_MODULE_4__["GameDataElementBuffComponent"]], styles: [".text[_ngcontent-%COMP%] {\r\n  font-family: -apple-system, BlinkMacSystemFont, \"Helvetica Neue\", Verdana, Meiryo, sans-serif;\r\n  font-size: 12px;\r\n}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImdhbWUtY2hhcmFjdGVyLWJ1ZmYtdmlldy5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UsNkZBQTZGO0VBQzdGLGVBQWU7QUFDakIiLCJmaWxlIjoiZ2FtZS1jaGFyYWN0ZXItYnVmZi12aWV3LmNvbXBvbmVudC5jc3MiLCJzb3VyY2VzQ29udGVudCI6WyIudGV4dCB7XHJcbiAgZm9udC1mYW1pbHk6IC1hcHBsZS1zeXN0ZW0sIEJsaW5rTWFjU3lzdGVtRm9udCwgXCJIZWx2ZXRpY2EgTmV1ZVwiLCBWZXJkYW5hLCBNZWlyeW8sIHNhbnMtc2VyaWY7XHJcbiAgZm9udC1zaXplOiAxMnB4O1xyXG59XHJcblxyXG4iXX0= */"] });
    return GameCharacterBuffViewComponent;
}());

/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](GameCharacterBuffViewComponent, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"],
        args: [{
                selector: 'game-character-buff-view',
                templateUrl: './game-character-buff-view.component.html',
                styleUrls: ['./game-character-buff-view.component.css']
            }]
    }], function () { return [{ type: service_panel_service__WEBPACK_IMPORTED_MODULE_1__["PanelService"] }, { type: service_modal_service__WEBPACK_IMPORTED_MODULE_2__["ModalService"] }]; }, { character: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }] }); })();


/***/ }),

/***/ "VnuA":
/*!**********************************************************!*\
  !*** ./src/app/component/ui-panel/ui-panel.component.ts ***!
  \**********************************************************/
/*! exports provided: UIPanelComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "UIPanelComponent", function() { return UIPanelComponent; });
/* harmony import */ var _angular_animations__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/animations */ "R0Ic");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "fXoL");
/* harmony import */ var service_panel_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! service/panel.service */ "M9xM");
/* harmony import */ var service_pointer_device_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! service/pointer-device.service */ "GPP8");
/* harmony import */ var directive_draggable_directive__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! directive/draggable.directive */ "z2Us");
/* harmony import */ var directive_resizable_directive__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! directive/resizable.directive */ "pCHt");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @angular/common */ "ofXK");
/* harmony import */ var component_chat_tachie_img_chat_tachie_img_component__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! component/chat-tachie-img/chat-tachie-img.component */ "/FZI");










var _c0 = ["draggablePanel"];
var _c1 = ["scrollablePanel"];
var _c2 = ["titleBar"];
var _c3 = ["content"];
function UIPanelComponent_ng_container_15_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelement"](1, "chat-tachie-img", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("chatTabidentifier", ctx_r2.panelService.chatTab.identifier)("isTilteTop", 1)("dispByMouse", ctx_r2.tachieDispByMouse);
} }
var _c4 = function (a0) { return { "pointer-events-none": a0 }; };
var _c5 = function (a0) { return { "padding": a0 }; };
var _c6 = ["*"];
//
var UIPanelComponent = /** @class */ (function () {
    function UIPanelComponent(panelService, pointerDeviceService) {
        this.panelService = panelService;
        this.pointerDeviceService = pointerDeviceService;
        this.preLeft = 0;
        this.preTop = 0;
        this.preWidth = 100;
        this.preHeight = 100;
        this.isFullScreen = false;
        this.isMinimized = false;
        this.tachieDispByMouse = true;
    }
    Object.defineProperty(UIPanelComponent.prototype, "title", {
        get: function () { return this.panelService.title; },
        set: function (title) { this.panelService.title = title; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(UIPanelComponent.prototype, "left", {
        get: function () { return this.panelService.left; },
        set: function (left) { this.panelService.left = left; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(UIPanelComponent.prototype, "top", {
        get: function () { return this.panelService.top; },
        set: function (top) { this.panelService.top = top; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(UIPanelComponent.prototype, "width", {
        get: function () { return this.panelService.width; },
        set: function (width) { this.panelService.width = width; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(UIPanelComponent.prototype, "height", {
        get: function () { return this.panelService.height; },
        set: function (height) { this.panelService.height = height; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(UIPanelComponent.prototype, "isPointerDragging", {
        get: function () { return this.pointerDeviceService.isDragging; },
        enumerable: false,
        configurable: true
    });
    UIPanelComponent.prototype.showTachie = function (flag) {
        this.tachieDispByMouse = flag;
    };
    UIPanelComponent.prototype.ngOnInit = function () {
        this.panelService.scrollablePanel = this.scrollablePanel.nativeElement;
        /*
            EventSystem.register(this)
              .on('CUT_IN_PANEL_POS_CHANGE', event => {
        //        console.log('EVENT:CUT_IN_PANEL_POS_CHANGE :' + this.title);
                if( this.isCutIn ){
                  if( event.data.cutInIdentifier == this.panelService.cutInIdentifier && ( this.panelService.cutInIdentifier.length > 0 ) ){
                    
                    console.log('EVENT:CUT_IN_PANEL_POS_CHANGE >movePanel()');
                    console.log( 'left:' + event.data.left + ' top:' + event.data.top + ' width:'+ event.data.width + ' height:'+ event.data.height);
                    this.movePanel( event.data.left , event.data.top , event.data.width , event.data.height );
                  }
                }
              });
        */
    };
    /*
      movePanel( left : number , top : number , width : number , height : number){
          let panel = this.draggablePanel.nativeElement;
    
          this.left = left;
          this.top = top;
          this.width = width;
          this.height = height;
    
          panel.style.left = this.left + 'px';
          panel.style.top = this.top + 'px';
          panel.style.width = this.width + 'px';
          panel.style.height = this.height + 'px';
    
      }
    */
    UIPanelComponent.prototype.toggleMinimize = function () {
        if (this.isFullScreen)
            return;
        var body = this.scrollablePanel.nativeElement;
        var panel = this.draggablePanel.nativeElement;
        if (this.isMinimized) {
            this.isMinimized = false;
            body.style.display = null;
            this.height = this.preHeight;
        }
        else {
            this.preHeight = panel.offsetHeight;
            this.isMinimized = true;
            body.style.display = 'none';
            this.height = this.titleBar.nativeElement.offsetHeight;
        }
    };
    UIPanelComponent.prototype.toggleFullScreen = function () {
        if (this.isMinimized)
            return;
        var panel = this.draggablePanel.nativeElement;
        if (panel.offsetLeft <= 0
            && panel.offsetTop <= 0
            && panel.offsetWidth >= window.innerWidth
            && panel.offsetHeight >= window.innerHeight) {
            this.isFullScreen = false;
        }
        else {
            this.isFullScreen = true;
        }
        if (this.isFullScreen) {
            this.preLeft = panel.offsetLeft;
            this.preTop = panel.offsetTop;
            this.preWidth = panel.offsetWidth;
            this.preHeight = panel.offsetHeight;
            this.left = 0;
            this.top = 0;
            this.width = window.innerWidth;
            this.height = window.innerHeight;
            panel.style.left = this.left + 'px';
            panel.style.top = this.top + 'px';
            panel.style.width = this.width + 'px';
            panel.style.height = this.height + 'px';
        }
        else {
            this.left = this.preLeft;
            this.top = this.preTop;
            this.width = this.preWidth;
            this.height = this.preHeight;
        }
    };
    Object.defineProperty(UIPanelComponent.prototype, "padding_", {
        get: function () {
            if (this.panelService.isCutIn)
                return '0px';
            else
                return '8px';
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(UIPanelComponent.prototype, "isCutIn", {
        get: function () {
            return this.panelService.isCutIn;
        },
        enumerable: false,
        configurable: true
    });
    UIPanelComponent.prototype.close = function () {
        if (this.panelService)
            this.panelService.close();
    };
    UIPanelComponent.prototype.backGroundSetting = function (isWhiteLog) {
        //    if( isWhiteLog )
        if (0)
            {}
        //      return "background: linear-gradient(-30deg, rgba(240,240,240, 0.9), rgba(240, 240, 240, 0.9));"
        else
            return "background: linear-gradient(-30deg, rgba(240,218,189, 0.9), rgba(255, 244, 232, 0.9));";
    };
    UIPanelComponent.ɵfac = function UIPanelComponent_Factory(t) { return new (t || UIPanelComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdirectiveInject"](service_panel_service__WEBPACK_IMPORTED_MODULE_2__["PanelService"]), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdirectiveInject"](service_pointer_device_service__WEBPACK_IMPORTED_MODULE_3__["PointerDeviceService"])); };
    UIPanelComponent.ɵcmp = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdefineComponent"]({ type: UIPanelComponent, selectors: [["ui-panel"]], viewQuery: function UIPanelComponent_Query(rf, ctx) { if (rf & 1) {
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵstaticViewQuery"](_c0, true);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵstaticViewQuery"](_c1, true);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵstaticViewQuery"](_c2, true);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵstaticViewQuery"](_c3, true, _angular_core__WEBPACK_IMPORTED_MODULE_1__["ViewContainerRef"]);
        } if (rf & 2) {
            var _t = void 0;
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵqueryRefresh"](_t = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵloadQuery"]()) && (ctx.draggablePanel = _t.first);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵqueryRefresh"](_t = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵloadQuery"]()) && (ctx.scrollablePanel = _t.first);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵqueryRefresh"](_t = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵloadQuery"]()) && (ctx.titleBar = _t.first);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵqueryRefresh"](_t = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵloadQuery"]()) && (ctx.content = _t.first);
        } }, inputs: { title: "title", left: "left", top: "top", width: "width", height: "height" }, features: [_angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵProvidersFeature"]([
                service_panel_service__WEBPACK_IMPORTED_MODULE_2__["PanelService"],
            ])], ngContentSelectors: _c6, decls: 21, vars: 21, consts: [["appDraggable", "", "appResizable", "", 1, "draggable-panel", 3, "ngClass", "resizable.disable", "draggable.stack", "mouseenter", "mouseleave"], ["draggablePanel", ""], [1, "title"], ["titleBar", ""], [1, "title-button"], [3, "disabled", "click"], [1, "material-icons", 2, "font-size", "14px"], [3, "click"], [4, "ngIf"], [1, "scrollable-panel", 3, "ngStyle"], ["scrollablePanel", ""], ["content", ""], [3, "chatTabidentifier", "isTilteTop", "dispByMouse"]], template: function UIPanelComponent_Template(rf, ctx) { if (rf & 1) {
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵprojectionDef"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "div", 0, 1);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("mouseenter", function UIPanelComponent_Template_div_mouseenter_0_listener() { return ctx.showTachie(true); })("mouseleave", function UIPanelComponent_Template_div_mouseleave_0_listener() { return ctx.showTachie(false); });
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](2, "div", 2, 3);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](4, "div", 4);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](5, "button", 5);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("click", function UIPanelComponent_Template_button_click_5_listener() { return ctx.toggleMinimize(); });
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](6, "i", 6);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](7, "minimize");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](8, "button", 5);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("click", function UIPanelComponent_Template_button_click_8_listener() { return ctx.toggleFullScreen(); });
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](9, "i", 6);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](10, "fullscreen");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](11, "button", 7);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("click", function UIPanelComponent_Template_button_click_11_listener() { return ctx.close(); });
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](12, "i", 6);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](13, "close");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](14);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](15, UIPanelComponent_ng_container_15_Template, 2, 3, "ng-container", 8);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](16, "div", 9, 10);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵprojection"](18);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelement"](19, "div", null, 11);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
        } if (rf & 2) {
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵstyleProp"]("left", ctx.left, "px")("top", ctx.top, "px")("width", ctx.width, "px")("height", ctx.height, "px");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("@flyInOut", "in")("ngClass", _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpureFunction1"](17, _c4, ctx.isPointerDragging))("resizable.disable", ctx.isMinimized || ctx.isFullScreen)("draggable.stack", ".draggable-panel");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](5);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("disabled", ctx.isFullScreen);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](3);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("disabled", ctx.isMinimized);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](6);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtextInterpolate1"](" ", ctx.panelService.title, " ");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", ctx.panelService.chatTab);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngStyle", _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpureFunction1"](19, _c5, ctx.padding_));
        } }, directives: [directive_draggable_directive__WEBPACK_IMPORTED_MODULE_4__["DraggableDirective"], directive_resizable_directive__WEBPACK_IMPORTED_MODULE_5__["ResizableDirective"], _angular_common__WEBPACK_IMPORTED_MODULE_6__["NgClass"], _angular_common__WEBPACK_IMPORTED_MODULE_6__["NgIf"], _angular_common__WEBPACK_IMPORTED_MODULE_6__["NgStyle"], component_chat_tachie_img_chat_tachie_img_component__WEBPACK_IMPORTED_MODULE_7__["ChatTachieImageComponent"]], styles: [".draggable-panel[_ngcontent-%COMP%] {\r\n  box-sizing: border-box;\r\n  overflow: visible;\r\n  position: absolute;\r\n\r\n  color: #444;\r\n  background: linear-gradient(-30deg, rgba(240,218,189, 0.9), rgba(255, 244, 232, 0.9));\r\n  border: solid 1px #999;\r\n\r\n  padding: 0px;\r\n  top: 200px;\r\n\r\n  height: 200px;\r\n  width: 300px;\r\n  max-height: 100%;\r\n  max-width: 100%;\r\n}\r\n\r\n.scrollable-panel[_ngcontent-%COMP%] {\r\n  box-sizing: border-box;\r\n  overflow: auto;\r\n  position: absolute;\r\n  top: 25px;\r\n  bottom: 0;\r\n  width: 100%;\r\n  padding: 8px;\r\n  overscroll-behavior: contain;\r\n  -webkit-overflow-scrolling: touch;\r\n}\r\n\r\n.cut-in--panel[_ngcontent-%COMP%] {\r\n  box-sizing: border-box;\r\n  overflow: auto;\r\n  position: absolute;\r\n  top: 25px;\r\n  bottom: 0;\r\n  width: 100%;\r\n  padding: 0px;\r\n  overscroll-behavior: contain; \r\n\r\n}\r\n\r\n.title[_ngcontent-%COMP%] {\r\n  overflow: hidden;\r\n  white-space: nowrap;\r\n  box-sizing: border-box;\r\n  font-size: 12px;\r\n  height: 25px;\r\n  padding: 2px 5px;\r\n  width: 100%;\r\n  background-color: #555;\r\n  color: #CCC;\r\n  -webkit-user-select: none;\r\n          user-select: none;\r\n}\r\n\r\n.title-button[_ngcontent-%COMP%] {\r\n  position: absolute;\r\n  right: 0;\r\n  top: 0;\r\n}\r\n\r\n.title[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] {\r\n  background: none;\r\n  border: none;\r\n  border-radius: 0;\r\n  outline: none;\r\n  color: #CCC;\r\n}\r\n\r\n.title[_ngcontent-%COMP%]   button[disabled][_ngcontent-%COMP%] {\r\n  opacity: 0.3;\r\n}\r\n\r\n.pointer-events-none[_ngcontent-%COMP%] {\r\n  pointer-events: none;\r\n}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVpLXBhbmVsLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxzQkFBc0I7RUFDdEIsaUJBQWlCO0VBQ2pCLGtCQUFrQjs7RUFFbEIsV0FBVztFQUNYLHFGQUFxRjtFQUNyRixzQkFBc0I7O0VBRXRCLFlBQVk7RUFDWixVQUFVOztFQUVWLGFBQWE7RUFDYixZQUFZO0VBQ1osZ0JBQWdCO0VBQ2hCLGVBQWU7QUFDakI7O0FBRUE7RUFDRSxzQkFBc0I7RUFDdEIsY0FBYztFQUNkLGtCQUFrQjtFQUNsQixTQUFTO0VBQ1QsU0FBUztFQUNULFdBQVc7RUFDWCxZQUFZO0VBQ1osNEJBQTRCO0VBQzVCLGlDQUFpQztBQUNuQzs7QUFFQTtFQUNFLHNCQUFzQjtFQUN0QixjQUFjO0VBQ2Qsa0JBQWtCO0VBQ2xCLFNBQVM7RUFDVCxTQUFTO0VBQ1QsV0FBVztFQUNYLFlBQVk7RUFDWiw0QkFBNEI7QUFDOUIsd0NBQXdDO0FBQ3hDOztBQUVBO0VBQ0UsZ0JBQWdCO0VBQ2hCLG1CQUFtQjtFQUNuQixzQkFBc0I7RUFDdEIsZUFBZTtFQUNmLFlBQVk7RUFDWixnQkFBZ0I7RUFDaEIsV0FBVztFQUNYLHNCQUFzQjtFQUN0QixXQUFXO0VBQ1gseUJBQWlCO1VBQWpCLGlCQUFpQjtBQUNuQjs7QUFFQTtFQUNFLGtCQUFrQjtFQUNsQixRQUFRO0VBQ1IsTUFBTTtBQUNSOztBQUVBO0VBQ0UsZ0JBQWdCO0VBQ2hCLFlBQVk7RUFDWixnQkFBZ0I7RUFDaEIsYUFBYTtFQUNiLFdBQVc7QUFDYjs7QUFFQTtFQUNFLFlBQVk7QUFDZDs7QUFFQTtFQUNFLG9CQUFvQjtBQUN0QiIsImZpbGUiOiJ1aS1wYW5lbC5jb21wb25lbnQuY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLmRyYWdnYWJsZS1wYW5lbCB7XHJcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcclxuICBvdmVyZmxvdzogdmlzaWJsZTtcclxuICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcblxyXG4gIGNvbG9yOiAjNDQ0O1xyXG4gIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCgtMzBkZWcsIHJnYmEoMjQwLDIxOCwxODksIDAuOSksIHJnYmEoMjU1LCAyNDQsIDIzMiwgMC45KSk7XHJcbiAgYm9yZGVyOiBzb2xpZCAxcHggIzk5OTtcclxuXHJcbiAgcGFkZGluZzogMHB4O1xyXG4gIHRvcDogMjAwcHg7XHJcblxyXG4gIGhlaWdodDogMjAwcHg7XHJcbiAgd2lkdGg6IDMwMHB4O1xyXG4gIG1heC1oZWlnaHQ6IDEwMCU7XHJcbiAgbWF4LXdpZHRoOiAxMDAlO1xyXG59XHJcblxyXG4uc2Nyb2xsYWJsZS1wYW5lbCB7XHJcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcclxuICBvdmVyZmxvdzogYXV0bztcclxuICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgdG9wOiAyNXB4O1xyXG4gIGJvdHRvbTogMDtcclxuICB3aWR0aDogMTAwJTtcclxuICBwYWRkaW5nOiA4cHg7XHJcbiAgb3ZlcnNjcm9sbC1iZWhhdmlvcjogY29udGFpbjtcclxuICAtd2Via2l0LW92ZXJmbG93LXNjcm9sbGluZzogdG91Y2g7XHJcbn1cclxuXHJcbi5jdXQtaW4tLXBhbmVsIHtcclxuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xyXG4gIG92ZXJmbG93OiBhdXRvO1xyXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcclxuICB0b3A6IDI1cHg7XHJcbiAgYm90dG9tOiAwO1xyXG4gIHdpZHRoOiAxMDAlO1xyXG4gIHBhZGRpbmc6IDBweDtcclxuICBvdmVyc2Nyb2xsLWJlaGF2aW9yOiBjb250YWluOyBcclxuLyogIC13ZWJraXQtb3ZlcmZsb3ctc2Nyb2xsaW5nOiB0b3VjaDsgKi9cclxufVxyXG5cclxuLnRpdGxlIHtcclxuICBvdmVyZmxvdzogaGlkZGVuO1xyXG4gIHdoaXRlLXNwYWNlOiBub3dyYXA7XHJcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcclxuICBmb250LXNpemU6IDEycHg7XHJcbiAgaGVpZ2h0OiAyNXB4O1xyXG4gIHBhZGRpbmc6IDJweCA1cHg7XHJcbiAgd2lkdGg6IDEwMCU7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogIzU1NTtcclxuICBjb2xvcjogI0NDQztcclxuICB1c2VyLXNlbGVjdDogbm9uZTtcclxufVxyXG5cclxuLnRpdGxlLWJ1dHRvbiB7XHJcbiAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gIHJpZ2h0OiAwO1xyXG4gIHRvcDogMDtcclxufVxyXG5cclxuLnRpdGxlIGJ1dHRvbiB7XHJcbiAgYmFja2dyb3VuZDogbm9uZTtcclxuICBib3JkZXI6IG5vbmU7XHJcbiAgYm9yZGVyLXJhZGl1czogMDtcclxuICBvdXRsaW5lOiBub25lO1xyXG4gIGNvbG9yOiAjQ0NDO1xyXG59XHJcblxyXG4udGl0bGUgYnV0dG9uW2Rpc2FibGVkXSB7XHJcbiAgb3BhY2l0eTogMC4zO1xyXG59XHJcblxyXG4ucG9pbnRlci1ldmVudHMtbm9uZSB7XHJcbiAgcG9pbnRlci1ldmVudHM6IG5vbmU7XHJcbn1cclxuIl19 */"], data: { animation: [
                Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["trigger"])('flyInOut', [
                    Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["transition"])('void => *', [
                        Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["animate"])('100ms ease-out', Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["keyframes"])([
                            Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])({ transform: 'scale(0.8, 0.8)', opacity: '0', offset: 0 }),
                            Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])({ transform: 'scale(1.0, 1.0)', opacity: '1', offset: 1.0 })
                        ]))
                    ]),
                    Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["transition"])('* => void', [
                        Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["animate"])(100, Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])({ transform: 'scale(0, 0)' }))
                    ])
                ])
            ] } });
    return UIPanelComponent;
}());

/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵsetClassMetadata"](UIPanelComponent, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_1__["Component"],
        args: [{
                selector: 'ui-panel',
                templateUrl: './ui-panel.component.html',
                styleUrls: ['./ui-panel.component.css'],
                providers: [
                    service_panel_service__WEBPACK_IMPORTED_MODULE_2__["PanelService"],
                ],
                animations: [
                    Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["trigger"])('flyInOut', [
                        Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["transition"])('void => *', [
                            Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["animate"])('100ms ease-out', Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["keyframes"])([
                                Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])({ transform: 'scale(0.8, 0.8)', opacity: '0', offset: 0 }),
                                Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])({ transform: 'scale(1.0, 1.0)', opacity: '1', offset: 1.0 })
                            ]))
                        ]),
                        Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["transition"])('* => void', [
                            Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["animate"])(100, Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])({ transform: 'scale(0, 0)' }))
                        ])
                    ])
                ]
            }]
    }], function () { return [{ type: service_panel_service__WEBPACK_IMPORTED_MODULE_2__["PanelService"] }, { type: service_pointer_device_service__WEBPACK_IMPORTED_MODULE_3__["PointerDeviceService"] }]; }, { draggablePanel: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_1__["ViewChild"],
            args: ['draggablePanel', { static: true }]
        }], scrollablePanel: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_1__["ViewChild"],
            args: ['scrollablePanel', { static: true }]
        }], titleBar: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_1__["ViewChild"],
            args: ['titleBar', { static: true }]
        }], content: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_1__["ViewChild"],
            args: ['content', { read: _angular_core__WEBPACK_IMPORTED_MODULE_1__["ViewContainerRef"], static: true }]
        }], title: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_1__["Input"]
        }], left: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_1__["Input"]
        }], top: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_1__["Input"]
        }], width: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_1__["Input"]
        }], height: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_1__["Input"]
        }] }); })();


/***/ }),

/***/ "WHGT":
/*!************************************!*\
  !*** ./src/app/class/image-tag.ts ***!
  \************************************/
/*! exports provided: ImageTag */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ImageTag", function() { return ImageTag; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "mrSG");
/* harmony import */ var _core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./core/synchronize-object/decorator */ "1lIu");
/* harmony import */ var _core_synchronize_object_object_node__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./core/synchronize-object/object-node */ "F67Z");
/* harmony import */ var _core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./core/synchronize-object/object-store */ "hm7o");
/* harmony import */ var _core_file_storage_image_storage__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./core/file-storage/image-storage */ "JQpJ");

//本家 PR#92より




var ImageTag = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"])(ImageTag, _super);
    function ImageTag() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.imageIdentifier = '';
        _this.tag = '';
        return _this;
    }
    ImageTag_1 = ImageTag;
    ImageTag.prototype.containsWords = function (words) {
        var _this = this;
        return words.every(function (word) { return _this.tag.indexOf(word) >= 0; });
        //    return words.every(word => this.tag.indexOf(word) >= 0);
    };
    ImageTag.searchImages = function (searchWords) {
        return _core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_3__["ObjectStore"].instance
            .getObjects(ImageTag_1)
            .filter(function (tag) { return tag.containsWords(searchWords); })
            .map(function (tag) { return _core_file_storage_image_storage__WEBPACK_IMPORTED_MODULE_4__["ImageStorage"].instance.get(tag.imageIdentifier); })
            .filter(function (image) { return image; });
    };
    ImageTag.get = function (imageIdentifier) {
        return _core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_3__["ObjectStore"].instance.get("imagetag_" + imageIdentifier);
    };
    ImageTag.create = function (imageIdentifier) {
        var object = new ImageTag_1("imagetag_" + imageIdentifier);
        object.imageIdentifier = imageIdentifier;
        object.initialize();
        return object;
    };
    ImageTag.prototype.parseInnerXml = function (element) {
        // 既存のオブジェクトを更新する
        var imageTag = ImageTag_1.get(this.imageIdentifier);
        if (!imageTag)
            imageTag = ImageTag_1.create(this.imageIdentifier);
        var context = imageTag.toContext();
        context.syncData = this.toContext().syncData;
        imageTag.apply(context);
        imageTag.update();
        this.destroy();
    };
    var ImageTag_1;
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_1__["SyncVar"])()
    ], ImageTag.prototype, "imageIdentifier", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_1__["SyncVar"])()
    ], ImageTag.prototype, "tag", void 0);
    ImageTag = ImageTag_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_1__["SyncObject"])('image-tag')
    ], ImageTag);
    return ImageTag;
}(_core_synchronize_object_object_node__WEBPACK_IMPORTED_MODULE_2__["ObjectNode"])); //



/***/ }),

/***/ "WeD8":
/*!************************************!*\
  !*** ./src/app/class/text-note.ts ***!
  \************************************/
/*! exports provided: TextNote */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TextNote", function() { return TextNote; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "mrSG");
/* harmony import */ var _core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./core/synchronize-object/decorator */ "1lIu");
/* harmony import */ var _data_element__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./data-element */ "gkrD");
/* harmony import */ var _tabletop_object__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./tabletop-object */ "e8gA");
/* harmony import */ var _tabletop_object_util__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./tabletop-object-util */ "g6Hf");





var TextNote = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"])(TextNote, _super);
    function TextNote() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.rotate = 0;
        _this.zindex = 0;
        _this.password = '';
        _this.limitHeight = false;
        _this.overViewWidth = 250;
        _this.overViewMaxHeight = 250;
        return _this;
    }
    TextNote_1 = TextNote;
    Object.defineProperty(TextNote.prototype, "width", {
        get: function () { return this.getCommonValue('width', 1); },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(TextNote.prototype, "height", {
        get: function () { return this.getCommonValue('height', 1); },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(TextNote.prototype, "fontSize", {
        get: function () { return this.getCommonValue('fontsize', 1); },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(TextNote.prototype, "title", {
        get: function () { return this.getCommonValue('title', ''); },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(TextNote.prototype, "text", {
        get: function () { return this.getCommonValue('text', ''); },
        set: function (text) { this.setCommonValue('text', text); },
        enumerable: false,
        configurable: true
    });
    TextNote.prototype.toTopmost = function () {
        Object(_tabletop_object_util__WEBPACK_IMPORTED_MODULE_4__["moveToTopmost"])(this);
    };
    TextNote.create = function (title, text, fontSize, width, height, identifier) {
        if (fontSize === void 0) { fontSize = 16; }
        if (width === void 0) { width = 1; }
        if (height === void 0) { height = 1; }
        var object = identifier ? new TextNote_1(identifier) : new TextNote_1();
        object.createDataElements();
        object.commonDataElement.appendChild(_data_element__WEBPACK_IMPORTED_MODULE_2__["DataElement"].create('width', width, {}, 'width_' + object.identifier));
        object.commonDataElement.appendChild(_data_element__WEBPACK_IMPORTED_MODULE_2__["DataElement"].create('height', height, {}, 'height_' + object.identifier));
        object.commonDataElement.appendChild(_data_element__WEBPACK_IMPORTED_MODULE_2__["DataElement"].create('fontsize', fontSize, {}, 'fontsize_' + object.identifier));
        object.commonDataElement.appendChild(_data_element__WEBPACK_IMPORTED_MODULE_2__["DataElement"].create('title', title, {}, 'title_' + object.identifier));
        object.commonDataElement.appendChild(_data_element__WEBPACK_IMPORTED_MODULE_2__["DataElement"].create('text', text, { type: 'note', currentValue: text }, 'text_' + object.identifier));
        object.initialize();
        return object;
    };
    var TextNote_1;
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_1__["SyncVar"])()
    ], TextNote.prototype, "rotate", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_1__["SyncVar"])()
    ], TextNote.prototype, "zindex", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_1__["SyncVar"])()
    ], TextNote.prototype, "password", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_1__["SyncVar"])()
    ], TextNote.prototype, "limitHeight", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_1__["SyncVar"])()
    ], TextNote.prototype, "overViewWidth", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_1__["SyncVar"])()
    ], TextNote.prototype, "overViewMaxHeight", void 0);
    TextNote = TextNote_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_1__["SyncObject"])('text-note')
    ], TextNote);
    return TextNote;
}(_tabletop_object__WEBPACK_IMPORTED_MODULE_3__["TabletopObject"]));



/***/ }),

/***/ "Wiwm":
/*!**********************************************************!*\
  !*** ./src/app/component/chat-tab/chat-tab.component.ts ***!
  \**********************************************************/
/*! exports provided: ChatTabComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ChatTabComponent", function() { return ChatTabComponent; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "mrSG");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "fXoL");
/* harmony import */ var _udonarium_chat_message__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @udonarium/chat-message */ "edKV");
/* harmony import */ var _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @udonarium/core/synchronize-object/object-store */ "hm7o");
/* harmony import */ var _udonarium_core_system__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @udonarium/core/system */ "yNnI");
/* harmony import */ var _udonarium_core_system_util_resettable_timeout__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @udonarium/core/system/util/resettable-timeout */ "9ht1");
/* harmony import */ var _udonarium_core_system_util_zero_timeout__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @udonarium/core/system/util/zero-timeout */ "eS09");
/* harmony import */ var service_panel_service__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! service/panel.service */ "M9xM");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @angular/common */ "ofXK");
/* harmony import */ var component_chat_message_chat_message_component__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! component/chat-message/chat-message.component */ "KUN8");











var _c0 = ["logContainer"];
var _c1 = ["messageContainer"];
function ChatTabComponent_ng_container_4_ng_container_1_chat_message_1_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelement"](0, "chat-message", 7);
} if (rf & 2) {
    var chatMessage_r5 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]().$implicit;
    var ctx_r6 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("chatMessage", chatMessage_r5)("simpleDispFlagTime", ctx_r6.chatTabList.simpleDispFlagTime)("simpleDispFlagUserId", ctx_r6.chatTabList.simpleDispFlagUserId)("chatSimpleDispFlag", ctx_r6.chatTab.chatSimpleDispFlag);
} }
function ChatTabComponent_ng_container_4_ng_container_1_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](1, ChatTabComponent_ng_container_4_ng_container_1_chat_message_1_Template, 1, 4, "chat-message", 6);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var chatMessage_r5 = ctx.$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", chatMessage_r5.isDisplayable);
} }
function ChatTabComponent_ng_container_4_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](1, ChatTabComponent_ng_container_4_ng_container_1_Template, 2, 1, "ng-container", 5);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngForOf", ctx_r2.chatMessages)("ngForTrackBy", ctx_r2.trackByChatMessage);
} }
function ChatTabComponent_ng_container_5_chat_message_1_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelement"](0, "chat-message", 7);
} if (rf & 2) {
    var chatMessage_r9 = ctx.$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("chatMessage", chatMessage_r9)("simpleDispFlagTime", false)("simpleDispFlagUserId", false)("chatSimpleDispFlag", false);
} }
function ChatTabComponent_ng_container_5_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](1, ChatTabComponent_ng_container_5_chat_message_1_Template, 1, 4, "chat-message", 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var ctx_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngForOf", ctx_r3.sampleMessages);
} }
var ua = window.navigator.userAgent.toLowerCase();
var isiOS = ua.indexOf('iphone') > -1 || ua.indexOf('ipad') > -1 || ua.indexOf('macintosh') > -1 && 'ontouchend' in document;
var ChatTabComponent = /** @class */ (function () {
    function ChatTabComponent(ngZone, changeDetector, panelService) {
        var _this = this;
        this.ngZone = ngZone;
        this.changeDetector = changeDetector;
        this.panelService = panelService;
        this.sampleMessages = [
            { from: 'System', timestamp: 0, imageIdentifier: '', tag: '', name: '教學',
                text: '關於用於此軟體的 3rdpartylicenses 請參照 ' + location.href.replace('/index.html', '').replace(/\/$/, "") + '/3rdpartylicenses.txt' },
            { from: 'System', timestamp: 0, imageIdentifier: '', tag: '', name: '教學',
                text: '對於那些為開發做出貢獻的人，請參考這裡。 https://github.com/entyu/udonarium_lily' },
            { from: 'System', timestamp: 0, imageIdentifier: '', tag: '', name: '教學',
                text: '這是不使用伺服器的TRPG跑團工具。參與者彼此連接並同步圖像文件等數據。' },
            { from: 'System', timestamp: 0, imageIdentifier: '', tag: '', name: '教學',
                text: '所有數據都在每個參與者的瀏覽器中，因此，如果您想將房間狀態轉移到下一次，請確保執行“保存”以生成保存數據（zip）。 您可以通過在瀏覽器屏幕上拖放文件來加載保存的zip。' },
            { from: 'System', to: '???', timestamp: 0, imageIdentifier: '', tag: '', name: '教學 > 玩家',
                text: '秘密對話(密語)不記錄在保存數據中。' },
            { from: 'System', to: '???', timestamp: 0, imageIdentifier: '', tag: '', name: '教學 > 玩家',
                text: '此外，更新您的ID後，即使在同一房間，過去的秘密對話也將消失。 請小心。' },
            { from: 'System', timestamp: 0, imageIdentifier: '', tag: '', name: '教學',
                text: '推薦使用桌面版Chrome。目前不支援以手機進行操作。' },
            { from: 'System', timestamp: 0, imageIdentifier: '', tag: '', name: '教學',
                text: 'Lily版追加功能：當您輸入第一個聊天輸入時，即可使用聊天簡易顯示功能。' },
            { from: 'System', timestamp: 0, imageIdentifier: '', tag: '', name: '教學',
                text: '這就是本教學的全部內容。 當您輸入第一行對話時，本教學將被隱藏。' },
        ];
        this.topTimestamp = 0;
        this.botomTimestamp = 0;
        this.needUpdate = true;
        this.topElm = null;
        this.bottomElm = null;
        this.topElmBox = null;
        this.bottomElmBox = null;
        this.topIndex = 0;
        this.bottomIndex = 0;
        this._minMessageHeight = 26;
        this._minMessageHeightNormal = 61;
        this.preScrollTop = 0;
        this.scrollSpeed = 0;
        this._chatMessages = [];
        this.scrollEventShortTimer = null;
        this.scrollEventLongTimer = null;
        this.addMessageEventTimer = null;
        this.callbackOnScroll = function () { return _this.onScroll(); };
        this.callbackOnScrollToBottom = function () { return _this.resetMessages(); };
        this.onAddMessage = new _angular_core__WEBPACK_IMPORTED_MODULE_1__["EventEmitter"]();
    }
    Object.defineProperty(ChatTabComponent.prototype, "minMessageHeight", {
        get: function () {
            if (this.chatTab) {
                if (this.chatTab.chatSimpleDispFlag) {
                    return this._minMessageHeight;
                }
            }
            return this._minMessageHeightNormal;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ChatTabComponent.prototype, "chatMessages", {
        get: function () {
            if (!this.chatTab)
                return [];
            if (this.needUpdate) {
                this.needUpdate = false;
                var chatMessages = this.chatTab ? this.chatTab.chatMessages : [];
                this.adjustIndex();
                this._chatMessages = chatMessages.slice(this.topIndex, this.bottomIndex + 1);
                this.topTimestamp = 0 < this._chatMessages.length ? this._chatMessages[0].timestamp : 0;
                this.botomTimestamp = 0 < this._chatMessages.length ? this._chatMessages[this._chatMessages.length - 1].timestamp : 0;
            }
            return this._chatMessages;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ChatTabComponent.prototype, "minScrollHeight", {
        get: function () {
            var length = this.chatTab ? this.chatTab.chatMessages.length : this.sampleMessages.length;
            return (length < 10000 ? length : 10000) * this.minMessageHeight;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ChatTabComponent.prototype, "topSpace", {
        get: function () { return this.minScrollHeight - this.bottomSpace; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ChatTabComponent.prototype, "bottomSpace", {
        get: function () {
            return 0 < this.chatMessages.length
                ? (this.chatTab.chatMessages.length - this.bottomIndex - 1) * this.minMessageHeight
                : 0;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ChatTabComponent.prototype, "chatTabList", {
        get: function () { return _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_3__["ObjectStore"].instance.get('ChatTabList'); },
        enumerable: false,
        configurable: true
    });
    ChatTabComponent.prototype.ngOnInit = function () {
        var e_1, _a;
        var _this = this;
        var messages = [];
        try {
            for (var _b = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(this.sampleMessages), _c = _b.next(); !_c.done; _c = _b.next()) {
                var context = _c.value;
                var message = new _udonarium_chat_message__WEBPACK_IMPORTED_MODULE_2__["ChatMessage"]();
                for (var key in context) {
                    if (key === 'identifier')
                        continue;
                    if (key === 'tabIdentifier')
                        continue;
                    if (key === 'text') {
                        message.value = context[key];
                        continue;
                    }
                    if (context[key] == null || context[key] === '')
                        continue;
                    message.setAttribute(key, context[key]);
                }
                messages.push(message);
            }
        }
        catch (e_1_1) { e_1 = { error: e_1_1 }; }
        finally {
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            }
            finally { if (e_1) throw e_1.error; }
        }
        this.sampleMessages = messages;
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_4__["EventSystem"].register(this)
            .on('MESSAGE_ADDED', function (event) {
            var message = _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_3__["ObjectStore"].instance.get(event.data.messageIdentifier);
            if (!message || !_this.chatTab.contains(message))
                return;
            if (_this.topTimestamp <= message.timestamp) {
                _this.changeDetector.markForCheck();
                _this.needUpdate = true;
                _this.onMessageInit();
            }
        })
            .on('UPDATE_GAME_OBJECT', function (event) {
            var message = _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_3__["ObjectStore"].instance.get(event.data.identifier);
            if (message && message instanceof _udonarium_chat_message__WEBPACK_IMPORTED_MODULE_2__["ChatMessage"]
                && _this.topTimestamp <= message.timestamp && message.timestamp <= _this.botomTimestamp
                && _this.chatTab.contains(message)) {
                _this.changeDetector.markForCheck();
            }
        })
            .on('RE_DRAW_CHAT', function (event) {
            console.log("CHAT_redraw");
            setTimeout(function () { return _this.redraw(); }, 0);
            //フラグの更新前にイベントが走るためタイマーを使う。ひとまずやむなし
        });
    };
    ChatTabComponent.prototype.ngAfterViewInit = function () {
        var _this = this;
        this.ngZone.runOutsideAngular(function () {
            _this.scrollEventShortTimer = new _udonarium_core_system_util_resettable_timeout__WEBPACK_IMPORTED_MODULE_5__["ResettableTimeout"](function () { return _this.lazyScrollUpdate(); }, 33);
            _this.scrollEventLongTimer = new _udonarium_core_system_util_resettable_timeout__WEBPACK_IMPORTED_MODULE_5__["ResettableTimeout"](function () { return _this.lazyScrollUpdate(false); }, 66);
            _this.onScroll();
            _this.panelService.scrollablePanel.addEventListener('scroll', _this.callbackOnScroll, false);
            _this.panelService.scrollablePanel.addEventListener('scrolltobottom', _this.callbackOnScrollToBottom, false);
        });
    };
    ChatTabComponent.prototype.ngOnDestroy = function () {
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_4__["EventSystem"].unregister(this);
        this.panelService.scrollablePanel.removeEventListener('scroll', this.callbackOnScroll, false);
        this.panelService.scrollablePanel.removeEventListener('scrolltobottom', this.callbackOnScrollToBottom, false);
        this.scrollEventShortTimer.clear();
        this.scrollEventLongTimer.clear();
        if (this.addMessageEventTimer)
            clearTimeout(this.addMessageEventTimer);
        this.addMessageEventTimer = null;
    };
    ChatTabComponent.prototype.ngOnChanges = function () {
        var _this = this;
        Promise.resolve().then(function () { return _this.resetMessages(); });
    };
    ChatTabComponent.prototype.ngAfterViewChecked = function () {
        var _this = this;
        if (!this.topElm || !this.bottomElm)
            return;
        this.ngZone.runOutsideAngular(function () {
            Promise.resolve().then(function () { return _this.adjustScrollPosition(); });
        });
    };
    ChatTabComponent.prototype.onMessageInit = function () {
        var _this = this;
        if (this.addMessageEventTimer != null)
            return;
        this.ngZone.runOutsideAngular(function () {
            _this.addMessageEventTimer = setTimeout(function () {
                _this.addMessageEventTimer = null;
                _this.ngZone.run(function () { return _this.onAddMessage.emit(); });
            }, 0);
        });
    };
    ChatTabComponent.prototype.resetMessages = function () {
        var lastIndex = this.chatTab.chatMessages.length - 1;
        this.topIndex = lastIndex - Math.floor(this.panelService.scrollablePanel.clientHeight / this.minMessageHeight);
        this.bottomIndex = lastIndex;
        this.needUpdate = true;
        this.preScrollTop = -1;
        this.scrollSpeed = 0;
        this.topElm = this.bottomElm = null;
        this.adjustIndex();
        this.changeDetector.markForCheck();
    };
    ChatTabComponent.prototype.trackByChatMessage = function (index, message) {
        return message.identifier;
    };
    ChatTabComponent.prototype.adjustIndex = function () {
        var chatMessages = this.chatTab ? this.chatTab.chatMessages : [];
        var lastIndex = 0 < chatMessages.length ? chatMessages.length - 1 : 0;
        if (this.topIndex < 0) {
            this.topIndex = 0;
        }
        if (lastIndex < this.bottomIndex) {
            this.bottomIndex = lastIndex;
        }
        if (this.topIndex < 0)
            this.topIndex = 0;
        if (this.bottomIndex < 0)
            this.bottomIndex = 0;
        if (lastIndex < this.topIndex)
            this.topIndex = lastIndex;
        if (lastIndex < this.bottomIndex)
            this.bottomIndex = lastIndex;
    };
    ChatTabComponent.prototype.getScrollPosition = function () {
        var top = this.panelService.scrollablePanel.scrollTop;
        var clientHeight = this.panelService.scrollablePanel.clientHeight;
        var scrollHeight = this.panelService.scrollablePanel.scrollHeight;
        if (top < 0)
            top = 0;
        if (scrollHeight - clientHeight < top)
            top = scrollHeight - clientHeight;
        var bottom = top + clientHeight;
        return { top: top, bottom: bottom, clientHeight: clientHeight, scrollHeight: scrollHeight };
    };
    ChatTabComponent.prototype.adjustScrollPosition = function () {
        var _this = this;
        if (!this.topElm || !this.bottomElm)
            return;
        var hasTopElm = this.logContainerRef.nativeElement.contains(this.topElm);
        var hasBotomElm = this.logContainerRef.nativeElement.contains(this.bottomElm);
        var _a = this.checkBlank(hasTopElm, hasBotomElm), hasTopBlank = _a.hasTopBlank, hasBotomBlank = _a.hasBotomBlank;
        this.topElm = this.bottomElm = null;
        if (hasTopBlank || hasBotomBlank || (!hasTopElm && !hasBotomElm)) {
            Object(_udonarium_core_system_util_zero_timeout__WEBPACK_IMPORTED_MODULE_6__["setZeroTimeout"])(function () { return _this.lazyScrollUpdate(); });
        }
    };
    ChatTabComponent.prototype.checkBlank = function (hasTopElm, hasBotomElm) {
        var hasTopBlank = !hasTopElm;
        var hasBotomBlank = !hasBotomElm;
        if (!hasTopElm && !hasBotomElm)
            return { hasTopBlank: hasTopBlank, hasBotomBlank: hasBotomBlank };
        var elm = null;
        var prevBox = null;
        var currentBox = null;
        var diff = 0;
        if (hasBotomElm) {
            elm = this.bottomElm;
            prevBox = this.bottomElmBox;
        }
        else if (hasTopElm) {
            elm = this.topElm;
            prevBox = this.topElmBox;
        }
        currentBox = elm.getBoundingClientRect();
        diff = prevBox.top - currentBox.top - this.scrollSpeed;
        if ((!hasTopBlank || !hasBotomBlank) && Math.pow(0.5, 2) < Math.pow(diff, 2)) {
            this.panelService.scrollablePanel.scrollTop -= diff;
        }
        var logBox = this.logContainerRef.nativeElement.getBoundingClientRect();
        var messageBox = this.messageContainerRef.nativeElement.getBoundingClientRect();
        var messageBoxTop = messageBox.top - logBox.top;
        var messageBoxBottom = messageBoxTop + messageBox.height;
        var scrollPosition = this.getScrollPosition();
        hasTopBlank = scrollPosition.top < messageBoxTop;
        hasBotomBlank = messageBoxBottom < scrollPosition.bottom && scrollPosition.bottom < scrollPosition.scrollHeight;
        return { hasTopBlank: hasTopBlank, hasBotomBlank: hasBotomBlank };
    };
    ChatTabComponent.prototype.markForReadIfNeeded = function () {
        var _this = this;
        if (!this.chatTab.hasUnread)
            return;
        var scrollPosition = this.getScrollPosition();
        if (scrollPosition.scrollHeight <= scrollPosition.bottom + 100) {
            Object(_udonarium_core_system_util_zero_timeout__WEBPACK_IMPORTED_MODULE_6__["setZeroTimeout"])(function () {
                _this.chatTab.markForRead();
                _this.changeDetector.markForCheck();
                _this.ngZone.run(function () { });
            });
        }
    };
    ChatTabComponent.prototype.onScroll = function () {
        this.scrollEventShortTimer.reset();
        if (!this.scrollEventLongTimer.isActive) {
            this.scrollEventLongTimer.reset();
        }
    };
    ChatTabComponent.prototype.lazyScrollUpdate = function (isNormalUpdate) {
        var _this = this;
        if (isNormalUpdate === void 0) { isNormalUpdate = true; }
        this.scrollEventShortTimer.stop();
        this.scrollEventLongTimer.stop();
        var chatMessageElements = this.messageContainerRef.nativeElement.querySelectorAll('chat-message');
        var messageBoxTop = this.messageContainerRef.nativeElement.offsetTop;
        var messageBoxBottom = messageBoxTop + this.messageContainerRef.nativeElement.clientHeight;
        var preTopIndex = this.topIndex;
        var preBottomIndex = this.bottomIndex;
        var scrollPosition = this.getScrollPosition();
        this.scrollSpeed = scrollPosition.top - this.preScrollTop;
        this.preScrollTop = scrollPosition.top;
        var hasTopBlank = scrollPosition.top < messageBoxTop;
        var hasBotomBlank = messageBoxBottom < scrollPosition.bottom && scrollPosition.bottom < scrollPosition.scrollHeight;
        if (!isNormalUpdate) {
            this.scrollEventShortTimer.reset();
        }
        if (!isNormalUpdate && !hasTopBlank && !hasBotomBlank) {
            return;
        }
        var scrollWideTop = scrollPosition.top - (!isNormalUpdate && hasTopBlank ? 100 : 1200);
        var scrollWideBottom = scrollPosition.bottom + (!isNormalUpdate && hasBotomBlank ? 100 : 1200);
        this.markForReadIfNeeded();
        this.calcItemIndexRange(messageBoxTop, messageBoxBottom, scrollWideTop, scrollWideBottom, scrollPosition, chatMessageElements);
        var isChangedIndex = this.topIndex != preTopIndex || this.bottomIndex != preBottomIndex;
        if (!isChangedIndex)
            return;
        this.needUpdate = true;
        this.topElm = chatMessageElements[0];
        this.bottomElm = chatMessageElements[chatMessageElements.length - 1];
        this.topElmBox = this.topElm.getBoundingClientRect();
        this.bottomElmBox = this.bottomElm.getBoundingClientRect();
        Object(_udonarium_core_system_util_zero_timeout__WEBPACK_IMPORTED_MODULE_6__["setZeroTimeout"])(function () {
            var scrollPosition = _this.getScrollPosition();
            _this.scrollSpeed = scrollPosition.top - _this.preScrollTop;
            _this.preScrollTop = scrollPosition.top;
            _this.changeDetector.markForCheck();
            _this.ngZone.run(function () { });
        });
    };
    ChatTabComponent.prototype.redraw = function () {
        // 強制的に再描画させる
        this.changeDetector.detectChanges();
    };
    ChatTabComponent.prototype.calcElementMaxHeight = function (chatMessageElements) {
        var maxHeight = this.minMessageHeight;
        for (var i = chatMessageElements.length - 1; 0 <= i; i--) {
            var height = chatMessageElements[i].clientHeight;
            if (maxHeight < height)
                maxHeight = height;
        }
        return maxHeight;
    };
    ChatTabComponent.prototype.calcItemIndexRange = function (messageBoxTop, messageBoxBottom, scrollWideTop, scrollWideBottom, scrollPosition, chatMessageElements) {
        if (scrollWideTop >= messageBoxBottom || messageBoxTop >= scrollWideBottom) {
            var lastIndex = this.chatTab.chatMessages.length - 1;
            var scrollBottomHeight = scrollPosition.scrollHeight - scrollPosition.top - scrollPosition.clientHeight;
            this.bottomIndex = lastIndex - Math.floor(scrollBottomHeight / this.minMessageHeight);
            this.topIndex = this.bottomIndex - Math.floor(scrollPosition.clientHeight / this.minMessageHeight);
            this.bottomIndex += 1;
            this.topIndex -= 1;
        }
        else {
            var maxHeight = this.calcElementMaxHeight(chatMessageElements);
            if (scrollWideTop < messageBoxTop) {
                this.topIndex -= Math.floor((messageBoxTop - scrollWideTop) / maxHeight) + 1;
            }
            else if (scrollWideTop > messageBoxTop) {
                if (!isiOS)
                    this.topIndex += Math.floor((scrollWideTop - messageBoxTop) / maxHeight);
            }
            if (messageBoxBottom > scrollWideBottom) {
                if (!isiOS)
                    this.bottomIndex -= Math.floor((messageBoxBottom - scrollWideBottom) / maxHeight);
            }
            else if (messageBoxBottom < scrollWideBottom) {
                this.bottomIndex += Math.floor((scrollWideBottom - messageBoxBottom) / maxHeight) + 1;
            }
        }
        this.adjustIndex();
    };
    ChatTabComponent.ɵfac = function ChatTabComponent_Factory(t) { return new (t || ChatTabComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_1__["NgZone"]), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_1__["ChangeDetectorRef"]), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdirectiveInject"](service_panel_service__WEBPACK_IMPORTED_MODULE_7__["PanelService"])); };
    ChatTabComponent.ɵcmp = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdefineComponent"]({ type: ChatTabComponent, selectors: [["chat-tab"]], viewQuery: function ChatTabComponent_Query(rf, ctx) { if (rf & 1) {
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵstaticViewQuery"](_c0, true);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵstaticViewQuery"](_c1, true);
        } if (rf & 2) {
            var _t = void 0;
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵqueryRefresh"](_t = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵloadQuery"]()) && (ctx.logContainerRef = _t.first);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵqueryRefresh"](_t = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵloadQuery"]()) && (ctx.messageContainerRef = _t.first);
        } }, inputs: { chatTab: "chatTab" }, outputs: { onAddMessage: "onAddMessage" }, features: [_angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵNgOnChangesFeature"]], decls: 6, vars: 6, consts: [[1, "log"], ["logContainer", ""], [1, "virtual-scroll-container"], ["messageContainer", ""], [4, "ngIf"], [4, "ngFor", "ngForOf", "ngForTrackBy"], [3, "chatMessage", "simpleDispFlagTime", "simpleDispFlagUserId", "chatSimpleDispFlag", 4, "ngIf"], [3, "chatMessage", "simpleDispFlagTime", "simpleDispFlagUserId", "chatSimpleDispFlag"], [3, "chatMessage", "simpleDispFlagTime", "simpleDispFlagUserId", "chatSimpleDispFlag", 4, "ngFor", "ngForOf"]], template: function ChatTabComponent_Template(rf, ctx) { if (rf & 1) {
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "div", 0, 1);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](2, "div", 2, 3);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](4, ChatTabComponent_ng_container_4_Template, 2, 2, "ng-container", 4);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](5, ChatTabComponent_ng_container_5_Template, 2, 1, "ng-container", 4);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
        } if (rf & 2) {
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵstyleProp"]("min-height", ctx.minScrollHeight, "px");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](2);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵstyleProp"]("margin-bottom", ctx.bottomSpace, "px");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](2);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", 0 < ctx.chatMessages.length);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", ctx.chatMessages.length <= 0);
        } }, directives: [_angular_common__WEBPACK_IMPORTED_MODULE_8__["NgIf"], _angular_common__WEBPACK_IMPORTED_MODULE_8__["NgForOf"], component_chat_message_chat_message_component__WEBPACK_IMPORTED_MODULE_9__["ChatMessageComponent"]], styles: [".log[_ngcontent-%COMP%] {\r\n  position: relative;\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: flex-end;\r\n  align-items: flex-end;\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n\r\n.virtual-scroll-container[_ngcontent-%COMP%] {\r\n  flex-shrink: 0;\r\n  width: 100%;\r\n}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNoYXQtdGFiLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxrQkFBa0I7RUFDbEIsYUFBYTtFQUNiLHNCQUFzQjtFQUN0Qix5QkFBeUI7RUFDekIscUJBQXFCO0VBQ3JCLFdBQVc7RUFDWCxZQUFZO0FBQ2Q7O0FBRUE7RUFDRSxjQUFjO0VBQ2QsV0FBVztBQUNiIiwiZmlsZSI6ImNoYXQtdGFiLmNvbXBvbmVudC5jc3MiLCJzb3VyY2VzQ29udGVudCI6WyIubG9nIHtcclxuICBwb3NpdGlvbjogcmVsYXRpdmU7XHJcbiAgZGlzcGxheTogZmxleDtcclxuICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xyXG4gIGp1c3RpZnktY29udGVudDogZmxleC1lbmQ7XHJcbiAgYWxpZ24taXRlbXM6IGZsZXgtZW5kO1xyXG4gIHdpZHRoOiAxMDAlO1xyXG4gIGhlaWdodDogMTAwJTtcclxufVxyXG5cclxuLnZpcnR1YWwtc2Nyb2xsLWNvbnRhaW5lciB7XHJcbiAgZmxleC1zaHJpbms6IDA7XHJcbiAgd2lkdGg6IDEwMCU7XHJcbn1cclxuIl19 */"], changeDetection: 0 });
    return ChatTabComponent;
}());

/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵsetClassMetadata"](ChatTabComponent, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_1__["Component"],
        args: [{
                selector: 'chat-tab',
                templateUrl: './chat-tab.component.html',
                styleUrls: ['./chat-tab.component.css'],
                changeDetection: _angular_core__WEBPACK_IMPORTED_MODULE_1__["ChangeDetectionStrategy"].OnPush,
            }]
    }], function () { return [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_1__["NgZone"] }, { type: _angular_core__WEBPACK_IMPORTED_MODULE_1__["ChangeDetectorRef"] }, { type: service_panel_service__WEBPACK_IMPORTED_MODULE_7__["PanelService"] }]; }, { logContainerRef: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_1__["ViewChild"],
            args: ['logContainer', { static: true }]
        }], messageContainerRef: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_1__["ViewChild"],
            args: ['messageContainer', { static: true }]
        }], chatTab: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_1__["Input"]
        }], onAddMessage: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_1__["Output"]
        }] }); })();


/***/ }),

/***/ "XMVy":
/*!*****************************************************************!*\
  !*** ./src/app/class/core/file-storage/audio-sharing-system.ts ***!
  \*****************************************************************/
/*! exports provided: AudioSharingSystem */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AudioSharingSystem", function() { return AudioSharingSystem; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "mrSG");
/* harmony import */ var _system__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../system */ "yNnI");
/* harmony import */ var _audio_file__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./audio-file */ "eRQf");
/* harmony import */ var _audio_storage__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./audio-storage */ "Prh6");
/* harmony import */ var _buffer_sharing_task__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./buffer-sharing-task */ "PYk/");
/* harmony import */ var _file_reader_util__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./file-reader-util */ "N0uT");






var AudioSharingSystem = /** @class */ (function () {
    function AudioSharingSystem() {
        this.sendTaskMap = new Map();
        this.receiveTaskMap = new Map();
        this.maxSendTask = 2;
        this.maxReceiveTask = 4;
    }
    Object.defineProperty(AudioSharingSystem, "instance", {
        get: function () {
            if (!AudioSharingSystem._instance)
                AudioSharingSystem._instance = new AudioSharingSystem();
            return AudioSharingSystem._instance;
        },
        enumerable: false,
        configurable: true
    });
    AudioSharingSystem.prototype.initialize = function () {
        var _this = this;
        console.log('AudioSharingSystem ready...');
        this.destroy();
        _system__WEBPACK_IMPORTED_MODULE_1__["EventSystem"].register(this)
            .on('CONNECT_PEER', -1, function (event) {
            if (!event.isSendFromSelf)
                return;
            console.log('CONNECT_PEER AudioStorageService !!!', event.data.peerId);
            _audio_storage__WEBPACK_IMPORTED_MODULE_3__["AudioStorage"].instance.synchronize();
        })
            .on('SYNCHRONIZE_AUDIO_LIST', function (event) {
            var e_1, _a;
            if (event.isSendFromSelf)
                return;
            console.log('SYNCHRONIZE_AUDIO_LIST ' + event.sendFrom);
            var otherCatalog = event.data;
            var request = [];
            console.log('SYNCHRONIZE_AUDIO_LIST active tasks ', _this.sendTaskMap.size + _this.receiveTaskMap.size);
            try {
                for (var otherCatalog_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(otherCatalog), otherCatalog_1_1 = otherCatalog_1.next(); !otherCatalog_1_1.done; otherCatalog_1_1 = otherCatalog_1.next()) {
                    var item = otherCatalog_1_1.value;
                    var audio = _audio_storage__WEBPACK_IMPORTED_MODULE_3__["AudioStorage"].instance.get(item.identifier);
                    if (audio === null) {
                        audio = _audio_file__WEBPACK_IMPORTED_MODULE_2__["AudioFile"].createEmpty(item.identifier);
                        _audio_storage__WEBPACK_IMPORTED_MODULE_3__["AudioStorage"].instance.add(audio);
                    }
                    if (audio.state < _audio_file__WEBPACK_IMPORTED_MODULE_2__["AudioState"].COMPLETE && !_this.receiveTaskMap.has(item.identifier)) {
                        request.push({ identifier: item.identifier, state: audio.state });
                    }
                }
            }
            catch (e_1_1) { e_1 = { error: e_1_1 }; }
            finally {
                try {
                    if (otherCatalog_1_1 && !otherCatalog_1_1.done && (_a = otherCatalog_1.return)) _a.call(otherCatalog_1);
                }
                finally { if (e_1) throw e_1.error; }
            }
            // Peer切断時などのエッジケースに対応する
            if (request.length < 1 && !_this.hasActiveTask() && otherCatalog.length < _audio_storage__WEBPACK_IMPORTED_MODULE_3__["AudioStorage"].instance.getCatalog().length) {
                _audio_storage__WEBPACK_IMPORTED_MODULE_3__["AudioStorage"].instance.synchronize(event.sendFrom);
            }
            if (request.length < 1 || _this.isLimitReceiveTask()) {
                return;
            }
            var index = Math.floor(Math.random() * request.length);
            _this.request([request[index]], event.sendFrom);
        })
            .on('REQUEST_AUDIO_RESOURE', function (event) {
            var e_2, _a, e_3, _b;
            if (event.isSendFromSelf)
                return;
            var request = event.data.identifiers;
            var randomRequest = [];
            try {
                for (var request_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(request), request_1_1 = request_1.next(); !request_1_1.done; request_1_1 = request_1.next()) {
                    var item = request_1_1.value;
                    var audio = _audio_storage__WEBPACK_IMPORTED_MODULE_3__["AudioStorage"].instance.get(item.identifier);
                    if (audio && item.state < audio.state)
                        randomRequest.push({ identifier: item.identifier, state: item.state });
                }
            }
            catch (e_2_1) { e_2 = { error: e_2_1 }; }
            finally {
                try {
                    if (request_1_1 && !request_1_1.done && (_a = request_1.return)) _a.call(request_1);
                }
                finally { if (e_2) throw e_2.error; }
            }
            if (_this.isLimitSendTask() === false && 0 < randomRequest.length && !_this.existsSendTask(event.data.receiver)) {
                // 送信
                console.log('REQUEST_AUDIO_RESOURE Send!!! ' + event.data.receiver + ' -> ' + randomRequest);
                var index = Math.floor(Math.random() * randomRequest.length);
                var item = randomRequest[index];
                var audio = _audio_storage__WEBPACK_IMPORTED_MODULE_3__["AudioStorage"].instance.get(item.identifier);
                _this.startSendTask(audio, event.data.receiver);
            }
            else {
                // 中継
                var candidatePeers = event.data.candidatePeers;
                var index = candidatePeers.indexOf(_system__WEBPACK_IMPORTED_MODULE_1__["Network"].peerId);
                if (-1 < index)
                    candidatePeers.splice(index, 1);
                try {
                    for (var candidatePeers_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(candidatePeers), candidatePeers_1_1 = candidatePeers_1.next(); !candidatePeers_1_1.done; candidatePeers_1_1 = candidatePeers_1.next()) {
                        var peerId = candidatePeers_1_1.value;
                        console.log('REQUEST_AUDIO_RESOURE AudioStorageService Relay!!! ' + peerId + ' -> ' + event.data.identifiers);
                        _system__WEBPACK_IMPORTED_MODULE_1__["EventSystem"].call(event, peerId);
                        return;
                    }
                }
                catch (e_3_1) { e_3 = { error: e_3_1 }; }
                finally {
                    try {
                        if (candidatePeers_1_1 && !candidatePeers_1_1.done && (_b = candidatePeers_1.return)) _b.call(candidatePeers_1);
                    }
                    finally { if (e_3) throw e_3.error; }
                }
                console.log('REQUEST_FILE_RESOURE AudioStorageService あぶれた...' + event.data.receiver, randomRequest.length);
            }
        })
            .on('UPDATE_AUDIO_RESOURE', function (event) {
            var e_4, _a;
            var updateAudios = event.data;
            console.log('UPDATE_AUDIO_RESOURE AudioStorageService ' + event.sendFrom + ' -> ', updateAudios);
            try {
                for (var updateAudios_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(updateAudios), updateAudios_1_1 = updateAudios_1.next(); !updateAudios_1_1.done; updateAudios_1_1 = updateAudios_1.next()) {
                    var context = updateAudios_1_1.value;
                    if (context.blob)
                        context.blob = new Blob([context.blob], { type: context.type });
                    _audio_storage__WEBPACK_IMPORTED_MODULE_3__["AudioStorage"].instance.add(context);
                }
            }
            catch (e_4_1) { e_4 = { error: e_4_1 }; }
            finally {
                try {
                    if (updateAudios_1_1 && !updateAudios_1_1.done && (_a = updateAudios_1.return)) _a.call(updateAudios_1);
                }
                finally { if (e_4) throw e_4.error; }
            }
        })
            .on('START_AUDIO_TRANSMISSION', function (event) {
            console.log('START_AUDIO_TRANSMISSION ' + event.data.fileIdentifier);
            var identifier = event.data.fileIdentifier;
            var audio = _audio_storage__WEBPACK_IMPORTED_MODULE_3__["AudioStorage"].instance.get(identifier);
            if (_this.receiveTaskMap.has(identifier) || (audio && _audio_file__WEBPACK_IMPORTED_MODULE_2__["AudioState"].COMPLETE <= audio.state)) {
                console.warn('CANCEL_TASK_ ' + identifier);
                _system__WEBPACK_IMPORTED_MODULE_1__["EventSystem"].call('CANCEL_TASK_' + identifier, null, event.sendFrom);
            }
            else {
                _this.startReceiveTask(identifier);
            }
        });
    };
    AudioSharingSystem.prototype.destroy = function () {
        _system__WEBPACK_IMPORTED_MODULE_1__["EventSystem"].unregister(this);
    };
    AudioSharingSystem.prototype.startSendTask = function (audio, sendTo) {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function () {
            var task, context, _a;
            var _this = this;
            return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"])(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        task = _buffer_sharing_task__WEBPACK_IMPORTED_MODULE_4__["BufferSharingTask"].createSendTask(audio.identifier, sendTo);
                        this.sendTaskMap.set(audio.identifier, task);
                        _system__WEBPACK_IMPORTED_MODULE_1__["EventSystem"].call('START_AUDIO_TRANSMISSION', { fileIdentifier: audio.identifier }, sendTo);
                        context = {
                            identifier: audio.identifier,
                            name: audio.name,
                            blob: null,
                            type: '',
                            url: null
                        };
                        if (!(audio.state === _audio_file__WEBPACK_IMPORTED_MODULE_2__["AudioState"].URL)) return [3 /*break*/, 1];
                        context.url = audio.url;
                        return [3 /*break*/, 3];
                    case 1:
                        _a = context;
                        return [4 /*yield*/, _file_reader_util__WEBPACK_IMPORTED_MODULE_5__["FileReaderUtil"].readAsArrayBufferAsync(audio.blob)];
                    case 2:
                        _a.blob = (_b.sent());
                        context.type = audio.blob.type;
                        _b.label = 3;
                    case 3:
                        task.onfinish = function () {
                            _this.stopSendTask(task.identifier);
                            _audio_storage__WEBPACK_IMPORTED_MODULE_3__["AudioStorage"].instance.synchronize();
                        };
                        task.start(context);
                        return [2 /*return*/];
                }
            });
        });
    };
    AudioSharingSystem.prototype.startReceiveTask = function (identifier) {
        var _this = this;
        var audio = _audio_storage__WEBPACK_IMPORTED_MODULE_3__["AudioStorage"].instance.get(identifier);
        var task = _buffer_sharing_task__WEBPACK_IMPORTED_MODULE_4__["BufferSharingTask"].createReceiveTask(identifier);
        this.receiveTaskMap.set(identifier, task);
        task.onprogress = function (task, loded, total) {
            var context = audio.toContext();
            context.name = (loded * 100 / total).toFixed(1) + '%';
            audio.apply(context);
        };
        task.onfinish = function (task, data) {
            _this.stopReceiveTask(task.identifier);
            if (data)
                _system__WEBPACK_IMPORTED_MODULE_1__["EventSystem"].trigger('UPDATE_AUDIO_RESOURE', [data]);
            _audio_storage__WEBPACK_IMPORTED_MODULE_3__["AudioStorage"].instance.synchronize();
        };
        task.start();
        console.log('startReceiveTask => ', this.receiveTaskMap.size);
    };
    AudioSharingSystem.prototype.stopSendTask = function (identifier) {
        var task = this.sendTaskMap.get(identifier);
        if (task) {
            task.cancel();
        }
        this.sendTaskMap.delete(identifier);
        console.log('stopSendTask => ', this.sendTaskMap.size);
    };
    AudioSharingSystem.prototype.stopReceiveTask = function (identifier) {
        var task = this.receiveTaskMap.get(identifier);
        if (task) {
            task.cancel();
        }
        this.receiveTaskMap.delete(identifier);
        console.log('stopReceiveTask => ', this.receiveTaskMap.size);
    };
    AudioSharingSystem.prototype.request = function (request, peerId) {
        console.log('requestFile() ' + peerId);
        var peerIds = _system__WEBPACK_IMPORTED_MODULE_1__["Network"].peerIds;
        peerIds.splice(peerIds.indexOf(_system__WEBPACK_IMPORTED_MODULE_1__["Network"].peerId), 1);
        _system__WEBPACK_IMPORTED_MODULE_1__["EventSystem"].call('REQUEST_AUDIO_RESOURE', { identifiers: request, receiver: _system__WEBPACK_IMPORTED_MODULE_1__["Network"].peerId, candidatePeers: peerIds }, peerId);
    };
    AudioSharingSystem.prototype.hasActiveTask = function () {
        return 0 < this.sendTaskMap.size || 0 < this.receiveTaskMap.size;
    };
    AudioSharingSystem.prototype.isLimitSendTask = function () {
        return this.maxSendTask <= this.sendTaskMap.size;
    };
    AudioSharingSystem.prototype.isLimitReceiveTask = function () {
        return this.maxReceiveTask <= this.receiveTaskMap.size;
    };
    AudioSharingSystem.prototype.existsSendTask = function (peerId) {
        var e_5, _a;
        try {
            for (var _b = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(this.sendTaskMap.values()), _c = _b.next(); !_c.done; _c = _b.next()) {
                var task = _c.value;
                if (task && task.sendTo === peerId)
                    return true;
            }
        }
        catch (e_5_1) { e_5 = { error: e_5_1 }; }
        finally {
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            }
            finally { if (e_5) throw e_5.error; }
        }
        return false;
    };
    return AudioSharingSystem;
}());



/***/ }),

/***/ "YZvQ":
/*!****************************************!*\
  !*** ./src/app/class/chat-tab-list.ts ***!
  \****************************************/
/*! exports provided: ChatTabList */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ChatTabList", function() { return ChatTabList; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "mrSG");
/* harmony import */ var _chat_tab__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./chat-tab */ "Sqpr");
/* harmony import */ var _core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./core/synchronize-object/decorator */ "1lIu");
/* harmony import */ var _core_synchronize_object_object_node__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./core/synchronize-object/object-node */ "F67Z");
/* harmony import */ var _udonarium_core_system__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @udonarium/core/system */ "yNnI");





var ChatTabList = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"])(ChatTabList, _super);
    function ChatTabList() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.tachieHeightValue = 200;
        _this.minTachieSize = 100;
        _this.maxTachieSize = 500;
        _this.isTachieInWindow = false;
        _this.isKeepTachieOutWindow = false;
        //チャット簡易表示フラグ、拡張余地のため整数型
        _this.simpleDispFlagTime_ = 0;
        _this.simpleDispFlagUserId_ = 0;
        return _this;
    }
    ChatTabList_1 = ChatTabList;
    Object.defineProperty(ChatTabList, "instance", {
        get: function () {
            if (!ChatTabList_1._instance) {
                ChatTabList_1._instance = new ChatTabList_1('ChatTabList');
                ChatTabList_1._instance.initialize();
            }
            return ChatTabList_1._instance;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ChatTabList.prototype, "chatTabs", {
        get: function () { return this.children; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ChatTabList.prototype, "simpleDispFlagTime", {
        get: function () {
            return this.simpleDispFlagTime_;
        },
        set: function (flag) {
            this.simpleDispFlagTime_ = flag;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ChatTabList.prototype, "simpleDispFlagUserId", {
        get: function () {
            return this.simpleDispFlagUserId_;
        },
        set: function (flag) {
            this.simpleDispFlagUserId_ = flag;
        },
        enumerable: false,
        configurable: true
    });
    ChatTabList.prototype.addChatTab = function () {
        var args = [];
        for (var _i = 0; _i < arguments.length; _i++) {
            args[_i] = arguments[_i];
        }
        var chatTab = null;
        if (args[0] instanceof _chat_tab__WEBPACK_IMPORTED_MODULE_1__["ChatTab"]) {
            chatTab = args[0];
        }
        else {
            var tabName = args[0];
            var identifier = args[1];
            chatTab = new _chat_tab__WEBPACK_IMPORTED_MODULE_1__["ChatTab"](identifier);
            chatTab.name = tabName;
            chatTab.initialize();
        }
        return this.appendChild(chatTab);
    };
    ChatTabList.prototype.parseInnerXml = function (element) {
        var e_1, _a;
        try {
            // XMLからの新規作成を許可せず、既存のオブジェクトを更新する
            for (var _b = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(ChatTabList_1.instance.children), _c = _b.next(); !_c.done; _c = _b.next()) {
                var child = _c.value;
                child.destroy();
            }
        }
        catch (e_1_1) { e_1 = { error: e_1_1 }; }
        finally {
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            }
            finally { if (e_1) throw e_1.error; }
        }
        var context = ChatTabList_1.instance.toContext();
        context.syncData = this.toContext().syncData;
        ChatTabList_1.instance.apply(context);
        ChatTabList_1.instance.update();
        _super.prototype.parseInnerXml.apply(ChatTabList_1.instance, [element]);
        this.destroy();
    };
    ChatTabList.prototype.logHtml = function () {
        var head = "<?xml version='1.0' encoding='UTF-8'?>" + '\n' +
            "<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Transitional//EN' 'http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd'>" + '\n' +
            "<html xmlns='http://www.w3.org/1999/xhtml' lang='ja'>" + '\n' +
            "  <head>" + '\n' +
            "    <meta http-equiv='Content-Type' content='text/html; charset=UTF-8' />" + '\n' +
            "    <title>チャットログ：" + "全タブ" + "</title>" + '\n' +
            "  </head>" + '\n' +
            "  <body>" + '\n';
        var last = "" + '\n' +
            "  </body>" + '\n' +
            "</html>";
        var main = "";
        //泥臭くやる
        if (this.chatTabs) {
            var tabNum = this.chatTabs.length;
            var indexList = [];
            console.log('tabNum :' + tabNum);
            for (var i = 0; i < tabNum; i++) {
                indexList.push(0);
            }
            var fastTabIndex = null;
            var chkTimestamp = null;
            while (1) {
                fastTabIndex = -1;
                chkTimestamp = -1;
                for (var i = 0; i < tabNum; i++) {
                    if (this.chatTabs[i].chatMessages.length <= indexList[i])
                        continue;
                    if (chkTimestamp == -1) {
                        chkTimestamp = this.chatTabs[i].chatMessages[indexList[i]].timestamp;
                        fastTabIndex = i;
                    }
                    if (chkTimestamp > this.chatTabs[i].chatMessages[indexList[i]].timestamp) {
                        chkTimestamp = this.chatTabs[i].chatMessages[indexList[i]].timestamp;
                        fastTabIndex = i;
                    }
                }
                if (fastTabIndex == -1)
                    break;
                var to = this.chatTabs[fastTabIndex].chatMessages[indexList[fastTabIndex]].to;
                var from = this.chatTabs[fastTabIndex].chatMessages[indexList[fastTabIndex]].from;
                var myId = _udonarium_core_system__WEBPACK_IMPORTED_MODULE_4__["Network"].peerContext.userId; //1.13.xとのmargeで修正
                if (to) {
                    if ((to != myId) && (from != myId)) {
                        console.log(" SKIP " + from + " > " + to + " : " + this.chatTabs[fastTabIndex].chatMessages[indexList[fastTabIndex]].text);
                        indexList[fastTabIndex]++;
                        continue;
                    }
                }
                main += this.chatTabs[fastTabIndex].messageHtml(this.simpleDispFlagTime ? true : false, this.chatTabs[fastTabIndex].name, this.chatTabs[fastTabIndex].chatMessages[indexList[fastTabIndex]]);
                indexList[fastTabIndex]++;
            }
        }
        var str = head + main + last;
        return str;
    };
    var ChatTabList_1;
    ChatTabList = ChatTabList_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_2__["SyncObject"])('chat-tab-list')
    ], ChatTabList);
    return ChatTabList;
}(_core_synchronize_object_object_node__WEBPACK_IMPORTED_MODULE_3__["ObjectNode"]));



/***/ }),

/***/ "ZAI4":
/*!*******************************!*\
  !*** ./src/app/app.module.ts ***!
  \*******************************/
/*! exports provided: AppModule */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AppModule", function() { return AppModule; });
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/common */ "ofXK");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "fXoL");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/forms */ "3Pt+");
/* harmony import */ var _angular_platform_browser__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/platform-browser */ "jhN1");
/* harmony import */ var _angular_platform_browser_animations__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @angular/platform-browser/animations */ "R1ws");
/* harmony import */ var component_badge_badge_component__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! component/badge/badge.component */ "xKeS");
/* harmony import */ var component_card_stack_list_card_stack_list_component__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! component/card-stack-list/card-stack-list.component */ "k8BA");
/* harmony import */ var component_card_stack_card_stack_component__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! component/card-stack/card-stack.component */ "tLw4");
/* harmony import */ var component_card_card_component__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! component/card/card.component */ "4fXm");
/* harmony import */ var component_chat_input_chat_input_component__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! component/chat-input/chat-input.component */ "+l6h");
/* harmony import */ var component_chat_message_chat_message_component__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! component/chat-message/chat-message.component */ "KUN8");
/* harmony import */ var component_chat_palette_chat_palette_component__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! component/chat-palette/chat-palette.component */ "jC/+");
/* harmony import */ var component_chat_tab_setting_chat_tab_setting_component__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! component/chat-tab-setting/chat-tab-setting.component */ "yrmS");
/* harmony import */ var component_chat_tab_chat_tab_component__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! component/chat-tab/chat-tab.component */ "Wiwm");
/* harmony import */ var component_chat_window_chat_window_component__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! component/chat-window/chat-window.component */ "wPqI");
/* harmony import */ var component_chat_tachie_chat_tachie_component__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! component/chat-tachie/chat-tachie.component */ "ZAwR");
/* harmony import */ var component_chat_tachie_img_chat_tachie_img_component__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! component/chat-tachie-img/chat-tachie-img.component */ "/FZI");
/* harmony import */ var component_chat_color_setting_chat_color_setting_component__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! component/chat-color-setting/chat-color-setting.component */ "mAmu");
/* harmony import */ var component_chat_message_setting_chat_message_setting_component__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! component/chat-message-setting/chat-message-setting.component */ "wRt9");
/* harmony import */ var component_context_menu_context_menu_component__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! component/context-menu/context-menu.component */ "e1FT");
/* harmony import */ var component_dice_symbol_dice_symbol_component__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! component/dice-symbol/dice-symbol.component */ "FREB");
/* harmony import */ var component_file_selecter_file_selecter_component__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! component/file-selecter/file-selecter.component */ "FR7b");
/* harmony import */ var component_file_storage_file_storage_component__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! component/file-storage/file-storage.component */ "OOM5");
/* harmony import */ var component_game_character_generator_game_character_generator_component__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! component/game-character-generator/game-character-generator.component */ "0cI7");
/* harmony import */ var component_game_character_sheet_game_character_sheet_component__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! component/game-character-sheet/game-character-sheet.component */ "zXSY");
/* harmony import */ var component_game_character_game_character_component__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! component/game-character/game-character.component */ "AHLi");
/* harmony import */ var component_game_data_element_game_data_element_component__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! component/game-data-element/game-data-element.component */ "CvDi");
/* harmony import */ var component_game_data_element_buff_game_data_element_buff_component__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! component/game-data-element-buff/game-data-element-buff.component */ "JKO1");
/* harmony import */ var component_game_object_inventory_game_object_inventory_component__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! component/game-object-inventory/game-object-inventory.component */ "R1wr");
/* harmony import */ var component_game_table_mask_game_table_mask_component__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! component/game-table-mask/game-table-mask.component */ "3v9A");
/* harmony import */ var component_game_table_setting_game_table_setting_component__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! component/game-table-setting/game-table-setting.component */ "zhae");
/* harmony import */ var component_game_table_game_table_component__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! component/game-table/game-table.component */ "Umgr");
/* harmony import */ var component_jukebox_jukebox_component__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! component/jukebox/jukebox.component */ "TaI1");
/* harmony import */ var component_lobby_lobby_component__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(/*! component/lobby/lobby.component */ "tYii");
/* harmony import */ var ngx_linky__WEBPACK_IMPORTED_MODULE_34__ = __webpack_require__(/*! ngx-linky */ "fAHl");
/* harmony import */ var component_modal_modal_component__WEBPACK_IMPORTED_MODULE_35__ = __webpack_require__(/*! component/modal/modal.component */ "EfKb");
/* harmony import */ var component_network_indicator_network_indicator_component__WEBPACK_IMPORTED_MODULE_36__ = __webpack_require__(/*! component/network-indicator/network-indicator.component */ "kf6k");
/* harmony import */ var _ng_select_ng_select__WEBPACK_IMPORTED_MODULE_37__ = __webpack_require__(/*! @ng-select/ng-select */ "ZOsW");
/* harmony import */ var component_overview_panel_overview_panel_component__WEBPACK_IMPORTED_MODULE_38__ = __webpack_require__(/*! component/overview-panel/overview-panel.component */ "BLsz");
/* harmony import */ var component_password_check_password_check_component__WEBPACK_IMPORTED_MODULE_39__ = __webpack_require__(/*! component/password-check/password-check.component */ "pY18");
/* harmony import */ var component_peer_cursor_peer_cursor_component__WEBPACK_IMPORTED_MODULE_40__ = __webpack_require__(/*! component/peer-cursor/peer-cursor.component */ "gfSO");
/* harmony import */ var component_peer_menu_peer_menu_component__WEBPACK_IMPORTED_MODULE_41__ = __webpack_require__(/*! component/peer-menu/peer-menu.component */ "F+Vt");
/* harmony import */ var component_room_setting_room_setting_component__WEBPACK_IMPORTED_MODULE_42__ = __webpack_require__(/*! component/room-setting/room-setting.component */ "aL7I");
/* harmony import */ var component_terrain_terrain_component__WEBPACK_IMPORTED_MODULE_43__ = __webpack_require__(/*! component/terrain/terrain.component */ "4v+P");
/* harmony import */ var component_text_note_text_note_component__WEBPACK_IMPORTED_MODULE_44__ = __webpack_require__(/*! component/text-note/text-note.component */ "7AbD");
/* harmony import */ var component_text_view_text_view_component__WEBPACK_IMPORTED_MODULE_45__ = __webpack_require__(/*! component/text-view/text-view.component */ "AsCv");
/* harmony import */ var component_ui_panel_ui_panel_component__WEBPACK_IMPORTED_MODULE_46__ = __webpack_require__(/*! component/ui-panel/ui-panel.component */ "VnuA");
/* harmony import */ var directive_draggable_directive__WEBPACK_IMPORTED_MODULE_47__ = __webpack_require__(/*! directive/draggable.directive */ "z2Us");
/* harmony import */ var directive_movable_directive__WEBPACK_IMPORTED_MODULE_48__ = __webpack_require__(/*! directive/movable.directive */ "+Kyd");
/* harmony import */ var directive_resizable_directive__WEBPACK_IMPORTED_MODULE_49__ = __webpack_require__(/*! directive/resizable.directive */ "pCHt");
/* harmony import */ var directive_rotable_directive__WEBPACK_IMPORTED_MODULE_50__ = __webpack_require__(/*! directive/rotable.directive */ "3jYK");
/* harmony import */ var directive_tooltip_directive__WEBPACK_IMPORTED_MODULE_51__ = __webpack_require__(/*! directive/tooltip.directive */ "ts4F");
/* harmony import */ var pipe_safe_pipe__WEBPACK_IMPORTED_MODULE_52__ = __webpack_require__(/*! pipe/safe.pipe */ "6HCy");
/* harmony import */ var component_remote_controller_remote_controller_component__WEBPACK_IMPORTED_MODULE_53__ = __webpack_require__(/*! component/remote-controller/remote-controller.component */ "JKvL");
/* harmony import */ var component_controller_input_controller_input_component__WEBPACK_IMPORTED_MODULE_54__ = __webpack_require__(/*! component/controller-input/controller-input.component */ "ebOT");
/* harmony import */ var component_game_character_buff_view_game_character_buff_view_component__WEBPACK_IMPORTED_MODULE_55__ = __webpack_require__(/*! component/game-character-buff-view/game-character-buff-view.component */ "Uxye");
/* harmony import */ var component_cut_in_list_cut_in_list_component__WEBPACK_IMPORTED_MODULE_56__ = __webpack_require__(/*! component/cut-in-list/cut-in-list.component */ "SxCr");
/* harmony import */ var component_cut_in_bgm_cut_in_bgm_component__WEBPACK_IMPORTED_MODULE_57__ = __webpack_require__(/*! component/cut-in-bgm/cut-in-bgm.component */ "NnWs");
/* harmony import */ var component_cut_in_window_cut_in_window_component__WEBPACK_IMPORTED_MODULE_58__ = __webpack_require__(/*! component/cut-in-window/cut-in-window.component */ "xphS");
/* harmony import */ var component_dice_table_setting_dice_table_setting_component__WEBPACK_IMPORTED_MODULE_59__ = __webpack_require__(/*! component/dice-table-setting/dice-table-setting.component */ "OBv1");
/* harmony import */ var service_app_config_service__WEBPACK_IMPORTED_MODULE_60__ = __webpack_require__(/*! service/app-config.service */ "6VpD");
/* harmony import */ var service_chat_message_service__WEBPACK_IMPORTED_MODULE_61__ = __webpack_require__(/*! service/chat-message.service */ "PEfN");
/* harmony import */ var service_context_menu_service__WEBPACK_IMPORTED_MODULE_62__ = __webpack_require__(/*! service/context-menu.service */ "9FhF");
/* harmony import */ var service_game_object_inventory_service__WEBPACK_IMPORTED_MODULE_63__ = __webpack_require__(/*! service/game-object-inventory.service */ "LjVp");
/* harmony import */ var service_modal_service__WEBPACK_IMPORTED_MODULE_64__ = __webpack_require__(/*! service/modal.service */ "CE6K");
/* harmony import */ var service_panel_service__WEBPACK_IMPORTED_MODULE_65__ = __webpack_require__(/*! service/panel.service */ "M9xM");
/* harmony import */ var service_pointer_device_service__WEBPACK_IMPORTED_MODULE_66__ = __webpack_require__(/*! service/pointer-device.service */ "GPP8");
/* harmony import */ var service_tabletop_service__WEBPACK_IMPORTED_MODULE_67__ = __webpack_require__(/*! service/tabletop.service */ "Sdfd");
/* harmony import */ var _app_component__WEBPACK_IMPORTED_MODULE_68__ = __webpack_require__(/*! ./app.component */ "Sy1n");






































































var AppModule = /** @class */ (function () {
    function AppModule() {
    }
    AppModule.ɵmod = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdefineNgModule"]({ type: AppModule, bootstrap: [_app_component__WEBPACK_IMPORTED_MODULE_68__["AppComponent"]] });
    AppModule.ɵinj = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdefineInjector"]({ factory: function AppModule_Factory(t) { return new (t || AppModule)(); }, providers: [
            service_app_config_service__WEBPACK_IMPORTED_MODULE_60__["AppConfigService"],
            service_chat_message_service__WEBPACK_IMPORTED_MODULE_61__["ChatMessageService"],
            service_context_menu_service__WEBPACK_IMPORTED_MODULE_62__["ContextMenuService"],
            service_modal_service__WEBPACK_IMPORTED_MODULE_64__["ModalService"],
            service_game_object_inventory_service__WEBPACK_IMPORTED_MODULE_63__["GameObjectInventoryService"],
            service_panel_service__WEBPACK_IMPORTED_MODULE_65__["PanelService"],
            service_pointer_device_service__WEBPACK_IMPORTED_MODULE_66__["PointerDeviceService"],
            service_tabletop_service__WEBPACK_IMPORTED_MODULE_67__["TabletopService"],
        ], imports: [[
                _angular_platform_browser__WEBPACK_IMPORTED_MODULE_3__["BrowserModule"],
                _angular_platform_browser_animations__WEBPACK_IMPORTED_MODULE_4__["BrowserAnimationsModule"],
                _angular_common__WEBPACK_IMPORTED_MODULE_0__["CommonModule"],
                _angular_forms__WEBPACK_IMPORTED_MODULE_2__["FormsModule"],
                ngx_linky__WEBPACK_IMPORTED_MODULE_34__["LinkyModule"],
                _ng_select_ng_select__WEBPACK_IMPORTED_MODULE_37__["NgSelectModule"],
            ]] });
    return AppModule;
}());

(function () { (typeof ngJitMode === "undefined" || ngJitMode) && _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵsetNgModuleScope"](AppModule, { declarations: [_app_component__WEBPACK_IMPORTED_MODULE_68__["AppComponent"],
        component_badge_badge_component__WEBPACK_IMPORTED_MODULE_5__["BadgeComponent"],
        component_card_card_component__WEBPACK_IMPORTED_MODULE_8__["CardComponent"],
        component_card_stack_card_stack_component__WEBPACK_IMPORTED_MODULE_7__["CardStackComponent"],
        component_card_stack_list_card_stack_list_component__WEBPACK_IMPORTED_MODULE_6__["CardStackListComponent"],
        component_chat_message_chat_message_component__WEBPACK_IMPORTED_MODULE_10__["ChatMessageComponent"],
        component_chat_palette_chat_palette_component__WEBPACK_IMPORTED_MODULE_11__["ChatPaletteComponent"],
        component_chat_tab_chat_tab_component__WEBPACK_IMPORTED_MODULE_13__["ChatTabComponent"],
        component_chat_tab_setting_chat_tab_setting_component__WEBPACK_IMPORTED_MODULE_12__["ChatTabSettingComponent"],
        component_chat_window_chat_window_component__WEBPACK_IMPORTED_MODULE_14__["ChatWindowComponent"],
        component_chat_tachie_chat_tachie_component__WEBPACK_IMPORTED_MODULE_15__["ChatTachieComponent"],
        component_chat_tachie_img_chat_tachie_img_component__WEBPACK_IMPORTED_MODULE_16__["ChatTachieImageComponent"],
        component_chat_color_setting_chat_color_setting_component__WEBPACK_IMPORTED_MODULE_17__["ChatColorSettingComponent"],
        component_chat_message_setting_chat_message_setting_component__WEBPACK_IMPORTED_MODULE_18__["ChatMessageSettingComponent"],
        component_context_menu_context_menu_component__WEBPACK_IMPORTED_MODULE_19__["ContextMenuComponent"],
        component_remote_controller_remote_controller_component__WEBPACK_IMPORTED_MODULE_53__["RemoteControllerComponent"],
        component_controller_input_controller_input_component__WEBPACK_IMPORTED_MODULE_54__["ControllerInputComponent"],
        component_game_character_buff_view_game_character_buff_view_component__WEBPACK_IMPORTED_MODULE_55__["GameCharacterBuffViewComponent"],
        component_file_selecter_file_selecter_component__WEBPACK_IMPORTED_MODULE_21__["FileSelecterComponent"],
        component_file_storage_file_storage_component__WEBPACK_IMPORTED_MODULE_22__["FileStorageComponent"],
        component_game_character_generator_game_character_generator_component__WEBPACK_IMPORTED_MODULE_23__["GameCharacterGeneratorComponent"],
        component_game_character_sheet_game_character_sheet_component__WEBPACK_IMPORTED_MODULE_24__["GameCharacterSheetComponent"],
        component_game_character_game_character_component__WEBPACK_IMPORTED_MODULE_25__["GameCharacterComponent"],
        component_game_data_element_game_data_element_component__WEBPACK_IMPORTED_MODULE_26__["GameDataElementComponent"],
        component_game_data_element_buff_game_data_element_buff_component__WEBPACK_IMPORTED_MODULE_27__["GameDataElementBuffComponent"],
        component_game_object_inventory_game_object_inventory_component__WEBPACK_IMPORTED_MODULE_28__["GameObjectInventoryComponent"],
        component_game_table_mask_game_table_mask_component__WEBPACK_IMPORTED_MODULE_29__["GameTableMaskComponent"],
        component_game_table_setting_game_table_setting_component__WEBPACK_IMPORTED_MODULE_30__["GameTableSettingComponent"],
        component_game_table_game_table_component__WEBPACK_IMPORTED_MODULE_31__["GameTableComponent"],
        component_jukebox_jukebox_component__WEBPACK_IMPORTED_MODULE_32__["JukeboxComponent"],
        component_cut_in_list_cut_in_list_component__WEBPACK_IMPORTED_MODULE_56__["CutInListComponent"],
        component_cut_in_bgm_cut_in_bgm_component__WEBPACK_IMPORTED_MODULE_57__["CutInBgmComponent"],
        component_cut_in_window_cut_in_window_component__WEBPACK_IMPORTED_MODULE_58__["CutInWindowComponent"],
        component_dice_table_setting_dice_table_setting_component__WEBPACK_IMPORTED_MODULE_59__["DiceTableSettingComponent"],
        component_lobby_lobby_component__WEBPACK_IMPORTED_MODULE_33__["LobbyComponent"],
        component_modal_modal_component__WEBPACK_IMPORTED_MODULE_35__["ModalComponent"],
        component_overview_panel_overview_panel_component__WEBPACK_IMPORTED_MODULE_38__["OverviewPanelComponent"],
        component_password_check_password_check_component__WEBPACK_IMPORTED_MODULE_39__["PasswordCheckComponent"],
        component_peer_menu_peer_menu_component__WEBPACK_IMPORTED_MODULE_41__["PeerMenuComponent"],
        component_room_setting_room_setting_component__WEBPACK_IMPORTED_MODULE_42__["RoomSettingComponent"],
        component_ui_panel_ui_panel_component__WEBPACK_IMPORTED_MODULE_46__["UIPanelComponent"],
        pipe_safe_pipe__WEBPACK_IMPORTED_MODULE_52__["SafePipe"],
        component_chat_palette_chat_palette_component__WEBPACK_IMPORTED_MODULE_11__["ChatPaletteComponent"],
        component_text_view_text_view_component__WEBPACK_IMPORTED_MODULE_45__["TextViewComponent"],
        component_terrain_terrain_component__WEBPACK_IMPORTED_MODULE_43__["TerrainComponent"],
        component_peer_cursor_peer_cursor_component__WEBPACK_IMPORTED_MODULE_40__["PeerCursorComponent"],
        component_text_note_text_note_component__WEBPACK_IMPORTED_MODULE_44__["TextNoteComponent"],
        directive_movable_directive__WEBPACK_IMPORTED_MODULE_48__["MovableDirective"],
        directive_rotable_directive__WEBPACK_IMPORTED_MODULE_50__["RotableDirective"],
        component_network_indicator_network_indicator_component__WEBPACK_IMPORTED_MODULE_36__["NetworkIndicatorComponent"],
        component_dice_symbol_dice_symbol_component__WEBPACK_IMPORTED_MODULE_20__["DiceSymbolComponent"],
        directive_tooltip_directive__WEBPACK_IMPORTED_MODULE_51__["TooltipDirective"],
        directive_draggable_directive__WEBPACK_IMPORTED_MODULE_47__["DraggableDirective"],
        directive_resizable_directive__WEBPACK_IMPORTED_MODULE_49__["ResizableDirective"],
        component_chat_input_chat_input_component__WEBPACK_IMPORTED_MODULE_9__["ChatInputComponent"]], imports: [_angular_platform_browser__WEBPACK_IMPORTED_MODULE_3__["BrowserModule"],
        _angular_platform_browser_animations__WEBPACK_IMPORTED_MODULE_4__["BrowserAnimationsModule"],
        _angular_common__WEBPACK_IMPORTED_MODULE_0__["CommonModule"],
        _angular_forms__WEBPACK_IMPORTED_MODULE_2__["FormsModule"],
        ngx_linky__WEBPACK_IMPORTED_MODULE_34__["LinkyModule"],
        _ng_select_ng_select__WEBPACK_IMPORTED_MODULE_37__["NgSelectModule"]] }); })();
/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵsetClassMetadata"](AppModule, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_1__["NgModule"],
        args: [{
                declarations: [
                    _app_component__WEBPACK_IMPORTED_MODULE_68__["AppComponent"],
                    component_badge_badge_component__WEBPACK_IMPORTED_MODULE_5__["BadgeComponent"],
                    component_card_card_component__WEBPACK_IMPORTED_MODULE_8__["CardComponent"],
                    component_card_stack_card_stack_component__WEBPACK_IMPORTED_MODULE_7__["CardStackComponent"],
                    component_card_stack_list_card_stack_list_component__WEBPACK_IMPORTED_MODULE_6__["CardStackListComponent"],
                    component_chat_message_chat_message_component__WEBPACK_IMPORTED_MODULE_10__["ChatMessageComponent"],
                    component_chat_palette_chat_palette_component__WEBPACK_IMPORTED_MODULE_11__["ChatPaletteComponent"],
                    component_chat_tab_chat_tab_component__WEBPACK_IMPORTED_MODULE_13__["ChatTabComponent"],
                    component_chat_tab_setting_chat_tab_setting_component__WEBPACK_IMPORTED_MODULE_12__["ChatTabSettingComponent"],
                    component_chat_window_chat_window_component__WEBPACK_IMPORTED_MODULE_14__["ChatWindowComponent"],
                    component_chat_tachie_chat_tachie_component__WEBPACK_IMPORTED_MODULE_15__["ChatTachieComponent"],
                    component_chat_tachie_img_chat_tachie_img_component__WEBPACK_IMPORTED_MODULE_16__["ChatTachieImageComponent"],
                    component_chat_color_setting_chat_color_setting_component__WEBPACK_IMPORTED_MODULE_17__["ChatColorSettingComponent"],
                    component_chat_message_setting_chat_message_setting_component__WEBPACK_IMPORTED_MODULE_18__["ChatMessageSettingComponent"],
                    component_context_menu_context_menu_component__WEBPACK_IMPORTED_MODULE_19__["ContextMenuComponent"],
                    component_remote_controller_remote_controller_component__WEBPACK_IMPORTED_MODULE_53__["RemoteControllerComponent"],
                    component_controller_input_controller_input_component__WEBPACK_IMPORTED_MODULE_54__["ControllerInputComponent"],
                    component_game_character_buff_view_game_character_buff_view_component__WEBPACK_IMPORTED_MODULE_55__["GameCharacterBuffViewComponent"],
                    component_file_selecter_file_selecter_component__WEBPACK_IMPORTED_MODULE_21__["FileSelecterComponent"],
                    component_file_storage_file_storage_component__WEBPACK_IMPORTED_MODULE_22__["FileStorageComponent"],
                    component_game_character_generator_game_character_generator_component__WEBPACK_IMPORTED_MODULE_23__["GameCharacterGeneratorComponent"],
                    component_game_character_sheet_game_character_sheet_component__WEBPACK_IMPORTED_MODULE_24__["GameCharacterSheetComponent"],
                    component_game_character_game_character_component__WEBPACK_IMPORTED_MODULE_25__["GameCharacterComponent"],
                    component_game_data_element_game_data_element_component__WEBPACK_IMPORTED_MODULE_26__["GameDataElementComponent"],
                    component_game_data_element_buff_game_data_element_buff_component__WEBPACK_IMPORTED_MODULE_27__["GameDataElementBuffComponent"],
                    component_game_object_inventory_game_object_inventory_component__WEBPACK_IMPORTED_MODULE_28__["GameObjectInventoryComponent"],
                    component_game_table_mask_game_table_mask_component__WEBPACK_IMPORTED_MODULE_29__["GameTableMaskComponent"],
                    component_game_table_setting_game_table_setting_component__WEBPACK_IMPORTED_MODULE_30__["GameTableSettingComponent"],
                    component_game_table_game_table_component__WEBPACK_IMPORTED_MODULE_31__["GameTableComponent"],
                    component_jukebox_jukebox_component__WEBPACK_IMPORTED_MODULE_32__["JukeboxComponent"],
                    component_cut_in_list_cut_in_list_component__WEBPACK_IMPORTED_MODULE_56__["CutInListComponent"],
                    component_cut_in_bgm_cut_in_bgm_component__WEBPACK_IMPORTED_MODULE_57__["CutInBgmComponent"],
                    component_cut_in_window_cut_in_window_component__WEBPACK_IMPORTED_MODULE_58__["CutInWindowComponent"],
                    component_dice_table_setting_dice_table_setting_component__WEBPACK_IMPORTED_MODULE_59__["DiceTableSettingComponent"],
                    component_lobby_lobby_component__WEBPACK_IMPORTED_MODULE_33__["LobbyComponent"],
                    component_modal_modal_component__WEBPACK_IMPORTED_MODULE_35__["ModalComponent"],
                    component_overview_panel_overview_panel_component__WEBPACK_IMPORTED_MODULE_38__["OverviewPanelComponent"],
                    component_password_check_password_check_component__WEBPACK_IMPORTED_MODULE_39__["PasswordCheckComponent"],
                    component_peer_menu_peer_menu_component__WEBPACK_IMPORTED_MODULE_41__["PeerMenuComponent"],
                    component_room_setting_room_setting_component__WEBPACK_IMPORTED_MODULE_42__["RoomSettingComponent"],
                    component_ui_panel_ui_panel_component__WEBPACK_IMPORTED_MODULE_46__["UIPanelComponent"],
                    pipe_safe_pipe__WEBPACK_IMPORTED_MODULE_52__["SafePipe"],
                    component_chat_palette_chat_palette_component__WEBPACK_IMPORTED_MODULE_11__["ChatPaletteComponent"],
                    component_text_view_text_view_component__WEBPACK_IMPORTED_MODULE_45__["TextViewComponent"],
                    component_terrain_terrain_component__WEBPACK_IMPORTED_MODULE_43__["TerrainComponent"],
                    component_peer_cursor_peer_cursor_component__WEBPACK_IMPORTED_MODULE_40__["PeerCursorComponent"],
                    component_text_note_text_note_component__WEBPACK_IMPORTED_MODULE_44__["TextNoteComponent"],
                    directive_movable_directive__WEBPACK_IMPORTED_MODULE_48__["MovableDirective"],
                    directive_rotable_directive__WEBPACK_IMPORTED_MODULE_50__["RotableDirective"],
                    component_network_indicator_network_indicator_component__WEBPACK_IMPORTED_MODULE_36__["NetworkIndicatorComponent"],
                    component_dice_symbol_dice_symbol_component__WEBPACK_IMPORTED_MODULE_20__["DiceSymbolComponent"],
                    directive_tooltip_directive__WEBPACK_IMPORTED_MODULE_51__["TooltipDirective"],
                    directive_draggable_directive__WEBPACK_IMPORTED_MODULE_47__["DraggableDirective"],
                    directive_resizable_directive__WEBPACK_IMPORTED_MODULE_49__["ResizableDirective"],
                    component_chat_input_chat_input_component__WEBPACK_IMPORTED_MODULE_9__["ChatInputComponent"],
                ],
                imports: [
                    _angular_platform_browser__WEBPACK_IMPORTED_MODULE_3__["BrowserModule"],
                    _angular_platform_browser_animations__WEBPACK_IMPORTED_MODULE_4__["BrowserAnimationsModule"],
                    _angular_common__WEBPACK_IMPORTED_MODULE_0__["CommonModule"],
                    _angular_forms__WEBPACK_IMPORTED_MODULE_2__["FormsModule"],
                    ngx_linky__WEBPACK_IMPORTED_MODULE_34__["LinkyModule"],
                    _ng_select_ng_select__WEBPACK_IMPORTED_MODULE_37__["NgSelectModule"],
                ],
                providers: [
                    service_app_config_service__WEBPACK_IMPORTED_MODULE_60__["AppConfigService"],
                    service_chat_message_service__WEBPACK_IMPORTED_MODULE_61__["ChatMessageService"],
                    service_context_menu_service__WEBPACK_IMPORTED_MODULE_62__["ContextMenuService"],
                    service_modal_service__WEBPACK_IMPORTED_MODULE_64__["ModalService"],
                    service_game_object_inventory_service__WEBPACK_IMPORTED_MODULE_63__["GameObjectInventoryService"],
                    service_panel_service__WEBPACK_IMPORTED_MODULE_65__["PanelService"],
                    service_pointer_device_service__WEBPACK_IMPORTED_MODULE_66__["PointerDeviceService"],
                    service_tabletop_service__WEBPACK_IMPORTED_MODULE_67__["TabletopService"],
                ],
                bootstrap: [_app_component__WEBPACK_IMPORTED_MODULE_68__["AppComponent"]]
            }]
    }], null, null); })();


/***/ }),

/***/ "ZAwR":
/*!****************************************************************!*\
  !*** ./src/app/component/chat-tachie/chat-tachie.component.ts ***!
  \****************************************************************/
/*! exports provided: ChatTachieComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ChatTachieComponent", function() { return ChatTachieComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "fXoL");
/* harmony import */ var _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @udonarium/core/synchronize-object/object-store */ "hm7o");
/* harmony import */ var _udonarium_core_system__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @udonarium/core/system */ "yNnI");
/* harmony import */ var component_chat_message_setting_chat_message_setting_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! component/chat-message-setting/chat-message-setting.component */ "wRt9");
/* harmony import */ var service_chat_message_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! service/chat-message.service */ "PEfN");
/* harmony import */ var service_panel_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! service/panel.service */ "M9xM");
/* harmony import */ var service_pointer_device_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! service/pointer-device.service */ "GPP8");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @angular/forms */ "3Pt+");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @angular/common */ "ofXK");
/* harmony import */ var component_chat_tachie_img_chat_tachie_img_component__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! component/chat-tachie-img/chat-tachie-img.component */ "/FZI");











var _c0 = ["tachieArea"];
function ChatTachieComponent_ng_container_7_Template(rf, ctx) { if (rf & 1) {
    var _r5 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "input", 7);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("ngModelChange", function ChatTachieComponent_ng_container_7_Template_input_ngModelChange_1_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r5); var ctx_r4 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](); return ctx_r4.chatTab.tachieDispFlag = $event; });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngModel", ctx_r1.chatTab.tachieDispFlag);
} }
function ChatTachieComponent_ng_container_8_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](1, "input", 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerEnd"]();
} }
function ChatTachieComponent_ng_container_12_Template(rf, ctx) { if (rf & 1) {
    var _r7 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "input", 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("ngModelChange", function ChatTachieComponent_ng_container_12_Template_input_ngModelChange_1_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r7); var ctx_r6 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](); return ctx_r6.chatTab.chatSimpleDispFlag = $event; })("click", function ChatTachieComponent_ng_container_12_Template_input_click_1_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r7); var ctx_r8 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](); return ctx_r8.changeSimpleDisp(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var ctx_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngModel", ctx_r3.chatTab.chatSimpleDispFlag);
} }
var _c1 = function (a0) { return { "height": a0 }; };
var ChatTachieComponent = /** @class */ (function () {
    function ChatTachieComponent(chatMessageService, changeDetectionRef, panelService, pointerDeviceService) {
        this.chatMessageService = chatMessageService;
        this.changeDetectionRef = changeDetectionRef;
        this.panelService = panelService;
        this.pointerDeviceService = pointerDeviceService;
        this.chatTabidentifier = '';
        this._tachieAreaWidth = 0;
    }
    Object.defineProperty(ChatTachieComponent.prototype, "chatTab", {
        get: function () { return _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_1__["ObjectStore"].instance.get(this.chatTabidentifier); },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ChatTachieComponent.prototype, "chatTabList", {
        get: function () { return _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_1__["ObjectStore"].instance.get('ChatTabList'); },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ChatTachieComponent.prototype, "tachieAreaWidth", {
        get: function () {
            return this._tachieAreaWidth;
        },
        enumerable: false,
        configurable: true
    });
    ChatTachieComponent.prototype.chkHeight = function (newNum) {
        if (newNum <= this.chatTabList.minTachieSize)
            this.chatTabList.tachieHeightValue = this.chatTabList.minTachieSize;
        if (newNum >= this.chatTabList.maxTachieSize)
            this.chatTabList.tachieHeightValue = this.chatTabList.maxTachieSize;
    };
    Object.defineProperty(ChatTachieComponent.prototype, "tachieAreaHeight", {
        get: function () {
            if (this.chatTab) {
                if (this.chatTab.tachieDispFlag) {
                    if (this.chatTabList.isTachieInWindow) {
                        return this.chatTabList.tachieHeightValue;
                    }
                }
            }
            return 0;
        },
        enumerable: false,
        configurable: true
    });
    ChatTachieComponent.prototype.ngAfterViewInit = function () {
    };
    ChatTachieComponent.prototype.ngAfterViewChecked = function () {
    };
    ChatTachieComponent.prototype.shoeMessageSetting = function () {
        var coordinate = this.pointerDeviceService.pointers[0];
        var title = 'チャット詳細設定';
        var option = { title: title, left: coordinate.x + 50, top: coordinate.y - 200, width: 340, height: 220 };
        var component = this.panelService.open(component_chat_message_setting_chat_message_setting_component__WEBPACK_IMPORTED_MODULE_3__["ChatMessageSettingComponent"], option);
    };
    ChatTachieComponent.prototype.ngOnInit = function () {
    };
    ChatTachieComponent.prototype.ngOnDestroy = function () {
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_2__["EventSystem"].unregister(this);
    };
    ChatTachieComponent.prototype.trackByChatTab = function (index, chatTab) {
        return chatTab.identifier;
    };
    ChatTachieComponent.prototype.changeSimpleDisp = function () {
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_2__["EventSystem"].trigger('RE_DRAW_CHAT', {});
    };
    ChatTachieComponent.ɵfac = function ChatTachieComponent_Factory(t) { return new (t || ChatTachieComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](service_chat_message_service__WEBPACK_IMPORTED_MODULE_4__["ChatMessageService"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["ChangeDetectorRef"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](service_panel_service__WEBPACK_IMPORTED_MODULE_5__["PanelService"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](service_pointer_device_service__WEBPACK_IMPORTED_MODULE_6__["PointerDeviceService"])); };
    ChatTachieComponent.ɵcmp = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineComponent"]({ type: ChatTachieComponent, selectors: [["chat-tachie"]], viewQuery: function ChatTachieComponent_Query(rf, ctx) { if (rf & 1) {
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵviewQuery"](_c0, true, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ElementRef"]);
        } if (rf & 2) {
            var _t = void 0;
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵqueryRefresh"](_t = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵloadQuery"]()) && (ctx.tachieArea = _t.first);
        } }, inputs: { chatTabidentifier: "chatTabidentifier" }, decls: 17, vars: 12, consts: [["id", "tachie-component_", 3, "ngStyle"], ["tachieArea", ""], [3, "chatTabidentifier", "isTilteTop", "dispByMouse"], [4, "ngIf"], ["type", "number", "name", "tachieHeight", 3, "ngModel", "min", "max", "ngModelChange", "change"], [1, "message-setting", "small-font", 3, "click"], [1, "material-icons", "small-font"], ["type", "checkbox", "value", "tachieDispFlag", "name", "tachieDispFlag", 3, "ngModel", "ngModelChange"], ["type", "checkbox"], ["type", "checkbox", "value", "chatSimpleDispFlag", "name", "chatSimpleDispFlag", 3, "ngModel", "ngModelChange", "click"]], template: function ChatTachieComponent_Template(rf, ctx) { if (rf & 1) {
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div");
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "form");
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](2, "div", 0, 1);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](4, "chat-tachie-img", 2);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](5, "div");
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](6, " \u986F\u793A\u7ACB\u7E6A: ");
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](7, ChatTachieComponent_ng_container_7_Template, 2, 1, "ng-container", 3);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](8, ChatTachieComponent_ng_container_8_Template, 2, 0, "ng-container", 3);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](9, " /Size: ");
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](10, "input", 4);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("ngModelChange", function ChatTachieComponent_Template_input_ngModelChange_10_listener($event) { return ctx.chatTabList.tachieHeightValue = $event; })("change", function ChatTachieComponent_Template_input_change_10_listener($event) { return ctx.chkHeight($event.target.value); });
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](11, " \u804A\u5929\u7C21\u6613\u8868\u793A: ");
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](12, ChatTachieComponent_ng_container_12_Template, 2, 1, "ng-container", 3);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](13, "button", 5);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function ChatTachieComponent_Template_button_click_13_listener() { return ctx.shoeMessageSetting(); });
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](14, "i", 6);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](15, "settings");
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](16, "\u8A73\u7D30");
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        } if (rf & 2) {
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngStyle", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction1"](10, _c1, ctx.tachieAreaHeight + "px"));
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("chatTabidentifier", ctx.chatTabidentifier)("isTilteTop", 0)("dispByMouse", true);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx.chatTab);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", !ctx.chatTab);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpropertyInterpolate"]("min", ctx.chatTabList.minTachieSize);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpropertyInterpolate"]("max", ctx.chatTabList.maxTachieSize);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngModel", ctx.chatTabList.tachieHeightValue);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx.chatTab);
        } }, directives: [_angular_forms__WEBPACK_IMPORTED_MODULE_7__["ɵangular_packages_forms_forms_y"], _angular_forms__WEBPACK_IMPORTED_MODULE_7__["NgControlStatusGroup"], _angular_forms__WEBPACK_IMPORTED_MODULE_7__["NgForm"], _angular_common__WEBPACK_IMPORTED_MODULE_8__["NgStyle"], component_chat_tachie_img_chat_tachie_img_component__WEBPACK_IMPORTED_MODULE_9__["ChatTachieImageComponent"], _angular_common__WEBPACK_IMPORTED_MODULE_8__["NgIf"], _angular_forms__WEBPACK_IMPORTED_MODULE_7__["NumberValueAccessor"], _angular_forms__WEBPACK_IMPORTED_MODULE_7__["DefaultValueAccessor"], _angular_forms__WEBPACK_IMPORTED_MODULE_7__["NgControlStatus"], _angular_forms__WEBPACK_IMPORTED_MODULE_7__["NgModel"], _angular_forms__WEBPACK_IMPORTED_MODULE_7__["CheckboxControlValueAccessor"]], styles: [".message-setting[_ngcontent-%COMP%] {\r\n  background-color: transparent;\r\n  color: #444; \r\n  border: solid 1px #555;\r\n  padding: 2px 4px;\r\n  border-radius: 5px;\r\n  cursor: pointer;\r\n}\r\n\r\n.message-setting[_ngcontent-%COMP%]:hover {\r\n  background-color: #888;\r\n  color: #eee;\r\n  border: solid 1px #555;\r\n}\r\n\r\n.small-font[_ngcontent-%COMP%] {\r\n  font-size: 12px;\r\n  vertical-align: middle;\r\n}\r\n\r\n.tachie-image-box[_ngcontent-%COMP%] {\r\n\r\n\r\n}\r\n\r\nimg[_ngcontent-%COMP%]{\r\n}\r\n\r\n.tachie-image[_ngcontent-%COMP%] {\r\n  position: absolute;\r\n  height:250px;\r\n  padding: 0;\r\n  vertical-align: bottom;\r\n  z-index: 1;\r\n\r\n}\r\n\r\n\r\n\r\n.tachie[_ngcontent-%COMP%]{\r\n\r\n\r\n}\r\n\r\n.pos00[_ngcontent-%COMP%]{\r\n}\r\n\r\n.pos01[_ngcontent-%COMP%]{\r\n\r\n}\r\n\r\n.pos02[_ngcontent-%COMP%]{\r\n\r\n}\r\n\r\n.pos03[_ngcontent-%COMP%]{\r\n\r\n}\r\n\r\n.character-image-box[_ngcontent-%COMP%] {\r\n}\r\n\r\n.character-image[_ngcontent-%COMP%] {\r\n}\r\n\r\n.component[_ngcontent-%COMP%] {\r\n\r\n}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNoYXQtdGFjaGllLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSw2QkFBNkI7RUFDN0IsV0FBVztFQUNYLHNCQUFzQjtFQUN0QixnQkFBZ0I7RUFDaEIsa0JBQWtCO0VBQ2xCLGVBQWU7QUFDakI7O0FBRUE7RUFDRSxzQkFBc0I7RUFDdEIsV0FBVztFQUNYLHNCQUFzQjtBQUN4Qjs7QUFFQTtFQUNFLGVBQWU7RUFDZixzQkFBc0I7QUFDeEI7O0FBR0E7QUFDQTs7Q0FFQztBQUNEOzs7Ozs7O0NBT0M7QUFDRDs7QUFHQTtBQUNBOztBQUVBO0VBQ0Usa0JBQWtCO0VBQ2xCLFlBQVk7RUFDWixVQUFVO0VBQ1Ysc0JBQXNCO0VBQ3RCLFVBQVU7QUFDWiw0QkFBNEI7QUFDNUI7O0FBRUE7Ozs7Ozs7Ozs7O0NBV0M7O0FBRUQ7O0FBRUE7O0NBRUM7QUFDRDs7QUFFQTtBQUNBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUtBO0FBQ0E7O0FBRUE7QUFDQTs7QUFHQTtBQUNBOzs7Ozs7Ozs7O0NBVUM7QUFDRCIsImZpbGUiOiJjaGF0LXRhY2hpZS5jb21wb25lbnQuY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLm1lc3NhZ2Utc2V0dGluZyB7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogdHJhbnNwYXJlbnQ7XHJcbiAgY29sb3I6ICM0NDQ7IFxyXG4gIGJvcmRlcjogc29saWQgMXB4ICM1NTU7XHJcbiAgcGFkZGluZzogMnB4IDRweDtcclxuICBib3JkZXItcmFkaXVzOiA1cHg7XHJcbiAgY3Vyc29yOiBwb2ludGVyO1xyXG59XHJcblxyXG4ubWVzc2FnZS1zZXR0aW5nOmhvdmVyIHtcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiAjODg4O1xyXG4gIGNvbG9yOiAjZWVlO1xyXG4gIGJvcmRlcjogc29saWQgMXB4ICM1NTU7XHJcbn1cclxuXHJcbi5zbWFsbC1mb250IHtcclxuICBmb250LXNpemU6IDEycHg7XHJcbiAgdmVydGljYWwtYWxpZ246IG1pZGRsZTtcclxufVxyXG5cclxuXHJcbi50YWNoaWUtaW1hZ2UtYm94IHtcclxuLypcclxuICBoZWlnaHQ6MjUwcHg7XHJcbiovXHJcbi8qICB3aWR0aDogMTAwcHg7XHJcbiAgbWF4LWhlaWdodDogMTIwcHg7XHJcbiAgb3ZlcmZsb3c6IGhpZGRlbjtcclxuICB2ZXJ0aWNhbC1hbGlnbjogYm90dG9tO1xyXG4gIG1hcmdpbi1sZWZ0OiAwLjVlbTtcclxuICBtYXJnaW4tYm90dG9tOiAtNnB4O1xyXG4gIGJvcmRlci1yYWRpdXM6IDFlbTtcclxuKi9cclxufVxyXG5cclxuXHJcbmltZ3tcclxufVxyXG5cclxuLnRhY2hpZS1pbWFnZSB7XHJcbiAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gIGhlaWdodDoyNTBweDtcclxuICBwYWRkaW5nOiAwO1xyXG4gIHZlcnRpY2FsLWFsaWduOiBib3R0b207XHJcbiAgei1pbmRleDogMTtcclxuLyogIHZlcnRpY2FsLWFsaWduOiBib3R0b207Ki9cclxufVxyXG5cclxuLypcclxuLnRhY2hpZWFyZWF7XHJcbiAgd2lkdGg6MTAwJTtcclxuXHJcbiAgb3ZlcmZsb3c6IGhpZGRlbjtcclxuICB2ZXJ0aWNhbC1hbGlnbjogYm90dG9tO1xyXG4gIG1hcmdpbi1sZWZ0OiAwLjVlbTtcclxuICBtYXJnaW4tYm90dG9tOiAtNnB4O1xyXG4gIGJvcmRlci1yYWRpdXM6IDFlbTtcclxuICB6LWluZGV4OiAxO1xyXG59XHJcbiovXHJcblxyXG4udGFjaGlle1xyXG5cclxuLyogXHJcbiBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiovXHJcbn1cclxuXHJcbi5wb3MwMHtcclxufVxyXG5cclxuLnBvczAxe1xyXG5cclxufVxyXG5cclxuLnBvczAye1xyXG5cclxufVxyXG5cclxuLnBvczAze1xyXG5cclxufVxyXG5cclxuXHJcblxyXG5cclxuLmNoYXJhY3Rlci1pbWFnZS1ib3gge1xyXG59XHJcblxyXG4uY2hhcmFjdGVyLWltYWdlIHtcclxufVxyXG5cclxuXHJcbi5jb21wb25lbnQge1xyXG4vKlxyXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcclxuICBtYXgtaGVpZ2h0OiAxMDAlO1xyXG4gIG1heC13aWR0aDogMTAwJTtcclxuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xyXG4gIG92ZXJmbG93OiB2aXNpYmxlO1xyXG4gIGNvbG9yOiAjNDQ0O1xyXG4gIHotaW5kZXg6IDkwMDA7XHJcbiAgb3ZlcnNjcm9sbC1iZWhhdmlvcjogY29udGFpbjtcclxuICAtd2Via2l0LW92ZXJmbG93LXNjcm9sbGluZzogdG91Y2g7XHJcbiovXHJcbn1cclxuXHJcblxyXG5cclxuIl19 */"] });
    return ChatTachieComponent;
}());

/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](ChatTachieComponent, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"],
        args: [{
                selector: 'chat-tachie',
                templateUrl: './chat-tachie.component.html',
                styleUrls: ['./chat-tachie.component.css']
            }]
    }], function () { return [{ type: service_chat_message_service__WEBPACK_IMPORTED_MODULE_4__["ChatMessageService"] }, { type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ChangeDetectorRef"] }, { type: service_panel_service__WEBPACK_IMPORTED_MODULE_5__["PanelService"] }, { type: service_pointer_device_service__WEBPACK_IMPORTED_MODULE_6__["PointerDeviceService"] }]; }, { chatTabidentifier: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], tachieArea: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"],
            args: ['tachieArea', { read: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ElementRef"] }]
        }] }); })();


/***/ }),

/***/ "aL7I":
/*!******************************************************************!*\
  !*** ./src/app/component/room-setting/room-setting.component.ts ***!
  \******************************************************************/
/*! exports provided: RoomSettingComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RoomSettingComponent", function() { return RoomSettingComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "fXoL");
/* harmony import */ var _udonarium_core_system_network_peer_context__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @udonarium/core/system/network/peer-context */ "ztsr");
/* harmony import */ var _udonarium_core_system__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @udonarium/core/system */ "yNnI");
/* harmony import */ var _udonarium_peer_cursor__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @udonarium/peer-cursor */ "+UEV");
/* harmony import */ var service_panel_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! service/panel.service */ "M9xM");
/* harmony import */ var service_modal_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! service/modal.service */ "CE6K");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @angular/common */ "ofXK");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @angular/forms */ "3Pt+");









function RoomSettingComponent_div_0_div_10_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "div", 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](2, " \u5FC5\u9808\u6709\u623F\u9593\u540D\u7A31\u3002 ");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](3, "div", 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](4, " \u5FC5\u9808\u6709\u623F\u9593\u540D\u7A31\u3002 ");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](5, "div", 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](6, " \u623F\u9593\u540D\u524D\u9577\u5EA6\u8981\u572828\u4EE5\u5167\u3002 ");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    var _r3 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵreference"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("hidden", !_r3.errors.required);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("hidden", !_r3.errors.minlength);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("hidden", !_r3.errors.maxlength);
} }
function RoomSettingComponent_div_0_div_11_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "div", 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](2, " \u5BC6\u78BC\u9577\u5EA6\u4E0D\u5F97\u8D85\u904E12\u3002 ");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    var _r4 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵreference"](8);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("hidden", !_r4.errors.maxlength);
} }
function RoomSettingComponent_div_0_div_12_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](1, " \u540D\u7A31\u548C\u5BC6\u78BC\u7684\u52A0\u8D77\u4F86\u7684\u9577\u5EA6\u4F3C\u4E4E\u592A\u9577\u3002 \u5617\u8A66\u8B93\u5B83\u77ED\u4E00\u4E9B\u3002 ");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} }
function RoomSettingComponent_div_0_Template(rf, ctx) { if (rf & 1) {
    var _r9 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](2, "\u623F\u9593\u540D : ");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](3, "input", 3, 4);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("input", function RoomSettingComponent_div_0_Template_input_input_3_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r9); var ctx_r8 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](); return ctx_r8.calcPeerId($event.target.value, ctx_r8.password); })("ngModelChange", function RoomSettingComponent_div_0_Template_input_ngModelChange_3_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r9); var ctx_r10 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](); return ctx_r10.roomName = $event; });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](5, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](6, "\u5BC6\u78BC: ");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](7, "input", 5, 6);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("input", function RoomSettingComponent_div_0_Template_input_input_7_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r9); var ctx_r11 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](); return ctx_r11.calcPeerId(ctx_r11.roomName, $event.target.value); })("ngModelChange", function RoomSettingComponent_div_0_Template_input_ngModelChange_7_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r9); var ctx_r12 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](); return ctx_r12.password = $event; });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](9, "hr");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](10, RoomSettingComponent_div_0_div_10_Template, 7, 3, "div", 7);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](11, RoomSettingComponent_div_0_div_11_Template, 3, 1, "div", 7);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](12, RoomSettingComponent_div_0_div_12_Template, 2, 0, "div", 7);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](13, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](14, "button", 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function RoomSettingComponent_div_0_Template_button_click_14_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r9); var ctx_r13 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](); return ctx_r13.createRoom(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](15, "\u65B0\u589E\u623F\u9593");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    var _r3 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵreference"](4);
    var _r4 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵreference"](8);
    var ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngModel", ctx_r0.roomName);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngModel", ctx_r0.password);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", _r3.errors && (_r3.dirty || _r3.touched));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", _r4.errors && (_r4.dirty || _r4.touched));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", !ctx_r0.validateLength);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("disabled", !_r3.valid || !_r4.valid || !ctx_r0.validateLength);
} }
function RoomSettingComponent_ng_template_4_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "span", 1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](1, "\u8207\u5176\u4ED6\u53C3\u8207\u8005\u9023\u63A5\u6642\u7121\u6CD5\u5275\u5EFA\u65B0\u7684\u623F\u9593\u3002");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](2, "br");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](3, "\u5982\u679C\u8981\u9023\u63A5\u5230\u53E6\u4E00\u500B\u623F\u9593\uFF0C\u8ACB\u65B7\u958B\u8207\u5176\u4ED6\u8207\u6703\u8005\u7684\u9023\u7DDA\u3002");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](4, "br");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](5, "\uFF08*\u53EF\u4EE5\u901A\u904E\u91CD\u65B0\u52A0\u8F09\u9801\u9762\u4F86\u65B7\u958B\u9023\u63A5\u3002\uFF09");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} }
var RoomSettingComponent = /** @class */ (function () {
    function RoomSettingComponent(panelService, modalService) {
        this.panelService = panelService;
        this.modalService = modalService;
        this.peers = [];
        this.isReloading = false;
        this.roomName = 'ふつうの部屋';
        this.password = '';
        this.isPrivate = false;
        this.validateLength = false;
    }
    Object.defineProperty(RoomSettingComponent.prototype, "peerId", {
        get: function () { return _udonarium_core_system__WEBPACK_IMPORTED_MODULE_2__["Network"].peerId; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(RoomSettingComponent.prototype, "isConnected", {
        get: function () { return _udonarium_core_system__WEBPACK_IMPORTED_MODULE_2__["Network"].peerIds.length <= 1 ? false : true; },
        enumerable: false,
        configurable: true
    });
    RoomSettingComponent.prototype.ngOnInit = function () {
        var _this = this;
        Promise.resolve().then(function () { return _this.modalService.title = _this.panelService.title = 'ルーム作成'; });
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_2__["EventSystem"].register(this);
        this.calcPeerId(this.roomName, this.password);
    };
    RoomSettingComponent.prototype.ngOnDestroy = function () {
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_2__["EventSystem"].unregister(this);
    };
    RoomSettingComponent.prototype.calcPeerId = function (roomName, password) {
        var userId = _udonarium_core_system__WEBPACK_IMPORTED_MODULE_2__["Network"].peerContext ? _udonarium_core_system__WEBPACK_IMPORTED_MODULE_2__["Network"].peerContext.userId : _udonarium_core_system_network_peer_context__WEBPACK_IMPORTED_MODULE_1__["PeerContext"].generateId();
        var context = _udonarium_core_system_network_peer_context__WEBPACK_IMPORTED_MODULE_1__["PeerContext"].create(userId, _udonarium_core_system_network_peer_context__WEBPACK_IMPORTED_MODULE_1__["PeerContext"].generateId('***'), roomName, password);
        this.validateLength = context.peerId.length < 64 ? true : false;
    };
    RoomSettingComponent.prototype.createRoom = function () {
        var userId = _udonarium_core_system__WEBPACK_IMPORTED_MODULE_2__["Network"].peerContext ? _udonarium_core_system__WEBPACK_IMPORTED_MODULE_2__["Network"].peerContext.userId : _udonarium_core_system_network_peer_context__WEBPACK_IMPORTED_MODULE_1__["PeerContext"].generateId();
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_2__["Network"].open(userId, _udonarium_core_system_network_peer_context__WEBPACK_IMPORTED_MODULE_1__["PeerContext"].generateId('***'), this.roomName, this.password);
        _udonarium_peer_cursor__WEBPACK_IMPORTED_MODULE_3__["PeerCursor"].myCursor.peerId = _udonarium_core_system__WEBPACK_IMPORTED_MODULE_2__["Network"].peerId;
        this.modalService.resolve();
    };
    RoomSettingComponent.ɵfac = function RoomSettingComponent_Factory(t) { return new (t || RoomSettingComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](service_panel_service__WEBPACK_IMPORTED_MODULE_4__["PanelService"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](service_modal_service__WEBPACK_IMPORTED_MODULE_5__["ModalService"])); };
    RoomSettingComponent.ɵcmp = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineComponent"]({ type: RoomSettingComponent, selectors: [["room-setting"]], decls: 6, vars: 2, consts: [[4, "ngIf", "ngIfElse"], [2, "font-size", "12px"], ["other_content", ""], ["required", "", "minlength", "1", "maxlength", "128", "placeholder", "\u5FC5\u9808\u6709\u623F\u9593\u540D\u7A31", 1, "input", 3, "ngModel", "input", "ngModelChange"], ["roomNameValidation", "ngModel"], ["maxlength", "12", "placeholder", "\u7559\u767D\u70BA\u7121", 1, "input", 3, "ngModel", "input", "ngModelChange"], ["passwordValidation", "ngModel"], [4, "ngIf"], [3, "disabled", "click"], [3, "hidden"]], template: function RoomSettingComponent_Template(rf, ctx) { if (rf & 1) {
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](0, RoomSettingComponent_div_0_Template, 16, 6, "div", 0);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "div");
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](2, "span", 1);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](3, "\u203B\u7576\u53C3\u8207\u8005\u4EBA\u6578\u8B8A\u70BA0\u6642\uFF0C\u5275\u5EFA\u7684\u623F\u5BA4\u5C07\u88AB\u89E3\u6563\u3002 \u5982\u679C\u60A8\u60F3\u5728\u4FDD\u7559\u72C0\u614B\u7559\u5F85\u4E0B\u4E00\u6B21\u904A\u6232\uFF0C\u8ACB\u6309\u201C\u4FDD\u5B58\u623F\u9593\u201D\u3002");
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](4, RoomSettingComponent_ng_template_4_Template, 6, 0, "ng-template", null, 2, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplateRefExtractor"]);
        } if (rf & 2) {
            var _r1 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵreference"](5);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", !ctx.isConnected)("ngIfElse", _r1);
        } }, directives: [_angular_common__WEBPACK_IMPORTED_MODULE_6__["NgIf"], _angular_forms__WEBPACK_IMPORTED_MODULE_7__["DefaultValueAccessor"], _angular_forms__WEBPACK_IMPORTED_MODULE_7__["RequiredValidator"], _angular_forms__WEBPACK_IMPORTED_MODULE_7__["MinLengthValidator"], _angular_forms__WEBPACK_IMPORTED_MODULE_7__["MaxLengthValidator"], _angular_forms__WEBPACK_IMPORTED_MODULE_7__["NgControlStatus"], _angular_forms__WEBPACK_IMPORTED_MODULE_7__["NgModel"]], styles: [".box[_ngcontent-%COMP%] {\r\n  border-bottom:1px dotted #888;\r\n}\r\n.image[_ngcontent-%COMP%] {\r\n  padding: 0px;\r\n  width: 64px;\r\n  height: 64px;\r\n  display: inline-block;\r\n  vertical-align: top;\r\n}\r\n.contain[_ngcontent-%COMP%] {\r\n  background-position: center center;\r\n  background-repeat: no-repeat;\r\n  background-size: contain;\r\n}\r\n.input[_ngcontent-%COMP%] {\r\n  width: 100%;\r\n}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJvb20tc2V0dGluZy5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UsNkJBQTZCO0FBQy9CO0FBQ0E7RUFDRSxZQUFZO0VBQ1osV0FBVztFQUNYLFlBQVk7RUFDWixxQkFBcUI7RUFDckIsbUJBQW1CO0FBQ3JCO0FBRUE7RUFDRSxrQ0FBa0M7RUFDbEMsNEJBQTRCO0VBQzVCLHdCQUF3QjtBQUMxQjtBQUVBO0VBQ0UsV0FBVztBQUNiIiwiZmlsZSI6InJvb20tc2V0dGluZy5jb21wb25lbnQuY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLmJveCB7XHJcbiAgYm9yZGVyLWJvdHRvbToxcHggZG90dGVkICM4ODg7XHJcbn1cclxuLmltYWdlIHtcclxuICBwYWRkaW5nOiAwcHg7XHJcbiAgd2lkdGg6IDY0cHg7XHJcbiAgaGVpZ2h0OiA2NHB4O1xyXG4gIGRpc3BsYXk6IGlubGluZS1ibG9jaztcclxuICB2ZXJ0aWNhbC1hbGlnbjogdG9wO1xyXG59XHJcblxyXG4uY29udGFpbiB7XHJcbiAgYmFja2dyb3VuZC1wb3NpdGlvbjogY2VudGVyIGNlbnRlcjtcclxuICBiYWNrZ3JvdW5kLXJlcGVhdDogbm8tcmVwZWF0O1xyXG4gIGJhY2tncm91bmQtc2l6ZTogY29udGFpbjtcclxufVxyXG5cclxuLmlucHV0IHtcclxuICB3aWR0aDogMTAwJTtcclxufSJdfQ== */"] });
    return RoomSettingComponent;
}());

/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](RoomSettingComponent, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"],
        args: [{
                selector: 'room-setting',
                templateUrl: './room-setting.component.html',
                styleUrls: ['./room-setting.component.css']
            }]
    }], function () { return [{ type: service_panel_service__WEBPACK_IMPORTED_MODULE_4__["PanelService"] }, { type: service_modal_service__WEBPACK_IMPORTED_MODULE_5__["ModalService"] }]; }, null); })();


/***/ }),

/***/ "baV6":
/*!*******************************************************!*\
  !*** ./src/app/class/core/system/util/string-util.ts ***!
  \*******************************************************/
/*! exports provided: StringUtil */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "StringUtil", function() { return StringUtil; });
var StringUtil;
(function (StringUtil) {
    function toHalfWidth(str) {
        return str.replace(/[！-～]/g, function (c) { return String.fromCharCode(c.charCodeAt(0) - 0xFEE0); });
    }
    StringUtil.toHalfWidth = toHalfWidth;
})(StringUtil || (StringUtil = {}));


/***/ }),

/***/ "cfGu":
/*!****************************************************!*\
  !*** ./src/app/class/core/system/util/xml-util.ts ***!
  \****************************************************/
/*! exports provided: XmlUtil */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "XmlUtil", function() { return XmlUtil; });
var XmlUtil;
(function (XmlUtil) {
    var encodePattern = /&|<|>|"|'/g;
    var encodeMap = {
        '&': '&amp;',
        '<': '&lt;',
        '>': '&gt;',
        '\"': '&quot;',
        '\'': '&apos;',
    };
    var decodePattern = /&amp;|&lt;|&gt;|&quot;|&apos;/g;
    var decodeMap = {
        '&amp;': '&',
        '&lt;': '<',
        '&gt;': '>',
        '&quot;': '\"',
        '&apos;': '\'',
    };
    var sanitizePattern = /((?:[\0-\x08\x0B\f\x0E-\x1F\uFFFD\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]))/g;
    function xml2element(xml) {
        var domParser = new DOMParser();
        var xmlDocument = null;
        try {
            xml = sanitizeXml(xml);
            xmlDocument = domParser.parseFromString(xml, 'application/xml');
            var parsererror = xmlDocument.getElementsByTagName('parsererror');
            if (parsererror.length) {
                console.error('XML解析失敗', xmlDocument.documentElement);
                xmlDocument = null;
            }
        }
        catch (error) {
            console.error(error);
        }
        return xmlDocument ? xmlDocument.documentElement : null;
    }
    XmlUtil.xml2element = xml2element;
    function encodeEntityReference(string) {
        return string.replace(encodePattern, encodeReplacer);
    }
    XmlUtil.encodeEntityReference = encodeEntityReference;
    function decodeEntityReference(string) {
        return string.replace(decodePattern, decodeReplacer);
    }
    XmlUtil.decodeEntityReference = decodeEntityReference;
    function sanitizeXml(xml) {
        return xml.replace(sanitizePattern, '').trim();
    }
    function encodeReplacer(char) {
        return encodeMap[char];
    }
    function decodeReplacer(entity) {
        return decodeMap[entity];
    }
})(XmlUtil || (XmlUtil = {}));


/***/ }),

/***/ "dQSv":
/*!********************************************!*\
  !*** ./src/app/class/database/database.ts ***!
  \********************************************/
/*! exports provided: Database */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Database", function() { return Database; });
/* harmony import */ var _core_system_util_promise_queue__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core/system/util/promise-queue */ "w5+g");

// 試験実装中
var Database = /** @class */ (function () {
    function Database() {
        this.queue = new _core_system_util_promise_queue__WEBPACK_IMPORTED_MODULE_0__["PromiseQueue"]('DatabaseQueue');
        this.openDB(Database.DB_NAME, Database.VERSION);
    }
    Database.prototype.openDB = function (dbName, version) {
        var _this = this;
        return this.queue.add(function (resolve, reject) {
            console.log('openDB');
            var request = indexedDB.open(dbName, version);
            request.onerror = function (event) {
                console.error(request.error, event);
                if (request.error.name === 'VersionError') {
                    indexedDB.deleteDatabase(dbName);
                    _this.openDB(dbName, version);
                }
                // request.errorCode に対して行うこと!
                resolve();
            };
            request.onblocked = function (event) {
                console.warn('openDB onblocked');
                // 他のタブがデータベースを読み込んでいる場合は、処理を進める前に
                // それらを閉じなければなりません。
                alert('このサイトを開いている他のタブをすべて閉じてください!');
            };
            request.onupgradeneeded = function (event) {
                console.log('openDB onupgradeneeded');
                _this.initializeDB(request.result);
                _this.createStores();
            };
            request.onsuccess = function (event) {
                console.log('openDB onsuccess');
                _this.initializeDB(request.result);
                resolve();
            };
        });
    };
    Database.prototype.createStores = function () {
        console.log('createStores');
        if (this.db.objectStoreNames.contains('PeerHistory')) {
            this.db.deleteObjectStore('PeerHistory');
        }
        var objectStore = this.db.createObjectStore('PeerHistory', { keyPath: 'peerId' });
        objectStore.createIndex('timestamp', 'timestamp', { unique: false });
        // データを追加する前に objectStore の作成を完了させるため、 
        // transaction oncomplete を使用します。
        objectStore.transaction.oncomplete = function (event) {
            console.log('createStores oncomplete');
            // 新たに作成した objectStore に値を保存します。
            /*
            var customerObjectStore = db.transaction("customers", "readwrite").objectStore("customers");
            for (var i in customerData) {
              customerObjectStore.add(customerData[i]);
            }
            */
        };
    };
    Database.prototype.initializeDB = function (db) {
        console.log('initializeDB');
        // 別のページがバージョン変更を求めた場合に、通知されるようにするためのハンドラを追加するようにしてください。
        // データベースを閉じなければなりません。データベースを閉じると、別のページがデータベースをアップグレードできます。
        // これを行わなければ、ユーザがタブを閉じるまでデータベースはアップグレードされません。
        db.onversionchange = function (event) {
            console.warn('db.onversionchange.');
            db.close();
            alert('新しいバージョンのページが使用可能になりました。再読み込みしてください!');
        };
        db.onabort = function (event) {
            console.error(event);
        };
        db.onerror = function (event) {
            console.error(event);
        };
        this.db = db;
        // データベースを使用する処理
    };
    Database.prototype.addPeerHistory = function (myPeerId, otherPeerIds) {
        var _this = this;
        this.queue.add(function (resolve, reject) {
            console.log('addPeerHistory');
            var transaction = _this.db.transaction(['PeerHistory'], 'readwrite');
            var store = transaction.objectStore('PeerHistory');
            transaction.oncomplete = function (event) {
                console.log('addPeerHistory done.', 'readwrite');
                resolve();
            };
            transaction.onerror = function (event) {
                console.error(event);
                resolve();
            };
            var history = {
                peerId: myPeerId,
                timestamp: Date.now(),
                history: otherPeerIds
            };
            store.put(history);
        });
    };
    Database.prototype.deletePeerHistory = function (peerId) {
        var _this = this;
        this.queue.add(function (resolve, reject) {
            var transaction = _this.db.transaction(['PeerHistory'], 'readwrite');
            var store = transaction.objectStore('PeerHistory');
            transaction.oncomplete = function (event) {
                console.log('addPeerHistory done.', 'readwrite');
                resolve();
            };
            transaction.onerror = function (event) {
                console.error(event);
                resolve();
            };
            store.delete(peerId);
        });
    };
    Database.prototype.getPeerHistory = function () {
        var _this = this;
        return this.queue.add(function (resolve, reject) {
            console.log('getPeerHistory');
            var transaction = _this.db.transaction(['PeerHistory'], 'readonly');
            var store = transaction.objectStore('PeerHistory');
            var request = store.openCursor();
            var history = [];
            transaction.oncomplete = function (event) {
                console.log('getPeerHistory done.');
                resolve(history);
            };
            transaction.onerror = function (event) {
                console.error(event);
                resolve(history);
            };
            request.onerror = function (event) {
                console.error(event);
                resolve(history);
            };
            request.onsuccess = function (event) {
                var cursor = request.result;
                if (cursor) {
                    console.log('id:' + cursor.key + ' value:', cursor.value);
                    history.push(cursor.value);
                    cursor.continue();
                }
                else {
                    console.log('Entries all displayed.');
                }
            };
        });
    };
    Database.DB_NAME = 'UdonariumDataBase';
    Database.VERSION = 1;
    return Database;
}());



/***/ }),

/***/ "dQfN":
/*!**********************************************************************!*\
  !*** ./src/app/class/core/synchronize-object/object-synchronizer.ts ***!
  \**********************************************************************/
/*! exports provided: ObjectSynchronizer */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ObjectSynchronizer", function() { return ObjectSynchronizer; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "mrSG");
/* harmony import */ var _system__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../system */ "yNnI");
/* harmony import */ var _object_factory__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./object-factory */ "+FYa");
/* harmony import */ var _object_store__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./object-store */ "hm7o");
/* harmony import */ var _synchronize_task__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./synchronize-task */ "jLOE");





var ObjectSynchronizer = /** @class */ (function () {
    function ObjectSynchronizer() {
        this.requestMap = new Map();
        this.peerMap = new Map();
        this.tasks = [];
    }
    Object.defineProperty(ObjectSynchronizer, "instance", {
        get: function () {
            if (!ObjectSynchronizer._instance)
                ObjectSynchronizer._instance = new ObjectSynchronizer();
            return ObjectSynchronizer._instance;
        },
        enumerable: false,
        configurable: true
    });
    ObjectSynchronizer.prototype.initialize = function () {
        var _this = this;
        this.destroy();
        console.log('ObjectSynchronizer ready...');
        _system__WEBPACK_IMPORTED_MODULE_1__["EventSystem"].register(this)
            .on('CONNECT_PEER', 2, function (event) {
            if (!event.isSendFromSelf)
                return;
            console.log('CONNECT_PEER GameRoomService !!!', event.data.peerId);
            _this.sendCatalog(event.data.peerId);
        })
            .on('DISCONNECT_PEER', function (event) {
            _this.removePeerMap(event.data.peerId);
        })
            .on('SYNCHRONIZE_GAME_OBJECT', function (event) {
            var e_1, _a;
            if (event.isSendFromSelf)
                return;
            console.log('SYNCHRONIZE_GAME_OBJECT ' + event.sendFrom);
            var catalog = event.data;
            try {
                for (var catalog_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(catalog), catalog_1_1 = catalog_1.next(); !catalog_1_1.done; catalog_1_1 = catalog_1.next()) {
                    var item = catalog_1_1.value;
                    if (_object_store__WEBPACK_IMPORTED_MODULE_3__["ObjectStore"].instance.isDeleted(item.identifier)) {
                        _system__WEBPACK_IMPORTED_MODULE_1__["EventSystem"].call('DELETE_GAME_OBJECT', { identifier: item.identifier }, event.sendFrom);
                    }
                    else {
                        _this.addRequestMap(item, event.sendFrom);
                    }
                }
            }
            catch (e_1_1) { e_1 = { error: e_1_1 }; }
            finally {
                try {
                    if (catalog_1_1 && !catalog_1_1.done && (_a = catalog_1.return)) _a.call(catalog_1);
                }
                finally { if (e_1) throw e_1.error; }
            }
            _this.synchronize();
        })
            .on('REQUEST_GAME_OBJECT', function (event) {
            if (event.isSendFromSelf)
                return;
            if (_object_store__WEBPACK_IMPORTED_MODULE_3__["ObjectStore"].instance.isDeleted(event.data)) {
                _system__WEBPACK_IMPORTED_MODULE_1__["EventSystem"].call('DELETE_GAME_OBJECT', { identifier: event.data }, event.sendFrom);
            }
            else {
                var object = _object_store__WEBPACK_IMPORTED_MODULE_3__["ObjectStore"].instance.get(event.data);
                if (object)
                    _system__WEBPACK_IMPORTED_MODULE_1__["EventSystem"].call('UPDATE_GAME_OBJECT', object.toContext(), event.sendFrom);
            }
        })
            .on('UPDATE_GAME_OBJECT', function (event) {
            var context = event.data;
            var object = _object_store__WEBPACK_IMPORTED_MODULE_3__["ObjectStore"].instance.get(context.identifier);
            if (object) {
                if (!event.isSendFromSelf)
                    _this.updateObject(object, context);
            }
            else if (_object_store__WEBPACK_IMPORTED_MODULE_3__["ObjectStore"].instance.isDeleted(context.identifier)) {
                _system__WEBPACK_IMPORTED_MODULE_1__["EventSystem"].call('DELETE_GAME_OBJECT', { identifier: context.identifier }, event.sendFrom);
            }
            else {
                _this.createObject(context);
            }
        })
            .on('DELETE_GAME_OBJECT', function (event) {
            var context = event.data;
            _object_store__WEBPACK_IMPORTED_MODULE_3__["ObjectStore"].instance.delete(context.identifier, false);
        });
    };
    ObjectSynchronizer.prototype.destroy = function () {
        _system__WEBPACK_IMPORTED_MODULE_1__["EventSystem"].unregister(this);
    };
    ObjectSynchronizer.prototype.updateObject = function (object, context) {
        if (context.majorVersion + context.minorVersion > object.version) {
            object.apply(context);
        }
    };
    ObjectSynchronizer.prototype.createObject = function (context) {
        var newObject = _object_factory__WEBPACK_IMPORTED_MODULE_2__["ObjectFactory"].instance.create(context.aliasName, context.identifier);
        if (!newObject) {
            console.warn(context.aliasName + ' is Unknown...?', context);
            return;
        }
        _object_store__WEBPACK_IMPORTED_MODULE_3__["ObjectStore"].instance.add(newObject, false);
        newObject.apply(context);
    };
    ObjectSynchronizer.prototype.sendCatalog = function (sendTo) {
        var catalog = _object_store__WEBPACK_IMPORTED_MODULE_3__["ObjectStore"].instance.getCatalog();
        var interval = setInterval(function () {
            var count = catalog.length < 2048 ? catalog.length : 2048;
            _system__WEBPACK_IMPORTED_MODULE_1__["EventSystem"].call('SYNCHRONIZE_GAME_OBJECT', catalog.splice(0, count), sendTo);
            if (catalog.length < 1)
                clearInterval(interval);
        });
    };
    ObjectSynchronizer.prototype.addRequestMap = function (item, sendFrom) {
        var request = this.requestMap.get(item.identifier);
        if (request && request.version === item.version) {
            request.holderIds.push(sendFrom);
            this.addPeerMap(sendFrom);
        }
        else if (!request || request.version < item.version) {
            this.requestMap.set(item.identifier, { identifier: item.identifier, version: item.version, holderIds: [sendFrom], ttl: 2 });
            this.addPeerMap(sendFrom);
        }
    };
    ObjectSynchronizer.prototype.addPeerMap = function (targetPeerId) {
        if (!this.peerMap.has(targetPeerId))
            this.peerMap.set(targetPeerId, []);
    };
    ObjectSynchronizer.prototype.removePeerMap = function (targetPeerId) {
        this.peerMap.delete(targetPeerId);
    };
    ObjectSynchronizer.prototype.synchronize = function () {
        while (0 < this.requestMap.size && this.tasks.length < 32)
            this.runSynchronizeTask();
    };
    ObjectSynchronizer.prototype.runSynchronizeTask = function () {
        var _this = this;
        var targetPeerId = this.getTargetPeerId();
        var requests = this.makeRequestList(targetPeerId);
        if (requests.length < 1) {
            this.removePeerMap(targetPeerId);
            return;
        }
        var task = _synchronize_task__WEBPACK_IMPORTED_MODULE_4__["SynchronizeTask"].create(targetPeerId, requests);
        this.tasks.push(task);
        var targetPeerIdTasks = this.peerMap.get(targetPeerId);
        if (targetPeerIdTasks)
            targetPeerIdTasks.push(task);
        task.onfinish = function (task) {
            _this.tasks.splice(_this.tasks.indexOf(task), 1);
            var targetPeerIdTasks = _this.peerMap.get(targetPeerId);
            if (targetPeerIdTasks)
                targetPeerIdTasks.splice(targetPeerIdTasks.indexOf(task), 1);
            _this.synchronize();
        };
        task.ontimeout = function (task, remainedRequests) {
            console.log('GameObject synchronize タイムアウト');
            remainedRequests.forEach(function (request) { return _this.requestMap.set(request.identifier, request); });
        };
    };
    ObjectSynchronizer.prototype.makeRequestList = function (targetPeerId, maxRequest) {
        var e_2, _a;
        if (maxRequest === void 0) { maxRequest = 32; }
        var requests = [];
        try {
            for (var _b = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(this.requestMap), _c = _b.next(); !_c.done; _c = _b.next()) {
                var _d = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__read"])(_c.value, 2), identifier = _d[0], request = _d[1];
                if (maxRequest <= requests.length)
                    break;
                if (!request.holderIds.includes(targetPeerId))
                    continue;
                var gameObject = _object_store__WEBPACK_IMPORTED_MODULE_3__["ObjectStore"].instance.get(request.identifier);
                if (!gameObject || gameObject.version < request.version)
                    requests.push(request);
                this.requestMap.delete(identifier);
            }
        }
        catch (e_2_1) { e_2 = { error: e_2_1 }; }
        finally {
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            }
            finally { if (e_2) throw e_2.error; }
        }
        return requests;
    };
    ObjectSynchronizer.prototype.getTargetPeerId = function () {
        var _a, e_3, _b;
        var min = 9999;
        var selectPeerId = null;
        var peerContexts = _system__WEBPACK_IMPORTED_MODULE_1__["Network"].peerContexts;
        for (var i = peerContexts.length - 1; 0 <= i; i--) {
            var rand = Math.floor(Math.random() * (i + 1));
            _a = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__read"])([peerContexts[rand], peerContexts[i]], 2), peerContexts[i] = _a[0], peerContexts[rand] = _a[1];
        }
        try {
            for (var peerContexts_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(peerContexts), peerContexts_1_1 = peerContexts_1.next(); !peerContexts_1_1.done; peerContexts_1_1 = peerContexts_1.next()) {
                var peerContext = peerContexts_1_1.value;
                var tasks = this.peerMap.get(peerContext.peerId);
                if (peerContext.isOpen && tasks && tasks.length < min) {
                    min = tasks.length;
                    selectPeerId = peerContext.peerId;
                }
            }
        }
        catch (e_3_1) { e_3 = { error: e_3_1 }; }
        finally {
            try {
                if (peerContexts_1_1 && !peerContexts_1_1.done && (_b = peerContexts_1.return)) _b.call(peerContexts_1);
            }
            finally { if (e_3) throw e_3.error; }
        }
        return selectPeerId;
    };
    return ObjectSynchronizer;
}());



/***/ }),

/***/ "e1FT":
/*!******************************************************************!*\
  !*** ./src/app/component/context-menu/context-menu.component.ts ***!
  \******************************************************************/
/*! exports provided: ContextMenuComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ContextMenuComponent", function() { return ContextMenuComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "fXoL");
/* harmony import */ var service_context_menu_service__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! service/context-menu.service */ "9FhF");
/* harmony import */ var service_pointer_device_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! service/pointer-device.service */ "GPP8");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/common */ "ofXK");





var _c0 = ["root"];
function ContextMenuComponent_div_2_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 6);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    var ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate"](ctx_r1.title);
} }
function ContextMenuComponent_ng_container_4_ng_container_1_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainer"](0);
} }
var _c1 = function (a0) { return { action: a0 }; };
function ContextMenuComponent_ng_container_4_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](1, ContextMenuComponent_ng_container_4_ng_container_1_Template, 1, 0, "ng-container", 7);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var action_r7 = ctx.$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    var _r5 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵreference"](8);
    var _r3 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵreference"](6);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngTemplateOutlet", (action_r7 == null ? null : action_r7.type) === "separator" ? _r5 : _r3)("ngTemplateOutletContext", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction1"](2, _c1, action_r7));
} }
function ContextMenuComponent_ng_template_5_div_3_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "i", 13);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](2, "arrow_forward_ios");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} }
function ContextMenuComponent_ng_template_5_context_menu_4_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](0, "context-menu", 14);
} if (rf & 2) {
    var action_r9 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]().action;
    var ctx_r11 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("title", action_r9.name)("actions", ctx_r11.subMenu)("isSubmenu", true);
} }
function ContextMenuComponent_ng_template_5_Template(rf, ctx) { if (rf & 1) {
    var _r14 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "li", 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function ContextMenuComponent_ng_template_5_Template_li_click_0_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r14); var action_r9 = ctx.action; var ctx_r13 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](); return ctx_r13.doAction(action_r9); })("mouseenter", function ContextMenuComponent_ng_template_5_Template_li_mouseenter_0_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r14); var action_r9 = ctx.action; var ctx_r15 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](); return ctx_r15.showSubMenu(action_r9); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "div", 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](3, ContextMenuComponent_ng_template_5_div_3_Template, 3, 0, "div", 10);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](4, ContextMenuComponent_ng_template_5_context_menu_4_Template, 1, 3, "context-menu", 11);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    var action_r9 = ctx.action;
    var ctx_r4 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate"](action_r9.name);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", action_r9.subActions);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r4.subMenu && ctx_r4.parentMenu === action_r9);
} }
function ContextMenuComponent_ng_template_7_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "li");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](1, "hr", 15);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} }
var _c2 = function (a0, a1, a2) { return { "submenu-panel": a0, "is-max-limit": a1, "pointer-events-none": a2 }; };
var ContextMenuComponent = /** @class */ (function () {
    function ContextMenuComponent(elementRef, contextMenuService, pointerDeviceService) {
        var _this = this;
        this.elementRef = elementRef;
        this.contextMenuService = contextMenuService;
        this.pointerDeviceService = pointerDeviceService;
        this.title = '';
        this.actions = [];
        this.isSubmenu = false;
        this.callbackOnOutsideClick = function (e) { return _this.onOutsideClick(e); };
    }
    Object.defineProperty(ContextMenuComponent.prototype, "isPointerDragging", {
        get: function () { return this.pointerDeviceService.isDragging; },
        enumerable: false,
        configurable: true
    });
    ContextMenuComponent.prototype.ngOnInit = function () {
        if (!this.isSubmenu) {
            this.title = this.contextMenuService.title;
            this.actions = this.contextMenuService.actions;
        }
    };
    ContextMenuComponent.prototype.ngAfterViewInit = function () {
        if (!this.isSubmenu) {
            this.adjustPositionRoot();
            document.addEventListener('touchstart', this.callbackOnOutsideClick, true);
            document.addEventListener('mousedown', this.callbackOnOutsideClick, true);
        }
        else {
            this.adjustPositionSub();
        }
    };
    ContextMenuComponent.prototype.ngOnDestroy = function () {
        document.removeEventListener('touchstart', this.callbackOnOutsideClick, true);
        document.removeEventListener('mousedown', this.callbackOnOutsideClick, true);
    };
    ContextMenuComponent.prototype.onOutsideClick = function (event) {
        if (this.rootElementRef.nativeElement.contains(event.target) === false) {
            this.close();
        }
    };
    ContextMenuComponent.prototype.onContextMenu = function (e) {
        e.stopPropagation();
        e.preventDefault();
    };
    ContextMenuComponent.prototype.adjustPositionRoot = function () {
        var panel = this.rootElementRef.nativeElement;
        panel.style.left = this.contextMenuService.position.x + 'px';
        panel.style.top = this.contextMenuService.position.y + 'px';
        var panelBox = panel.getBoundingClientRect();
        var diffLeft = 0;
        var diffTop = 0;
        if (window.innerWidth < panelBox.right + diffLeft) {
            diffLeft += window.innerWidth - (panelBox.right + diffLeft);
        }
        if (panelBox.left + diffLeft < 0) {
            diffLeft += 0 - (panelBox.left + diffLeft);
        }
        if (window.innerHeight < panelBox.bottom + diffTop) {
            diffTop += window.innerHeight - (panelBox.bottom + diffTop);
        }
        if (panelBox.top + diffTop < 0) {
            diffTop += 0 - (panelBox.top + diffTop);
        }
        panel.style.left = panel.offsetLeft + diffLeft + 'px';
        panel.style.top = panel.offsetTop + diffTop + 'px';
    };
    ContextMenuComponent.prototype.adjustPositionSub = function () {
        var parent = this.elementRef.nativeElement.parentElement;
        var submenu = this.rootElementRef.nativeElement;
        var parentBox = parent.getBoundingClientRect();
        var submenuBox = submenu.getBoundingClientRect();
        var diffLeft = 0;
        var diffTop = 0;
        if (window.innerWidth < submenuBox.right + diffLeft) {
            diffLeft -= parentBox.width + submenuBox.width;
            diffLeft += 8;
        }
        if (submenuBox.left + diffLeft < 0) {
            diffLeft += 0 - (submenuBox.left + diffLeft);
        }
        if (window.innerHeight < submenuBox.bottom + diffTop) {
            diffTop += window.innerHeight - (submenuBox.bottom + diffTop);
        }
        if (submenuBox.top + diffTop < 0) {
            diffTop += 0 - (submenuBox.top + diffTop);
        }
        submenu.style.left = submenu.offsetLeft + diffLeft + 'px';
        submenu.style.top = submenu.offsetTop + diffTop + 'px';
    };
    ContextMenuComponent.prototype.doAction = function (action) {
        this.showSubMenu(action);
        if (action.action != null) {
            action.action();
            this.close();
        }
    };
    ContextMenuComponent.prototype.showSubMenu = function (action) {
        var _this = this;
        this.hideSubMenu();
        clearTimeout(this.showSubMenuTimer);
        if (action.subActions == null || action.subActions.length < 1)
            return;
        this.showSubMenuTimer = setTimeout(function () {
            _this.parentMenu = action;
            _this.subMenu = action.subActions;
            clearTimeout(_this.hideSubMenuTimer);
        }, 250);
    };
    ContextMenuComponent.prototype.hideSubMenu = function () {
        var _this = this;
        clearTimeout(this.hideSubMenuTimer);
        this.hideSubMenuTimer = setTimeout(function () {
            _this.subMenu = null;
        }, 1200);
    };
    ContextMenuComponent.prototype.close = function () {
        if (this.contextMenuService)
            this.contextMenuService.close();
    };
    ContextMenuComponent.ɵfac = function ContextMenuComponent_Factory(t) { return new (t || ContextMenuComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["ElementRef"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](service_context_menu_service__WEBPACK_IMPORTED_MODULE_1__["ContextMenuService"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](service_pointer_device_service__WEBPACK_IMPORTED_MODULE_2__["PointerDeviceService"])); };
    ContextMenuComponent.ɵcmp = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineComponent"]({ type: ContextMenuComponent, selectors: [["context-menu"]], viewQuery: function ContextMenuComponent_Query(rf, ctx) { if (rf & 1) {
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵstaticViewQuery"](_c0, true);
        } if (rf & 2) {
            var _t = void 0;
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵqueryRefresh"](_t = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵloadQuery"]()) && (ctx.rootElementRef = _t.first);
        } }, hostBindings: function ContextMenuComponent_HostBindings(rf, ctx) { if (rf & 1) {
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("contextmenu", function ContextMenuComponent_contextmenu_HostBindingHandler($event) { return ctx.onContextMenu($event); });
        } }, inputs: { title: "title", actions: "actions", isSubmenu: "isSubmenu" }, decls: 9, vars: 7, consts: [[1, "component", 3, "ngClass", "mouseleave"], ["root", ""], ["class", "title", 4, "ngIf"], [4, "ngFor", "ngForOf"], ["actionMenu", ""], ["separator", ""], [1, "title"], [4, "ngTemplateOutlet", "ngTemplateOutletContext"], [1, "hasHighlight", 3, "click", "mouseenter"], [1, "menu-title"], ["class", "sub-menu-arrow", 4, "ngIf"], [3, "title", "actions", "isSubmenu", 4, "ngIf"], [1, "sub-menu-arrow"], [1, "material-icons", 2, "font-size", "1em", "vertical-align", "bottom"], [3, "title", "actions", "isSubmenu"], [1, "separator"]], template: function ContextMenuComponent_Template(rf, ctx) { if (rf & 1) {
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 0, 1);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("mouseleave", function ContextMenuComponent_Template_div_mouseleave_0_listener() { return ctx.hideSubMenu(); });
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](2, ContextMenuComponent_div_2_Template, 2, 1, "div", 2);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](3, "ul");
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](4, ContextMenuComponent_ng_container_4_Template, 2, 4, "ng-container", 3);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](5, ContextMenuComponent_ng_template_5_Template, 5, 3, "ng-template", null, 4, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplateRefExtractor"]);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](7, ContextMenuComponent_ng_template_7_Template, 2, 0, "ng-template", null, 5, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplateRefExtractor"]);
        } if (rf & 2) {
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngClass", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction3"](3, _c2, ctx.isSubmenu, !ctx.isSubmenu, ctx.isPointerDragging));
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", 0 < ctx.title.length);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngForOf", ctx.actions);
        } }, directives: [_angular_common__WEBPACK_IMPORTED_MODULE_3__["NgClass"], _angular_common__WEBPACK_IMPORTED_MODULE_3__["NgIf"], _angular_common__WEBPACK_IMPORTED_MODULE_3__["NgForOf"], _angular_common__WEBPACK_IMPORTED_MODULE_3__["NgTemplateOutlet"], ContextMenuComponent], styles: [".component[_ngcontent-%COMP%] {\r\n  box-sizing: border-box;\r\n  overflow: visible;\r\n  position: absolute;\r\n\r\n  background: linear-gradient(-30deg, rgba(240,218,189, 0.9), rgba(255, 244, 232, 0.9));\r\n  border: solid 1px #999;\r\n  padding: 0px;\r\n\r\n  white-space: nowrap;\r\n  -webkit-user-select: none;\r\n  user-select: none;\r\n\r\n  -moz-user-drag: none;\r\n  -webkit-user-drag: none;\r\n  z-index: 9900;\r\n}\r\n.submenu-panel[_ngcontent-%COMP%] {\r\n  position: absolute;\r\n  left: calc(100% - 4px);\r\n  top: -16px;\r\n}\r\n.pointer-events-none[_ngcontent-%COMP%] {\r\n  pointer-events: none;\r\n}\r\n.is-max-limit[_ngcontent-%COMP%] {\r\n  max-height: 100%;\r\n  max-width: 100%;\r\n}\r\n.title[_ngcontent-%COMP%]{\r\n  overflow: hidden;\r\n  white-space: nowrap;\r\n  text-overflow: ellipsis;\r\n  max-width: 18em;\r\n  font-size: 12px;\r\n  text-align: center;\r\n  padding: 4px 16px;\r\n  margin: 0 2px;\r\n  color: #444;\r\n  border-bottom: 1px solid #AAA;\r\n}\r\n.menu-title[_ngcontent-%COMP%] {\r\n  display: inline-block;\r\n}\r\nhr.separator[_ngcontent-%COMP%] {\r\n  margin: 0.1em -12px;\r\n  height: 1px;\r\n  border: 0;\r\n  background-color: #AAA;\r\n}\r\n.sub-menu-arrow[_ngcontent-%COMP%] {\r\n  display: inline-block;\r\n  position: absolute;\r\n  top: 2px;\r\n  bottom: 0;\r\n  right: 1px;\r\n}\r\nul[_ngcontent-%COMP%] {\r\n  list-style: none;\r\n  padding: 2px 0;\r\n  margin: 0;\r\n}\r\nul[_ngcontent-%COMP%]    > li[_ngcontent-%COMP%] {\r\n  position: relative;\r\n  cursor: -moz-default;\r\n  cursor: -webkit-default;\r\n  cursor: default;\r\n\r\n  padding: 2px 20px;\r\n  font-size: 12px;\r\n  color: #444;\r\n}\r\nul[_ngcontent-%COMP%]    > li.hasHighlight[_ngcontent-%COMP%]:hover {\r\n  color: #CCC;\r\n  background-color: rgba(30, 30, 30, 0.8);\r\n}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbnRleHQtbWVudS5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0Usc0JBQXNCO0VBQ3RCLGlCQUFpQjtFQUNqQixrQkFBa0I7O0VBRWxCLHFGQUFxRjtFQUNyRixzQkFBc0I7RUFDdEIsWUFBWTs7RUFFWixtQkFBbUI7RUFHbkIseUJBQXlCO0VBQ3pCLGlCQUFpQjs7RUFFakIsb0JBQW9CO0VBQ3BCLHVCQUF1QjtFQUN2QixhQUFhO0FBQ2Y7QUFDQTtFQUNFLGtCQUFrQjtFQUNsQixzQkFBc0I7RUFDdEIsVUFBVTtBQUNaO0FBQ0E7RUFDRSxvQkFBb0I7QUFDdEI7QUFDQTtFQUNFLGdCQUFnQjtFQUNoQixlQUFlO0FBQ2pCO0FBQ0E7RUFDRSxnQkFBZ0I7RUFDaEIsbUJBQW1CO0VBQ25CLHVCQUF1QjtFQUN2QixlQUFlO0VBQ2YsZUFBZTtFQUNmLGtCQUFrQjtFQUNsQixpQkFBaUI7RUFDakIsYUFBYTtFQUNiLFdBQVc7RUFDWCw2QkFBNkI7QUFDL0I7QUFDQTtFQUNFLHFCQUFxQjtBQUN2QjtBQUNBO0VBQ0UsbUJBQW1CO0VBQ25CLFdBQVc7RUFDWCxTQUFTO0VBQ1Qsc0JBQXNCO0FBQ3hCO0FBQ0E7RUFDRSxxQkFBcUI7RUFDckIsa0JBQWtCO0VBQ2xCLFFBQVE7RUFDUixTQUFTO0VBQ1QsVUFBVTtBQUNaO0FBQ0E7RUFDRSxnQkFBZ0I7RUFDaEIsY0FBYztFQUNkLFNBQVM7QUFDWDtBQUNBO0VBQ0Usa0JBQWtCO0VBQ2xCLG9CQUFvQjtFQUNwQix1QkFBdUI7RUFDdkIsZUFBZTs7RUFFZixpQkFBaUI7RUFDakIsZUFBZTtFQUNmLFdBQVc7QUFDYjtBQUNBO0VBQ0UsV0FBVztFQUNYLHVDQUF1QztBQUN6QyIsImZpbGUiOiJjb250ZXh0LW1lbnUuY29tcG9uZW50LmNzcyIsInNvdXJjZXNDb250ZW50IjpbIi5jb21wb25lbnQge1xyXG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XHJcbiAgb3ZlcmZsb3c6IHZpc2libGU7XHJcbiAgcG9zaXRpb246IGFic29sdXRlO1xyXG5cclxuICBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoLTMwZGVnLCByZ2JhKDI0MCwyMTgsMTg5LCAwLjkpLCByZ2JhKDI1NSwgMjQ0LCAyMzIsIDAuOSkpO1xyXG4gIGJvcmRlcjogc29saWQgMXB4ICM5OTk7XHJcbiAgcGFkZGluZzogMHB4O1xyXG5cclxuICB3aGl0ZS1zcGFjZTogbm93cmFwO1xyXG5cclxuICAtbW96LXVzZXItc2VsZWN0OiBub25lO1xyXG4gIC13ZWJraXQtdXNlci1zZWxlY3Q6IG5vbmU7XHJcbiAgdXNlci1zZWxlY3Q6IG5vbmU7XHJcblxyXG4gIC1tb3otdXNlci1kcmFnOiBub25lO1xyXG4gIC13ZWJraXQtdXNlci1kcmFnOiBub25lO1xyXG4gIHotaW5kZXg6IDk5MDA7XHJcbn1cclxuLnN1Ym1lbnUtcGFuZWwge1xyXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcclxuICBsZWZ0OiBjYWxjKDEwMCUgLSA0cHgpO1xyXG4gIHRvcDogLTE2cHg7XHJcbn1cclxuLnBvaW50ZXItZXZlbnRzLW5vbmUge1xyXG4gIHBvaW50ZXItZXZlbnRzOiBub25lO1xyXG59XHJcbi5pcy1tYXgtbGltaXQge1xyXG4gIG1heC1oZWlnaHQ6IDEwMCU7XHJcbiAgbWF4LXdpZHRoOiAxMDAlO1xyXG59XHJcbi50aXRsZXtcclxuICBvdmVyZmxvdzogaGlkZGVuO1xyXG4gIHdoaXRlLXNwYWNlOiBub3dyYXA7XHJcbiAgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7XHJcbiAgbWF4LXdpZHRoOiAxOGVtO1xyXG4gIGZvbnQtc2l6ZTogMTJweDtcclxuICB0ZXh0LWFsaWduOiBjZW50ZXI7XHJcbiAgcGFkZGluZzogNHB4IDE2cHg7XHJcbiAgbWFyZ2luOiAwIDJweDtcclxuICBjb2xvcjogIzQ0NDtcclxuICBib3JkZXItYm90dG9tOiAxcHggc29saWQgI0FBQTtcclxufVxyXG4ubWVudS10aXRsZSB7XHJcbiAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xyXG59XHJcbmhyLnNlcGFyYXRvciB7XHJcbiAgbWFyZ2luOiAwLjFlbSAtMTJweDtcclxuICBoZWlnaHQ6IDFweDtcclxuICBib3JkZXI6IDA7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogI0FBQTtcclxufVxyXG4uc3ViLW1lbnUtYXJyb3cge1xyXG4gIGRpc3BsYXk6IGlubGluZS1ibG9jaztcclxuICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgdG9wOiAycHg7XHJcbiAgYm90dG9tOiAwO1xyXG4gIHJpZ2h0OiAxcHg7XHJcbn1cclxudWwge1xyXG4gIGxpc3Qtc3R5bGU6IG5vbmU7XHJcbiAgcGFkZGluZzogMnB4IDA7XHJcbiAgbWFyZ2luOiAwO1xyXG59XHJcbnVsID4gbGkge1xyXG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcclxuICBjdXJzb3I6IC1tb3otZGVmYXVsdDtcclxuICBjdXJzb3I6IC13ZWJraXQtZGVmYXVsdDtcclxuICBjdXJzb3I6IGRlZmF1bHQ7XHJcblxyXG4gIHBhZGRpbmc6IDJweCAyMHB4O1xyXG4gIGZvbnQtc2l6ZTogMTJweDtcclxuICBjb2xvcjogIzQ0NDtcclxufVxyXG51bCA+IGxpLmhhc0hpZ2hsaWdodDpob3ZlciB7XHJcbiAgY29sb3I6ICNDQ0M7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgzMCwgMzAsIDMwLCAwLjgpO1xyXG59Il19 */"] });
    return ContextMenuComponent;
}());

/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](ContextMenuComponent, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"],
        args: [{
                selector: 'context-menu',
                templateUrl: './context-menu.component.html',
                styleUrls: ['./context-menu.component.css']
            }]
    }], function () { return [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ElementRef"] }, { type: service_context_menu_service__WEBPACK_IMPORTED_MODULE_1__["ContextMenuService"] }, { type: service_pointer_device_service__WEBPACK_IMPORTED_MODULE_2__["PointerDeviceService"] }]; }, { rootElementRef: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"],
            args: ['root', { static: true }]
        }], title: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], actions: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], isSubmenu: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], onContextMenu: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["HostListener"],
            args: ['contextmenu', ['$event']]
        }] }); })();


/***/ }),

/***/ "e8gA":
/*!******************************************!*\
  !*** ./src/app/class/tabletop-object.ts ***!
  \******************************************/
/*! exports provided: TabletopObject */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TabletopObject", function() { return TabletopObject; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "mrSG");
/* harmony import */ var _core_file_storage_image_file__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./core/file-storage/image-file */ "FjwV");
/* harmony import */ var _core_file_storage_image_storage__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./core/file-storage/image-storage */ "JQpJ");
/* harmony import */ var _core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./core/synchronize-object/decorator */ "1lIu");
/* harmony import */ var _core_synchronize_object_object_node__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./core/synchronize-object/object-node */ "F67Z");
/* harmony import */ var _core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./core/synchronize-object/object-store */ "hm7o");
/* harmony import */ var _data_element__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./data-element */ "gkrD");







var TabletopObject = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"])(TabletopObject, _super);
    function TabletopObject() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.location = {
            name: 'table',
            x: 0,
            y: 0
        };
        _this.posZ = 0;
        _this._imageFile = _core_file_storage_image_file__WEBPACK_IMPORTED_MODULE_1__["ImageFile"].Empty;
        _this._dataElements = {};
        return _this;
    }
    Object.defineProperty(TabletopObject.prototype, "isVisibleOnTable", {
        get: function () { return this.location.name === 'table'; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(TabletopObject.prototype, "rootDataElement", {
        // GameDataElement getter/setter
        get: function () {
            var e_1, _a;
            try {
                for (var _b = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(this.children), _c = _b.next(); !_c.done; _c = _b.next()) {
                    var node = _c.value;
                    if (node.getAttribute('name') === this.aliasName)
                        return node;
                }
            }
            catch (e_1_1) { e_1 = { error: e_1_1 }; }
            finally {
                try {
                    if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
                }
                finally { if (e_1) throw e_1.error; }
            }
            return null;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(TabletopObject.prototype, "imageDataElement", {
        get: function () { return this.getElement('image'); },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(TabletopObject.prototype, "commonDataElement", {
        get: function () { return this.getElement('common'); },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(TabletopObject.prototype, "detailDataElement", {
        get: function () { return this.getElement('detail'); },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(TabletopObject.prototype, "buffDataElement", {
        get: function () { return this.getElement('buff'); } //�����B�ɂăo�t�@�\�p�̒ǉ�
        ,
        enumerable: false,
        configurable: true
    });
    TabletopObject.prototype.addBuffDataElement = function () {
        if (!this.buffDataElement) {
            this.rootDataElement.appendChild(_data_element__WEBPACK_IMPORTED_MODULE_6__["DataElement"].create('buff', '', {}, 'buff_' + this.identifier));
        }
    };
    Object.defineProperty(TabletopObject.prototype, "imageFile", {
        get: function () {
            if (!this.imageDataElement)
                return this._imageFile;
            var imageIdElement = this.imageDataElement.getFirstElementByName('imageIdentifier');
            if (imageIdElement && this._imageFile.identifier !== imageIdElement.value) {
                var file = _core_file_storage_image_storage__WEBPACK_IMPORTED_MODULE_2__["ImageStorage"].instance.get(imageIdElement.value);
                this._imageFile = file ? file : _core_file_storage_image_file__WEBPACK_IMPORTED_MODULE_1__["ImageFile"].Empty;
            }
            return this._imageFile;
        },
        enumerable: false,
        configurable: true
    });
    TabletopObject.prototype.createDataElements = function () {
        this.initialize();
        var aliasName = this.aliasName;
        if (!this.rootDataElement) {
            var rootElement = _data_element__WEBPACK_IMPORTED_MODULE_6__["DataElement"].create(aliasName, '', {}, aliasName + '_' + this.identifier);
            this.appendChild(rootElement);
        }
        if (!this.imageDataElement) {
            this.rootDataElement.appendChild(_data_element__WEBPACK_IMPORTED_MODULE_6__["DataElement"].create('image', '', {}, 'image_' + this.identifier));
            this.imageDataElement.appendChild(_data_element__WEBPACK_IMPORTED_MODULE_6__["DataElement"].create('imageIdentifier', '', { type: 'image' }, 'imageIdentifier_' + this.identifier));
        }
        if (!this.commonDataElement)
            this.rootDataElement.appendChild(_data_element__WEBPACK_IMPORTED_MODULE_6__["DataElement"].create('common', '', {}, 'common_' + this.identifier));
        if (!this.detailDataElement)
            this.rootDataElement.appendChild(_data_element__WEBPACK_IMPORTED_MODULE_6__["DataElement"].create('detail', '', {}, 'detail_' + this.identifier));
        if (!this.buffDataElement)
            this.rootDataElement.appendChild(_data_element__WEBPACK_IMPORTED_MODULE_6__["DataElement"].create('buff', '', {}, 'buff_' + this.identifier)); //entyu
    };
    TabletopObject.prototype.getElement = function (name, from) {
        if (from === void 0) { from = this.rootDataElement; }
        if (!from)
            return null;
        var element = this._dataElements[name] ? _core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_5__["ObjectStore"].instance.get(this._dataElements[name]) : null;
        if (!element || !from.contains(element)) {
            element = from.getFirstElementByName(name);
            this._dataElements[name] = element ? element.identifier : null;
        }
        return element;
    };
    TabletopObject.prototype.getCommonValue = function (elementName, defaultValue) {
        var element = this.getElement(elementName, this.commonDataElement);
        if (!element)
            return defaultValue;
        if (typeof defaultValue === 'number') {
            var number = +element.value;
            return (Number.isNaN(number) ? defaultValue : number);
        }
        else {
            return (element.value + '');
        }
    };
    TabletopObject.prototype.setCommonValue = function (elementName, value) {
        var element = this.getElement(elementName, this.commonDataElement);
        if (!element) {
            return;
        }
        element.value = value;
    };
    TabletopObject.prototype.getImageFile = function (elementName) {
        if (!this.imageDataElement)
            return null;
        var image = this.getElement(elementName, this.imageDataElement);
        return image ? _core_file_storage_image_storage__WEBPACK_IMPORTED_MODULE_2__["ImageStorage"].instance.get(image.value) : null;
    };
    TabletopObject.prototype.setImageFile = function (elementName, imageFile) {
        var image = imageFile ? this.getElement(elementName, this.imageDataElement) : null;
        if (!image)
            return;
        image.value = imageFile.identifier;
    };
    TabletopObject.prototype.setLocation = function (location) {
        this.location.name = location;
        this.update();
    };
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_3__["SyncVar"])()
    ], TabletopObject.prototype, "location", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_3__["SyncVar"])()
    ], TabletopObject.prototype, "posZ", void 0);
    TabletopObject = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_3__["SyncObject"])('TabletopObject')
    ], TabletopObject);
    return TabletopObject;
}(_core_synchronize_object_object_node__WEBPACK_IMPORTED_MODULE_4__["ObjectNode"]));



/***/ }),

/***/ "eRQf":
/*!*******************************************************!*\
  !*** ./src/app/class/core/file-storage/audio-file.ts ***!
  \*******************************************************/
/*! exports provided: AudioState, AudioFile */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AudioState", function() { return AudioState; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AudioFile", function() { return AudioFile; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "mrSG");
/* harmony import */ var _file_reader_util__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./file-reader-util */ "N0uT");


var AudioState;
(function (AudioState) {
    AudioState[AudioState["NULL"] = 0] = "NULL";
    AudioState[AudioState["THUMBNAIL"] = 1] = "THUMBNAIL";
    AudioState[AudioState["COMPLETE"] = 2] = "COMPLETE";
    AudioState[AudioState["URL"] = 1000] = "URL";
})(AudioState || (AudioState = {}));
var AudioFile = /** @class */ (function () {
    function AudioFile() {
        this.context = {
            identifier: '',
            name: '',
            blob: null,
            type: '',
            url: ''
        };
        this.isHidden = false;
    }
    Object.defineProperty(AudioFile.prototype, "identifier", {
        get: function () { return this.context.identifier; },
        enumerable: false,
        configurable: true
    });
    ;
    Object.defineProperty(AudioFile.prototype, "name", {
        get: function () { return this.context.name; },
        enumerable: false,
        configurable: true
    });
    ;
    Object.defineProperty(AudioFile.prototype, "blob", {
        get: function () { return this.context.blob; },
        enumerable: false,
        configurable: true
    });
    ;
    Object.defineProperty(AudioFile.prototype, "url", {
        get: function () { return this.context.url; },
        enumerable: false,
        configurable: true
    });
    ;
    Object.defineProperty(AudioFile.prototype, "isReady", {
        get: function () { return AudioState.NULL < this.state; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(AudioFile.prototype, "state", {
        get: function () {
            if (!this.url && !this.blob)
                return AudioState.NULL;
            if (this.url && !this.blob)
                return AudioState.URL;
            return AudioState.COMPLETE;
        },
        enumerable: false,
        configurable: true
    });
    AudioFile.createEmpty = function (identifier) {
        var audio = new AudioFile();
        audio.context.identifier = identifier;
        return audio;
    };
    AudioFile.create = function (arg) {
        if (typeof arg === 'string') {
            var audio = new AudioFile();
            audio.context.identifier = arg;
            audio.context.name = arg;
            audio.context.url = arg;
            return audio;
        }
        else {
            var audio = new AudioFile();
            audio.apply(arg);
            return audio;
        }
    };
    AudioFile.createAsync = function (arg) {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function () {
            return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"])(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (!(arg instanceof File)) return [3 /*break*/, 2];
                        return [4 /*yield*/, AudioFile._createAsync(arg, arg.name)];
                    case 1: return [2 /*return*/, _a.sent()];
                    case 2:
                        if (!(arg instanceof Blob)) return [3 /*break*/, 4];
                        return [4 /*yield*/, AudioFile._createAsync(arg)];
                    case 3: return [2 /*return*/, _a.sent()];
                    case 4: return [2 /*return*/];
                }
            });
        });
    };
    AudioFile._createAsync = function (blob, name) {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function () {
            var arrayBuffer, audio, _a;
            return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"])(this, function (_b) {
                switch (_b.label) {
                    case 0: return [4 /*yield*/, _file_reader_util__WEBPACK_IMPORTED_MODULE_1__["FileReaderUtil"].readAsArrayBufferAsync(blob)];
                    case 1:
                        arrayBuffer = _b.sent();
                        audio = new AudioFile();
                        _a = audio.context;
                        return [4 /*yield*/, _file_reader_util__WEBPACK_IMPORTED_MODULE_1__["FileReaderUtil"].calcSHA256Async(arrayBuffer)];
                    case 2:
                        _a.identifier = _b.sent();
                        audio.context.name = name;
                        audio.context.blob = new Blob([arrayBuffer], { type: blob.type });
                        audio.context.type = audio.context.blob.type;
                        audio.context.url = window.URL.createObjectURL(audio.context.blob);
                        if (!audio.context.name)
                            audio.context.name = audio.context.identifier;
                        return [2 /*return*/, audio];
                }
            });
        });
    };
    AudioFile.prototype.destroy = function () {
        this.revokeURLs();
    };
    AudioFile.prototype.apply = function (context) {
        if (!this.context.identifier && context.identifier)
            this.context.identifier = context.identifier;
        if (context.name)
            this.context.name = context.name;
        if (!this.context.blob && context.blob)
            this.context.blob = context.blob;
        if (!this.context.type && context.type)
            this.context.type = context.type;
        if (!this.context.url && context.url) {
            if (this.state !== AudioState.URL)
                window.URL.revokeObjectURL(this.context.url);
            this.context.url = context.url;
        }
        this.createURLs();
    };
    AudioFile.prototype.createURLs = function () {
        if (this.state === AudioState.URL)
            return;
        if (this.context.blob && this.context.url === '')
            this.context.url = window.URL.createObjectURL(this.context.blob);
    };
    AudioFile.prototype.revokeURLs = function () {
        if (this.state === AudioState.URL)
            return;
        window.URL.revokeObjectURL(this.context.url);
    };
    AudioFile.prototype.toContext = function () {
        return {
            identifier: this.context.identifier,
            name: this.context.name,
            blob: this.context.blob,
            type: this.context.type,
            url: this.context.url
        };
    };
    return AudioFile;
}());



/***/ }),

/***/ "eS09":
/*!********************************************************!*\
  !*** ./src/app/class/core/system/util/zero-timeout.ts ***!
  \********************************************************/
/*! exports provided: setZeroTimeout, clearZeroTimeout */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "setZeroTimeout", function() { return setZeroTimeout; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "clearZeroTimeout", function() { return clearZeroTimeout; });
var i = 0;
var timeouts = new Map();
var channel = new MessageChannel();
function setZeroTimeout(fn) {
    if (i === 0x100000000) // max queue size
        i = 0;
    if (++i in timeouts)
        throw new Error('setZeroTimeout queue overflow.');
    timeouts.set(i, fn);
    channel.port2.postMessage(i);
    return i;
}
function clearZeroTimeout(id) {
    timeouts.delete(id);
}
channel.port1.onmessage = function (ev) {
    var fn = timeouts.get(ev.data);
    timeouts.delete(ev.data);
    if (fn)
        fn();
};
channel.port1.start();
channel.port2.start();


/***/ }),

/***/ "ebOT":
/*!**************************************************************************!*\
  !*** ./src/app/component/controller-input/controller-input.component.ts ***!
  \**************************************************************************/
/*! exports provided: ControllerInputComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ControllerInputComponent", function() { return ControllerInputComponent; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "mrSG");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "fXoL");
/* harmony import */ var _udonarium_core_file_storage_image_file__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @udonarium/core/file-storage/image-file */ "FjwV");
/* harmony import */ var _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @udonarium/core/synchronize-object/object-store */ "hm7o");
/* harmony import */ var _udonarium_core_system__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @udonarium/core/system */ "yNnI");
/* harmony import */ var _udonarium_core_system_network_peer_context__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @udonarium/core/system/network/peer-context */ "ztsr");
/* harmony import */ var _udonarium_core_system_util_resettable_timeout__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @udonarium/core/system/util/resettable-timeout */ "9ht1");
/* harmony import */ var _udonarium_dice_bot__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @udonarium/dice-bot */ "JUIv");
/* harmony import */ var _udonarium_game_character__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @udonarium/game-character */ "M/aK");
/* harmony import */ var _udonarium_peer_cursor__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @udonarium/peer-cursor */ "+UEV");
/* harmony import */ var component_chat_color_setting_chat_color_setting_component__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! component/chat-color-setting/chat-color-setting.component */ "mAmu");
/* harmony import */ var _udonarium_core_file_storage_image_storage__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @udonarium/core/file-storage/image-storage */ "JQpJ");
/* harmony import */ var service_chat_message_service__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! service/chat-message.service */ "PEfN");
/* harmony import */ var service_batch_service__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! service/batch.service */ "taL5");
/* harmony import */ var service_panel_service__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! service/panel.service */ "M9xM");
/* harmony import */ var service_pointer_device_service__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! service/pointer-device.service */ "GPP8");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @angular/common */ "ofXK");
/* harmony import */ var _ng_select_ng_select__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @ng-select/ng-select */ "ZOsW");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! @angular/forms */ "3Pt+");
/* harmony import */ var pipe_safe_pipe__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! pipe/safe.pipe */ "6HCy");





















var _c0 = ["textArea"];
function ControllerInputComponent_img_3_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelement"](0, "img", 22);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpipe"](1, "safe");
} if (rf & 2) {
    var ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("src", _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpipeBind2"](1, 1, ctx_r0.imageFile.url, "resourceUrl"), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵsanitizeUrl"]);
} }
function ControllerInputComponent_ng_option_9_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "ng-option", 23);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
} if (rf & 2) {
    var ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("value", ctx_r1.myPeer == null ? null : ctx_r1.myPeer.identifier);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtextInterpolate1"]("", ctx_r1.myPeer == null ? null : ctx_r1.myPeer.name, "\uFF08\u81EA\u5DF1\uFF09");
} }
function ControllerInputComponent_ng_option_10_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "ng-option", 23);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
} if (rf & 2) {
    var gameCharacter_r8 = ctx.$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("value", gameCharacter_r8.identifier);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtextInterpolate1"]("", gameCharacter_r8.name, " ");
} }
function ControllerInputComponent_ng_container_24_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](1, " \u5168\u89E3\u9664\u53E3\u2192 ");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerEnd"]();
} }
function ControllerInputComponent_ng_container_25_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](1, " \u5168\u9078\u629E\u3006\u2192 ");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerEnd"]();
} }
function ControllerInputComponent_ng_container_27_Template(rf, ctx) { if (rf & 1) {
    var _r10 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](1, "input", 24);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("ngModelChange", function ControllerInputComponent_ng_container_27_Template_input_ngModelChange_1_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r10); var ctx_r9 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](); return ctx_r9.tachieNum = $event; });
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpipe"](2, "safe");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](3, " 0/0 \u7ACB\u7D75 ");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var ctx_r5 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵstyleMap"](_angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpipeBind2"](2, 3, "font-size: 0.8em; min-width: 1em; width:" + 10 + "em; --min: 0; --max: " + 0 + "; --val:" + 10 + ";", "style"));
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngModel", ctx_r5.tachieNum);
} }
function ControllerInputComponent_ng_container_28_ng_container_4_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var ctx_r11 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtextInterpolate1"](" ", ctx_r11.selectCharacterTachie.currentValue, " ");
} }
function ControllerInputComponent_ng_container_28_ng_container_5_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainer"](0);
} }
function ControllerInputComponent_ng_container_28_Template(rf, ctx) { if (rf & 1) {
    var _r14 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](1, "input", 25);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("ngModelChange", function ControllerInputComponent_ng_container_28_Template_input_ngModelChange_1_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r14); var ctx_r13 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](); return ctx_r13.tachieNum = $event; });
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpipe"](2, "safe");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](4, ControllerInputComponent_ng_container_28_ng_container_4_Template, 2, 1, "ng-container", 13);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](5, ControllerInputComponent_ng_container_28_ng_container_5_Template, 1, 0, "ng-container", 13);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var ctx_r6 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵstyleMap"](_angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpipeBind2"](2, 8, "font-size: 0.8em; min-width: 1em; width:" + 10 + "em; --min: 0; --max: " + 0 + "; --val:" + 10 + ";", "style"));
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpropertyInterpolate"]("max", ctx_r6.selectCharacterTachieNum - 1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngModel", ctx_r6.tachieNum);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtextInterpolate2"](" ", ctx_r6.tachieNum, "/", ctx_r6.selectCharacterTachieNum - 1, " \u7ACB\u7D75 ");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", ctx_r6.selectCharacterTachie.currentValue.length > 0);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", ctx_r6.selectCharacterTachie.currentValue.length <= 0);
} }
var _c1 = function (a0) { return { "direct-message": a0 }; };
var _c2 = function (a0, a1, a2) { return { "background-color": a0, "border": a1, "border-radius": a2 }; };
var _c3 = function () { return { standalone: true }; };
var ControllerInputComponent = /** @class */ (function () {
    function ControllerInputComponent(ngZone, chatMessageService, batchService, panelService, pointerDeviceService) {
        this.ngZone = ngZone;
        this.chatMessageService = chatMessageService;
        this.batchService = batchService;
        this.panelService = panelService;
        this.pointerDeviceService = pointerDeviceService;
        this.onlyCharacters = false;
        this.chatTabidentifier = '';
        this._gameType = '';
        this.gameTypeChange = new _angular_core__WEBPACK_IMPORTED_MODULE_1__["EventEmitter"]();
        this._sendFrom = this.myPeer ? this.myPeer.identifier : '';
        this.sendFromChange = new _angular_core__WEBPACK_IMPORTED_MODULE_1__["EventEmitter"]();
        this._sendTo = '';
        this.sendToChange = new _angular_core__WEBPACK_IMPORTED_MODULE_1__["EventEmitter"]();
        this._text = '';
        this.textChange = new _angular_core__WEBPACK_IMPORTED_MODULE_1__["EventEmitter"]();
        this._selectNum = 0;
        //  set selectNum( num :number){ this._selectNum = num; }
        this.chat = new _angular_core__WEBPACK_IMPORTED_MODULE_1__["EventEmitter"]();
        this.allBox = new _angular_core__WEBPACK_IMPORTED_MODULE_1__["EventEmitter"]();
        this.hideChkEvent = new _angular_core__WEBPACK_IMPORTED_MODULE_1__["EventEmitter"]();
        this.gameHelp = '';
        this.colorSelectNo_ = 0;
        this.shouldUpdateCharacterList = true;
        this._gameCharacters = [];
        this.writingEventInterval = null;
        this.previousWritingLength = 0;
        //  writingPeers: Map<string, NodeJS.Timer> = new Map();
        this.writingPeers = new Map(); // 1.13.xとのmargeで修正
        this.writingPeerNames = [];
        this.buffHideIsChk = false;
    }
    Object.defineProperty(ControllerInputComponent.prototype, "gameType", {
        get: function () { return this._gameType; },
        set: function (gameType) { this._gameType = gameType; this.gameTypeChange.emit(gameType); },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ControllerInputComponent.prototype, "sendFrom", {
        get: function () { return this._sendFrom; },
        set: function (sendFrom) { this._sendFrom = sendFrom; this.sendFromChange.emit(sendFrom); },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ControllerInputComponent.prototype, "sendTo", {
        get: function () { return this._sendTo; },
        set: function (sendTo) { this._sendTo = sendTo; this.sendToChange.emit(sendTo); },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ControllerInputComponent.prototype, "text", {
        get: function () { return this._text; },
        set: function (text) { this._text = text; this.textChange.emit(text); },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ControllerInputComponent.prototype, "selectNum", {
        get: function () { return this._selectNum; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ControllerInputComponent.prototype, "tachieNum", {
        get: function () {
            var object = _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_3__["ObjectStore"].instance.get(this.sendFrom);
            if (object instanceof _udonarium_game_character__WEBPACK_IMPORTED_MODULE_8__["GameCharacter"]) {
                return object.selectedTachieNum;
            }
            return 0;
        },
        set: function (num) {
            var object = _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_3__["ObjectStore"].instance.get(this.sendFrom);
            if (object instanceof _udonarium_game_character__WEBPACK_IMPORTED_MODULE_8__["GameCharacter"]) {
                object.selectedTachieNum = num;
            }
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ControllerInputComponent.prototype, "isDirect", {
        get: function () { return this.sendTo != null && this.sendTo.length ? true : false; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ControllerInputComponent.prototype, "colorSelectNo", {
        get: function () {
            return this.colorSelectNo_;
        },
        set: function (num) {
            if (num < 0) {
                this.colorSelectNo_ = 0;
            }
            else if (num > 2) {
                this.colorSelectNo_ = 2;
            }
            else {
                this.colorSelectNo_ = num;
            }
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ControllerInputComponent.prototype, "colorSelectorBoxBorder_0", {
        get: function () {
            if (0 === this.colorSelectNo) {
                return '3px';
            }
            return '1px';
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ControllerInputComponent.prototype, "colorSelectorBoxBorder_1", {
        get: function () {
            if (1 === this.colorSelectNo) {
                return '3px';
            }
            return '1px';
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ControllerInputComponent.prototype, "colorSelectorBoxBorder_2", {
        get: function () {
            if (2 === this.colorSelectNo) {
                return '3px';
            }
            return '1px';
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ControllerInputComponent.prototype, "colorSelectorRadius_0", {
        get: function () {
            if (0 === this.colorSelectNo) {
                return '9px';
            }
            return '0px';
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ControllerInputComponent.prototype, "colorSelectorRadius_1", {
        get: function () {
            if (1 === this.colorSelectNo) {
                return '9px';
            }
            return '0px';
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ControllerInputComponent.prototype, "colorSelectorRadius_2", {
        get: function () {
            if (2 === this.colorSelectNo) {
                return '9px';
            }
            return '0px';
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ControllerInputComponent.prototype, "selectChatColor", {
        get: function () {
            console.log('selectChatColor :' + this.charactorChatColor(this.colorSelectNo));
            return this.charactorChatColor(this.colorSelectNo);
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ControllerInputComponent.prototype, "charactorChatColor_0", {
        get: function () {
            return this.charactorChatColor(0);
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ControllerInputComponent.prototype, "charactorChatColor_1", {
        get: function () {
            return this.charactorChatColor(1);
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ControllerInputComponent.prototype, "charactorChatColor_2", {
        get: function () {
            return this.charactorChatColor(2);
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ControllerInputComponent.prototype, "selectCharacterTachie", {
        get: function () {
            var object = _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_3__["ObjectStore"].instance.get(this.sendFrom);
            if (object instanceof _udonarium_game_character__WEBPACK_IMPORTED_MODULE_8__["GameCharacter"]) {
                if (object.imageDataElement.children.length > this.tachieNum) {
                    return object.imageDataElement.children[this.tachieNum];
                }
            }
            return null;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ControllerInputComponent.prototype, "selectCharacterTachieNum", {
        get: function () {
            var object = _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_3__["ObjectStore"].instance.get(this.sendFrom);
            if (object instanceof _udonarium_game_character__WEBPACK_IMPORTED_MODULE_8__["GameCharacter"]) {
                return object.imageDataElement.children.length;
            }
            else if (object instanceof _udonarium_peer_cursor__WEBPACK_IMPORTED_MODULE_9__["PeerCursor"]) {
                return 0;
            }
            return 0;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ControllerInputComponent.prototype, "imageFile", {
        get: function () {
            if (this.selectCharacterTachie) {
                var imageFile = _udonarium_core_file_storage_image_storage__WEBPACK_IMPORTED_MODULE_11__["ImageStorage"].instance.get(this.selectCharacterTachie.value);
                return imageFile ? imageFile : _udonarium_core_file_storage_image_file__WEBPACK_IMPORTED_MODULE_2__["ImageFile"].Empty;
            }
            var object = _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_3__["ObjectStore"].instance.get(this.sendFrom);
            var image = null;
            if (object instanceof _udonarium_game_character__WEBPACK_IMPORTED_MODULE_8__["GameCharacter"]) {
                image = object.imageFile;
            }
            else if (object instanceof _udonarium_peer_cursor__WEBPACK_IMPORTED_MODULE_9__["PeerCursor"]) {
                image = object.image;
            }
            return image ? image : _udonarium_core_file_storage_image_file__WEBPACK_IMPORTED_MODULE_2__["ImageFile"].Empty;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ControllerInputComponent.prototype, "gameCharacters", {
        get: function () {
            var _this = this;
            if (this.shouldUpdateCharacterList) {
                this.shouldUpdateCharacterList = false;
                this._gameCharacters = _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_3__["ObjectStore"].instance
                    .getObjects(_udonarium_game_character__WEBPACK_IMPORTED_MODULE_8__["GameCharacter"])
                    .filter(function (character) { return _this.allowsChat(character); });
            }
            return this._gameCharacters;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ControllerInputComponent.prototype, "diceBotInfos", {
        get: function () { return _udonarium_dice_bot__WEBPACK_IMPORTED_MODULE_7__["DiceBot"].diceBotInfos; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ControllerInputComponent.prototype, "myPeer", {
        get: function () { return _udonarium_peer_cursor__WEBPACK_IMPORTED_MODULE_9__["PeerCursor"].myCursor; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ControllerInputComponent.prototype, "otherPeers", {
        get: function () { return _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_3__["ObjectStore"].instance.getObjects(_udonarium_peer_cursor__WEBPACK_IMPORTED_MODULE_9__["PeerCursor"]); },
        enumerable: false,
        configurable: true
    });
    ControllerInputComponent.prototype.setColorNum = function (num) {
        this.colorSelectNo = num;
    };
    ControllerInputComponent.prototype.charactorChatColor = function (num) {
        var object = _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_3__["ObjectStore"].instance.get(this.sendFrom);
        if (object instanceof _udonarium_game_character__WEBPACK_IMPORTED_MODULE_8__["GameCharacter"]) {
            return object.chatColorCode[num];
        }
        else {
            return '#000000';
        }
    };
    ControllerInputComponent.prototype.shoeColorSetting = function () {
        var object = _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_3__["ObjectStore"].instance.get(this.sendFrom);
        if (object instanceof _udonarium_game_character__WEBPACK_IMPORTED_MODULE_8__["GameCharacter"]) {
            var coordinate = this.pointerDeviceService.pointers[0];
            var title = '色設定';
            if (object.name.length) {
                title += ' - ' + object.name;
            }
            var option = { title: title, left: coordinate.x + 50, top: coordinate.y - 150, width: 300, height: 120 };
            var component = this.panelService.open(component_chat_color_setting_chat_color_setting_component__WEBPACK_IMPORTED_MODULE_10__["ChatColorSettingComponent"], option);
            component.tabletopObject = object;
        }
    };
    ControllerInputComponent.prototype.ngOnInit = function () {
        var _this = this;
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_4__["EventSystem"].register(this)
            .on('MESSAGE_ADDED', function (event) {
            /*
                    if (event.data.tabIdentifier !== this.chatTabidentifier) return;
                    let message = ObjectStore.instance.get<ChatMessage>(event.data.messageIdentifier);
                    let sendFrom = message ? message.from : '?';
                    if (this.writingPeers.has(sendFrom)) {
                      clearTimeout(this.writingPeers.get(sendFrom));
                      this.writingPeers.delete(sendFrom);
                      this.updateWritingPeerNames();
                    }
            */
            // 1.13.xとのmargeで修正
            if (event.data.tabIdentifier !== _this.chatTabidentifier) {
                return;
            }
            var message = _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_3__["ObjectStore"].instance.get(event.data.messageIdentifier);
            var peerCursor = _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_3__["ObjectStore"].instance.getObjects(_udonarium_peer_cursor__WEBPACK_IMPORTED_MODULE_9__["PeerCursor"]).find(function (obj) { return obj.userId === message.from; });
            var sendFrom = peerCursor ? peerCursor.peerId : '?';
            if (_this.writingPeers.has(sendFrom)) {
                _this.writingPeers.get(sendFrom).stop();
                _this.writingPeers.delete(sendFrom);
                _this.updateWritingPeerNames();
            }
        })
            .on('UPDATE_GAME_OBJECT', -1000, function (event) {
            if (event.data.aliasName !== _udonarium_game_character__WEBPACK_IMPORTED_MODULE_8__["GameCharacter"].aliasName) {
                return;
            }
            _this.shouldUpdateCharacterList = true;
            if (event.data.identifier !== _this.sendFrom) {
                return;
            }
            var gameCharacter = _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_3__["ObjectStore"].instance.get(event.data.identifier);
            if (gameCharacter && !_this.allowsChat(gameCharacter)) {
                if (0 < _this.gameCharacters.length && _this.onlyCharacters) {
                    _this.sendFrom = _this.gameCharacters[0].identifier;
                }
                else {
                    _this.sendFrom = _this.myPeer.identifier;
                }
            }
        })
            .on('DISCONNECT_PEER', function (event) {
            var object = _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_3__["ObjectStore"].instance.get(_this.sendTo);
            //        if (object instanceof PeerCursor && object.peerId === event.data.peer) {
            if (object instanceof _udonarium_peer_cursor__WEBPACK_IMPORTED_MODULE_9__["PeerCursor"] && object.peerId === event.data.peerId) { // #marge
                _this.sendTo = '';
            }
        })
            .on('WRITING_A_MESSAGE', function (event) {
            /*
                    if (event.isSendFromSelf || event.data !== this.chatTabidentifier) return;
                    this.ngZone.run(() => {
                      if (this.writingPeers.has(event.sendFrom)) clearTimeout(this.writingPeers.get(event.sendFrom));
                      this.writingPeers.set(event.sendFrom, setTimeout(() => {
                        this.writingPeers.delete(event.sendFrom);
                        this.updateWritingPeerNames();
                      }, 2000));
                      this.updateWritingPeerNames();
                    });
            */
            // 1.13.xとのmargeで修正
            if (event.isSendFromSelf || event.data !== _this.chatTabidentifier) {
                return;
            }
            if (!_this.writingPeers.has(event.sendFrom)) {
                _this.writingPeers.set(event.sendFrom, new _udonarium_core_system_util_resettable_timeout__WEBPACK_IMPORTED_MODULE_6__["ResettableTimeout"](function () {
                    _this.writingPeers.delete(event.sendFrom);
                    _this.updateWritingPeerNames();
                    _this.ngZone.run(function () { });
                }, 2000));
            }
            _this.writingPeers.get(event.sendFrom).reset();
            _this.updateWritingPeerNames();
            _this.batchService.add(function () { return _this.ngZone.run(function () { }); }, _this);
        });
    };
    ControllerInputComponent.prototype.ngOnDestroy = function () {
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_4__["EventSystem"].unregister(this);
        this.batchService.remove(this);
    };
    ControllerInputComponent.prototype.updateWritingPeerNames = function () {
        this.writingPeerNames = Array.from(this.writingPeers.keys()).map(function (peerId) {
            //      let peer = PeerCursor.find(peerId);
            var peer = _udonarium_peer_cursor__WEBPACK_IMPORTED_MODULE_9__["PeerCursor"].findByPeerId(peerId); // 1.13.xとのmargeで修正
            return peer ? peer.name : '';
        });
    };
    ControllerInputComponent.prototype.onInput = function () {
        var _this = this;
        if (this.writingEventInterval === null && this.previousWritingLength <= this.text.length) {
            var sendTo = null;
            if (this.isDirect) {
                var object = _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_3__["ObjectStore"].instance.get(this.sendTo);
                if (object instanceof _udonarium_peer_cursor__WEBPACK_IMPORTED_MODULE_9__["PeerCursor"]) {
                    //          let peer = PeerContext.create(object.peerId);
                    //          if (peer) sendTo = peer.id;
                    var peer = _udonarium_core_system_network_peer_context__WEBPACK_IMPORTED_MODULE_5__["PeerContext"].parse(object.peerId);
                    if (peer) {
                        sendTo = peer.peerId;
                    } // 1.13.xとのmargeで修正
                }
            }
            _udonarium_core_system__WEBPACK_IMPORTED_MODULE_4__["EventSystem"].call('WRITING_A_MESSAGE', this.chatTabidentifier, sendTo);
            this.writingEventInterval = setTimeout(function () {
                _this.writingEventInterval = null;
            }, 200);
        }
        this.previousWritingLength = this.text.length;
        this.calcFitHeight();
    };
    ControllerInputComponent.prototype.sendChat = function (event) {
        var _this = this;
        if (event) {
            event.preventDefault();
        }
        if (!this.text.length) {
            return;
        }
        if (event && event.keyCode !== 13) {
            return;
        }
        if (!this.sendFrom.length) {
            this.sendFrom = this.myPeer.identifier;
        }
        var message = {
            text: this.text, sendFrom: this.sendFrom, sendTo: this.sendTo,
            tachieNum: this.tachieNum, messColor: this.selectChatColor,
        };
        _udonarium_dice_bot__WEBPACK_IMPORTED_MODULE_7__["DiceBot"].loadGameSystemAsync(this.gameType).then(function (gameSystem) {
            _this.chat.emit({
                text: message.text,
                gameSystem: gameSystem,
                sendFrom: message.sendFrom,
                sendTo: message.sendTo, tachieNum: message.tachieNum, messColor: message.messColor,
            });
        });
        this.text = '';
        this.previousWritingLength = this.text.length;
        var textArea = this.textAreaElementRef.nativeElement;
        textArea.value = '';
        this.calcFitHeight();
    };
    ControllerInputComponent.prototype.allBoxCheck = function () {
        if (this.selectNum > 0) {
            this.allBox.emit({ check: false });
        }
        else {
            this.allBox.emit({ check: true });
        }
    };
    ControllerInputComponent.prototype.calcFitHeight = function () {
        var textArea = this.textAreaElementRef.nativeElement;
        textArea.style.height = '';
        if (textArea.scrollHeight >= textArea.offsetHeight) {
            textArea.style.height = textArea.scrollHeight + 'px';
        }
    };
    ControllerInputComponent.prototype.loadDiceBot = function (gameType) {
        console.log('onChangeGameType ready');
        _udonarium_dice_bot__WEBPACK_IMPORTED_MODULE_7__["DiceBot"].getHelpMessage(gameType).then(function (help) {
            console.log('onChangeGameType done\n' + help);
        });
    };
    // 親コンポーネントにもCHKBOX情報を渡す、作りが悪いがチャット入力部流用のためひとまずこのまま
    ControllerInputComponent.prototype.buffHideChkChange = function (chk) {
        console.log('buffHideChkChange:' + chk);
        this.hideChkEvent.emit(chk);
        this.buffHideIsChk = chk;
    };
    ControllerInputComponent.prototype.allowsChat = function (gameCharacter) {
        var e_1, _a;
        switch (gameCharacter.location.name) {
            case 'table':
                return !gameCharacter.hideInventory;
            case this.myPeer.peerId:
                return true;
            case 'graveyard':
                return false;
            default:
                try {
                    for (var _b = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(_udonarium_core_system__WEBPACK_IMPORTED_MODULE_4__["Network"].peerContexts), _c = _b.next(); !_c.done; _c = _b.next()) {
                        var conn = _c.value;
                        //          if (conn.isOpen && gameCharacter.location.name === conn.fullstring) {
                        if (conn.isOpen && gameCharacter.location.name === conn.peerId) {
                            return false;
                        }
                    }
                }
                catch (e_1_1) { e_1 = { error: e_1_1 }; }
                finally {
                    try {
                        if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
                    }
                    finally { if (e_1) throw e_1.error; }
                }
                return true;
        }
    };
    ControllerInputComponent.ɵfac = function ControllerInputComponent_Factory(t) { return new (t || ControllerInputComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_1__["NgZone"]), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdirectiveInject"](service_chat_message_service__WEBPACK_IMPORTED_MODULE_12__["ChatMessageService"]), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdirectiveInject"](service_batch_service__WEBPACK_IMPORTED_MODULE_13__["BatchService"]), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdirectiveInject"](service_panel_service__WEBPACK_IMPORTED_MODULE_14__["PanelService"]), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdirectiveInject"](service_pointer_device_service__WEBPACK_IMPORTED_MODULE_15__["PointerDeviceService"])); };
    ControllerInputComponent.ɵcmp = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdefineComponent"]({ type: ControllerInputComponent, selectors: [["controller-input"]], viewQuery: function ControllerInputComponent_Query(rf, ctx) { if (rf & 1) {
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵstaticViewQuery"](_c0, true);
        } if (rf & 2) {
            var _t = void 0;
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵqueryRefresh"](_t = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵloadQuery"]()) && (ctx.textAreaElementRef = _t.first);
        } }, inputs: { onlyCharacters: "onlyCharacters", chatTabidentifier: "chatTabidentifier", _gameType: ["gameType", "_gameType"], _sendFrom: ["sendFrom", "_sendFrom"], _sendTo: ["sendTo", "_sendTo"], _text: ["text", "_text"], _selectNum: ["selectNum", "_selectNum"] }, outputs: { gameTypeChange: "gameTypeChange", sendFromChange: "sendFromChange", sendToChange: "sendToChange", textChange: "textChange", chat: "chat", allBox: "allBox", hideChkEvent: "hideChkEvent" }, decls: 41, vars: 33, consts: [[1, "table", 3, "ngClass"], [1, "table"], [1, "table-cell", "imagebox"], ["class", "image", 3, "src", 4, "ngIf"], [1, "table-cell"], [1, "ud-select", 2, "width", "10em", 3, "ngModel", "searchable", "clearable", "ngModelChange"], [3, "value", 4, "ngIf"], [3, "value", 4, "ngFor", "ngForOf"], [1, "color", 3, "ngStyle", "click"], [1, "color-setting", "small-font", 3, "click"], [1, "material-icons", "small-font"], [2, "font-size", "0.8em", "text-align", "right"], [1, "color-setting", "small-font", 2, "width", "7em", 3, "click"], [4, "ngIf"], [1, "tachie-tag"], [2, "width", "100%"], [2, "float", "right", "text-align", "right"], ["name", "buff_hide_chk", "type", "checkbox", 3, "change"], [3, "hidden"], ["placeholder", "Enter\u3067\u9001\u4FE1", 1, "controller-input", 3, "ngModel", "ngModelOptions", "ngModelChange", "input", "keydown.enter"], ["textArea", ""], ["type", "submit", 3, "click"], [1, "image", 3, "src"], [3, "value"], ["type", "range", "min", "0", "max", "0", 3, "ngModel", "ngModelChange"], ["type", "range", "min", "0", 3, "max", "ngModel", "ngModelChange"]], template: function ControllerInputComponent_Template(rf, ctx) { if (rf & 1) {
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "div", 0);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](1, "div", 1);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](2, "div", 2);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](3, ControllerInputComponent_img_3_Template, 2, 4, "img", 3);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](4, "div", 4);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](5, "div", 1);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](6, "div", 4);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](7, "div");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](8, "ng-select", 5);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("ngModelChange", function ControllerInputComponent_Template_ng_select_ngModelChange_8_listener($event) { return ctx.sendFrom = $event; });
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](9, ControllerInputComponent_ng_option_9_Template, 2, 2, "ng-option", 6);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](10, ControllerInputComponent_ng_option_10_Template, 2, 2, "ng-option", 7);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](11, "div");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](12, "div", 8);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("click", function ControllerInputComponent_Template_div_click_12_listener() { return ctx.setColorNum(0); });
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](13, "div", 8);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("click", function ControllerInputComponent_Template_div_click_13_listener() { return ctx.setColorNum(1); });
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](14, "div", 8);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("click", function ControllerInputComponent_Template_div_click_14_listener() { return ctx.setColorNum(2); });
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](15, "button", 9);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("click", function ControllerInputComponent_Template_button_click_15_listener() { return ctx.shoeColorSetting(); });
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](16, "i", 10);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](17, "settings");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](18, "\u8272\u8A2D\u5B9A");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](19, "div", 4);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](20, "div", 11);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](21);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelement"](22, "br");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](23, "button", 12);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("click", function ControllerInputComponent_Template_button_click_23_listener() { return ctx.allBoxCheck(); });
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](24, ControllerInputComponent_ng_container_24_Template, 2, 0, "ng-container", 13);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](25, ControllerInputComponent_ng_container_25_Template, 2, 0, "ng-container", 13);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](26, "div", 14);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](27, ControllerInputComponent_ng_container_27_Template, 4, 6, "ng-container", 13);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](28, ControllerInputComponent_ng_container_28_Template, 6, 11, "ng-container", 13);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelement"](29, "hr");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](30, "div", 15);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](31, "\u30D0\u30D5/\u30C7\u30D0\u30C3\u30D5\u30A1\u30FC ");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](32, "div", 16);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](33, "\u96B1\u85CF ");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](34, "input", 17);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("change", function ControllerInputComponent_Template_input_change_34_listener($event) { return ctx.buffHideChkChange($event.target.checked); });
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](35, "form");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](36, "div", 18);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](37, "textarea", 19, 20);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("ngModelChange", function ControllerInputComponent_Template_textarea_ngModelChange_37_listener($event) { return ctx.text = $event; })("input", function ControllerInputComponent_Template_textarea_input_37_listener() { return ctx.onInput(); })("keydown.enter", function ControllerInputComponent_Template_textarea_keydown_enter_37_listener($event) { return ctx.sendChat($event); });
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](39, "button", 21);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("click", function ControllerInputComponent_Template_button_click_39_listener() { return ctx.sendChat(null); });
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](40, "\u5BE6\u884C");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
        } if (rf & 2) {
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngClass", _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpureFunction1"](18, _c1, ctx.isDirect));
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](3);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", 0 < ctx.imageFile.url.length);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](5);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngModel", ctx.sendFrom)("searchable", false)("clearable", false);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", !ctx.onlyCharacters);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngForOf", ctx.gameCharacters);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](2);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngStyle", _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpureFunction3"](20, _c2, ctx.charactorChatColor_0, "solid " + ctx.colorSelectorBoxBorder_0 + " #666666", ctx.colorSelectorRadius_0));
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngStyle", _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpureFunction3"](24, _c2, ctx.charactorChatColor_1, "solid " + ctx.colorSelectorBoxBorder_1 + " #666666", ctx.colorSelectorRadius_1));
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngStyle", _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpureFunction3"](28, _c2, ctx.charactorChatColor_2, "solid " + ctx.colorSelectorBoxBorder_2 + " #666666", ctx.colorSelectorRadius_2));
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](7);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtextInterpolate1"](" \u9078\u64C7\u6578\uFF1A", ctx.selectNum, "");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](3);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", 0 != ctx.selectNum);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", 0 == ctx.selectNum);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](2);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", 1 >= ctx.selectCharacterTachieNum);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", 1 < ctx.selectCharacterTachieNum);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](8);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("hidden", ctx.buffHideIsChk);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngModel", ctx.text)("ngModelOptions", _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpureFunction0"](32, _c3));
        } }, directives: [_angular_common__WEBPACK_IMPORTED_MODULE_16__["NgClass"], _angular_common__WEBPACK_IMPORTED_MODULE_16__["NgIf"], _ng_select_ng_select__WEBPACK_IMPORTED_MODULE_17__["NgSelectComponent"], _angular_forms__WEBPACK_IMPORTED_MODULE_18__["NgControlStatus"], _angular_forms__WEBPACK_IMPORTED_MODULE_18__["NgModel"], _angular_common__WEBPACK_IMPORTED_MODULE_16__["NgForOf"], _angular_common__WEBPACK_IMPORTED_MODULE_16__["NgStyle"], _angular_forms__WEBPACK_IMPORTED_MODULE_18__["ɵangular_packages_forms_forms_y"], _angular_forms__WEBPACK_IMPORTED_MODULE_18__["NgControlStatusGroup"], _angular_forms__WEBPACK_IMPORTED_MODULE_18__["NgForm"], _angular_forms__WEBPACK_IMPORTED_MODULE_18__["DefaultValueAccessor"], _ng_select_ng_select__WEBPACK_IMPORTED_MODULE_17__["ɵr"], _angular_forms__WEBPACK_IMPORTED_MODULE_18__["RangeValueAccessor"]], pipes: [pipe_safe_pipe__WEBPACK_IMPORTED_MODULE_19__["SafePipe"]], styles: ["div.color[_ngcontent-%COMP%]{\r\n  display: inline-block;\r\n  border: solid 1px #000;\r\n  box-sizing: border-box;\r\n  position: relative;\r\n  top:4px;\r\n  width:18px;\r\n  height:18px;\r\n  margin-left:2px;\r\n  margin-right:2px;\r\n  background-color: #888;\r\n  cursor: pointer;\r\n}\r\n\r\nbutton.color[_ngcontent-%COMP%]:focus {\r\n  outline: none;\r\n}\r\n\r\nbutton.color[_ngcontent-%COMP%]:hover {\r\n\r\n}\r\n\r\n.table[_ngcontent-%COMP%] {\r\n  box-sizing: border-box;\r\n  padding : 5px;\r\n  \r\n  \r\n  display: table;\r\n  \r\n  width: 100%;\r\n}\r\n\r\n.table[_ngcontent-%COMP%]   .table-cell[_ngcontent-%COMP%] {\r\n  display: table-cell;\r\n}\r\n\r\n.imagebox[_ngcontent-%COMP%] {\r\n  display: inline-block;\r\n  width: 50px;\r\n  height: 50px;\r\n  max-width: 50px;\r\n  max-height: 50px;\r\n  vertical-align: top;\r\n  text-align: center;\r\n}\r\n\r\n.image[_ngcontent-%COMP%]{\r\n  width: 100%;\r\n  height: 100%;\r\n  vertical-align: bottom;\r\n  object-fit: cover;\r\n  object-position: 50% 0%;\r\n}\r\n\r\n.controller-input[_ngcontent-%COMP%] {\r\n  font-family: inherit;\r\n  font-size: 13px;\r\n\r\n  width: calc(100% - 100px);\r\n  height: calc(1em + 4px);\r\n  min-height: calc(1em + 7px);\r\n  max-height: calc(6em + 7px);\r\n  resize: none;\r\n  overflow: auto;\r\n\r\n  padding: 1px;\r\n  margin: 5px;\r\n\r\n  white-space: pre-wrap;\r\n  word-wrap: break-word;\r\n  overflow-wrap: anywhere;\r\n  word-break: break-word;\r\n  vertical-align: bottom;\r\n}\r\n\r\n.writing-info[_ngcontent-%COMP%] {\r\n  font-size: 8px;\r\n  height: 1.3em;\r\n}\r\n\r\n.direct-message[_ngcontent-%COMP%] {\r\n  background-color: #555;\r\n  color: #CCC;\r\n}\r\n\r\n.small-font[_ngcontent-%COMP%] {\r\n  font-size: 12px;\r\n  vertical-align: middle;\r\n}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbnRyb2xsZXItaW5wdXQuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLHFCQUFxQjtFQUNyQixzQkFBc0I7RUFDdEIsc0JBQXNCO0VBQ3RCLGtCQUFrQjtFQUNsQixPQUFPO0VBQ1AsVUFBVTtFQUNWLFdBQVc7RUFDWCxlQUFlO0VBQ2YsZ0JBQWdCO0VBQ2hCLHNCQUFzQjtFQUN0QixlQUFlO0FBQ2pCOztBQUVBO0VBQ0UsYUFBYTtBQUNmOztBQUNBOztBQUVBOztBQUVBO0VBQ0Usc0JBQXNCO0VBQ3RCLGFBQWE7RUFDYixvQkFBb0I7RUFDcEIsY0FBYztFQUNkLGNBQWM7RUFDZCw0QkFBNEI7RUFDNUIsV0FBVztBQUNiOztBQUVBO0VBQ0UsbUJBQW1CO0FBQ3JCOztBQUVBO0VBQ0UscUJBQXFCO0VBQ3JCLFdBQVc7RUFDWCxZQUFZO0VBQ1osZUFBZTtFQUNmLGdCQUFnQjtFQUNoQixtQkFBbUI7RUFDbkIsa0JBQWtCO0FBQ3BCOztBQUVBO0VBQ0UsV0FBVztFQUNYLFlBQVk7RUFDWixzQkFBc0I7RUFDdEIsaUJBQWlCO0VBQ2pCLHVCQUF1QjtBQUN6Qjs7QUFFQTtFQUNFLG9CQUFvQjtFQUNwQixlQUFlOztFQUVmLHlCQUF5QjtFQUN6Qix1QkFBdUI7RUFDdkIsMkJBQTJCO0VBQzNCLDJCQUEyQjtFQUMzQixZQUFZO0VBQ1osY0FBYzs7RUFFZCxZQUFZO0VBQ1osV0FBVzs7RUFFWCxxQkFBcUI7RUFDckIscUJBQXFCO0VBQ3JCLHVCQUF1QjtFQUN2QixzQkFBc0I7RUFDdEIsc0JBQXNCO0FBQ3hCOztBQUVBO0VBQ0UsY0FBYztFQUNkLGFBQWE7QUFDZjs7QUFFQTtFQUNFLHNCQUFzQjtFQUN0QixXQUFXO0FBQ2I7O0FBRUE7RUFDRSxlQUFlO0VBQ2Ysc0JBQXNCO0FBQ3hCIiwiZmlsZSI6ImNvbnRyb2xsZXItaW5wdXQuY29tcG9uZW50LmNzcyIsInNvdXJjZXNDb250ZW50IjpbImRpdi5jb2xvcntcclxuICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XHJcbiAgYm9yZGVyOiBzb2xpZCAxcHggIzAwMDtcclxuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xyXG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcclxuICB0b3A6NHB4O1xyXG4gIHdpZHRoOjE4cHg7XHJcbiAgaGVpZ2h0OjE4cHg7XHJcbiAgbWFyZ2luLWxlZnQ6MnB4O1xyXG4gIG1hcmdpbi1yaWdodDoycHg7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogIzg4ODtcclxuICBjdXJzb3I6IHBvaW50ZXI7XHJcbn1cclxuXHJcbmJ1dHRvbi5jb2xvcjpmb2N1cyB7XHJcbiAgb3V0bGluZTogbm9uZTtcclxufVxyXG5idXR0b24uY29sb3I6aG92ZXIge1xyXG5cclxufVxyXG5cclxuLnRhYmxlIHtcclxuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xyXG4gIHBhZGRpbmcgOiA1cHg7XHJcbiAgLypwb3NpdGlvbiA6IGZpeGVkOyovXHJcbiAgLypib3R0b20gOiAwOyovXHJcbiAgZGlzcGxheTogdGFibGU7XHJcbiAgLyp3aWR0aDogY2FsYygxMDAlIC0gMzBweCk7Ki9cclxuICB3aWR0aDogMTAwJTtcclxufVxyXG5cclxuLnRhYmxlIC50YWJsZS1jZWxsIHtcclxuICBkaXNwbGF5OiB0YWJsZS1jZWxsO1xyXG59XHJcblxyXG4uaW1hZ2Vib3gge1xyXG4gIGRpc3BsYXk6IGlubGluZS1ibG9jaztcclxuICB3aWR0aDogNTBweDtcclxuICBoZWlnaHQ6IDUwcHg7XHJcbiAgbWF4LXdpZHRoOiA1MHB4O1xyXG4gIG1heC1oZWlnaHQ6IDUwcHg7XHJcbiAgdmVydGljYWwtYWxpZ246IHRvcDtcclxuICB0ZXh0LWFsaWduOiBjZW50ZXI7XHJcbn1cclxuXHJcbi5pbWFnZXtcclxuICB3aWR0aDogMTAwJTtcclxuICBoZWlnaHQ6IDEwMCU7XHJcbiAgdmVydGljYWwtYWxpZ246IGJvdHRvbTtcclxuICBvYmplY3QtZml0OiBjb3ZlcjtcclxuICBvYmplY3QtcG9zaXRpb246IDUwJSAwJTtcclxufVxyXG5cclxuLmNvbnRyb2xsZXItaW5wdXQge1xyXG4gIGZvbnQtZmFtaWx5OiBpbmhlcml0O1xyXG4gIGZvbnQtc2l6ZTogMTNweDtcclxuXHJcbiAgd2lkdGg6IGNhbGMoMTAwJSAtIDEwMHB4KTtcclxuICBoZWlnaHQ6IGNhbGMoMWVtICsgNHB4KTtcclxuICBtaW4taGVpZ2h0OiBjYWxjKDFlbSArIDdweCk7XHJcbiAgbWF4LWhlaWdodDogY2FsYyg2ZW0gKyA3cHgpO1xyXG4gIHJlc2l6ZTogbm9uZTtcclxuICBvdmVyZmxvdzogYXV0bztcclxuXHJcbiAgcGFkZGluZzogMXB4O1xyXG4gIG1hcmdpbjogNXB4O1xyXG5cclxuICB3aGl0ZS1zcGFjZTogcHJlLXdyYXA7XHJcbiAgd29yZC13cmFwOiBicmVhay13b3JkO1xyXG4gIG92ZXJmbG93LXdyYXA6IGFueXdoZXJlO1xyXG4gIHdvcmQtYnJlYWs6IGJyZWFrLXdvcmQ7XHJcbiAgdmVydGljYWwtYWxpZ246IGJvdHRvbTtcclxufVxyXG5cclxuLndyaXRpbmctaW5mbyB7XHJcbiAgZm9udC1zaXplOiA4cHg7XHJcbiAgaGVpZ2h0OiAxLjNlbTtcclxufVxyXG5cclxuLmRpcmVjdC1tZXNzYWdlIHtcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiAjNTU1O1xyXG4gIGNvbG9yOiAjQ0NDO1xyXG59XHJcblxyXG4uc21hbGwtZm9udCB7XHJcbiAgZm9udC1zaXplOiAxMnB4O1xyXG4gIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7XHJcbn1cclxuIl19 */"] });
    return ControllerInputComponent;
}());

/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵsetClassMetadata"](ControllerInputComponent, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_1__["Component"],
        args: [{
                selector: 'controller-input',
                templateUrl: './controller-input.component.html',
                styleUrls: ['./controller-input.component.css']
            }]
    }], function () { return [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_1__["NgZone"] }, { type: service_chat_message_service__WEBPACK_IMPORTED_MODULE_12__["ChatMessageService"] }, { type: service_batch_service__WEBPACK_IMPORTED_MODULE_13__["BatchService"] }, { type: service_panel_service__WEBPACK_IMPORTED_MODULE_14__["PanelService"] }, { type: service_pointer_device_service__WEBPACK_IMPORTED_MODULE_15__["PointerDeviceService"] }]; }, { textAreaElementRef: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_1__["ViewChild"],
            args: ['textArea', { static: true }]
        }], onlyCharacters: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_1__["Input"]
        }], chatTabidentifier: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_1__["Input"]
        }], _gameType: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_1__["Input"],
            args: ['gameType']
        }], gameTypeChange: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_1__["Output"]
        }], _sendFrom: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_1__["Input"],
            args: ['sendFrom']
        }], sendFromChange: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_1__["Output"]
        }], _sendTo: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_1__["Input"],
            args: ['sendTo']
        }], sendToChange: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_1__["Output"]
        }], _text: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_1__["Input"],
            args: ['text']
        }], textChange: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_1__["Output"]
        }], _selectNum: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_1__["Input"],
            args: ['selectNum']
        }], chat: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_1__["Output"]
        }], allBox: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_1__["Output"]
        }], hideChkEvent: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_1__["Output"]
        }] }); })();


/***/ }),

/***/ "edKV":
/*!***************************************!*\
  !*** ./src/app/class/chat-message.ts ***!
  \***************************************/
/*! exports provided: ChatMessage */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ChatMessage", function() { return ChatMessage; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "mrSG");
/* harmony import */ var _core_file_storage_image_storage__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./core/file-storage/image-storage */ "JQpJ");
/* harmony import */ var _core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./core/synchronize-object/decorator */ "1lIu");
/* harmony import */ var _core_synchronize_object_object_node__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./core/synchronize-object/object-node */ "F67Z");
/* harmony import */ var _core_system__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./core/system */ "yNnI");
/* harmony import */ var _core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./core/synchronize-object/object-store */ "hm7o");






var ChatMessage = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"])(ChatMessage, _super);
    function ChatMessage() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this._sendTo = [];
        _this._tags = [];
        return _this;
    }
    Object.defineProperty(ChatMessage.prototype, "tabIdentifier", {
        get: function () { return this.parent.identifier; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ChatMessage.prototype, "text", {
        get: function () { return this.value; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ChatMessage.prototype, "timestamp", {
        get: function () {
            var timestamp = this.getAttribute('timestamp');
            var num = timestamp ? +timestamp : 0;
            return Number.isNaN(num) ? 1 : num;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ChatMessage.prototype, "sendTo", {
        get: function () {
            if (this._to !== this.to) {
                this._to = this.to;
                this._sendTo = this.to != null && 0 < this.to.trim().length ? this.to.trim().split(/\s+/) : [];
            }
            return this._sendTo;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ChatMessage.prototype, "tags", {
        get: function () {
            if (this._tag !== this.tag) {
                this._tag = this.tag;
                this._tags = this.tag != null && 0 < this.tag.trim().length ? this.tag.trim().split(/\s+/) : [];
            }
            return this._tags;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ChatMessage.prototype, "image", {
        get: function () { return _core_file_storage_image_storage__WEBPACK_IMPORTED_MODULE_1__["ImageStorage"].instance.get(this.imageIdentifier); },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ChatMessage.prototype, "index", {
        get: function () { return this.minorIndex + this.timestamp; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ChatMessage.prototype, "isDirect", {
        get: function () { return 0 < this.sendTo.length ? true : false; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ChatMessage.prototype, "isSendFromSelf", {
        get: function () { return this.from === _core_system__WEBPACK_IMPORTED_MODULE_4__["Network"].peerContext.userId || this.originFrom === _core_system__WEBPACK_IMPORTED_MODULE_4__["Network"].peerContext.userId; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ChatMessage.prototype, "isRelatedToMe", {
        get: function () { return (-1 < this.sendTo.indexOf(_core_system__WEBPACK_IMPORTED_MODULE_4__["Network"].peerContext.userId)) || this.isSendFromSelf ? true : false; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ChatMessage.prototype, "isDisplayable", {
        get: function () { return this.isDirect ? this.isRelatedToMe : true; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ChatMessage.prototype, "isSystem", {
        get: function () { return -1 < this.tags.indexOf('system') ? true : false; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ChatMessage.prototype, "isDicebot", {
        get: function () { return this.isSystem && this.from === 'System-BCDice' ? true : false; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ChatMessage.prototype, "isSecret", {
        get: function () { return -1 < this.tags.indexOf('secret') ? true : false; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ChatMessage.prototype, "chatTabList", {
        get: function () { return _core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_5__["ObjectStore"].instance.get('ChatTabList'); },
        enumerable: false,
        configurable: true
    });
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_2__["SyncVar"])()
    ], ChatMessage.prototype, "originFrom", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_2__["SyncVar"])()
    ], ChatMessage.prototype, "from", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_2__["SyncVar"])()
    ], ChatMessage.prototype, "to", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_2__["SyncVar"])()
    ], ChatMessage.prototype, "name", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_2__["SyncVar"])()
    ], ChatMessage.prototype, "tag", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_2__["SyncVar"])()
    ], ChatMessage.prototype, "dicebot", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_2__["SyncVar"])()
    ], ChatMessage.prototype, "imageIdentifier", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_2__["SyncVar"])()
    ], ChatMessage.prototype, "imagePos", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_2__["SyncVar"])()
    ], ChatMessage.prototype, "messColor", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_2__["SyncVar"])()
    ], ChatMessage.prototype, "sendFrom", void 0);
    ChatMessage = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_2__["SyncObject"])('chat')
    ], ChatMessage);
    return ChatMessage;
}(_core_synchronize_object_object_node__WEBPACK_IMPORTED_MODULE_3__["ObjectNode"]));



/***/ }),

/***/ "fesB":
/*!**************************************************************************************************!*\
  !*** ./node_modules/bcdice/lib/bcdice/game_system lazy ^\.\/.*$ include: \.js$ namespace object ***!
  \**************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var map = {
	"./": [
		"FrAx",
		"default~MeikyuKingdomBasic~index",
		"default~SwordWorld2_5~index",
		"default~SwordWorld2_0~index",
		"default~SwordWorld~index",
		"default~LogHorizon_Korean~index",
		"default~LogHorizon~index",
		"default~Yggdrasill~index",
		"default~MagicaLogia_Korean~index",
		"default~MagicaLogia~index",
		"default~AlchemiaStruggle~index",
		"default~JekyllAndHyde~index",
		"default~DesperateRun~index",
		"default~UnsungDuet~index",
		"default~FilledWith~index",
		"default~GurpsFW~index",
		"default~MeikyuKingdom~index",
		"default~BeginningIdol~index",
		"default~BeginningIdol_Korean~index",
		"default~Elysion~index",
		"default~Satasupe~index",
		"default~NinjaSlayer~index",
		"default~PulpCthulhu~index",
		"default~AngelGear~index",
		"default~InfiniteBabeL~index",
		"default~ShinobiGami~index",
		"default~Cthulhu7th~index",
		"default~ParasiteBlood~index",
		"default~GranCrest~index",
		"default~Garako~index",
		"default~HuntersMoon~index",
		"default~Villaciel~index",
		"default~BloodMoon~index",
		"default~OneWayHeroics~index",
		"default~DeadlineHeroes~index",
		"default~MetalHeadExtream~index",
		"default~SterileLife~index",
		"default~LiveraDoll~index",
		"default~ColossalHunter~index",
		"default~ShoujoTenrankai~index",
		"default~KanColle~index",
		"default~TwilightGunsmoke~index",
		"default~NeverCloud~index",
		"default~DemonParasite~index",
		"default~SteamPunkers~index",
		"default~BattleTech~index",
		"default~DoubleCross_Korean~index",
		"default~RuinBreakers~index",
		"default~MeikyuDays~index",
		"default~DoubleCross~index",
		"default~HatsuneMiku~index",
		"default~KillDeathBusiness_Korean~index",
		"default~ScreamHighSchool~index",
		"default~Paradiso~index",
		"default~ShinkuuGakuen~index",
		"default~KillDeathBusiness~index",
		"default~BloodCrusade~index",
		"default~BlindMythos~index",
		"default~BeastBindTrinity~index",
		"default~EarthDawn4~index",
		"default~MetalHead~index",
		"default~EarthDawn3~index",
		"default~Dracurouge_Korean~index",
		"default~Warhammer4~index",
		"default~TorgEternity~index",
		"default~AceKillerGene~index",
		"default~GURPS~index",
		"default~Peekaboo~index",
		"default~YankeeYogSothoth~index",
		"default~KemonoNoMori~index",
		"default~Cthulhu7th_ChineseTraditional~index",
		"default~Dracurouge~index",
		"default~Cthulhu7th_Korean~index",
		"default~GardenOrder~index",
		"default~Torg1_5~index",
		"default~StellarKnights~index",
		"default~JuinKansen~index",
		"default~AnimaAnimus~index",
		"default~Cthulhu_Korean~index",
		"default~Cthulhu_ChineseTraditional~index",
		"default~SevenFortressMobius~index",
		"default~MonotoneMuseum_Korean~index",
		"default~Warhammer~index",
		"default~NightWizard3rd~index",
		"default~FullMetalPanic~index",
		"default~MetallicGuardian~index",
		"default~EtrianOdysseySRS~index",
		"default~Alshard~index",
		"default~SRS~index",
		"default~Skynauts~index",
		"default~NightWizard~index",
		"default~TunnelsAndTrolls~index",
		"default~Cthulhu~index",
		"default~GundogRevised~index",
		"default~MonotoneMuseum~index",
		"default~OracleEngine~index",
		"default~BadLife~index",
		"default~Nuekagami~index",
		"default~WitchQuest~index",
		"default~SkynautsBouken~index",
		"default~Torg~index",
		"default~CardRanker~index",
		"default~EmbryoMachine~index",
		"default~DetatokoSaga_Korean~index",
		"default~Nechronica_Korean~index",
		"default~AlterRaise~index",
		"default~LostRoyal~index",
		"default~Amadeus_Korean~index",
		"default~GundogZero~index",
		"default~Insane_Korean~index",
		"default~Strave~index",
		"default~BladeOfArcana~index",
		"default~DarkBlaze~index",
		"default~DarkDaysDrive~index",
		"default~TrinitySeven~index",
		"default~FutariSousa_Korean~index",
		"default~HouraiGakuen~index",
		"default~Postman~index",
		"default~DetatokoSaga~index",
		"default~Nechronica~index",
		"default~Kamigakari_Korean~index",
		"default~CthulhuTech~index",
		"default~RyuTuber~index",
		"default~ArsMagica~index",
		"default~Raisondetre~index",
		"default~EarthDawn~index",
		"default~BarnaKronika~index",
		"default~Amadeus~index",
		"default~Oukahoushin3rd~index",
		"default~Insane~index",
		"default~Kamigakari~index",
		"default~FutariSousa~index",
		"default~NSSQ~index",
		"default~Revulture~index",
		"default~Ryutama~index",
		"default~KurayamiCrying~index",
		"default~ChaosFlare~index",
		"default~GoblinSlayer~index",
		"default~NightmareHunterDeep~index",
		"default~Utakaze~index",
		"default~Fiasco_Korean~index",
		"default~GehennaAn~index",
		"common",
		"index"
	],
	"./AFF2e": [
		"mWil",
		"common"
	],
	"./AFF2e.js": [
		"mWil",
		"common"
	],
	"./AceKillerGene": [
		"OX2R",
		"default~AceKillerGene~index"
	],
	"./AceKillerGene.js": [
		"OX2R",
		"default~AceKillerGene~index"
	],
	"./Ainecadette": [
		"Ianp",
		"common"
	],
	"./Ainecadette.js": [
		"Ianp",
		"common"
	],
	"./Airgetlamh": [
		"AMSi",
		"common"
	],
	"./Airgetlamh.js": [
		"AMSi",
		"common"
	],
	"./AlchemiaStruggle": [
		"wzDC",
		"default~AlchemiaStruggle~index"
	],
	"./AlchemiaStruggle.js": [
		"wzDC",
		"default~AlchemiaStruggle~index"
	],
	"./Alsetto": [
		"iSWs",
		"common"
	],
	"./Alsetto.js": [
		"iSWs",
		"common"
	],
	"./Alshard": [
		"E87b",
		"default~Alshard~index"
	],
	"./Alshard.js": [
		"E87b",
		"default~Alshard~index"
	],
	"./AlterRaise": [
		"f5JW",
		"default~AlterRaise~index"
	],
	"./AlterRaise.js": [
		"f5JW",
		"default~AlterRaise~index"
	],
	"./Amadeus": [
		"dTZe",
		"default~Amadeus~index"
	],
	"./Amadeus.js": [
		"dTZe",
		"default~Amadeus~index"
	],
	"./Amadeus_Korean": [
		"z9fX",
		"default~Amadeus_Korean~index"
	],
	"./Amadeus_Korean.js": [
		"z9fX",
		"default~Amadeus_Korean~index"
	],
	"./AngelGear": [
		"IznK",
		"default~AngelGear~index"
	],
	"./AngelGear.js": [
		"IznK",
		"default~AngelGear~index"
	],
	"./AnimaAnimus": [
		"W6z+",
		"default~AnimaAnimus~index"
	],
	"./AnimaAnimus.js": [
		"W6z+",
		"default~AnimaAnimus~index"
	],
	"./Arianrhod": [
		"AMUg",
		"common"
	],
	"./Arianrhod.js": [
		"AMUg",
		"common"
	],
	"./ArsMagica": [
		"8IZY",
		"default~ArsMagica~index"
	],
	"./ArsMagica.js": [
		"8IZY",
		"default~ArsMagica~index"
	],
	"./Avandner": [
		"mBbF",
		"common"
	],
	"./Avandner.js": [
		"mBbF",
		"common"
	],
	"./BBN": [
		"7MLG",
		"common"
	],
	"./BBN.js": [
		"7MLG",
		"common"
	],
	"./BadLife": [
		"DIEu",
		"default~BadLife~index"
	],
	"./BadLife.js": [
		"DIEu",
		"default~BadLife~index"
	],
	"./BarnaKronika": [
		"UnFL",
		"default~BarnaKronika~index"
	],
	"./BarnaKronika.js": [
		"UnFL",
		"default~BarnaKronika~index"
	],
	"./BattleTech": [
		"afol",
		"default~BattleTech~index"
	],
	"./BattleTech.js": [
		"afol",
		"default~BattleTech~index"
	],
	"./BeastBindTrinity": [
		"aFQR",
		"default~BeastBindTrinity~index"
	],
	"./BeastBindTrinity.js": [
		"aFQR",
		"default~BeastBindTrinity~index"
	],
	"./BeginningIdol": [
		"VjH8",
		"default~BeginningIdol~index"
	],
	"./BeginningIdol.js": [
		"VjH8",
		"default~BeginningIdol~index"
	],
	"./BeginningIdol_Korean": [
		"t9hM",
		"default~BeginningIdol_Korean~index"
	],
	"./BeginningIdol_Korean.js": [
		"t9hM",
		"default~BeginningIdol_Korean~index"
	],
	"./BladeOfArcana": [
		"UxwN",
		"default~BladeOfArcana~index"
	],
	"./BladeOfArcana.js": [
		"UxwN",
		"default~BladeOfArcana~index"
	],
	"./BlindMythos": [
		"AYPM",
		"default~BlindMythos~index"
	],
	"./BlindMythos.js": [
		"AYPM",
		"default~BlindMythos~index"
	],
	"./BloodCrusade": [
		"gMcg",
		"default~BloodCrusade~index"
	],
	"./BloodCrusade.js": [
		"gMcg",
		"default~BloodCrusade~index"
	],
	"./BloodMoon": [
		"7gfb",
		"default~BloodMoon~index"
	],
	"./BloodMoon.js": [
		"7gfb",
		"default~BloodMoon~index"
	],
	"./CardRanker": [
		"Ks9r",
		"default~CardRanker~index"
	],
	"./CardRanker.js": [
		"Ks9r",
		"default~CardRanker~index"
	],
	"./ChaosFlare": [
		"C64a",
		"default~ChaosFlare~index"
	],
	"./ChaosFlare.js": [
		"C64a",
		"default~ChaosFlare~index"
	],
	"./Chill": [
		"goL+",
		"common"
	],
	"./Chill.js": [
		"goL+",
		"common"
	],
	"./Chill3": [
		"vyzR",
		"common"
	],
	"./Chill3.js": [
		"vyzR",
		"common"
	],
	"./CodeLayerd": [
		"PAHy",
		"common"
	],
	"./CodeLayerd.js": [
		"PAHy",
		"common"
	],
	"./ColossalHunter": [
		"9vgR",
		"default~ColossalHunter~index"
	],
	"./ColossalHunter.js": [
		"9vgR",
		"default~ColossalHunter~index"
	],
	"./Comes": [
		"frHO",
		"common"
	],
	"./Comes.js": [
		"frHO",
		"common"
	],
	"./CrashWorld": [
		"TteY",
		"common"
	],
	"./CrashWorld.js": [
		"TteY",
		"common"
	],
	"./Cthulhu": [
		"y2hU",
		"default~Cthulhu~index"
	],
	"./Cthulhu.js": [
		"y2hU",
		"default~Cthulhu~index"
	],
	"./Cthulhu7th": [
		"sPck",
		"default~Cthulhu7th~index"
	],
	"./Cthulhu7th.js": [
		"sPck",
		"default~Cthulhu7th~index"
	],
	"./Cthulhu7th_ChineseTraditional": [
		"BBV6",
		"default~Cthulhu7th_ChineseTraditional~index"
	],
	"./Cthulhu7th_ChineseTraditional.js": [
		"BBV6",
		"default~Cthulhu7th_ChineseTraditional~index"
	],
	"./Cthulhu7th_Korean": [
		"zUZ2",
		"default~Cthulhu7th_Korean~index"
	],
	"./Cthulhu7th_Korean.js": [
		"zUZ2",
		"default~Cthulhu7th_Korean~index"
	],
	"./CthulhuTech": [
		"Hu7I",
		"default~CthulhuTech~index"
	],
	"./CthulhuTech.js": [
		"Hu7I",
		"default~CthulhuTech~index"
	],
	"./Cthulhu_ChineseTraditional": [
		"Jgqp",
		"default~Cthulhu_ChineseTraditional~index"
	],
	"./Cthulhu_ChineseTraditional.js": [
		"Jgqp",
		"default~Cthulhu_ChineseTraditional~index"
	],
	"./Cthulhu_Korean": [
		"jYl8",
		"default~Cthulhu_Korean~index"
	],
	"./Cthulhu_Korean.js": [
		"jYl8",
		"default~Cthulhu_Korean~index"
	],
	"./DarkBlaze": [
		"A0Fm",
		"default~DarkBlaze~index"
	],
	"./DarkBlaze.js": [
		"A0Fm",
		"default~DarkBlaze~index"
	],
	"./DarkDaysDrive": [
		"1ciI",
		"default~DarkDaysDrive~index"
	],
	"./DarkDaysDrive.js": [
		"1ciI",
		"default~DarkDaysDrive~index"
	],
	"./DarkSouls": [
		"3h5d",
		"common"
	],
	"./DarkSouls.js": [
		"3h5d",
		"common"
	],
	"./DeadlineHeroes": [
		"3p2c",
		"default~DeadlineHeroes~index"
	],
	"./DeadlineHeroes.js": [
		"3p2c",
		"default~DeadlineHeroes~index"
	],
	"./DemonParasite": [
		"8WLV",
		"default~DemonParasite~index"
	],
	"./DemonParasite.js": [
		"8WLV",
		"default~DemonParasite~index"
	],
	"./DesperateRun": [
		"SSYo",
		"default~DesperateRun~index"
	],
	"./DesperateRun.js": [
		"SSYo",
		"default~DesperateRun~index"
	],
	"./DetatokoSaga": [
		"HPYb",
		"default~DetatokoSaga~index"
	],
	"./DetatokoSaga.js": [
		"HPYb",
		"default~DetatokoSaga~index"
	],
	"./DetatokoSaga_Korean": [
		"6zLE",
		"default~DetatokoSaga_Korean~index"
	],
	"./DetatokoSaga_Korean.js": [
		"6zLE",
		"default~DetatokoSaga_Korean~index"
	],
	"./DiceBot": [
		"5d0B",
		"common"
	],
	"./DiceBot.js": [
		"5d0B",
		"common"
	],
	"./DiceOfTheDead": [
		"pecn",
		"common"
	],
	"./DiceOfTheDead.js": [
		"pecn",
		"common"
	],
	"./DoubleCross": [
		"1ezJ",
		"default~DoubleCross~index"
	],
	"./DoubleCross.js": [
		"1ezJ",
		"default~DoubleCross~index"
	],
	"./DoubleCross_Korean": [
		"m91d",
		"default~DoubleCross_Korean~index"
	],
	"./DoubleCross_Korean.js": [
		"m91d",
		"default~DoubleCross_Korean~index"
	],
	"./Dracurouge": [
		"ZhBU",
		"default~Dracurouge~index"
	],
	"./Dracurouge.js": [
		"ZhBU",
		"default~Dracurouge~index"
	],
	"./Dracurouge_Korean": [
		"0DEk",
		"default~Dracurouge_Korean~index"
	],
	"./Dracurouge_Korean.js": [
		"0DEk",
		"default~Dracurouge_Korean~index"
	],
	"./DungeonsAndDragons": [
		"XRJP",
		"common"
	],
	"./DungeonsAndDragons.js": [
		"XRJP",
		"common"
	],
	"./EarthDawn": [
		"cubW",
		"default~EarthDawn~index"
	],
	"./EarthDawn.js": [
		"cubW",
		"default~EarthDawn~index"
	],
	"./EarthDawn3": [
		"Cj96",
		"default~EarthDawn3~index"
	],
	"./EarthDawn3.js": [
		"Cj96",
		"default~EarthDawn3~index"
	],
	"./EarthDawn4": [
		"fiCk",
		"default~EarthDawn4~index"
	],
	"./EarthDawn4.js": [
		"fiCk",
		"default~EarthDawn4~index"
	],
	"./EclipsePhase": [
		"Lsrw",
		"common"
	],
	"./EclipsePhase.js": [
		"Lsrw",
		"common"
	],
	"./Elric": [
		"dddO",
		"common"
	],
	"./Elric.js": [
		"dddO",
		"common"
	],
	"./Elysion": [
		"TUxJ",
		"default~Elysion~index"
	],
	"./Elysion.js": [
		"TUxJ",
		"default~Elysion~index"
	],
	"./EmbryoMachine": [
		"GgPt",
		"default~EmbryoMachine~index"
	],
	"./EmbryoMachine.js": [
		"GgPt",
		"default~EmbryoMachine~index"
	],
	"./Emoklore": [
		"VJ8/",
		"common"
	],
	"./Emoklore.js": [
		"VJ8/",
		"common"
	],
	"./EndBreaker": [
		"YubF",
		"common"
	],
	"./EndBreaker.js": [
		"YubF",
		"common"
	],
	"./EtrianOdysseySRS": [
		"qriG",
		"default~EtrianOdysseySRS~index"
	],
	"./EtrianOdysseySRS.js": [
		"qriG",
		"default~EtrianOdysseySRS~index"
	],
	"./Fiasco": [
		"jnGY",
		"common"
	],
	"./Fiasco.js": [
		"jnGY",
		"common"
	],
	"./Fiasco_Korean": [
		"VGU6",
		"default~Fiasco_Korean~index"
	],
	"./Fiasco_Korean.js": [
		"VGU6",
		"default~Fiasco_Korean~index"
	],
	"./FilledWith": [
		"HRgP",
		"default~FilledWith~index"
	],
	"./FilledWith.js": [
		"HRgP",
		"default~FilledWith~index"
	],
	"./FullMetalPanic": [
		"3DKS",
		"default~FullMetalPanic~index"
	],
	"./FullMetalPanic.js": [
		"3DKS",
		"default~FullMetalPanic~index"
	],
	"./FutariSousa": [
		"R2J1",
		"default~FutariSousa~index"
	],
	"./FutariSousa.js": [
		"R2J1",
		"default~FutariSousa~index"
	],
	"./FutariSousa_Korean": [
		"Lrfj",
		"default~FutariSousa_Korean~index"
	],
	"./FutariSousa_Korean.js": [
		"Lrfj",
		"default~FutariSousa_Korean~index"
	],
	"./GURPS": [
		"6b1g",
		"default~GURPS~index"
	],
	"./GURPS.js": [
		"6b1g",
		"default~GURPS~index"
	],
	"./Garako": [
		"BI7v",
		"default~Garako~index"
	],
	"./Garako.js": [
		"BI7v",
		"default~Garako~index"
	],
	"./GardenOrder": [
		"0yl0",
		"default~GardenOrder~index"
	],
	"./GardenOrder.js": [
		"0yl0",
		"default~GardenOrder~index"
	],
	"./GehennaAn": [
		"mn6k",
		"default~GehennaAn~index"
	],
	"./GehennaAn.js": [
		"mn6k",
		"default~GehennaAn~index"
	],
	"./GeishaGirlwithKatana": [
		"eqwX",
		"common"
	],
	"./GeishaGirlwithKatana.js": [
		"eqwX",
		"common"
	],
	"./GoblinSlayer": [
		"WOO6",
		"default~GoblinSlayer~index"
	],
	"./GoblinSlayer.js": [
		"WOO6",
		"default~GoblinSlayer~index"
	],
	"./GoldenSkyStories": [
		"piUX",
		"common"
	],
	"./GoldenSkyStories.js": [
		"piUX",
		"common"
	],
	"./Gorilla": [
		"wO+S",
		"common"
	],
	"./Gorilla.js": [
		"wO+S",
		"common"
	],
	"./GranCrest": [
		"dwqY",
		"default~GranCrest~index"
	],
	"./GranCrest.js": [
		"dwqY",
		"default~GranCrest~index"
	],
	"./Gundog": [
		"xoi/",
		"common"
	],
	"./Gundog.js": [
		"xoi/",
		"common"
	],
	"./GundogRevised": [
		"ULLz",
		"default~GundogRevised~index"
	],
	"./GundogRevised.js": [
		"ULLz",
		"default~GundogRevised~index"
	],
	"./GundogZero": [
		"8oOq",
		"default~GundogZero~index"
	],
	"./GundogZero.js": [
		"8oOq",
		"default~GundogZero~index"
	],
	"./GurpsFW": [
		"7R9D",
		"default~GurpsFW~index"
	],
	"./GurpsFW.js": [
		"7R9D",
		"default~GurpsFW~index"
	],
	"./HarnMaster": [
		"22xI",
		"common"
	],
	"./HarnMaster.js": [
		"22xI",
		"common"
	],
	"./HatsuneMiku": [
		"36L8",
		"default~HatsuneMiku~index"
	],
	"./HatsuneMiku.js": [
		"36L8",
		"default~HatsuneMiku~index"
	],
	"./Hieizan": [
		"P3gr",
		"common"
	],
	"./Hieizan.js": [
		"P3gr",
		"common"
	],
	"./HouraiGakuen": [
		"XxgY",
		"default~HouraiGakuen~index"
	],
	"./HouraiGakuen.js": [
		"XxgY",
		"default~HouraiGakuen~index"
	],
	"./HuntersMoon": [
		"pLfI",
		"default~HuntersMoon~index"
	],
	"./HuntersMoon.js": [
		"pLfI",
		"default~HuntersMoon~index"
	],
	"./Illusio": [
		"Oy8S",
		"common"
	],
	"./Illusio.js": [
		"Oy8S",
		"common"
	],
	"./InfiniteBabeL": [
		"k0MW",
		"default~InfiniteBabeL~index"
	],
	"./InfiniteBabeL.js": [
		"k0MW",
		"default~InfiniteBabeL~index"
	],
	"./InfiniteFantasia": [
		"J1nQ",
		"common"
	],
	"./InfiniteFantasia.js": [
		"J1nQ",
		"common"
	],
	"./Insane": [
		"ukuD",
		"default~Insane~index"
	],
	"./Insane.js": [
		"ukuD",
		"default~Insane~index"
	],
	"./Insane_Korean": [
		"6sQL",
		"default~Insane_Korean~index"
	],
	"./Insane_Korean.js": [
		"6sQL",
		"default~Insane_Korean~index"
	],
	"./IthaWenUa": [
		"hkEU",
		"common"
	],
	"./IthaWenUa.js": [
		"hkEU",
		"common"
	],
	"./JamesBond": [
		"In7P",
		"common"
	],
	"./JamesBond.js": [
		"In7P",
		"common"
	],
	"./JekyllAndHyde": [
		"O9Hp",
		"default~JekyllAndHyde~index"
	],
	"./JekyllAndHyde.js": [
		"O9Hp",
		"default~JekyllAndHyde~index"
	],
	"./JuinKansen": [
		"2yxa",
		"default~JuinKansen~index"
	],
	"./JuinKansen.js": [
		"2yxa",
		"default~JuinKansen~index"
	],
	"./Kamigakari": [
		"S+zv",
		"default~Kamigakari~index"
	],
	"./Kamigakari.js": [
		"S+zv",
		"default~Kamigakari~index"
	],
	"./Kamigakari_Korean": [
		"VABX",
		"default~Kamigakari_Korean~index"
	],
	"./Kamigakari_Korean.js": [
		"VABX",
		"default~Kamigakari_Korean~index"
	],
	"./KanColle": [
		"asMm",
		"default~KanColle~index"
	],
	"./KanColle.js": [
		"asMm",
		"default~KanColle~index"
	],
	"./KemonoNoMori": [
		"7yUK",
		"default~KemonoNoMori~index"
	],
	"./KemonoNoMori.js": [
		"7yUK",
		"default~KemonoNoMori~index"
	],
	"./KillDeathBusiness": [
		"RuRM",
		"default~KillDeathBusiness~index"
	],
	"./KillDeathBusiness.js": [
		"RuRM",
		"default~KillDeathBusiness~index"
	],
	"./KillDeathBusiness_Korean": [
		"0zZo",
		"default~KillDeathBusiness_Korean~index"
	],
	"./KillDeathBusiness_Korean.js": [
		"0zZo",
		"default~KillDeathBusiness_Korean~index"
	],
	"./KurayamiCrying": [
		"5oVZ",
		"default~KurayamiCrying~index"
	],
	"./KurayamiCrying.js": [
		"5oVZ",
		"default~KurayamiCrying~index"
	],
	"./LiveraDoll": [
		"zi63",
		"default~LiveraDoll~index"
	],
	"./LiveraDoll.js": [
		"zi63",
		"default~LiveraDoll~index"
	],
	"./LogHorizon": [
		"ybB4",
		"default~LogHorizon~index"
	],
	"./LogHorizon.js": [
		"ybB4",
		"default~LogHorizon~index"
	],
	"./LogHorizon_Korean": [
		"A1US",
		"default~LogHorizon_Korean~index"
	],
	"./LogHorizon_Korean.js": [
		"A1US",
		"default~LogHorizon_Korean~index"
	],
	"./LostRecord": [
		"kjae",
		"common"
	],
	"./LostRecord.js": [
		"kjae",
		"common"
	],
	"./LostRoyal": [
		"fFnV",
		"default~LostRoyal~index"
	],
	"./LostRoyal.js": [
		"fFnV",
		"default~LostRoyal~index"
	],
	"./MagicaLogia": [
		"ETtC",
		"default~MagicaLogia~index"
	],
	"./MagicaLogia.js": [
		"ETtC",
		"default~MagicaLogia~index"
	],
	"./MagicaLogia_Korean": [
		"XRby",
		"default~MagicaLogia_Korean~index"
	],
	"./MagicaLogia_Korean.js": [
		"XRby",
		"default~MagicaLogia_Korean~index"
	],
	"./MeikyuDays": [
		"5Ur+",
		"default~MeikyuDays~index"
	],
	"./MeikyuDays.js": [
		"5Ur+",
		"default~MeikyuDays~index"
	],
	"./MeikyuKingdom": [
		"UC05",
		"default~MeikyuKingdom~index"
	],
	"./MeikyuKingdom.js": [
		"UC05",
		"default~MeikyuKingdom~index"
	],
	"./MeikyuKingdomBasic": [
		"/1nW",
		"default~MeikyuKingdomBasic~index"
	],
	"./MeikyuKingdomBasic.js": [
		"/1nW",
		"default~MeikyuKingdomBasic~index"
	],
	"./MetalHead": [
		"euSr",
		"default~MetalHead~index"
	],
	"./MetalHead.js": [
		"euSr",
		"default~MetalHead~index"
	],
	"./MetalHeadExtream": [
		"isKR",
		"default~MetalHeadExtream~index"
	],
	"./MetalHeadExtream.js": [
		"isKR",
		"default~MetalHeadExtream~index"
	],
	"./MetallicGuardian": [
		"gumb",
		"default~MetallicGuardian~index"
	],
	"./MetallicGuardian.js": [
		"gumb",
		"default~MetallicGuardian~index"
	],
	"./MonotoneMuseum": [
		"9Ub2",
		"default~MonotoneMuseum~index"
	],
	"./MonotoneMuseum.js": [
		"9Ub2",
		"default~MonotoneMuseum~index"
	],
	"./MonotoneMuseum_Korean": [
		"0ddw",
		"default~MonotoneMuseum_Korean~index"
	],
	"./MonotoneMuseum_Korean.js": [
		"0ddw",
		"default~MonotoneMuseum_Korean~index"
	],
	"./NSSQ": [
		"BM3h",
		"default~NSSQ~index"
	],
	"./NSSQ.js": [
		"BM3h",
		"default~NSSQ~index"
	],
	"./Nechronica": [
		"psV8",
		"default~Nechronica~index"
	],
	"./Nechronica.js": [
		"psV8",
		"default~Nechronica~index"
	],
	"./Nechronica_Korean": [
		"Yzi5",
		"default~Nechronica_Korean~index"
	],
	"./Nechronica_Korean.js": [
		"Yzi5",
		"default~Nechronica_Korean~index"
	],
	"./NeverCloud": [
		"oohK",
		"default~NeverCloud~index"
	],
	"./NeverCloud.js": [
		"oohK",
		"default~NeverCloud~index"
	],
	"./NightWizard": [
		"Cpab",
		"default~NightWizard~index"
	],
	"./NightWizard.js": [
		"Cpab",
		"default~NightWizard~index"
	],
	"./NightWizard3rd": [
		"Qq0K",
		"default~NightWizard3rd~index"
	],
	"./NightWizard3rd.js": [
		"Qq0K",
		"default~NightWizard3rd~index"
	],
	"./NightmareHunterDeep": [
		"NFbI",
		"default~NightmareHunterDeep~index"
	],
	"./NightmareHunterDeep.js": [
		"NFbI",
		"default~NightmareHunterDeep~index"
	],
	"./NinjaSlayer": [
		"mLdZ",
		"default~NinjaSlayer~index"
	],
	"./NinjaSlayer.js": [
		"mLdZ",
		"default~NinjaSlayer~index"
	],
	"./NjslyrBattle": [
		"Bc9D",
		"common"
	],
	"./NjslyrBattle.js": [
		"Bc9D",
		"common"
	],
	"./Nuekagami": [
		"lPcP",
		"default~Nuekagami~index"
	],
	"./Nuekagami.js": [
		"lPcP",
		"default~Nuekagami~index"
	],
	"./OneWayHeroics": [
		"+vCw",
		"default~OneWayHeroics~index"
	],
	"./OneWayHeroics.js": [
		"+vCw",
		"default~OneWayHeroics~index"
	],
	"./OracleEngine": [
		"0FY2",
		"default~OracleEngine~index"
	],
	"./OracleEngine.js": [
		"0FY2",
		"default~OracleEngine~index"
	],
	"./OrgaRain": [
		"7xQw",
		"common"
	],
	"./OrgaRain.js": [
		"7xQw",
		"common"
	],
	"./Oukahoushin3rd": [
		"ssto",
		"default~Oukahoushin3rd~index"
	],
	"./Oukahoushin3rd.js": [
		"ssto",
		"default~Oukahoushin3rd~index"
	],
	"./Paradiso": [
		"xjZ9",
		"default~Paradiso~index"
	],
	"./Paradiso.js": [
		"xjZ9",
		"default~Paradiso~index"
	],
	"./Paranoia": [
		"+HbH",
		"common"
	],
	"./Paranoia.js": [
		"+HbH",
		"common"
	],
	"./ParanoiaRebooted": [
		"y6W0",
		"common"
	],
	"./ParanoiaRebooted.js": [
		"y6W0",
		"common"
	],
	"./ParasiteBlood": [
		"xRit",
		"default~ParasiteBlood~index"
	],
	"./ParasiteBlood.js": [
		"xRit",
		"default~ParasiteBlood~index"
	],
	"./Pathfinder": [
		"n/GQ",
		"common"
	],
	"./Pathfinder.js": [
		"n/GQ",
		"common"
	],
	"./Peekaboo": [
		"bgGC",
		"default~Peekaboo~index"
	],
	"./Peekaboo.js": [
		"bgGC",
		"default~Peekaboo~index"
	],
	"./Pendragon": [
		"irSd",
		"common"
	],
	"./Pendragon.js": [
		"irSd",
		"common"
	],
	"./PhantasmAdventure": [
		"cJSp",
		"common"
	],
	"./PhantasmAdventure.js": [
		"cJSp",
		"common"
	],
	"./Postman": [
		"Pw2m",
		"default~Postman~index"
	],
	"./Postman.js": [
		"Pw2m",
		"default~Postman~index"
	],
	"./PulpCthulhu": [
		"cunF",
		"default~PulpCthulhu~index"
	],
	"./PulpCthulhu.js": [
		"cunF",
		"default~PulpCthulhu~index"
	],
	"./Raisondetre": [
		"6/cF",
		"default~Raisondetre~index"
	],
	"./Raisondetre.js": [
		"6/cF",
		"default~Raisondetre~index"
	],
	"./RecordOfLodossWar": [
		"7EFR",
		"common"
	],
	"./RecordOfLodossWar.js": [
		"7EFR",
		"common"
	],
	"./RecordOfSteam": [
		"CAhj",
		"common"
	],
	"./RecordOfSteam.js": [
		"CAhj",
		"common"
	],
	"./Revulture": [
		"+bs6",
		"default~Revulture~index"
	],
	"./Revulture.js": [
		"+bs6",
		"default~Revulture~index"
	],
	"./RokumonSekai2": [
		"bO2Z",
		"common"
	],
	"./RokumonSekai2.js": [
		"bO2Z",
		"common"
	],
	"./RoleMaster": [
		"bYsS",
		"common"
	],
	"./RoleMaster.js": [
		"bYsS",
		"common"
	],
	"./RuinBreakers": [
		"dWjJ",
		"default~RuinBreakers~index"
	],
	"./RuinBreakers.js": [
		"dWjJ",
		"default~RuinBreakers~index"
	],
	"./RuneQuest": [
		"H/pX",
		"common"
	],
	"./RuneQuest.js": [
		"H/pX",
		"common"
	],
	"./RyuTuber": [
		"uAYo",
		"default~RyuTuber~index"
	],
	"./RyuTuber.js": [
		"uAYo",
		"default~RyuTuber~index"
	],
	"./Ryutama": [
		"41Dk",
		"default~Ryutama~index"
	],
	"./Ryutama.js": [
		"41Dk",
		"default~Ryutama~index"
	],
	"./SRS": [
		"XTRa",
		"default~SRS~index"
	],
	"./SRS.js": [
		"XTRa",
		"default~SRS~index"
	],
	"./SamsaraBallad": [
		"OU+m",
		"common"
	],
	"./SamsaraBallad.js": [
		"OU+m",
		"common"
	],
	"./Satasupe": [
		"9L+J",
		"default~Satasupe~index"
	],
	"./Satasupe.js": [
		"9L+J",
		"default~Satasupe~index"
	],
	"./ScreamHighSchool": [
		"nPUL",
		"default~ScreamHighSchool~index"
	],
	"./ScreamHighSchool.js": [
		"nPUL",
		"default~ScreamHighSchool~index"
	],
	"./SevenFortressMobius": [
		"kcya",
		"default~SevenFortressMobius~index"
	],
	"./SevenFortressMobius.js": [
		"kcya",
		"default~SevenFortressMobius~index"
	],
	"./ShadowRun": [
		"zzZI",
		"common"
	],
	"./ShadowRun.js": [
		"zzZI",
		"common"
	],
	"./ShadowRun4": [
		"kSBe",
		"common"
	],
	"./ShadowRun4.js": [
		"kSBe",
		"common"
	],
	"./ShadowRun5": [
		"nhlA",
		"common"
	],
	"./ShadowRun5.js": [
		"nhlA",
		"common"
	],
	"./SharedFantasia": [
		"uQmK",
		"common"
	],
	"./SharedFantasia.js": [
		"uQmK",
		"common"
	],
	"./ShinMegamiTenseiKakuseihen": [
		"aIpv",
		"common"
	],
	"./ShinMegamiTenseiKakuseihen.js": [
		"aIpv",
		"common"
	],
	"./ShinkuuGakuen": [
		"g9/q",
		"default~ShinkuuGakuen~index"
	],
	"./ShinkuuGakuen.js": [
		"g9/q",
		"default~ShinkuuGakuen~index"
	],
	"./ShinobiGami": [
		"7kAL",
		"default~ShinobiGami~index"
	],
	"./ShinobiGami.js": [
		"7kAL",
		"default~ShinobiGami~index"
	],
	"./ShoujoTenrankai": [
		"owW/",
		"default~ShoujoTenrankai~index"
	],
	"./ShoujoTenrankai.js": [
		"owW/",
		"default~ShoujoTenrankai~index"
	],
	"./Skynauts": [
		"KC31",
		"default~Skynauts~index"
	],
	"./Skynauts.js": [
		"KC31",
		"default~Skynauts~index"
	],
	"./SkynautsBouken": [
		"AXzp",
		"default~SkynautsBouken~index"
	],
	"./SkynautsBouken.js": [
		"AXzp",
		"default~SkynautsBouken~index"
	],
	"./SteamPunkers": [
		"WqKD",
		"default~SteamPunkers~index"
	],
	"./SteamPunkers.js": [
		"WqKD",
		"default~SteamPunkers~index"
	],
	"./StellarKnights": [
		"vikn",
		"default~StellarKnights~index"
	],
	"./StellarKnights.js": [
		"vikn",
		"default~StellarKnights~index"
	],
	"./SterileLife": [
		"RWe5",
		"default~SterileLife~index"
	],
	"./SterileLife.js": [
		"RWe5",
		"default~SterileLife~index"
	],
	"./StrangerOfSwordCity": [
		"Lsnz",
		"common"
	],
	"./StrangerOfSwordCity.js": [
		"Lsnz",
		"common"
	],
	"./StratoShout": [
		"hcZb",
		"common"
	],
	"./StratoShout.js": [
		"hcZb",
		"common"
	],
	"./StratoShout_Korean": [
		"qNSf",
		"common"
	],
	"./StratoShout_Korean.js": [
		"qNSf",
		"common"
	],
	"./Strave": [
		"+Qey",
		"default~Strave~index"
	],
	"./Strave.js": [
		"+Qey",
		"default~Strave~index"
	],
	"./SwordWorld": [
		"nWff",
		"default~SwordWorld~index"
	],
	"./SwordWorld.js": [
		"nWff",
		"default~SwordWorld~index"
	],
	"./SwordWorld2_0": [
		"tPkg",
		"default~SwordWorld2_0~index"
	],
	"./SwordWorld2_0.js": [
		"tPkg",
		"default~SwordWorld2_0~index"
	],
	"./SwordWorld2_5": [
		"CAdq",
		"default~SwordWorld2_5~index"
	],
	"./SwordWorld2_5.js": [
		"CAdq",
		"default~SwordWorld2_5~index"
	],
	"./TherapieSein": [
		"vMLC",
		"common"
	],
	"./TherapieSein.js": [
		"vMLC",
		"common"
	],
	"./TokumeiTenkousei": [
		"oXmh",
		"common"
	],
	"./TokumeiTenkousei.js": [
		"oXmh",
		"common"
	],
	"./TokyoGhostResearch": [
		"ib7m",
		"common"
	],
	"./TokyoGhostResearch.js": [
		"ib7m",
		"common"
	],
	"./TokyoNova": [
		"5tMs",
		"common"
	],
	"./TokyoNova.js": [
		"5tMs",
		"common"
	],
	"./Torg": [
		"ENSm",
		"default~Torg~index"
	],
	"./Torg.js": [
		"ENSm",
		"default~Torg~index"
	],
	"./Torg1_5": [
		"70Ww",
		"default~Torg1_5~index"
	],
	"./Torg1_5.js": [
		"70Ww",
		"default~Torg1_5~index"
	],
	"./TorgEternity": [
		"CaYn",
		"default~TorgEternity~index"
	],
	"./TorgEternity.js": [
		"CaYn",
		"default~TorgEternity~index"
	],
	"./TrinitySeven": [
		"Bf0i",
		"default~TrinitySeven~index"
	],
	"./TrinitySeven.js": [
		"Bf0i",
		"default~TrinitySeven~index"
	],
	"./TunnelsAndTrolls": [
		"lQxd",
		"default~TunnelsAndTrolls~index"
	],
	"./TunnelsAndTrolls.js": [
		"lQxd",
		"default~TunnelsAndTrolls~index"
	],
	"./TwilightGunsmoke": [
		"628n",
		"default~TwilightGunsmoke~index"
	],
	"./TwilightGunsmoke.js": [
		"628n",
		"default~TwilightGunsmoke~index"
	],
	"./UnsungDuet": [
		"jIUz",
		"default~UnsungDuet~index"
	],
	"./UnsungDuet.js": [
		"jIUz",
		"default~UnsungDuet~index"
	],
	"./Utakaze": [
		"/Bg6",
		"default~Utakaze~index"
	],
	"./Utakaze.js": [
		"/Bg6",
		"default~Utakaze~index"
	],
	"./VampireTheMasquerade5th": [
		"cI1M",
		"common"
	],
	"./VampireTheMasquerade5th.js": [
		"cI1M",
		"common"
	],
	"./Villaciel": [
		"ozu2",
		"default~Villaciel~index"
	],
	"./Villaciel.js": [
		"ozu2",
		"default~Villaciel~index"
	],
	"./WARPS": [
		"9CAH",
		"common"
	],
	"./WARPS.js": [
		"9CAH",
		"common"
	],
	"./WaresBlade": [
		"HW4s",
		"common"
	],
	"./WaresBlade.js": [
		"HW4s",
		"common"
	],
	"./Warhammer": [
		"Ouf3",
		"default~Warhammer~index"
	],
	"./Warhammer.js": [
		"Ouf3",
		"default~Warhammer~index"
	],
	"./Warhammer4": [
		"9ZF9",
		"default~Warhammer4~index"
	],
	"./Warhammer4.js": [
		"9ZF9",
		"default~Warhammer4~index"
	],
	"./WitchQuest": [
		"1Rc4",
		"default~WitchQuest~index"
	],
	"./WitchQuest.js": [
		"1Rc4",
		"default~WitchQuest~index"
	],
	"./WorldOfDarkness": [
		"TbWO",
		"common"
	],
	"./WorldOfDarkness.js": [
		"TbWO",
		"common"
	],
	"./YankeeYogSothoth": [
		"8zqA",
		"default~YankeeYogSothoth~index"
	],
	"./YankeeYogSothoth.js": [
		"8zqA",
		"default~YankeeYogSothoth~index"
	],
	"./YearZeroEngine": [
		"33cW",
		"common"
	],
	"./YearZeroEngine.js": [
		"33cW",
		"common"
	],
	"./Yggdrasill": [
		"YZSu",
		"default~Yggdrasill~index"
	],
	"./Yggdrasill.js": [
		"YZSu",
		"default~Yggdrasill~index"
	],
	"./ZettaiReido": [
		"B1yZ",
		"common"
	],
	"./ZettaiReido.js": [
		"B1yZ",
		"common"
	],
	"./index": [
		"FrAx",
		"default~MeikyuKingdomBasic~index",
		"default~SwordWorld2_5~index",
		"default~SwordWorld2_0~index",
		"default~SwordWorld~index",
		"default~LogHorizon_Korean~index",
		"default~LogHorizon~index",
		"default~Yggdrasill~index",
		"default~MagicaLogia_Korean~index",
		"default~MagicaLogia~index",
		"default~AlchemiaStruggle~index",
		"default~JekyllAndHyde~index",
		"default~DesperateRun~index",
		"default~UnsungDuet~index",
		"default~FilledWith~index",
		"default~GurpsFW~index",
		"default~MeikyuKingdom~index",
		"default~BeginningIdol~index",
		"default~BeginningIdol_Korean~index",
		"default~Elysion~index",
		"default~Satasupe~index",
		"default~NinjaSlayer~index",
		"default~PulpCthulhu~index",
		"default~AngelGear~index",
		"default~InfiniteBabeL~index",
		"default~ShinobiGami~index",
		"default~Cthulhu7th~index",
		"default~ParasiteBlood~index",
		"default~GranCrest~index",
		"default~Garako~index",
		"default~HuntersMoon~index",
		"default~Villaciel~index",
		"default~BloodMoon~index",
		"default~OneWayHeroics~index",
		"default~DeadlineHeroes~index",
		"default~MetalHeadExtream~index",
		"default~SterileLife~index",
		"default~LiveraDoll~index",
		"default~ColossalHunter~index",
		"default~ShoujoTenrankai~index",
		"default~KanColle~index",
		"default~TwilightGunsmoke~index",
		"default~NeverCloud~index",
		"default~DemonParasite~index",
		"default~SteamPunkers~index",
		"default~BattleTech~index",
		"default~DoubleCross_Korean~index",
		"default~RuinBreakers~index",
		"default~MeikyuDays~index",
		"default~DoubleCross~index",
		"default~HatsuneMiku~index",
		"default~KillDeathBusiness_Korean~index",
		"default~ScreamHighSchool~index",
		"default~Paradiso~index",
		"default~ShinkuuGakuen~index",
		"default~KillDeathBusiness~index",
		"default~BloodCrusade~index",
		"default~BlindMythos~index",
		"default~BeastBindTrinity~index",
		"default~EarthDawn4~index",
		"default~MetalHead~index",
		"default~EarthDawn3~index",
		"default~Dracurouge_Korean~index",
		"default~Warhammer4~index",
		"default~TorgEternity~index",
		"default~AceKillerGene~index",
		"default~GURPS~index",
		"default~Peekaboo~index",
		"default~YankeeYogSothoth~index",
		"default~KemonoNoMori~index",
		"default~Cthulhu7th_ChineseTraditional~index",
		"default~Dracurouge~index",
		"default~Cthulhu7th_Korean~index",
		"default~GardenOrder~index",
		"default~Torg1_5~index",
		"default~StellarKnights~index",
		"default~JuinKansen~index",
		"default~AnimaAnimus~index",
		"default~Cthulhu_Korean~index",
		"default~Cthulhu_ChineseTraditional~index",
		"default~SevenFortressMobius~index",
		"default~MonotoneMuseum_Korean~index",
		"default~Warhammer~index",
		"default~NightWizard3rd~index",
		"default~FullMetalPanic~index",
		"default~MetallicGuardian~index",
		"default~EtrianOdysseySRS~index",
		"default~Alshard~index",
		"default~SRS~index",
		"default~Skynauts~index",
		"default~NightWizard~index",
		"default~TunnelsAndTrolls~index",
		"default~Cthulhu~index",
		"default~GundogRevised~index",
		"default~MonotoneMuseum~index",
		"default~OracleEngine~index",
		"default~BadLife~index",
		"default~Nuekagami~index",
		"default~WitchQuest~index",
		"default~SkynautsBouken~index",
		"default~Torg~index",
		"default~CardRanker~index",
		"default~EmbryoMachine~index",
		"default~DetatokoSaga_Korean~index",
		"default~Nechronica_Korean~index",
		"default~AlterRaise~index",
		"default~LostRoyal~index",
		"default~Amadeus_Korean~index",
		"default~GundogZero~index",
		"default~Insane_Korean~index",
		"default~Strave~index",
		"default~BladeOfArcana~index",
		"default~DarkBlaze~index",
		"default~DarkDaysDrive~index",
		"default~TrinitySeven~index",
		"default~FutariSousa_Korean~index",
		"default~HouraiGakuen~index",
		"default~Postman~index",
		"default~DetatokoSaga~index",
		"default~Nechronica~index",
		"default~Kamigakari_Korean~index",
		"default~CthulhuTech~index",
		"default~RyuTuber~index",
		"default~ArsMagica~index",
		"default~Raisondetre~index",
		"default~EarthDawn~index",
		"default~BarnaKronika~index",
		"default~Amadeus~index",
		"default~Oukahoushin3rd~index",
		"default~Insane~index",
		"default~Kamigakari~index",
		"default~FutariSousa~index",
		"default~NSSQ~index",
		"default~Revulture~index",
		"default~Ryutama~index",
		"default~KurayamiCrying~index",
		"default~ChaosFlare~index",
		"default~GoblinSlayer~index",
		"default~NightmareHunterDeep~index",
		"default~Utakaze~index",
		"default~Fiasco_Korean~index",
		"default~GehennaAn~index",
		"common",
		"index"
	],
	"./index.js": [
		"FrAx",
		"default~MeikyuKingdomBasic~index",
		"default~SwordWorld2_5~index",
		"default~SwordWorld2_0~index",
		"default~SwordWorld~index",
		"default~LogHorizon_Korean~index",
		"default~LogHorizon~index",
		"default~Yggdrasill~index",
		"default~MagicaLogia_Korean~index",
		"default~MagicaLogia~index",
		"default~AlchemiaStruggle~index",
		"default~JekyllAndHyde~index",
		"default~DesperateRun~index",
		"default~UnsungDuet~index",
		"default~FilledWith~index",
		"default~GurpsFW~index",
		"default~MeikyuKingdom~index",
		"default~BeginningIdol~index",
		"default~BeginningIdol_Korean~index",
		"default~Elysion~index",
		"default~Satasupe~index",
		"default~NinjaSlayer~index",
		"default~PulpCthulhu~index",
		"default~AngelGear~index",
		"default~InfiniteBabeL~index",
		"default~ShinobiGami~index",
		"default~Cthulhu7th~index",
		"default~ParasiteBlood~index",
		"default~GranCrest~index",
		"default~Garako~index",
		"default~HuntersMoon~index",
		"default~Villaciel~index",
		"default~BloodMoon~index",
		"default~OneWayHeroics~index",
		"default~DeadlineHeroes~index",
		"default~MetalHeadExtream~index",
		"default~SterileLife~index",
		"default~LiveraDoll~index",
		"default~ColossalHunter~index",
		"default~ShoujoTenrankai~index",
		"default~KanColle~index",
		"default~TwilightGunsmoke~index",
		"default~NeverCloud~index",
		"default~DemonParasite~index",
		"default~SteamPunkers~index",
		"default~BattleTech~index",
		"default~DoubleCross_Korean~index",
		"default~RuinBreakers~index",
		"default~MeikyuDays~index",
		"default~DoubleCross~index",
		"default~HatsuneMiku~index",
		"default~KillDeathBusiness_Korean~index",
		"default~ScreamHighSchool~index",
		"default~Paradiso~index",
		"default~ShinkuuGakuen~index",
		"default~KillDeathBusiness~index",
		"default~BloodCrusade~index",
		"default~BlindMythos~index",
		"default~BeastBindTrinity~index",
		"default~EarthDawn4~index",
		"default~MetalHead~index",
		"default~EarthDawn3~index",
		"default~Dracurouge_Korean~index",
		"default~Warhammer4~index",
		"default~TorgEternity~index",
		"default~AceKillerGene~index",
		"default~GURPS~index",
		"default~Peekaboo~index",
		"default~YankeeYogSothoth~index",
		"default~KemonoNoMori~index",
		"default~Cthulhu7th_ChineseTraditional~index",
		"default~Dracurouge~index",
		"default~Cthulhu7th_Korean~index",
		"default~GardenOrder~index",
		"default~Torg1_5~index",
		"default~StellarKnights~index",
		"default~JuinKansen~index",
		"default~AnimaAnimus~index",
		"default~Cthulhu_Korean~index",
		"default~Cthulhu_ChineseTraditional~index",
		"default~SevenFortressMobius~index",
		"default~MonotoneMuseum_Korean~index",
		"default~Warhammer~index",
		"default~NightWizard3rd~index",
		"default~FullMetalPanic~index",
		"default~MetallicGuardian~index",
		"default~EtrianOdysseySRS~index",
		"default~Alshard~index",
		"default~SRS~index",
		"default~Skynauts~index",
		"default~NightWizard~index",
		"default~TunnelsAndTrolls~index",
		"default~Cthulhu~index",
		"default~GundogRevised~index",
		"default~MonotoneMuseum~index",
		"default~OracleEngine~index",
		"default~BadLife~index",
		"default~Nuekagami~index",
		"default~WitchQuest~index",
		"default~SkynautsBouken~index",
		"default~Torg~index",
		"default~CardRanker~index",
		"default~EmbryoMachine~index",
		"default~DetatokoSaga_Korean~index",
		"default~Nechronica_Korean~index",
		"default~AlterRaise~index",
		"default~LostRoyal~index",
		"default~Amadeus_Korean~index",
		"default~GundogZero~index",
		"default~Insane_Korean~index",
		"default~Strave~index",
		"default~BladeOfArcana~index",
		"default~DarkBlaze~index",
		"default~DarkDaysDrive~index",
		"default~TrinitySeven~index",
		"default~FutariSousa_Korean~index",
		"default~HouraiGakuen~index",
		"default~Postman~index",
		"default~DetatokoSaga~index",
		"default~Nechronica~index",
		"default~Kamigakari_Korean~index",
		"default~CthulhuTech~index",
		"default~RyuTuber~index",
		"default~ArsMagica~index",
		"default~Raisondetre~index",
		"default~EarthDawn~index",
		"default~BarnaKronika~index",
		"default~Amadeus~index",
		"default~Oukahoushin3rd~index",
		"default~Insane~index",
		"default~Kamigakari~index",
		"default~FutariSousa~index",
		"default~NSSQ~index",
		"default~Revulture~index",
		"default~Ryutama~index",
		"default~KurayamiCrying~index",
		"default~ChaosFlare~index",
		"default~GoblinSlayer~index",
		"default~NightmareHunterDeep~index",
		"default~Utakaze~index",
		"default~Fiasco_Korean~index",
		"default~GehennaAn~index",
		"common",
		"index"
	]
};
function webpackAsyncContext(req) {
	if(!__webpack_require__.o(map, req)) {
		return Promise.resolve().then(function() {
			var e = new Error("Cannot find module '" + req + "'");
			e.code = 'MODULE_NOT_FOUND';
			throw e;
		});
	}

	var ids = map[req], id = ids[0];
	return Promise.all(ids.slice(1).map(__webpack_require__.e)).then(function() {
		return __webpack_require__.t(id, 7);
	});
}
webpackAsyncContext.keys = function webpackAsyncContextKeys() {
	return Object.keys(map);
};
webpackAsyncContext.id = "fesB";
module.exports = webpackAsyncContext;

/***/ }),

/***/ "g6Hf":
/*!***********************************************!*\
  !*** ./src/app/class/tabletop-object-util.ts ***!
  \***********************************************/
/*! exports provided: moveToTopmost */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "moveToTopmost", function() { return moveToTopmost; });
/* harmony import */ var _core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./core/synchronize-object/object-store */ "hm7o");

function moveToTopmost(topmost, otherRelatives) {
    if (otherRelatives === void 0) { otherRelatives = []; }
    var objects = _core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_0__["ObjectStore"].instance.getObjects(topmost.aliasName);
    otherRelatives.forEach(function (aliasName) { return objects = objects.concat(_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_0__["ObjectStore"].instance.getObjects(aliasName)); });
    objects = objects.filter(function (obj) { return obj.isVisibleOnTable; });
    var maxZindex = -1;
    var hasConflict = false;
    for (var i = 0; i < objects.length; i++) {
        if (maxZindex === objects[i].zindex) {
            hasConflict = true;
        }
        else if (maxZindex < objects[i].zindex) {
            maxZindex = objects[i].zindex;
            hasConflict = false;
        }
    }
    if (maxZindex === topmost.zindex && !hasConflict)
        return;
    topmost.zindex = maxZindex + 1;
    if (topmost.zindex < objects.length + 256)
        return;
    objects.sort(function (a, b) { return a.zindex - b.zindex; });
    for (var i = 0; i < objects.length; i++) {
        objects[i].zindex = i;
    }
}


/***/ }),

/***/ "gKYc":
/*!**********************************!*\
  !*** ./src/app/class/terrain.ts ***!
  \**********************************/
/*! exports provided: TerrainViewState, Terrain */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TerrainViewState", function() { return TerrainViewState; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Terrain", function() { return Terrain; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "mrSG");
/* harmony import */ var _core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./core/synchronize-object/decorator */ "1lIu");
/* harmony import */ var _data_element__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./data-element */ "gkrD");
/* harmony import */ var _tabletop_object__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./tabletop-object */ "e8gA");




var TerrainViewState;
(function (TerrainViewState) {
    TerrainViewState[TerrainViewState["NULL"] = 0] = "NULL";
    TerrainViewState[TerrainViewState["FLOOR"] = 1] = "FLOOR";
    TerrainViewState[TerrainViewState["WALL"] = 2] = "WALL";
    TerrainViewState[TerrainViewState["ALL"] = 3] = "ALL";
})(TerrainViewState || (TerrainViewState = {}));
var Terrain = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"])(Terrain, _super);
    function Terrain() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.isLocked = false;
        _this.mode = TerrainViewState.ALL;
        _this.rotate = 0;
        return _this;
    }
    Terrain_1 = Terrain;
    Object.defineProperty(Terrain.prototype, "width", {
        get: function () { return this.getCommonValue('width', 1); },
        set: function (width) { this.setCommonValue('width', width); },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Terrain.prototype, "height", {
        get: function () { return this.getCommonValue('height', 1); },
        set: function (height) { this.setCommonValue('height', height); },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Terrain.prototype, "depth", {
        get: function () { return this.getCommonValue('depth', 1); },
        set: function (depth) { this.setCommonValue('depth', depth); },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Terrain.prototype, "name", {
        get: function () { return this.getCommonValue('name', ''); },
        set: function (name) { this.setCommonValue('name', name); },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Terrain.prototype, "wallImage", {
        get: function () { return this.getImageFile('wall'); },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Terrain.prototype, "floorImage", {
        get: function () { return this.getImageFile('floor'); },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Terrain.prototype, "hasWall", {
        get: function () { return this.mode & TerrainViewState.WALL ? true : false; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Terrain.prototype, "hasFloor", {
        get: function () { return this.mode & TerrainViewState.FLOOR ? true : false; },
        enumerable: false,
        configurable: true
    });
    Terrain.create = function (name, width, depth, height, wall, floor, identifier) {
        var object = null;
        if (identifier) {
            object = new Terrain_1(identifier);
        }
        else {
            object = new Terrain_1();
        }
        object.createDataElements();
        object.commonDataElement.appendChild(_data_element__WEBPACK_IMPORTED_MODULE_2__["DataElement"].create('name', name, {}, 'name_' + object.identifier));
        object.commonDataElement.appendChild(_data_element__WEBPACK_IMPORTED_MODULE_2__["DataElement"].create('width', width, {}, 'width_' + object.identifier));
        object.commonDataElement.appendChild(_data_element__WEBPACK_IMPORTED_MODULE_2__["DataElement"].create('height', height, {}, 'height_' + object.identifier));
        object.commonDataElement.appendChild(_data_element__WEBPACK_IMPORTED_MODULE_2__["DataElement"].create('depth', depth, {}, 'depth_' + object.identifier));
        object.imageDataElement.appendChild(_data_element__WEBPACK_IMPORTED_MODULE_2__["DataElement"].create('wall', wall, { type: 'image' }, 'wall_' + object.identifier));
        object.imageDataElement.appendChild(_data_element__WEBPACK_IMPORTED_MODULE_2__["DataElement"].create('floor', floor, { type: 'image' }, 'floor_' + object.identifier));
        object.initialize();
        return object;
    };
    var Terrain_1;
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_1__["SyncVar"])()
    ], Terrain.prototype, "isLocked", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_1__["SyncVar"])()
    ], Terrain.prototype, "mode", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_1__["SyncVar"])()
    ], Terrain.prototype, "rotate", void 0);
    Terrain = Terrain_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_1__["SyncObject"])('terrain')
    ], Terrain);
    return Terrain;
}(_tabletop_object__WEBPACK_IMPORTED_MODULE_3__["TabletopObject"]));



/***/ }),

/***/ "gfSO":
/*!****************************************************************!*\
  !*** ./src/app/component/peer-cursor/peer-cursor.component.ts ***!
  \****************************************************************/
/*! exports provided: PeerCursorComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PeerCursorComponent", function() { return PeerCursorComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "fXoL");
/* harmony import */ var _udonarium_core_system__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @udonarium/core/system */ "yNnI");
/* harmony import */ var _udonarium_core_system_util_resettable_timeout__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @udonarium/core/system/util/resettable-timeout */ "9ht1");
/* harmony import */ var _udonarium_peer_cursor__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @udonarium/peer-cursor */ "+UEV");
/* harmony import */ var service_batch_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! service/batch.service */ "taL5");
/* harmony import */ var service_coordinate_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! service/coordinate.service */ "TzEH");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @angular/common */ "ofXK");
/* harmony import */ var pipe_safe_pipe__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! pipe/safe.pipe */ "6HCy");









var _c0 = ["cursor"];
var _c1 = ["opacity"];
function PeerCursorComponent_div_0_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 1, 2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](2, "div", 3, 4);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](4, "div", 5);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](5, "safe");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](6, "div", 6);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](7, "span", 7);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](8);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    var ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵstyleProp"]("background-image", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind2"](5, 3, "url(" + ctx_r0.iconUrl + ")", "style"));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate"](ctx_r0.name);
} }
var PeerCursorComponent = /** @class */ (function () {
    function PeerCursorComponent(batchService, coordinateService, ngZone) {
        var _this = this;
        this.batchService = batchService;
        this.coordinateService = coordinateService;
        this.ngZone = ngZone;
        this.cursor = _udonarium_peer_cursor__WEBPACK_IMPORTED_MODULE_3__["PeerCursor"].myCursor;
        this.cursorElement = null;
        this.opacityElement = null;
        this.fadeOutTimer = null;
        this.updateInterval = null;
        this.callcack = function (e) { return _this.onMouseMove(e); };
        this._x = 0;
        this._y = 0;
    }
    Object.defineProperty(PeerCursorComponent.prototype, "iconUrl", {
        get: function () { return this.cursor.image.url; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(PeerCursorComponent.prototype, "name", {
        get: function () { return this.cursor.name; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(PeerCursorComponent.prototype, "isMine", {
        get: function () { return this.cursor.isMine; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(PeerCursorComponent.prototype, "delayMs", {
        get: function () {
            var maxDelay = _udonarium_core_system__WEBPACK_IMPORTED_MODULE_1__["Network"].peerIds.length * 16.6;
            return maxDelay < 100 ? 100 : maxDelay;
        },
        enumerable: false,
        configurable: true
    });
    PeerCursorComponent.prototype.ngOnInit = function () {
        var _this = this;
        if (!this.isMine) {
            _udonarium_core_system__WEBPACK_IMPORTED_MODULE_1__["EventSystem"].register(this)
                .on('CURSOR_MOVE', function (event) {
                if (event.sendFrom !== _this.cursor.peerId)
                    return;
                _this.batchService.add(function () {
                    _this.stopTransition();
                    _this.setAnimatedTransition();
                    _this.setPosition(event.data[0], event.data[1], event.data[2]);
                    _this.resetFadeOut();
                }, _this);
            });
        }
    };
    PeerCursorComponent.prototype.ngAfterViewInit = function () {
        var _this = this;
        if (this.isMine) {
            this.ngZone.runOutsideAngular(function () {
                document.body.addEventListener('mousemove', _this.callcack);
                document.body.addEventListener('touchmove', _this.callcack);
            });
        }
        else {
            this.cursorElement = this.cursorElementRef.nativeElement;
            this.opacityElement = this.opacityElementRef.nativeElement;
            this.setAnimatedTransition();
            this.setPosition(0, 0, 0);
            this.resetFadeOut();
        }
    };
    PeerCursorComponent.prototype.ngOnDestroy = function () {
        document.body.removeEventListener('mousemove', this.callcack);
        document.body.removeEventListener('touchmove', this.callcack);
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_1__["EventSystem"].unregister(this);
        this.batchService.remove(this);
        if (this.fadeOutTimer)
            this.fadeOutTimer.clear();
    };
    PeerCursorComponent.prototype.onMouseMove = function (e) {
        var _this = this;
        var x = e.touches ? e.changedTouches[0].pageX : e.pageX;
        var y = e.touches ? e.changedTouches[0].pageY : e.pageY;
        if (x === this._x && y === this._y)
            return;
        this._x = x;
        this._y = y;
        this._target = e.target;
        if (!this.updateInterval) {
            this.updateInterval = setTimeout(function () {
                _this.updateInterval = null;
                _this.calcLocalCoordinate(_this._x, _this._y, _this._target);
            }, this.delayMs);
        }
    };
    PeerCursorComponent.prototype.calcLocalCoordinate = function (x, y, target) {
        if (!document.getElementById('app-table-layer').contains(target))
            return;
        var coordinate = { x: x, y: y, z: 0 };
        coordinate = this.coordinateService.calcTabletopLocalCoordinate(coordinate, target);
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_1__["EventSystem"].call('CURSOR_MOVE', [coordinate.x, coordinate.y, coordinate.z]);
    };
    PeerCursorComponent.prototype.resetFadeOut = function () {
        var _this = this;
        this.opacityElement.style.opacity = '1.0';
        if (this.fadeOutTimer == null) {
            this.fadeOutTimer = new _udonarium_core_system_util_resettable_timeout__WEBPACK_IMPORTED_MODULE_2__["ResettableTimeout"](function () {
                _this.opacityElement.style.opacity = '0.0';
            }, 3000);
        }
        this.fadeOutTimer.reset();
    };
    PeerCursorComponent.prototype.stopTransition = function () {
        this.cursorElement.style.transform = window.getComputedStyle(this.cursorElement).transform;
    };
    PeerCursorComponent.prototype.setAnimatedTransition = function () {
        this.cursorElement.style.transition = "transform " + (this.delayMs + 33) + "ms linear, opacity 0.5s ease-out";
    };
    PeerCursorComponent.prototype.setPosition = function (x, y, z) {
        this.cursorElement.style.transform = 'translateX(' + x + 'px) translateY(' + y + 'px) translateZ(' + z + 'px)';
    };
    PeerCursorComponent.ɵfac = function PeerCursorComponent_Factory(t) { return new (t || PeerCursorComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](service_batch_service__WEBPACK_IMPORTED_MODULE_4__["BatchService"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](service_coordinate_service__WEBPACK_IMPORTED_MODULE_5__["CoordinateService"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["NgZone"])); };
    PeerCursorComponent.ɵcmp = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineComponent"]({ type: PeerCursorComponent, selectors: [["peer-cursor"], ["", "peer-cursor", ""]], viewQuery: function PeerCursorComponent_Query(rf, ctx) { if (rf & 1) {
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵviewQuery"](_c0, true);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵviewQuery"](_c1, true);
        } if (rf & 2) {
            var _t = void 0;
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵqueryRefresh"](_t = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵloadQuery"]()) && (ctx.cursorElementRef = _t.first);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵqueryRefresh"](_t = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵloadQuery"]()) && (ctx.opacityElementRef = _t.first);
        } }, inputs: { cursor: "cursor" }, decls: 1, vars: 1, consts: [["class", "component is-3d is-transition is-pointer-events-none", 4, "ngIf"], [1, "component", "is-3d", "is-transition", "is-pointer-events-none"], ["cursor", ""], [1, "peer-cursor", "is-3d", "is-transition"], ["opacity", ""], [1, "icon"], [1, "name", "is-center"], [2, "white-space", "nowrap"]], template: function PeerCursorComponent_Template(rf, ctx) { if (rf & 1) {
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](0, PeerCursorComponent_div_0_Template, 9, 6, "div", 0);
        } if (rf & 2) {
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", !ctx.isMine);
        } }, directives: [_angular_common__WEBPACK_IMPORTED_MODULE_6__["NgIf"]], pipes: [pipe_safe_pipe__WEBPACK_IMPORTED_MODULE_7__["SafePipe"]], styles: [".component[_ngcontent-%COMP%] {\r\n  position: absolute;\r\n  overflow: visible;\r\n  -webkit-user-select: none;\r\n  user-select: none;\r\n  -moz-user-drag: none;\r\n  -webkit-user-drag: none;\r\n}\r\n\r\n.is-transition[_ngcontent-%COMP%] {\r\n  transition: transform 133ms linear, opacity 0.5s ease-out;\r\n}\r\n\r\n.peer-cursor[_ngcontent-%COMP%] {\r\n  height: 45px;\r\n  width: 45px;\r\n  position: absolute;\r\n  left: 0;\r\n  top: 0;\r\n  box-sizing: border-box;\r\n  border: solid 1px rgba(240, 218, 189);\r\n  border-radius: 50% 50% 5% 50%;\r\n  background-color: rgba(240, 218, 189, 0.9);\r\n  transform-origin: 100% 100%;\r\n  transform: translateX(-100%) translateY(-100%)  rotateX(-90deg) rotateZ(45deg);\r\n}\r\n\r\n.icon[_ngcontent-%COMP%] {\r\n  overflow: visible;\r\n  height: 100%;\r\n  width: 100%;\r\n  border-radius: 100%;\r\n  background-position: top, center;\r\n  background-repeat: no-repeat;\r\n  background-size: cover;\r\n  transform: rotateZ(-45deg) scale(0.85);\r\n}\r\n\r\n.name[_ngcontent-%COMP%] {\r\n  box-sizing: border-box;\r\n  font-size: 7px;\r\n  padding: 2px 5px;\r\n  border-radius: 14px;\r\n  color: #CCC;\r\n  background-color: rgba(30, 30, 30, 0.8);\r\n}\r\n\r\n.is-center[_ngcontent-%COMP%] {\r\n  position: absolute;\r\n  left: 50%;\r\n  top: -26px;\r\n  transform: translateX(-50%);\r\n}\r\n\r\n.is-3d[_ngcontent-%COMP%] {\r\n  transform-style: preserve-3d;\r\n}\r\n\r\n.is-pointer-events-none[_ngcontent-%COMP%] {\r\n  pointer-events: none;\r\n}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBlZXItY3Vyc29yLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxrQkFBa0I7RUFDbEIsaUJBQWlCO0VBRWpCLHlCQUF5QjtFQUN6QixpQkFBaUI7RUFDakIsb0JBQW9CO0VBQ3BCLHVCQUF1QjtBQUN6Qjs7QUFFQTtFQUNFLHlEQUF5RDtBQUMzRDs7QUFFQTtFQUNFLFlBQVk7RUFDWixXQUFXO0VBQ1gsa0JBQWtCO0VBQ2xCLE9BQU87RUFDUCxNQUFNO0VBQ04sc0JBQXNCO0VBQ3RCLHFDQUFxQztFQUNyQyw2QkFBNkI7RUFDN0IsMENBQTBDO0VBQzFDLDJCQUEyQjtFQUMzQiw4RUFBOEU7QUFDaEY7O0FBRUE7RUFDRSxpQkFBaUI7RUFDakIsWUFBWTtFQUNaLFdBQVc7RUFDWCxtQkFBbUI7RUFDbkIsZ0NBQWdDO0VBQ2hDLDRCQUE0QjtFQUM1QixzQkFBc0I7RUFDdEIsc0NBQXNDO0FBQ3hDOztBQUVBO0VBQ0Usc0JBQXNCO0VBQ3RCLGNBQWM7RUFDZCxnQkFBZ0I7RUFDaEIsbUJBQW1CO0VBQ25CLFdBQVc7RUFDWCx1Q0FBdUM7QUFDekM7O0FBRUE7RUFDRSxrQkFBa0I7RUFDbEIsU0FBUztFQUNULFVBQVU7RUFDViwyQkFBMkI7QUFDN0I7O0FBRUE7RUFFRSw0QkFBNEI7QUFDOUI7O0FBRUE7RUFDRSxvQkFBb0I7QUFDdEIiLCJmaWxlIjoicGVlci1jdXJzb3IuY29tcG9uZW50LmNzcyIsInNvdXJjZXNDb250ZW50IjpbIi5jb21wb25lbnQge1xyXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcclxuICBvdmVyZmxvdzogdmlzaWJsZTtcclxuICAtbW96LXVzZXItc2VsZWN0OiBub25lO1xyXG4gIC13ZWJraXQtdXNlci1zZWxlY3Q6IG5vbmU7XHJcbiAgdXNlci1zZWxlY3Q6IG5vbmU7XHJcbiAgLW1vei11c2VyLWRyYWc6IG5vbmU7XHJcbiAgLXdlYmtpdC11c2VyLWRyYWc6IG5vbmU7XHJcbn1cclxuXHJcbi5pcy10cmFuc2l0aW9uIHtcclxuICB0cmFuc2l0aW9uOiB0cmFuc2Zvcm0gMTMzbXMgbGluZWFyLCBvcGFjaXR5IDAuNXMgZWFzZS1vdXQ7XHJcbn1cclxuXHJcbi5wZWVyLWN1cnNvciB7XHJcbiAgaGVpZ2h0OiA0NXB4O1xyXG4gIHdpZHRoOiA0NXB4O1xyXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcclxuICBsZWZ0OiAwO1xyXG4gIHRvcDogMDtcclxuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xyXG4gIGJvcmRlcjogc29saWQgMXB4IHJnYmEoMjQwLCAyMTgsIDE4OSk7XHJcbiAgYm9yZGVyLXJhZGl1czogNTAlIDUwJSA1JSA1MCU7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgyNDAsIDIxOCwgMTg5LCAwLjkpO1xyXG4gIHRyYW5zZm9ybS1vcmlnaW46IDEwMCUgMTAwJTtcclxuICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVgoLTEwMCUpIHRyYW5zbGF0ZVkoLTEwMCUpICByb3RhdGVYKC05MGRlZykgcm90YXRlWig0NWRlZyk7XHJcbn1cclxuXHJcbi5pY29uIHtcclxuICBvdmVyZmxvdzogdmlzaWJsZTtcclxuICBoZWlnaHQ6IDEwMCU7XHJcbiAgd2lkdGg6IDEwMCU7XHJcbiAgYm9yZGVyLXJhZGl1czogMTAwJTtcclxuICBiYWNrZ3JvdW5kLXBvc2l0aW9uOiB0b3AsIGNlbnRlcjtcclxuICBiYWNrZ3JvdW5kLXJlcGVhdDogbm8tcmVwZWF0O1xyXG4gIGJhY2tncm91bmQtc2l6ZTogY292ZXI7XHJcbiAgdHJhbnNmb3JtOiByb3RhdGVaKC00NWRlZykgc2NhbGUoMC44NSk7XHJcbn1cclxuXHJcbi5uYW1lIHtcclxuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xyXG4gIGZvbnQtc2l6ZTogN3B4O1xyXG4gIHBhZGRpbmc6IDJweCA1cHg7XHJcbiAgYm9yZGVyLXJhZGl1czogMTRweDtcclxuICBjb2xvcjogI0NDQztcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDMwLCAzMCwgMzAsIDAuOCk7XHJcbn1cclxuXHJcbi5pcy1jZW50ZXIge1xyXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcclxuICBsZWZ0OiA1MCU7XHJcbiAgdG9wOiAtMjZweDtcclxuICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVgoLTUwJSk7XHJcbn1cclxuXHJcbi5pcy0zZCB7XHJcbiAgLXdlYmtpdC10cmFuc2Zvcm0tc3R5bGU6IHByZXNlcnZlLTNkO1xyXG4gIHRyYW5zZm9ybS1zdHlsZTogcHJlc2VydmUtM2Q7XHJcbn1cclxuXHJcbi5pcy1wb2ludGVyLWV2ZW50cy1ub25lIHtcclxuICBwb2ludGVyLWV2ZW50czogbm9uZTtcclxufSJdfQ== */"] });
    return PeerCursorComponent;
}());

/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](PeerCursorComponent, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"],
        args: [{
                selector: 'peer-cursor, [peer-cursor]',
                templateUrl: './peer-cursor.component.html',
                styleUrls: ['./peer-cursor.component.css']
            }]
    }], function () { return [{ type: service_batch_service__WEBPACK_IMPORTED_MODULE_4__["BatchService"] }, { type: service_coordinate_service__WEBPACK_IMPORTED_MODULE_5__["CoordinateService"] }, { type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["NgZone"] }]; }, { cursorElementRef: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"],
            args: ['cursor']
        }], opacityElementRef: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"],
            args: ['opacity']
        }], cursor: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }] }); })();


/***/ }),

/***/ "gkrD":
/*!***************************************!*\
  !*** ./src/app/class/data-element.ts ***!
  \***************************************/
/*! exports provided: DataElement */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DataElement", function() { return DataElement; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "mrSG");
/* harmony import */ var _core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./core/synchronize-object/decorator */ "1lIu");
/* harmony import */ var _core_synchronize_object_object_node__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./core/synchronize-object/object-node */ "F67Z");



var DataElement = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"])(DataElement, _super);
    function DataElement() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    DataElement_1 = DataElement;
    Object.defineProperty(DataElement.prototype, "isNumberResource", {
        get: function () { return this.type != null && this.type === 'numberResource'; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(DataElement.prototype, "isNote", {
        get: function () { return this.type != null && this.type === 'note'; },
        enumerable: false,
        configurable: true
    });
    DataElement.create = function (name, value, attributes, identifier) {
        if (value === void 0) { value = ''; }
        if (attributes === void 0) { attributes = {}; }
        if (identifier === void 0) { identifier = ''; }
        var dataElement;
        if (identifier && 0 < identifier.length) {
            dataElement = new DataElement_1(identifier);
        }
        else {
            dataElement = new DataElement_1();
        }
        dataElement.attributes = attributes;
        dataElement.name = name;
        dataElement.value = value;
        dataElement.initialize();
        return dataElement;
    };
    DataElement.prototype.getElementsByName = function (name) {
        var e_1, _a;
        var children = [];
        try {
            for (var _b = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(this.children), _c = _b.next(); !_c.done; _c = _b.next()) {
                var child = _c.value;
                if (child instanceof DataElement_1) {
                    if (child.getAttribute('name') === name)
                        children.push(child);
                    Array.prototype.push.apply(children, child.getElementsByName(name));
                }
            }
        }
        catch (e_1_1) { e_1 = { error: e_1_1 }; }
        finally {
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            }
            finally { if (e_1) throw e_1.error; }
        }
        return children;
    };
    DataElement.prototype.getElementsByType = function (type) {
        var e_2, _a;
        var children = [];
        try {
            for (var _b = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(this.children), _c = _b.next(); !_c.done; _c = _b.next()) {
                var child = _c.value;
                if (child instanceof DataElement_1) {
                    if (child.getAttribute('type') === type)
                        children.push(child);
                    Array.prototype.push.apply(children, child.getElementsByType(type));
                }
            }
        }
        catch (e_2_1) { e_2 = { error: e_2_1 }; }
        finally {
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            }
            finally { if (e_2) throw e_2.error; }
        }
        return children;
    };
    DataElement.prototype.getFirstElementByName = function (name) {
        var e_3, _a;
        try {
            for (var _b = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(this.children), _c = _b.next(); !_c.done; _c = _b.next()) {
                var child = _c.value;
                if (child instanceof DataElement_1) {
                    if (child.getAttribute('name') === name)
                        return child;
                    var match = child.getFirstElementByName(name);
                    if (match)
                        return match;
                }
            }
        }
        catch (e_3_1) { e_3 = { error: e_3_1 }; }
        finally {
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            }
            finally { if (e_3) throw e_3.error; }
        }
        return null;
    };
    Object.defineProperty(DataElement.prototype, "myIdentifer", {
        get: function () {
            var self = this;
            return self.identifier;
        },
        enumerable: false,
        configurable: true
    });
    var DataElement_1;
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_1__["SyncVar"])()
    ], DataElement.prototype, "name", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_1__["SyncVar"])()
    ], DataElement.prototype, "type", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_1__["SyncVar"])()
    ], DataElement.prototype, "currentValue", void 0);
    DataElement = DataElement_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_1__["SyncObject"])('data')
    ], DataElement);
    return DataElement;
}(_core_synchronize_object_object_node__WEBPACK_IMPORTED_MODULE_2__["ObjectNode"]));



/***/ }),

/***/ "glHC":
/*!**********************************!*\
  !*** ./src/app/class/Jukebox.ts ***!
  \**********************************/
/*! exports provided: Jukebox */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Jukebox", function() { return Jukebox; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "mrSG");
/* harmony import */ var _core_file_storage_audio_player__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./core/file-storage/audio-player */ "zeEm");
/* harmony import */ var _core_file_storage_audio_storage__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./core/file-storage/audio-storage */ "Prh6");
/* harmony import */ var _core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./core/synchronize-object/decorator */ "1lIu");
/* harmony import */ var _core_synchronize_object_game_object__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./core/synchronize-object/game-object */ "xdgh");
/* harmony import */ var _core_system__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./core/system */ "yNnI");






var Jukebox = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"])(Jukebox, _super);
    function Jukebox() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.audioIdentifier = '';
        _this.startTime = 0;
        _this.isLoop = false;
        _this.isPlaying = false;
        _this.audioPlayer = new _core_file_storage_audio_player__WEBPACK_IMPORTED_MODULE_1__["AudioPlayer"]();
        return _this;
    }
    Object.defineProperty(Jukebox.prototype, "audio", {
        get: function () { return _core_file_storage_audio_storage__WEBPACK_IMPORTED_MODULE_2__["AudioStorage"].instance.get(this.audioIdentifier); },
        enumerable: false,
        configurable: true
    });
    // GameObject Lifecycle
    Jukebox.prototype.onStoreAdded = function () {
        _super.prototype.onStoreAdded.call(this);
        this.unlockAfterUserInteraction();
    };
    // GameObject Lifecycle
    Jukebox.prototype.onStoreRemoved = function () {
        _super.prototype.onStoreRemoved.call(this);
        this._stop();
    };
    Jukebox.prototype.play = function (identifier, isLoop) {
        if (isLoop === void 0) { isLoop = false; }
        var audio = _core_file_storage_audio_storage__WEBPACK_IMPORTED_MODULE_2__["AudioStorage"].instance.get(identifier);
        if (!audio || !audio.isReady)
            return;
        this.audioIdentifier = identifier;
        this.isPlaying = true;
        this.isLoop = isLoop;
        this._play();
    };
    Jukebox.prototype._play = function () {
        this._stop();
        if (!this.audio || !this.audio.isReady) {
            this.playAfterFileUpdate();
            return;
        }
        this.audioPlayer.loop = true;
        this.audioPlayer.play(this.audio);
    };
    Jukebox.prototype.stop = function () {
        this.audioIdentifier = '';
        this.isPlaying = false;
        this._stop();
    };
    Jukebox.prototype._stop = function () {
        this.unregisterEvent();
        this.audioPlayer.stop();
    };
    Jukebox.prototype.playAfterFileUpdate = function () {
        var _this = this;
        _core_system__WEBPACK_IMPORTED_MODULE_5__["EventSystem"].register(this)
            .on('UPDATE_AUDIO_RESOURE', -100, function (event) {
            _this._play();
        });
    };
    Jukebox.prototype.unlockAfterUserInteraction = function () {
        var _this = this;
        var callback = function () {
            document.body.removeEventListener('touchstart', callback, true);
            document.body.removeEventListener('mousedown', callback, true);
            _this.audioPlayer.stop();
            if (_this.isPlaying)
                _this._play();
        };
        document.body.addEventListener('touchstart', callback, true);
        document.body.addEventListener('mousedown', callback, true);
    };
    Jukebox.prototype.unregisterEvent = function () {
        _core_system__WEBPACK_IMPORTED_MODULE_5__["EventSystem"].unregister(this, 'UPDATE_AUDIO_RESOURE');
    };
    // override
    Jukebox.prototype.apply = function (context) {
        var audioIdentifier = this.audioIdentifier;
        var isPlaying = this.isPlaying;
        _super.prototype.apply.call(this, context);
        if ((audioIdentifier !== this.audioIdentifier || !isPlaying) && this.isPlaying) {
            this._play();
        }
        else if (isPlaying !== this.isPlaying && !this.isPlaying) {
            this._stop();
        }
    };
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_3__["SyncVar"])()
    ], Jukebox.prototype, "audioIdentifier", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_3__["SyncVar"])()
    ], Jukebox.prototype, "startTime", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_3__["SyncVar"])()
    ], Jukebox.prototype, "isLoop", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_3__["SyncVar"])()
    ], Jukebox.prototype, "isPlaying", void 0);
    Jukebox = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_3__["SyncObject"])('jukebox')
    ], Jukebox);
    return Jukebox;
}(_core_synchronize_object_game_object__WEBPACK_IMPORTED_MODULE_4__["GameObject"]));



/***/ }),

/***/ "hm7o":
/*!***************************************************************!*\
  !*** ./src/app/class/core/synchronize-object/object-store.ts ***!
  \***************************************************************/
/*! exports provided: ObjectStore */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ObjectStore", function() { return ObjectStore; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "mrSG");
/* harmony import */ var _system__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../system */ "yNnI");
/* harmony import */ var _system_util_zero_timeout__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../system/util/zero-timeout */ "eS09");



var ObjectStore = /** @class */ (function () {
    function ObjectStore() {
        var _this = this;
        this.identifierMap = new Map();
        this.aliasNameMap = new Map();
        this.garbageMap = new Map();
        this.queueMap = new Map();
        this.updateInterval = null;
        this.garbageCollectionInterval = null;
        this.updateCallback = function () { _this.updateQueue(); };
        console.log('ObjectStore ready...');
    }
    Object.defineProperty(ObjectStore, "instance", {
        get: function () {
            if (!ObjectStore._instance)
                ObjectStore._instance = new ObjectStore();
            return ObjectStore._instance;
        },
        enumerable: false,
        configurable: true
    });
    ;
    ObjectStore.prototype.add = function (object, shouldBroadcast) {
        if (shouldBroadcast === void 0) { shouldBroadcast = true; }
        if (this.get(object.identifier) != null || this.isDeleted(object.identifier))
            return null;
        this.identifierMap.set(object.identifier, object);
        var objectsMap = this.aliasNameMap.has(object.aliasName) ? this.aliasNameMap.get(object.aliasName) : this.aliasNameMap.set(object.aliasName, new Map()).get(object.aliasName);
        objectsMap.set(object.identifier, object);
        object.onStoreAdded();
        if (shouldBroadcast)
            this.update(object.toContext());
        return object;
    };
    ObjectStore.prototype.remove = function (object) {
        if (!this.identifierMap.has(object.identifier))
            return null;
        this.identifierMap.delete(object.identifier);
        var objectsMap = this.aliasNameMap.get(object.aliasName);
        if (objectsMap)
            objectsMap.delete(object.identifier);
        object.onStoreRemoved();
        return object;
    };
    ObjectStore.prototype.delete = function (arg, shouldBroadcast) {
        if (shouldBroadcast === void 0) { shouldBroadcast = true; }
        var object = null;
        var identifier = null;
        if (typeof arg === 'string') {
            object = this.get(arg);
            identifier = arg;
        }
        else {
            object = arg;
            identifier = arg.identifier;
        }
        this.markForDelete(identifier);
        return object == null ? null : this._delete(object, shouldBroadcast);
    };
    ObjectStore.prototype._delete = function (object, shouldBroadcast) {
        if (this.remove(object) === null)
            return null;
        if (shouldBroadcast)
            _system__WEBPACK_IMPORTED_MODULE_1__["EventSystem"].call('DELETE_GAME_OBJECT', { identifier: object.identifier });
        return object;
    };
    ObjectStore.prototype.markForDelete = function (identifier) {
        this.garbageMap.set(identifier, performance.now());
        this.garbageCollection(10 * 60 * 1000);
    };
    ObjectStore.prototype.get = function (identifier) {
        return this.identifierMap.has(identifier) ? this.identifierMap.get(identifier) : null;
    };
    ObjectStore.prototype.getObjects = function (arg) {
        if (arg == null) {
            return Array.from(this.identifierMap.values());
        }
        var aliasName = '';
        if (typeof arg === 'string') {
            aliasName = arg;
        }
        else {
            aliasName = arg.aliasName;
        }
        return this.aliasNameMap.has(aliasName) ? Array.from(this.aliasNameMap.get(aliasName).values()) : [];
    };
    ObjectStore.prototype.update = function (arg) {
        var context = null;
        if (typeof arg === 'string') {
            var object = this.get(arg);
            if (object)
                context = object.toContext();
        }
        else {
            context = arg;
        }
        if (!context)
            return;
        if (this.queueMap.has(context.identifier)) {
            var queue = this.queueMap.get(context.identifier);
            for (var key in context) {
                queue[key] = context[key];
            }
            return;
        }
        _system__WEBPACK_IMPORTED_MODULE_1__["EventSystem"].call('UPDATE_GAME_OBJECT', context);
        this.queueMap.set(context.identifier, context);
        if (this.updateInterval === null) {
            this.updateInterval = Object(_system_util_zero_timeout__WEBPACK_IMPORTED_MODULE_2__["setZeroTimeout"])(this.updateCallback);
        }
    };
    ObjectStore.prototype.updateQueue = function () {
        this.queueMap.clear();
        this.updateInterval = null;
    };
    ObjectStore.prototype.isDeleted = function (identifier) {
        var timeStamp = this.garbageMap.get(identifier);
        return timeStamp != null;
    };
    ObjectStore.prototype.getCatalog = function () {
        var e_1, _a;
        var catalog = [];
        try {
            for (var _b = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(this.identifierMap.values()), _c = _b.next(); !_c.done; _c = _b.next()) {
                var object = _c.value;
                catalog.push({ identifier: object.identifier, version: object.version });
            }
        }
        catch (e_1_1) { e_1 = { error: e_1_1 }; }
        finally {
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            }
            finally { if (e_1) throw e_1.error; }
        }
        return catalog;
    };
    ObjectStore.prototype.clearDeleteHistory = function () {
        this.garbageMap.clear();
    };
    ObjectStore.prototype.garbageCollection = function (arg) {
        var _this = this;
        if (typeof arg === 'number') {
            if (this.garbageCollectionInterval === null) {
                this.garbageCollectionInterval = setTimeout(function () { _this.garbageCollectionInterval = null; }, 1000);
                this._garbageCollection(arg);
            }
        }
        else {
            this.garbageMap.delete(arg.identifier);
        }
    };
    ObjectStore.prototype._garbageCollection = function (ms) {
        var nowDate = performance.now();
        var checkLength = this.garbageMap.size - 100000;
        if (checkLength < 1)
            return;
        var entries = this.garbageMap.entries();
        while (checkLength < 1) {
            checkLength--;
            var item = entries.next();
            if (item.done)
                break;
            var identifier = item.value[0];
            var timeStamp = item.value[1];
            if (timeStamp + ms < nowDate)
                continue;
            this.garbageMap.delete(identifier);
        }
    };
    return ObjectStore;
}());



/***/ }),

/***/ "jC/+":
/*!******************************************************************!*\
  !*** ./src/app/component/chat-palette/chat-palette.component.ts ***!
  \******************************************************************/
/*! exports provided: ChatPaletteComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ChatPaletteComponent", function() { return ChatPaletteComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "fXoL");
/* harmony import */ var _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @udonarium/core/synchronize-object/object-store */ "hm7o");
/* harmony import */ var _udonarium_core_system__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @udonarium/core/system */ "yNnI");
/* harmony import */ var _udonarium_dice_bot__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @udonarium/dice-bot */ "JUIv");
/* harmony import */ var _udonarium_game_character__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @udonarium/game-character */ "M/aK");
/* harmony import */ var _udonarium_peer_cursor__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @udonarium/peer-cursor */ "+UEV");
/* harmony import */ var service_chat_message_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! service/chat-message.service */ "PEfN");
/* harmony import */ var service_panel_service__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! service/panel.service */ "M9xM");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @angular/forms */ "3Pt+");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @angular/common */ "ofXK");
/* harmony import */ var component_chat_input_chat_input_component__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! component/chat-input/chat-input.component */ "+l6h");
/* harmony import */ var component_badge_badge_component__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! component/badge/badge.component */ "xKeS");













var _c0 = ["chatInput"];
var _c1 = ["chatPalette"];
function ChatPaletteComponent_label_4_badge_4_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](0, "badge", 12);
} if (rf & 2) {
    var chatTab_r7 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]().$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("count", chatTab_r7.unreadLength);
} }
function ChatPaletteComponent_label_4_Template(rf, ctx) { if (rf & 1) {
    var _r11 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "label");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "input", 10);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("ngModelChange", function ChatPaletteComponent_label_4_Template_input_ngModelChange_1_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r11); var ctx_r10 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](); return ctx_r10.chatTabidentifier = $event; });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](2, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](4, ChatPaletteComponent_label_4_badge_4_Template, 1, 1, "badge", 11);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    var chatTab_r7 = ctx.$implicit;
    var ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpropertyInterpolate"]("value", chatTab_r7.identifier);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngModel", ctx_r0.chatTabidentifier);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate"](chatTab_r7.name);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", chatTab_r7.hasUnread);
} }
function ChatPaletteComponent_div_7_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 13);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "i", 14);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](2, "info_outline");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](3, " \u5C0D\u8A71\u7D44\u5408\u7248\u7DE8\u8F2F\u4E2D");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} }
function ChatPaletteComponent_div_8_ng_container_3_option_1_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "option", 19);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    var palette_r15 = ctx.$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpropertyInterpolate"]("value", palette_r15);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate"](palette_r15);
} }
function ChatPaletteComponent_div_8_ng_container_3_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](1, ChatPaletteComponent_div_8_ng_container_3_option_1_Template, 2, 2, "option", 18);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var ctx_r13 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngForOf", ctx_r13.palette.getPalette());
} }
function ChatPaletteComponent_div_8_Template(rf, ctx) { if (rf & 1) {
    var _r17 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 15);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "select", 16, 17);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("input", function ChatPaletteComponent_div_8_Template_select_input_1_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r17); var ctx_r16 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](); return ctx_r16.selectPalette($event.target.value); })("click", function ChatPaletteComponent_div_8_Template_select_click_1_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r17); var ctx_r18 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](); return ctx_r18.clickPalette($event.target.value); })("focusout", function ChatPaletteComponent_div_8_Template_select_focusout_1_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r17); var ctx_r19 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](); return ctx_r19.resizeChatInput(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](3, ChatPaletteComponent_div_8_ng_container_3_Template, 2, 1, "ng-container", 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    var ctx_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r3.palette);
} }
function ChatPaletteComponent_div_9_Template(rf, ctx) { if (rf & 1) {
    var _r21 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 15);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "textarea", 20);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("ngModelChange", function ChatPaletteComponent_div_9_Template_textarea_ngModelChange_1_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r21); var ctx_r20 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](); return ctx_r20.editPalette = $event; });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    var ctx_r4 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngModel", ctx_r4.editPalette);
} }
function ChatPaletteComponent_span_12_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "span");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](1, "\u7DE8\u8F2F\u5C0D\u8A71\u7D44\u5408\u7248");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} }
function ChatPaletteComponent_span_13_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "span");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](1, "\u78BA\u5B9A\u5C0D\u8A71\u7D44\u5408\u7248");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} }
var ChatPaletteComponent = /** @class */ (function () {
    function ChatPaletteComponent(chatMessageService, panelService) {
        this.chatMessageService = chatMessageService;
        this.panelService = panelService;
        this.character = null;
        this._gameType = '';
        this.chatTabidentifier = '';
        this.text = '';
        this.sendTo = '';
        this.isEdit = false;
        this.editPalette = '';
        this.doubleClickTimer = null;
    }
    Object.defineProperty(ChatPaletteComponent.prototype, "palette", {
        get: function () { return this.character.chatPalette; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ChatPaletteComponent.prototype, "gameType", {
        get: function () { return this._gameType; },
        set: function (gameType) {
            this._gameType = gameType;
            if (this.character.chatPalette)
                this.character.chatPalette.dicebot = gameType;
        },
        enumerable: false,
        configurable: true
    });
    ;
    ;
    Object.defineProperty(ChatPaletteComponent.prototype, "sendFrom", {
        get: function () { return this.character.identifier; },
        set: function (sendFrom) {
            this.onSelectedCharacter(sendFrom);
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ChatPaletteComponent.prototype, "diceBotInfos", {
        get: function () { return _udonarium_dice_bot__WEBPACK_IMPORTED_MODULE_3__["DiceBot"].diceBotInfos; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ChatPaletteComponent.prototype, "chatTab", {
        get: function () { return _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_1__["ObjectStore"].instance.get(this.chatTabidentifier); },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ChatPaletteComponent.prototype, "myPeer", {
        get: function () { return _udonarium_peer_cursor__WEBPACK_IMPORTED_MODULE_5__["PeerCursor"].myCursor; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ChatPaletteComponent.prototype, "otherPeers", {
        get: function () { return _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_1__["ObjectStore"].instance.getObjects(_udonarium_peer_cursor__WEBPACK_IMPORTED_MODULE_5__["PeerCursor"]); },
        enumerable: false,
        configurable: true
    });
    ChatPaletteComponent.prototype.ngOnInit = function () {
        var _this = this;
        Promise.resolve().then(function () { return _this.updatePanelTitle(); });
        this.chatTabidentifier = this.chatMessageService.chatTabs ? this.chatMessageService.chatTabs[0].identifier : '';
        this.gameType = this.character.chatPalette ? this.character.chatPalette.dicebot : '';
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_2__["EventSystem"].register(this)
            .on('DELETE_GAME_OBJECT', -1000, function (event) {
            if (_this.character && _this.character.identifier === event.data.identifier) {
                _this.panelService.close();
            }
            if (_this.chatTabidentifier === event.data.identifier) {
                _this.chatTabidentifier = _this.chatMessageService.chatTabs ? _this.chatMessageService.chatTabs[0].identifier : '';
            }
        });
    };
    ChatPaletteComponent.prototype.ngOnDestroy = function () {
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_2__["EventSystem"].unregister(this);
        if (this.isEdit)
            this.toggleEditMode();
    };
    ChatPaletteComponent.prototype.updatePanelTitle = function () {
        this.panelService.title = this.character.name + ' のチャットパレット';
    };
    ChatPaletteComponent.prototype.onSelectedCharacter = function (identifier) {
        if (this.isEdit)
            this.toggleEditMode();
        var object = _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_1__["ObjectStore"].instance.get(identifier);
        if (object instanceof _udonarium_game_character__WEBPACK_IMPORTED_MODULE_4__["GameCharacter"]) {
            this.character = object;
            var gameType = this.character.chatPalette ? this.character.chatPalette.dicebot : '';
            if (0 < gameType.length)
                this.gameType = gameType;
        }
        this.updatePanelTitle();
    };
    ChatPaletteComponent.prototype.resizeChatInput = function () {
        this.chatInputComponent.kickCalcFitHeight();
    };
    ChatPaletteComponent.prototype.chatTabSwitchRelative = function (direction) {
        var _this = this;
        var chatTabs = this.chatMessageService.chatTabs;
        var index = chatTabs.findIndex(function (elm) { return elm.identifier == _this.chatTabidentifier; });
        if (index < 0) {
            return;
        }
        var nextIndex;
        if (index == chatTabs.length - 1 && direction == 1) {
            nextIndex = 0;
        }
        else if (index == 0 && direction == -1) {
            nextIndex = chatTabs.length - 1;
        }
        else {
            nextIndex = index + direction;
        }
        this.chatTabidentifier = chatTabs[nextIndex].identifier;
    };
    ChatPaletteComponent.prototype.selectPalette = function (line) {
        var multiLine = line.replace(/\\n/g, '\n');
        this.text = multiLine;
    };
    ChatPaletteComponent.prototype.clickPalette = function (line) {
        var _this = this;
        var multiLine = line.replace(/\\n/g, '\n');
        if (this.doubleClickTimer && this.text === multiLine) {
            clearTimeout(this.doubleClickTimer);
            this.doubleClickTimer = null;
            this.chatInputComponent.sendChat(null);
        }
        else {
            this.text = multiLine;
            this.doubleClickTimer = setTimeout(function () { _this.doubleClickTimer = null; }, 400);
        }
    };
    ChatPaletteComponent.prototype.sendChat = function (value) {
        if (this.chatTab) {
            var text = this.palette.evaluate(value.text, this.character.rootDataElement);
            this.chatMessageService.sendMessage(this.chatTab, text, value.gameSystem, value.sendFrom, value.sendTo, value.tachieNum, value.messColor);
            // this.chatMessageService.sendMessage(this.chatTab, text, value.gameType, value.sendFrom, value.sendTo);
        }
    };
    ChatPaletteComponent.prototype.resetPaletteSelect = function () {
        if (!this.chatPaletteElementRef.nativeElement)
            return;
        this.chatPaletteElementRef.nativeElement.selectedIndex = -1;
    };
    ChatPaletteComponent.prototype.toggleEditMode = function () {
        this.isEdit = this.isEdit ? false : true;
        if (this.isEdit) {
            this.editPalette = this.palette.value + '';
        }
        else {
            this.palette.setPalette(this.editPalette);
        }
    };
    ChatPaletteComponent.ɵfac = function ChatPaletteComponent_Factory(t) { return new (t || ChatPaletteComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](service_chat_message_service__WEBPACK_IMPORTED_MODULE_6__["ChatMessageService"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](service_panel_service__WEBPACK_IMPORTED_MODULE_7__["PanelService"])); };
    ChatPaletteComponent.ɵcmp = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineComponent"]({ type: ChatPaletteComponent, selectors: [["chat-palette"]], viewQuery: function ChatPaletteComponent_Query(rf, ctx) { if (rf & 1) {
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵstaticViewQuery"](_c0, true);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵviewQuery"](_c1, true);
        } if (rf & 2) {
            var _t = void 0;
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵqueryRefresh"](_t = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵloadQuery"]()) && (ctx.chatInputComponent = _t.first);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵqueryRefresh"](_t = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵloadQuery"]()) && (ctx.chatPaletteElementRef = _t.first);
        } }, inputs: { character: "character" }, decls: 14, vars: 11, consts: [[1, "flex-container"], [2, "flex-grow", "0"], [1, "chat-tab"], [4, "ngFor", "ngForOf"], [3, "onlyCharacters", "chatTabidentifier", "gameType", "sendFrom", "text", "gameTypeChange", "sendFromChange", "textChange", "chat", "tabSwitch"], ["chatInput", ""], ["class", "edit-info", 4, "ngIf"], ["style", "flex-grow: 1; height: 0; min-height: 100px;", 4, "ngIf"], ["type", "submit", 3, "click"], [4, "ngIf"], ["name", "chat-tab", "type", "radio", "ng-control", "options", 3, "value", "ngModel", "ngModelChange"], ["class", "badge", 3, "count", 4, "ngIf"], [1, "badge", 3, "count"], [1, "edit-info"], [1, "material-icons", 2, "vertical-align", "bottom", "size", "0.8rem"], [2, "flex-grow", "1", "height", "0", "min-height", "100px"], ["size", "5", 1, "palette", 2, "overflow-y", "auto", 3, "input", "click", "focusout"], ["chatPalette", ""], [3, "value", 4, "ngFor", "ngForOf"], [3, "value"], ["placeholder", "\u30C1\u30E3\u30C3\u30C8\u30D1\u30EC\u30C3\u30C8", 1, "palette", 2, "resize", "none", 3, "ngModel", "ngModelChange"]], template: function ChatPaletteComponent_Template(rf, ctx) { if (rf & 1) {
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 0);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "div", 1);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](2, "form");
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](3, "div", 2);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](4, ChatPaletteComponent_label_4_Template, 5, 4, "label", 3);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](5, "chat-input", 4, 5);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("gameTypeChange", function ChatPaletteComponent_Template_chat_input_gameTypeChange_5_listener($event) { return ctx.gameType = $event; })("sendFromChange", function ChatPaletteComponent_Template_chat_input_sendFromChange_5_listener($event) { return ctx.sendFrom = $event; })("textChange", function ChatPaletteComponent_Template_chat_input_textChange_5_listener($event) { return ctx.text = $event; })("chat", function ChatPaletteComponent_Template_chat_input_chat_5_listener($event) { return ctx.sendChat($event); })("tabSwitch", function ChatPaletteComponent_Template_chat_input_tabSwitch_5_listener($event) { return ctx.chatTabSwitchRelative($event); });
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](7, ChatPaletteComponent_div_7_Template, 4, 0, "div", 6);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](8, ChatPaletteComponent_div_8_Template, 4, 1, "div", 7);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](9, ChatPaletteComponent_div_9_Template, 2, 1, "div", 7);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](10, "div", 1);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](11, "button", 8);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function ChatPaletteComponent_Template_button_click_11_listener() { return ctx.toggleEditMode(); });
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](12, ChatPaletteComponent_span_12_Template, 2, 0, "span", 9);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](13, ChatPaletteComponent_span_13_Template, 2, 0, "span", 9);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        } if (rf & 2) {
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](4);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngForOf", ctx.chatMessageService.chatTabs);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("onlyCharacters", true)("chatTabidentifier", ctx.chatTabidentifier)("gameType", ctx.gameType)("sendFrom", ctx.sendFrom)("text", ctx.text);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx.isEdit);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", !ctx.isEdit);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx.isEdit);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", !ctx.isEdit);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx.isEdit);
        } }, directives: [_angular_forms__WEBPACK_IMPORTED_MODULE_8__["ɵangular_packages_forms_forms_y"], _angular_forms__WEBPACK_IMPORTED_MODULE_8__["NgControlStatusGroup"], _angular_forms__WEBPACK_IMPORTED_MODULE_8__["NgForm"], _angular_common__WEBPACK_IMPORTED_MODULE_9__["NgForOf"], component_chat_input_chat_input_component__WEBPACK_IMPORTED_MODULE_10__["ChatInputComponent"], _angular_common__WEBPACK_IMPORTED_MODULE_9__["NgIf"], _angular_forms__WEBPACK_IMPORTED_MODULE_8__["RadioControlValueAccessor"], _angular_forms__WEBPACK_IMPORTED_MODULE_8__["DefaultValueAccessor"], _angular_forms__WEBPACK_IMPORTED_MODULE_8__["NgControlStatus"], _angular_forms__WEBPACK_IMPORTED_MODULE_8__["NgModel"], component_badge_badge_component__WEBPACK_IMPORTED_MODULE_11__["BadgeComponent"], _angular_forms__WEBPACK_IMPORTED_MODULE_8__["NgSelectOption"], _angular_forms__WEBPACK_IMPORTED_MODULE_8__["ɵangular_packages_forms_forms_x"]], styles: [".edit-info[_ngcontent-%COMP%] {\r\n  width: 100%;\r\n  text-align: center;\r\n  color: #CCC;\r\n  background-color: rgba(30, 30, 30, 0.8);\r\n}\r\n.palette[_ngcontent-%COMP%] {\r\n\r\n  box-sizing: border-box;\r\n  font-family: -apple-system, BlinkMacSystemFont, \"Helvetica Neue\", Verdana, Meiryo, sans-serif;\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n.flex-container[_ngcontent-%COMP%] {\r\n  display: flex;\r\n  flex-direction: column;\r\n  height: 100%;\r\n}\r\n.chat-tab[_ngcontent-%COMP%] {\r\n  padding : 0 5px 5px 5px;\r\n  -webkit-user-select: none;\r\n          user-select: none;\r\n}\r\n.chat-tab[_ngcontent-%COMP%]   label[_ngcontent-%COMP%] {\r\n  display: inline-block;\r\n  position: relative;\r\n}\r\n.chat-tab[_ngcontent-%COMP%]   input[type=\"radio\"][_ngcontent-%COMP%] {\r\n  display: none;\r\n}\r\n.chat-tab[_ngcontent-%COMP%]   input[type=\"radio\"][_ngcontent-%COMP%]    + div[_ngcontent-%COMP%] {\r\n  display: inline-block;\r\n  vertical-align: middle;\r\n  outline: 0;\r\n  font-size: 8px;\r\n  background-color: transparent;\r\n  color: #444; \r\n  border: solid 1px #555;\r\n  padding: 2px 8px;\r\n  margin: 2px;\r\n  border-radius: 100px;\r\n  cursor: pointer;\r\n}\r\n.chat-tab[_ngcontent-%COMP%]   input[type=\"radio\"][_ngcontent-%COMP%]    + div[_ngcontent-%COMP%]:hover {\r\n  background-color: #888;\r\n  color: #eee;\r\n  border: solid 1px #555;\r\n}\r\n.chat-tab[_ngcontent-%COMP%]   input[type=\"radio\"][_ngcontent-%COMP%]:checked    + div[_ngcontent-%COMP%] {\r\n  background: #555;\r\n  color: #CCC;\r\n}\r\n.badge[_ngcontent-%COMP%] {\r\n  position: absolute;\r\n  top: -4px;\r\n  right: 0;\r\n}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNoYXQtcGFsZXR0ZS5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UsV0FBVztFQUNYLGtCQUFrQjtFQUNsQixXQUFXO0VBQ1gsdUNBQXVDO0FBQ3pDO0FBQ0E7QUFDQSxXQUFXO0VBQ1Qsc0JBQXNCO0VBQ3RCLDZGQUE2RjtFQUM3RixXQUFXO0VBQ1gsWUFBWTtBQUNkO0FBRUE7RUFDRSxhQUFhO0VBQ2Isc0JBQXNCO0VBQ3RCLFlBQVk7QUFDZDtBQUVBO0VBQ0UsdUJBQXVCO0VBQ3ZCLHlCQUFpQjtVQUFqQixpQkFBaUI7QUFDbkI7QUFFQTtFQUNFLHFCQUFxQjtFQUNyQixrQkFBa0I7QUFDcEI7QUFFQTtFQUNFLGFBQWE7QUFDZjtBQUVBO0VBQ0UscUJBQXFCO0VBQ3JCLHNCQUFzQjtFQUN0QixVQUFVO0VBQ1YsY0FBYztFQUNkLDZCQUE2QjtFQUM3QixXQUFXO0VBQ1gsc0JBQXNCO0VBQ3RCLGdCQUFnQjtFQUNoQixXQUFXO0VBQ1gsb0JBQW9CO0VBQ3BCLGVBQWU7QUFDakI7QUFFQTtFQUNFLHNCQUFzQjtFQUN0QixXQUFXO0VBQ1gsc0JBQXNCO0FBQ3hCO0FBRUE7RUFDRSxnQkFBZ0I7RUFDaEIsV0FBVztBQUNiO0FBRUE7RUFDRSxrQkFBa0I7RUFDbEIsU0FBUztFQUNULFFBQVE7QUFDViIsImZpbGUiOiJjaGF0LXBhbGV0dGUuY29tcG9uZW50LmNzcyIsInNvdXJjZXNDb250ZW50IjpbIi5lZGl0LWluZm8ge1xyXG4gIHdpZHRoOiAxMDAlO1xyXG4gIHRleHQtYWxpZ246IGNlbnRlcjtcclxuICBjb2xvcjogI0NDQztcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDMwLCAzMCwgMzAsIDAuOCk7XHJcbn1cclxuLnBhbGV0dGUge1xyXG4vKi5pbnB1dCB7Ki9cclxuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xyXG4gIGZvbnQtZmFtaWx5OiAtYXBwbGUtc3lzdGVtLCBCbGlua01hY1N5c3RlbUZvbnQsIFwiSGVsdmV0aWNhIE5ldWVcIiwgVmVyZGFuYSwgTWVpcnlvLCBzYW5zLXNlcmlmO1xyXG4gIHdpZHRoOiAxMDAlO1xyXG4gIGhlaWdodDogMTAwJTtcclxufVxyXG5cclxuLmZsZXgtY29udGFpbmVyIHtcclxuICBkaXNwbGF5OiBmbGV4O1xyXG4gIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XHJcbiAgaGVpZ2h0OiAxMDAlO1xyXG59XHJcblxyXG4uY2hhdC10YWIge1xyXG4gIHBhZGRpbmcgOiAwIDVweCA1cHggNXB4O1xyXG4gIHVzZXItc2VsZWN0OiBub25lO1xyXG59XHJcblxyXG4uY2hhdC10YWIgbGFiZWwge1xyXG4gIGRpc3BsYXk6IGlubGluZS1ibG9jaztcclxuICBwb3NpdGlvbjogcmVsYXRpdmU7XHJcbn1cclxuXHJcbi5jaGF0LXRhYiBpbnB1dFt0eXBlPVwicmFkaW9cIl0ge1xyXG4gIGRpc3BsYXk6IG5vbmU7XHJcbn1cclxuXHJcbi5jaGF0LXRhYiBpbnB1dFt0eXBlPVwicmFkaW9cIl0gKyBkaXYge1xyXG4gIGRpc3BsYXk6IGlubGluZS1ibG9jaztcclxuICB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlO1xyXG4gIG91dGxpbmU6IDA7XHJcbiAgZm9udC1zaXplOiA4cHg7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogdHJhbnNwYXJlbnQ7XHJcbiAgY29sb3I6ICM0NDQ7IFxyXG4gIGJvcmRlcjogc29saWQgMXB4ICM1NTU7XHJcbiAgcGFkZGluZzogMnB4IDhweDtcclxuICBtYXJnaW46IDJweDtcclxuICBib3JkZXItcmFkaXVzOiAxMDBweDtcclxuICBjdXJzb3I6IHBvaW50ZXI7XHJcbn1cclxuXHJcbi5jaGF0LXRhYiBpbnB1dFt0eXBlPVwicmFkaW9cIl0gKyBkaXY6aG92ZXIge1xyXG4gIGJhY2tncm91bmQtY29sb3I6ICM4ODg7XHJcbiAgY29sb3I6ICNlZWU7XHJcbiAgYm9yZGVyOiBzb2xpZCAxcHggIzU1NTtcclxufVxyXG5cclxuLmNoYXQtdGFiIGlucHV0W3R5cGU9XCJyYWRpb1wiXTpjaGVja2VkICsgZGl2IHtcclxuICBiYWNrZ3JvdW5kOiAjNTU1O1xyXG4gIGNvbG9yOiAjQ0NDO1xyXG59XHJcblxyXG4uYmFkZ2Uge1xyXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcclxuICB0b3A6IC00cHg7XHJcbiAgcmlnaHQ6IDA7XHJcbn0iXX0= */"] });
    return ChatPaletteComponent;
}());

/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](ChatPaletteComponent, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"],
        args: [{
                selector: 'chat-palette',
                templateUrl: './chat-palette.component.html',
                styleUrls: ['./chat-palette.component.css']
            }]
    }], function () { return [{ type: service_chat_message_service__WEBPACK_IMPORTED_MODULE_6__["ChatMessageService"] }, { type: service_panel_service__WEBPACK_IMPORTED_MODULE_7__["PanelService"] }]; }, { chatInputComponent: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"],
            args: ['chatInput', { static: true }]
        }], chatPaletteElementRef: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"],
            args: ['chatPalette']
        }], character: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }] }); })();


/***/ }),

/***/ "jJIX":
/*!****************************************************************!*\
  !*** ./src/app/class/core/system/network/skyway-connection.ts ***!
  \****************************************************************/
/*! exports provided: SkyWayConnection */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SkyWayConnection", function() { return SkyWayConnection; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "mrSG");
/* harmony import */ var msgpack_lite__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! msgpack-lite */ "HlZf");
/* harmony import */ var msgpack_lite__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(msgpack_lite__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _util_compress__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../util/compress */ "ynNQ");
/* harmony import */ var _util_zero_timeout__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../util/zero-timeout */ "eS09");
/* harmony import */ var _connection__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./connection */ "Hcv6");
/* harmony import */ var _peer_context__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./peer-context */ "ztsr");
/* harmony import */ var _skyway_data_connection__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./skyway-data-connection */ "N5Fg");







var SkyWayConnection = /** @class */ (function () {
    function SkyWayConnection() {
        this._peerIds = [];
        this.peerContexts = [];
        this.callback = new _connection__WEBPACK_IMPORTED_MODULE_4__["ConnectionCallback"]();
        this.bandwidthUsage = 0;
        this.key = '';
        this.connections = [];
        this.listAllPeersCache = [];
        this.httpRequestInterval = performance.now() + 500;
        this.queue = Promise.resolve();
        this.relayingPeerIds = new Map();
        this.maybeUnavailablePeerIds = new Set();
    }
    Object.defineProperty(SkyWayConnection.prototype, "peerId", {
        get: function () { return this.peerContext ? this.peerContext.peerId : '???'; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(SkyWayConnection.prototype, "peerIds", {
        get: function () { return this._peerIds; },
        enumerable: false,
        configurable: true
    });
    SkyWayConnection.prototype.open = function () {
        var args = [];
        for (var _i = 0; _i < arguments.length; _i++) {
            args[_i] = arguments[_i];
        }
        console.log('open', args);
        if (args.length === 0) {
            this.peerContext = _peer_context__WEBPACK_IMPORTED_MODULE_5__["PeerContext"].create(_peer_context__WEBPACK_IMPORTED_MODULE_5__["PeerContext"].generateId());
        }
        else if (args.length === 1) {
            this.peerContext = _peer_context__WEBPACK_IMPORTED_MODULE_5__["PeerContext"].create(args[0]);
        }
        else {
            this.peerContext = _peer_context__WEBPACK_IMPORTED_MODULE_5__["PeerContext"].create(args[0], args[1], args[2], args[3]);
        }
        this.openPeer();
    };
    SkyWayConnection.prototype.close = function () {
        if (this.peer)
            this.peer.destroy();
        this.disconnectAll();
        this.peer = null;
        this.peerContext = null;
    };
    SkyWayConnection.prototype.connect = function (peerId) {
        if (!this.shouldConnect(peerId))
            return false;
        var conn = new _skyway_data_connection__WEBPACK_IMPORTED_MODULE_6__["SkyWayDataConnection"](this.peer.connect(peerId, {
            serialization: 'none',
            metadata: { sendFrom: this.peerId }
        }));
        this.openDataConnection(conn);
        return true;
    };
    SkyWayConnection.prototype.shouldConnect = function (peerId) {
        if (!this.peerContext || !this.peer || !this.peerId) {
            console.log('connect() is Fail. IDが割り振られるまで待てや');
            return false;
        }
        if (this.peerId === peerId) {
            console.log('connect() is Fail. ' + peerId + ' is me.');
            return false;
        }
        if (this.findDataConnection(peerId)) {
            console.log('connect() is Fail. <' + peerId + '> is already connecting.');
            return false;
        }
        if (peerId && peerId.length && peerId !== this.peerId)
            return true;
        return false;
    };
    SkyWayConnection.prototype.disconnect = function (peerId) {
        var conn = this.findDataConnection(peerId);
        if (!conn)
            return false;
        this.closeDataConnection(conn);
        return true;
    };
    SkyWayConnection.prototype.disconnectAll = function () {
        var e_1, _a;
        console.log('<closeAllDataConnection()>');
        try {
            for (var _b = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(this.connections.concat()), _c = _b.next(); !_c.done; _c = _b.next()) {
                var conn = _c.value;
                this.closeDataConnection(conn);
            }
        }
        catch (e_1_1) { e_1 = { error: e_1_1 }; }
        finally {
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            }
            finally { if (e_1) throw e_1.error; }
        }
    };
    SkyWayConnection.prototype.send = function (data, sendTo) {
        var _this = this;
        if (this.connections.length < 1)
            return;
        var container = {
            data: msgpack_lite__WEBPACK_IMPORTED_MODULE_1__["encode"](data),
            ttl: 1
        };
        var byteLength = container.data.byteLength;
        this.bandwidthUsage += byteLength;
        this.queue = this.queue.then(function () { return new Promise(function (resolve, reject) {
            Object(_util_zero_timeout__WEBPACK_IMPORTED_MODULE_3__["setZeroTimeout"])(function () { return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(_this, void 0, void 0, function () {
                var compressed;
                return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"])(this, function (_a) {
                    switch (_a.label) {
                        case 0:
                            if (!(1 * 1024 < container.data.byteLength)) return [3 /*break*/, 2];
                            return [4 /*yield*/, Object(_util_compress__WEBPACK_IMPORTED_MODULE_2__["compressAsync"])(container.data)];
                        case 1:
                            compressed = _a.sent();
                            if (compressed.byteLength < container.data.byteLength) {
                                container.data = compressed;
                                container.isCompressed = true;
                            }
                            _a.label = 2;
                        case 2:
                            if (sendTo) {
                                this.sendUnicast(container, sendTo);
                            }
                            else {
                                this.sendBroadcast(container);
                            }
                            this.bandwidthUsage -= byteLength;
                            return [2 /*return*/, resolve()];
                    }
                });
            }); });
        }); });
    };
    SkyWayConnection.prototype.sendUnicast = function (container, sendTo) {
        container.ttl = 0;
        var conn = this.findDataConnection(sendTo);
        if (conn && conn.open)
            conn.send(container);
    };
    SkyWayConnection.prototype.sendBroadcast = function (container) {
        var e_2, _a;
        try {
            for (var _b = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(this.connections), _c = _b.next(); !_c.done; _c = _b.next()) {
                var conn = _c.value;
                if (conn.open)
                    conn.send(container);
            }
        }
        catch (e_2_1) { e_2 = { error: e_2_1 }; }
        finally {
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            }
            finally { if (e_2) throw e_2.error; }
        }
    };
    SkyWayConnection.prototype.setApiKey = function (key) {
        if (this.key !== key)
            console.log('Key Change');
        this.key = key;
    };
    SkyWayConnection.prototype.listAllPeers = function () {
        var _this = this;
        return new Promise(function (resolve, reject) {
            if (!_this.peer)
                return resolve([]);
            var now = performance.now();
            if (now < _this.httpRequestInterval) {
                console.warn('httpRequestInterval... ' + (_this.httpRequestInterval - now));
                resolve(_this.listAllPeersCache.concat());
                return;
            }
            _this.httpRequestInterval = now + 6000;
            _this.peer.listAllPeers(function (list) {
                _this.listAllPeersCache = list.concat();
                resolve(list);
            });
        });
    };
    SkyWayConnection.prototype.openPeer = function () {
        var _this = this;
        if (this.peer) {
            console.warn('It is already opened.');
            this.close();
        }
        var peer = new Peer(this.peerContext.peerId, { key: this.key }); // SkyWay
        peer.on('open', function (id) {
            console.log('My peer ID is: ' + id);
            if (!_this.peerContext || _this.peerContext.peerId !== id) {
                _this.peerContext = _peer_context__WEBPACK_IMPORTED_MODULE_5__["PeerContext"].parse(id);
            }
            _this.peerContext.isOpen = true;
            console.log('My peer Context', _this.peerContext);
            if (_this.callback.onOpen)
                _this.callback.onOpen(_this.peerId);
        });
        peer.on('connection', function (conn) {
            _this.openDataConnection(new _skyway_data_connection__WEBPACK_IMPORTED_MODULE_6__["SkyWayDataConnection"](conn));
        });
        peer.on('error', function (err) {
            console.error('<' + _this.peerId + '> ' + err.type + ' => ' + err.message);
            var errorMessage = _this.getSkyWayErrorMessage(err.type);
            errorMessage += ': ' + err.message;
            switch (err.type) {
                case 'peer-unavailable':
                case 'invalid-id':
                case 'invalid-key':
                case 'list-error':
                case 'server-error':
                    break;
                case 'disconnected':
                case 'socket-error':
                default:
                    if (_this.peerContext && _this.peerContext.isOpen) {
                        if (_this.callback.onClose)
                            _this.callback.onClose(_this.peerId);
                    }
                    break;
            }
            if (_this.callback.onError)
                _this.callback.onError(_this.peerId, errorMessage);
        });
        this.peer = peer;
    };
    SkyWayConnection.prototype.openDataConnection = function (conn) {
        var _this = this;
        if (this.addDataConnection(conn) === false)
            return;
        var index = this.connections.indexOf(conn);
        var context = null;
        if (0 <= index)
            context = this.peerContexts[index];
        conn.on('data', function (data) {
            _this.onData(conn, data);
        });
        conn.on('open', function () {
            _this.maybeUnavailablePeerIds.delete(conn.remoteId);
            if (context)
                context.isOpen = true;
            _this.updatePeerList();
            if (_this.callback.onConnect)
                _this.callback.onConnect(conn.remoteId);
        });
        conn.on('close', function () {
            _this.maybeUnavailablePeerIds.add(conn.remoteId);
            _this.closeDataConnection(conn);
            if (_this.callback.onDisconnect)
                _this.callback.onDisconnect(conn.remoteId);
        });
        conn.on('error', function (err) {
            _this.maybeUnavailablePeerIds.add(conn.remoteId);
            _this.closeDataConnection(conn);
            if (_this.callback.onError)
                _this.callback.onError(conn.remoteId, err);
        });
    };
    SkyWayConnection.prototype.closeDataConnection = function (conn) {
        conn.close();
        var index = this.connections.indexOf(conn);
        if (0 <= index) {
            console.log(conn.remoteId + ' is えんいー' + 'index:' + index + ' length:' + this.connections.length);
            this.connections.splice(index, 1);
            this.peerContexts.splice(index, 1);
        }
        this.relayingPeerIds.delete(conn.remoteId);
        this.relayingPeerIds.forEach(function (peerIds) {
            var index = peerIds.indexOf(conn.remoteId);
            if (0 <= index)
                peerIds.splice(index, 1);
        });
        console.log('<close()> Peer:' + conn.remoteId + ' length:' + this.connections.length + ':' + this.peerContexts.length);
        this.updatePeerList();
    };
    SkyWayConnection.prototype.addDataConnection = function (conn) {
        var existConn = this.findDataConnection(conn.remoteId);
        if (existConn !== null) {
            console.log('add() is Fail. ' + conn.remoteId + ' is already connecting.');
            if (existConn !== conn) {
                if (existConn.metadata.sendFrom < conn.metadata.sendFrom) {
                    this.closeDataConnection(conn);
                }
                else {
                    this.closeDataConnection(existConn);
                    this.addDataConnection(conn);
                    return true;
                }
            }
            return false;
        }
        this.connections.push(conn);
        this.peerContexts.push(_peer_context__WEBPACK_IMPORTED_MODULE_5__["PeerContext"].parse(conn.remoteId));
        console.log('<add()> Peer:' + conn.remoteId + ' length:' + this.connections.length);
        return true;
    };
    SkyWayConnection.prototype.findDataConnection = function (peerId) {
        var e_3, _a;
        try {
            for (var _b = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(this.connections), _c = _b.next(); !_c.done; _c = _b.next()) {
                var conn = _c.value;
                if (conn.remoteId === peerId) {
                    return conn;
                }
            }
        }
        catch (e_3_1) { e_3 = { error: e_3_1 }; }
        finally {
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            }
            finally { if (e_3) throw e_3.error; }
        }
        return null;
    };
    SkyWayConnection.prototype.onData = function (conn, container) {
        var _this = this;
        if (container.peers && 0 < container.peers.length)
            this.onUpdatePeerList(conn, container);
        if (0 < container.ttl)
            this.onRelay(conn, container);
        if (this.callback.onData) {
            var byteLength_1 = container.data.byteLength;
            this.bandwidthUsage += byteLength_1;
            this.queue = this.queue.then(function () { return new Promise(function (resolve, reject) {
                Object(_util_zero_timeout__WEBPACK_IMPORTED_MODULE_3__["setZeroTimeout"])(function () { return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(_this, void 0, void 0, function () {
                    var data, _a;
                    return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"])(this, function (_b) {
                        switch (_b.label) {
                            case 0:
                                if (!container.isCompressed) return [3 /*break*/, 2];
                                return [4 /*yield*/, Object(_util_compress__WEBPACK_IMPORTED_MODULE_2__["decompressAsync"])(container.data)];
                            case 1:
                                _a = _b.sent();
                                return [3 /*break*/, 3];
                            case 2:
                                _a = container.data;
                                _b.label = 3;
                            case 3:
                                data = _a;
                                this.callback.onData(conn.remoteId, msgpack_lite__WEBPACK_IMPORTED_MODULE_1__["decode"](data));
                                this.bandwidthUsage -= byteLength_1;
                                return [2 /*return*/, resolve()];
                        }
                    });
                }); });
            }); });
        }
    };
    SkyWayConnection.prototype.onRelay = function (conn, container) {
        var e_4, _a;
        container.ttl--;
        var relayingPeerIds = this.relayingPeerIds.get(conn.remoteId);
        if (relayingPeerIds == null)
            return;
        try {
            for (var relayingPeerIds_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(relayingPeerIds), relayingPeerIds_1_1 = relayingPeerIds_1.next(); !relayingPeerIds_1_1.done; relayingPeerIds_1_1 = relayingPeerIds_1.next()) {
                var peerId = relayingPeerIds_1_1.value;
                var conn_1 = this.findDataConnection(peerId);
                if (conn_1 && conn_1.open) {
                    console.log('<' + peerId + '> 転送しなきゃ・・・');
                    conn_1.send(container);
                }
            }
        }
        catch (e_4_1) { e_4 = { error: e_4_1 }; }
        finally {
            try {
                if (relayingPeerIds_1_1 && !relayingPeerIds_1_1.done && (_a = relayingPeerIds_1.return)) _a.call(relayingPeerIds_1);
            }
            finally { if (e_4) throw e_4.error; }
        }
    };
    SkyWayConnection.prototype.onUpdatePeerList = function (conn, container) {
        var e_5, _a;
        var relayingPeerIds = [];
        var unknownPeerIds = [];
        var diff = diffArray(this._peerIds, container.peers);
        relayingPeerIds = diff.diff1;
        unknownPeerIds = diff.diff2;
        this.relayingPeerIds.set(conn.remoteId, relayingPeerIds);
        container.peers = container.peers.concat(relayingPeerIds);
        if (unknownPeerIds.length) {
            try {
                for (var unknownPeerIds_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(unknownPeerIds), unknownPeerIds_1_1 = unknownPeerIds_1.next(); !unknownPeerIds_1_1.done; unknownPeerIds_1_1 = unknownPeerIds_1.next()) {
                    var peerId = unknownPeerIds_1_1.value;
                    if (!this.maybeUnavailablePeerIds.has(peerId) && this.connect(peerId)) {
                        console.log('auto connect to unknown Peer <' + peerId + '>');
                    }
                }
            }
            catch (e_5_1) { e_5 = { error: e_5_1 }; }
            finally {
                try {
                    if (unknownPeerIds_1_1 && !unknownPeerIds_1_1.done && (_a = unknownPeerIds_1.return)) _a.call(unknownPeerIds_1);
                }
                finally { if (e_5) throw e_5.error; }
            }
        }
    };
    SkyWayConnection.prototype.updatePeerList = function () {
        var e_6, _a;
        var peerIds = [];
        try {
            for (var _b = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(this.connections), _c = _b.next(); !_c.done; _c = _b.next()) {
                var conn = _c.value;
                if (conn.open)
                    peerIds.push(conn.remoteId);
            }
        }
        catch (e_6_1) { e_6 = { error: e_6_1 }; }
        finally {
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            }
            finally { if (e_6) throw e_6.error; }
        }
        peerIds.push(this.peerId);
        peerIds.sort(function (a, b) {
            if (a > b)
                return 1;
            if (a < b)
                return -1;
            return 0;
        });
        this._peerIds = peerIds;
        console.log('<update()>', peerIds);
        this.notifyPeerList();
        return peerIds;
    };
    SkyWayConnection.prototype.notifyPeerList = function () {
        if (this.connections.length < 1)
            return;
        var container = {
            data: msgpack_lite__WEBPACK_IMPORTED_MODULE_1__["encode"]([]),
            peers: this._peerIds,
            ttl: 1
        };
        this.sendBroadcast(container);
    };
    SkyWayConnection.prototype.getSkyWayErrorMessage = function (errType) {
        switch (errType) {
            case 'peer-unavailable':
                return 'そのPeer IDは利用できません。';
            case 'invalid-id':
                return 'Peer IDが不正です。';
            case 'invalid-key':
                return 'SkyWay APIキーが無効です。';
            case 'list-error':
                return 'SkyWay APIキーのREST APIが許可されてません。';
            case 'server-error':
                return 'SkyWayのシグナリングサーバからPeer一覧を取得できませんでした。';
            case 'disconnected':
                return 'SkyWayのシグナリングサーバに接続されていません。';
            case 'socket-error':
                return 'SkyWayのシグナリングサーバとの接続が失われました。';
            default:
                return 'SkyWayに関する不明なエラーが発生しました(' + errType + ')';
        }
    };
    return SkyWayConnection;
}());

function diffArray(array1, array2) {
    var e_7, _a;
    var diff1 = [];
    var diff2 = [];
    var includesInArray1 = false;
    var includesInArray2 = false;
    try {
        for (var _b = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(array1.concat(array2)), _c = _b.next(); !_c.done; _c = _b.next()) {
            var item = _c.value;
            includesInArray1 = array1.includes(item);
            includesInArray2 = array2.includes(item);
            if (includesInArray1 && !includesInArray2) {
                diff1.push(item);
            }
            else if (!includesInArray1 && includesInArray2) {
                diff2.push(item);
            }
        }
    }
    catch (e_7_1) { e_7 = { error: e_7_1 }; }
    finally {
        try {
            if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
        }
        finally { if (e_7) throw e_7.error; }
    }
    return { diff1: diff1, diff2: diff2 };
}


/***/ }),

/***/ "jLOE":
/*!*******************************************************************!*\
  !*** ./src/app/class/core/synchronize-object/synchronize-task.ts ***!
  \*******************************************************************/
/*! exports provided: SynchronizeTask */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SynchronizeTask", function() { return SynchronizeTask; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "mrSG");
/* harmony import */ var _system__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../system */ "yNnI");
/* harmony import */ var _system_util_resettable_timeout__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../system/util/resettable-timeout */ "9ht1");



var SynchronizeTask = /** @class */ (function () {
    function SynchronizeTask(peerId) {
        this.peerId = peerId;
        this.requestMap = new Map();
    }
    SynchronizeTask.create = function (peerId, requests) {
        if (SynchronizeTask.tasksMap.size < 1) {
            _system__WEBPACK_IMPORTED_MODULE_1__["EventSystem"].register(SynchronizeTask.key)
                .on('DISCONNECT_PEER', function (event) {
                SynchronizeTask.onDisconnect(event.data.peerId);
            })
                .on('UPDATE_GAME_OBJECT', function (event) {
                if (event.isSendFromSelf)
                    return;
                SynchronizeTask.onUpdate(event.data.identifier);
            })
                .on('DELETE_GAME_OBJECT', function (event) {
                if (event.isSendFromSelf)
                    return;
                SynchronizeTask.onUpdate(event.data.identifier);
            });
        }
        var task = new SynchronizeTask(peerId);
        task.initialize(requests);
        return task;
    };
    SynchronizeTask.prototype.cancel = function () {
        var e_1, _a;
        if (this.timeoutTimer)
            this.timeoutTimer.clear();
        this.timeoutTimer = null;
        this.onsynchronize = this.onfinish = this.ontimeout = null;
        try {
            for (var _b = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(this.requestMap.values()), _c = _b.next(); !_c.done; _c = _b.next()) {
                var request = _c.value;
                this.deleteTasksMap(request.identifier);
            }
        }
        catch (e_1_1) { e_1 = { error: e_1_1 }; }
        finally {
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            }
            finally { if (e_1) throw e_1.error; }
        }
        ;
        this.requestMap.clear();
    };
    SynchronizeTask.prototype.initialize = function (requests) {
        var e_2, _a;
        var _this = this;
        try {
            for (var requests_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(requests), requests_1_1 = requests_1.next(); !requests_1_1.done; requests_1_1 = requests_1.next()) {
                var request = requests_1_1.value;
                request.ttl--;
                this.requestMap.set(request.identifier, request);
                var tasks = SynchronizeTask.tasksMap.get(request.identifier);
                if (tasks == null)
                    tasks = [];
                tasks.push(this);
                SynchronizeTask.tasksMap.set(request.identifier, tasks);
                var sendTo = this.peerId != null && request.holderIds.includes(this.peerId) ? this.peerId : null;
                _system__WEBPACK_IMPORTED_MODULE_1__["EventSystem"].call('REQUEST_GAME_OBJECT', request.identifier, sendTo);
            }
        }
        catch (e_2_1) { e_2 = { error: e_2_1 }; }
        finally {
            try {
                if (requests_1_1 && !requests_1_1.done && (_a = requests_1.return)) _a.call(requests_1);
            }
            finally { if (e_2) throw e_2.error; }
        }
        if (this.requestMap.size < 1) {
            setTimeout(function () { return _this.finish(); });
            return;
        }
        this.resetTimeout();
    };
    SynchronizeTask.prototype.finish = function () {
        if (this.onfinish)
            this.onfinish(this);
        this.cancel();
    };
    SynchronizeTask.prototype.timeout = function () {
        if (this.ontimeout)
            this.ontimeout(this, Array.from(this.requestMap.values()).filter(function (request) { return 0 <= request.ttl; }));
        this.finish();
    };
    SynchronizeTask.onDisconnect = function (peerId) {
        var e_3, _a, e_4, _b;
        try {
            for (var _c = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(SynchronizeTask.tasksMap.values()), _d = _c.next(); !_d.done; _d = _c.next()) {
                var tasks = _d.value;
                try {
                    for (var _e = (e_4 = void 0, Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(tasks.concat())), _f = _e.next(); !_f.done; _f = _e.next()) {
                        var task = _f.value;
                        if (task.peerId === peerId)
                            task.timeout();
                    }
                }
                catch (e_4_1) { e_4 = { error: e_4_1 }; }
                finally {
                    try {
                        if (_f && !_f.done && (_b = _e.return)) _b.call(_e);
                    }
                    finally { if (e_4) throw e_4.error; }
                }
            }
        }
        catch (e_3_1) { e_3 = { error: e_3_1 }; }
        finally {
            try {
                if (_d && !_d.done && (_a = _c.return)) _a.call(_c);
            }
            finally { if (e_3) throw e_3.error; }
        }
        if (SynchronizeTask.tasksMap.size < 1)
            _system__WEBPACK_IMPORTED_MODULE_1__["EventSystem"].unregister(SynchronizeTask.key);
    };
    SynchronizeTask.onUpdate = function (identifier) {
        var e_5, _a;
        if (!SynchronizeTask.tasksMap.has(identifier))
            return;
        var tasks = SynchronizeTask.tasksMap.get(identifier);
        try {
            for (var _b = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(tasks.concat()), _c = _b.next(); !_c.done; _c = _b.next()) {
                var task = _c.value;
                task.onUpdate(identifier);
            }
        }
        catch (e_5_1) { e_5 = { error: e_5_1 }; }
        finally {
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            }
            finally { if (e_5) throw e_5.error; }
        }
        if (SynchronizeTask.tasksMap.size < 1)
            _system__WEBPACK_IMPORTED_MODULE_1__["EventSystem"].unregister(SynchronizeTask.key);
    };
    SynchronizeTask.prototype.onUpdate = function (identifier) {
        this.requestMap.delete(identifier);
        if (this.onsynchronize)
            this.onsynchronize(this, identifier);
        if (this.requestMap.size < 1) {
            this.finish();
        }
        else {
            this.resetTimeout();
        }
    };
    SynchronizeTask.prototype.deleteTasksMap = function (identifier) {
        var tasks = SynchronizeTask.tasksMap.get(identifier);
        var index = tasks.indexOf(this);
        if (-1 < index)
            tasks.splice(index, 1);
        if (tasks.length < 1)
            SynchronizeTask.tasksMap.delete(identifier);
    };
    SynchronizeTask.prototype.resetTimeout = function () {
        var _this = this;
        if (this.timeoutTimer == null)
            this.timeoutTimer = new _system_util_resettable_timeout__WEBPACK_IMPORTED_MODULE_2__["ResettableTimeout"](function () { return _this.timeout(); }, 30 * 1000);
        this.timeoutTimer.reset();
    };
    SynchronizeTask.key = {};
    SynchronizeTask.tasksMap = new Map();
    return SynchronizeTask;
}());



/***/ }),

/***/ "jiu3":
/*!*******************************!*\
  !*** ./src/app/class/card.ts ***!
  \*******************************/
/*! exports provided: CardState, Card */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CardState", function() { return CardState; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Card", function() { return Card; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "mrSG");
/* harmony import */ var _core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./core/synchronize-object/decorator */ "1lIu");
/* harmony import */ var _core_system__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./core/system */ "yNnI");
/* harmony import */ var _data_element__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./data-element */ "gkrD");
/* harmony import */ var _peer_cursor__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./peer-cursor */ "+UEV");
/* harmony import */ var _tabletop_object__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./tabletop-object */ "e8gA");
/* harmony import */ var _tabletop_object_util__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./tabletop-object-util */ "g6Hf");







var CardState;
(function (CardState) {
    CardState[CardState["FRONT"] = 0] = "FRONT";
    CardState[CardState["BACK"] = 1] = "BACK";
})(CardState || (CardState = {}));
var Card = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"])(Card, _super);
    function Card() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.state = CardState.FRONT;
        _this.rotate = 0;
        _this.owner = '';
        _this.zindex = 0;
        return _this;
    }
    Card_1 = Card;
    Object.defineProperty(Card.prototype, "isVisibleOnTable", {
        get: function () { return this.location.name === 'table' && (!this.parentIsAssigned || this.parentIsDestroyed); },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Card.prototype, "name", {
        get: function () { return this.getCommonValue('name', ''); },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Card.prototype, "size", {
        get: function () { return this.getCommonValue('size', 2); },
        set: function (size) { this.setCommonValue('size', size); },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Card.prototype, "frontImage", {
        get: function () { return this.getImageFile('front'); },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Card.prototype, "backImage", {
        get: function () { return this.getImageFile('back'); },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Card.prototype, "imageFile", {
        get: function () { return this.isVisible ? this.frontImage : this.backImage; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Card.prototype, "ownerName", {
        get: function () {
            var object = _peer_cursor__WEBPACK_IMPORTED_MODULE_4__["PeerCursor"].findByUserId(this.owner);
            return object ? object.name : '';
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Card.prototype, "hasOwner", {
        get: function () { return 0 < this.owner.length; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Card.prototype, "isHand", {
        get: function () { return _core_system__WEBPACK_IMPORTED_MODULE_2__["Network"].peerContext.userId === this.owner; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Card.prototype, "isFront", {
        get: function () { return this.state === CardState.FRONT; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Card.prototype, "isVisible", {
        get: function () { return this.isHand || this.isFront; },
        enumerable: false,
        configurable: true
    });
    Card.prototype.faceUp = function () {
        this.state = CardState.FRONT;
        this.owner = '';
    };
    Card.prototype.faceDown = function () {
        this.state = CardState.BACK;
        this.owner = '';
    };
    Card.prototype.toTopmost = function () {
        Object(_tabletop_object_util__WEBPACK_IMPORTED_MODULE_6__["moveToTopmost"])(this, ['card-stack']);
    };
    Card.create = function (name, fornt, back, size, identifier) {
        if (size === void 0) { size = 2; }
        var object = null;
        if (identifier) {
            object = new Card_1(identifier);
        }
        else {
            object = new Card_1();
        }
        object.createDataElements();
        object.commonDataElement.appendChild(_data_element__WEBPACK_IMPORTED_MODULE_3__["DataElement"].create('name', name, {}, 'name_' + object.identifier));
        object.commonDataElement.appendChild(_data_element__WEBPACK_IMPORTED_MODULE_3__["DataElement"].create('size', size, {}, 'size_' + object.identifier));
        object.imageDataElement.appendChild(_data_element__WEBPACK_IMPORTED_MODULE_3__["DataElement"].create('front', fornt, { type: 'image' }, 'front_' + object.identifier));
        object.imageDataElement.appendChild(_data_element__WEBPACK_IMPORTED_MODULE_3__["DataElement"].create('back', back, { type: 'image' }, 'back_' + object.identifier));
        object.initialize();
        return object;
    };
    var Card_1;
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_1__["SyncVar"])()
    ], Card.prototype, "state", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_1__["SyncVar"])()
    ], Card.prototype, "rotate", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_1__["SyncVar"])()
    ], Card.prototype, "owner", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_1__["SyncVar"])()
    ], Card.prototype, "zindex", void 0);
    Card = Card_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_1__["SyncObject"])('card')
    ], Card);
    return Card;
}(_tabletop_object__WEBPACK_IMPORTED_MODULE_5__["TabletopObject"]));



/***/ }),

/***/ "k8BA":
/*!************************************************************************!*\
  !*** ./src/app/component/card-stack-list/card-stack-list.component.ts ***!
  \************************************************************************/
/*! exports provided: CardStackListComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CardStackListComponent", function() { return CardStackListComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "fXoL");
/* harmony import */ var _udonarium_core_synchronize_object_object_node__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @udonarium/core/synchronize-object/object-node */ "F67Z");
/* harmony import */ var _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @udonarium/core/synchronize-object/object-store */ "hm7o");
/* harmony import */ var _udonarium_core_system__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @udonarium/core/system */ "yNnI");
/* harmony import */ var _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @udonarium/sound-effect */ "veT5");
/* harmony import */ var component_game_character_sheet_game_character_sheet_component__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! component/game-character-sheet/game-character-sheet.component */ "zXSY");
/* harmony import */ var service_panel_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! service/panel.service */ "M9xM");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @angular/common */ "ofXK");
/* harmony import */ var directive_tooltip_directive__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! directive/tooltip.directive */ "ts4F");
/* harmony import */ var pipe_safe_pipe__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! pipe/safe.pipe */ "6HCy");











function CardStackListComponent_div_4_Template(rf, ctx) { if (rf & 1) {
    var _r3 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "div", 3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](2, "div", 4);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](3, "safe");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](4, "div", 4);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](5, "safe");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](6, "div", 5);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](7, "button", 6);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function CardStackListComponent_div_4_Template_button_click_7_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r3); var card_r1 = ctx.$implicit; var ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](); return ctx_r2.drawCard(card_r1); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](8, "\u5C71\u672D\u304B\u3089\u51FA\u3059");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](9, "button", 0);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function CardStackListComponent_div_4_Template_button_click_9_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r3); var card_r1 = ctx.$implicit; var ctx_r4 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](); return ctx_r4.showDetail(card_r1); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](10, "i", 7);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](11, "settings");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](12, "\u7DE8\u96C6");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](13, "br");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](14, "button", 0);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function CardStackListComponent_div_4_Template_button_click_14_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r3); var card_r1 = ctx.$implicit; var ctx_r5 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](); return ctx_r5.up(card_r1); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](15, "\u2191");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](16, "button", 0);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function CardStackListComponent_div_4_Template_button_click_16_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r3); var card_r1 = ctx.$implicit; var ctx_r6 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](); return ctx_r6.down(card_r1); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](17, "\u2193");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](18, "br");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    var card_r1 = ctx.$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("appTooltip", card_r1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵstyleProp"]("background-image", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind2"](3, 5, "url(" + (card_r1 == null ? null : card_r1.frontImage == null ? null : card_r1.frontImage.url) + ")", "style"));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵstyleProp"]("background-image", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind2"](5, 8, "url(" + (card_r1 == null ? null : card_r1.backImage == null ? null : card_r1.backImage.url) + ")", "style"));
} }
var CardStackListComponent = /** @class */ (function () {
    function CardStackListComponent(panelService, changeDetector) {
        this.panelService = panelService;
        this.changeDetector = changeDetector;
        this.cardStack = null;
        this.owner = _udonarium_core_system__WEBPACK_IMPORTED_MODULE_3__["Network"].peerContext.userId;
    }
    CardStackListComponent.prototype.ngOnInit = function () {
        var _this = this;
        Promise.resolve().then(function () { return _this.panelService.title = _this.cardStack.name + ' のカード一覧'; });
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_3__["EventSystem"].register(this)
            .on('UPDATE_GAME_OBJECT', -1000, function (event) {
            var object = _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_2__["ObjectStore"].instance.get(event.data.identifier);
            if (!_this.cardStack || !object)
                return;
            if ((_this.cardStack === object)
                || (object instanceof _udonarium_core_synchronize_object_object_node__WEBPACK_IMPORTED_MODULE_1__["ObjectNode"] && _this.cardStack.contains(object))) {
                _this.changeDetector.markForCheck();
            }
            if (event.data.identifier === _this.cardStack.identifier && _this.cardStack.owner !== _this.owner) {
                _this.panelService.close();
            }
        })
            .on('DELETE_GAME_OBJECT', -1000, function (event) {
            if (_this.cardStack && _this.cardStack.identifier === event.data.identifier) {
                _this.panelService.close();
            }
        });
    };
    CardStackListComponent.prototype.ngOnDestroy = function () {
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_3__["EventSystem"].unregister(this);
        if (this.cardStack.owner === this.owner) {
            this.cardStack.owner = '';
        }
    };
    CardStackListComponent.prototype.drawCard = function (card) {
        card.parent.removeChild(card);
        card.location.x = this.cardStack.location.x + 100 + (Math.random() * 50);
        card.location.y = this.cardStack.location.y + 25 + (Math.random() * 50);
        card.location.name = this.cardStack.location.name;
        card.rotate += this.cardStack.rotate;
        if (360 < card.rotate)
            card.rotate -= 360;
        card.toTopmost();
        _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_4__["SoundEffect"].play(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_4__["PresetSound"].cardDraw);
    };
    CardStackListComponent.prototype.up = function (card) {
        var parent = card.parent;
        var index = parent.children.indexOf(card);
        if (0 < index) {
            var prev = parent.children[index - 1];
            parent.insertBefore(card, prev);
        }
    };
    CardStackListComponent.prototype.down = function (card) {
        var parent = card.parent;
        var index = parent.children.indexOf(card);
        if (index < parent.children.length - 1) {
            var next = parent.children[index + 1];
            parent.insertBefore(next, card);
        }
    };
    CardStackListComponent.prototype.close = function (needShuffle) {
        if (needShuffle === void 0) { needShuffle = false; }
        if (needShuffle) {
            this.cardStack.shuffle();
            _udonarium_core_system__WEBPACK_IMPORTED_MODULE_3__["EventSystem"].call('SHUFFLE_CARD_STACK', { identifier: this.cardStack.identifier });
            _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_4__["SoundEffect"].play(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_4__["PresetSound"].cardShuffle);
        }
        this.panelService.close();
    };
    CardStackListComponent.prototype.showDetail = function (gameObject) {
        var coordinate = {
            x: this.panelService.left,
            y: this.panelService.top
        };
        var title = 'カード設定';
        if (gameObject.name.length)
            title += ' - ' + gameObject.name;
        var option = { title: title, left: coordinate.x + 10, top: coordinate.y + 20, width: 600, height: 600 };
        var component = this.panelService.open(component_game_character_sheet_game_character_sheet_component__WEBPACK_IMPORTED_MODULE_5__["GameCharacterSheetComponent"], option);
        component.tabletopObject = gameObject;
    };
    CardStackListComponent.prototype.trackByCard = function (index, card) {
        return card.identifier;
    };
    CardStackListComponent.ɵfac = function CardStackListComponent_Factory(t) { return new (t || CardStackListComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](service_panel_service__WEBPACK_IMPORTED_MODULE_6__["PanelService"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["ChangeDetectorRef"])); };
    CardStackListComponent.ɵcmp = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineComponent"]({ type: CardStackListComponent, selectors: [["card-stack-list"]], inputs: { cardStack: "cardStack" }, decls: 5, vars: 2, consts: [[3, "click"], ["class", "box", 4, "ngFor", "ngForOf", "ngForTrackBy"], [1, "box"], [1, "image-box", 3, "appTooltip"], [1, "image", "contain"], [2, "display", "inline-block"], ["type", "submit", 3, "click"], [1, "material-icons", 2, "font-size", "1.1em", "vertical-align", "text-bottom"]], template: function CardStackListComponent_Template(rf, ctx) { if (rf & 1) {
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div");
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "button", 0);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function CardStackListComponent_Template_button_click_1_listener() { return ctx.close(true); });
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](2, "\u30B7\u30E3\u30C3\u30D5\u30EB\u3057\u3066\u30A6\u30A3\u30F3\u30C9\u30A6\u3092\u9589\u3058\u308B");
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](3, "hr");
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](4, CardStackListComponent_div_4_Template, 19, 11, "div", 1);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        } if (rf & 2) {
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](4);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngForOf", ctx.cardStack.cards)("ngForTrackBy", ctx.trackByCard);
        } }, directives: [_angular_common__WEBPACK_IMPORTED_MODULE_7__["NgForOf"], directive_tooltip_directive__WEBPACK_IMPORTED_MODULE_8__["TooltipDirective"]], pipes: [pipe_safe_pipe__WEBPACK_IMPORTED_MODULE_9__["SafePipe"]], styles: [".box[_ngcontent-%COMP%] {\r\n  border-bottom:1px dotted #888;\r\n}\r\n\r\n.image-box[_ngcontent-%COMP%] {\r\n  display: inline-block;\r\n  vertical-align: top;\r\n}\r\n\r\n.image[_ngcontent-%COMP%] {\r\n  padding: 0px;\r\n  width: 64px;\r\n  height: 64px;\r\n  display: inline-block;\r\n  vertical-align: top;\r\n}\r\n\r\n.contain[_ngcontent-%COMP%] {\r\n  background-position: center center;\r\n  background-repeat: no-repeat;\r\n  background-size: contain;\r\n}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNhcmQtc3RhY2stbGlzdC5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UsNkJBQTZCO0FBQy9COztBQUVBO0VBQ0UscUJBQXFCO0VBQ3JCLG1CQUFtQjtBQUNyQjs7QUFFQTtFQUNFLFlBQVk7RUFDWixXQUFXO0VBQ1gsWUFBWTtFQUNaLHFCQUFxQjtFQUNyQixtQkFBbUI7QUFDckI7O0FBRUE7RUFDRSxrQ0FBa0M7RUFDbEMsNEJBQTRCO0VBQzVCLHdCQUF3QjtBQUMxQiIsImZpbGUiOiJjYXJkLXN0YWNrLWxpc3QuY29tcG9uZW50LmNzcyIsInNvdXJjZXNDb250ZW50IjpbIi5ib3gge1xyXG4gIGJvcmRlci1ib3R0b206MXB4IGRvdHRlZCAjODg4O1xyXG59XHJcblxyXG4uaW1hZ2UtYm94IHtcclxuICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XHJcbiAgdmVydGljYWwtYWxpZ246IHRvcDtcclxufVxyXG5cclxuLmltYWdlIHtcclxuICBwYWRkaW5nOiAwcHg7XHJcbiAgd2lkdGg6IDY0cHg7XHJcbiAgaGVpZ2h0OiA2NHB4O1xyXG4gIGRpc3BsYXk6IGlubGluZS1ibG9jaztcclxuICB2ZXJ0aWNhbC1hbGlnbjogdG9wO1xyXG59XHJcblxyXG4uY29udGFpbiB7XHJcbiAgYmFja2dyb3VuZC1wb3NpdGlvbjogY2VudGVyIGNlbnRlcjtcclxuICBiYWNrZ3JvdW5kLXJlcGVhdDogbm8tcmVwZWF0O1xyXG4gIGJhY2tncm91bmQtc2l6ZTogY29udGFpbjtcclxufSJdfQ== */"], changeDetection: 0 });
    return CardStackListComponent;
}());

/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](CardStackListComponent, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"],
        args: [{
                selector: 'card-stack-list',
                templateUrl: './card-stack-list.component.html',
                styleUrls: ['./card-stack-list.component.css'],
                changeDetection: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ChangeDetectionStrategy"].OnPush
            }]
    }], function () { return [{ type: service_panel_service__WEBPACK_IMPORTED_MODULE_6__["PanelService"] }, { type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ChangeDetectorRef"] }]; }, { cardStack: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }] }); })();


/***/ }),

/***/ "kf6k":
/*!****************************************************************************!*\
  !*** ./src/app/component/network-indicator/network-indicator.component.ts ***!
  \****************************************************************************/
/*! exports provided: NetworkIndicatorComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "NetworkIndicatorComponent", function() { return NetworkIndicatorComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "fXoL");
/* harmony import */ var _udonarium_core_system__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @udonarium/core/system */ "yNnI");



var NetworkIndicatorComponent = /** @class */ (function () {
    function NetworkIndicatorComponent(elementRef) {
        this.elementRef = elementRef;
        this.timer = null;
        this.needRepeat = false;
    }
    NetworkIndicatorComponent.prototype.ngAfterViewInit = function () {
        var _this = this;
        var repeatFunc = function () {
            if (_this.needRepeat) {
                _this.timer = setTimeout(repeatFunc, 650);
                _this.needRepeat = false;
            }
            else {
                _this.timer = null;
                _this.elementRef.nativeElement.style.display = 'none';
            }
        };
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_1__["EventSystem"].register(this)
            .on('*', function (event) {
            if (_this.needRepeat || _udonarium_core_system__WEBPACK_IMPORTED_MODULE_1__["Network"].bandwidthUsage < 3 * 1024)
                return;
            if (_this.timer === null) {
                _this.elementRef.nativeElement.style.display = 'block';
                _this.timer = setTimeout(repeatFunc, 650);
            }
            else {
                _this.needRepeat = true;
            }
        });
    };
    NetworkIndicatorComponent.prototype.ngOnDestroy = function () {
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_1__["EventSystem"].unregister(this);
    };
    NetworkIndicatorComponent.ɵfac = function NetworkIndicatorComponent_Factory(t) { return new (t || NetworkIndicatorComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["ElementRef"])); };
    NetworkIndicatorComponent.ɵcmp = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineComponent"]({ type: NetworkIndicatorComponent, selectors: [["network-indicator"]], decls: 12, vars: 0, consts: [[1, "sk-cube-grid"], [1, "sk-cube", "sk-cube1"], [1, "sk-cube", "sk-cube2"], [1, "sk-cube", "sk-cube3"], [1, "sk-cube", "sk-cube4"], [1, "sk-cube", "sk-cube5"], [1, "sk-cube", "sk-cube6"], [1, "sk-cube", "sk-cube7"], [1, "sk-cube", "sk-cube8"], [1, "sk-cube", "sk-cube9"], [1, "sk-title"]], template: function NetworkIndicatorComponent_Template(rf, ctx) { if (rf & 1) {
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 0);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](1, "div", 1);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](2, "div", 2);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](3, "div", 3);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](4, "div", 4);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](5, "div", 5);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](6, "div", 6);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](7, "div", 7);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](8, "div", 8);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](9, "div", 9);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](10, "div", 10);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](11, "sync");
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        } }, styles: [".sk-cube-grid[_ngcontent-%COMP%] {\r\n  font-size: 8px;\r\n  color: #444;\r\n  height: 100%;\r\n  width: 100%;\r\n  background-color: rgba(247, 247, 247, 0.6);\r\n}\r\n\r\n.sk-cube[_ngcontent-%COMP%] {\r\n  background-color: #555;\r\n}\r\n\r\n.sk-title[_ngcontent-%COMP%] {\r\n  padding: 2px 0;\r\n  background-color: rgba(247, 247, 247, 0.6);\r\n}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5ldHdvcmstaW5kaWNhdG9yLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxjQUFjO0VBQ2QsV0FBVztFQUNYLFlBQVk7RUFDWixXQUFXO0VBQ1gsMENBQTBDO0FBQzVDOztBQUVBO0VBQ0Usc0JBQXNCO0FBQ3hCOztBQUVBO0VBQ0UsY0FBYztFQUNkLDBDQUEwQztBQUM1QyIsImZpbGUiOiJuZXR3b3JrLWluZGljYXRvci5jb21wb25lbnQuY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLnNrLWN1YmUtZ3JpZCB7XHJcbiAgZm9udC1zaXplOiA4cHg7XHJcbiAgY29sb3I6ICM0NDQ7XHJcbiAgaGVpZ2h0OiAxMDAlO1xyXG4gIHdpZHRoOiAxMDAlO1xyXG4gIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMjQ3LCAyNDcsIDI0NywgMC42KTtcclxufVxyXG5cclxuLnNrLWN1YmUge1xyXG4gIGJhY2tncm91bmQtY29sb3I6ICM1NTU7XHJcbn1cclxuXHJcbi5zay10aXRsZSB7XHJcbiAgcGFkZGluZzogMnB4IDA7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgyNDcsIDI0NywgMjQ3LCAwLjYpO1xyXG59XHJcbiJdfQ== */"] });
    return NetworkIndicatorComponent;
}());

/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](NetworkIndicatorComponent, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"],
        args: [{
                selector: 'network-indicator',
                templateUrl: './network-indicator.component.html',
                styleUrls: ['./network-indicator.component.css']
            }]
    }], function () { return [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ElementRef"] }]; }, null); })();


/***/ }),

/***/ "l22b":
/*!**************************************!*\
  !*** ./src/app/class/dice-symbol.ts ***!
  \**************************************/
/*! exports provided: DiceType, DiceSymbol */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DiceType", function() { return DiceType; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DiceSymbol", function() { return DiceSymbol; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "mrSG");
/* harmony import */ var _core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./core/synchronize-object/decorator */ "1lIu");
/* harmony import */ var _core_system__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./core/system */ "yNnI");
/* harmony import */ var _data_element__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./data-element */ "gkrD");
/* harmony import */ var _peer_cursor__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./peer-cursor */ "+UEV");
/* harmony import */ var _tabletop_object__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./tabletop-object */ "e8gA");






var DiceType;
(function (DiceType) {
    DiceType[DiceType["D2"] = 0] = "D2";
    DiceType[DiceType["D4"] = 1] = "D4";
    DiceType[DiceType["D6"] = 2] = "D6";
    DiceType[DiceType["D8"] = 3] = "D8";
    DiceType[DiceType["D10"] = 4] = "D10";
    DiceType[DiceType["D10_10TIMES"] = 5] = "D10_10TIMES";
    DiceType[DiceType["D12"] = 6] = "D12";
    DiceType[DiceType["D20"] = 7] = "D20";
})(DiceType || (DiceType = {}));
var DiceSymbol = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"])(DiceSymbol, _super);
    function DiceSymbol() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.face = '0';
        _this.owner = '';
        _this.rotate = 0;
        return _this;
    }
    DiceSymbol_1 = DiceSymbol;
    Object.defineProperty(DiceSymbol.prototype, "name", {
        get: function () { return this.getCommonValue('name', ''); },
        set: function (name) { this.setCommonValue('name', name); },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(DiceSymbol.prototype, "size", {
        get: function () { return this.getCommonValue('size', 1); },
        set: function (size) { this.setCommonValue('size', size); },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(DiceSymbol.prototype, "faces", {
        get: function () { return this.imageDataElement.children.map(function (element) { return element.name; }); },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(DiceSymbol.prototype, "imageFile", {
        get: function () {
            return this.isVisible ?
                this.getImageFile(this.face)
                : this.faces.length
                    ? this.getImageFile(this.faces[0])
                    : null;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(DiceSymbol.prototype, "ownerName", {
        get: function () {
            var object = _peer_cursor__WEBPACK_IMPORTED_MODULE_4__["PeerCursor"].findByUserId(this.owner);
            return object ? object.name : '';
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(DiceSymbol.prototype, "hasOwner", {
        get: function () { return 0 < this.owner.length; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(DiceSymbol.prototype, "isMine", {
        get: function () { return _core_system__WEBPACK_IMPORTED_MODULE_2__["Network"].peerContext.userId === this.owner; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(DiceSymbol.prototype, "isVisible", {
        get: function () { return !this.hasOwner || this.isMine; },
        enumerable: false,
        configurable: true
    });
    DiceSymbol.prototype.diceRoll = function () {
        var faces = this.faces;
        this.face = 0 < faces.length ? faces[Math.floor(Math.random() * faces.length)] : '';
        return this.face;
    };
    DiceSymbol.prototype.setDicetype = function (type) {
        this.makeDiceFace(type);
    };
    DiceSymbol.prototype.makeDiceFace = function (type, identifierSuffix) {
        var _this = this;
        var sided = 1;
        var faces = [];
        var faceGeneratorFunc = function (index) { return (index + 1) + ''; };
        switch (type) {
            case DiceType.D2:
                sided = 2;
                break;
            case DiceType.D4:
                sided = 4;
                break;
            case DiceType.D6:
                sided = 6;
                break;
            case DiceType.D8:
                sided = 8;
                break;
            case DiceType.D10_10TIMES:
                faceGeneratorFunc = function (index) { return (index + 1) + '0'; };
            case DiceType.D10:
                sided = 10;
                break;
            case DiceType.D12:
                sided = 12;
                break;
            case DiceType.D20:
                sided = 20;
                break;
            default:
                sided = 2;
                break;
        }
        for (var i = 0; i < sided; i++) {
            var faceName = faceGeneratorFunc(i);
            var identifier = identifierSuffix != null ? faceName + '_' + identifierSuffix : null;
            faces.push(_data_element__WEBPACK_IMPORTED_MODULE_3__["DataElement"].create(faceName, '', { type: 'image' }, identifier));
        }
        this.imageDataElement.children.forEach(function (element) { return element.destroy(); });
        faces.forEach(function (element) { return _this.imageDataElement.appendChild(element); });
        this.face = faces[0].name;
        return faces;
    };
    DiceSymbol.create = function (name, type, size, identifier) {
        var object = identifier ? new DiceSymbol_1(identifier) : new DiceSymbol_1();
        object.createDataElements();
        object.commonDataElement.appendChild(_data_element__WEBPACK_IMPORTED_MODULE_3__["DataElement"].create('name', name, {}, 'name_' + object.identifier));
        object.commonDataElement.appendChild(_data_element__WEBPACK_IMPORTED_MODULE_3__["DataElement"].create('size', size, {}, 'size_' + object.identifier));
        object.makeDiceFace(type, object.identifier);
        object.initialize();
        return object;
    };
    var DiceSymbol_1;
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_1__["SyncVar"])()
    ], DiceSymbol.prototype, "face", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_1__["SyncVar"])()
    ], DiceSymbol.prototype, "owner", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_1__["SyncVar"])()
    ], DiceSymbol.prototype, "rotate", void 0);
    DiceSymbol = DiceSymbol_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_1__["SyncObject"])('dice-symbol')
    ], DiceSymbol);
    return DiceSymbol;
}(_tabletop_object__WEBPACK_IMPORTED_MODULE_5__["TabletopObject"]));



/***/ }),

/***/ "lB2V":
/*!**********************************************!*\
  !*** ./src/app/class/transform/matrix-3d.ts ***!
  \**********************************************/
/*! exports provided: Matrix3D */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Matrix3D", function() { return Matrix3D; });
/* harmony import */ var _css_number__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./css-number */ "zAbn");

var Matrix3D = /** @class */ (function () {
    function Matrix3D() {
        this.m11 = 1;
        this.m12 = 0;
        this.m13 = 0;
        this.m14 = 0;
        this.m21 = 0;
        this.m22 = 1;
        this.m23 = 0;
        this.m24 = 0;
        this.m31 = 0;
        this.m32 = 0;
        this.m33 = 1;
        this.m34 = 0;
        this.m41 = 0;
        this.m42 = 0;
        this.m43 = 0;
        this.m44 = 1;
    }
    Matrix3D.create = function (element, style, ret) {
        if (style === void 0) { style = null; }
        if (ret === void 0) { ret = new Matrix3D(); }
        if (element && element.ownerDocument)
            return ret.setCSS((style || window.getComputedStyle(element)).transform);
        return ret.identity();
    };
    Matrix3D.prototype.setData = function (data) {
        if (data == null)
            return;
        var l = data.length;
        if (l == 16) {
            this.m11 = data[0];
            this.m12 = data[1];
            this.m13 = data[2];
            this.m14 = data[3];
            this.m21 = data[4];
            this.m22 = data[5];
            this.m23 = data[6];
            this.m24 = data[7];
            this.m31 = data[8];
            this.m32 = data[9];
            this.m33 = data[10];
            this.m34 = data[11];
            this.m41 = data[12];
            this.m42 = data[13];
            this.m43 = data[14];
            this.m44 = data[15];
        }
        else if (l == 6) {
            this.m11 = data[0];
            this.m12 = data[1];
            this.m13 = 0;
            this.m14 = 0;
            this.m21 = data[2];
            this.m22 = data[3];
            this.m23 = 0;
            this.m24 = 0;
            this.m31 = 0;
            this.m32 = 0;
            this.m33 = 1;
            this.m34 = 0;
            this.m41 = data[4];
            this.m42 = data[5];
            this.m43 = 0;
            this.m44 = 1;
        }
        else if (l == 9) {
            this.m11 = data[0];
            this.m12 = data[1];
            this.m13 = 0;
            this.m14 = data[2];
            this.m21 = data[3];
            this.m22 = data[4];
            this.m23 = 0;
            this.m24 = data[5];
            this.m31 = 0;
            this.m32 = 0;
            this.m33 = 1;
            this.m34 = 0;
            this.m41 = data[6];
            this.m42 = data[7];
            this.m43 = 0;
            this.m44 = data[8];
        }
        return this;
    };
    Matrix3D.prototype.identity = function () {
        this.m11 = 1;
        this.m12 = 0;
        this.m13 = 0;
        this.m14 = 0;
        this.m21 = 0;
        this.m22 = 1;
        this.m23 = 0;
        this.m24 = 0;
        this.m31 = 0;
        this.m32 = 0;
        this.m33 = 1;
        this.m34 = 0;
        this.m41 = 0;
        this.m42 = 0;
        this.m43 = 0;
        this.m44 = 1;
        return this;
    };
    Matrix3D.prototype.scalar = function (scalar) {
        this.m11 *= scalar;
        this.m12 *= scalar;
        this.m13 *= scalar;
        this.m14 *= scalar;
        this.m21 *= scalar;
        this.m22 *= scalar;
        this.m23 *= scalar;
        this.m24 *= scalar;
        this.m31 *= scalar;
        this.m32 *= scalar;
        this.m33 *= scalar;
        this.m34 *= scalar;
        this.m41 *= scalar;
        this.m42 *= scalar;
        this.m43 *= scalar;
        this.m44 *= scalar;
        return this;
    };
    //based on http://code.metager.de/source/xref/mozilla/B2G/gecko/gfx/thebes/gfx3DMatrix.cpp#651
    Matrix3D.prototype.unproject = function (point, ret) {
        if (ret === void 0) { ret = { x: 0, y: 0, z: 0, w: 1 }; }
        var x = point.x * this.m11 + point.y * this.m21 + this.m41;
        var y = point.x * this.m12 + point.y * this.m22 + this.m42;
        var z = point.x * this.m13 + point.y * this.m23 + this.m43;
        var w = point.x * this.m14 + point.y * this.m24 + this.m44;
        var qx = x + this.m31;
        var qy = y + this.m32;
        var qz = z + this.m33;
        var qw = w + this.m34;
        if (w == 0)
            w = 0.0001;
        x /= w;
        y /= w;
        z /= w;
        if (qw == 0)
            qw = 0.0001;
        qx /= qw;
        qy /= qw;
        qz /= qw;
        var wz = qz - z;
        if (wz == 0) {
            ret.x = x;
            ret.y = y;
            ret.z = z;
            ret.w = z;
            return ret;
        }
        var t = -z / wz;
        x += t * (qx - x);
        y += t * (qy - y);
        ret.x = x;
        ret.y = y;
        ret.z = z;
        ret.w = z;
        return ret;
    };
    Matrix3D.prototype.project = function (point, ret) {
        if (ret === void 0) { ret = { x: 0, y: 0, z: 0, w: 1 }; }
        var z = point.z;
        var w = point.x * this.m14 + point.y * this.m24 + z * this.m34 + this.m44;
        var x = point.x * this.m11 + point.y * this.m21 + z * this.m31 + this.m41;
        var y = point.x * this.m12 + point.y * this.m22 + z * this.m32 + this.m42;
        if (w == 0)
            w = 0.0001;
        x /= w;
        y /= w;
        if (w < 0) {
            x -= this.m41;
            y -= this.m42;
            x *= 1 / w;
            y *= 1 / w;
            x += this.m41;
            y += this.m42;
        }
        ret.x = x;
        ret.y = y;
        ret.z = z;
        ret.w = z;
        return ret;
    };
    Matrix3D.prototype.append = function (b) {
        return Matrix3D.multiply(this, b, this);
    };
    Matrix3D.prototype.setPosition = function (position) {
        this.m41 = position.x;
        this.m42 = position.y;
        this.m43 = position.z;
        return this;
    };
    Matrix3D.prototype.getPosition = function (ret) {
        if (ret === void 0) { ret = { x: 0, y: 0, z: 0, w: 1 }; }
        ret.x = this.m41;
        ret.y = this.m42;
        ret.z = this.m43;
        return ret;
    };
    Matrix3D.makePosition = function (position, ret) {
        if (ret === void 0) { ret = new Matrix3D(); }
        ret.identity();
        ret.setPosition(position);
        return ret;
    };
    Matrix3D.prototype.appendPosition = function () {
        var args = [];
        for (var _i = 0; _i < arguments.length; _i++) {
            args[_i] = arguments[_i];
        }
        var position;
        if (args.length === 1) {
            position = args[0];
        }
        else {
            position = { x: args[0], y: args[1], z: args[2], w: 1 };
        }
        return this.append(Matrix3D.makePosition(position, Matrix3D.MATRIX3D));
    };
    Matrix3D.makePerspective = function (perspective, ret) {
        if (ret === void 0) { ret = new Matrix3D(); }
        ret.identity();
        ret.m34 = perspective ? -(1 / perspective) : 0;
        return ret;
    };
    Matrix3D.prototype.appendPerspective = function (perspective) {
        if (!perspective)
            return this;
        return this.append(Matrix3D.makePerspective(perspective, Matrix3D.MATRIX3D));
    };
    /**
    * Inverts the matrix.
    * -> based on http://www.euclideanspace.com/maths/algebra/matrix/functions/inverse/fourD/index.htm
    * -> based on https://github.com/mrdoob/three.js/blob/master/src/math/Matrix4.js
    */
    Matrix3D.prototype.invert = function (target) {
        target = target || this;
        var data = [];
        var n11 = this.m11, n12 = this.m12, n13 = this.m13, n14 = this.m14;
        var n21 = this.m21, n22 = this.m22, n23 = this.m23, n24 = this.m24;
        var n31 = this.m31, n32 = this.m32, n33 = this.m33, n34 = this.m34;
        var n41 = this.m41, n42 = this.m42, n43 = this.m43, n44 = this.m44;
        data[0] = n23 * n34 * n42 - n24 * n33 * n42 + n24 * n32 * n43 - n22 * n34 * n43 - n23 * n32 * n44 + n22 * n33 * n44;
        data[1] = n14 * n33 * n42 - n13 * n34 * n42 - n14 * n32 * n43 + n12 * n34 * n43 + n13 * n32 * n44 - n12 * n33 * n44;
        data[2] = n13 * n24 * n42 - n14 * n23 * n42 + n14 * n22 * n43 - n12 * n24 * n43 - n13 * n22 * n44 + n12 * n23 * n44;
        data[3] = n14 * n23 * n32 - n13 * n24 * n32 - n14 * n22 * n33 + n12 * n24 * n33 + n13 * n22 * n34 - n12 * n23 * n34;
        var det = n11 * data[0] + n21 * data[1] + n31 * data[2] + n41 * data[3];
        if (det == 0) {
            console.warn('Can not invert matrix, determinant is 0');
            return this;
        }
        data[4] = n24 * n33 * n41 - n23 * n34 * n41 - n24 * n31 * n43 + n21 * n34 * n43 + n23 * n31 * n44 - n21 * n33 * n44;
        data[5] = n13 * n34 * n41 - n14 * n33 * n41 + n14 * n31 * n43 - n11 * n34 * n43 - n13 * n31 * n44 + n11 * n33 * n44;
        data[6] = n14 * n23 * n41 - n13 * n24 * n41 - n14 * n21 * n43 + n11 * n24 * n43 + n13 * n21 * n44 - n11 * n23 * n44;
        data[7] = n13 * n24 * n31 - n14 * n23 * n31 + n14 * n21 * n33 - n11 * n24 * n33 - n13 * n21 * n34 + n11 * n23 * n34;
        data[8] = n22 * n34 * n41 - n24 * n32 * n41 + n24 * n31 * n42 - n21 * n34 * n42 - n22 * n31 * n44 + n21 * n32 * n44;
        data[9] = n14 * n32 * n41 - n12 * n34 * n41 - n14 * n31 * n42 + n11 * n34 * n42 + n12 * n31 * n44 - n11 * n32 * n44;
        data[10] = n12 * n24 * n41 - n14 * n22 * n41 + n14 * n21 * n42 - n11 * n24 * n42 - n12 * n21 * n44 + n11 * n22 * n44;
        data[11] = n14 * n22 * n31 - n12 * n24 * n31 - n14 * n21 * n32 + n11 * n24 * n32 + n12 * n21 * n34 - n11 * n22 * n34;
        data[12] = n23 * n32 * n41 - n22 * n33 * n41 - n23 * n31 * n42 + n21 * n33 * n42 + n22 * n31 * n43 - n21 * n32 * n43;
        data[13] = n12 * n33 * n41 - n13 * n32 * n41 + n13 * n31 * n42 - n11 * n33 * n42 - n12 * n31 * n43 + n11 * n32 * n43;
        data[14] = n13 * n22 * n41 - n12 * n23 * n41 - n13 * n21 * n42 + n11 * n23 * n42 + n12 * n21 * n43 - n11 * n22 * n43;
        data[15] = n12 * n23 * n31 - n13 * n22 * n31 + n13 * n21 * n32 - n11 * n23 * n32 - n12 * n21 * n33 + n11 * n22 * n33;
        target.setData(data);
        target.scalar(1 / det);
        return target;
    };
    Matrix3D.prototype.setCSS = function (cssString) {
        if (!cssString || cssString == 'none')
            return this.identity();
        var trans = cssString.replace('matrix3d(', '').replace('matrix(', '').replace(')', '').split(',');
        var l = trans.length;
        for (var i = 0; i < l; ++i) {
            trans[i] = _css_number__WEBPACK_IMPORTED_MODULE_0__["CSSNumber"].parse(trans[i]);
        }
        return this.setData(trans);
    };
    Matrix3D.prototype.appendCSS = function (cssString, force2D) {
        if (force2D === void 0) { force2D = false; }
        if (!cssString || cssString == 'none')
            return this;
        if (force2D && cssString.indexOf('matrix3d') >= 0) {
            return this.append(Matrix3D.MATRIX3D.setCSS(cssString).flatten());
        }
        return this.append(Matrix3D.MATRIX3D.setCSS(cssString));
    };
    Matrix3D.prototype.flatten = function () {
        this.m31 = 0;
        this.m32 = 0;
        this.m33 = 1;
        this.m34 = 0;
        this.m44 = 1;
        this.m14 = 0;
        this.m24 = 0;
        this.m43 = 0;
        return this;
    };
    Matrix3D.multiply = function (a, b, ret) {
        if (ret === void 0) { ret = new Matrix3D(); }
        var m11 = a.m11 * b.m11 + a.m12 * b.m21 + a.m13 * b.m31 + a.m14 * b.m41;
        var m12 = a.m11 * b.m12 + a.m12 * b.m22 + a.m13 * b.m32 + a.m14 * b.m42;
        var m13 = a.m11 * b.m13 + a.m12 * b.m23 + a.m13 * b.m33 + a.m14 * b.m43;
        var m14 = a.m11 * b.m14 + a.m12 * b.m24 + a.m13 * b.m34 + a.m14 * b.m44;
        var m21 = a.m21 * b.m11 + a.m22 * b.m21 + a.m23 * b.m31 + a.m24 * b.m41;
        var m22 = a.m21 * b.m12 + a.m22 * b.m22 + a.m23 * b.m32 + a.m24 * b.m42;
        var m23 = a.m21 * b.m13 + a.m22 * b.m23 + a.m23 * b.m33 + a.m24 * b.m43;
        var m24 = a.m21 * b.m14 + a.m22 * b.m24 + a.m23 * b.m34 + a.m24 * b.m44;
        var m31 = a.m31 * b.m11 + a.m32 * b.m21 + a.m33 * b.m31 + a.m34 * b.m41;
        var m32 = a.m31 * b.m12 + a.m32 * b.m22 + a.m33 * b.m32 + a.m34 * b.m42;
        var m33 = a.m31 * b.m13 + a.m32 * b.m23 + a.m33 * b.m33 + a.m34 * b.m43;
        var m34 = a.m31 * b.m14 + a.m32 * b.m24 + a.m33 * b.m34 + a.m34 * b.m44;
        var m41 = a.m41 * b.m11 + a.m42 * b.m21 + a.m43 * b.m31 + a.m44 * b.m41;
        var m42 = a.m41 * b.m12 + a.m42 * b.m22 + a.m43 * b.m32 + a.m44 * b.m42;
        var m43 = a.m41 * b.m13 + a.m42 * b.m23 + a.m43 * b.m33 + a.m44 * b.m43;
        var m44 = a.m41 * b.m14 + a.m42 * b.m24 + a.m43 * b.m34 + a.m44 * b.m44;
        ret.m11 = m11;
        ret.m12 = m12;
        ret.m13 = m13;
        ret.m14 = m14;
        ret.m21 = m21;
        ret.m22 = m22;
        ret.m23 = m23;
        ret.m24 = m24;
        ret.m31 = m31;
        ret.m32 = m32;
        ret.m33 = m33;
        ret.m34 = m34;
        ret.m41 = m41;
        ret.m42 = m42;
        ret.m43 = m43;
        ret.m44 = m44;
        return ret;
    };
    Matrix3D.prototype.toString = function (fractionalDigits) {
        if (fractionalDigits === void 0) { fractionalDigits = 3; }
        return "m11=" + this.m11.toFixed(fractionalDigits)
            + "\tm21=" + this.m21.toFixed(fractionalDigits)
            + "\tm31=" + this.m31.toFixed(fractionalDigits)
            + "\tm41=" + this.m41.toFixed(fractionalDigits)
            + "\nm12=" + this.m12.toFixed(fractionalDigits)
            + "\tm22=" + this.m22.toFixed(fractionalDigits)
            + "\tm32=" + this.m32.toFixed(fractionalDigits)
            + "\tm42=" + this.m42.toFixed(fractionalDigits)
            + "\nm13=" + this.m13.toFixed(fractionalDigits)
            + "\tm23=" + this.m23.toFixed(fractionalDigits)
            + "\tm33=" + this.m33.toFixed(fractionalDigits)
            + "\tm43=" + this.m43.toFixed(fractionalDigits)
            + "\nm14=" + this.m14.toFixed(fractionalDigits)
            + "\tm24=" + this.m24.toFixed(fractionalDigits)
            + "\tm34=" + this.m34.toFixed(fractionalDigits)
            + "\tm44=" + this.m44.toFixed(fractionalDigits);
    };
    Matrix3D.MATRIX3D = new Matrix3D();
    return Matrix3D;
}());



/***/ }),

/***/ "mAmu":
/*!******************************************************************************!*\
  !*** ./src/app/component/chat-color-setting/chat-color-setting.component.ts ***!
  \******************************************************************************/
/*! exports provided: ChatColorSettingComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ChatColorSettingComponent", function() { return ChatColorSettingComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "fXoL");
/* harmony import */ var _udonarium_peer_cursor__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @udonarium/peer-cursor */ "+UEV");
/* harmony import */ var service_panel_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! service/panel.service */ "M9xM");
/* harmony import */ var service_modal_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! service/modal.service */ "CE6K");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @angular/forms */ "3Pt+");






var ChatColorSettingComponent = /** @class */ (function () {
    function ChatColorSettingComponent(changeDetector, panelService, modalService) {
        this.changeDetector = changeDetector;
        this.panelService = panelService;
        this.modalService = modalService;
        this.isAllowedEmpty = false;
        this.tabletopObject = null;
        this.isAllowedEmpty = this.modalService.option && this.modalService.option.isAllowedEmpty ? true : false;
    }
    Object.defineProperty(ChatColorSettingComponent.prototype, "myPeer", {
        get: function () { return _udonarium_peer_cursor__WEBPACK_IMPORTED_MODULE_1__["PeerCursor"].myCursor; },
        enumerable: false,
        configurable: true
    });
    ChatColorSettingComponent.prototype.changeColor = function (event, num) {
        if (this.tabletopObject) {
            this.tabletopObject.chatColorCode[num] = event;
            if (this.tabletopObject.syncDummyCounter < 2) {
                this.tabletopObject.syncDummyCounter = this.tabletopObject.syncDummyCounter + 1;
            }
            else {
                this.tabletopObject.syncDummyCounter = 0;
            }
            console.log('changeColor:count:' + this.tabletopObject.syncDummyCounter);
        }
        else {
            this.myPeer.chatColorCode[num] = event;
        }
    };
    ChatColorSettingComponent.prototype.ngOnInit = function () {
    };
    ChatColorSettingComponent.prototype.chatColorCode = function (num) {
        if (this.tabletopObject) {
            return this.tabletopObject.chatColorCode[num];
        }
        else {
            return this.myPeer.chatColorCode[num];
        }
    };
    ChatColorSettingComponent.prototype.ngAfterViewInit = function () {
    };
    ChatColorSettingComponent.prototype.ngOnDestroy = function () {
        //    EventSystem.unregister(this);
    };
    ChatColorSettingComponent.ɵfac = function ChatColorSettingComponent_Factory(t) { return new (t || ChatColorSettingComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["ChangeDetectorRef"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](service_panel_service__WEBPACK_IMPORTED_MODULE_2__["PanelService"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](service_modal_service__WEBPACK_IMPORTED_MODULE_3__["ModalService"])); };
    ChatColorSettingComponent.ɵcmp = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineComponent"]({ type: ChatColorSettingComponent, selectors: [["chat-color-setting"]], inputs: { isAllowedEmpty: "isAllowedEmpty", tabletopObject: "tabletopObject" }, decls: 62, vars: 3, consts: [["id", "file-list"], [1, "table"], [1, "table-cell"], ["type", "color", "name", "color01", "list", "color-list_01", 3, "value", "change"], ["id", "color-list_01"], ["value", "#000000"], ["value", "#FF0000"], ["value", "#999999"], ["value", "#990000"], ["value", "#FF6633"], ["value", "#669933"], ["value", "#00CC33"], ["value", "#009966"], ["value", "#33CCFF"], ["value", "#0099FF"], ["value", "#3366FF"], ["value", "#003399"], ["value", "#9933CC"], ["value", "#663366"], ["value", "#FF66FF"], ["type", "color", "name", "color02", "list", "color-list_02", 3, "value", "change"], ["id", "color-list_02"], ["type", "color", "name", "color03", "list", "color-list_03", 3, "value", "change"], ["id", "color-list_03"]], template: function ChatColorSettingComponent_Template(rf, ctx) { if (rf & 1) {
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 0);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "div", 1);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](2, "div", 2);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](3, "div");
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](4, "\u7B2C1\u8272");
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](5, "input", 3);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("change", function ChatColorSettingComponent_Template_input_change_5_listener($event) { return ctx.changeColor($event.target.value, 0); });
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](6, "datalist", 4);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](7, "option", 5);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](8, "option", 6);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](9, "option", 7);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](10, "option", 8);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](11, "option", 9);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](12, "option", 10);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](13, "option", 11);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](14, "option", 12);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](15, "option", 13);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](16, "option", 14);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](17, "option", 15);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](18, "option", 16);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](19, "option", 17);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](20, "option", 18);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](21, "option", 19);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](22, "div", 2);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](23, "div");
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](24, "\u7B2C2\u8272");
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](25, "input", 20);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("change", function ChatColorSettingComponent_Template_input_change_25_listener($event) { return ctx.changeColor($event.target.value, 1); });
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](26, "datalist", 21);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](27, "option", 5);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](28, "option", 6);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](29, "option", 7);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](30, "option", 8);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](31, "option", 9);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](32, "option", 10);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](33, "option", 11);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](34, "option", 12);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](35, "option", 13);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](36, "option", 14);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](37, "option", 15);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](38, "option", 16);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](39, "option", 17);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](40, "option", 18);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](41, "option", 19);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](42, "div", 2);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](43, "div");
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](44, "\u7B2C3\u8272");
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](45, "input", 22);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("change", function ChatColorSettingComponent_Template_input_change_45_listener($event) { return ctx.changeColor($event.target.value, 2); });
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](46, "datalist", 23);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](47, "option", 5);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](48, "option", 6);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](49, "option", 7);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](50, "option", 8);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](51, "option", 9);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](52, "option", 10);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](53, "option", 11);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](54, "option", 12);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](55, "option", 13);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](56, "option", 14);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](57, "option", 15);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](58, "option", 16);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](59, "option", 17);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](60, "option", 18);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](61, "option", 19);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        } if (rf & 2) {
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](5);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpropertyInterpolate"]("value", ctx.chatColorCode(0));
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](20);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpropertyInterpolate"]("value", ctx.chatColorCode(1));
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](20);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpropertyInterpolate"]("value", ctx.chatColorCode(2));
        } }, directives: [_angular_forms__WEBPACK_IMPORTED_MODULE_4__["NgSelectOption"], _angular_forms__WEBPACK_IMPORTED_MODULE_4__["ɵangular_packages_forms_forms_x"]], styles: [".table[_ngcontent-%COMP%] {\r\n  box-sizing: border-box;\r\n  padding : 5px;\r\n  \r\n  \r\n  display: table;\r\n  \r\n  width: 100%;\r\n}\r\n\r\n.table[_ngcontent-%COMP%]   .table-cell[_ngcontent-%COMP%] {\r\n  display: table-cell;\r\n}\r\n\r\ninput[_ngcontent-%COMP%]{\r\n  width:5em;\r\n}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNoYXQtY29sb3Itc2V0dGluZy5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0Usc0JBQXNCO0VBQ3RCLGFBQWE7RUFDYixvQkFBb0I7RUFDcEIsY0FBYztFQUNkLGNBQWM7RUFDZCw0QkFBNEI7RUFDNUIsV0FBVztBQUNiOztBQUVBO0VBQ0UsbUJBQW1CO0FBQ3JCOztBQUVBO0VBQ0UsU0FBUztBQUNYIiwiZmlsZSI6ImNoYXQtY29sb3Itc2V0dGluZy5jb21wb25lbnQuY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLnRhYmxlIHtcclxuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xyXG4gIHBhZGRpbmcgOiA1cHg7XHJcbiAgLypwb3NpdGlvbiA6IGZpeGVkOyovXHJcbiAgLypib3R0b20gOiAwOyovXHJcbiAgZGlzcGxheTogdGFibGU7XHJcbiAgLyp3aWR0aDogY2FsYygxMDAlIC0gMzBweCk7Ki9cclxuICB3aWR0aDogMTAwJTtcclxufVxyXG5cclxuLnRhYmxlIC50YWJsZS1jZWxsIHtcclxuICBkaXNwbGF5OiB0YWJsZS1jZWxsO1xyXG59XHJcblxyXG5pbnB1dHtcclxuICB3aWR0aDo1ZW07XHJcbn1cclxuIl19 */"], changeDetection: 0 });
    return ChatColorSettingComponent;
}());

/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](ChatColorSettingComponent, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"],
        args: [{
                selector: 'chat-color-setting',
                templateUrl: './chat-color-setting.component.html',
                styleUrls: ['./chat-color-setting.component.css'],
                changeDetection: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ChangeDetectionStrategy"].OnPush
            }]
    }], function () { return [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ChangeDetectorRef"] }, { type: service_panel_service__WEBPACK_IMPORTED_MODULE_2__["PanelService"] }, { type: service_modal_service__WEBPACK_IMPORTED_MODULE_3__["ModalService"] }]; }, { isAllowedEmpty: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], tabletopObject: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }] }); })();


/***/ }),

/***/ "pCHt":
/*!**************************************************!*\
  !*** ./src/app/directive/resizable.directive.ts ***!
  \**************************************************/
/*! exports provided: ResizableDirective */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ResizableDirective", function() { return ResizableDirective; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "fXoL");
/* harmony import */ var _udonarium_transform_css_number__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @udonarium/transform/css-number */ "zAbn");
/* harmony import */ var _resize_handler__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./resize-handler */ "5zlT");




var ResizableDirective = /** @class */ (function () {
    function ResizableDirective(ngZone, elementRef) {
        this.ngZone = ngZone;
        this.elementRef = elementRef;
        this.isDisable = false;
        this.boundsSelector = 'body';
        this.minWidth = 100;
        this.minHeight = 100;
        this.ostart = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        this.onmove = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        this.onend = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        this.handleMap = new Map();
        this.handleTypes = [
            _resize_handler__WEBPACK_IMPORTED_MODULE_2__["HandleType"].N,
            _resize_handler__WEBPACK_IMPORTED_MODULE_2__["HandleType"].E,
            _resize_handler__WEBPACK_IMPORTED_MODULE_2__["HandleType"].W,
            _resize_handler__WEBPACK_IMPORTED_MODULE_2__["HandleType"].S,
            _resize_handler__WEBPACK_IMPORTED_MODULE_2__["HandleType"].NE,
            _resize_handler__WEBPACK_IMPORTED_MODULE_2__["HandleType"].NW,
            _resize_handler__WEBPACK_IMPORTED_MODULE_2__["HandleType"].SE,
            _resize_handler__WEBPACK_IMPORTED_MODULE_2__["HandleType"].SW
        ];
        this.startPosition = { left: 0, top: 0, width: 0, height: 0 };
        this.startPointer = { x: 0, y: 0, z: 0 };
        this.prevTrans = { left: 0, top: 0, width: 0, height: 0 };
    }
    ResizableDirective.prototype.ngAfterViewInit = function () {
        this.initialize();
    };
    ResizableDirective.prototype.ngOnDestroy = function () {
        this.cancel();
        this.destroy();
    };
    ResizableDirective.prototype.initialize = function () {
        var _this = this;
        this.ngZone.runOutsideAngular(function () {
            _this.handleTypes.forEach(function (type) {
                var handle = new _resize_handler__WEBPACK_IMPORTED_MODULE_2__["ResizeHandler"](_this.elementRef.nativeElement, type);
                _this.handleMap.set(type, handle);
                handle.input.onStart = function (ev) { return _this.onResizeStart(ev, handle); };
                handle.input.onMove = function (ev) { return _this.onResizeMove(ev, handle); };
                handle.input.onEnd = function (ev) { return _this.onResizeEnd(ev, handle); };
                handle.input.onContextMenu = function (ev) { return _this.onContextMenu(ev, handle); };
            });
        });
    };
    ResizableDirective.prototype.cancel = function () {
        this.handleMap.forEach(function (handle) { return handle.input.cancel(); });
    };
    ResizableDirective.prototype.destroy = function () {
        this.handleMap.forEach(function (handle) { return handle.input.destroy(); });
    };
    ResizableDirective.prototype.onResizeStart = function (e, handle) {
        if (this.isDisable)
            return this.cancel();
        if (e.button === 1 || e.button === 2)
            return this.cancel();
        this.handleMap.forEach(function (h) {
            if (h !== handle)
                h.input.cancel();
        });
        this.startPosition = this.calcElementPosition(this.elementRef.nativeElement);
        this.startPointer = handle.input.pointer;
        this.prevTrans = { left: 0, top: 0, width: 0, height: 0 };
        e.stopPropagation();
    };
    ResizableDirective.prototype.onResizeMove = function (e, handle) {
        var trans = {
            left: 0,
            top: 0,
            width: handle.input.pointer.x - this.startPointer.x,
            height: handle.input.pointer.y - this.startPointer.y
        };
        switch (handle.type) {
            case _resize_handler__WEBPACK_IMPORTED_MODULE_2__["HandleType"].N:
            case _resize_handler__WEBPACK_IMPORTED_MODULE_2__["HandleType"].S:
                trans.width = 0;
                break;
            case _resize_handler__WEBPACK_IMPORTED_MODULE_2__["HandleType"].E:
            case _resize_handler__WEBPACK_IMPORTED_MODULE_2__["HandleType"].W:
                trans.height = 0;
                break;
        }
        switch (handle.type) {
            case _resize_handler__WEBPACK_IMPORTED_MODULE_2__["HandleType"].SW:
                trans.left = trans.width;
                trans.width *= -1;
                break;
            case _resize_handler__WEBPACK_IMPORTED_MODULE_2__["HandleType"].NE:
                trans.top = trans.height;
                trans.height *= -1;
                break;
            case _resize_handler__WEBPACK_IMPORTED_MODULE_2__["HandleType"].E:
            case _resize_handler__WEBPACK_IMPORTED_MODULE_2__["HandleType"].S:
            case _resize_handler__WEBPACK_IMPORTED_MODULE_2__["HandleType"].SE:
                break;
            case _resize_handler__WEBPACK_IMPORTED_MODULE_2__["HandleType"].N:
            case _resize_handler__WEBPACK_IMPORTED_MODULE_2__["HandleType"].W:
            case _resize_handler__WEBPACK_IMPORTED_MODULE_2__["HandleType"].NW:
                trans.left = trans.width;
                trans.top = trans.height;
                trans.width *= -1;
                trans.height *= -1;
                break;
        }
        if (trans.width + this.startPosition.width < this.minWidth) {
            trans.width = this.minWidth - this.startPosition.width;
            trans.left = trans.left !== 0 ? -trans.width : trans.left;
        }
        if (trans.height + this.startPosition.height < this.minHeight) {
            trans.height = this.minHeight - this.startPosition.height;
            trans.top = trans.top !== 0 ? -trans.height : trans.top;
        }
        var diff = {
            left: trans.left - this.prevTrans.left,
            top: trans.top - this.prevTrans.top,
            width: trans.width - this.prevTrans.width,
            height: trans.height - this.prevTrans.height
        };
        var correction = this.calcCorrectionPosition(diff);
        trans.left += correction.left;
        trans.top += correction.top;
        trans.width += correction.width;
        trans.height += correction.height;
        this.elementRef.nativeElement.style.left = trans.left + this.startPosition.left + 'px';
        this.elementRef.nativeElement.style.top = trans.top + this.startPosition.top + 'px';
        this.elementRef.nativeElement.style.width = trans.width + this.startPosition.width + 'px';
        this.elementRef.nativeElement.style.height = trans.height + this.startPosition.height + 'px';
        this.prevTrans = trans;
        if (e.cancelable)
            e.preventDefault();
        e.stopPropagation();
    };
    ResizableDirective.prototype.onResizeEnd = function (e, handle) {
        if (handle.input.isDragging && e.cancelable)
            e.preventDefault();
        e.stopPropagation();
    };
    ResizableDirective.prototype.onContextMenu = function (e, handle) {
        e.stopPropagation();
    };
    ResizableDirective.prototype.calcCorrectionPosition = function (diff) {
        if (diff === void 0) { diff = { left: 0, top: 0, width: 0, height: 0 }; }
        var correction = { left: 0, top: 0, width: 0, height: 0 };
        var box = this.elementRef.nativeElement.getBoundingClientRect();
        var bounds = this.elementRef.nativeElement.ownerDocument.querySelector(this.boundsSelector).getBoundingClientRect();
        if (bounds.right < box.right + diff.left + diff.width) {
            correction.width += bounds.right - (box.right + diff.left + diff.width);
        }
        if (box.left + diff.left < bounds.left) {
            correction.left += bounds.left - (box.left + diff.left);
            correction.width -= correction.left;
        }
        if (bounds.bottom < box.bottom + diff.top + diff.height) {
            correction.height += bounds.bottom - (box.bottom + diff.top + diff.height);
        }
        if (box.top + diff.top < bounds.top) {
            correction.top += bounds.top - (box.top + diff.top);
            correction.height -= correction.top;
        }
        return correction;
    };
    ResizableDirective.prototype.calcElementPosition = function (target) {
        var css = window.getComputedStyle(target);
        return {
            left: _udonarium_transform_css_number__WEBPACK_IMPORTED_MODULE_1__["CSSNumber"].relation(css.left, target.parentElement.offsetWidth, target.parentElement.offsetWidth * 0.5),
            top: _udonarium_transform_css_number__WEBPACK_IMPORTED_MODULE_1__["CSSNumber"].relation(css.top, target.parentElement.offsetHeight, target.parentElement.offsetHeight * 0.5),
            width: _udonarium_transform_css_number__WEBPACK_IMPORTED_MODULE_1__["CSSNumber"].relation(css.width, target.parentElement.offsetWidth, target.parentElement.offsetWidth * 0.5),
            height: _udonarium_transform_css_number__WEBPACK_IMPORTED_MODULE_1__["CSSNumber"].relation(css.height, target.parentElement.offsetHeight, target.parentElement.offsetHeight * 0.5),
        };
    };
    ResizableDirective.ɵfac = function ResizableDirective_Factory(t) { return new (t || ResizableDirective)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["NgZone"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["ElementRef"])); };
    ResizableDirective.ɵdir = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineDirective"]({ type: ResizableDirective, selectors: [["", "appResizable", ""]], inputs: { isDisable: ["resizable.disable", "isDisable"], boundsSelector: ["resizable.bounds", "boundsSelector"], minWidth: ["resizable.minWidth", "minWidth"], minHeight: ["resizable.minHeight", "minHeight"] }, outputs: { ostart: "resizable.start", onmove: "resizable.move", onend: "resizable.end" } });
    return ResizableDirective;
}());

/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](ResizableDirective, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Directive"],
        args: [{
                selector: '[appResizable]'
            }]
    }], function () { return [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["NgZone"] }, { type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ElementRef"] }]; }, { isDisable: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"],
            args: ['resizable.disable']
        }], boundsSelector: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"],
            args: ['resizable.bounds']
        }], minWidth: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"],
            args: ['resizable.minWidth']
        }], minHeight: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"],
            args: ['resizable.minHeight']
        }], ostart: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"],
            args: ['resizable.start']
        }], onmove: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"],
            args: ['resizable.move']
        }], onend: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"],
            args: ['resizable.end']
        }] }); })();


/***/ }),

/***/ "pVQh":
/*!**************************************************!*\
  !*** ./src/app/class/core/system/util/base-x.ts ***!
  \**************************************************/
/*! exports provided: base */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "base", function() { return base; });
// base-x encoding / decoding
// Copyright (c) 2018 base-x contributors
// Copyright (c) 2014-2018 The Bitcoin Core developers (base58.cpp)
// Distributed under the MIT software license, see the accompanying
// file LICENSE or http://www.opensource.org/licenses/mit-license.php.
// https://github.com/cryptocoinjs/base-x
function base(ALPHABET) {
    if (ALPHABET.length >= 255)
        throw new TypeError('Alphabet too long');
    var BASE_MAP = new Uint8Array(256);
    for (var j = 0; j < BASE_MAP.length; j++) {
        BASE_MAP[j] = 255;
    }
    for (var i = 0; i < ALPHABET.length; i++) {
        var x = ALPHABET.charAt(i);
        var xc = x.charCodeAt(0);
        if (BASE_MAP[xc] !== 255)
            throw new TypeError(x + ' is ambiguous');
        BASE_MAP[xc] = i;
    }
    var BASE = ALPHABET.length;
    var LEADER = ALPHABET.charAt(0);
    var FACTOR = Math.log(BASE) / Math.log(256); // log(BASE) / log(256), rounded up
    var iFACTOR = Math.log(256) / Math.log(BASE); // log(256) / log(BASE), rounded up
    function encode(source) {
        if (source instanceof Uint8Array) {
        }
        else if (ArrayBuffer.isView(source)) {
            source = new Uint8Array(source.buffer, source.byteOffset, source.byteLength);
        }
        else if (Array.isArray(source)) {
            source = Uint8Array.from(source);
        }
        if (!(source instanceof Uint8Array))
            throw new TypeError('Expected Uint8Array');
        if (source.length === 0)
            return '';
        // Skip & count leading zeroes.
        var zeroes = 0;
        var length = 0;
        var pbegin = 0;
        var pend = source.length;
        while (pbegin !== pend && source[pbegin] === 0) {
            pbegin++;
            zeroes++;
        }
        // Allocate enough space in big-endian base58 representation.
        var size = ((pend - pbegin) * iFACTOR + 1) >>> 0;
        var b58 = new Uint8Array(size);
        // Process the bytes.
        while (pbegin !== pend) {
            var carry = source[pbegin];
            // Apply "b58 = b58 * 256 + ch".
            var i = 0;
            for (var it1 = size - 1; (carry !== 0 || i < length) && (it1 !== -1); it1--, i++) {
                carry += (256 * b58[it1]) >>> 0;
                b58[it1] = (carry % BASE) >>> 0;
                carry = (carry / BASE) >>> 0;
            }
            if (carry !== 0)
                throw new Error('Non-zero carry');
            length = i;
            pbegin++;
        }
        // Skip leading zeroes in base58 result.
        var it2 = size - length;
        while (it2 !== size && b58[it2] === 0) {
            it2++;
        }
        // Translate the result into a string.
        var str = LEADER.repeat(zeroes);
        for (; it2 < size; ++it2)
            str += ALPHABET.charAt(b58[it2]);
        return str;
    }
    function decodeUnsafe(source) {
        if (typeof source !== 'string')
            throw new TypeError('Expected String');
        if (source.length === 0)
            return new Uint8Array();
        var psz = 0;
        // Skip leading spaces.
        if (source[psz] === ' ')
            return;
        // Skip and count leading '1's.
        var zeroes = 0;
        var length = 0;
        while (source[psz] === LEADER) {
            zeroes++;
            psz++;
        }
        // Allocate enough space in big-endian base256 representation.
        var size = (((source.length - psz) * FACTOR) + 1) >>> 0; // log(58) / log(256), rounded up.
        var b256 = new Uint8Array(size);
        // Process the characters.
        while (source[psz]) {
            // Decode character
            var carry = BASE_MAP[source.charCodeAt(psz)];
            // Invalid character
            if (carry === 255)
                return;
            var i = 0;
            for (var it3 = size - 1; (carry !== 0 || i < length) && (it3 !== -1); it3--, i++) {
                carry += (BASE * b256[it3]) >>> 0;
                b256[it3] = (carry % 256) >>> 0;
                carry = (carry / 256) >>> 0;
            }
            if (carry !== 0)
                throw new Error('Non-zero carry');
            length = i;
            psz++;
        }
        // Skip trailing spaces.
        if (source[psz] === ' ')
            return;
        // Skip leading zeroes in b256.
        var it4 = size - length;
        while (it4 !== size && b256[it4] === 0) {
            it4++;
        }
        var vch = new Uint8Array(zeroes + (size - it4));
        var j = zeroes;
        while (it4 !== size) {
            vch[j++] = b256[it4++];
        }
        return vch;
    }
    function decode(string) {
        var buffer = decodeUnsafe(string);
        if (buffer)
            return buffer;
        throw new Error('Non-base' + BASE + ' character');
    }
    return {
        encode: encode,
        decodeUnsafe: decodeUnsafe,
        decode: decode
    };
}


/***/ }),

/***/ "pY18":
/*!**********************************************************************!*\
  !*** ./src/app/component/password-check/password-check.component.ts ***!
  \**********************************************************************/
/*! exports provided: PasswordCheckComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PasswordCheckComponent", function() { return PasswordCheckComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "fXoL");
/* harmony import */ var _udonarium_core_system__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @udonarium/core/system */ "yNnI");
/* harmony import */ var _udonarium_core_system_network_peer_context__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @udonarium/core/system/network/peer-context */ "ztsr");
/* harmony import */ var service_panel_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! service/panel.service */ "M9xM");
/* harmony import */ var service_modal_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! service/modal.service */ "CE6K");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @angular/forms */ "3Pt+");







var _c0 = function () { return { standalone: true }; };
var PasswordCheckComponent = /** @class */ (function () {
    function PasswordCheckComponent(panelService, modalService) {
        this.panelService = panelService;
        this.modalService = modalService;
        this.password = '';
        this.help = '';
        this.targetPeerContext = null;
        this.title = '';
        this.targetPeerContext = modalService.option.peerId ? _udonarium_core_system_network_peer_context__WEBPACK_IMPORTED_MODULE_2__["PeerContext"].parse(modalService.option.peerId) : _udonarium_core_system_network_peer_context__WEBPACK_IMPORTED_MODULE_2__["PeerContext"].parse('???');
        this.title = modalService.option.title ? modalService.option.title : '';
    }
    Object.defineProperty(PasswordCheckComponent.prototype, "peerId", {
        get: function () { return _udonarium_core_system__WEBPACK_IMPORTED_MODULE_1__["Network"].peerId; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(PasswordCheckComponent.prototype, "isConnected", {
        get: function () {
            return _udonarium_core_system__WEBPACK_IMPORTED_MODULE_1__["Network"].peerIds.length <= 1 ? false : true;
        },
        enumerable: false,
        configurable: true
    });
    PasswordCheckComponent.prototype.ngOnInit = function () {
        var _this = this;
        Promise.resolve().then(function () { return _this.modalService.title = _this.panelService.title = "\u30D1\u30B9\u30EF\u30FC\u30C9 \uFF1C" + _this.title + "\uFF1E"; });
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_1__["EventSystem"].register(this);
    };
    PasswordCheckComponent.prototype.ngOnDestroy = function () {
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_1__["EventSystem"].unregister(this);
    };
    PasswordCheckComponent.prototype.onInputChange = function (value) {
        this.help = '';
    };
    PasswordCheckComponent.prototype.submit = function () {
        if (this.targetPeerContext.verifyPassword(this.password))
            this.modalService.resolve(this.password);
        this.help = 'パスワードが違います';
    };
    PasswordCheckComponent.ɵfac = function PasswordCheckComponent_Factory(t) { return new (t || PasswordCheckComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](service_panel_service__WEBPACK_IMPORTED_MODULE_3__["PanelService"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](service_modal_service__WEBPACK_IMPORTED_MODULE_4__["ModalService"])); };
    PasswordCheckComponent.ɵcmp = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineComponent"]({ type: PasswordCheckComponent, selectors: [["password-check"]], decls: 10, vars: 4, consts: [["passwordForm", "ngForm"], ["placeholder", "\u30D1\u30B9\u30EF\u30FC\u30C9", 3, "ngModel", "ngModelOptions", "ngModelChange", "input"], ["type", "submit", 3, "click"], [2, "font-size", "12px"]], template: function PasswordCheckComponent_Template(rf, ctx) { if (rf & 1) {
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "form", null, 0);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](2, "div");
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](3, "\u5BC6\u78BC: ");
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](4, "input", 1);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("ngModelChange", function PasswordCheckComponent_Template_input_ngModelChange_4_listener($event) { return ctx.password = $event; })("input", function PasswordCheckComponent_Template_input_input_4_listener($event) { return ctx.onInputChange($event.target.value); });
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](5, "button", 2);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function PasswordCheckComponent_Template_button_click_5_listener() { return ctx.submit(); });
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](6, "\u5165\u5BA4");
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](7, "div");
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](8, "span", 3);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](9);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        } if (rf & 2) {
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](4);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngModel", ctx.password)("ngModelOptions", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction0"](3, _c0));
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](5);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate"](ctx.help);
        } }, directives: [_angular_forms__WEBPACK_IMPORTED_MODULE_5__["ɵangular_packages_forms_forms_y"], _angular_forms__WEBPACK_IMPORTED_MODULE_5__["NgControlStatusGroup"], _angular_forms__WEBPACK_IMPORTED_MODULE_5__["NgForm"], _angular_forms__WEBPACK_IMPORTED_MODULE_5__["DefaultValueAccessor"], _angular_forms__WEBPACK_IMPORTED_MODULE_5__["NgControlStatus"], _angular_forms__WEBPACK_IMPORTED_MODULE_5__["NgModel"]], styles: [".box[_ngcontent-%COMP%] {\r\n  border-bottom:1px dotted #888;\r\n}\r\n.image[_ngcontent-%COMP%] {\r\n  padding: 0px;\r\n  width: 64px;\r\n  height: 64px;\r\n  display: inline-block;\r\n  vertical-align: top;\r\n}\r\n.contain[_ngcontent-%COMP%] {\r\n  background-position: center center;\r\n  background-repeat: no-repeat;\r\n  background-size: contain;\r\n}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBhc3N3b3JkLWNoZWNrLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSw2QkFBNkI7QUFDL0I7QUFDQTtFQUNFLFlBQVk7RUFDWixXQUFXO0VBQ1gsWUFBWTtFQUNaLHFCQUFxQjtFQUNyQixtQkFBbUI7QUFDckI7QUFFQTtFQUNFLGtDQUFrQztFQUNsQyw0QkFBNEI7RUFDNUIsd0JBQXdCO0FBQzFCIiwiZmlsZSI6InBhc3N3b3JkLWNoZWNrLmNvbXBvbmVudC5jc3MiLCJzb3VyY2VzQ29udGVudCI6WyIuYm94IHtcclxuICBib3JkZXItYm90dG9tOjFweCBkb3R0ZWQgIzg4ODtcclxufVxyXG4uaW1hZ2Uge1xyXG4gIHBhZGRpbmc6IDBweDtcclxuICB3aWR0aDogNjRweDtcclxuICBoZWlnaHQ6IDY0cHg7XHJcbiAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xyXG4gIHZlcnRpY2FsLWFsaWduOiB0b3A7XHJcbn1cclxuXHJcbi5jb250YWluIHtcclxuICBiYWNrZ3JvdW5kLXBvc2l0aW9uOiBjZW50ZXIgY2VudGVyO1xyXG4gIGJhY2tncm91bmQtcmVwZWF0OiBuby1yZXBlYXQ7XHJcbiAgYmFja2dyb3VuZC1zaXplOiBjb250YWluO1xyXG59Il19 */"] });
    return PasswordCheckComponent;
}());

/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](PasswordCheckComponent, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"],
        args: [{
                selector: 'password-check',
                templateUrl: './password-check.component.html',
                styleUrls: ['./password-check.component.css']
            }]
    }], function () { return [{ type: service_panel_service__WEBPACK_IMPORTED_MODULE_3__["PanelService"] }, { type: service_modal_service__WEBPACK_IMPORTED_MODULE_4__["ModalService"] }]; }, null); })();


/***/ }),

/***/ "pq3H":
/*!*********************************!*\
  !*** ./src/app/class/cut-in.ts ***!
  \*********************************/
/*! exports provided: CutIn */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CutIn", function() { return CutIn; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "mrSG");
/* harmony import */ var _core_file_storage_audio_player__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./core/file-storage/audio-player */ "zeEm");
/* harmony import */ var _core_file_storage_audio_storage__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./core/file-storage/audio-storage */ "Prh6");
/* harmony import */ var _core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./core/synchronize-object/decorator */ "1lIu");
/* harmony import */ var _core_synchronize_object_game_object__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./core/synchronize-object/game-object */ "xdgh");
/* harmony import */ var _udonarium_core_file_storage_image_file__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @udonarium/core/file-storage/image-file */ "FjwV");
/* harmony import */ var _udonarium_core_file_storage_image_storage__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @udonarium/core/file-storage/image-storage */ "JQpJ");







var CutIn = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"])(CutIn, _super);
    function CutIn() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.name = 'カットイン';
        _this.width = 480;
        _this.height = 320;
        _this.originalSize = true;
        _this.x_pos = 50;
        _this.y_pos = 50;
        // 主にジュークボックス機能を参考に作成
        _this.imageIdentifier = 'imageIdentifier';
        _this.audioIdentifier = '';
        _this.audioName = '';
        _this.startTime = 0;
        _this.tagName = '';
        _this.selected = false;
        _this.isLoop = false;
        _this.chatActivate = false;
        _this.outTime = 0;
        _this.useOutUrl = false;
        _this.outUrl = '';
        _this.isPlaying = false;
        _this.audioPlayer = new _core_file_storage_audio_player__WEBPACK_IMPORTED_MODULE_1__["AudioPlayer"]();
        return _this;
    }
    Object.defineProperty(CutIn.prototype, "audio", {
        get: function () { return _core_file_storage_audio_storage__WEBPACK_IMPORTED_MODULE_2__["AudioStorage"].instance.get(this.audioIdentifier); },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(CutIn.prototype, "cutInImage", {
        get: function () {
            if (!this.imageIdentifier) {
                return _udonarium_core_file_storage_image_file__WEBPACK_IMPORTED_MODULE_5__["ImageFile"].Empty;
            }
            var file = _udonarium_core_file_storage_image_storage__WEBPACK_IMPORTED_MODULE_6__["ImageStorage"].instance.get(this.imageIdentifier);
            return file ? file : _udonarium_core_file_storage_image_file__WEBPACK_IMPORTED_MODULE_5__["ImageFile"].Empty;
        },
        enumerable: false,
        configurable: true
    });
    // GameObject Lifecycle
    CutIn.prototype.onStoreAdded = function () {
        _super.prototype.onStoreAdded.call(this);
    };
    // GameObject Lifecycle
    CutIn.prototype.onStoreRemoved = function () {
        _super.prototype.onStoreRemoved.call(this);
    };
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_3__["SyncVar"])()
    ], CutIn.prototype, "name", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_3__["SyncVar"])()
    ], CutIn.prototype, "width", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_3__["SyncVar"])()
    ], CutIn.prototype, "height", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_3__["SyncVar"])()
    ], CutIn.prototype, "originalSize", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_3__["SyncVar"])()
    ], CutIn.prototype, "x_pos", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_3__["SyncVar"])()
    ], CutIn.prototype, "y_pos", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_3__["SyncVar"])()
    ], CutIn.prototype, "imageIdentifier", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_3__["SyncVar"])()
    ], CutIn.prototype, "audioIdentifier", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_3__["SyncVar"])()
    ], CutIn.prototype, "audioName", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_3__["SyncVar"])()
    ], CutIn.prototype, "startTime", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_3__["SyncVar"])()
    ], CutIn.prototype, "tagName", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_3__["SyncVar"])()
    ], CutIn.prototype, "selected", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_3__["SyncVar"])()
    ], CutIn.prototype, "isLoop", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_3__["SyncVar"])()
    ], CutIn.prototype, "chatActivate", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_3__["SyncVar"])()
    ], CutIn.prototype, "outTime", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_3__["SyncVar"])()
    ], CutIn.prototype, "useOutUrl", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_3__["SyncVar"])()
    ], CutIn.prototype, "outUrl", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_3__["SyncVar"])()
    ], CutIn.prototype, "isPlaying", void 0);
    CutIn = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_3__["SyncObject"])('cut-in')
    ], CutIn);
    return CutIn;
}(_core_synchronize_object_game_object__WEBPACK_IMPORTED_MODULE_4__["GameObject"]));



/***/ }),

/***/ "qBBt":
/*!******************************************************!*\
  !*** ./src/app/class/core/system/network/network.ts ***!
  \******************************************************/
/*! exports provided: Network */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Network", function() { return Network; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "mrSG");
/* harmony import */ var _util_zero_timeout__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../util/zero-timeout */ "eS09");
/* harmony import */ var _connection__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./connection */ "Hcv6");
/* harmony import */ var _peer_context__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./peer-context */ "ztsr");
/* harmony import */ var _skyway_connection__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./skyway-connection */ "jJIX");





var unknownContext = _peer_context__WEBPACK_IMPORTED_MODULE_3__["PeerContext"].parse('???');
var Network = /** @class */ (function () {
    function Network() {
        var _this = this;
        this.callback = new _connection__WEBPACK_IMPORTED_MODULE_2__["ConnectionCallback"]();
        this.key = '';
        this.queue = new Set();
        this.sendInterval = null;
        this.sendCallback = function () { _this.sendQueue(); };
        this.callbackUnload = function (e) { _this.close(); };
        console.log('Network ready...');
    }
    Object.defineProperty(Network, "instance", {
        get: function () {
            if (!Network._instance)
                Network._instance = new Network();
            return Network._instance;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Network.prototype, "peerId", {
        get: function () { return this.connection ? this.connection.peerId : unknownContext.peerId; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Network.prototype, "peerIds", {
        get: function () { return this.connection ? this.connection.peerIds.concat() : []; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Network.prototype, "peerContexts", {
        get: function () { return this.connection ? this.connection.peerContexts.concat() : []; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Network.prototype, "peerContext", {
        get: function () { return this.connection ? this.connection.peerContext : unknownContext; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Network.prototype, "isOpen", {
        get: function () { return this.connection && this.connection.peerContext ? this.connection.peerContext.isOpen : false; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Network.prototype, "bandwidthUsage", {
        get: function () { return this.connection ? this.connection.bandwidthUsage : 0; },
        enumerable: false,
        configurable: true
    });
    Network.prototype.open = function () {
        var args = [];
        for (var _i = 0; _i < arguments.length; _i++) {
            args[_i] = arguments[_i];
        }
        if (this.connection && this.connection.peerContext) {
            console.warn('It is already opened.');
            this.close();
        }
        console.log('Network open...', args);
        this.connection = this.initializeConnection();
        this.connection.open.apply(this.connection, args);
        window.addEventListener('unload', this.callbackUnload, false);
    };
    Network.prototype.close = function () {
        if (this.connection)
            this.connection.close();
        this.connection = null;
        window.removeEventListener('unload', this.callbackUnload, false);
        console.log('Network close...');
    };
    Network.prototype.connect = function (peerId) {
        if (this.connection)
            return this.connection.connect(peerId);
        return false;
    };
    Network.prototype.disconnect = function (peerId) {
        if (!this.connection)
            return;
        if (this.connection.disconnect(peerId)) {
            console.log('<disconnectPeer()> Peer:' + peerId);
            this.disconnect(peerId);
        }
    };
    Network.prototype.send = function (data, sendTo) {
        this.queue.add({ data: data, sendTo: sendTo });
        if (this.sendInterval === null) {
            this.sendInterval = Object(_util_zero_timeout__WEBPACK_IMPORTED_MODULE_1__["setZeroTimeout"])(this.sendCallback);
        }
    };
    Network.prototype.sendQueue = function () {
        var e_1, _a;
        var broadcast = [];
        var unicast = {};
        var echocast = [];
        var loopCount = this.queue.size < 128 ? this.queue.size : 128;
        try {
            for (var _b = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(this.queue), _c = _b.next(); !_c.done; _c = _b.next()) {
                var item = _c.value;
                if (loopCount <= 0)
                    break;
                loopCount--;
                this.queue.delete(item);
                if (item.sendTo == null) {
                    broadcast.push(item.data);
                }
                else if (item.sendTo === this.peerId) {
                    echocast.push(item.data);
                }
                else {
                    if (!(item.sendTo in unicast))
                        unicast[item.sendTo] = [];
                    unicast[item.sendTo].push(item.data);
                }
            }
        }
        catch (e_1_1) { e_1 = { error: e_1_1 }; }
        finally {
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            }
            finally { if (e_1) throw e_1.error; }
        }
        // できるだけ一纏めにして送る
        if (this.connection) {
            if (broadcast.length)
                this.connection.send(broadcast);
            for (var sendTo in unicast)
                this.connection.send(unicast[sendTo], sendTo);
        }
        // 自分自身への送信
        if (this.callback.onData) {
            this.callback.onData(null, broadcast);
            this.callback.onData(this.peerId, echocast);
        }
        if (0 < this.queue.size) {
            this.sendInterval = Object(_util_zero_timeout__WEBPACK_IMPORTED_MODULE_1__["setZeroTimeout"])(this.sendCallback);
        }
        else {
            this.sendInterval = null;
        }
    };
    Network.prototype.setApiKey = function (key) {
        if (this.key !== key)
            console.log('Key Change');
        this.key = key;
    };
    Network.prototype.listAllPeers = function () {
        return this.connection ? this.connection.listAllPeers() : Promise.resolve([]);
    };
    Network.prototype.initializeConnection = function () {
        var _this = this;
        var store = new _skyway_connection__WEBPACK_IMPORTED_MODULE_4__["SkyWayConnection"]();
        store.setApiKey(this.key);
        store.callback.onOpen = function (peerId) { if (_this.callback.onOpen)
            _this.callback.onOpen(peerId); };
        store.callback.onClose = function (peerId) { if (_this.callback.onClose)
            _this.callback.onClose(peerId); };
        store.callback.onConnect = function (peerId) { if (_this.callback.onConnect)
            _this.callback.onConnect(peerId); };
        store.callback.onDisconnect = function (peerId) { if (_this.callback.onDisconnect)
            _this.callback.onDisconnect(peerId); };
        store.callback.onData = function (peerId, data) { if (_this.callback.onData)
            _this.callback.onData(peerId, data); };
        store.callback.onError = function (peerId, err) { if (_this.callback.onError)
            _this.callback.onError(peerId, err); };
        if (0 < this.queue.size && this.sendInterval === null)
            this.sendInterval = Object(_util_zero_timeout__WEBPACK_IMPORTED_MODULE_1__["setZeroTimeout"])(this.sendCallback);
        return store;
    };
    return Network;
}());



/***/ }),

/***/ "rl/O":
/*!*****************************************************************!*\
  !*** ./src/app/class/core/synchronize-object/decorator-core.ts ***!
  \*****************************************************************/
/*! exports provided: defineSyncObject, defineSyncVariable, defineSyncAttribute */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "defineSyncObject", function() { return defineSyncObject; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "defineSyncVariable", function() { return defineSyncVariable; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "defineSyncAttribute", function() { return defineSyncAttribute; });
/* harmony import */ var _object_factory__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./object-factory */ "+FYa");

function defineSyncObject(alias) {
    return function (constructor) {
        _object_factory__WEBPACK_IMPORTED_MODULE_0__["ObjectFactory"].instance.register(constructor, alias);
    };
}
function defineSyncVariable() {
    return function (target, key) {
        function getter() {
            return this.context.syncData[key];
        }
        function setter(value) {
            this.context.syncData[key] = value;
            this.update();
        }
        Object.defineProperty(target, key, {
            get: getter,
            set: setter,
            enumerable: true,
            configurable: true
        });
    };
}
function defineSyncAttribute() {
    return function (target, key) {
        function getter() {
            return this.getAttribute(key);
        }
        function setter(value) {
            this.setAttribute(key, value);
        }
        Object.defineProperty(target, key, {
            get: getter,
            set: setter,
            enumerable: true,
            configurable: true
        });
    };
}


/***/ }),

/***/ "tLw4":
/*!**************************************************************!*\
  !*** ./src/app/component/card-stack/card-stack.component.ts ***!
  \**************************************************************/
/*! exports provided: CardStackComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CardStackComponent", function() { return CardStackComponent; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "mrSG");
/* harmony import */ var _angular_animations__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/animations */ "R0Ic");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/core */ "fXoL");
/* harmony import */ var _udonarium_card__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @udonarium/card */ "jiu3");
/* harmony import */ var _udonarium_card_stack__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @udonarium/card-stack */ "23G+");
/* harmony import */ var _udonarium_core_synchronize_object_object_node__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @udonarium/core/synchronize-object/object-node */ "F67Z");
/* harmony import */ var _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @udonarium/core/synchronize-object/object-store */ "hm7o");
/* harmony import */ var _udonarium_core_system__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @udonarium/core/system */ "yNnI");
/* harmony import */ var _udonarium_peer_cursor__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @udonarium/peer-cursor */ "+UEV");
/* harmony import */ var _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @udonarium/sound-effect */ "veT5");
/* harmony import */ var component_card_stack_list_card_stack_list_component__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! component/card-stack-list/card-stack-list.component */ "k8BA");
/* harmony import */ var component_game_character_sheet_game_character_sheet_component__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! component/game-character-sheet/game-character-sheet.component */ "zXSY");
/* harmony import */ var directive_input_handler__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! directive/input-handler */ "96Ug");
/* harmony import */ var service_context_menu_service__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! service/context-menu.service */ "9FhF");
/* harmony import */ var service_panel_service__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! service/panel.service */ "M9xM");
/* harmony import */ var service_image_service__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! service/image.service */ "Hvpu");
/* harmony import */ var service_pointer_device_service__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! service/pointer-device.service */ "GPP8");
/* harmony import */ var directive_movable_directive__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! directive/movable.directive */ "+Kyd");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! @angular/common */ "ofXK");
/* harmony import */ var directive_rotable_directive__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! directive/rotable.directive */ "3jYK");
/* harmony import */ var pipe_safe_pipe__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! pipe/safe.pipe */ "6HCy");























var _c0 = function (a0) { return { "transform": a0 }; };
function CardStackComponent_div_2_Template(rf, ctx) { if (rf & 1) {
    var _r5 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](0, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵlistener"]("@shuffle.start", function CardStackComponent_div_2_Template_div_animation_shuffle_start_0_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵrestoreView"](_r5); var ctx_r4 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"](); return ctx_r4.animationShuffleStarted($event); })("@shuffle.done", function CardStackComponent_div_2_Template_div_animation_shuffle_done_0_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵrestoreView"](_r5); var ctx_r6 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"](); return ctx_r6.animationShuffleDone($event); });
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelement"](1, "img", 5);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵpipe"](2, "safe");
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
} if (rf & 2) {
    var ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("@shuffle", ctx_r0.animeState);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("ngStyle", _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵpureFunction1"](6, _c0, "rotateZ(" + ctx_r0.topCard.rotate + "deg)"))("src", _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵpipeBind2"](2, 3, ctx_r0.imageFile.url, "resourceUrl"), _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵsanitizeUrl"]);
} }
function CardStackComponent_ng_container_3_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](1, "div", 6);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](2, "i", 7);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtext"](3, "autorenew");
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](4, "div", 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](5, "i", 7);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtext"](6, "autorenew");
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](7, "div", 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](8, "i", 7);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtext"](9, "autorenew");
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](10, "div", 10);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](11, "i", 7);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtext"](12, "autorenew");
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementContainerEnd"]();
} }
function CardStackComponent_div_4_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](0, "div", 11);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](1, "span");
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
} if (rf & 2) {
    var ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("ngStyle", _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵpureFunction1"](2, _c0, "translateY(-50%) translateX(-50%) translateX(" + ctx_r2.size * ctx_r2.gridSize / 2 + "px)"));
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtextInterpolate1"]("", ctx_r2.cards.length, "\u679A");
} }
function CardStackComponent_div_5_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](0, "div", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](1, "span");
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
} if (rf & 2) {
    var ctx_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("ngStyle", _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵpureFunction1"](2, _c0, "translateY(50%) translateX(-50%) translateX(" + ctx_r3.size * ctx_r3.gridSize / 2 + "px)"));
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtextInterpolate1"]("", ctx_r3.ownerName, " \u304C\u78BA\u8A8D\u4E2D");
} }
var _c1 = function (a0) { return { "is-empty": a0 }; };
var CardStackComponent = /** @class */ (function () {
    function CardStackComponent(ngZone, contextMenuService, panelService, elementRef, changeDetector, imageService, pointerDeviceService) {
        this.ngZone = ngZone;
        this.contextMenuService = contextMenuService;
        this.panelService = panelService;
        this.elementRef = elementRef;
        this.changeDetector = changeDetector;
        this.imageService = imageService;
        this.pointerDeviceService = pointerDeviceService;
        this.cardStack = null;
        this.is3D = false;
        this.animeState = 'inactive';
        this.iconHiddenTimer = null;
        this.gridSize = 50;
        this.movableOption = {};
        this.rotableOption = {};
        this.doubleClickTimer = null;
        this.doubleClickPoint = { x: 0, y: 0 };
        this.input = null;
    }
    Object.defineProperty(CardStackComponent.prototype, "name", {
        get: function () { return this.cardStack.name; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(CardStackComponent.prototype, "rotate", {
        get: function () { return this.cardStack.rotate; },
        set: function (rotate) { this.cardStack.rotate = rotate; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(CardStackComponent.prototype, "zindex", {
        get: function () { return this.cardStack.zindex; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(CardStackComponent.prototype, "isShowTotal", {
        get: function () { return this.cardStack.isShowTotal; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(CardStackComponent.prototype, "cards", {
        get: function () { return this.cardStack.cards; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(CardStackComponent.prototype, "isEmpty", {
        get: function () { return this.cardStack.isEmpty; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(CardStackComponent.prototype, "size", {
        get: function () {
            var card = this.cardStack.topCard;
            return (card ? card.size : 2);
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(CardStackComponent.prototype, "hasOwner", {
        get: function () { return this.cardStack.hasOwner; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(CardStackComponent.prototype, "ownerName", {
        get: function () { return this.cardStack.ownerName; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(CardStackComponent.prototype, "topCard", {
        get: function () { return this.cardStack.topCard; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(CardStackComponent.prototype, "imageFile", {
        get: function () { return this.imageService.getSkeletonOr(this.cardStack.imageFile); },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(CardStackComponent.prototype, "isIconHidden", {
        get: function () { return this.iconHiddenTimer != null; },
        enumerable: false,
        configurable: true
    });
    ;
    CardStackComponent.prototype.ngOnInit = function () {
        var _this = this;
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_7__["EventSystem"].register(this)
            .on('SHUFFLE_CARD_STACK', -1000, function (event) {
            if (event.data.identifier === _this.cardStack.identifier) {
                _this.animeState = 'active';
                _this.changeDetector.markForCheck();
            }
        })
            .on('UPDATE_GAME_OBJECT', -1000, function (event) {
            var object = _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_6__["ObjectStore"].instance.get(event.data.identifier);
            if (!_this.cardStack || !object)
                return;
            if ((_this.cardStack === object)
                || (object instanceof _udonarium_core_synchronize_object_object_node__WEBPACK_IMPORTED_MODULE_5__["ObjectNode"] && _this.cardStack.contains(object))
                || (object instanceof _udonarium_peer_cursor__WEBPACK_IMPORTED_MODULE_8__["PeerCursor"] && object.userId === _this.cardStack.owner)) {
                _this.changeDetector.markForCheck();
            }
        })
            .on('CARD_STACK_DECREASED', function (event) {
            if (event.data.cardStackIdentifier === _this.cardStack.identifier && _this.cardStack)
                _this.changeDetector.markForCheck();
        })
            .on('SYNCHRONIZE_FILE_LIST', function (event) {
            _this.changeDetector.markForCheck();
        })
            .on('UPDATE_FILE_RESOURE', -1000, function (event) {
            _this.changeDetector.markForCheck();
        })
            .on('DISCONNECT_PEER', function (event) {
            var cursor = _udonarium_peer_cursor__WEBPACK_IMPORTED_MODULE_8__["PeerCursor"].findByPeerId(event.data.peerId);
            if (!cursor || _this.cardStack.owner === cursor.userId)
                _this.changeDetector.markForCheck();
        });
        this.movableOption = {
            tabletopObject: this.cardStack,
            transformCssOffset: 'translateZ(0.15px)',
            colideLayers: ['terrain']
        };
        this.rotableOption = {
            tabletopObject: this.cardStack
        };
    };
    CardStackComponent.prototype.ngAfterViewInit = function () {
        var _this = this;
        this.ngZone.runOutsideAngular(function () {
            _this.input = new directive_input_handler__WEBPACK_IMPORTED_MODULE_12__["InputHandler"](_this.elementRef.nativeElement);
        });
        this.input.onStart = function (e) { return _this.ngZone.run(function () { return _this.onInputStart(e); }); };
    };
    CardStackComponent.prototype.ngOnDestroy = function () {
        this.input.destroy();
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_7__["EventSystem"].unregister(this);
    };
    CardStackComponent.prototype.animationShuffleStarted = function (event) {
    };
    CardStackComponent.prototype.animationShuffleDone = function (event) {
        this.animeState = 'inactive';
        this.changeDetector.markForCheck();
    };
    CardStackComponent.prototype.onCardDrop = function (e) {
        if (this.cardStack === e.detail || (e.detail instanceof _udonarium_card__WEBPACK_IMPORTED_MODULE_3__["Card"] === false && e.detail instanceof _udonarium_card_stack__WEBPACK_IMPORTED_MODULE_4__["CardStack"] === false)) {
            return;
        }
        e.stopPropagation();
        e.preventDefault();
        if (e.detail instanceof _udonarium_card__WEBPACK_IMPORTED_MODULE_3__["Card"]) {
            var card = e.detail;
            var distance = Math.pow((card.location.x - this.cardStack.location.x), 2) + Math.pow((card.location.y - this.cardStack.location.y), 2) + Math.pow((card.posZ - this.cardStack.posZ), 2);
            if (distance < Math.pow(50, 2))
                this.cardStack.putOnTop(card);
        }
        else if (e.detail instanceof _udonarium_card_stack__WEBPACK_IMPORTED_MODULE_4__["CardStack"]) {
            var cardStack = e.detail;
            var distance = Math.pow((cardStack.location.x - this.cardStack.location.x), 2) + Math.pow((cardStack.location.y - this.cardStack.location.y), 2) + Math.pow((cardStack.posZ - this.cardStack.posZ), 2);
            if (distance < Math.pow(25, 2))
                this.concatStack(cardStack);
        }
    };
    CardStackComponent.prototype.startDoubleClickTimer = function (e) {
        var _this = this;
        if (!this.doubleClickTimer) {
            this.stopDoubleClickTimer();
            this.doubleClickTimer = setTimeout(function () { return _this.stopDoubleClickTimer(); }, e.touches ? 500 : 300);
            this.doubleClickPoint = this.input.pointer;
            return;
        }
        if (e.touches) {
            this.input.onEnd = this.onDoubleClick.bind(this);
        }
        else {
            this.onDoubleClick();
        }
    };
    CardStackComponent.prototype.stopDoubleClickTimer = function () {
        clearTimeout(this.doubleClickTimer);
        this.doubleClickTimer = null;
        this.input.onEnd = null;
    };
    CardStackComponent.prototype.onDoubleClick = function () {
        this.stopDoubleClickTimer();
        var distance = Math.pow((this.doubleClickPoint.x - this.input.pointer.x), 2) + Math.pow((this.doubleClickPoint.y - this.input.pointer.y), 2);
        if (distance < Math.pow(10, 2)) {
            console.log('onDoubleClick !!!!');
            if (this.drawCard() != null) {
                _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_9__["SoundEffect"].play(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_9__["PresetSound"].cardDraw);
            }
        }
    };
    CardStackComponent.prototype.onDragstart = function (e) {
        e.stopPropagation();
        e.preventDefault();
    };
    CardStackComponent.prototype.onInputStart = function (e) {
        this.startDoubleClickTimer(e);
        this.cardStack.toTopmost();
        this.startIconHiddenTimer();
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_7__["EventSystem"].trigger('SELECT_TABLETOP_OBJECT', { identifier: this.cardStack.identifier, className: 'GameCharacter' });
    };
    CardStackComponent.prototype.onContextMenu = function (e) {
        var _this = this;
        e.stopPropagation();
        e.preventDefault();
        if (!this.pointerDeviceService.isAllowedToOpenContextMenu)
            return;
        var position = this.pointerDeviceService.pointers[0];
        this.contextMenuService.open(position, [
            {
                name: '１枚引く',
                action: function () {
                    if (_this.drawCard() != null) {
                        _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_9__["SoundEffect"].play(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_9__["PresetSound"].cardDraw);
                    }
                }
            },
            service_context_menu_service__WEBPACK_IMPORTED_MODULE_13__["ContextMenuSeparator"],
            {
                name: '一番上を表にする',
                action: function () {
                    _this.cardStack.faceUp();
                    _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_9__["SoundEffect"].play(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_9__["PresetSound"].cardDraw);
                }
            },
            {
                name: '一番上を裏にする',
                action: function () {
                    _this.cardStack.faceDown();
                    _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_9__["SoundEffect"].play(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_9__["PresetSound"].cardDraw);
                }
            },
            service_context_menu_service__WEBPACK_IMPORTED_MODULE_13__["ContextMenuSeparator"],
            {
                name: 'すべて表にする',
                action: function () {
                    _this.cardStack.faceUpAll();
                    _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_9__["SoundEffect"].play(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_9__["PresetSound"].cardDraw);
                }
            },
            {
                name: 'すべて裏にする',
                action: function () {
                    _this.cardStack.faceDownAll();
                    _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_9__["SoundEffect"].play(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_9__["PresetSound"].cardDraw);
                }
            },
            {
                name: 'すべて正位置にする',
                action: function () {
                    _this.cardStack.uprightAll();
                    _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_9__["SoundEffect"].play(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_9__["PresetSound"].cardDraw);
                }
            },
            service_context_menu_service__WEBPACK_IMPORTED_MODULE_13__["ContextMenuSeparator"],
            {
                name: 'シャッフル',
                action: function () {
                    _this.cardStack.shuffle();
                    _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_9__["SoundEffect"].play(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_9__["PresetSound"].cardShuffle);
                    _udonarium_core_system__WEBPACK_IMPORTED_MODULE_7__["EventSystem"].call('SHUFFLE_CARD_STACK', { identifier: _this.cardStack.identifier });
                }
            },
            { name: 'カード一覧', action: function () { _this.showStackList(_this.cardStack); } },
            service_context_menu_service__WEBPACK_IMPORTED_MODULE_13__["ContextMenuSeparator"],
            (this.isShowTotal
                ? { name: '枚数を非表示にする', action: function () { _this.cardStack.isShowTotal = false; } }
                : { name: '枚数を表示する', action: function () { _this.cardStack.isShowTotal = true; } }),
            { name: 'カードサイズを揃える', action: function () { if (_this.cardStack.topCard)
                    _this.cardStack.unifyCardsSize(_this.cardStack.topCard.size); } },
            service_context_menu_service__WEBPACK_IMPORTED_MODULE_13__["ContextMenuSeparator"],
            {
                name: '山札を人数分に分割する',
                action: function () {
                    _this.splitStack(_udonarium_core_system__WEBPACK_IMPORTED_MODULE_7__["Network"].peerIds.length);
                    _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_9__["SoundEffect"].play(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_9__["PresetSound"].cardDraw);
                }
            },
            {
                name: '山札を崩す',
                action: function () {
                    _this.breakStack();
                    _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_9__["SoundEffect"].play(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_9__["PresetSound"].cardShuffle);
                }
            },
            service_context_menu_service__WEBPACK_IMPORTED_MODULE_13__["ContextMenuSeparator"],
            { name: '詳細を表示', action: function () { _this.showDetail(_this.cardStack); } },
            {
                name: 'コピーを作る',
                action: function () {
                    var cloneObject = _this.cardStack.clone();
                    cloneObject.location.x += _this.gridSize;
                    cloneObject.location.y += _this.gridSize;
                    cloneObject.owner = '';
                    cloneObject.toTopmost();
                    _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_9__["SoundEffect"].play(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_9__["PresetSound"].cardPut);
                }
            },
            {
                name: '山札を削除する',
                action: function () {
                    _this.cardStack.setLocation('graveyard');
                    _this.cardStack.destroy();
                    _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_9__["SoundEffect"].play(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_9__["PresetSound"].sweep);
                }
            },
        ], this.name);
    };
    CardStackComponent.prototype.onMove = function () {
        _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_9__["SoundEffect"].play(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_9__["PresetSound"].cardPick);
    };
    CardStackComponent.prototype.onMoved = function () {
        var _this = this;
        _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_9__["SoundEffect"].play(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_9__["PresetSound"].cardPut);
        this.ngZone.run(function () { return _this.dispatchCardDropEvent(); });
    };
    CardStackComponent.prototype.drawCard = function () {
        var card = this.cardStack.drawCard();
        if (card) {
            this.cardStack.update(); // todo
            card.location.x += 100 + (Math.random() * 50);
            card.location.y += 25 + (Math.random() * 50);
            card.setLocation(this.cardStack.location.name);
        }
        return card;
    };
    CardStackComponent.prototype.breakStack = function () {
        var e_1, _a;
        var cards = this.cardStack.drawCardAll().reverse();
        try {
            for (var cards_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(cards), cards_1_1 = cards_1.next(); !cards_1_1.done; cards_1_1 = cards_1.next()) {
                var card = cards_1_1.value;
                card.location.x += 25 - (Math.random() * 50);
                card.location.y += 25 - (Math.random() * 50);
                card.toTopmost();
                card.setLocation(this.cardStack.location.name);
            }
        }
        catch (e_1_1) { e_1 = { error: e_1_1 }; }
        finally {
            try {
                if (cards_1_1 && !cards_1_1.done && (_a = cards_1.return)) _a.call(cards_1);
            }
            finally { if (e_1) throw e_1.error; }
        }
        this.cardStack.setLocation('graveyard');
        this.cardStack.destroy();
    };
    CardStackComponent.prototype.splitStack = function (split) {
        if (split < 2)
            return;
        var cardStacks = [];
        for (var i = 0; i < split; i++) {
            var cardStack = _udonarium_card_stack__WEBPACK_IMPORTED_MODULE_4__["CardStack"].create(this.cardStack.name);
            cardStack.location.x = this.cardStack.location.x + 50 - (Math.random() * 100);
            cardStack.location.y = this.cardStack.location.y + 50 - (Math.random() * 100);
            cardStack.posZ = this.cardStack.posZ;
            cardStack.location.name = this.cardStack.location.name;
            cardStack.rotate = this.rotate;
            cardStack.toTopmost();
            cardStacks.push(cardStack);
        }
        var cards = this.cardStack.drawCardAll();
        this.cardStack.setLocation('graveyard');
        this.cardStack.destroy();
        var num = 0;
        var splitIndex = (cards.length / split) * (num + 1);
        for (var i = 0; i < cards.length; i++) {
            cardStacks[num].putOnBottom(cards[i]);
            if (splitIndex <= i + 1) {
                num++;
                splitIndex = (cards.length / split) * (num + 1);
            }
        }
    };
    CardStackComponent.prototype.concatStack = function (topStack, bottomStack) {
        var e_2, _a;
        if (bottomStack === void 0) { bottomStack = this.cardStack; }
        var newCardStack = _udonarium_card_stack__WEBPACK_IMPORTED_MODULE_4__["CardStack"].create(topStack.name);
        newCardStack.location.name = bottomStack.location.name;
        newCardStack.location.x = bottomStack.location.x;
        newCardStack.location.y = bottomStack.location.y;
        newCardStack.posZ = bottomStack.posZ;
        newCardStack.zindex = topStack.zindex;
        newCardStack.rotate = bottomStack.rotate;
        var bottomCards = bottomStack.drawCardAll();
        var topCards = topStack.drawCardAll();
        try {
            for (var _b = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(topCards.concat(bottomCards)), _c = _b.next(); !_c.done; _c = _b.next()) {
                var card = _c.value;
                newCardStack.putOnBottom(card);
            }
        }
        catch (e_2_1) { e_2 = { error: e_2_1 }; }
        finally {
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            }
            finally { if (e_2) throw e_2.error; }
        }
        bottomStack.setLocation('');
        bottomStack.destroy();
        topStack.setLocation('');
        topStack.destroy();
    };
    CardStackComponent.prototype.dispatchCardDropEvent = function () {
        var element = this.elementRef.nativeElement;
        var parent = element.parentElement;
        var children = parent.children;
        var event = new CustomEvent('carddrop', { detail: this.cardStack, bubbles: true });
        for (var i = 0; i < children.length; i++) {
            children[i].dispatchEvent(event);
        }
    };
    CardStackComponent.prototype.showDetail = function (gameObject) {
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_7__["EventSystem"].trigger('SELECT_TABLETOP_OBJECT', { identifier: gameObject.identifier, className: gameObject.aliasName });
        var coordinate = this.pointerDeviceService.pointers[0];
        var title = '山札設定';
        if (gameObject.name.length)
            title += ' - ' + gameObject.name;
        var option = { title: title, left: coordinate.x - 300, top: coordinate.y - 300, width: 600, height: 600 };
        var component = this.panelService.open(component_game_character_sheet_game_character_sheet_component__WEBPACK_IMPORTED_MODULE_11__["GameCharacterSheetComponent"], option);
        component.tabletopObject = gameObject;
    };
    CardStackComponent.prototype.showStackList = function (gameObject) {
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_7__["EventSystem"].trigger('SELECT_TABLETOP_OBJECT', { identifier: gameObject.identifier, className: gameObject.aliasName });
        var coordinate = this.pointerDeviceService.pointers[0];
        var option = { left: coordinate.x - 200, top: coordinate.y - 300, width: 400, height: 600 };
        this.cardStack.owner = _udonarium_core_system__WEBPACK_IMPORTED_MODULE_7__["Network"].peerContext.userId;
        var component = this.panelService.open(component_card_stack_list_card_stack_list_component__WEBPACK_IMPORTED_MODULE_10__["CardStackListComponent"], option);
        component.cardStack = gameObject;
    };
    CardStackComponent.prototype.startIconHiddenTimer = function () {
        var _this = this;
        clearTimeout(this.iconHiddenTimer);
        this.iconHiddenTimer = setTimeout(function () {
            _this.iconHiddenTimer = null;
            _this.changeDetector.markForCheck();
        }, 300);
        this.changeDetector.markForCheck();
    };
    CardStackComponent.ɵfac = function CardStackComponent_Factory(t) { return new (t || CardStackComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_2__["NgZone"]), _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵdirectiveInject"](service_context_menu_service__WEBPACK_IMPORTED_MODULE_13__["ContextMenuService"]), _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵdirectiveInject"](service_panel_service__WEBPACK_IMPORTED_MODULE_14__["PanelService"]), _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_2__["ElementRef"]), _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_2__["ChangeDetectorRef"]), _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵdirectiveInject"](service_image_service__WEBPACK_IMPORTED_MODULE_15__["ImageService"]), _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵdirectiveInject"](service_pointer_device_service__WEBPACK_IMPORTED_MODULE_16__["PointerDeviceService"])); };
    CardStackComponent.ɵcmp = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵdefineComponent"]({ type: CardStackComponent, selectors: [["card-stack"]], hostBindings: function CardStackComponent_HostBindings(rf, ctx) { if (rf & 1) {
            _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵlistener"]("carddrop", function CardStackComponent_carddrop_HostBindingHandler($event) { return ctx.onCardDrop($event); })("dragstart", function CardStackComponent_dragstart_HostBindingHandler($event) { return ctx.onDragstart($event); })("contextmenu", function CardStackComponent_contextmenu_HostBindingHandler($event) { return ctx.onContextMenu($event); });
        } }, inputs: { cardStack: "cardStack", is3D: "is3D" }, decls: 6, vars: 11, consts: [["appMovable", "", 1, "component", "is-3d", "is-pointer-events-none", 3, "ngClass", "movable.option", "movable.ondragstart", "movable.ondragend"], ["appRotable", "", 1, "component-content", "is-pointer-events-auto", "is-grab", 3, "rotable.option", "rotable.ondragstart", "rotable.ondragend"], [4, "ngIf"], ["class", "name-tag is-nowrap is-black-background", 3, "ngStyle", 4, "ngIf"], ["class", "name-tag has-length-limit is-nowrap is-black-background", 3, "ngStyle", 4, "ngIf"], [1, "card-image", 3, "ngStyle", "src"], [1, "rotate-grab", "of-left-top"], [1, "material-icons"], [1, "rotate-grab", "of-left-bottom"], [1, "rotate-grab", "of-right-bottom"], [1, "rotate-grab", "of-right-top"], [1, "name-tag", "is-nowrap", "is-black-background", 3, "ngStyle"], [1, "name-tag", "has-length-limit", "is-nowrap", "is-black-background", 3, "ngStyle"]], template: function CardStackComponent_Template(rf, ctx) { if (rf & 1) {
            _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](0, "div", 0);
            _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵlistener"]("movable.ondragstart", function CardStackComponent_Template_div_movable_ondragstart_0_listener() { return ctx.onMove(); })("movable.ondragend", function CardStackComponent_Template_div_movable_ondragend_0_listener() { return ctx.onMoved(); });
            _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](1, "div", 1);
            _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵlistener"]("rotable.ondragstart", function CardStackComponent_Template_div_rotable_ondragstart_1_listener() { return ctx.onMove(); })("rotable.ondragend", function CardStackComponent_Template_div_rotable_ondragend_1_listener() { return ctx.onMoved(); });
            _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtemplate"](2, CardStackComponent_div_2_Template, 3, 8, "div", 2);
            _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtemplate"](3, CardStackComponent_ng_container_3_Template, 13, 0, "ng-container", 2);
            _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtemplate"](4, CardStackComponent_div_4_Template, 3, 4, "div", 3);
            _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtemplate"](5, CardStackComponent_div_5_Template, 3, 4, "div", 4);
            _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
        } if (rf & 2) {
            _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵstyleProp"]("width", ctx.size * ctx.gridSize, "px");
            _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("ngClass", _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵpureFunction1"](9, _c1, ctx.isEmpty))("movable.option", ctx.movableOption);
            _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("rotable.option", ctx.rotableOption);
            _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("ngIf", ctx.topCard && ctx.imageFile);
            _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("ngIf", !ctx.isIconHidden);
            _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("ngIf", ctx.isShowTotal);
            _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("ngIf", ctx.hasOwner);
        } }, directives: [directive_movable_directive__WEBPACK_IMPORTED_MODULE_17__["MovableDirective"], _angular_common__WEBPACK_IMPORTED_MODULE_18__["NgClass"], directive_rotable_directive__WEBPACK_IMPORTED_MODULE_19__["RotableDirective"], _angular_common__WEBPACK_IMPORTED_MODULE_18__["NgIf"], _angular_common__WEBPACK_IMPORTED_MODULE_18__["NgStyle"]], pipes: [pipe_safe_pipe__WEBPACK_IMPORTED_MODULE_20__["SafePipe"]], styles: [".is-grab[_ngcontent-%COMP%] {\r\n  cursor: grab;\r\n}\r\n\r\n.is-grabbing[_ngcontent-%COMP%] {\r\n  cursor: grabbing;\r\n}\r\n\r\n.is-transition[_ngcontent-%COMP%] {\r\n  transition: transform 132ms linear;\r\n}\r\n\r\n.is-3d[_ngcontent-%COMP%] {\r\n  transform-style: preserve-3d;\r\n}\r\n\r\n.is-pointer-events-none[_ngcontent-%COMP%] {\r\n  pointer-events: none;\r\n}\r\n\r\n.is-pointer-events-auto[_ngcontent-%COMP%] {\r\n  pointer-events: auto;\r\n}\r\n\r\n.is-empty[_ngcontent-%COMP%] {\r\n  height: 100px;\r\n  width: 100px;\r\n}\r\n\r\n.component[_ngcontent-%COMP%] {\r\n  position: absolute;\r\n  -webkit-backface-visibility: hidden;\r\n          backface-visibility: hidden;\r\n  -webkit-user-select: none;\r\n  user-select: none;\r\n  \r\n  -moz-user-drag: none;\r\n  -webkit-user-drag: none;\r\n}\r\n\r\n.component-content[_ngcontent-%COMP%] {\r\n  height: 100%;\r\n  width: 100%;\r\n  margin-top: -5px;\r\n  margin-left: -5px;\r\n  border: solid 5px #CCCCCC;\r\n  border-radius: 5px;\r\n  background-color: #CCCCCC;\r\n  -webkit-backface-visibility: hidden;\r\n          backface-visibility: hidden;\r\n}\r\n\r\n.card-image[_ngcontent-%COMP%] {\r\n  display: block;\r\n  top: 0;\r\n  left: 0;\r\n  bottom: 0;\r\n  right: 0;\r\n  margin: auto;\r\n  height: auto;\r\n  width: 100%;\r\n}\r\n\r\n.rotate-grab[_ngcontent-%COMP%] {\r\n  position: absolute;\r\n  width: 28px;\r\n  height: 28px;\r\n  box-sizing: border-box;\r\n  cursor: -moz-default;\r\n  cursor: -webkit-default;\r\n  cursor: default;\r\n  z-index: 1;\r\n  padding: 2px;\r\n  background-color: #CCCCCC;\r\n  border-radius: 100%;\r\n  color: #444;\r\n  font-size: 8px;\r\n}\r\n\r\n.rotate-grab[_ngcontent-%COMP%] {\r\n  display: none;\r\n}\r\n\r\n.component[_ngcontent-%COMP%]:hover   .rotate-grab[_ngcontent-%COMP%] {\r\n  display: block;\r\n  opacity: 0.5;\r\n}\r\n\r\n.component[_ngcontent-%COMP%]:active   .rotate-grab[_ngcontent-%COMP%] {\r\n  display: none;\r\n}\r\n\r\n.component[_ngcontent-%COMP%]   .rotate-grab[_ngcontent-%COMP%]:hover, .component[_ngcontent-%COMP%]   .rotate-grab[_ngcontent-%COMP%]:active {\r\n  display: block;\r\n  opacity: 1;\r\n}\r\n\r\n.of-left-top[_ngcontent-%COMP%] {\r\n  top: -14px;\r\n  left: -14px;\r\n}\r\n\r\n.of-left-bottom[_ngcontent-%COMP%] {\r\n  bottom: -14px;\r\n  left: -14px;\r\n}\r\n\r\n.of-right-bottom[_ngcontent-%COMP%] {\r\n  bottom: -14px;\r\n  right: -14px;\r\n}\r\n\r\n.of-right-top[_ngcontent-%COMP%] {\r\n  top: -14px;\r\n  right: -14px;\r\n}\r\n\r\n.name-tag[_ngcontent-%COMP%] {\r\n  box-sizing: border-box;\r\n  font-size: 15px;\r\n  padding: 3px 9px;\r\n  border-radius: 24px;\r\n  position: absolute;\r\n  top: 50%\r\n}\r\n\r\n.has-length-limit[_ngcontent-%COMP%] {\r\n  overflow: hidden;\r\n  white-space: nowrap;\r\n  text-overflow: ellipsis;\r\n  max-width: 18em;\r\n}\r\n\r\n.is-nowrap[_ngcontent-%COMP%] {\r\n  white-space: nowrap;\r\n}\r\n\r\n.is-black-background[_ngcontent-%COMP%] {\r\n  color: #CCC;\r\n  background-color: rgba(30, 30, 30, 0.8);\r\n}\r\n\r\n.material-icons[_ngcontent-%COMP%] {\r\n  display: none;\r\n}\r\n\r\n.component[_ngcontent-%COMP%]:hover   .material-icons[_ngcontent-%COMP%], .component[_ngcontent-%COMP%]:active   .material-icons[_ngcontent-%COMP%] {\r\n  display: inline;\r\n}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNhcmQtc3RhY2suY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUdFLFlBQVk7QUFDZDs7QUFFQTtFQUdFLGdCQUFnQjtBQUNsQjs7QUFFQTtFQUVFLGtDQUFrQztBQUNwQzs7QUFFQTtFQUVFLDRCQUE0QjtBQUM5Qjs7QUFFQTtFQUNFLG9CQUFvQjtBQUN0Qjs7QUFFQTtFQUNFLG9CQUFvQjtBQUN0Qjs7QUFFQTtFQUNFLGFBQWE7RUFDYixZQUFZO0FBQ2Q7O0FBRUE7RUFDRSxrQkFBa0I7RUFDbEIsbUNBQTJCO1VBQTNCLDJCQUEyQjtFQUUzQix5QkFBeUI7RUFDekIsaUJBQWlCOztFQUVqQixvQkFBb0I7RUFDcEIsdUJBQXVCO0FBQ3pCOztBQUVBO0VBQ0UsWUFBWTtFQUNaLFdBQVc7RUFDWCxnQkFBZ0I7RUFDaEIsaUJBQWlCO0VBQ2pCLHlCQUF5QjtFQUN6QixrQkFBa0I7RUFDbEIseUJBQXlCO0VBQ3pCLG1DQUEyQjtVQUEzQiwyQkFBMkI7QUFDN0I7O0FBRUE7RUFDRSxjQUFjO0VBQ2QsTUFBTTtFQUNOLE9BQU87RUFDUCxTQUFTO0VBQ1QsUUFBUTtFQUNSLFlBQVk7RUFDWixZQUFZO0VBQ1osV0FBVztBQUNiOztBQUVBO0VBQ0Usa0JBQWtCO0VBQ2xCLFdBQVc7RUFDWCxZQUFZO0VBQ1osc0JBQXNCO0VBQ3RCLG9CQUFvQjtFQUNwQix1QkFBdUI7RUFDdkIsZUFBZTtFQUNmLFVBQVU7RUFDVixZQUFZO0VBQ1oseUJBQXlCO0VBQ3pCLG1CQUFtQjtFQUNuQixXQUFXO0VBQ1gsY0FBYztBQUNoQjs7QUFFQTtFQUNFLGFBQWE7QUFDZjs7QUFFQTtFQUNFLGNBQWM7RUFDZCxZQUFZO0FBQ2Q7O0FBRUE7RUFDRSxhQUFhO0FBQ2Y7O0FBRUE7RUFDRSxjQUFjO0VBQ2QsVUFBVTtBQUNaOztBQUVBO0VBQ0UsVUFBVTtFQUNWLFdBQVc7QUFDYjs7QUFFQTtFQUNFLGFBQWE7RUFDYixXQUFXO0FBQ2I7O0FBRUE7RUFDRSxhQUFhO0VBQ2IsWUFBWTtBQUNkOztBQUVBO0VBQ0UsVUFBVTtFQUNWLFlBQVk7QUFDZDs7QUFFQTtFQUNFLHNCQUFzQjtFQUN0QixlQUFlO0VBQ2YsZ0JBQWdCO0VBQ2hCLG1CQUFtQjtFQUNuQixrQkFBa0I7RUFDbEI7QUFDRjs7QUFFQTtFQUNFLGdCQUFnQjtFQUNoQixtQkFBbUI7RUFDbkIsdUJBQXVCO0VBQ3ZCLGVBQWU7QUFDakI7O0FBRUE7RUFDRSxtQkFBbUI7QUFDckI7O0FBRUE7RUFDRSxXQUFXO0VBQ1gsdUNBQXVDO0FBQ3pDOztBQUVBO0VBQ0UsYUFBYTtBQUNmOztBQUNBO0VBQ0UsZUFBZTtBQUNqQiIsImZpbGUiOiJjYXJkLXN0YWNrLmNvbXBvbmVudC5jc3MiLCJzb3VyY2VzQ29udGVudCI6WyIuaXMtZ3JhYiB7XHJcbiAgY3Vyc29yOiAtbW96LWdyYWI7XHJcbiAgY3Vyc29yOiAtd2Via2l0LWdyYWI7XHJcbiAgY3Vyc29yOiBncmFiO1xyXG59XHJcblxyXG4uaXMtZ3JhYmJpbmcge1xyXG4gIGN1cnNvcjogLW1vei1ncmFiYmluZztcclxuICBjdXJzb3I6IC13ZWJraXQtZ3JhYmJpbmc7XHJcbiAgY3Vyc29yOiBncmFiYmluZztcclxufVxyXG5cclxuLmlzLXRyYW5zaXRpb24ge1xyXG4gIC13ZWJraXQtdHJhbnNpdGlvbjogLXdlYmtpdC10cmFuc2Zvcm0gMTMybXMgbGluZWFyO1xyXG4gIHRyYW5zaXRpb246IHRyYW5zZm9ybSAxMzJtcyBsaW5lYXI7XHJcbn1cclxuXHJcbi5pcy0zZCB7XHJcbiAgLXdlYmtpdC10cmFuc2Zvcm0tc3R5bGU6IHByZXNlcnZlLTNkO1xyXG4gIHRyYW5zZm9ybS1zdHlsZTogcHJlc2VydmUtM2Q7XHJcbn1cclxuXHJcbi5pcy1wb2ludGVyLWV2ZW50cy1ub25lIHtcclxuICBwb2ludGVyLWV2ZW50czogbm9uZTtcclxufVxyXG5cclxuLmlzLXBvaW50ZXItZXZlbnRzLWF1dG8ge1xyXG4gIHBvaW50ZXItZXZlbnRzOiBhdXRvO1xyXG59XHJcblxyXG4uaXMtZW1wdHkge1xyXG4gIGhlaWdodDogMTAwcHg7XHJcbiAgd2lkdGg6IDEwMHB4O1xyXG59XHJcblxyXG4uY29tcG9uZW50IHtcclxuICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgYmFja2ZhY2UtdmlzaWJpbGl0eTogaGlkZGVuO1xyXG4gIC1tb3otdXNlci1zZWxlY3Q6IG5vbmU7XHJcbiAgLXdlYmtpdC11c2VyLXNlbGVjdDogbm9uZTtcclxuICB1c2VyLXNlbGVjdDogbm9uZTtcclxuICBcclxuICAtbW96LXVzZXItZHJhZzogbm9uZTtcclxuICAtd2Via2l0LXVzZXItZHJhZzogbm9uZTtcclxufVxyXG5cclxuLmNvbXBvbmVudC1jb250ZW50IHtcclxuICBoZWlnaHQ6IDEwMCU7XHJcbiAgd2lkdGg6IDEwMCU7XHJcbiAgbWFyZ2luLXRvcDogLTVweDtcclxuICBtYXJnaW4tbGVmdDogLTVweDtcclxuICBib3JkZXI6IHNvbGlkIDVweCAjQ0NDQ0NDO1xyXG4gIGJvcmRlci1yYWRpdXM6IDVweDtcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiAjQ0NDQ0NDO1xyXG4gIGJhY2tmYWNlLXZpc2liaWxpdHk6IGhpZGRlbjtcclxufVxyXG5cclxuLmNhcmQtaW1hZ2Uge1xyXG4gIGRpc3BsYXk6IGJsb2NrO1xyXG4gIHRvcDogMDtcclxuICBsZWZ0OiAwO1xyXG4gIGJvdHRvbTogMDtcclxuICByaWdodDogMDtcclxuICBtYXJnaW46IGF1dG87XHJcbiAgaGVpZ2h0OiBhdXRvO1xyXG4gIHdpZHRoOiAxMDAlO1xyXG59XHJcblxyXG4ucm90YXRlLWdyYWIge1xyXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcclxuICB3aWR0aDogMjhweDtcclxuICBoZWlnaHQ6IDI4cHg7XHJcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcclxuICBjdXJzb3I6IC1tb3otZGVmYXVsdDtcclxuICBjdXJzb3I6IC13ZWJraXQtZGVmYXVsdDtcclxuICBjdXJzb3I6IGRlZmF1bHQ7XHJcbiAgei1pbmRleDogMTtcclxuICBwYWRkaW5nOiAycHg7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogI0NDQ0NDQztcclxuICBib3JkZXItcmFkaXVzOiAxMDAlO1xyXG4gIGNvbG9yOiAjNDQ0O1xyXG4gIGZvbnQtc2l6ZTogOHB4O1xyXG59XHJcblxyXG4ucm90YXRlLWdyYWIge1xyXG4gIGRpc3BsYXk6IG5vbmU7XHJcbn1cclxuXHJcbi5jb21wb25lbnQ6aG92ZXIgLnJvdGF0ZS1ncmFiIHtcclxuICBkaXNwbGF5OiBibG9jaztcclxuICBvcGFjaXR5OiAwLjU7XHJcbn1cclxuXHJcbi5jb21wb25lbnQ6YWN0aXZlIC5yb3RhdGUtZ3JhYiB7XHJcbiAgZGlzcGxheTogbm9uZTtcclxufVxyXG5cclxuLmNvbXBvbmVudCAucm90YXRlLWdyYWI6aG92ZXIsIC5jb21wb25lbnQgLnJvdGF0ZS1ncmFiOmFjdGl2ZSB7XHJcbiAgZGlzcGxheTogYmxvY2s7XHJcbiAgb3BhY2l0eTogMTtcclxufVxyXG5cclxuLm9mLWxlZnQtdG9wIHtcclxuICB0b3A6IC0xNHB4O1xyXG4gIGxlZnQ6IC0xNHB4O1xyXG59XHJcblxyXG4ub2YtbGVmdC1ib3R0b20ge1xyXG4gIGJvdHRvbTogLTE0cHg7XHJcbiAgbGVmdDogLTE0cHg7XHJcbn1cclxuXHJcbi5vZi1yaWdodC1ib3R0b20ge1xyXG4gIGJvdHRvbTogLTE0cHg7XHJcbiAgcmlnaHQ6IC0xNHB4O1xyXG59XHJcblxyXG4ub2YtcmlnaHQtdG9wIHtcclxuICB0b3A6IC0xNHB4O1xyXG4gIHJpZ2h0OiAtMTRweDtcclxufVxyXG5cclxuLm5hbWUtdGFnIHtcclxuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xyXG4gIGZvbnQtc2l6ZTogMTVweDtcclxuICBwYWRkaW5nOiAzcHggOXB4O1xyXG4gIGJvcmRlci1yYWRpdXM6IDI0cHg7XHJcbiAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gIHRvcDogNTAlXHJcbn1cclxuXHJcbi5oYXMtbGVuZ3RoLWxpbWl0IHtcclxuICBvdmVyZmxvdzogaGlkZGVuO1xyXG4gIHdoaXRlLXNwYWNlOiBub3dyYXA7XHJcbiAgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7XHJcbiAgbWF4LXdpZHRoOiAxOGVtO1xyXG59XHJcblxyXG4uaXMtbm93cmFwIHtcclxuICB3aGl0ZS1zcGFjZTogbm93cmFwO1xyXG59XHJcblxyXG4uaXMtYmxhY2stYmFja2dyb3VuZCB7XHJcbiAgY29sb3I6ICNDQ0M7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgzMCwgMzAsIDMwLCAwLjgpO1xyXG59XHJcblxyXG4ubWF0ZXJpYWwtaWNvbnMge1xyXG4gIGRpc3BsYXk6IG5vbmU7XHJcbn1cclxuLmNvbXBvbmVudDpob3ZlciAubWF0ZXJpYWwtaWNvbnMsIC5jb21wb25lbnQ6YWN0aXZlIC5tYXRlcmlhbC1pY29ucyB7XHJcbiAgZGlzcGxheTogaW5saW5lO1xyXG59XHJcbiJdfQ== */"], data: { animation: [
                Object(_angular_animations__WEBPACK_IMPORTED_MODULE_1__["trigger"])('shuffle', [
                    Object(_angular_animations__WEBPACK_IMPORTED_MODULE_1__["state"])('active', Object(_angular_animations__WEBPACK_IMPORTED_MODULE_1__["style"])({ transform: '' })),
                    Object(_angular_animations__WEBPACK_IMPORTED_MODULE_1__["transition"])('* => active', [
                        Object(_angular_animations__WEBPACK_IMPORTED_MODULE_1__["animate"])('800ms ease', Object(_angular_animations__WEBPACK_IMPORTED_MODULE_1__["keyframes"])([
                            Object(_angular_animations__WEBPACK_IMPORTED_MODULE_1__["style"])({ transform: 'scale3d(0, 0, 0) rotateZ(0deg)', offset: 0 }),
                            Object(_angular_animations__WEBPACK_IMPORTED_MODULE_1__["style"])({ transform: 'scale3d(1.2, 1.2, 1.2) rotateZ(360deg)', offset: 0.5 }),
                            Object(_angular_animations__WEBPACK_IMPORTED_MODULE_1__["style"])({ transform: 'scale3d(0.75, 0.75, 0.75) rotateZ(520deg)', offset: 0.75 }),
                            Object(_angular_animations__WEBPACK_IMPORTED_MODULE_1__["style"])({ transform: 'scale3d(1.125, 1.125, 1.125) rotateZ(630deg)', offset: 0.875 }),
                            Object(_angular_animations__WEBPACK_IMPORTED_MODULE_1__["style"])({ transform: 'scale3d(1.0, 1.0, 1.0) rotateZ(720deg)', offset: 1.0 })
                        ]))
                    ])
                ])
            ] }, changeDetection: 0 });
    return CardStackComponent;
}());

/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵsetClassMetadata"](CardStackComponent, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_2__["Component"],
        args: [{
                selector: 'card-stack',
                templateUrl: './card-stack.component.html',
                styleUrls: ['./card-stack.component.css'],
                changeDetection: _angular_core__WEBPACK_IMPORTED_MODULE_2__["ChangeDetectionStrategy"].OnPush,
                animations: [
                    Object(_angular_animations__WEBPACK_IMPORTED_MODULE_1__["trigger"])('shuffle', [
                        Object(_angular_animations__WEBPACK_IMPORTED_MODULE_1__["state"])('active', Object(_angular_animations__WEBPACK_IMPORTED_MODULE_1__["style"])({ transform: '' })),
                        Object(_angular_animations__WEBPACK_IMPORTED_MODULE_1__["transition"])('* => active', [
                            Object(_angular_animations__WEBPACK_IMPORTED_MODULE_1__["animate"])('800ms ease', Object(_angular_animations__WEBPACK_IMPORTED_MODULE_1__["keyframes"])([
                                Object(_angular_animations__WEBPACK_IMPORTED_MODULE_1__["style"])({ transform: 'scale3d(0, 0, 0) rotateZ(0deg)', offset: 0 }),
                                Object(_angular_animations__WEBPACK_IMPORTED_MODULE_1__["style"])({ transform: 'scale3d(1.2, 1.2, 1.2) rotateZ(360deg)', offset: 0.5 }),
                                Object(_angular_animations__WEBPACK_IMPORTED_MODULE_1__["style"])({ transform: 'scale3d(0.75, 0.75, 0.75) rotateZ(520deg)', offset: 0.75 }),
                                Object(_angular_animations__WEBPACK_IMPORTED_MODULE_1__["style"])({ transform: 'scale3d(1.125, 1.125, 1.125) rotateZ(630deg)', offset: 0.875 }),
                                Object(_angular_animations__WEBPACK_IMPORTED_MODULE_1__["style"])({ transform: 'scale3d(1.0, 1.0, 1.0) rotateZ(720deg)', offset: 1.0 })
                            ]))
                        ])
                    ])
                ]
            }]
    }], function () { return [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_2__["NgZone"] }, { type: service_context_menu_service__WEBPACK_IMPORTED_MODULE_13__["ContextMenuService"] }, { type: service_panel_service__WEBPACK_IMPORTED_MODULE_14__["PanelService"] }, { type: _angular_core__WEBPACK_IMPORTED_MODULE_2__["ElementRef"] }, { type: _angular_core__WEBPACK_IMPORTED_MODULE_2__["ChangeDetectorRef"] }, { type: service_image_service__WEBPACK_IMPORTED_MODULE_15__["ImageService"] }, { type: service_pointer_device_service__WEBPACK_IMPORTED_MODULE_16__["PointerDeviceService"] }]; }, { cardStack: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_2__["Input"]
        }], is3D: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_2__["Input"]
        }], onCardDrop: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_2__["HostListener"],
            args: ['carddrop', ['$event']]
        }], onDragstart: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_2__["HostListener"],
            args: ['dragstart', ['$event']]
        }], onContextMenu: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_2__["HostListener"],
            args: ['contextmenu', ['$event']]
        }] }); })();


/***/ }),

/***/ "tRmd":
/*!**********************************************!*\
  !*** ./src/app/class/transform/transform.ts ***!
  \**********************************************/
/*! exports provided: Transform */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Transform", function() { return Transform; });
/* harmony import */ var _css_number__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./css-number */ "zAbn");
/* harmony import */ var _matrix_3d__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./matrix-3d */ "lB2V");


var Transform = /** @class */ (function () {
    function Transform(element) {
        this.matrix = new _matrix_3d__WEBPACK_IMPORTED_MODULE_1__["Matrix3D"]();
        this.sceneTransform = new _matrix_3d__WEBPACK_IMPORTED_MODULE_1__["Matrix3D"]();
        this.inverseSceneTransform = new _matrix_3d__WEBPACK_IMPORTED_MODULE_1__["Matrix3D"]();
        this.initialize(element);
    }
    Transform.prototype.clear = function () {
        this.element = null;
        this.matrix.identity();
        return this;
    };
    Transform.prototype.initialize = function (element) {
        if (!element)
            return;
        this.element = element;
        var style = window.getComputedStyle(element);
        var parentWidth = 0;
        var parentHeight = 0;
        if (this.element.parentElement) {
            parentWidth = this.element.parentElement.clientWidth;
            parentHeight = this.element.parentElement.clientHeight;
        }
        else {
            parentWidth = window.innerWidth;
            parentHeight = window.innerHeight;
        }
        this.paddingLeft = _css_number__WEBPACK_IMPORTED_MODULE_0__["CSSNumber"].relation(style.paddingTop, parentWidth);
        this.paddingTop = _css_number__WEBPACK_IMPORTED_MODULE_0__["CSSNumber"].relation(style.paddingTop, parentHeight);
        this.marginLeft = _css_number__WEBPACK_IMPORTED_MODULE_0__["CSSNumber"].relation(style.marginLeft, parentWidth);
        this.marginTop = _css_number__WEBPACK_IMPORTED_MODULE_0__["CSSNumber"].relation(style.marginTop, parentHeight);
        this.borderLeft = _css_number__WEBPACK_IMPORTED_MODULE_0__["CSSNumber"].relation(style.borderLeft, parentWidth);
        this.borderTop = _css_number__WEBPACK_IMPORTED_MODULE_0__["CSSNumber"].relation(style.borderTop, parentHeight);
        this.matrix.setCSS(style.transform);
        this.sceneTransform.identity();
        this.extract(this, this.sceneTransform);
        this.sceneTransform.invert(this.inverseSceneTransform);
        return this;
    };
    Transform.prototype.globalToLocal = function (x, y, z) {
        if (z === void 0) { z = 0; }
        var ret = { x: x, y: y, z: z, w: 1 };
        this.inverseSceneTransform.unproject(ret, ret);
        this.fromBorderBox(ret);
        return ret;
    };
    Transform.prototype.localToGlobal = function (x, y, z) {
        if (z === void 0) { z = 0; }
        var ret = { x: x, y: y, z: z, w: 1 };
        this.sceneTransform.project(ret, ret);
        this.fromBorderBox(ret);
        return ret;
    };
    Transform.prototype.localToLocal = function (x, y, z, to) {
        var local = { x: x, y: y, z: z, w: 1 };
        var transformer = new Transform(to);
        var matrix = _matrix_3d__WEBPACK_IMPORTED_MODULE_1__["Matrix3D"].multiply(this.sceneTransform, transformer.inverseSceneTransform);
        var ret = { x: 0, y: 0, z: 0, w: 1 };
        ret.x = local.x * matrix.m11 + local.y * matrix.m21 + local.z * matrix.m31 + local.w * matrix.m41;
        ret.y = local.x * matrix.m12 + local.y * matrix.m22 + local.z * matrix.m32 + local.w * matrix.m42;
        ret.z = local.x * matrix.m13 + local.y * matrix.m23 + local.z * matrix.m33 + local.w * matrix.m43;
        ret.w = local.x * matrix.m14 + local.y * matrix.m24 + local.z * matrix.m34 + local.w * matrix.m44;
        transformer.clear();
        this.toBorderBox(ret);
        return ret;
    };
    Transform.prototype.extract = function (transform, matrix) {
        var element = transform.element;
        var node = element;
        while (node) {
            this.extractMatrix(node, matrix);
            if (node && node.style.position === 'fixed') {
                console.warn('fixed領域は計算が不正確');
                matrix.appendPosition(window.pageXOffset, window.pageYOffset, 0);
            }
            node = node.parentElement;
        }
    };
    Transform.prototype.extractMatrix = function (node, matrix) {
        if (matrix === void 0) { matrix = null; }
        if (!matrix)
            matrix = new _matrix_3d__WEBPACK_IMPORTED_MODULE_1__["Matrix3D"]();
        if (!node)
            return matrix;
        var element = node;
        var style = window.getComputedStyle(node);
        if (style.transform != 'none') {
            var origin_1 = style.transformOrigin ? style.transformOrigin.split(' ') : [];
            var originX = _css_number__WEBPACK_IMPORTED_MODULE_0__["CSSNumber"].relation(origin_1[0], element.offsetWidth, element.offsetWidth * 0.5);
            var originY = _css_number__WEBPACK_IMPORTED_MODULE_0__["CSSNumber"].relation(origin_1[1], element.offsetHeight, element.offsetHeight * 0.5);
            var originZ = _css_number__WEBPACK_IMPORTED_MODULE_0__["CSSNumber"].relation(origin_1[2], 0, 0);
            matrix.appendPosition(-originX, -originY, -originZ);
            matrix.appendCSS(style.transform);
            matrix.appendPosition(originX, originY, originZ);
        }
        var position = this.getPosition(node);
        matrix.appendPosition(position.x, position.y, 0);
        var perspective = 0;
        if (node.parentElement) {
            var parentStyle = window.getComputedStyle(node.parentElement);
            perspective = _css_number__WEBPACK_IMPORTED_MODULE_0__["CSSNumber"].parse(parentStyle.perspective);
        }
        if (node.parentElement && perspective) {
            var parentStyle = window.getComputedStyle(node.parentElement);
            var perspectiveOrigin = parentStyle.perspectiveOrigin.split(' ');
            var perspectiveOriginX = _css_number__WEBPACK_IMPORTED_MODULE_0__["CSSNumber"].relation(perspectiveOrigin[0], element.parentElement.offsetWidth);
            var perspectiveOriginY = _css_number__WEBPACK_IMPORTED_MODULE_0__["CSSNumber"].relation(perspectiveOrigin[1], element.parentElement.offsetHeight);
            matrix.appendPosition(-perspectiveOriginX, -perspectiveOriginY, 0);
            matrix.appendPerspective(perspective);
            matrix.appendPosition(perspectiveOriginX, perspectiveOriginY, 0);
        }
        return matrix;
    };
    Transform.prototype.getPosition = function (node) {
        var ret = { x: 0, y: 0 };
        ret.x = !node.offsetParent ? node.offsetLeft : node.parentElement === node.offsetParent ? node.offsetLeft : node.parentElement.offsetParent === node.offsetParent ? node.offsetLeft - node.parentElement.offsetLeft : 0;
        ret.y = !node.offsetParent ? node.offsetTop : node.parentElement === node.offsetParent ? node.offsetTop : node.parentElement.offsetParent === node.offsetParent ? node.offsetTop - node.parentElement.offsetTop : 0;
        ret.x += node.offsetParent ? node.offsetParent.clientLeft : 0;
        ret.y += node.offsetParent ? node.offsetParent.clientTop : 0;
        return ret;
    };
    Transform.prototype.fromBorderBox = function (point) {
        point.x += this.paddingLeft;
        point.y += this.paddingTop;
        point.x += this.marginLeft;
        point.y += this.marginTop;
        point.x -= this.borderLeft;
        point.y -= this.borderTop;
    };
    Transform.prototype.toBorderBox = function (point) {
        point.x -= this.paddingLeft;
        point.y -= this.paddingTop;
        point.x -= this.marginLeft;
        point.y -= this.marginTop;
        point.x += this.borderLeft;
        point.y += this.borderTop;
    };
    return Transform;
}());



/***/ }),

/***/ "tYii":
/*!****************************************************!*\
  !*** ./src/app/component/lobby/lobby.component.ts ***!
  \****************************************************/
/*! exports provided: LobbyComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LobbyComponent", function() { return LobbyComponent; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "mrSG");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "fXoL");
/* harmony import */ var _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @udonarium/core/synchronize-object/object-store */ "hm7o");
/* harmony import */ var _udonarium_core_system_network_peer_context__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @udonarium/core/system/network/peer-context */ "ztsr");
/* harmony import */ var _udonarium_core_system__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @udonarium/core/system */ "yNnI");
/* harmony import */ var _udonarium_peer_cursor__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @udonarium/peer-cursor */ "+UEV");
/* harmony import */ var component_password_check_password_check_component__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! component/password-check/password-check.component */ "pY18");
/* harmony import */ var component_room_setting_room_setting_component__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! component/room-setting/room-setting.component */ "aL7I");
/* harmony import */ var service_panel_service__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! service/panel.service */ "M9xM");
/* harmony import */ var service_modal_service__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! service/modal.service */ "CE6K");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @angular/common */ "ofXK");












function LobbyComponent_div_0_ng_container_6_ng_container_12_td_6_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "td");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](1, "i", 11);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](2, "lock");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
} }
function LobbyComponent_div_0_ng_container_6_ng_container_12_td_7_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "td");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](1, "-");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
} }
function LobbyComponent_div_0_ng_container_6_ng_container_12_button_11_Template(rf, ctx) { if (rf & 1) {
    var _r12 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "button", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("click", function LobbyComponent_div_0_ng_container_6_ng_container_12_button_11_Template_button_click_0_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r12); var room_r6 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]().$implicit; var ctx_r10 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](3); return ctx_r10.connect(room_r6.peerContexts); });
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](1, "\u9023\u7DDA");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
} if (rf & 2) {
    var room_r6 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]().$implicit;
    var ctx_r9 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("disabled", (room_r6.peerContexts[0] == null ? null : room_r6.peerContexts[0].roomId) === ctx_r9.currentRoom);
} }
function LobbyComponent_div_0_ng_container_6_ng_container_12_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](1, "tr");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](2, "td", 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](4, "td", 7);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](5);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](6, LobbyComponent_div_0_ng_container_6_ng_container_12_td_6_Template, 3, 0, "td", 4);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](7, LobbyComponent_div_0_ng_container_6_ng_container_12_td_7_Template, 2, 0, "td", 4);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](8, "td");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](9);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](10, "td");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](11, LobbyComponent_div_0_ng_container_6_ng_container_12_button_11_Template, 2, 1, "button", 10);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var room_r6 = ctx.$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtextInterpolate"](room_r6.peerContexts[0] == null ? null : room_r6.peerContexts[0].roomId);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtextInterpolate"](room_r6.roomName);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", room_r6.peerContexts[0].hasPassword);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", !room_r6.peerContexts[0].hasPassword);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtextInterpolate1"]("", room_r6.peerContexts.length, "\u4EBA");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", 0 < room_r6.alias.length);
} }
function LobbyComponent_div_0_ng_container_6_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](1, "table", 6);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](2, "tr");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](3, "th");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](4, "\u623F\u9593ID");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](5, "th", 7);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](6, "\u623F\u9593\u540D");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](7, "th");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](8, "\u5BC6\u78BC");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](9, "th");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](10, "\u53C2\u52A0\u8005");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelement"](11, "th");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](12, LobbyComponent_div_0_ng_container_6_ng_container_12_Template, 12, 6, "ng-container", 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var ctx_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](12);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngForOf", ctx_r3.rooms);
} }
function LobbyComponent_div_0_span_7_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "span", 13);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
} if (rf & 2) {
    var ctx_r4 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtextInterpolate"](ctx_r4.help);
} }
function LobbyComponent_div_0_Template(rf, ctx) { if (rf & 1) {
    var _r15 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](1, "button", 2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("click", function LobbyComponent_div_0_Template_button_click_1_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r15); var ctx_r14 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](); return ctx_r14.reload(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](2, "\u5217\u8868\u66F4\u65B0");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](3, "button", 3);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("click", function LobbyComponent_div_0_Template_button_click_3_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r15); var ctx_r16 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](); return ctx_r16.showRoomSetting(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](4, "\u65B0\u589E\u623F\u9593");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelement"](5, "hr");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](6, LobbyComponent_div_0_ng_container_6_Template, 13, 1, "ng-container", 4);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](7, LobbyComponent_div_0_span_7_Template, 2, 1, "span", 5);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
} if (rf & 2) {
    var ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("disabled", ctx_r0.isReloading);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](5);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", ctx_r0.rooms.length);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", ctx_r0.rooms.length < 1);
} }
function LobbyComponent_ng_template_1_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "span", 13);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](1, "\u5982\u679C\u8981\u9023\u63A5\u5230\u53E6\u4E00\u500B\u623F\u9593\uFF0C\u8ACB\u65B7\u958B\u8207\u5176\u4ED6\u8207\u6703\u8005\u7684\u9023\u7DDA\u3002");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelement"](2, "br");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](3, "\uFF08\u203B\u53EF\u4EE5\u901A\u904E\u91CD\u65B0\u52A0\u8F09\u9801\u9762\u4F86\u65B7\u958B\u9023\u63A5\u3002\uFF09");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
} }
var LobbyComponent = /** @class */ (function () {
    function LobbyComponent(panelService, modalService) {
        this.panelService = panelService;
        this.modalService = modalService;
        this.rooms = [];
        this.isReloading = false;
        this.help = '點擊“更新列表”按鈕以顯示可連接房間列表。';
    }
    Object.defineProperty(LobbyComponent.prototype, "currentRoom", {
        get: function () { return _udonarium_core_system__WEBPACK_IMPORTED_MODULE_4__["Network"].peerContext.roomId; },
        enumerable: false,
        configurable: true
    });
    ;
    Object.defineProperty(LobbyComponent.prototype, "peerId", {
        get: function () { return _udonarium_core_system__WEBPACK_IMPORTED_MODULE_4__["Network"].peerId; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(LobbyComponent.prototype, "isConnected", {
        get: function () {
            return _udonarium_core_system__WEBPACK_IMPORTED_MODULE_4__["Network"].peerIds.length <= 1 ? false : true;
        },
        enumerable: false,
        configurable: true
    });
    LobbyComponent.prototype.ngOnInit = function () {
        var _this = this;
        Promise.resolve().then(function () { return _this.changeTitle(); });
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_4__["EventSystem"].register(this)
            .on('OPEN_NETWORK', function (event) {
            _this.changeTitle();
        })
            .on('CONNECT_PEER', function (event) {
            _this.changeTitle();
        });
        this.reload();
    };
    LobbyComponent.prototype.changeTitle = function () {
        this.modalService.title = this.panelService.title = '大廳';
        if (_udonarium_core_system__WEBPACK_IMPORTED_MODULE_4__["Network"].peerContext.roomName.length) {
            this.modalService.title = this.panelService.title = '＜' + _udonarium_core_system__WEBPACK_IMPORTED_MODULE_4__["Network"].peerContext.roomName + '/' + _udonarium_core_system__WEBPACK_IMPORTED_MODULE_4__["Network"].peerContext.roomId + '＞';
        }
    };
    LobbyComponent.prototype.ngOnDestroy = function () {
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_4__["EventSystem"].unregister(this);
    };
    LobbyComponent.prototype.reload = function () {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function () {
            var peersOfroom, peerIds, peerIds_1, peerIds_1_1, peerId, context, alias, alias;
            var e_1, _a;
            return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"])(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        this.isReloading = true;
                        this.help = '搜尋中...';
                        this.rooms = [];
                        peersOfroom = {};
                        return [4 /*yield*/, _udonarium_core_system__WEBPACK_IMPORTED_MODULE_4__["Network"].listAllPeers()];
                    case 1:
                        peerIds = _b.sent();
                        try {
                            for (peerIds_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(peerIds), peerIds_1_1 = peerIds_1.next(); !peerIds_1_1.done; peerIds_1_1 = peerIds_1.next()) {
                                peerId = peerIds_1_1.value;
                                context = _udonarium_core_system_network_peer_context__WEBPACK_IMPORTED_MODULE_3__["PeerContext"].parse(peerId);
                                if (context.isRoom) {
                                    alias = context.roomId + context.roomName;
                                    if (!(alias in peersOfroom)) {
                                        peersOfroom[alias] = [];
                                    }
                                    peersOfroom[alias].push(context);
                                }
                            }
                        }
                        catch (e_1_1) { e_1 = { error: e_1_1 }; }
                        finally {
                            try {
                                if (peerIds_1_1 && !peerIds_1_1.done && (_a = peerIds_1.return)) _a.call(peerIds_1);
                            }
                            finally { if (e_1) throw e_1.error; }
                        }
                        for (alias in peersOfroom) {
                            this.rooms.push({ alias: alias, roomName: peersOfroom[alias][0].roomName, peerContexts: peersOfroom[alias] });
                        }
                        this.rooms.sort(function (a, b) {
                            if (a.alias < b.alias)
                                return -1;
                            if (a.alias > b.alias)
                                return 1;
                            return 0;
                        });
                        this.help = '找不到可連接的房間。 您可以使用“創建新房間”來創建新房間。';
                        this.isReloading = false;
                        return [2 /*return*/];
                }
            });
        });
    };
    LobbyComponent.prototype.connect = function (peerContexts) {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function () {
            var context, password, userId, triedPeer;
            var _this = this;
            return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"])(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        context = peerContexts[0];
                        password = '';
                        if (!context.hasPassword) return [3 /*break*/, 2];
                        return [4 /*yield*/, this.modalService.open(component_password_check_password_check_component__WEBPACK_IMPORTED_MODULE_6__["PasswordCheckComponent"], { peerId: context.peerId, title: context.roomName + "/" + context.roomId })];
                    case 1:
                        password = _a.sent();
                        if (password == null)
                            password = '';
                        _a.label = 2;
                    case 2:
                        if (!context.verifyPassword(password))
                            return [2 /*return*/];
                        userId = _udonarium_core_system__WEBPACK_IMPORTED_MODULE_4__["Network"].peerContext ? _udonarium_core_system__WEBPACK_IMPORTED_MODULE_4__["Network"].peerContext.userId : _udonarium_core_system_network_peer_context__WEBPACK_IMPORTED_MODULE_3__["PeerContext"].generateId();
                        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_4__["Network"].open(userId, context.roomId, context.roomName, password);
                        _udonarium_peer_cursor__WEBPACK_IMPORTED_MODULE_5__["PeerCursor"].myCursor.peerId = _udonarium_core_system__WEBPACK_IMPORTED_MODULE_4__["Network"].peerId;
                        triedPeer = [];
                        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_4__["EventSystem"].register(triedPeer)
                            .on('OPEN_NETWORK', function (event) {
                            var e_2, _a;
                            console.log('LobbyComponent OPEN_PEER', event.data.peerId);
                            _udonarium_core_system__WEBPACK_IMPORTED_MODULE_4__["EventSystem"].unregister(triedPeer);
                            _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_2__["ObjectStore"].instance.clearDeleteHistory();
                            try {
                                for (var peerContexts_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(peerContexts), peerContexts_1_1 = peerContexts_1.next(); !peerContexts_1_1.done; peerContexts_1_1 = peerContexts_1.next()) {
                                    var context_1 = peerContexts_1_1.value;
                                    _udonarium_core_system__WEBPACK_IMPORTED_MODULE_4__["Network"].connect(context_1.peerId);
                                }
                            }
                            catch (e_2_1) { e_2 = { error: e_2_1 }; }
                            finally {
                                try {
                                    if (peerContexts_1_1 && !peerContexts_1_1.done && (_a = peerContexts_1.return)) _a.call(peerContexts_1);
                                }
                                finally { if (e_2) throw e_2.error; }
                            }
                            _udonarium_core_system__WEBPACK_IMPORTED_MODULE_4__["EventSystem"].register(triedPeer)
                                .on('CONNECT_PEER', function (event) {
                                console.log('連線成功！', event.data.peerId);
                                triedPeer.push(event.data.peerId);
                                console.log('連線成功 ' + triedPeer.length + '/' + peerContexts.length);
                                if (peerContexts.length <= triedPeer.length) {
                                    _this.resetNetwork();
                                    _udonarium_core_system__WEBPACK_IMPORTED_MODULE_4__["EventSystem"].unregister(triedPeer);
                                }
                            })
                                .on('DISCONNECT_PEER', function (event) {
                                console.warn('連線失敗', event.data.peerId);
                                triedPeer.push(event.data.peerId);
                                console.warn('連線失敗 ' + triedPeer.length + '/' + peerContexts.length);
                                if (peerContexts.length <= triedPeer.length) {
                                    _this.resetNetwork();
                                    _udonarium_core_system__WEBPACK_IMPORTED_MODULE_4__["EventSystem"].unregister(triedPeer);
                                }
                            });
                        });
                        return [2 /*return*/];
                }
            });
        });
    };
    LobbyComponent.prototype.resetNetwork = function () {
        if (_udonarium_core_system__WEBPACK_IMPORTED_MODULE_4__["Network"].peerContexts.length < 1) {
            _udonarium_core_system__WEBPACK_IMPORTED_MODULE_4__["Network"].open();
            _udonarium_peer_cursor__WEBPACK_IMPORTED_MODULE_5__["PeerCursor"].myCursor.peerId = _udonarium_core_system__WEBPACK_IMPORTED_MODULE_4__["Network"].peerId;
        }
    };
    LobbyComponent.prototype.showRoomSetting = function () {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function () {
            return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"])(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.modalService.open(component_room_setting_room_setting_component__WEBPACK_IMPORTED_MODULE_7__["RoomSettingComponent"], { width: 700, height: 400, left: 0, top: 400 })];
                    case 1:
                        _a.sent();
                        this.reload();
                        this.help = '點擊“更新列表”按鈕以顯示可連接房間列表。';
                        return [2 /*return*/];
                }
            });
        });
    };
    LobbyComponent.ɵfac = function LobbyComponent_Factory(t) { return new (t || LobbyComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdirectiveInject"](service_panel_service__WEBPACK_IMPORTED_MODULE_8__["PanelService"]), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdirectiveInject"](service_modal_service__WEBPACK_IMPORTED_MODULE_9__["ModalService"])); };
    LobbyComponent.ɵcmp = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdefineComponent"]({ type: LobbyComponent, selectors: [["lobby"]], decls: 3, vars: 2, consts: [[4, "ngIf", "ngIfElse"], ["other_content", ""], [3, "disabled", "click"], [3, "click"], [4, "ngIf"], ["style", "font-size: 12px;", 4, "ngIf"], [1, "room-list"], [1, "room-name"], [4, "ngFor", "ngForOf"], [1, "is-small-font"], ["type", "submit", 3, "disabled", "click", 4, "ngIf"], [1, "material-icons", 2, "vertical-align", "middle", "font-size", "0.9rem"], ["type", "submit", 3, "disabled", "click"], [2, "font-size", "12px"]], template: function LobbyComponent_Template(rf, ctx) { if (rf & 1) {
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](0, LobbyComponent_div_0_Template, 8, 3, "div", 0);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](1, LobbyComponent_ng_template_1_Template, 4, 0, "ng-template", null, 1, _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplateRefExtractor"]);
        } if (rf & 2) {
            var _r1 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵreference"](2);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", !ctx.isConnected)("ngIfElse", _r1);
        } }, directives: [_angular_common__WEBPACK_IMPORTED_MODULE_10__["NgIf"], _angular_common__WEBPACK_IMPORTED_MODULE_10__["NgForOf"]], styles: [".box[_ngcontent-%COMP%] {\r\n  border-bottom:1px dotted #888;\r\n}\r\n.image[_ngcontent-%COMP%] {\r\n  padding: 0px;\r\n  width: 64px;\r\n  height: 64px;\r\n  display: inline-block;\r\n  vertical-align: top;\r\n}\r\n.contain[_ngcontent-%COMP%] {\r\n  background-position: center center;\r\n  background-repeat: no-repeat;\r\n  background-size: contain;\r\n}\r\n.room-list[_ngcontent-%COMP%] {\r\n  font-size: 12px;\r\n  border: 0;\r\n  border-spacing: 0;\r\n  padding: 0;\r\n  width: 100%;\r\n  max-width: 100%;\r\n  white-space: nowrap;\r\n}\r\n.room-list[_ngcontent-%COMP%]    > tr[_ngcontent-%COMP%]    > *[_ngcontent-%COMP%] {\r\n  padding: 1px 0.5em;\r\n  text-align: center;\r\n}\r\n.room-name[_ngcontent-%COMP%] {\r\n  white-space: normal;\r\n  word-wrap: break-word;\r\n  overflow-wrap: anywhere;\r\n  word-break: break-word;\r\n  min-width: 50%;\r\n}\r\n.is-small-font[_ngcontent-%COMP%] {\r\n  font-size: 10px;\r\n}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxvYmJ5LmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSw2QkFBNkI7QUFDL0I7QUFDQTtFQUNFLFlBQVk7RUFDWixXQUFXO0VBQ1gsWUFBWTtFQUNaLHFCQUFxQjtFQUNyQixtQkFBbUI7QUFDckI7QUFFQTtFQUNFLGtDQUFrQztFQUNsQyw0QkFBNEI7RUFDNUIsd0JBQXdCO0FBQzFCO0FBRUE7RUFDRSxlQUFlO0VBQ2YsU0FBUztFQUNULGlCQUFpQjtFQUNqQixVQUFVO0VBQ1YsV0FBVztFQUNYLGVBQWU7RUFDZixtQkFBbUI7QUFDckI7QUFFQTtFQUNFLGtCQUFrQjtFQUNsQixrQkFBa0I7QUFDcEI7QUFFQTtFQUNFLG1CQUFtQjtFQUNuQixxQkFBcUI7RUFDckIsdUJBQXVCO0VBQ3ZCLHNCQUFzQjtFQUN0QixjQUFjO0FBQ2hCO0FBRUE7RUFDRSxlQUFlO0FBQ2pCIiwiZmlsZSI6ImxvYmJ5LmNvbXBvbmVudC5jc3MiLCJzb3VyY2VzQ29udGVudCI6WyIuYm94IHtcclxuICBib3JkZXItYm90dG9tOjFweCBkb3R0ZWQgIzg4ODtcclxufVxyXG4uaW1hZ2Uge1xyXG4gIHBhZGRpbmc6IDBweDtcclxuICB3aWR0aDogNjRweDtcclxuICBoZWlnaHQ6IDY0cHg7XHJcbiAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xyXG4gIHZlcnRpY2FsLWFsaWduOiB0b3A7XHJcbn1cclxuXHJcbi5jb250YWluIHtcclxuICBiYWNrZ3JvdW5kLXBvc2l0aW9uOiBjZW50ZXIgY2VudGVyO1xyXG4gIGJhY2tncm91bmQtcmVwZWF0OiBuby1yZXBlYXQ7XHJcbiAgYmFja2dyb3VuZC1zaXplOiBjb250YWluO1xyXG59XHJcblxyXG4ucm9vbS1saXN0IHtcclxuICBmb250LXNpemU6IDEycHg7XHJcbiAgYm9yZGVyOiAwO1xyXG4gIGJvcmRlci1zcGFjaW5nOiAwO1xyXG4gIHBhZGRpbmc6IDA7XHJcbiAgd2lkdGg6IDEwMCU7XHJcbiAgbWF4LXdpZHRoOiAxMDAlO1xyXG4gIHdoaXRlLXNwYWNlOiBub3dyYXA7XHJcbn1cclxuXHJcbi5yb29tLWxpc3QgPiB0ciA+ICoge1xyXG4gIHBhZGRpbmc6IDFweCAwLjVlbTtcclxuICB0ZXh0LWFsaWduOiBjZW50ZXI7XHJcbn1cclxuXHJcbi5yb29tLW5hbWUge1xyXG4gIHdoaXRlLXNwYWNlOiBub3JtYWw7XHJcbiAgd29yZC13cmFwOiBicmVhay13b3JkO1xyXG4gIG92ZXJmbG93LXdyYXA6IGFueXdoZXJlO1xyXG4gIHdvcmQtYnJlYWs6IGJyZWFrLXdvcmQ7XHJcbiAgbWluLXdpZHRoOiA1MCU7XHJcbn1cclxuXHJcbi5pcy1zbWFsbC1mb250IHtcclxuICBmb250LXNpemU6IDEwcHg7XHJcbn1cclxuIl19 */"] });
    return LobbyComponent;
}());

/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵsetClassMetadata"](LobbyComponent, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_1__["Component"],
        args: [{
                selector: 'lobby',
                templateUrl: './lobby.component.html',
                styleUrls: ['./lobby.component.css'],
            }]
    }], function () { return [{ type: service_panel_service__WEBPACK_IMPORTED_MODULE_8__["PanelService"] }, { type: service_modal_service__WEBPACK_IMPORTED_MODULE_9__["ModalService"] }]; }, null); })();


/***/ }),

/***/ "taL5":
/*!******************************************!*\
  !*** ./src/app/service/batch.service.ts ***!
  \******************************************/
/*! exports provided: BatchService */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BatchService", function() { return BatchService; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "fXoL");


var BatchService = /** @class */ (function () {
    function BatchService() {
        this.batchTask = new Map();
        this.batchTaskTimer = null;
    }
    BatchService.prototype.add = function (task, key) {
        var _this = this;
        if (key === void 0) { key = {}; }
        this.batchTask.set(key, task);
        if (this.batchTaskTimer != null)
            return;
        this.execBatch();
        this.batchTaskTimer = setInterval(function () {
            if (0 < _this.batchTask.size) {
                _this.execBatch();
            }
            else {
                clearInterval(_this.batchTaskTimer);
                _this.batchTaskTimer = null;
            }
        }, 66);
    };
    BatchService.prototype.remove = function (key) {
        if (key === void 0) { key = {}; }
        this.batchTask.delete(key);
    };
    BatchService.prototype.execBatch = function () {
        this.batchTask.forEach(function (task) { return task(); });
        this.batchTask.clear();
    };
    BatchService.ɵfac = function BatchService_Factory(t) { return new (t || BatchService)(); };
    BatchService.ɵprov = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineInjectable"]({ token: BatchService, factory: BatchService.ɵfac, providedIn: 'root' });
    return BatchService;
}());

/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](BatchService, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Injectable"],
        args: [{
                providedIn: 'root'
            }]
    }], function () { return []; }, null); })();


/***/ }),

/***/ "ts4F":
/*!************************************************!*\
  !*** ./src/app/directive/tooltip.directive.ts ***!
  \************************************************/
/*! exports provided: TooltipDirective */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TooltipDirective", function() { return TooltipDirective; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "fXoL");
/* harmony import */ var _udonarium_core_system__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @udonarium/core/system */ "yNnI");
/* harmony import */ var component_overview_panel_overview_panel_component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! component/overview-panel/overview-panel.component */ "BLsz");
/* harmony import */ var service_context_menu_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! service/context-menu.service */ "9FhF");
/* harmony import */ var service_pointer_device_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! service/pointer-device.service */ "GPP8");






var TooltipDirective = /** @class */ (function () {
    function TooltipDirective(ngZone, viewContainerRef, componentFactoryResolver, pointerDeviceService) {
        var _this = this;
        this.ngZone = ngZone;
        this.viewContainerRef = viewContainerRef;
        this.componentFactoryResolver = componentFactoryResolver;
        this.pointerDeviceService = pointerDeviceService;
        this.callbackOnMouseEnter = function (e) { return _this.onMouseEnter(e); };
        this.callbackOnMouseLeave = function (e) { return _this.onMouseLeave(e); };
        this.callbackOnMouseDown = function (e) { return _this.onMouseDown(e); };
    }
    TooltipDirective.prototype.ngOnInit = function () { };
    TooltipDirective.prototype.ngAfterViewInit = function () {
        this.addEventListeners(this.viewContainerRef.element.nativeElement);
    };
    TooltipDirective.prototype.ngOnDestroy = function () {
        this.removeEventListeners(this.viewContainerRef.element.nativeElement);
        this.clearTimer();
        this.close();
    };
    TooltipDirective.prototype.onMouseEnter = function (e) {
        this.clearTimer();
        if (!this.tooltipComponentRef)
            this.startOpenTimer();
    };
    TooltipDirective.prototype.onMouseLeave = function (e) {
        this.clearTimer();
        if (this.tooltipComponentRef)
            this.startCloseTimer();
    };
    TooltipDirective.prototype.onMouseDown = function (e) {
        var _this = this;
        if (!this.tooltipComponentRef)
            return;
        if (!this.tooltipComponentRef.location.nativeElement.contains(e.target)
            && !this.viewContainerRef.element.nativeElement.contains(e.target)) {
            this.ngZone.run(function () { return _this.closeAll(); });
        }
    };
    TooltipDirective.prototype.startOpenTimer = function () {
        var _this = this;
        var pointerX = this.pointerDeviceService.pointerX;
        var pointerY = this.pointerDeviceService.pointerY;
        this.openTooltipTimer = setTimeout(function () {
            _this.openTooltipTimer = null;
            var magnitude = Math.pow((pointerX - _this.pointerDeviceService.pointerX), 2) + Math.pow((pointerY - _this.pointerDeviceService.pointerY), 2);
            if (4 < magnitude) {
                _this.startOpenTimer();
            }
            else {
                _this.ngZone.run(function () { return _this.open(); });
            }
        }, 100);
    };
    TooltipDirective.prototype.startCloseTimer = function () {
        var _this = this;
        this.closeTooltipTimer = setTimeout(function () {
            _this.closeTooltipTimer = null;
            if (_this.tooltipComponentRef && _this.tooltipComponentRef.location.nativeElement.contains(document.activeElement)) {
                _this.startCloseTimer();
            }
            else {
                _this.ngZone.run(function () { return _this.closeAll(); });
            }
        }, 400);
    };
    TooltipDirective.prototype.clearTimer = function () {
        if (this.closeTooltipTimer)
            clearTimeout(this.closeTooltipTimer);
        if (this.openTooltipTimer)
            clearTimeout(this.openTooltipTimer);
        this.closeTooltipTimer = this.openTooltipTimer = null;
    };
    TooltipDirective.prototype.open = function () {
        var _this = this;
        this.closeAll();
        if (this.pointerDeviceService.isDragging)
            return;
        var parentViewContainerRef = service_context_menu_service__WEBPACK_IMPORTED_MODULE_3__["ContextMenuService"].defaultParentViewContainerRef;
        var injector = parentViewContainerRef.injector;
        var panelComponentFactory = this.componentFactoryResolver.resolveComponentFactory(component_overview_panel_overview_panel_component__WEBPACK_IMPORTED_MODULE_2__["OverviewPanelComponent"]);
        this.tooltipComponentRef = parentViewContainerRef.createComponent(panelComponentFactory, parentViewContainerRef.length, injector);
        this.tooltipComponentRef.instance.tabletopObject = this.tabletopObject;
        this.tooltipComponentRef.instance.left = this.pointerDeviceService.pointerX;
        this.tooltipComponentRef.instance.top = this.pointerDeviceService.pointerY;
        this.addEventListeners(this.tooltipComponentRef.location.nativeElement);
        this.ngZone.runOutsideAngular(function () {
            document.body.addEventListener('touchstart', _this.callbackOnMouseDown, true);
            document.body.addEventListener('mousedown', _this.callbackOnMouseDown, true);
        });
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_1__["EventSystem"].register(this)
            .on('DELETE_GAME_OBJECT', -1000, function (event) {
            if (_this.tabletopObject && _this.tabletopObject.identifier === event.data.identifier)
                _this.closeAll();
        });
        this.tooltipComponentRef.onDestroy(function () {
            _this.removeEventListeners(_this.tooltipComponentRef.location.nativeElement);
            document.body.removeEventListener('touchstart', _this.callbackOnMouseDown, true);
            document.body.removeEventListener('mousedown', _this.callbackOnMouseDown, true);
            _this.clearTimer();
            _this.tooltipComponentRef = null;
            _udonarium_core_system__WEBPACK_IMPORTED_MODULE_1__["EventSystem"].unregister(_this);
        });
        TooltipDirective.activeTooltips.push(this.tooltipComponentRef);
    };
    TooltipDirective.prototype.close = function () {
        if (!this.tooltipComponentRef)
            return;
        var index = TooltipDirective.activeTooltips.indexOf(this.tooltipComponentRef);
        if (0 <= index)
            TooltipDirective.activeTooltips.splice(index, 1);
        this.tooltipComponentRef.destroy();
        this.tooltipComponentRef = null;
    };
    TooltipDirective.prototype.closeAll = function () {
        TooltipDirective.activeTooltips.forEach(function (componentRef) { return componentRef.destroy(); });
        TooltipDirective.activeTooltips = [];
        this.close();
    };
    TooltipDirective.prototype.addEventListeners = function (element) {
        var _this = this;
        this.ngZone.runOutsideAngular(function () {
            element.addEventListener('mouseenter', _this.callbackOnMouseEnter, false);
            element.addEventListener('mouseleave', _this.callbackOnMouseLeave, false);
        });
    };
    TooltipDirective.prototype.removeEventListeners = function (element) {
        element.removeEventListener('mouseenter', this.callbackOnMouseEnter, false);
        element.removeEventListener('mouseleave', this.callbackOnMouseLeave, false);
    };
    TooltipDirective.activeTooltips = [];
    TooltipDirective.ɵfac = function TooltipDirective_Factory(t) { return new (t || TooltipDirective)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["NgZone"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewContainerRef"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["ComponentFactoryResolver"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](service_pointer_device_service__WEBPACK_IMPORTED_MODULE_4__["PointerDeviceService"])); };
    TooltipDirective.ɵdir = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineDirective"]({ type: TooltipDirective, selectors: [["", "appTooltip", ""]], inputs: { tabletopObject: ["appTooltip", "tabletopObject"] } });
    return TooltipDirective;
}());

/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](TooltipDirective, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Directive"],
        args: [{
                selector: '[appTooltip]'
            }]
    }], function () { return [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["NgZone"] }, { type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewContainerRef"] }, { type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ComponentFactoryResolver"] }, { type: service_pointer_device_service__WEBPACK_IMPORTED_MODULE_4__["PointerDeviceService"] }]; }, { tabletopObject: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"],
            args: ['appTooltip']
        }] }); })();


/***/ }),

/***/ "uH+U":
/*!***************************************!*\
  !*** ./src/app/class/chat-palette.ts ***!
  \***************************************/
/*! exports provided: ChatPalette, BuffPalette, DiceTablePalette */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ChatPalette", function() { return ChatPalette; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BuffPalette", function() { return BuffPalette; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DiceTablePalette", function() { return DiceTablePalette; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "mrSG");
/* harmony import */ var _core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./core/synchronize-object/decorator */ "1lIu");
/* harmony import */ var _core_synchronize_object_object_node__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./core/synchronize-object/object-node */ "F67Z");
/* harmony import */ var _core_system_util_string_util__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./core/system/util/string-util */ "baV6");




var ChatPalette = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"])(ChatPalette, _super);
    function ChatPalette() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.dicebot = 'DiceBot';
        _this._palettes = [];
        _this._paletteLines = [];
        _this._paletteVariables = [];
        _this.isAnalized = false;
        return _this;
    }
    Object.defineProperty(ChatPalette.prototype, "paletteLines", {
        //TODO: キャラシ項目のコピー
        get: function () {
            if (!this.isAnalized)
                this.parse(this.value);
            return this._paletteLines;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ChatPalette.prototype, "paletteVariables", {
        get: function () {
            if (!this.isAnalized)
                this.parse(this.value);
            return this._paletteVariables;
        },
        enumerable: false,
        configurable: true
    });
    ChatPalette.prototype.getPalette = function () {
        if (!this.isAnalized)
            this.parse(this.value);
        return this._palettes;
    };
    ChatPalette.prototype.setPalette = function (paletteSource) {
        this.value = paletteSource;
        this.isAnalized = false;
    };
    ChatPalette.prototype.evaluate = function (line, extendVariables) {
        var _this = this;
        var evaluate = '';
        if (typeof line === 'string') {
            evaluate = line;
        }
        else {
            evaluate = line.palette;
        }
        console.log(evaluate);
        var limit = 128;
        var loop = 0;
        var isContinue = true;
        while (isContinue) {
            loop++;
            isContinue = false;
            evaluate = evaluate.replace(/[{｛]\s*([^{}｛｝]+)\s*[}｝]/g, function (match, name) {
                var e_1, _a;
                name = _core_system_util_string_util__WEBPACK_IMPORTED_MODULE_3__["StringUtil"].toHalfWidth(name);
                console.log(name);
                isContinue = true;
                try {
                    for (var _b = (e_1 = void 0, Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(_this.paletteVariables)), _c = _b.next(); !_c.done; _c = _b.next()) {
                        var variable = _c.value;
                        if (variable.name == name)
                            return variable.value;
                    }
                }
                catch (e_1_1) { e_1 = { error: e_1_1 }; }
                finally {
                    try {
                        if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
                    }
                    finally { if (e_1) throw e_1.error; }
                }
                if (extendVariables) {
                    var element = extendVariables.getFirstElementByName(name);
                    if (element)
                        return element.isNumberResource ? element.currentValue + '' : element.value + '';
                }
                return '';
            });
            if (limit < loop)
                isContinue = false;
        }
        return evaluate;
    };
    ChatPalette.prototype.parse = function (paletteSource) {
        var e_2, _a;
        this._palettes = paletteSource.split('\n');
        this._paletteLines = [];
        this._paletteVariables = [];
        try {
            for (var _b = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(this._palettes), _c = _b.next(); !_c.done; _c = _b.next()) {
                var palette = _c.value;
                var variable = this.parseVariable(palette);
                if (variable) {
                    this._paletteVariables.push(variable);
                    continue;
                }
                var line = { palette: palette };
                this._paletteLines.push(line);
            }
        }
        catch (e_2_1) { e_2 = { error: e_2_1 }; }
        finally {
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            }
            finally { if (e_2) throw e_2.error; }
        }
        this.isAnalized = true;
    };
    ChatPalette.prototype.parseVariable = function (palette) {
        var array = /^\s*[/／]{2}([^=＝{}｛｝\s]+)\s*[=＝]\s*(.+)\s*/gi.exec(palette);
        if (!array)
            return null;
        var variable = {
            name: _core_system_util_string_util__WEBPACK_IMPORTED_MODULE_3__["StringUtil"].toHalfWidth(array[1]),
            value: array[2]
        };
        return variable;
    };
    // override
    ChatPalette.prototype.apply = function (context) {
        _super.prototype.apply.call(this, context);
        this.isAnalized = false;
    };
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_1__["SyncVar"])()
    ], ChatPalette.prototype, "dicebot", void 0);
    ChatPalette = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_1__["SyncObject"])('chat-palette')
    ], ChatPalette);
    return ChatPalette;
}(_core_synchronize_object_object_node__WEBPACK_IMPORTED_MODULE_2__["ObjectNode"]));

var BuffPalette = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"])(BuffPalette, _super);
    function BuffPalette() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    BuffPalette = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_1__["SyncObject"])('buff-palette')
    ], BuffPalette);
    return BuffPalette;
}(ChatPalette));

var DiceTablePalette = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"])(DiceTablePalette, _super);
    function DiceTablePalette() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    DiceTablePalette = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_1__["SyncObject"])('dice-table-palette')
    ], DiceTablePalette);
    return DiceTablePalette;
}(ChatPalette));



/***/ }),

/***/ "veT5":
/*!***************************************!*\
  !*** ./src/app/class/sound-effect.ts ***!
  \***************************************/
/*! exports provided: PresetSound, SoundEffect */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PresetSound", function() { return PresetSound; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SoundEffect", function() { return SoundEffect; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "mrSG");
/* harmony import */ var _core_file_storage_audio_player__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./core/file-storage/audio-player */ "zeEm");
/* harmony import */ var _core_file_storage_audio_storage__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./core/file-storage/audio-storage */ "Prh6");
/* harmony import */ var _core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./core/synchronize-object/decorator */ "1lIu");
/* harmony import */ var _core_synchronize_object_game_object__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./core/synchronize-object/game-object */ "xdgh");
/* harmony import */ var _core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./core/synchronize-object/object-store */ "hm7o");
/* harmony import */ var _core_system__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./core/system */ "yNnI");







var PresetSound = /** @class */ (function () {
    function PresetSound() {
    }
    PresetSound.dicePick = '';
    PresetSound.dicePut = '';
    PresetSound.diceRoll1 = '';
    PresetSound.diceRoll2 = '';
    PresetSound.cardDraw = '';
    PresetSound.cardPick = '';
    PresetSound.cardPut = '';
    PresetSound.cardShuffle = '';
    PresetSound.piecePick = '';
    PresetSound.piecePut = '';
    PresetSound.blockPick = '';
    PresetSound.blockPut = '';
    PresetSound.lock = '';
    PresetSound.unlock = '';
    PresetSound.sweep = '';
    return PresetSound;
}());

var SoundEffect = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"])(SoundEffect, _super);
    function SoundEffect() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    SoundEffect_1 = SoundEffect;
    // GameObject Lifecycle
    SoundEffect.prototype.onStoreAdded = function () {
        _super.prototype.onStoreAdded.call(this);
        _core_system__WEBPACK_IMPORTED_MODULE_6__["EventSystem"].register(this)
            .on('SOUND_EFFECT', function (event) {
            _core_file_storage_audio_player__WEBPACK_IMPORTED_MODULE_1__["AudioPlayer"].play(_core_file_storage_audio_storage__WEBPACK_IMPORTED_MODULE_2__["AudioStorage"].instance.get(event.data), 0.5);
        })
            .on('SEND_MESSAGE', function (event) {
            var chatMessage = _core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_5__["ObjectStore"].instance.get(event.data.messageIdentifier);
            if (!chatMessage || !chatMessage.isSendFromSelf || !chatMessage.isDicebot)
                return;
            if (Math.random() < 0.5) {
                SoundEffect_1.play(PresetSound.diceRoll1);
            }
            else {
                SoundEffect_1.play(PresetSound.diceRoll2);
            }
        });
    };
    // GameObject Lifecycle
    SoundEffect.prototype.onStoreRemoved = function () {
        _super.prototype.onStoreRemoved.call(this);
        _core_system__WEBPACK_IMPORTED_MODULE_6__["EventSystem"].unregister(this);
    };
    SoundEffect.prototype.play = function (arg) {
        SoundEffect_1.play(arg);
    };
    SoundEffect.play = function (arg) {
        var identifier = '';
        if (typeof arg === 'string') {
            identifier = arg;
        }
        else {
            identifier = arg.identifier;
        }
        SoundEffect_1._play(identifier);
    };
    SoundEffect._play = function (identifier) {
        _core_system__WEBPACK_IMPORTED_MODULE_6__["EventSystem"].call('SOUND_EFFECT', identifier);
    };
    var SoundEffect_1;
    SoundEffect = SoundEffect_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_3__["SyncObject"])('sound-effect')
    ], SoundEffect);
    return SoundEffect;
}(_core_synchronize_object_game_object__WEBPACK_IMPORTED_MODULE_4__["GameObject"]));



/***/ }),

/***/ "w5+g":
/*!*********************************************************!*\
  !*** ./src/app/class/core/system/util/promise-queue.ts ***!
  \*********************************************************/
/*! exports provided: PromiseQueue */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PromiseQueue", function() { return PromiseQueue; });
var PromiseQueue = /** @class */ (function () {
    function PromiseQueue(name) {
        if (name === void 0) { name = 'Queue'; }
        this.name = name;
        this.queue = Promise.resolve();
        this._length = 0;
    }
    Object.defineProperty(PromiseQueue.prototype, "length", {
        get: function () { return this._length; },
        enumerable: false,
        configurable: true
    });
    PromiseQueue.prototype.add = function (arg) {
        var _this = this;
        this._length++;
        console.log(this.name + " add: " + this._length);
        if (typeof arg.then == 'function') {
            this.queue = this.queue.then(function () { return arg; }); // promise
        }
        else if (0 < arg.length) {
            this.queue = this.queue.then(function () { return new Promise(arg); }); // executor
        }
        else {
            this.queue = this.queue.then(arg); // task
        }
        var ret = this.queue;
        this.queue = this.queue.catch(function (reason) {
            console.error(reason);
        });
        this.queue = this.queue.then(function () {
            _this._length--;
            console.log(_this.name + " done: " + _this._length);
        });
        return ret;
    };
    return PromiseQueue;
}());



/***/ }),

/***/ "wBZT":
/*!**********************************************************!*\
  !*** ./src/app/class/core/file-storage/file-archiver.ts ***!
  \**********************************************************/
/*! exports provided: FileArchiver */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FileArchiver", function() { return FileArchiver; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "mrSG");
/* harmony import */ var file_saver__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! file-saver */ "Iab2");
/* harmony import */ var file_saver__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(file_saver__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var jszip_dist_jszip_min_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jszip/dist/jszip.min.js */ "xOOu");
/* harmony import */ var jszip_dist_jszip_min_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(jszip_dist_jszip_min_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _system__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../system */ "yNnI");
/* harmony import */ var _system_util_xml_util__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../system/util/xml-util */ "cfGu");
/* harmony import */ var _audio_storage__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./audio-storage */ "Prh6");
/* harmony import */ var _file_reader_util__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./file-reader-util */ "N0uT");
/* harmony import */ var _image_storage__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./image-storage */ "JQpJ");
/* harmony import */ var _mime_type__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./mime-type */ "NVMP");









var MEGA_BYTE = 1024 * 1024;
var FileArchiver = /** @class */ (function () {
    function FileArchiver() {
        this.maxImageSize = 2 * MEGA_BYTE;
        this.maxAudioeSize = 10 * MEGA_BYTE;
        console.log('FileArchiver ready...');
    }
    Object.defineProperty(FileArchiver, "instance", {
        get: function () {
            if (!FileArchiver._instance)
                FileArchiver._instance = new FileArchiver();
            return FileArchiver._instance;
        },
        enumerable: false,
        configurable: true
    });
    FileArchiver.prototype.initialize = function () {
        this.destroy();
        this.addEventListeners();
    };
    FileArchiver.prototype.destroy = function () {
        this.removeEventListeners();
    };
    FileArchiver.prototype.addEventListeners = function () {
        var _this = this;
        this.removeEventListeners();
        this.callbackOnDragEnter = function (e) { return _this.onDragEnter(e); };
        this.callbackOnDragOver = function (e) { return _this.onDragOver(e); };
        this.callbackOnDrop = function (e) { return _this.onDrop(e); };
        document.body.addEventListener('dragenter', this.callbackOnDragEnter, false);
        document.body.addEventListener('dragover', this.callbackOnDragOver, false);
        document.body.addEventListener('drop', this.callbackOnDrop, false);
    };
    FileArchiver.prototype.removeEventListeners = function () {
        document.body.removeEventListener('dragenter', this.callbackOnDragEnter, false);
        document.body.removeEventListener('dragover', this.callbackOnDragOver, false);
        document.body.removeEventListener('drop', this.callbackOnDrop, false);
        this.callbackOnDragEnter = null;
        this.callbackOnDragOver = null;
        this.callbackOnDrop = null;
    };
    FileArchiver.prototype.onDragEnter = function (event) {
        event.preventDefault();
    };
    ;
    FileArchiver.prototype.onDragOver = function (event) {
        event.preventDefault();
    };
    ;
    FileArchiver.prototype.onDrop = function (event) {
        event.preventDefault();
        console.log('onDrop', event.dataTransfer);
        var files = event.dataTransfer.files;
        this.load(files);
    };
    ;
    FileArchiver.prototype.load = function (files) {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function () {
            var loadFiles, loadFiles_1, loadFiles_1_1, file, e_1_1;
            var e_1, _a;
            return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"])(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        if (!files)
                            return [2 /*return*/];
                        loadFiles = files instanceof FileList ? toArrayOfFileList(files) : files;
                        _b.label = 1;
                    case 1:
                        _b.trys.push([1, 9, 10, 11]);
                        loadFiles_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(loadFiles), loadFiles_1_1 = loadFiles_1.next();
                        _b.label = 2;
                    case 2:
                        if (!!loadFiles_1_1.done) return [3 /*break*/, 8];
                        file = loadFiles_1_1.value;
                        return [4 /*yield*/, this.handleImage(file)];
                    case 3:
                        _b.sent();
                        return [4 /*yield*/, this.handleAudio(file)];
                    case 4:
                        _b.sent();
                        return [4 /*yield*/, this.handleText(file)];
                    case 5:
                        _b.sent();
                        return [4 /*yield*/, this.handleZip(file)];
                    case 6:
                        _b.sent();
                        _system__WEBPACK_IMPORTED_MODULE_3__["EventSystem"].trigger('FILE_LOADED', { file: file });
                        _b.label = 7;
                    case 7:
                        loadFiles_1_1 = loadFiles_1.next();
                        return [3 /*break*/, 2];
                    case 8: return [3 /*break*/, 11];
                    case 9:
                        e_1_1 = _b.sent();
                        e_1 = { error: e_1_1 };
                        return [3 /*break*/, 11];
                    case 10:
                        try {
                            if (loadFiles_1_1 && !loadFiles_1_1.done && (_a = loadFiles_1.return)) _a.call(loadFiles_1);
                        }
                        finally { if (e_1) throw e_1.error; }
                        return [7 /*endfinally*/];
                    case 11: return [2 /*return*/];
                }
            });
        });
    };
    FileArchiver.prototype.handleImage = function (file) {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function () {
            return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"])(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (file.type.indexOf('image/') < 0)
                            return [2 /*return*/];
                        if (this.maxImageSize < file.size) {
                            console.warn("File size limit exceeded. -> " + file.name + " (" + (file.size / 1024 / 1024).toFixed(2) + "MB)");
                            return [2 /*return*/];
                        }
                        console.log(file.name + ' type:' + file.type);
                        return [4 /*yield*/, _image_storage__WEBPACK_IMPORTED_MODULE_7__["ImageStorage"].instance.addAsync(file)];
                    case 1:
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    FileArchiver.prototype.handleAudio = function (file) {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function () {
            return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"])(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (file.type.indexOf('audio/') < 0)
                            return [2 /*return*/];
                        if (this.maxAudioeSize < file.size) {
                            console.warn("File size limit exceeded. -> " + file.name + " (" + (file.size / 1024 / 1024).toFixed(2) + "MB)");
                            return [2 /*return*/];
                        }
                        console.log(file.name + ' type:' + file.type);
                        return [4 /*yield*/, _audio_storage__WEBPACK_IMPORTED_MODULE_5__["AudioStorage"].instance.addAsync(file)];
                    case 1:
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    FileArchiver.prototype.handleText = function (file) {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function () {
            var xmlElement, _a, _b, reason_1;
            return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"])(this, function (_c) {
                switch (_c.label) {
                    case 0:
                        if (file.type.indexOf('text/') < 0)
                            return [2 /*return*/];
                        console.log(file.name + ' type:' + file.type);
                        _c.label = 1;
                    case 1:
                        _c.trys.push([1, 3, , 4]);
                        _b = (_a = _system_util_xml_util__WEBPACK_IMPORTED_MODULE_4__["XmlUtil"]).xml2element;
                        return [4 /*yield*/, _file_reader_util__WEBPACK_IMPORTED_MODULE_6__["FileReaderUtil"].readAsTextAsync(file)];
                    case 2:
                        xmlElement = _b.apply(_a, [_c.sent()]);
                        if (xmlElement)
                            _system__WEBPACK_IMPORTED_MODULE_3__["EventSystem"].trigger('XML_LOADED', { xmlElement: xmlElement });
                        return [3 /*break*/, 4];
                    case 3:
                        reason_1 = _c.sent();
                        console.warn(reason_1);
                        return [3 /*break*/, 4];
                    case 4: return [2 /*return*/];
                }
            });
        });
    };
    FileArchiver.prototype.handleZip = function (file) {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function () {
            var zip, reason_2, zipEntries, zipEntries_1, zipEntries_1_1, zipEntry, arraybuffer, reason_3, e_2_1;
            var e_2, _a;
            return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"])(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        if (!(0 <= file.type.indexOf('application/') || file.type.length < 1))
                            return [2 /*return*/];
                        zip = new jszip_dist_jszip_min_js__WEBPACK_IMPORTED_MODULE_2__();
                        _b.label = 1;
                    case 1:
                        _b.trys.push([1, 3, , 4]);
                        return [4 /*yield*/, zip.loadAsync(file)];
                    case 2:
                        zip = _b.sent();
                        return [3 /*break*/, 4];
                    case 3:
                        reason_2 = _b.sent();
                        console.warn(reason_2);
                        return [2 /*return*/];
                    case 4:
                        zipEntries = [];
                        zip.forEach(function (relativePath, zipEntry) { return zipEntries.push(zipEntry); });
                        _b.label = 5;
                    case 5:
                        _b.trys.push([5, 13, 14, 15]);
                        zipEntries_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(zipEntries), zipEntries_1_1 = zipEntries_1.next();
                        _b.label = 6;
                    case 6:
                        if (!!zipEntries_1_1.done) return [3 /*break*/, 12];
                        zipEntry = zipEntries_1_1.value;
                        _b.label = 7;
                    case 7:
                        _b.trys.push([7, 10, , 11]);
                        return [4 /*yield*/, zipEntry.async('arraybuffer')];
                    case 8:
                        arraybuffer = _b.sent();
                        console.log(zipEntry.name + ' 解凍...');
                        return [4 /*yield*/, this.load([new File([arraybuffer], zipEntry.name, { type: _mime_type__WEBPACK_IMPORTED_MODULE_8__["MimeType"].type(zipEntry.name) })])];
                    case 9:
                        _b.sent();
                        return [3 /*break*/, 11];
                    case 10:
                        reason_3 = _b.sent();
                        console.warn(reason_3);
                        return [3 /*break*/, 11];
                    case 11:
                        zipEntries_1_1 = zipEntries_1.next();
                        return [3 /*break*/, 6];
                    case 12: return [3 /*break*/, 15];
                    case 13:
                        e_2_1 = _b.sent();
                        e_2 = { error: e_2_1 };
                        return [3 /*break*/, 15];
                    case 14:
                        try {
                            if (zipEntries_1_1 && !zipEntries_1_1.done && (_a = zipEntries_1.return)) _a.call(zipEntries_1);
                        }
                        finally { if (e_2) throw e_2.error; }
                        return [7 /*endfinally*/];
                    case 15: return [2 /*return*/];
                }
            });
        });
    };
    FileArchiver.prototype.saveAsync = function (files, zipName, updateCallback) {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function () {
            var saveFiles, zip, saveFiles_1, saveFiles_1_1, file, blob;
            var e_3, _a;
            return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"])(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        if (!files)
                            return [2 /*return*/];
                        saveFiles = files instanceof FileList ? toArrayOfFileList(files) : files;
                        zip = new jszip_dist_jszip_min_js__WEBPACK_IMPORTED_MODULE_2__();
                        try {
                            for (saveFiles_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(saveFiles), saveFiles_1_1 = saveFiles_1.next(); !saveFiles_1_1.done; saveFiles_1_1 = saveFiles_1.next()) {
                                file = saveFiles_1_1.value;
                                zip.file(file.name, file);
                            }
                        }
                        catch (e_3_1) { e_3 = { error: e_3_1 }; }
                        finally {
                            try {
                                if (saveFiles_1_1 && !saveFiles_1_1.done && (_a = saveFiles_1.return)) _a.call(saveFiles_1);
                            }
                            finally { if (e_3) throw e_3.error; }
                        }
                        return [4 /*yield*/, zip.generateAsync({
                                type: 'blob',
                                compression: 'DEFLATE',
                                compressionOptions: {
                                    level: 6
                                }
                            }, updateCallback)];
                    case 1:
                        blob = _b.sent();
                        Object(file_saver__WEBPACK_IMPORTED_MODULE_1__["saveAs"])(blob, zipName + '.zip');
                        return [2 /*return*/];
                }
            });
        });
    };
    return FileArchiver;
}());

function toArrayOfFileList(fileList) {
    var files = [];
    var length = fileList.length;
    for (var i = 0; i < length; i++) {
        files.push(fileList[i]);
    }
    return files;
}


/***/ }),

/***/ "wPqI":
/*!****************************************************************!*\
  !*** ./src/app/component/chat-window/chat-window.component.ts ***!
  \****************************************************************/
/*! exports provided: ChatWindowComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ChatWindowComponent", function() { return ChatWindowComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "fXoL");
/* harmony import */ var _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @udonarium/core/synchronize-object/object-store */ "hm7o");
/* harmony import */ var _udonarium_core_system__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @udonarium/core/system */ "yNnI");
/* harmony import */ var _udonarium_peer_cursor__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @udonarium/peer-cursor */ "+UEV");
/* harmony import */ var component_chat_tab_setting_chat_tab_setting_component__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! component/chat-tab-setting/chat-tab-setting.component */ "yrmS");
/* harmony import */ var component_dice_table_setting_dice_table_setting_component__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! component/dice-table-setting/dice-table-setting.component */ "OBv1");
/* harmony import */ var service_chat_message_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! service/chat-message.service */ "PEfN");
/* harmony import */ var service_panel_service__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! service/panel.service */ "M9xM");
/* harmony import */ var service_pointer_device_service__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! service/pointer-device.service */ "GPP8");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @angular/common */ "ofXK");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @angular/forms */ "3Pt+");
/* harmony import */ var component_chat_tachie_chat_tachie_component__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! component/chat-tachie/chat-tachie.component */ "ZAwR");
/* harmony import */ var component_chat_input_chat_input_component__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! component/chat-input/chat-input.component */ "+l6h");
/* harmony import */ var component_chat_tab_chat_tab_component__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! component/chat-tab/chat-tab.component */ "Wiwm");
/* harmony import */ var component_badge_badge_component__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! component/badge/badge.component */ "xKeS");
















function ChatWindowComponent_chat_tab_2_Template(rf, ctx) { if (rf & 1) {
    var _r4 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "chat-tab", 11);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("onAddMessage", function ChatWindowComponent_chat_tab_2_Template_chat_tab_onAddMessage_0_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r4); var ctx_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](); return ctx_r3.scrollToBottom(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    var ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("chatTab", ctx_r0.chatTab);
} }
function ChatWindowComponent_div_3_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](1, "\u203B\u804A\u5929\u5206\u9801\u7684\u5167\u5BB9\u5DF2\u66F4\u65B0\u3002 \u8ACB\u91CD\u65B0\u9078\u64C7\u804A\u5929\u5206\u9801\u6216\u91CD\u65B0\u6253\u958B\u804A\u5929\u8996\u7A97\u3002");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} }
function ChatWindowComponent_label_8_badge_4_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](0, "badge", 14);
} if (rf & 2) {
    var chatTab_r5 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]().$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("count", chatTab_r5.unreadLength);
} }
function ChatWindowComponent_label_8_Template(rf, ctx) { if (rf & 1) {
    var _r9 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "label");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "input", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("ngModelChange", function ChatWindowComponent_label_8_Template_input_ngModelChange_1_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r9); var ctx_r8 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](); return ctx_r8.chatTabidentifier = $event; });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](2, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](4, ChatWindowComponent_label_8_badge_4_Template, 1, 1, "badge", 13);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    var chatTab_r5 = ctx.$implicit;
    var ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpropertyInterpolate"]("value", chatTab_r5.identifier);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngModel", ctx_r2.chatTabidentifier);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate"](chatTab_r5.name);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", chatTab_r5.hasUnread);
} }
var ChatWindowComponent = /** @class */ (function () {
    function ChatWindowComponent(chatMessageService, panelService, pointerDeviceService) {
        this.chatMessageService = chatMessageService;
        this.panelService = panelService;
        this.pointerDeviceService = pointerDeviceService;
        this.sendFrom = 'Guest';
        this._chatTabidentifier = '';
        this.testcount = 0;
        this.isAutoScroll = true;
        this.scrollToBottomTimer = null;
    }
    Object.defineProperty(ChatWindowComponent.prototype, "gameType", {
        get: function () { return this.chatMessageService.gameType; },
        set: function (gameType) { this.chatMessageService.gameType = gameType; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ChatWindowComponent.prototype, "chatTabidentifier", {
        get: function () { return this._chatTabidentifier; },
        set: function (chatTabidentifier) {
            var hasChanged = this._chatTabidentifier !== chatTabidentifier;
            this._chatTabidentifier = chatTabidentifier;
            this.updatePanelTitle();
            if (hasChanged) {
                this.scrollToBottom(true);
            }
        },
        enumerable: false,
        configurable: true
    });
    ChatWindowComponent.prototype.chatTabSwitchRelative = function (direction) {
        var _this = this;
        var chatTabs = this.chatMessageService.chatTabs;
        var index = chatTabs.findIndex(function (elm) { return elm.identifier == _this.chatTabidentifier; });
        if (index < 0) {
            return;
        }
        var nextIndex;
        if (index == chatTabs.length - 1 && direction == 1) {
            nextIndex = 0;
        }
        else if (index == 0 && direction == -1) {
            nextIndex = chatTabs.length - 1;
        }
        else {
            nextIndex = index + direction;
        }
        this.chatTabidentifier = chatTabs[nextIndex].identifier;
    };
    Object.defineProperty(ChatWindowComponent.prototype, "chatTab", {
        get: function () { return _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_1__["ObjectStore"].instance.get(this.chatTabidentifier); },
        enumerable: false,
        configurable: true
    });
    ChatWindowComponent.prototype.testadd = function () {
        this.chatTab.count++;
    };
    Object.defineProperty(ChatWindowComponent.prototype, "testmess", {
        get: function () {
            return this.chatTab.imageIdentifier;
        },
        enumerable: false,
        configurable: true
    });
    ChatWindowComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.sendFrom = _udonarium_peer_cursor__WEBPACK_IMPORTED_MODULE_3__["PeerCursor"].myCursor.identifier;
        this._chatTabidentifier = 0 < this.chatMessageService.chatTabs.length ? this.chatMessageService.chatTabs[0].identifier : '';
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_2__["EventSystem"].register(this)
            .on('MESSAGE_ADDED', function (event) {
            if (event.data.tabIdentifier !== _this.chatTabidentifier)
                return;
            var message = _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_1__["ObjectStore"].instance.get(event.data.messageIdentifier);
            if (message && message.isSendFromSelf) {
                _this.isAutoScroll = true;
            }
            else {
                _this.checkAutoScroll();
            }
            if (_this.isAutoScroll && _this.chatTab)
                _this.chatTab.markForRead();
        });
        Promise.resolve().then(function () { return _this.updatePanelTitle(); });
    };
    ChatWindowComponent.prototype.ngAfterViewInit = function () {
        this.scrollToBottom(true);
    };
    ChatWindowComponent.prototype.ngOnDestroy = function () {
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_2__["EventSystem"].unregister(this);
    };
    // @TODO やり方はもう少し考えた方がいいい
    ChatWindowComponent.prototype.scrollToBottom = function (isForce) {
        var _this = this;
        if (isForce === void 0) { isForce = false; }
        if (isForce)
            this.isAutoScroll = true;
        if (this.scrollToBottomTimer != null || !this.isAutoScroll)
            return;
        this.scrollToBottomTimer = setTimeout(function () {
            if (_this.chatTab)
                _this.chatTab.markForRead();
            _this.scrollToBottomTimer = null;
            _this.isAutoScroll = false;
            if (_this.panelService.scrollablePanel) {
                _this.panelService.scrollablePanel.scrollTop = _this.panelService.scrollablePanel.scrollHeight;
                var event_1 = new CustomEvent('scrolltobottom', {});
                _this.panelService.scrollablePanel.dispatchEvent(event_1);
            }
        }, 0);
    };
    // @TODO
    ChatWindowComponent.prototype.checkAutoScroll = function () {
        if (!this.panelService.scrollablePanel)
            return;
        var top = this.panelService.scrollablePanel.scrollHeight - this.panelService.scrollablePanel.clientHeight;
        if (top - 150 <= this.panelService.scrollablePanel.scrollTop) {
            this.isAutoScroll = true;
        }
        else {
            this.isAutoScroll = false;
        }
    };
    ChatWindowComponent.prototype.updatePanelTitle = function () {
        if (this.chatTab) {
            this.panelService.title = 'チャットウィンドウ - ' + this.chatTab.name;
            this.panelService.chatTab = this.chatTab;
        }
        else {
            this.panelService.title = 'チャットウィンドウ';
            this.panelService.chatTab = null;
        }
    };
    ChatWindowComponent.prototype.onSelectedTab = function (identifier) {
        this.updatePanelTitle();
    };
    ChatWindowComponent.prototype.showTabSetting = function () {
        var coordinate = this.pointerDeviceService.pointers[0];
        var option = { left: coordinate.x - 250, top: coordinate.y - 175, width: 500, height: 350 };
        var component = this.panelService.open(component_chat_tab_setting_chat_tab_setting_component__WEBPACK_IMPORTED_MODULE_4__["ChatTabSettingComponent"], option);
        component.selectedTab = this.chatTab;
    };
    ChatWindowComponent.prototype.showDiceTableSetting = function () {
        var coordinate = this.pointerDeviceService.pointers[0];
        var option = { left: coordinate.x + 50, top: coordinate.y - 450, width: 650, height: 400 };
        var component = this.panelService.open(component_dice_table_setting_dice_table_setting_component__WEBPACK_IMPORTED_MODULE_5__["DiceTableSettingComponent"], option);
    };
    ChatWindowComponent.prototype.sendChat = function (value) {
        if (this.chatTab) {
            this.chatMessageService.sendMessage(this.chatTab, value.text, value.gameSystem, value.sendFrom, value.sendTo, value.tachieNum, value.messColor);
        }
    };
    ChatWindowComponent.prototype.trackByChatTab = function (index, chatTab) {
        return chatTab.identifier;
    };
    ChatWindowComponent.ɵfac = function ChatWindowComponent_Factory(t) { return new (t || ChatWindowComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](service_chat_message_service__WEBPACK_IMPORTED_MODULE_6__["ChatMessageService"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](service_panel_service__WEBPACK_IMPORTED_MODULE_7__["PanelService"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](service_pointer_device_service__WEBPACK_IMPORTED_MODULE_8__["PointerDeviceService"])); };
    ChatWindowComponent.ɵcmp = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineComponent"]({ type: ChatWindowComponent, selectors: [["chat-window"]], decls: 18, vars: 8, consts: [[1, "component"], [1, "log"], [3, "chatTab", "onAddMessage", 4, "ngIf"], [4, "ngIf"], [1, "sticky-bottom"], [3, "chatTabidentifier"], [1, "chat-tab"], [4, "ngFor", "ngForOf", "ngForTrackBy"], [1, "tab-setting", "small-font", 3, "click"], [1, "material-icons", "small-font"], [3, "chatTabidentifier", "gameType", "sendFrom", "gameTypeChange", "sendFromChange", "chat", "tabSwitch"], [3, "chatTab", "onAddMessage"], ["name", "chat-tab", "type", "radio", "ng-control", "options", 3, "value", "ngModel", "ngModelChange"], ["class", "badge", 3, "count", 4, "ngIf"], [1, "badge", 3, "count"]], template: function ChatWindowComponent_Template(rf, ctx) { if (rf & 1) {
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 0);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "div", 1);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](2, ChatWindowComponent_chat_tab_2_Template, 1, 1, "chat-tab", 2);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](3, ChatWindowComponent_div_3_Template, 2, 0, "div", 3);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](4, "div", 4);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](5, "form");
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](6, "chat-tachie", 5);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](7, "div", 6);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](8, ChatWindowComponent_label_8_Template, 5, 4, "label", 7);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](9, "button", 8);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function ChatWindowComponent_Template_button_click_9_listener() { return ctx.showTabSetting(); });
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](10, "i", 9);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](11, "settings");
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](12, "\u5206\u9801\u8A2D\u5B9A");
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](13, "button", 8);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function ChatWindowComponent_Template_button_click_13_listener() { return ctx.showDiceTableSetting(); });
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](14, "i", 9);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](15, "settings");
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](16, "\u9AB0\u5B50\u8868\u8A2D\u5B9A");
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](17, "chat-input", 10);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("gameTypeChange", function ChatWindowComponent_Template_chat_input_gameTypeChange_17_listener($event) { return ctx.gameType = $event; })("sendFromChange", function ChatWindowComponent_Template_chat_input_sendFromChange_17_listener($event) { return ctx.sendFrom = $event; })("chat", function ChatWindowComponent_Template_chat_input_chat_17_listener($event) { return ctx.sendChat($event); })("tabSwitch", function ChatWindowComponent_Template_chat_input_tabSwitch_17_listener($event) { return ctx.chatTabSwitchRelative($event); });
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        } if (rf & 2) {
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx.chatTab);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", !ctx.chatTab);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("chatTabidentifier", ctx.chatTabidentifier);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngForOf", ctx.chatMessageService.chatTabs)("ngForTrackBy", ctx.trackByChatTab);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](9);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("chatTabidentifier", ctx.chatTabidentifier)("gameType", ctx.gameType)("sendFrom", ctx.sendFrom);
        } }, directives: [_angular_common__WEBPACK_IMPORTED_MODULE_9__["NgIf"], _angular_forms__WEBPACK_IMPORTED_MODULE_10__["ɵangular_packages_forms_forms_y"], _angular_forms__WEBPACK_IMPORTED_MODULE_10__["NgControlStatusGroup"], _angular_forms__WEBPACK_IMPORTED_MODULE_10__["NgForm"], component_chat_tachie_chat_tachie_component__WEBPACK_IMPORTED_MODULE_11__["ChatTachieComponent"], _angular_common__WEBPACK_IMPORTED_MODULE_9__["NgForOf"], component_chat_input_chat_input_component__WEBPACK_IMPORTED_MODULE_12__["ChatInputComponent"], component_chat_tab_chat_tab_component__WEBPACK_IMPORTED_MODULE_13__["ChatTabComponent"], _angular_forms__WEBPACK_IMPORTED_MODULE_10__["RadioControlValueAccessor"], _angular_forms__WEBPACK_IMPORTED_MODULE_10__["DefaultValueAccessor"], _angular_forms__WEBPACK_IMPORTED_MODULE_10__["NgControlStatus"], _angular_forms__WEBPACK_IMPORTED_MODULE_10__["NgModel"], component_badge_badge_component__WEBPACK_IMPORTED_MODULE_14__["BadgeComponent"]], styles: [".loop-anime[_ngcontent-%COMP%] {\r\n  animation: anime1 1.3s infinite ease-in-out;\r\n}\r\n.component[_ngcontent-%COMP%] {\r\n  min-height: 100%;\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: space-between;\r\n  align-content: space-between;\r\n}\r\n.sticky-bottom[_ngcontent-%COMP%] {\r\n  position: sticky;\r\n  bottom : 0;\r\n  width: 100%;\r\n  background-color: rgba(240,218,189, 0.8);\r\n  border-top:1px dotted #666;\r\n  margin-bottom: 0;\r\n}\r\n.chat-tab[_ngcontent-%COMP%] {\r\n  padding : 5px;\r\n  -webkit-user-select: none;\r\n          user-select: none;\r\n}\r\n.chat-tab[_ngcontent-%COMP%]   label[_ngcontent-%COMP%] {\r\n  display: inline-block;\r\n  position: relative;\r\n}\r\n.chat-tab[_ngcontent-%COMP%]   input[type=\"radio\"][_ngcontent-%COMP%] {\r\n  display: none;\r\n}\r\n.chat-tab[_ngcontent-%COMP%]   input[type=\"radio\"][_ngcontent-%COMP%]    + div[_ngcontent-%COMP%] {\r\n  display: inline-block;\r\n  vertical-align: middle;\r\n  outline: 0;\r\n  font-size: 12px;\r\n  background-color: transparent;\r\n  color: #444; \r\n  border: solid 1px #555;\r\n  padding: 2px 8px;\r\n  margin: 2px;\r\n  border-radius: 100px;\r\n  cursor: pointer;\r\n}\r\n.chat-tab[_ngcontent-%COMP%]   input[type=\"radio\"][_ngcontent-%COMP%]    + div[_ngcontent-%COMP%]:hover {\r\n  background-color: #888;\r\n  color: #eee;\r\n  border: solid 1px #555;\r\n}\r\n.chat-tab[_ngcontent-%COMP%]   input[type=\"radio\"][_ngcontent-%COMP%]:checked    + div[_ngcontent-%COMP%] {\r\n  background: #555;\r\n  color: #CCC;\r\n}\r\n.badge[_ngcontent-%COMP%] {\r\n  position: absolute;\r\n  top: -4px;\r\n  right: 0;\r\n}\r\n.tab-setting[_ngcontent-%COMP%] {\r\n  background-color: transparent;\r\n  color: #444; \r\n  border: solid 1px #555;\r\n  padding: 2px 4px;\r\n  border-radius: 5px;\r\n  cursor: pointer;\r\n}\r\n.tab-setting[_ngcontent-%COMP%]:hover {\r\n  background-color: #888;\r\n  color: #eee;\r\n  border: solid 1px #555;\r\n}\r\n.small-font[_ngcontent-%COMP%] {\r\n  font-size: 12px;\r\n  vertical-align: middle;\r\n}\r\n.material-icons[_ngcontent-%COMP%] {\r\n  vertical-align: middle;\r\n  font-size: 1.0rem;\r\n}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNoYXQtd2luZG93LmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFFRSwyQ0FBMkM7QUFDN0M7QUFDQTtFQUNFLGdCQUFnQjtFQUNoQixhQUFhO0VBQ2Isc0JBQXNCO0VBQ3RCLDhCQUE4QjtFQUM5Qiw0QkFBNEI7QUFDOUI7QUFFQTtFQUNFLGdCQUFnQjtFQUNoQixVQUFVO0VBQ1YsV0FBVztFQUNYLHdDQUF3QztFQUN4QywwQkFBMEI7RUFDMUIsZ0JBQWdCO0FBQ2xCO0FBRUE7RUFDRSxhQUFhO0VBQ2IseUJBQWlCO1VBQWpCLGlCQUFpQjtBQUNuQjtBQUVBO0VBQ0UscUJBQXFCO0VBQ3JCLGtCQUFrQjtBQUNwQjtBQUVBO0VBQ0UsYUFBYTtBQUNmO0FBRUE7RUFDRSxxQkFBcUI7RUFDckIsc0JBQXNCO0VBQ3RCLFVBQVU7RUFDVixlQUFlO0VBQ2YsNkJBQTZCO0VBQzdCLFdBQVc7RUFDWCxzQkFBc0I7RUFDdEIsZ0JBQWdCO0VBQ2hCLFdBQVc7RUFDWCxvQkFBb0I7RUFDcEIsZUFBZTtBQUNqQjtBQUVBO0VBQ0Usc0JBQXNCO0VBQ3RCLFdBQVc7RUFDWCxzQkFBc0I7QUFDeEI7QUFFQTtFQUNFLGdCQUFnQjtFQUNoQixXQUFXO0FBQ2I7QUFFQTtFQUNFLGtCQUFrQjtFQUNsQixTQUFTO0VBQ1QsUUFBUTtBQUNWO0FBRUE7RUFDRSw2QkFBNkI7RUFDN0IsV0FBVztFQUNYLHNCQUFzQjtFQUN0QixnQkFBZ0I7RUFDaEIsa0JBQWtCO0VBQ2xCLGVBQWU7QUFDakI7QUFFQTtFQUNFLHNCQUFzQjtFQUN0QixXQUFXO0VBQ1gsc0JBQXNCO0FBQ3hCO0FBRUE7RUFDRSxlQUFlO0VBQ2Ysc0JBQXNCO0FBQ3hCO0FBRUE7RUFDRSxzQkFBc0I7RUFDdEIsaUJBQWlCO0FBQ25CIiwiZmlsZSI6ImNoYXQtd2luZG93LmNvbXBvbmVudC5jc3MiLCJzb3VyY2VzQ29udGVudCI6WyIubG9vcC1hbmltZSB7XHJcbiAgLXdlYmtpdC1hbmltYXRpb246IGFuaW1lMSAxLjNzIGluZmluaXRlIGVhc2UtaW4tb3V0O1xyXG4gIGFuaW1hdGlvbjogYW5pbWUxIDEuM3MgaW5maW5pdGUgZWFzZS1pbi1vdXQ7XHJcbn1cclxuLmNvbXBvbmVudCB7XHJcbiAgbWluLWhlaWdodDogMTAwJTtcclxuICBkaXNwbGF5OiBmbGV4O1xyXG4gIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XHJcbiAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xyXG4gIGFsaWduLWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XHJcbn1cclxuXHJcbi5zdGlja3ktYm90dG9tIHtcclxuICBwb3NpdGlvbjogc3RpY2t5O1xyXG4gIGJvdHRvbSA6IDA7XHJcbiAgd2lkdGg6IDEwMCU7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgyNDAsMjE4LDE4OSwgMC44KTtcclxuICBib3JkZXItdG9wOjFweCBkb3R0ZWQgIzY2NjtcclxuICBtYXJnaW4tYm90dG9tOiAwO1xyXG59XHJcblxyXG4uY2hhdC10YWIge1xyXG4gIHBhZGRpbmcgOiA1cHg7XHJcbiAgdXNlci1zZWxlY3Q6IG5vbmU7XHJcbn1cclxuXHJcbi5jaGF0LXRhYiBsYWJlbCB7XHJcbiAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xyXG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcclxufVxyXG5cclxuLmNoYXQtdGFiIGlucHV0W3R5cGU9XCJyYWRpb1wiXSB7XHJcbiAgZGlzcGxheTogbm9uZTtcclxufVxyXG5cclxuLmNoYXQtdGFiIGlucHV0W3R5cGU9XCJyYWRpb1wiXSArIGRpdiB7XHJcbiAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xyXG4gIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7XHJcbiAgb3V0bGluZTogMDtcclxuICBmb250LXNpemU6IDEycHg7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogdHJhbnNwYXJlbnQ7XHJcbiAgY29sb3I6ICM0NDQ7IFxyXG4gIGJvcmRlcjogc29saWQgMXB4ICM1NTU7XHJcbiAgcGFkZGluZzogMnB4IDhweDtcclxuICBtYXJnaW46IDJweDtcclxuICBib3JkZXItcmFkaXVzOiAxMDBweDtcclxuICBjdXJzb3I6IHBvaW50ZXI7XHJcbn1cclxuXHJcbi5jaGF0LXRhYiBpbnB1dFt0eXBlPVwicmFkaW9cIl0gKyBkaXY6aG92ZXIge1xyXG4gIGJhY2tncm91bmQtY29sb3I6ICM4ODg7XHJcbiAgY29sb3I6ICNlZWU7XHJcbiAgYm9yZGVyOiBzb2xpZCAxcHggIzU1NTtcclxufVxyXG5cclxuLmNoYXQtdGFiIGlucHV0W3R5cGU9XCJyYWRpb1wiXTpjaGVja2VkICsgZGl2IHtcclxuICBiYWNrZ3JvdW5kOiAjNTU1O1xyXG4gIGNvbG9yOiAjQ0NDO1xyXG59XHJcblxyXG4uYmFkZ2Uge1xyXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcclxuICB0b3A6IC00cHg7XHJcbiAgcmlnaHQ6IDA7XHJcbn1cclxuXHJcbi50YWItc2V0dGluZyB7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogdHJhbnNwYXJlbnQ7XHJcbiAgY29sb3I6ICM0NDQ7IFxyXG4gIGJvcmRlcjogc29saWQgMXB4ICM1NTU7XHJcbiAgcGFkZGluZzogMnB4IDRweDtcclxuICBib3JkZXItcmFkaXVzOiA1cHg7XHJcbiAgY3Vyc29yOiBwb2ludGVyO1xyXG59XHJcblxyXG4udGFiLXNldHRpbmc6aG92ZXIge1xyXG4gIGJhY2tncm91bmQtY29sb3I6ICM4ODg7XHJcbiAgY29sb3I6ICNlZWU7XHJcbiAgYm9yZGVyOiBzb2xpZCAxcHggIzU1NTtcclxufVxyXG5cclxuLnNtYWxsLWZvbnQge1xyXG4gIGZvbnQtc2l6ZTogMTJweDtcclxuICB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlO1xyXG59XHJcblxyXG4ubWF0ZXJpYWwtaWNvbnMge1xyXG4gIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7XHJcbiAgZm9udC1zaXplOiAxLjByZW07XHJcbn1cclxuIl19 */"] });
    return ChatWindowComponent;
}());

/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](ChatWindowComponent, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"],
        args: [{
                selector: 'chat-window',
                templateUrl: './chat-window.component.html',
                styleUrls: ['./chat-window.component.css']
            }]
    }], function () { return [{ type: service_chat_message_service__WEBPACK_IMPORTED_MODULE_6__["ChatMessageService"] }, { type: service_panel_service__WEBPACK_IMPORTED_MODULE_7__["PanelService"] }, { type: service_pointer_device_service__WEBPACK_IMPORTED_MODULE_8__["PointerDeviceService"] }]; }, null); })();


/***/ }),

/***/ "wRt9":
/*!**********************************************************************************!*\
  !*** ./src/app/component/chat-message-setting/chat-message-setting.component.ts ***!
  \**********************************************************************************/
/*! exports provided: ChatMessageSettingComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ChatMessageSettingComponent", function() { return ChatMessageSettingComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "fXoL");
/* harmony import */ var _udonarium_core_system__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @udonarium/core/system */ "yNnI");
/* harmony import */ var _udonarium_peer_cursor__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @udonarium/peer-cursor */ "+UEV");
/* harmony import */ var _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @udonarium/core/synchronize-object/object-store */ "hm7o");
/* harmony import */ var service_panel_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! service/panel.service */ "M9xM");
/* harmony import */ var service_modal_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! service/modal.service */ "CE6K");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @angular/forms */ "3Pt+");








var ChatMessageSettingComponent = /** @class */ (function () {
    function ChatMessageSettingComponent(changeDetector, panelService, modalService
    //    private chatTabList: ChatTabList
    ) {
        this.changeDetector = changeDetector;
        this.panelService = panelService;
        this.modalService = modalService;
        this.isAllowedEmpty = false;
        this.tabletopObject = null;
    }
    Object.defineProperty(ChatMessageSettingComponent.prototype, "myPeer", {
        get: function () { return _udonarium_peer_cursor__WEBPACK_IMPORTED_MODULE_2__["PeerCursor"].myCursor; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ChatMessageSettingComponent.prototype, "chatTabList", {
        get: function () { return _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_3__["ObjectStore"].instance.get('ChatTabList'); },
        enumerable: false,
        configurable: true
    });
    ChatMessageSettingComponent.prototype.changeDispFlagTime = function () {
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_1__["EventSystem"].trigger('RE_DRAW_CHAT', {});
        //���g�Ȃ�
    };
    ChatMessageSettingComponent.prototype.changeDispFlagUserId = function () {
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_1__["EventSystem"].trigger('RE_DRAW_CHAT', {});
        //���g�Ȃ�
    };
    ChatMessageSettingComponent.prototype.changeTachieInWindow = function () {
        //���g�Ȃ�
    };
    ChatMessageSettingComponent.prototype.changeKeepTachieOutWindow = function () {
        //���g�Ȃ�
    };
    ChatMessageSettingComponent.prototype.ngOnInit = function () {
    };
    ChatMessageSettingComponent.prototype.ngAfterViewInit = function () {
    };
    ChatMessageSettingComponent.prototype.ngOnDestroy = function () {
    };
    ChatMessageSettingComponent.ɵfac = function ChatMessageSettingComponent_Factory(t) { return new (t || ChatMessageSettingComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["ChangeDetectorRef"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](service_panel_service__WEBPACK_IMPORTED_MODULE_4__["PanelService"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](service_modal_service__WEBPACK_IMPORTED_MODULE_5__["ModalService"])); };
    ChatMessageSettingComponent.ɵcmp = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineComponent"]({ type: ChatMessageSettingComponent, selectors: [["chat-message-setting"]], inputs: { isAllowedEmpty: "isAllowedEmpty", tabletopObject: "tabletopObject" }, decls: 23, vars: 5, consts: [["id", "file-list"], [1, "table"], [1, "table-cell", 2, "width", "16em"], [1, "table-cell"], ["type", "checkbox", "value", "isTachieInWindow", "name", "tachieInWindow", 3, "ngModel", "ngModelChange", "click"], ["type", "checkbox", "value", "isKeepTachieOutWindow", "name", "isKeepTachieOutWindow", 3, "ngModel", "ngModelChange", "click"], ["type", "checkbox", "value", "simpleDispFlagTime", "name", "hideInventory", 3, "ngModel", "ngModelChange", "click"], ["type", "checkbox", "value", "simpleDispFlagUserId", "name", "hideInventory", 3, "ngModel", "ngModelChange", "click"]], template: function ChatMessageSettingComponent_Template(rf, ctx) { if (rf & 1) {
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 0);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "div", 1);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](2, "div", 2);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](3, " \u5728\u8996\u7A97\u4E2D\u986F\u793A\u7ACB\u7E6A: ");
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](4, "div", 3);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](5, "input", 4);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("ngModelChange", function ChatMessageSettingComponent_Template_input_ngModelChange_5_listener($event) { return ctx.chatTabList.isTachieInWindow = $event; })("click", function ChatMessageSettingComponent_Template_input_click_5_listener() { return ctx.changeTachieInWindow(); });
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](6, "div", 1);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](7, "div", 2);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](8, " \u9F20\u6A19\u96E2\u958B\u8996\u7A97\u6642");
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](9, "br");
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](10, " \u4FDD\u6301\u8996\u7A97\u5916\u7684\u7ACB\u7E6A: ");
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](11, "div", 3);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](12, "input", 5);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("ngModelChange", function ChatMessageSettingComponent_Template_input_ngModelChange_12_listener($event) { return ctx.chatTabList.isKeepTachieOutWindow = $event; })("click", function ChatMessageSettingComponent_Template_input_click_12_listener() { return ctx.changeKeepTachieOutWindow(); });
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](13, "div", 1);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](14, "div", 2);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](15, " \u7C21\u6613\u986F\u793A\u6642\u9593: ");
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](16, "div", 3);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](17, "input", 6);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("ngModelChange", function ChatMessageSettingComponent_Template_input_ngModelChange_17_listener($event) { return ctx.chatTabList.simpleDispFlagTime = $event; })("click", function ChatMessageSettingComponent_Template_input_click_17_listener() { return ctx.changeDispFlagTime(); });
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](18, "div", 1);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](19, "div", 2);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](20, " \u7C21\u6613\u986F\u793AID: ");
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](21, "div", 3);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](22, "input", 7);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("ngModelChange", function ChatMessageSettingComponent_Template_input_ngModelChange_22_listener($event) { return ctx.chatTabList.simpleDispFlagUserId = $event; })("click", function ChatMessageSettingComponent_Template_input_click_22_listener() { return ctx.changeDispFlagUserId(); });
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        } if (rf & 2) {
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](5);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngModel", ctx.chatTabList.isTachieInWindow);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](7);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngModel", ctx.chatTabList.isKeepTachieOutWindow);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵattribute"]("disabled", ctx.chatTabList.isTachieInWindow ? "" : null);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](5);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngModel", ctx.chatTabList.simpleDispFlagTime);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](5);
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngModel", ctx.chatTabList.simpleDispFlagUserId);
        } }, directives: [_angular_forms__WEBPACK_IMPORTED_MODULE_6__["CheckboxControlValueAccessor"], _angular_forms__WEBPACK_IMPORTED_MODULE_6__["NgControlStatus"], _angular_forms__WEBPACK_IMPORTED_MODULE_6__["NgModel"]], styles: [".table[_ngcontent-%COMP%] {\r\n  box-sizing: border-box;\r\n  padding : 5px;\r\n  \r\n  \r\n  display: table;\r\n  \r\n  width: 100%;\r\n}\r\n\r\n.table[_ngcontent-%COMP%]   .table-cell[_ngcontent-%COMP%] {\r\n  display: table-cell;\r\n}\r\n\r\ninput[_ngcontent-%COMP%]{\r\n  width:5em;\r\n}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNoYXQtbWVzc2FnZS1zZXR0aW5nLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxzQkFBc0I7RUFDdEIsYUFBYTtFQUNiLG9CQUFvQjtFQUNwQixjQUFjO0VBQ2QsY0FBYztFQUNkLDRCQUE0QjtFQUM1QixXQUFXO0FBQ2I7O0FBRUE7RUFDRSxtQkFBbUI7QUFDckI7O0FBRUE7RUFDRSxTQUFTO0FBQ1giLCJmaWxlIjoiY2hhdC1tZXNzYWdlLXNldHRpbmcuY29tcG9uZW50LmNzcyIsInNvdXJjZXNDb250ZW50IjpbIi50YWJsZSB7XHJcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcclxuICBwYWRkaW5nIDogNXB4O1xyXG4gIC8qcG9zaXRpb24gOiBmaXhlZDsqL1xyXG4gIC8qYm90dG9tIDogMDsqL1xyXG4gIGRpc3BsYXk6IHRhYmxlO1xyXG4gIC8qd2lkdGg6IGNhbGMoMTAwJSAtIDMwcHgpOyovXHJcbiAgd2lkdGg6IDEwMCU7XHJcbn1cclxuXHJcbi50YWJsZSAudGFibGUtY2VsbCB7XHJcbiAgZGlzcGxheTogdGFibGUtY2VsbDtcclxufVxyXG5cclxuaW5wdXR7XHJcbiAgd2lkdGg6NWVtO1xyXG59XHJcbiJdfQ== */"], changeDetection: 0 });
    return ChatMessageSettingComponent;
}());

/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](ChatMessageSettingComponent, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"],
        args: [{
                selector: 'chat-message-setting',
                templateUrl: './chat-message-setting.component.html',
                styleUrls: ['./chat-message-setting.component.css'],
                changeDetection: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ChangeDetectionStrategy"].OnPush
            }]
    }], function () { return [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ChangeDetectorRef"] }, { type: service_panel_service__WEBPACK_IMPORTED_MODULE_4__["PanelService"] }, { type: service_modal_service__WEBPACK_IMPORTED_MODULE_5__["ModalService"] }]; }, { isAllowedEmpty: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }], tabletopObject: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"]
        }] }); })();


/***/ }),

/***/ "xKeS":
/*!****************************************************!*\
  !*** ./src/app/component/badge/badge.component.ts ***!
  \****************************************************/
/*! exports provided: BadgeComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BadgeComponent", function() { return BadgeComponent; });
/* harmony import */ var _angular_animations__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/animations */ "R0Ic");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "fXoL");



var BadgeComponent = /** @class */ (function () {
    function BadgeComponent() {
        this.count = 0;
        this.animeState = 'active';
    }
    BadgeComponent.prototype.ngOnChanges = function () {
        var _this = this;
        this.animeState = 'inactive';
        setTimeout(function () { _this.animeState = 'active'; });
    };
    BadgeComponent.prototype.animationShuffleDone = function (event) {
        this.animeState = 'inactive';
    };
    BadgeComponent.ɵfac = function BadgeComponent_Factory(t) { return new (t || BadgeComponent)(); };
    BadgeComponent.ɵcmp = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdefineComponent"]({ type: BadgeComponent, selectors: [["badge"]], inputs: { count: "count" }, features: [_angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵNgOnChangesFeature"]], decls: 2, vars: 2, consts: [[1, "badge"]], template: function BadgeComponent_Template(rf, ctx) { if (rf & 1) {
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "div", 0);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
        } if (rf & 2) {
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("@bounce", ctx.animeState);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtextInterpolate"](ctx.count);
        } }, styles: [".badge[_ngcontent-%COMP%] {\r\n  min-width: 8px;\r\n  min-height: 8px;\r\n  font-size: 8px;\r\n  padding: 2px 4px;\r\n  border-radius: 100px;\r\n  text-align: center;\r\n  color: #eee; \r\n  background-color: rgb(207, 82, 82);\r\n}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImJhZGdlLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxjQUFjO0VBQ2QsZUFBZTtFQUNmLGNBQWM7RUFDZCxnQkFBZ0I7RUFDaEIsb0JBQW9CO0VBQ3BCLGtCQUFrQjtFQUNsQixXQUFXO0VBQ1gsa0NBQWtDO0FBQ3BDIiwiZmlsZSI6ImJhZGdlLmNvbXBvbmVudC5jc3MiLCJzb3VyY2VzQ29udGVudCI6WyIuYmFkZ2Uge1xyXG4gIG1pbi13aWR0aDogOHB4O1xyXG4gIG1pbi1oZWlnaHQ6IDhweDtcclxuICBmb250LXNpemU6IDhweDtcclxuICBwYWRkaW5nOiAycHggNHB4O1xyXG4gIGJvcmRlci1yYWRpdXM6IDEwMHB4O1xyXG4gIHRleHQtYWxpZ246IGNlbnRlcjtcclxuICBjb2xvcjogI2VlZTsgXHJcbiAgYmFja2dyb3VuZC1jb2xvcjogcmdiKDIwNywgODIsIDgyKTtcclxufVxyXG4iXX0= */"], data: { animation: [
                Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["trigger"])('bounce', [
                    Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["state"])('active', Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])({ transform: '' })),
                    Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["transition"])('* => active', [
                        Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["animate"])('600ms ease', Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["keyframes"])([
                            Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])({ transform: 'scale3d(0.5, 0.5, 0.5)', offset: 0 }),
                            Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])({ transform: 'scale3d(2, 2, 2)', offset: 0.5 }),
                            Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])({ transform: 'scale3d(0.75, 0.75, 0.75)', offset: 0.75 }),
                            Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])({ transform: 'scale3d(1.125, 1.125, 1.125)', offset: 0.875 }),
                            Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])({ transform: 'scale3d(1.0, 1.0, 1.0)', offset: 1.0 })
                        ]))
                    ])
                ])
            ] } });
    return BadgeComponent;
}());

/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵsetClassMetadata"](BadgeComponent, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_1__["Component"],
        args: [{
                selector: 'badge',
                templateUrl: './badge.component.html',
                styleUrls: ['./badge.component.css'],
                animations: [
                    Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["trigger"])('bounce', [
                        Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["state"])('active', Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])({ transform: '' })),
                        Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["transition"])('* => active', [
                            Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["animate"])('600ms ease', Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["keyframes"])([
                                Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])({ transform: 'scale3d(0.5, 0.5, 0.5)', offset: 0 }),
                                Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])({ transform: 'scale3d(2, 2, 2)', offset: 0.5 }),
                                Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])({ transform: 'scale3d(0.75, 0.75, 0.75)', offset: 0.75 }),
                                Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])({ transform: 'scale3d(1.125, 1.125, 1.125)', offset: 0.875 }),
                                Object(_angular_animations__WEBPACK_IMPORTED_MODULE_0__["style"])({ transform: 'scale3d(1.0, 1.0, 1.0)', offset: 1.0 })
                            ]))
                        ])
                    ])
                ]
            }]
    }], null, { count: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_1__["Input"]
        }] }); })();


/***/ }),

/***/ "xbks":
/*!*****************************************************************!*\
  !*** ./src/app/class/core/file-storage/image-sharing-system.ts ***!
  \*****************************************************************/
/*! exports provided: ImageSharingSystem */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ImageSharingSystem", function() { return ImageSharingSystem; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "mrSG");
/* harmony import */ var _system__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../system */ "yNnI");
/* harmony import */ var _system_util_uuid__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../system/util/uuid */ "P9Dn");
/* harmony import */ var _buffer_sharing_task__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./buffer-sharing-task */ "PYk/");
/* harmony import */ var _file_reader_util__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./file-reader-util */ "N0uT");
/* harmony import */ var _image_file__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./image-file */ "FjwV");
/* harmony import */ var _image_storage__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./image-storage */ "JQpJ");
/* harmony import */ var _mime_type__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./mime-type */ "NVMP");








var ImageSharingSystem = /** @class */ (function () {
    function ImageSharingSystem() {
        this.sendTaskMap = new Map();
        this.receiveTaskMap = new Map();
        this.maxSendTask = 2;
        this.maxReceiveTask = 4;
        console.log('FileSharingSystem ready...');
    }
    Object.defineProperty(ImageSharingSystem, "instance", {
        get: function () {
            if (!ImageSharingSystem._instance)
                ImageSharingSystem._instance = new ImageSharingSystem();
            return ImageSharingSystem._instance;
        },
        enumerable: false,
        configurable: true
    });
    ImageSharingSystem.prototype.initialize = function () {
        var _this = this;
        _system__WEBPACK_IMPORTED_MODULE_1__["EventSystem"].register(this)
            .on('CONNECT_PEER', 1, function (event) {
            if (!event.isSendFromSelf)
                return;
            console.log('CONNECT_PEER ImageStorageService !!!', event.data.peerId);
            _image_storage__WEBPACK_IMPORTED_MODULE_6__["ImageStorage"].instance.synchronize();
        })
            .on('XML_LOADED', function (event) {
            convertUrlImage(event.data.xmlElement);
        })
            .on('SYNCHRONIZE_FILE_LIST', function (event) {
            var e_1, _a;
            if (event.isSendFromSelf)
                return;
            console.log('SYNCHRONIZE_FILE_LIST ImageStorageService ' + event.sendFrom);
            var otherCatalog = event.data;
            var request = [];
            try {
                for (var otherCatalog_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(otherCatalog), otherCatalog_1_1 = otherCatalog_1.next(); !otherCatalog_1_1.done; otherCatalog_1_1 = otherCatalog_1.next()) {
                    var item = otherCatalog_1_1.value;
                    var image = _image_storage__WEBPACK_IMPORTED_MODULE_6__["ImageStorage"].instance.get(item.identifier);
                    if (image === null) {
                        image = _image_file__WEBPACK_IMPORTED_MODULE_5__["ImageFile"].createEmpty(item.identifier);
                        _image_storage__WEBPACK_IMPORTED_MODULE_6__["ImageStorage"].instance.add(image);
                    }
                    if (image.state < _image_file__WEBPACK_IMPORTED_MODULE_5__["ImageState"].COMPLETE && !_this.receiveTaskMap.has(item.identifier)) {
                        request.push({ identifier: item.identifier, state: image.state });
                    }
                }
            }
            catch (e_1_1) { e_1 = { error: e_1_1 }; }
            finally {
                try {
                    if (otherCatalog_1_1 && !otherCatalog_1_1.done && (_a = otherCatalog_1.return)) _a.call(otherCatalog_1);
                }
                finally { if (e_1) throw e_1.error; }
            }
            // Peer切断時などのエッジケースに対応する
            if (request.length < 1 && !_this.hasActiveTask() && otherCatalog.length < _image_storage__WEBPACK_IMPORTED_MODULE_6__["ImageStorage"].instance.getCatalog().length) {
                _image_storage__WEBPACK_IMPORTED_MODULE_6__["ImageStorage"].instance.synchronize(event.sendFrom);
            }
            if (request.length < 1 || _this.isLimitReceiveTask()) {
                return;
            }
            _this.request(request, event.sendFrom);
        })
            .on('REQUEST_FILE_RESOURE', function (event) { return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(_this, void 0, void 0, function () {
            var request, randomRequest, request_1, request_1_1, item, image, updateImages, candidatePeers, index, candidatePeers_1, candidatePeers_1_1, peerId;
            var e_2, _a, e_3, _b;
            return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"])(this, function (_c) {
                if (event.isSendFromSelf)
                    return [2 /*return*/];
                request = event.data.identifiers;
                randomRequest = [];
                try {
                    for (request_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(request), request_1_1 = request_1.next(); !request_1_1.done; request_1_1 = request_1.next()) {
                        item = request_1_1.value;
                        image = _image_storage__WEBPACK_IMPORTED_MODULE_6__["ImageStorage"].instance.get(item.identifier);
                        if (image && item.state < image.state)
                            randomRequest.push({ identifier: item.identifier, state: item.state });
                    }
                }
                catch (e_2_1) { e_2 = { error: e_2_1 }; }
                finally {
                    try {
                        if (request_1_1 && !request_1_1.done && (_a = request_1.return)) _a.call(request_1);
                    }
                    finally { if (e_2) throw e_2.error; }
                }
                if (this.isLimitSendTask() === false && 0 < randomRequest.length && !this.existsSendTask(event.data.receiver)) {
                    updateImages = this.makeSendUpdateImages(randomRequest);
                    console.log('REQUEST_FILE_RESOURE ImageStorageService Send!!! ' + event.data.receiver + ' -> ' + updateImages.length);
                    this.startSendTask(updateImages, event.data.receiver);
                }
                else {
                    candidatePeers = event.data.candidatePeers;
                    index = candidatePeers.indexOf(_system__WEBPACK_IMPORTED_MODULE_1__["Network"].peerId);
                    if (-1 < index)
                        candidatePeers.splice(index, 1);
                    try {
                        for (candidatePeers_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(candidatePeers), candidatePeers_1_1 = candidatePeers_1.next(); !candidatePeers_1_1.done; candidatePeers_1_1 = candidatePeers_1.next()) {
                            peerId = candidatePeers_1_1.value;
                            console.log('REQUEST_FILE_RESOURE ImageStorageService Relay!!! ' + peerId + ' -> ' + event.data.identifiers);
                            _system__WEBPACK_IMPORTED_MODULE_1__["EventSystem"].call(event, peerId);
                            return [2 /*return*/];
                        }
                    }
                    catch (e_3_1) { e_3 = { error: e_3_1 }; }
                    finally {
                        try {
                            if (candidatePeers_1_1 && !candidatePeers_1_1.done && (_b = candidatePeers_1.return)) _b.call(candidatePeers_1);
                        }
                        finally { if (e_3) throw e_3.error; }
                    }
                    console.log('REQUEST_FILE_RESOURE ImageStorageService あぶれた...' + event.data.receiver, randomRequest.length);
                }
                return [2 /*return*/];
            });
        }); })
            .on('UPDATE_FILE_RESOURE', function (event) {
            var e_4, _a;
            var updateImages = event.data.updateImages;
            console.log('UPDATE_FILE_RESOURE ImageStorageService ' + event.sendFrom + ' -> ', updateImages);
            try {
                for (var updateImages_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(updateImages), updateImages_1_1 = updateImages_1.next(); !updateImages_1_1.done; updateImages_1_1 = updateImages_1.next()) {
                    var context = updateImages_1_1.value;
                    if (context.blob)
                        context.blob = new Blob([context.blob], { type: context.type });
                    if (context.thumbnail.blob)
                        context.thumbnail.blob = new Blob([context.thumbnail.blob], { type: context.thumbnail.type });
                    _image_storage__WEBPACK_IMPORTED_MODULE_6__["ImageStorage"].instance.add(context);
                }
            }
            catch (e_4_1) { e_4 = { error: e_4_1 }; }
            finally {
                try {
                    if (updateImages_1_1 && !updateImages_1_1.done && (_a = updateImages_1.return)) _a.call(updateImages_1);
                }
                finally { if (e_4) throw e_4.error; }
            }
        })
            .on('START_FILE_TRANSMISSION', function (event) {
            console.log('START_FILE_TRANSMISSION ' + event.data.taskIdentifier);
            var identifier = event.data.taskIdentifier;
            var image = _image_storage__WEBPACK_IMPORTED_MODULE_6__["ImageStorage"].instance.get(identifier);
            if (_this.receiveTaskMap.has(identifier) || (image && _image_file__WEBPACK_IMPORTED_MODULE_5__["ImageState"].COMPLETE <= image.state)) {
                console.warn('CANCEL_TASK_ ' + identifier);
                _system__WEBPACK_IMPORTED_MODULE_1__["EventSystem"].call('CANCEL_TASK_' + identifier, null, event.sendFrom);
            }
            else {
                _this.startReceiveTask(identifier);
            }
        });
    };
    ImageSharingSystem.prototype.destroy = function () {
        _system__WEBPACK_IMPORTED_MODULE_1__["EventSystem"].unregister(this);
    };
    ImageSharingSystem.prototype.startSendTask = function (updateImages, sendTo) {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function () {
            var identifier, task, updateImages_2, updateImages_2_1, context, _a, _b, e_5_1;
            var e_5, _c;
            var _this = this;
            return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"])(this, function (_d) {
                switch (_d.label) {
                    case 0:
                        identifier = updateImages.length === 1 ? updateImages[0].identifier : _system_util_uuid__WEBPACK_IMPORTED_MODULE_2__["UUID"].generateUuid();
                        task = _buffer_sharing_task__WEBPACK_IMPORTED_MODULE_3__["BufferSharingTask"].createSendTask(identifier, sendTo);
                        this.sendTaskMap.set(task.identifier, task);
                        _system__WEBPACK_IMPORTED_MODULE_1__["EventSystem"].call('START_FILE_TRANSMISSION', { taskIdentifier: identifier }, sendTo);
                        _d.label = 1;
                    case 1:
                        _d.trys.push([1, 8, 9, 10]);
                        updateImages_2 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(updateImages), updateImages_2_1 = updateImages_2.next();
                        _d.label = 2;
                    case 2:
                        if (!!updateImages_2_1.done) return [3 /*break*/, 7];
                        context = updateImages_2_1.value;
                        if (!context.thumbnail.blob) return [3 /*break*/, 4];
                        _a = context.thumbnail;
                        return [4 /*yield*/, _file_reader_util__WEBPACK_IMPORTED_MODULE_4__["FileReaderUtil"].readAsArrayBufferAsync(context.thumbnail.blob)];
                    case 3:
                        _a.blob = (_d.sent());
                        return [3 /*break*/, 6];
                    case 4:
                        if (!context.blob) return [3 /*break*/, 6];
                        _b = context;
                        return [4 /*yield*/, _file_reader_util__WEBPACK_IMPORTED_MODULE_4__["FileReaderUtil"].readAsArrayBufferAsync(context.blob)];
                    case 5:
                        _b.blob = (_d.sent());
                        _d.label = 6;
                    case 6:
                        updateImages_2_1 = updateImages_2.next();
                        return [3 /*break*/, 2];
                    case 7: return [3 /*break*/, 10];
                    case 8:
                        e_5_1 = _d.sent();
                        e_5 = { error: e_5_1 };
                        return [3 /*break*/, 10];
                    case 9:
                        try {
                            if (updateImages_2_1 && !updateImages_2_1.done && (_c = updateImages_2.return)) _c.call(updateImages_2);
                        }
                        finally { if (e_5) throw e_5.error; }
                        return [7 /*endfinally*/];
                    case 10:
                        /* */
                        task.onfinish = function (task, data) {
                            _this.stopSendTask(task.identifier);
                            _image_storage__WEBPACK_IMPORTED_MODULE_6__["ImageStorage"].instance.synchronize();
                        };
                        task.start(updateImages);
                        return [2 /*return*/];
                }
            });
        });
    };
    ImageSharingSystem.prototype.startReceiveTask = function (identifier) {
        var _this = this;
        var task = _buffer_sharing_task__WEBPACK_IMPORTED_MODULE_3__["BufferSharingTask"].createReceiveTask(identifier);
        this.receiveTaskMap.set(identifier, task);
        task.onfinish = function (task, data) {
            _this.stopReceiveTask(task.identifier);
            if (data)
                _system__WEBPACK_IMPORTED_MODULE_1__["EventSystem"].trigger('UPDATE_FILE_RESOURE', { identifier: task.identifier, updateImages: data });
            _image_storage__WEBPACK_IMPORTED_MODULE_6__["ImageStorage"].instance.synchronize();
        };
        task.start();
        console.log('startReceiveTask => ', this.receiveTaskMap.size);
    };
    ImageSharingSystem.prototype.stopSendTask = function (identifier) {
        var task = this.sendTaskMap.get(identifier);
        if (task) {
            task.cancel();
        }
        this.sendTaskMap.delete(identifier);
        console.log('stopSendTask => ', this.sendTaskMap.size);
    };
    ImageSharingSystem.prototype.stopReceiveTask = function (identifier) {
        var task = this.receiveTaskMap.get(identifier);
        if (task) {
            task.cancel();
        }
        this.receiveTaskMap.delete(identifier);
        console.log('stopReceiveTask => ', this.receiveTaskMap.size);
    };
    ImageSharingSystem.prototype.request = function (request, peerId) {
        console.log('requestFile() ' + peerId);
        var peerIds = _system__WEBPACK_IMPORTED_MODULE_1__["Network"].peerIds;
        peerIds.splice(peerIds.indexOf(_system__WEBPACK_IMPORTED_MODULE_1__["Network"].peerId), 1);
        _system__WEBPACK_IMPORTED_MODULE_1__["EventSystem"].call('REQUEST_FILE_RESOURE', { identifiers: request, receiver: _system__WEBPACK_IMPORTED_MODULE_1__["Network"].peerId, candidatePeers: peerIds }, peerId);
    };
    ImageSharingSystem.prototype.makeSendUpdateImages = function (catalog, maxSize) {
        var _a;
        if (maxSize === void 0) { maxSize = 1024 * 1024 * 0.5; }
        var updateImages = [];
        var byteSize = 0;
        // Fisher-Yates
        for (var i = catalog.length - 1; 0 <= i; i--) {
            var rand = Math.floor(Math.random() * (i + 1));
            _a = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__read"])([catalog[rand], catalog[i]], 2), catalog[i] = _a[0], catalog[rand] = _a[1];
        }
        catalog.sort(function (a, b) {
            if (a.state < b.state)
                return -1;
            if (a.state > b.state)
                return 1;
            return 0;
        });
        for (var i = 0; i < catalog.length; i++) {
            var item = catalog[i];
            var image = _image_storage__WEBPACK_IMPORTED_MODULE_6__["ImageStorage"].instance.get(item.identifier);
            var context = {
                identifier: image.identifier,
                name: image.name,
                type: '',
                blob: null,
                url: null,
                thumbnail: { type: '', blob: null, url: null, }
            };
            if (image.state === _image_file__WEBPACK_IMPORTED_MODULE_5__["ImageState"].URL) {
                context.url = image.url;
            }
            else if (item.state === _image_file__WEBPACK_IMPORTED_MODULE_5__["ImageState"].NULL) {
                context.thumbnail.blob = image.thumbnail.blob; //
                context.thumbnail.type = image.thumbnail.type;
            }
            else {
                context.blob = image.blob; //
                context.type = image.blob.type;
            }
            var size = context.blob
                ? context.blob.size
                : context.thumbnail.blob
                    ? context.thumbnail.blob.size
                    : 100;
            updateImages.push(context);
            byteSize += size;
            if (maxSize < byteSize)
                break;
        }
        return updateImages;
    };
    ImageSharingSystem.prototype.hasActiveTask = function () {
        return 0 < this.sendTaskMap.size || 0 < this.receiveTaskMap.size;
    };
    ImageSharingSystem.prototype.isLimitSendTask = function () {
        return this.maxSendTask <= this.sendTaskMap.size;
    };
    ImageSharingSystem.prototype.isLimitReceiveTask = function () {
        return this.maxReceiveTask <= this.receiveTaskMap.size;
    };
    ImageSharingSystem.prototype.existsSendTask = function (peerId) {
        var e_6, _a;
        try {
            for (var _b = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(this.sendTaskMap.values()), _c = _b.next(); !_c.done; _c = _b.next()) {
                var task = _c.value;
                if (task && task.sendTo === peerId)
                    return true;
            }
        }
        catch (e_6_1) { e_6 = { error: e_6_1 }; }
        finally {
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            }
            finally { if (e_6) throw e_6.error; }
        }
        return false;
    };
    return ImageSharingSystem;
}());

function convertUrlImage(xmlElement) {
    var e_7, _a;
    var urls = [];
    var imageElements = xmlElement.querySelectorAll('*[type="image"]');
    for (var i = 0; i < imageElements.length; i++) {
        var url = imageElements[i].innerHTML;
        if (!_image_storage__WEBPACK_IMPORTED_MODULE_6__["ImageStorage"].instance.get(url) && 0 < _mime_type__WEBPACK_IMPORTED_MODULE_7__["MimeType"].type(url).length) {
            urls.push(url);
        }
    }
    imageElements = xmlElement.querySelectorAll('*[imageIdentifier]');
    for (var i = 0; i < imageElements.length; i++) {
        var url = imageElements[i].getAttribute('imageIdentifier');
        if (!_image_storage__WEBPACK_IMPORTED_MODULE_6__["ImageStorage"].instance.get(url) && 0 < _mime_type__WEBPACK_IMPORTED_MODULE_7__["MimeType"].type(url).length) {
            urls.push(url);
        }
    }
    try {
        for (var urls_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(urls), urls_1_1 = urls_1.next(); !urls_1_1.done; urls_1_1 = urls_1.next()) {
            var url = urls_1_1.value;
            _image_storage__WEBPACK_IMPORTED_MODULE_6__["ImageStorage"].instance.add(url);
        }
    }
    catch (e_7_1) { e_7 = { error: e_7_1 }; }
    finally {
        try {
            if (urls_1_1 && !urls_1_1.done && (_a = urls_1.return)) _a.call(urls_1);
        }
        finally { if (e_7) throw e_7.error; }
    }
}


/***/ }),

/***/ "xdgh":
/*!**************************************************************!*\
  !*** ./src/app/class/core/synchronize-object/game-object.ts ***!
  \**************************************************************/
/*! exports provided: GameObject */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GameObject", function() { return GameObject; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "mrSG");
/* harmony import */ var _system_util_uuid__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../system/util/uuid */ "P9Dn");
/* harmony import */ var _object_factory__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./object-factory */ "+FYa");
/* harmony import */ var _object_serializer__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./object-serializer */ "MDT1");
/* harmony import */ var _object_store__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./object-store */ "hm7o");





var GameObject = /** @class */ (function () {
    function GameObject(identifier) {
        if (identifier === void 0) { identifier = _system_util_uuid__WEBPACK_IMPORTED_MODULE_1__["UUID"].generateUuid(); }
        this.context = {
            aliasName: this.constructor.aliasName,
            identifier: '',
            majorVersion: 0,
            minorVersion: 0,
            syncData: {}
        };
        this.context.identifier = identifier;
    }
    Object.defineProperty(GameObject, "aliasName", {
        get: function () { return _object_factory__WEBPACK_IMPORTED_MODULE_2__["ObjectFactory"].instance.getAlias(this); },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(GameObject.prototype, "aliasName", {
        get: function () { return this.context.aliasName; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(GameObject.prototype, "identifier", {
        get: function () { return this.context.identifier; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(GameObject.prototype, "version", {
        get: function () { return this.context.majorVersion + this.context.minorVersion; },
        enumerable: false,
        configurable: true
    });
    GameObject.prototype.initialize = function () {
        _object_store__WEBPACK_IMPORTED_MODULE_4__["ObjectStore"].instance.add(this);
    };
    GameObject.prototype.destroy = function () {
        _object_store__WEBPACK_IMPORTED_MODULE_4__["ObjectStore"].instance.delete(this);
    };
    // GameObject Lifecycle
    GameObject.prototype.onStoreAdded = function () { };
    // GameObject Lifecycle
    GameObject.prototype.onStoreRemoved = function () { };
    GameObject.prototype.update = function () {
        this.versionUp();
        _object_store__WEBPACK_IMPORTED_MODULE_4__["ObjectStore"].instance.update(this.identifier);
    };
    GameObject.prototype.versionUp = function () {
        this.context.majorVersion += 1;
        this.context.minorVersion = Math.random();
    };
    GameObject.prototype.apply = function (context) {
        if (context !== null && this.identifier === context.identifier) {
            this.context.majorVersion = context.majorVersion;
            this.context.minorVersion = context.minorVersion;
            this.context.syncData = context.syncData;
        }
    };
    GameObject.prototype.clone = function () {
        var xmlString = this.toXml();
        return _object_serializer__WEBPACK_IMPORTED_MODULE_3__["ObjectSerializer"].instance.parseXml(xmlString);
    };
    GameObject.prototype.toContext = function () {
        return {
            aliasName: this.context.aliasName,
            identifier: this.context.identifier,
            majorVersion: this.context.majorVersion,
            minorVersion: this.context.minorVersion,
            syncData: deepCopy(this.context.syncData)
        };
    };
    GameObject.prototype.toXml = function () {
        return _object_serializer__WEBPACK_IMPORTED_MODULE_3__["ObjectSerializer"].instance.toXml(this);
    };
    return GameObject;
}());

function deepCopy(obj) {
    var e_1, _a;
    if (obj == null)
        return obj;
    var clone = Array.isArray(obj) ? [] : {};
    var keys = Object.getOwnPropertyNames(obj);
    try {
        for (var keys_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(keys), keys_1_1 = keys_1.next(); !keys_1_1.done; keys_1_1 = keys_1.next()) {
            var key = keys_1_1.value;
            var type = typeof obj[key];
            if (obj[key] != null && type === 'object') {
                clone[key] = deepCopy(obj[key]);
            }
            else if (type !== 'function') {
                clone[key] = obj[key];
            }
        }
    }
    catch (e_1_1) { e_1 = { error: e_1_1 }; }
    finally {
        try {
            if (keys_1_1 && !keys_1_1.done && (_a = keys_1.return)) _a.call(keys_1);
        }
        finally { if (e_1) throw e_1.error; }
    }
    return clone;
}


/***/ }),

/***/ "xphS":
/*!********************************************************************!*\
  !*** ./src/app/component/cut-in-window/cut-in-window.component.ts ***!
  \********************************************************************/
/*! exports provided: CutInWindowComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CutInWindowComponent", function() { return CutInWindowComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "fXoL");
/* harmony import */ var _udonarium_core_file_storage_audio_player__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @udonarium/core/file-storage/audio-player */ "zeEm");
/* harmony import */ var _udonarium_core_file_storage_audio_storage__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @udonarium/core/file-storage/audio-storage */ "Prh6");
/* harmony import */ var _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @udonarium/core/synchronize-object/object-store */ "hm7o");
/* harmony import */ var _udonarium_core_system__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @udonarium/core/system */ "yNnI");
/* harmony import */ var _udonarium_cut_in__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @udonarium/cut-in */ "pq3H");
/* harmony import */ var service_modal_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! service/modal.service */ "CE6K");
/* harmony import */ var service_panel_service__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! service/panel.service */ "M9xM");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @angular/common */ "ofXK");
/* harmony import */ var pipe_safe_pipe__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! pipe/safe.pipe */ "6HCy");











function CutInWindowComponent_div_0_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](1, "img", 2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](2, "safe");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
} if (rf & 2) {
    var ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("src", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind2"](2, 1, ctx_r0.cutIn.cutInImage.url, "resourceUrl"), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵsanitizeUrl"]);
} }
var CutInWindowComponent = /** @class */ (function () {
    function CutInWindowComponent(modalService, panelService, changeDetectionRef, ngZone) {
        this.modalService = modalService;
        this.panelService = panelService;
        this.changeDetectionRef = changeDetectionRef;
        this.ngZone = ngZone;
        this.left = 0;
        this.top = 0;
        this.width = 200;
        this.height = 150;
        this.minSize = 10;
        this.maxSize = 1200;
        this.lazyUpdateTimer = null;
        this.audioPlayer = new _udonarium_core_file_storage_audio_player__WEBPACK_IMPORTED_MODULE_1__["AudioPlayer"]();
        this.cutInTimeOut = null;
        this.cutIn = null;
    }
    Object.defineProperty(CutInWindowComponent.prototype, "audios", {
        get: function () { return _udonarium_core_file_storage_audio_storage__WEBPACK_IMPORTED_MODULE_2__["AudioStorage"].instance.audios.filter(function (audio) { return !audio.isHidden; }); },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(CutInWindowComponent.prototype, "cutInLauncher", {
        get: function () { return _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_3__["ObjectStore"].instance.get('CutInLauncher'); },
        enumerable: false,
        configurable: true
    });
    CutInWindowComponent.prototype.getCutIns = function () {
        return _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_3__["ObjectStore"].instance.getObjects(_udonarium_cut_in__WEBPACK_IMPORTED_MODULE_5__["CutIn"]);
    };
    CutInWindowComponent.prototype.startCutIn = function () {
        var _this = this;
        if (!this.cutIn)
            return;
        console.log('CutInWin ' + this.cutIn.name);
        var audio = this.cutIn.audio;
        if (audio) {
            this.audioPlayer.loop = this.cutIn.isLoop;
            this.audioPlayer.play(audio);
        }
        if (this.cutIn.outTime > 0) {
            this.cutInTimeOut = setTimeout(function () {
                _this.cutInTimeOut = null;
                _this.panelService.close();
            }, this.cutIn.outTime * 1000);
        }
    };
    CutInWindowComponent.prototype.stopCutIn = function () {
        this.audioPlayer.stop();
    };
    CutInWindowComponent.prototype.ngOnInit = function () {
        var _this = this;
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_4__["EventSystem"].register(this)
            .on('START_CUT_IN', function (event) {
            console.log('カットインウィンドウ>Event:START_CUT_IN ' + _this.cutIn.name);
            if (_this.cutIn) {
                if (_this.cutIn.identifier == event.data.cutIn.identifier || _this.cutIn.tagName == event.data.cutIn.tagName) {
                    _this.panelService.close();
                }
            }
        })
            .on('STOP_CUT_IN_BY_BGM', function (event) {
            if (_this.cutIn) {
                console.log(" 'STOP_CUT_IN_BY_BGM :" + _this.cutIn);
                var audio = _udonarium_core_file_storage_audio_storage__WEBPACK_IMPORTED_MODULE_2__["AudioStorage"].instance.get(_this.cutIn.audioIdentifier);
                if (_this.cutIn.tagName == '' && audio) {
                    _this.panelService.close();
                }
            }
        })
            .on('STOP_CUT_IN', function (event) {
            console.log('カットインウィンドウ>Event: ' + _this.cutIn.name);
            if (_this.cutIn) {
                if (_this.cutIn.identifier == event.data.cutIn.identifier) {
                    _this.panelService.close();
                }
            }
        });
    };
    CutInWindowComponent.prototype.ngAfterViewInit = function () {
        var _this = this;
        if (this.cutIn) {
            setTimeout(function () {
                _this.moveCutInPos();
            }, 0);
        }
    };
    CutInWindowComponent.prototype.moveCutInPos = function () {
        if (this.cutIn) {
            var cutin_w = this.cutIn.width;
            var cutin_h = this.cutIn.height;
            var margin_w = window.innerWidth - cutin_w;
            var margin_h = window.innerHeight - cutin_h - 25;
            if (margin_w < 0)
                margin_w = 0;
            if (margin_h < 0)
                margin_h = 0;
            var margin_x = margin_w * this.cutIn.x_pos / 100;
            var margin_y = margin_h * this.cutIn.y_pos / 100;
            this.width = cutin_w;
            this.height = cutin_h + 25;
            this.left = margin_x;
            this.top = margin_y;
        }
        else {
            console.log("カットインが未定義で再生された");
        }
        this.panelService.width = this.width;
        this.panelService.height = this.height;
        this.panelService.left = this.left;
        this.panelService.top = this.top;
    };
    CutInWindowComponent.prototype.ngOnDestroy = function () {
        if (this.cutInTimeOut) {
            clearTimeout(this.cutInTimeOut);
            this.cutInTimeOut = null;
        }
        this.stopCutIn();
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_4__["EventSystem"].unregister(this);
    };
    CutInWindowComponent.prototype.lazyNgZoneUpdate = function () {
        var _this = this;
        if (this.lazyUpdateTimer !== null)
            return;
        this.lazyUpdateTimer = setTimeout(function () {
            _this.lazyUpdateTimer = null;
            _this.ngZone.run(function () { });
        }, 100);
    };
    CutInWindowComponent.ɵfac = function CutInWindowComponent_Factory(t) { return new (t || CutInWindowComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](service_modal_service__WEBPACK_IMPORTED_MODULE_6__["ModalService"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](service_panel_service__WEBPACK_IMPORTED_MODULE_7__["PanelService"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["ChangeDetectorRef"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["NgZone"])); };
    CutInWindowComponent.ɵcmp = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineComponent"]({ type: CutInWindowComponent, selectors: [["app-cut-in-window"]], decls: 1, vars: 1, consts: [["class", "cut-in", 4, "ngIf"], [1, "cut-in"], [3, "src"]], template: function CutInWindowComponent_Template(rf, ctx) { if (rf & 1) {
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](0, CutInWindowComponent_div_0_Template, 3, 4, "div", 0);
        } if (rf & 2) {
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx.cutIn);
        } }, directives: [_angular_common__WEBPACK_IMPORTED_MODULE_8__["NgIf"]], pipes: [pipe_safe_pipe__WEBPACK_IMPORTED_MODULE_9__["SafePipe"]], styles: [".cut-in[_ngcontent-%COMP%] {\r\n  padding: 0;\r\n  overflow-x: hidden;\r\n  overflow-y: hidden;\r\n\r\n  height : 100%;\r\n  width : 100%;\r\n  \r\n}\r\n\r\nimg[_ngcontent-%COMP%] {\r\n  width : 100%;\r\n  height : 100%;\r\n}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImN1dC1pbi13aW5kb3cuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLFVBQVU7RUFDVixrQkFBa0I7RUFDbEIsa0JBQWtCOztFQUVsQixhQUFhO0VBQ2IsWUFBWTs7QUFFZDs7QUFFQTtFQUNFLFlBQVk7RUFDWixhQUFhO0FBQ2YiLCJmaWxlIjoiY3V0LWluLXdpbmRvdy5jb21wb25lbnQuY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLmN1dC1pbiB7XHJcbiAgcGFkZGluZzogMDtcclxuICBvdmVyZmxvdy14OiBoaWRkZW47XHJcbiAgb3ZlcmZsb3cteTogaGlkZGVuO1xyXG5cclxuICBoZWlnaHQgOiAxMDAlO1xyXG4gIHdpZHRoIDogMTAwJTtcclxuICBcclxufVxyXG5cclxuaW1nIHtcclxuICB3aWR0aCA6IDEwMCU7XHJcbiAgaGVpZ2h0IDogMTAwJTtcclxufVxyXG4iXX0= */"] });
    return CutInWindowComponent;
}());

/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](CutInWindowComponent, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"],
        args: [{
                selector: 'app-cut-in-window',
                templateUrl: './cut-in-window.component.html',
                styleUrls: ['./cut-in-window.component.css']
                /*
                  providers: [
                    PanelService,
                  ],
                  animations: [
                    trigger('flyInOut', [
                      transition('void => *', [
                        animate('100ms ease-out', keyframes([
                          style({ transform: 'scale(0.8, 0.8)', opacity: '0', offset: 0 }),
                          style({ transform: 'scale(1.0, 1.0)', opacity: '1', offset: 1.0 })
                        ]))
                      ]),
                      transition('* => void', [
                        animate(100, style({ transform: 'scale(0, 0)' }))
                      ])
                    ])
                  ]
                */
            }]
    }], function () { return [{ type: service_modal_service__WEBPACK_IMPORTED_MODULE_6__["ModalService"] }, { type: service_panel_service__WEBPACK_IMPORTED_MODULE_7__["PanelService"] }, { type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ChangeDetectorRef"] }, { type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["NgZone"] }]; }, null); })();


/***/ }),

/***/ "xrta":
/*!*****************************************!*\
  !*** ./src/app/class/image-tag-list.ts ***!
  \*****************************************/
/*! exports provided: ImageTagList */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ImageTagList", function() { return ImageTagList; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "mrSG");
/* harmony import */ var _image_tag__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./image-tag */ "WHGT");
/* harmony import */ var _core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./core/synchronize-object/decorator */ "1lIu");
/* harmony import */ var _core_synchronize_object_object_node__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./core/synchronize-object/object-node */ "F67Z");
/* harmony import */ var _core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./core/synchronize-object/object-store */ "hm7o");

//entyu_2 #92




var ImageTagList = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"])(ImageTagList, _super);
    function ImageTagList() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.identifiers = [];
        return _this;
    }
    ImageTagList_1 = ImageTagList;
    // GameObject Lifecycle
    ImageTagList.prototype.onStoreAdded = function () {
        _super.prototype.onStoreAdded.call(this);
        _core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_4__["ObjectStore"].instance.remove(this); // ObjectStore�ɂ͓o�^���Ȃ�
    };
    ImageTagList.prototype.innerXml = function () {
        return Array.from(new Set(this.identifiers))
            .map(function (identifier) { return _image_tag__WEBPACK_IMPORTED_MODULE_1__["ImageTag"].get(identifier); })
            .filter(function (imageTag) { return imageTag; })
            .map(function (imageTag) { return imageTag.toXml(); })
            .join('');
    };
    ImageTagList.create = function (images) {
        var imageTagList = new ImageTagList_1();
        imageTagList.identifiers = images.map(function (image) { return image.identifier; });
        return imageTagList;
    };
    var ImageTagList_1;
    ImageTagList = ImageTagList_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_2__["SyncObject"])('image-tag-list')
    ], ImageTagList);
    return ImageTagList;
}(_core_synchronize_object_object_node__WEBPACK_IMPORTED_MODULE_3__["ObjectNode"]));

//


/***/ }),

/***/ "yNnI":
/*!********************************************!*\
  !*** ./src/app/class/core/system/index.ts ***!
  \********************************************/
/*! exports provided: Event, Listener, EventSystem, Network */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "EventSystem", function() { return EventSystem; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Network", function() { return Network; });
/* harmony import */ var _event_event_system__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./event/event-system */ "Gipy");
/* harmony import */ var _network_network__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./network/network */ "qBBt");
/* harmony import */ var _event_event__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./event/event */ "5MtU");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Event", function() { return _event_event__WEBPACK_IMPORTED_MODULE_2__["Event"]; });

/* harmony import */ var _event_listener__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./event/listener */ "39Ym");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Listener", function() { return _event_listener__WEBPACK_IMPORTED_MODULE_3__["Listener"]; });





var EventSystem = _event_event_system__WEBPACK_IMPORTED_MODULE_0__["EventSystem"].instance;
var Network = _network_network__WEBPACK_IMPORTED_MODULE_1__["Network"].instance;


/***/ }),

/***/ "ynNQ":
/*!****************************************************!*\
  !*** ./src/app/class/core/system/util/compress.ts ***!
  \****************************************************/
/*! exports provided: compressAsync, decompressAsync */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "compressAsync", function() { return compressAsync; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "decompressAsync", function() { return decompressAsync; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "mrSG");
/* harmony import */ var pako__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! pako */ "16wW");
/* harmony import */ var pako__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(pako__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _zero_timeout__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./zero-timeout */ "eS09");



function compressAsync(data, chunkSize) {
    return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function () {
        var deflate, e_1;
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"])(this, function (_a) {
            switch (_a.label) {
                case 0:
                    deflate = new pako__WEBPACK_IMPORTED_MODULE_1__["Deflate"]({ level: 2, gzip: true });
                    _a.label = 1;
                case 1:
                    _a.trys.push([1, 3, , 4]);
                    return [4 /*yield*/, processAsync(deflate, data, chunkSize)];
                case 2:
                    _a.sent();
                    return [2 /*return*/, deflate.result];
                case 3:
                    e_1 = _a.sent();
                    console.error(e_1);
                    return [3 /*break*/, 4];
                case 4: return [2 /*return*/, null];
            }
        });
    });
}
function decompressAsync(data, chunkSize) {
    return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function () {
        var inflate, e_2;
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"])(this, function (_a) {
            switch (_a.label) {
                case 0:
                    inflate = new pako__WEBPACK_IMPORTED_MODULE_1__["Inflate"]();
                    _a.label = 1;
                case 1:
                    _a.trys.push([1, 3, , 4]);
                    return [4 /*yield*/, processAsync(inflate, data, chunkSize)];
                case 2:
                    _a.sent();
                    return [2 /*return*/, inflate.result];
                case 3:
                    e_2 = _a.sent();
                    console.error(e_2);
                    return [3 /*break*/, 4];
                case 4: return [2 /*return*/, null];
            }
        });
    });
}
function processAsync(pakoObj, data, chunkSize) {
    if (chunkSize === void 0) { chunkSize = 16 * 1024; }
    return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function () {
        var total, sliceData, sliceIndex;
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"])(this, function (_a) {
            switch (_a.label) {
                case 0:
                    total = Math.ceil(data.byteLength / chunkSize);
                    sliceData = null;
                    sliceIndex = 0;
                    _a.label = 1;
                case 1:
                    if (!(sliceIndex < total)) return [3 /*break*/, 4];
                    return [4 /*yield*/, waitTickAsync()];
                case 2:
                    _a.sent();
                    sliceData = data.slice(sliceIndex * chunkSize, (sliceIndex + 1) * chunkSize);
                    pakoObj.push(sliceData, total <= sliceIndex + 1);
                    _a.label = 3;
                case 3:
                    sliceIndex++;
                    return [3 /*break*/, 1];
                case 4:
                    if (pakoObj.err)
                        throw new Error("error: " + pakoObj.err);
                    return [2 /*return*/, pakoObj];
            }
        });
    });
}
function waitTickAsync() {
    return new Promise(function (resolve) { return Object(_zero_timeout__WEBPACK_IMPORTED_MODULE_2__["setZeroTimeout"])(resolve); });
}


/***/ }),

/***/ "yrmS":
/*!**************************************************************************!*\
  !*** ./src/app/component/chat-tab-setting/chat-tab-setting.component.ts ***!
  \**************************************************************************/
/*! exports provided: ChatTabSettingComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ChatTabSettingComponent", function() { return ChatTabSettingComponent; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "mrSG");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "fXoL");
/* harmony import */ var _udonarium_chat_tab_list__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @udonarium/chat-tab-list */ "YZvQ");
/* harmony import */ var _udonarium_core_synchronize_object_object_serializer__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @udonarium/core/synchronize-object/object-serializer */ "MDT1");
/* harmony import */ var _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @udonarium/core/synchronize-object/object-store */ "hm7o");
/* harmony import */ var _udonarium_core_system__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @udonarium/core/system */ "yNnI");
/* harmony import */ var _udonarium_peer_cursor__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @udonarium/peer-cursor */ "+UEV");
/* harmony import */ var service_modal_service__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! service/modal.service */ "CE6K");
/* harmony import */ var service_panel_service__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! service/panel.service */ "M9xM");
/* harmony import */ var service_chat_message_service__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! service/chat-message.service */ "PEfN");
/* harmony import */ var service_save_data_service__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! service/save-data.service */ "Uvtn");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @angular/forms */ "3Pt+");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @angular/common */ "ofXK");














function ChatTabSettingComponent_option_6_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "option", 7);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
} if (rf & 2) {
    var chatTab_r3 = ctx.$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpropertyInterpolate"]("value", chatTab_r3.identifier);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtextInterpolate"](chatTab_r3.name);
} }
function ChatTabSettingComponent_ng_container_8_ng_container_6_div_9_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "div", 15);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
} if (rf & 2) {
    var ctx_r8 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtextInterpolate1"]("", ctx_r8.progresPercent, "%");
} }
var _c0 = function (a0) { return { "is-hidden": a0 }; };
function ChatTabSettingComponent_ng_container_8_ng_container_6_Template(rf, ctx) { if (rf & 1) {
    var _r10 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](1, "button", 2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("click", function ChatTabSettingComponent_ng_container_8_ng_container_6_Template_button_click_1_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r10); var ctx_r9 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](2); return ctx_r9.upTabIndex(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](2, "\u2191");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](3, "button", 2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("click", function ChatTabSettingComponent_ng_container_8_ng_container_6_Template_button_click_3_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r10); var ctx_r11 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](2); return ctx_r11.downTabIndex(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](4, "\u2193");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](5, "button", 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("click", function ChatTabSettingComponent_ng_container_8_ng_container_6_Template_button_click_5_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r10); var ctx_r12 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](2); return ctx_r12.save(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](6, "div", 10);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](7, "div", 11);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](8, "\u4FDD\u5B58");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](9, ChatTabSettingComponent_ng_container_8_ng_container_6_div_9_Template, 2, 1, "div", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelement"](10, "span", 13);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](11, "button", 14);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("click", function ChatTabSettingComponent_ng_container_8_ng_container_6_Template_button_click_11_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r10); var ctx_r13 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](2); return ctx_r13.delete(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](12, "\u522A\u9664\u9078\u64C7\u5206\u9801");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var ctx_r4 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](5);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("disabled", ctx_r4.isSaveing);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngClass", _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpureFunction1"](4, _c0, ctx_r4.isSaveing));
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", ctx_r4.isSaveing);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵattribute"]("disabled", ctx_r4.chatTabs.length <= 1 ? "" : null);
} }
function ChatTabSettingComponent_ng_container_8_ng_container_7_Template(rf, ctx) { if (rf & 1) {
    var _r15 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](1, "button", 2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("click", function ChatTabSettingComponent_ng_container_8_ng_container_7_Template_button_click_1_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r15); var ctx_r14 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](2); return ctx_r14.restore(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](2, "\u9084\u539F");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerEnd"]();
} }
function ChatTabSettingComponent_ng_container_8_ng_container_8_Template(rf, ctx) { if (rf & 1) {
    var _r17 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelement"](1, "hr");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](2, "button", 16);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("click", function ChatTabSettingComponent_ng_container_8_ng_container_8_Template_button_click_2_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r17); var ctx_r16 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](2); return ctx_r16.saveLog(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](3, "\u4FDD\u5B58\u804A\u5929\u7D00\u9304");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](4, "span", 17);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](5, "\u4FDD\u5B58\u5F9E\u5217\u8868\u4E2D\u9078\u64C7\u7684\u7D00\u9304");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelement"](6, "br");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](7, "button", 16);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("click", function ChatTabSettingComponent_ng_container_8_ng_container_8_Template_button_click_7_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r17); var ctx_r18 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](2); return ctx_r18.saveAllLog(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](8, "\u4FDD\u5B58\u5168\u5206\u9801\u804A\u5929\u7D00\u9304");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](9, "span", 17);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](10, "\u6309\u6642\u9593\u9806\u5E8F\u5C07\u6240\u6709\u5167\u5BB9\u4E00\u8D77\u4FDD\u5B58");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerEnd"]();
} }
function ChatTabSettingComponent_ng_container_8_ng_container_12_Template(rf, ctx) { if (rf & 1) {
    var _r20 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](1, " \u555F\u7528\u7D00\u9304\u6E05\u9664\u529F\u80FD");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](2, "input", 18);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("ngModelChange", function ChatTabSettingComponent_ng_container_8_ng_container_12_Template_input_ngModelChange_2_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r20); var ctx_r19 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](2); return ctx_r19.allowDeleteLog = $event; });
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelement"](3, "br");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](4, "button", 19);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("click", function ChatTabSettingComponent_ng_container_8_ng_container_12_Template_button_click_4_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r20); var ctx_r21 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](2); return ctx_r21.deleteLog(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](5, "\u6E05\u9664\u9078\u64C7\u804A\u5929\u7D00\u9304");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](6, "button", 19);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("click", function ChatTabSettingComponent_ng_container_8_ng_container_12_Template_button_click_6_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r20); var ctx_r22 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](2); return ctx_r22.deleteLogALL(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](7, "\u6E05\u9664\u6240\u6709\u804A\u5929\u7D00\u9304");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var ctx_r7 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngModel", ctx_r7.allowDeleteLog);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵattribute"]("disabled", ctx_r7.chatTabs.length <= 1 ? "" : null)("disabled", !ctx_r7.allowDeleteLog ? "" : null);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵattribute"]("disabled", ctx_r7.chatTabs.length <= 1 ? "" : null)("disabled", !ctx_r7.allowDeleteLog ? "" : null);
} }
function ChatTabSettingComponent_ng_container_8_Template(rf, ctx) { if (rf & 1) {
    var _r24 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](1, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](2, "\u5206\u9801\u540D : ");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](3, "input", 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("ngModelChange", function ChatTabSettingComponent_ng_container_8_Template_input_ngModelChange_3_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r24); var ctx_r23 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](); return ctx_r23.tabName = $event; });
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelement"](4, "hr");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](5, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](6, ChatTabSettingComponent_ng_container_8_ng_container_6_Template, 13, 6, "ng-container", 6);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](7, ChatTabSettingComponent_ng_container_8_ng_container_7_Template, 3, 0, "ng-container", 6);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](8, ChatTabSettingComponent_ng_container_8_ng_container_8_Template, 11, 0, "ng-container", 6);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelement"](9, "hr");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelement"](10, "br");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelement"](11, "br");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](12, ChatTabSettingComponent_ng_container_8_ng_container_12_Template, 8, 5, "ng-container", 6);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngModel", ctx_r1.tabName);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵattribute"]("disabled", !ctx_r1.isEditable ? "" : null);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", !ctx_r1.isDeleted);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", ctx_r1.isDeleted);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", !ctx_r1.isDeleted);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", !ctx_r1.isDeleted);
} }
function ChatTabSettingComponent_ng_container_9_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](1, "div", 17);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](2, "\u203B\u5C1A\u672A\u5275\u5EFA\u804A\u5929\u5206\u9801\u3002 \u60A8\u53EF\u4EE5\u5F9E\u201C\u65B0\u589E\u804A\u5929\u5206\u9801\u201D\u5275\u5EFA\u804A\u5929\u5206\u9801\u3002");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerEnd"]();
} }
var ChatTabSettingComponent = /** @class */ (function () {
    function ChatTabSettingComponent(modalService, panelService, chatMessageService, saveDataService) {
        this.modalService = modalService;
        this.panelService = panelService;
        this.chatMessageService = chatMessageService;
        this.saveDataService = saveDataService;
        this.selectedTab = null;
        this.selectedTabXml = '';
        this.isSaveing = false;
        this.progresPercent = 0;
        this.allowDeleteLog = false;
    }
    Object.defineProperty(ChatTabSettingComponent.prototype, "tabName", {
        get: function () { return this.selectedTab.name; },
        set: function (tabName) { if (this.isEditable)
            this.selectedTab.name = tabName; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ChatTabSettingComponent.prototype, "chatTabs", {
        get: function () { return this.chatMessageService.chatTabs; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ChatTabSettingComponent.prototype, "isEmpty", {
        get: function () { return this.chatMessageService.chatTabs.length < 1; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ChatTabSettingComponent.prototype, "isDeleted", {
        get: function () { return this.selectedTab ? _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_4__["ObjectStore"].instance.get(this.selectedTab.identifier) == null : false; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ChatTabSettingComponent.prototype, "isEditable", {
        get: function () { return !this.isEmpty && !this.isDeleted; },
        enumerable: false,
        configurable: true
    });
    ChatTabSettingComponent.prototype.ngOnInit = function () {
        var _this = this;
        Promise.resolve().then(function () { return _this.modalService.title = _this.panelService.title = 'チャットタブ設定'; });
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_5__["EventSystem"].register(this)
            .on('DELETE_GAME_OBJECT', 1000, function (event) {
            if (!_this.selectedTab || event.data.identifier !== _this.selectedTab.identifier)
                return;
            var object = _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_4__["ObjectStore"].instance.get(event.data.identifier);
            if (object !== null) {
                _this.selectedTabXml = object.toXml();
            }
        });
    };
    ChatTabSettingComponent.prototype.ngOnDestroy = function () {
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_5__["EventSystem"].unregister(this);
    };
    ChatTabSettingComponent.prototype.onChangeSelectTab = function (identifier) {
        this.selectedTab = _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_4__["ObjectStore"].instance.get(identifier);
        this.selectedTabXml = '';
    };
    ChatTabSettingComponent.prototype.create = function () {
        _udonarium_chat_tab_list__WEBPACK_IMPORTED_MODULE_2__["ChatTabList"].instance.addChatTab('タブ');
    };
    ChatTabSettingComponent.prototype.save = function () {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function () {
            var fileName;
            var _this = this;
            return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"])(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (!this.selectedTab || this.isSaveing)
                            return [2 /*return*/];
                        this.isSaveing = true;
                        this.progresPercent = 0;
                        fileName = 'chat_' + this.selectedTab.name;
                        return [4 /*yield*/, this.saveDataService.saveGameObjectAsync(this.selectedTab, fileName, function (percent) {
                                _this.progresPercent = percent;
                            })];
                    case 1:
                        _a.sent();
                        setTimeout(function () {
                            _this.isSaveing = false;
                            _this.progresPercent = 0;
                        }, 500);
                        return [2 /*return*/];
                }
            });
        });
    };
    Object.defineProperty(ChatTabSettingComponent.prototype, "roomName", {
        get: function () {
            var roomName = _udonarium_core_system__WEBPACK_IMPORTED_MODULE_5__["Network"].peerContext && 0 < _udonarium_core_system__WEBPACK_IMPORTED_MODULE_5__["Network"].peerContext.roomName.length
                ? _udonarium_core_system__WEBPACK_IMPORTED_MODULE_5__["Network"].peerContext.roomName
                : 'ルームデータ';
            return roomName;
        },
        enumerable: false,
        configurable: true
    });
    ChatTabSettingComponent.prototype.appendTimestamp = function (fileName) {
        var date = new Date();
        var year = date.getFullYear();
        var month = ('00' + (date.getMonth() + 1)).slice(-2);
        var day = ('00' + date.getDate()).slice(-2);
        var hours = ('00' + date.getHours()).slice(-2);
        var minutes = ('00' + date.getMinutes()).slice(-2);
        return fileName + ("_" + year + "-" + month + "-" + day + "_" + hours + minutes);
    };
    ChatTabSettingComponent.prototype.saveLog = function () {
        if (!this.selectedTab)
            return;
        var fileName = this.roomName + '_log_' + this.selectedTab.name;
        var fileName_ = this.appendTimestamp(fileName);
        this.saveDataService.saveHtmlChatLog(this.selectedTab, fileName_);
    };
    ChatTabSettingComponent.prototype.saveAllLog = function () {
        var fileName = this.roomName + '_log_' + '全タブ';
        var fileName_ = this.appendTimestamp(fileName);
        this.saveDataService.saveHtmlChatLogAll(fileName_);
    };
    ChatTabSettingComponent.prototype.delete = function () {
        if (!this.isEmpty && this.selectedTab) {
            this.selectedTabXml = this.selectedTab.toXml();
            this.selectedTab.destroy();
        }
    };
    Object.defineProperty(ChatTabSettingComponent.prototype, "myPeer", {
        get: function () { return _udonarium_peer_cursor__WEBPACK_IMPORTED_MODULE_6__["PeerCursor"].myCursor; },
        enumerable: false,
        configurable: true
    });
    ChatTabSettingComponent.prototype.deleteLog = function () {
        if (!this.allowDeleteLog)
            return;
        if (!this.isEmpty && this.selectedTab) {
            while (this.selectedTab.children.length > 0)
                this.selectedTab.children[0].destroy();
            this.selectedTab.tachieReset();
        }
        var mess = 'ログをクリアしました';
        var gameSystem = null;
        var sendTo = '';
        this.chatMessageService.sendMessage(this.selectedTab, mess, gameSystem, this.myPeer.identifier, sendTo, 0, '#000000');
    };
    ChatTabSettingComponent.prototype.deleteLogALL = function () {
        var e_1, _a;
        if (!this.allowDeleteLog)
            return;
        var mess = 'ログをクリアしました';
        var gameSystem = null;
        var sendTo = '';
        try {
            for (var _b = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__values"])(_udonarium_chat_tab_list__WEBPACK_IMPORTED_MODULE_2__["ChatTabList"].instance.chatTabs), _c = _b.next(); !_c.done; _c = _b.next()) {
                var child = _c.value;
                while (child.children.length > 0) {
                    child.children[0].destroy();
                    child.tachieReset();
                }
                this.chatMessageService.sendMessage(child, mess, gameSystem, this.myPeer.identifier, sendTo, 0, '#000000');
            }
        }
        catch (e_1_1) { e_1 = { error: e_1_1 }; }
        finally {
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            }
            finally { if (e_1) throw e_1.error; }
        }
    };
    ChatTabSettingComponent.prototype.restore = function () {
        if (this.selectedTab && this.selectedTabXml) {
            var restoreTable = _udonarium_core_synchronize_object_object_serializer__WEBPACK_IMPORTED_MODULE_3__["ObjectSerializer"].instance.parseXml(this.selectedTabXml);
            _udonarium_chat_tab_list__WEBPACK_IMPORTED_MODULE_2__["ChatTabList"].instance.addChatTab(restoreTable);
            this.selectedTabXml = '';
        }
    };
    ChatTabSettingComponent.prototype.upTabIndex = function () {
        if (!this.selectedTab)
            return;
        var parentElement = this.selectedTab.parent;
        var index = parentElement.children.indexOf(this.selectedTab);
        if (0 < index) {
            var prevElement = parentElement.children[index - 1];
            parentElement.insertBefore(this.selectedTab, prevElement);
        }
    };
    ChatTabSettingComponent.prototype.downTabIndex = function () {
        if (!this.selectedTab)
            return;
        var parentElement = this.selectedTab.parent;
        var index = parentElement.children.indexOf(this.selectedTab);
        if (index < parentElement.children.length - 1) {
            var nextElement = parentElement.children[index + 1];
            parentElement.insertBefore(nextElement, this.selectedTab);
        }
    };
    ChatTabSettingComponent.ɵfac = function ChatTabSettingComponent_Factory(t) { return new (t || ChatTabSettingComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdirectiveInject"](service_modal_service__WEBPACK_IMPORTED_MODULE_7__["ModalService"]), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdirectiveInject"](service_panel_service__WEBPACK_IMPORTED_MODULE_8__["PanelService"]), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdirectiveInject"](service_chat_message_service__WEBPACK_IMPORTED_MODULE_9__["ChatMessageService"]), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdirectiveInject"](service_save_data_service__WEBPACK_IMPORTED_MODULE_10__["SaveDataService"])); };
    ChatTabSettingComponent.ɵcmp = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdefineComponent"]({ type: ChatTabSettingComponent, selectors: [["app-chat-tab-setting"]], decls: 10, vars: 4, consts: [[1, "flex-container"], [1, "flex-item", "no-grow"], [3, "click"], ["size", "10", 2, "width", "10em", 3, "ngModel", "change"], [3, "value", 4, "ngFor", "ngForOf"], [1, "flex-item"], [4, "ngIf"], [3, "value"], ["placeholder", "Name", 3, "ngModel", "ngModelChange"], [3, "disabled", "click"], [2, "position", "relative"], [3, "ngClass"], ["class", "progress", 4, "ngIf"], [2, "display", "inline-block", "width", "2em"], [1, "danger", 3, "click"], [1, "progress"], [2, "width", "9em", 3, "click"], [2, "font-size", "12px"], ["type", "checkbox", "value", "allowDeleteLog", 3, "ngModel", "ngModelChange"], [1, "danger", 2, "width", "9em", 3, "click"]], template: function ChatTabSettingComponent_Template(rf, ctx) { if (rf & 1) {
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "div", 0);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](1, "div", 1);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](2, "div");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](3, "button", 2);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("click", function ChatTabSettingComponent_Template_button_click_3_listener() { return ctx.create(); });
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](4, "\u65B0\u589E\u804A\u5929\u5206\u9801");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](5, "select", 3);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("change", function ChatTabSettingComponent_Template_select_change_5_listener($event) { return ctx.onChangeSelectTab($event.target.value); });
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](6, ChatTabSettingComponent_option_6_Template, 2, 2, "option", 4);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](7, "div", 5);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](8, ChatTabSettingComponent_ng_container_8_Template, 13, 6, "ng-container", 6);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](9, ChatTabSettingComponent_ng_container_9_Template, 3, 0, "ng-container", 6);
        } if (rf & 2) {
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](5);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngModel", ctx.selectedTab == null ? null : ctx.selectedTab.identifier);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngForOf", ctx.chatTabs);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](2);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", !ctx.isEmpty && ctx.selectedTab);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", ctx.isEmpty);
        } }, directives: [_angular_forms__WEBPACK_IMPORTED_MODULE_11__["SelectControlValueAccessor"], _angular_forms__WEBPACK_IMPORTED_MODULE_11__["NgControlStatus"], _angular_forms__WEBPACK_IMPORTED_MODULE_11__["NgModel"], _angular_common__WEBPACK_IMPORTED_MODULE_12__["NgForOf"], _angular_common__WEBPACK_IMPORTED_MODULE_12__["NgIf"], _angular_forms__WEBPACK_IMPORTED_MODULE_11__["NgSelectOption"], _angular_forms__WEBPACK_IMPORTED_MODULE_11__["ɵangular_packages_forms_forms_x"], _angular_forms__WEBPACK_IMPORTED_MODULE_11__["DefaultValueAccessor"], _angular_common__WEBPACK_IMPORTED_MODULE_12__["NgClass"], _angular_forms__WEBPACK_IMPORTED_MODULE_11__["CheckboxControlValueAccessor"]], styles: [".flex-container[_ngcontent-%COMP%] { \r\n  display: flex; \r\n  flex-flow:  row wrap; \r\n  justify-content: flex-start; \r\n  align-items: stretch;\r\n\r\n}\r\n.flex-item[_ngcontent-%COMP%] {\r\n  margin: 5px; \r\n  flex: 1 0 auto;\r\n  box-sizing: border-box; \r\n  flex-grow: 1;\r\n  max-width: 100%;\r\n}\r\n.no-grow[_ngcontent-%COMP%]{ \r\n  flex-grow: 0;\r\n}\r\n.is-hidden[_ngcontent-%COMP%] {\r\n  visibility: hidden;\r\n}\r\n.progress[_ngcontent-%COMP%] {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  position: absolute;\r\n  top: 0;\r\n  bottom: 0;\r\n  left: 0;\r\n  right: 0;\r\n  font-size: 0.9em;\r\n}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNoYXQtdGFiLXNldHRpbmcuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxrQkFDeUIsV0FBVztFQUNsQyxhQUFhLEVBRWdCLFdBQVc7RUFDeEMsb0JBQW9CLEVBRWlCLFdBQVc7RUFDaEQsMkJBQTJCLEVBRUcsV0FBVztFQUN6QyxvQkFBb0I7O0FBRXRCO0FBQ0E7RUFDRSxXQUFXLEVBQ2EsV0FBVztFQUNuQyxjQUFjO0VBQ2Qsc0JBQXNCLEVBQ0EsV0FBVztFQUNqQyxZQUFZO0VBQ1osZUFBZTtBQUNqQjtBQUVBLFVBQ3dCLFdBQVc7RUFDakMsWUFBWTtBQUNkO0FBRUE7RUFDRSxrQkFBa0I7QUFDcEI7QUFFQTtFQUNFLGFBQWE7RUFDYixtQkFBbUI7RUFDbkIsdUJBQXVCO0VBQ3ZCLGtCQUFrQjtFQUNsQixNQUFNO0VBQ04sU0FBUztFQUNULE9BQU87RUFDUCxRQUFRO0VBQ1IsZ0JBQWdCO0FBQ2xCIiwiZmlsZSI6ImNoYXQtdGFiLXNldHRpbmcuY29tcG9uZW50LmNzcyIsInNvdXJjZXNDb250ZW50IjpbIi5mbGV4LWNvbnRhaW5lciB7XHJcbiAgZGlzcGxheTogLXdlYmtpdC1mbGV4OyAvKiBTYWZhcmkgKi9cclxuICBkaXNwbGF5OiBmbGV4O1xyXG5cclxuICAtd2Via2l0LWZsZXgtZmxvdzogcm93IHdyYXA7IC8qIFNhZmFyaSAqL1xyXG4gIGZsZXgtZmxvdzogIHJvdyB3cmFwO1xyXG5cclxuICAtd2Via2l0LWp1c3RpZnktY29udGVudDogZmxleC1zdGFydDsgLyogU2FmYXJpICovXHJcbiAganVzdGlmeS1jb250ZW50OiBmbGV4LXN0YXJ0O1xyXG5cclxuICAtd2Via2l0LWFsaWduLWl0ZW1zOiBzdHJldGNoOyAvKiBTYWZhcmkgKi9cclxuICBhbGlnbi1pdGVtczogc3RyZXRjaDtcclxuXHJcbn1cclxuLmZsZXgtaXRlbSB7XHJcbiAgbWFyZ2luOiA1cHg7XHJcbiAgLXdlYmtpdC1mbGV4OiAxIDAgYXV0bzsgLyogU2FmYXJpICovXHJcbiAgZmxleDogMSAwIGF1dG87XHJcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcclxuICAtd2Via2l0LWZsZXgtZ3JvdzogMTsgLyogU2FmYXJpICovXHJcbiAgZmxleC1ncm93OiAxO1xyXG4gIG1heC13aWR0aDogMTAwJTtcclxufVxyXG5cclxuLm5vLWdyb3d7XHJcbiAgLXdlYmtpdC1mbGV4LWdyb3c6IDA7IC8qIFNhZmFyaSAqL1xyXG4gIGZsZXgtZ3JvdzogMDtcclxufVxyXG5cclxuLmlzLWhpZGRlbiB7XHJcbiAgdmlzaWJpbGl0eTogaGlkZGVuO1xyXG59XHJcblxyXG4ucHJvZ3Jlc3Mge1xyXG4gIGRpc3BsYXk6IGZsZXg7XHJcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcclxuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcclxuICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgdG9wOiAwO1xyXG4gIGJvdHRvbTogMDtcclxuICBsZWZ0OiAwO1xyXG4gIHJpZ2h0OiAwO1xyXG4gIGZvbnQtc2l6ZTogMC45ZW07XHJcbn1cclxuIl19 */"] });
    return ChatTabSettingComponent;
}());

/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵsetClassMetadata"](ChatTabSettingComponent, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_1__["Component"],
        args: [{
                selector: 'app-chat-tab-setting',
                templateUrl: './chat-tab-setting.component.html',
                styleUrls: ['./chat-tab-setting.component.css']
            }]
    }], function () { return [{ type: service_modal_service__WEBPACK_IMPORTED_MODULE_7__["ModalService"] }, { type: service_panel_service__WEBPACK_IMPORTED_MODULE_8__["PanelService"] }, { type: service_chat_message_service__WEBPACK_IMPORTED_MODULE_9__["ChatMessageService"] }, { type: service_save_data_service__WEBPACK_IMPORTED_MODULE_10__["SaveDataService"] }]; }, null); })();


/***/ }),

/***/ "z2Us":
/*!**************************************************!*\
  !*** ./src/app/directive/draggable.directive.ts ***!
  \**************************************************/
/*! exports provided: DraggableDirective */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DraggableDirective", function() { return DraggableDirective; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "fXoL");
/* harmony import */ var _udonarium_transform_css_number__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @udonarium/transform/css-number */ "zAbn");
/* harmony import */ var _input_handler__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./input-handler */ "96Ug");




var DraggableDirective = /** @class */ (function () {
    function DraggableDirective(ngZone, elementRef) {
        this.ngZone = ngZone;
        this.elementRef = elementRef;
        this.isDisable = false;
        this.boundsSelector = 'body';
        this.handleSelector = '';
        this.unhandleSelector = 'input,textarea,button,select,option,span';
        this.stackSelector = '';
        this.opacity = 0.7;
        this.onstart = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        this.onmove = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        this.onend = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        this.callbackOnResize = this.adjustPosition.bind(this);
        this.input = null;
        this.startPosition = { x: 0, y: 0, z: 0 };
        this.startPointer = { x: 0, y: 0, z: 0 };
        this.prevTrans = { x: 0, y: 0, z: 0 };
    }
    DraggableDirective.prototype.ngAfterViewInit = function () {
        this.initialize();
        this.adjustPosition();
        this.setForeground();
    };
    DraggableDirective.prototype.ngOnDestroy = function () {
        this.cancel();
        this.destroy();
    };
    DraggableDirective.prototype.initialize = function () {
        var _this = this;
        this.ngZone.runOutsideAngular(function () {
            _this.input = new _input_handler__WEBPACK_IMPORTED_MODULE_2__["InputHandler"](_this.elementRef.nativeElement);
            window.addEventListener('resize', _this.callbackOnResize, false);
        });
        this.input.onStart = this.onInputStart.bind(this);
        this.input.onMove = this.onInputMove.bind(this);
        this.input.onEnd = this.onInputEnd.bind(this);
        this.input.onContextMenu = this.onContextMenu.bind(this);
    };
    DraggableDirective.prototype.cancel = function () {
        this.input.cancel();
    };
    DraggableDirective.prototype.destroy = function () {
        window.removeEventListener('resize', this.callbackOnResize, false);
        this.input.destroy();
    };
    DraggableDirective.prototype.onInputStart = function (e) {
        if (e.button === 1 || e.button === 2)
            return this.cancel();
        this.setForeground();
        this.startPosition = this.calcElementPosition(this.elementRef.nativeElement);
        this.startPointer = this.input.pointer;
        this.prevTrans = { x: 0, y: 0, z: 0 };
        var isHandle = this.isHandleElement(e.target);
        var isUnhandle = this.isUnhandleElement(e.target);
        var isScrollable = e.touches != null ? this.isScrollableElement(e.target) : false;
        if (!isHandle || isUnhandle || isScrollable) {
            this.cancel();
            return;
        }
        e.stopPropagation();
    };
    DraggableDirective.prototype.onInputMove = function (e) {
        var trans = {
            x: this.input.pointer.x - this.startPointer.x,
            y: this.input.pointer.y - this.startPointer.y,
            z: this.input.pointer.z - this.startPointer.z
        };
        var diff = {
            x: trans.x - this.prevTrans.x,
            y: trans.y - this.prevTrans.y,
            z: trans.z - this.prevTrans.z
        };
        var correction = this.calcCorrectionPosition(diff);
        trans.x += correction.x;
        trans.y += correction.y;
        trans.z += correction.z;
        if (0 < Math.pow(trans.x, 2) + Math.pow(trans.y, 2) + Math.pow(trans.z, 2)) {
            this.elementRef.nativeElement.style.opacity = this.opacity + '';
        }
        this.elementRef.nativeElement.style.left = trans.x + this.startPosition.x + 'px';
        this.elementRef.nativeElement.style.top = trans.y + this.startPosition.y + 'px';
        this.prevTrans = trans;
        if (e.cancelable)
            e.preventDefault();
        e.stopPropagation();
    };
    DraggableDirective.prototype.onInputEnd = function (e) {
        this.elementRef.nativeElement.style.opacity = null;
        if (this.input.isDragging && e.cancelable) {
            this.preventClickIfNeeded(e);
            e.preventDefault();
        }
        e.stopPropagation();
    };
    DraggableDirective.prototype.onContextMenu = function (e) {
        e.stopPropagation();
    };
    DraggableDirective.prototype.preventClickIfNeeded = function (e) {
        var _this = this;
        if (e.touches != null)
            return;
        var diffX = this.input.pointer.x - this.startPointer.x;
        var diffY = this.input.pointer.y - this.startPointer.y;
        var diffZ = this.input.pointer.z - this.startPointer.z;
        var distance = Math.pow(diffX, 2) + Math.pow(diffY, 2) + Math.pow(diffZ, 2);
        if (Math.pow(15, 2) > distance)
            return;
        var callback = function (e) {
            if (e.cancelable)
                e.preventDefault();
            e.stopPropagation();
        };
        this.elementRef.nativeElement.addEventListener('click', callback, true);
        setTimeout(function () { return _this.elementRef.nativeElement.removeEventListener('click', callback, true); });
    };
    DraggableDirective.prototype.adjustPosition = function () {
        var current = this.calcElementPosition(this.elementRef.nativeElement);
        var correction = this.calcCorrectionPosition();
        this.elementRef.nativeElement.style.left = correction.x + current.x + 'px';
        this.elementRef.nativeElement.style.top = correction.y + current.y + 'px';
    };
    DraggableDirective.prototype.isHandleElement = function (target) {
        if (this.handleSelector.length < 1)
            return true;
        return this.isContainsElement(target, this.handleSelector);
    };
    DraggableDirective.prototype.isUnhandleElement = function (target) {
        if (this.unhandleSelector.length < 1)
            return false;
        return this.isContainsElement(target, this.unhandleSelector);
    };
    DraggableDirective.prototype.isContainsElement = function (target, selectors) {
        var elms = this.elementRef.nativeElement.querySelectorAll(selectors);
        for (var i = 0; i < elms.length; i++) {
            if (elms[i].contains(target))
                return true;
        }
        return false;
    };
    DraggableDirective.prototype.isScrollableElement = function (target) {
        var boundsElm = this.elementRef.nativeElement.ownerDocument.querySelector(this.boundsSelector);
        var node = target;
        var overflowType = ['scroll', 'auto'];
        var positionType = ['fixed', 'sticky', '-webkit-sticky'];
        while (node && boundsElm !== node && this.elementRef.nativeElement !== node) {
            var css = window.getComputedStyle(node);
            if (0 <= overflowType.indexOf(css.overflowY) && node.offsetHeight < node.scrollHeight)
                return true;
            if (0 <= positionType.indexOf(css.position))
                return false;
            node = node.parentElement;
        }
        return false;
    };
    DraggableDirective.prototype.calcCorrectionPosition = function (diff) {
        if (diff === void 0) { diff = { x: 0, y: 0, z: 0 }; }
        var correction = { x: 0, y: 0, z: 0 };
        var box = this.elementRef.nativeElement.getBoundingClientRect();
        var bounds = this.elementRef.nativeElement.ownerDocument.querySelector(this.boundsSelector).getBoundingClientRect();
        if (bounds.right < box.right + diff.x) {
            correction.x += bounds.right - (box.right + diff.x);
        }
        if (box.left + diff.x < bounds.left) {
            correction.x += bounds.left - (box.left + diff.x);
        }
        if (bounds.bottom < box.bottom + diff.y) {
            correction.y += bounds.bottom - (box.bottom + diff.y);
        }
        if (box.top + diff.y < bounds.top) {
            correction.y += bounds.top - (box.top + diff.y);
        }
        return correction;
    };
    DraggableDirective.prototype.calcElementPosition = function (target) {
        var css = window.getComputedStyle(target);
        return {
            x: _udonarium_transform_css_number__WEBPACK_IMPORTED_MODULE_1__["CSSNumber"].relation(css.left, target.parentElement.offsetWidth, target.parentElement.offsetWidth * 0.5),
            y: _udonarium_transform_css_number__WEBPACK_IMPORTED_MODULE_1__["CSSNumber"].relation(css.top, target.parentElement.offsetHeight, target.parentElement.offsetHeight * 0.5),
            z: 0
        };
    };
    DraggableDirective.prototype.setForeground = function () {
        if (this.stackSelector.length < 1)
            return;
        var stacks = this.elementRef.nativeElement.ownerDocument.querySelectorAll(this.stackSelector);
        var topZindex = 0;
        var bottomZindex = 99999;
        stacks.forEach(function (elm) {
            var zIndex = parseInt(elm.style.zIndex);
            if (topZindex < zIndex)
                topZindex = zIndex;
            if (zIndex < bottomZindex)
                bottomZindex = zIndex;
        });
        if (topZindex <= parseInt(this.elementRef.nativeElement.style.zIndex))
            return;
        stacks.forEach(function (elm) {
            elm.style.zIndex = (parseInt(elm.style.zIndex) - bottomZindex) + '';
        });
        this.elementRef.nativeElement.style.zIndex = (topZindex + 1) + '';
    };
    DraggableDirective.ɵfac = function DraggableDirective_Factory(t) { return new (t || DraggableDirective)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["NgZone"]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["ElementRef"])); };
    DraggableDirective.ɵdir = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineDirective"]({ type: DraggableDirective, selectors: [["", "appDraggable", ""]], inputs: { isDisable: ["draggable.disable", "isDisable"], boundsSelector: ["draggable.bounds", "boundsSelector"], handleSelector: ["draggable.handle", "handleSelector"], unhandleSelector: ["draggable.unhandle", "unhandleSelector"], stackSelector: ["draggable.stack", "stackSelector"], opacity: ["draggable.opacity", "opacity"] }, outputs: { onstart: "draggable.start", onmove: "draggable.move", onend: "draggable.end" } });
    return DraggableDirective;
}());

/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](DraggableDirective, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Directive"],
        args: [{
                selector: '[appDraggable]'
            }]
    }], function () { return [{ type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["NgZone"] }, { type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ElementRef"] }]; }, { isDisable: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"],
            args: ['draggable.disable']
        }], boundsSelector: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"],
            args: ['draggable.bounds']
        }], handleSelector: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"],
            args: ['draggable.handle']
        }], unhandleSelector: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"],
            args: ['draggable.unhandle']
        }], stackSelector: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"],
            args: ['draggable.stack']
        }], opacity: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"],
            args: ['draggable.opacity']
        }], onstart: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"],
            args: ['draggable.start']
        }], onmove: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"],
            args: ['draggable.move']
        }], onend: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"],
            args: ['draggable.end']
        }] }); })();


/***/ }),

/***/ "zAbn":
/*!***********************************************!*\
  !*** ./src/app/class/transform/css-number.ts ***!
  \***********************************************/
/*! exports provided: CSSNumber */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CSSNumber", function() { return CSSNumber; });
var CSSNumber;
(function (CSSNumber) {
    function relation(value, relativeSize, defaultValue) {
        if (defaultValue === void 0) { defaultValue = 0; }
        if (typeof value === 'number') {
            return value;
        }
        else if (typeof value === 'string') {
            value = value.trim().toLowerCase();
            if (value.indexOf('%') > 0)
                return (parse(value.replace('%', ''), defaultValue) / 100) * relativeSize;
            else if (value.indexOf('px') > 0 || value.indexOf('pt') > 0)
                return parse(value.replace('px', ''), defaultValue);
            else if (value.indexOf('vw') > 0)
                return (parse(value.replace('vw', ''), defaultValue) / 100) * window.innerWidth;
            else if (value.indexOf('vh') > 0)
                return (parse(value.replace('vh', ''), defaultValue) / 100) * window.innerHeight;
            else if (value.indexOf('vm') > 0)
                return (parse(value.replace('vm', ''), defaultValue) / 100) * Math.min(window.innerWidth, window.innerHeight);
            else if (value.indexOf('em') > 0)
                return parse(value.replace('em', ''), defaultValue);
            else if (value === 'top' || value === 'left')
                return 0;
            else if (value === 'center' || value === 'middle')
                return relativeSize * 0.5;
            else if (value === 'bottom' || value === 'right')
                return relativeSize;
            return defaultValue;
        }
        return defaultValue;
    }
    CSSNumber.relation = relation;
    function parse(value, defaultValue) {
        if (defaultValue === void 0) { defaultValue = 0; }
        value = parseFloat(value);
        if (isNaN(value))
            return defaultValue;
        return value;
    }
    CSSNumber.parse = parse;
})(CSSNumber || (CSSNumber = {}));


/***/ }),

/***/ "zP96":
/*!***********************************************!*\
  !*** ./src/app/class/data-summary-setting.ts ***!
  \***********************************************/
/*! exports provided: SortOrder, DataSummarySetting */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SortOrder", function() { return SortOrder; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DataSummarySetting", function() { return DataSummarySetting; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "mrSG");
/* harmony import */ var _core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./core/synchronize-object/decorator */ "1lIu");
/* harmony import */ var _core_synchronize_object_game_object__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./core/synchronize-object/game-object */ "xdgh");



var SortOrder;
(function (SortOrder) {
    SortOrder["ASC"] = "ASC";
    SortOrder["DESC"] = "DESC";
})(SortOrder || (SortOrder = {}));
var DataSummarySetting = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"])(DataSummarySetting, _super);
    function DataSummarySetting() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.sortTag = 'name';
        _this.sortOrder = SortOrder.ASC;
        _this.dataTag = 'HP MP 敏捷度 生命力 精神力 情報';
        return _this;
    }
    DataSummarySetting_1 = DataSummarySetting;
    Object.defineProperty(DataSummarySetting, "instance", {
        get: function () {
            if (!DataSummarySetting_1._instance) {
                DataSummarySetting_1._instance = new DataSummarySetting_1('DataSummarySetting');
                DataSummarySetting_1._instance.initialize();
            }
            return DataSummarySetting_1._instance;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(DataSummarySetting.prototype, "dataTags", {
        get: function () {
            if (this._dataTag !== this.dataTag) {
                this._dataTag = this.dataTag;
                this._dataTags = this.dataTag != null && 0 < this.dataTag.trim().length ? this.dataTag.trim().split(/\s+/) : [];
            }
            return this._dataTags;
        },
        enumerable: false,
        configurable: true
    });
    DataSummarySetting.prototype.innerXml = function () { return ''; };
    DataSummarySetting.prototype.parseInnerXml = function (element) {
        // XMLからの新規作成を許可せず、既存のオブジェクトを更新する
        var context = DataSummarySetting_1.instance.toContext();
        context.syncData = this.toContext().syncData;
        DataSummarySetting_1.instance.apply(context);
        DataSummarySetting_1.instance.update();
        this.destroy();
    };
    var DataSummarySetting_1;
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_1__["SyncVar"])()
    ], DataSummarySetting.prototype, "sortTag", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_1__["SyncVar"])()
    ], DataSummarySetting.prototype, "sortOrder", void 0);
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_1__["SyncVar"])()
    ], DataSummarySetting.prototype, "dataTag", void 0);
    DataSummarySetting = DataSummarySetting_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        Object(_core_synchronize_object_decorator__WEBPACK_IMPORTED_MODULE_1__["SyncObject"])('summary-setting')
    ], DataSummarySetting);
    return DataSummarySetting;
}(_core_synchronize_object_game_object__WEBPACK_IMPORTED_MODULE_2__["GameObject"]));



/***/ }),

/***/ "zUnb":
/*!*********************!*\
  !*** ./src/main.ts ***!
  \*********************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var hammerjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! hammerjs */ "yLV6");
/* harmony import */ var hammerjs__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(hammerjs__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "fXoL");
/* harmony import */ var _environments_environment__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./environments/environment */ "AytR");
/* harmony import */ var _app_app_module__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/app.module */ "ZAI4");
/* harmony import */ var _angular_platform_browser__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @angular/platform-browser */ "jhN1");





if (_environments_environment__WEBPACK_IMPORTED_MODULE_2__["environment"].production) {
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["enableProdMode"])();
}
_angular_platform_browser__WEBPACK_IMPORTED_MODULE_4__["platformBrowser"]().bootstrapModule(_app_app_module__WEBPACK_IMPORTED_MODULE_3__["AppModule"])
    .catch(function (err) { return console.error(err); });


/***/ }),

/***/ "zXSY":
/*!**********************************************************************************!*\
  !*** ./src/app/component/game-character-sheet/game-character-sheet.component.ts ***!
  \**********************************************************************************/
/*! exports provided: GameCharacterSheetComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GameCharacterSheetComponent", function() { return GameCharacterSheetComponent; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "mrSG");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "fXoL");
/* harmony import */ var _udonarium_core_system__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @udonarium/core/system */ "yNnI");
/* harmony import */ var _udonarium_data_element__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @udonarium/data-element */ "gkrD");
/* harmony import */ var _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @udonarium/sound-effect */ "veT5");
/* harmony import */ var component_file_selecter_file_selecter_component__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! component/file-selecter/file-selecter.component */ "FR7b");
/* harmony import */ var service_save_data_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! service/save-data.service */ "Uvtn");
/* harmony import */ var service_panel_service__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! service/panel.service */ "M9xM");
/* harmony import */ var service_modal_service__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! service/modal.service */ "CE6K");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @angular/common */ "ofXK");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @angular/forms */ "3Pt+");
/* harmony import */ var component_game_data_element_game_data_element_component__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! component/game-data-element/game-data-element.component */ "CvDi");
/* harmony import */ var pipe_safe_pipe__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! pipe/safe.pipe */ "6HCy");














function GameCharacterSheetComponent_ng_container_4_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainer"](0);
} }
function GameCharacterSheetComponent_ng_container_5_Template(rf, ctx) { if (rf & 1) {
    var _r10 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](1, "button", 1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("click", function GameCharacterSheetComponent_ng_container_5_Template_button_click_1_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r10); var ctx_r9 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](); return ctx_r9.openModal("front"); });
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](2, "\u8B8A\u66F4\u8868\u9762\u5716\u7247");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](3, "button", 1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("click", function GameCharacterSheetComponent_ng_container_5_Template_button_click_3_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r10); var ctx_r11 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](); return ctx_r11.openModal("back"); });
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](4, "\u8B8A\u66F4\u88CF\u9762\u5716\u7247");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerEnd"]();
} }
function GameCharacterSheetComponent_ng_container_6_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainer"](0);
} }
function GameCharacterSheetComponent_ng_container_7_Template(rf, ctx) { if (rf & 1) {
    var _r13 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](1, "button", 1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("click", function GameCharacterSheetComponent_ng_container_7_Template_button_click_1_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r13); var ctx_r12 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](); return ctx_r12.openModal("floor"); });
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](2, "\u8B8A\u66F4\u5E95\u90E8\u5716\u7247");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](3, "button", 1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("click", function GameCharacterSheetComponent_ng_container_7_Template_button_click_3_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r13); var ctx_r14 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](); return ctx_r14.openModal("wall"); });
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](4, "\u8B8A\u66F4\u7246\u9762\u5716\u7247");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerEnd"]();
} }
function GameCharacterSheetComponent_ng_container_8_Template(rf, ctx) { if (rf & 1) {
    var _r16 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](1, "button", 7);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("click", function GameCharacterSheetComponent_ng_container_8_Template_button_click_1_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r16); var ctx_r15 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](); return ctx_r15.openModal(ctx_r15.tabletopObject["face"]); });
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](2, "\u8B8A\u66F4\u9AB0\u5B50\u5716\u7247");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var ctx_r4 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("disabled", !ctx_r4.tabletopObject["isVisible"]);
} }
function GameCharacterSheetComponent_ng_container_9_Template(rf, ctx) { if (rf & 1) {
    var _r18 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](1, "button", 1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("click", function GameCharacterSheetComponent_ng_container_9_Template_button_click_1_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r18); var ctx_r17 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](); return ctx_r17.openModal("imageIdentifier", true); });
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](2, "\u8B8A\u66F4\u5716\u7247");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerEnd"]();
} }
function GameCharacterSheetComponent_ng_container_14_select_1_Template(rf, ctx) { if (rf & 1) {
    var _r21 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "select", 16);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("change", function GameCharacterSheetComponent_ng_container_14_select_1_Template_select_change_0_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r21); var ctx_r20 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](2); return ctx_r20.setLocation($event.target.value); });
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](1, "option", 17);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](2, "\u684C\u9762");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](3, "option", 18);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](4, "\u5171\u6709\u5009\u5EAB");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](5, "option", 19);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](6, "\u500B\u4EBA\u5009\u5EAB");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](7, "option", 20);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](8, "\u5893\u5730");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
} if (rf & 2) {
    var ctx_r19 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngModel", ctx_r19.tabletopObject.location.name);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](5);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpropertyInterpolate"]("value", ctx_r19.networkService.peerId);
} }
function GameCharacterSheetComponent_ng_container_14_Template(rf, ctx) { if (rf & 1) {
    var _r23 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](1, GameCharacterSheetComponent_ng_container_14_select_1_Template, 9, 2, "select", 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](2, "div", 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](3, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](4, " \u4E0D\u986F\u793A\u684C\u9762\u6E05\u55AE ");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](5, "input", 10);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("ngModelChange", function GameCharacterSheetComponent_ng_container_14_Template_input_ngModelChange_5_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r23); var ctx_r22 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](); return ctx_r22.tabletopObject.hideInventory = $event; })("click", function GameCharacterSheetComponent_ng_container_14_Template_input_click_5_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r23); var ctx_r24 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](); return ctx_r24.clickHide(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](6, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](7, " \u4E0D\u9032\u884C\u767C\u8A00 ");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](8, "input", 11);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("ngModelChange", function GameCharacterSheetComponent_ng_container_14_Template_input_ngModelChange_8_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r23); var ctx_r25 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](); return ctx_r25.tabletopObject.nonTalkFlag = $event; })("click", function GameCharacterSheetComponent_ng_container_14_Template_input_click_8_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r23); var ctx_r26 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](); return ctx_r26.clickNoTalk(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](9, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](10, " \u5F48\u51FA\u8996\u7A97\u5BEC\u5EA6 ");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](11, "input", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("ngModelChange", function GameCharacterSheetComponent_ng_container_14_Template_input_ngModelChange_11_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r23); var ctx_r27 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](); return ctx_r27.tabletopObject.overViewWidth = $event; });
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpipe"](12, "safe");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](13, "input", 13);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("ngModelChange", function GameCharacterSheetComponent_ng_container_14_Template_input_ngModelChange_13_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r23); var ctx_r28 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](); return ctx_r28.tabletopObject.overViewWidth = $event; })("change", function GameCharacterSheetComponent_ng_container_14_Template_input_change_13_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r23); var ctx_r29 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](); return ctx_r29.chkPopWidth($event.target.value); });
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](14, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](15, " \u5F48\u51FA\u8996\u7A97\u5BEC\u5EA6\u6700\u5927 ");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](16, "input", 14);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("ngModelChange", function GameCharacterSheetComponent_ng_container_14_Template_input_ngModelChange_16_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r23); var ctx_r30 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](); return ctx_r30.tabletopObject.overViewMaxHeight = $event; });
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpipe"](17, "safe");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](18, "input", 15);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("ngModelChange", function GameCharacterSheetComponent_ng_container_14_Template_input_ngModelChange_18_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r23); var ctx_r31 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](); return ctx_r31.tabletopObject.overViewMaxHeight = $event; })("change", function GameCharacterSheetComponent_ng_container_14_Template_input_change_18_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r23); var ctx_r32 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](); return ctx_r32.chkPopMaxHeight($event.target.value); });
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var ctx_r6 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", ctx_r6.tabletopObject);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngModel", ctx_r6.tabletopObject.hideInventory);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngModel", ctx_r6.tabletopObject.nonTalkFlag);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵstyleMap"](_angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpipeBind2"](12, 11, "font-size: 0.8em; min-width: 1em; width:" + 10 + "em; --min: 0; --max: " + 0 + "; --val:" + 10 + ";", "style"));
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngModel", ctx_r6.tabletopObject.overViewWidth);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngModel", ctx_r6.tabletopObject.overViewWidth);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵstyleMap"](_angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpipeBind2"](17, 14, "font-size: 0.8em; min-width: 1em; width:" + 10 + "em; --min: 0; --max: " + 0 + "; --val:" + 10 + ";", "style"));
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngModel", ctx_r6.tabletopObject.overViewMaxHeight);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngModel", ctx_r6.tabletopObject.overViewMaxHeight);
} }
function GameCharacterSheetComponent_ng_container_15_Template(rf, ctx) { if (rf & 1) {
    var _r34 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](1, "div", 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](2, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](3, " \u5C07\u9AD8\u5EA6\u9650\u5236\u70BAheight\u8A2D\u5B9A\u5024 ");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](4, "input", 21);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("ngModelChange", function GameCharacterSheetComponent_ng_container_15_Template_input_ngModelChange_4_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r34); var ctx_r33 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](); return ctx_r33.tabletopObject.limitHeight = $event; })("click", function GameCharacterSheetComponent_ng_container_15_Template_input_click_4_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r34); var ctx_r35 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](); return ctx_r35.clickLimitHeight(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](5, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](6, " \u5F48\u51FA\u8996\u7A97\u5BEC\u5EA6 ");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](7, "input", 14);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("ngModelChange", function GameCharacterSheetComponent_ng_container_15_Template_input_ngModelChange_7_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r34); var ctx_r36 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](); return ctx_r36.tabletopObject.overViewWidth = $event; });
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpipe"](8, "safe");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](9, "input", 22);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("ngModelChange", function GameCharacterSheetComponent_ng_container_15_Template_input_ngModelChange_9_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r34); var ctx_r37 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](); return ctx_r37.tabletopObject.overViewWidth = $event; })("change", function GameCharacterSheetComponent_ng_container_15_Template_input_change_9_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r34); var ctx_r38 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](); return ctx_r38.chkPopWidth($event.target.value); });
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](10, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](11, " \u5F48\u51FA\u8996\u7A97\u5BEC\u5EA6\u6700\u5927 ");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](12, "input", 14);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("ngModelChange", function GameCharacterSheetComponent_ng_container_15_Template_input_ngModelChange_12_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r34); var ctx_r39 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](); return ctx_r39.tabletopObject.overViewMaxHeight = $event; });
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpipe"](13, "safe");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](14, "input", 22);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("ngModelChange", function GameCharacterSheetComponent_ng_container_15_Template_input_ngModelChange_14_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r34); var ctx_r40 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](); return ctx_r40.tabletopObject.overViewMaxHeight = $event; })("change", function GameCharacterSheetComponent_ng_container_15_Template_input_change_14_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r34); var ctx_r41 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](); return ctx_r41.chkPopMaxHeight($event.target.value); });
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var ctx_r7 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngModel", ctx_r7.tabletopObject.limitHeight);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵstyleMap"](_angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpipeBind2"](8, 9, "font-size: 0.8em; min-width: 1em; width:" + 10 + "em; --min: 0; --max: " + 0 + "; --val:" + 10 + ";", "style"));
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngModel", ctx_r7.tabletopObject.overViewWidth);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngModel", ctx_r7.tabletopObject.overViewWidth);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵstyleMap"](_angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpipeBind2"](13, 12, "font-size: 0.8em; min-width: 1em; width:" + 10 + "em; --min: 0; --max: " + 0 + "; --val:" + 10 + ";", "style"));
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngModel", ctx_r7.tabletopObject.overViewMaxHeight);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngModel", ctx_r7.tabletopObject.overViewMaxHeight);
} }
function GameCharacterSheetComponent_div_16_div_1_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "div", 25);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelement"](1, "img", 26);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpipe"](2, "safe");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
} if (rf & 2) {
    var ctx_r42 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("src", _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpipeBind2"](2, 2, ctx_r42.tabletopObject.imageFile.url, "resourceUrl"), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵsanitizeUrl"])("alt", ctx_r42.tabletopObject.imageFile.name);
} }
function GameCharacterSheetComponent_div_16_ng_container_2_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](1, "div", 27);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](2, "div", 28);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelement"](3, "div", 29);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var ctx_r43 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("gameDataElement", ctx_r43.tabletopObject.commonDataElement)("isTagLocked", true);
} }
function GameCharacterSheetComponent_div_16_ng_container_3_div_1_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "div", 27);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](1, "div", 28);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelement"](2, "div", 31);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
} if (rf & 2) {
    var childElement_r53 = ctx.$implicit;
    var ctx_r52 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("gameDataElement", childElement_r53)("isEdit", ctx_r52.isEdit);
} }
function GameCharacterSheetComponent_div_16_ng_container_3_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](1, GameCharacterSheetComponent_div_16_ng_container_3_div_1_Template, 3, 2, "div", 30);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var ctx_r44 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngForOf", ctx_r44.tabletopObject.detailDataElement.children);
} }
function GameCharacterSheetComponent_div_16_ng_container_5_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainer"](0);
} }
function GameCharacterSheetComponent_div_16_ng_container_6_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainer"](0);
} }
function GameCharacterSheetComponent_div_16_ng_container_7_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainer"](0);
} }
function GameCharacterSheetComponent_div_16_ng_container_8_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainer"](0);
} }
function GameCharacterSheetComponent_div_16_ng_container_9_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainer"](0);
} }
function GameCharacterSheetComponent_div_16_ng_container_10_ng_container_1_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](1, "div", 27);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](2, "div", 28);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelement"](3, "div", 32);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var ctx_r54 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("gameDataElement", ctx_r54.tabletopObject.imageDataElement)("isTagLocked", true)("isEdit", ctx_r54.isEdit)("isImage", true);
} }
function GameCharacterSheetComponent_div_16_ng_container_10_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](1, GameCharacterSheetComponent_div_16_ng_container_10_ng_container_1_Template, 4, 4, "ng-container", 5);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var ctx_r50 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", ctx_r50.tabletopObject.imageDataElement);
} }
function GameCharacterSheetComponent_div_16_ng_container_11_Template(rf, ctx) { if (rf & 1) {
    var _r56 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](1, "div", 27);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](2, "button", 33);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("click", function GameCharacterSheetComponent_div_16_ng_container_11_Template_button_click_2_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r56); var ctx_r55 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](2); return ctx_r55.addDataElement(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](3, "\u8FFD\u52A0\u65B0\u9805\u76EE");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerEnd"]();
} }
function GameCharacterSheetComponent_div_16_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "div", 23);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](1, GameCharacterSheetComponent_div_16_div_1_Template, 3, 5, "div", 24);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](2, GameCharacterSheetComponent_div_16_ng_container_2_Template, 4, 2, "ng-container", 5);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](3, GameCharacterSheetComponent_div_16_ng_container_3_Template, 2, 1, "ng-container", 5);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerStart"](4, 2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](5, GameCharacterSheetComponent_div_16_ng_container_5_Template, 1, 0, "ng-container", 3);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](6, GameCharacterSheetComponent_div_16_ng_container_6_Template, 1, 0, "ng-container", 3);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](7, GameCharacterSheetComponent_div_16_ng_container_7_Template, 1, 0, "ng-container", 3);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](8, GameCharacterSheetComponent_div_16_ng_container_8_Template, 1, 0, "ng-container", 3);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](9, GameCharacterSheetComponent_div_16_ng_container_9_Template, 1, 0, "ng-container", 3);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](10, GameCharacterSheetComponent_div_16_ng_container_10_Template, 2, 1, "ng-container", 4);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](11, GameCharacterSheetComponent_div_16_ng_container_11_Template, 4, 0, "ng-container", 5);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
} if (rf & 2) {
    var ctx_r8 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", 0 < (ctx_r8.tabletopObject.imageFile == null ? null : ctx_r8.tabletopObject.imageFile.url.length));
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", ctx_r8.tabletopObject.commonDataElement);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", ctx_r8.tabletopObject.detailDataElement);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngSwitch", ctx_r8.tabletopObject.aliasName);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngSwitchCase", "numberResource");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngSwitchCase", "card");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngSwitchCase", "card-stack");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngSwitchCase", "terrain");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngSwitchCase", "dice-symbol");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", ctx_r8.isEdit);
} }
var GameCharacterSheetComponent = /** @class */ (function () {
    function GameCharacterSheetComponent(saveDataService, panelService, modalService) {
        this.saveDataService = saveDataService;
        this.panelService = panelService;
        this.modalService = modalService;
        this.tabletopObject = null;
        this.isEdit = false;
        this.networkService = _udonarium_core_system__WEBPACK_IMPORTED_MODULE_2__["Network"];
        this.isSaveing = false;
        this.progresPercent = 0;
    }
    GameCharacterSheetComponent.prototype.ngOnInit = function () {
        var _this = this;
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_2__["EventSystem"].register(this)
            .on('DELETE_GAME_OBJECT', -1000, function (event) {
            if (_this.tabletopObject && _this.tabletopObject.identifier === event.data.identifier) {
                _this.panelService.close();
            }
        });
    };
    GameCharacterSheetComponent.prototype.ngAfterViewInit = function () {
    };
    GameCharacterSheetComponent.prototype.ngOnDestroy = function () {
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_2__["EventSystem"].unregister(this);
    };
    GameCharacterSheetComponent.prototype.toggleEditMode = function () {
        this.isEdit = this.isEdit ? false : true;
    };
    GameCharacterSheetComponent.prototype.addDataElement = function () {
        if (this.tabletopObject.detailDataElement) {
            var title = _udonarium_data_element__WEBPACK_IMPORTED_MODULE_3__["DataElement"].create('標題', '', {});
            var tag = _udonarium_data_element__WEBPACK_IMPORTED_MODULE_3__["DataElement"].create('標籤', '', {});
            title.appendChild(tag);
            this.tabletopObject.detailDataElement.appendChild(title);
        }
    };
    GameCharacterSheetComponent.prototype.clone = function () {
        var cloneObject = this.tabletopObject.clone();
        cloneObject.location.x += 50;
        cloneObject.location.y += 50;
        if (this.tabletopObject.parent)
            this.tabletopObject.parent.appendChild(cloneObject);
        cloneObject.update();
        switch (this.tabletopObject.aliasName) {
            case 'terrain':
                _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_4__["SoundEffect"].play(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_4__["PresetSound"].blockPut);
                cloneObject.isLocked = false;
                break;
            case 'card':
            case 'card-stack':
                cloneObject.owner = '';
                cloneObject.toTopmost();
            case 'table-mask':
                cloneObject.isLock = false;
                _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_4__["SoundEffect"].play(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_4__["PresetSound"].cardPut);
                break;
            case 'text-note':
                cloneObject.toTopmost();
                _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_4__["SoundEffect"].play(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_4__["PresetSound"].cardPut);
                break;
            case 'dice-symbol':
                _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_4__["SoundEffect"].play(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_4__["PresetSound"].dicePut);
            default:
                _udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_4__["SoundEffect"].play(_udonarium_sound_effect__WEBPACK_IMPORTED_MODULE_4__["PresetSound"].piecePut);
                break;
        }
    };
    GameCharacterSheetComponent.prototype.clickHide = function () {
        //処理なし
    };
    GameCharacterSheetComponent.prototype.clickNoTalk = function () {
        //処理なし    
    };
    GameCharacterSheetComponent.prototype.clickLimitHeight = function () {
        var _this = this;
        //高さが更新されない場合があるので雑だがこの方法で処理する
        setTimeout(function () {
            _udonarium_core_system__WEBPACK_IMPORTED_MODULE_2__["EventSystem"].trigger('RESIZE_NOTE_OBJECT', { identifier: _this.tabletopObject.identifier });
        }, 100);
    };
    GameCharacterSheetComponent.prototype.chkPopWidth = function (width) {
        var character = this.tabletopObject;
        if (width < 270)
            width = 270;
        if (width > 800)
            width = 800;
        character.overViewWidth = width;
    };
    GameCharacterSheetComponent.prototype.chkPopMaxHeight = function (maxHeight) {
        var character = this.tabletopObject;
        if (maxHeight < 250)
            maxHeight = 250;
        if (maxHeight > 1000)
            maxHeight = 1000;
        character.overViewMaxHeight = maxHeight;
    };
    GameCharacterSheetComponent.prototype.saveToXML = function () {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function () {
            var element, objectName;
            var _this = this;
            return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"])(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (!this.tabletopObject || this.isSaveing)
                            return [2 /*return*/];
                        this.isSaveing = true;
                        this.progresPercent = 0;
                        element = this.tabletopObject.commonDataElement.getFirstElementByName('name');
                        objectName = element ? element.value : '';
                        return [4 /*yield*/, this.saveDataService.saveGameObjectAsync(this.tabletopObject, 'xml_' + objectName, function (percent) {
                                _this.progresPercent = percent;
                            })];
                    case 1:
                        _a.sent();
                        setTimeout(function () {
                            _this.isSaveing = false;
                            _this.progresPercent = 0;
                        }, 500);
                        return [2 /*return*/];
                }
            });
        });
    };
    GameCharacterSheetComponent.prototype.setLocation = function (locationName) {
        this.tabletopObject.setLocation(locationName);
    };
    GameCharacterSheetComponent.prototype.openModal = function (name, isAllowedEmpty) {
        var _this = this;
        if (name === void 0) { name = ''; }
        if (isAllowedEmpty === void 0) { isAllowedEmpty = false; }
        this.modalService.open(component_file_selecter_file_selecter_component__WEBPACK_IMPORTED_MODULE_5__["FileSelecterComponent"], { isAllowedEmpty: isAllowedEmpty }).then(function (value) {
            if (!_this.tabletopObject || !_this.tabletopObject.imageDataElement || !value)
                return;
            var element = _this.tabletopObject.imageDataElement.getFirstElementByName(name);
            if (!element)
                return;
            element.value = value;
        });
    };
    GameCharacterSheetComponent.ɵfac = function GameCharacterSheetComponent_Factory(t) { return new (t || GameCharacterSheetComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdirectiveInject"](service_save_data_service__WEBPACK_IMPORTED_MODULE_6__["SaveDataService"]), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdirectiveInject"](service_panel_service__WEBPACK_IMPORTED_MODULE_7__["PanelService"]), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdirectiveInject"](service_modal_service__WEBPACK_IMPORTED_MODULE_8__["ModalService"])); };
    GameCharacterSheetComponent.ɵcmp = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdefineComponent"]({ type: GameCharacterSheetComponent, selectors: [["game-character-sheet"]], inputs: { tabletopObject: "tabletopObject" }, decls: 17, vars: 9, consts: [[1, "top-header"], [3, "click"], [3, "ngSwitch"], [4, "ngSwitchCase"], [4, "ngSwitchDefault"], [4, "ngIf"], ["class", "flex-container", 4, "ngIf"], [3, "disabled", "click"], [3, "ngModel", "change", 4, "ngIf"], [1, "extra-setting", 2, "width", "400px"], ["type", "checkbox", "value", "hideInventory", "name", "hideInventory", 3, "ngModel", "ngModelChange", "click"], ["type", "checkbox", "value", "hideInventory", "name", "nonTalkFlag", 3, "ngModel", "ngModelChange", "click"], ["type", "range", "min", "270", "max", "1000", 3, "ngModel", "ngModelChange"], ["type", "number", "min", "270", "max", "1000", "name", "popWidth", 2, "color", "#555", 3, "ngModel", "ngModelChange", "change"], ["type", "range", "min", "250", "max", "1000", 3, "ngModel", "ngModelChange"], ["type", "number", "min", "250", "max", "1000", "name", "popHeight", 2, "color", "#555", 3, "ngModel", "ngModelChange", "change"], [3, "ngModel", "change"], ["value", "table"], ["value", "common"], [3, "value"], ["value", "graveyard"], ["type", "checkbox", "value", "limitHeight", "name", "limitHeight", 3, "ngModel", "ngModelChange", "click"], ["type", "number", "min", "250", "max", "1000", "name", "popWidth", 2, "color", "#555", 3, "ngModel", "ngModelChange", "change"], [1, "flex-container"], ["class", "box main-image-box", 4, "ngIf"], [1, "box", "main-image-box"], [1, "main-image", 3, "src", "alt"], [1, "flex-item"], [1, "table"], ["game-data-element", "", 1, "table-row", 3, "gameDataElement", "isTagLocked"], ["class", "flex-item", 4, "ngFor", "ngForOf"], ["game-data-element", "", 1, "table-row", 3, "gameDataElement", "isEdit"], ["game-data-element", "", 1, "table-row", 3, "gameDataElement", "isTagLocked", "isEdit", "isImage"], [2, "width", "100%", "color", "#555", 3, "click"]], template: function GameCharacterSheetComponent_Template(rf, ctx) { if (rf & 1) {
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "div", 0);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](1, "button", 1);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("click", function GameCharacterSheetComponent_Template_button_click_1_listener() { return ctx.toggleEditMode(); });
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](2, "\u7DE8\u8F2F\u4ECB\u9762");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerStart"](3, 2);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](4, GameCharacterSheetComponent_ng_container_4_Template, 1, 0, "ng-container", 3);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](5, GameCharacterSheetComponent_ng_container_5_Template, 5, 0, "ng-container", 3);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](6, GameCharacterSheetComponent_ng_container_6_Template, 1, 0, "ng-container", 3);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](7, GameCharacterSheetComponent_ng_container_7_Template, 5, 0, "ng-container", 3);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](8, GameCharacterSheetComponent_ng_container_8_Template, 3, 1, "ng-container", 3);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](9, GameCharacterSheetComponent_ng_container_9_Template, 3, 0, "ng-container", 4);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](10, "button", 1);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("click", function GameCharacterSheetComponent_Template_button_click_10_listener() { return ctx.clone(); });
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](11, "\u8907\u88FD");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](12, "button", 1);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("click", function GameCharacterSheetComponent_Template_button_click_12_listener() { return ctx.saveToXML(); });
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](13, "\u4FDD\u5B58");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](14, GameCharacterSheetComponent_ng_container_14_Template, 19, 17, "ng-container", 5);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](15, GameCharacterSheetComponent_ng_container_15_Template, 15, 15, "ng-container", 5);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](16, GameCharacterSheetComponent_div_16_Template, 12, 10, "div", 6);
        } if (rf & 2) {
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](3);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngSwitch", ctx.tabletopObject.aliasName);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngSwitchCase", "numberResource");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngSwitchCase", "card");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngSwitchCase", "card-stack");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngSwitchCase", "terrain");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngSwitchCase", "dice-symbol");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](6);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", ctx.tabletopObject.aliasName === "character");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", ctx.tabletopObject.aliasName === "text-note");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", ctx.tabletopObject);
        } }, directives: [_angular_common__WEBPACK_IMPORTED_MODULE_9__["NgSwitch"], _angular_common__WEBPACK_IMPORTED_MODULE_9__["NgSwitchCase"], _angular_common__WEBPACK_IMPORTED_MODULE_9__["NgSwitchDefault"], _angular_common__WEBPACK_IMPORTED_MODULE_9__["NgIf"], _angular_forms__WEBPACK_IMPORTED_MODULE_10__["CheckboxControlValueAccessor"], _angular_forms__WEBPACK_IMPORTED_MODULE_10__["NgControlStatus"], _angular_forms__WEBPACK_IMPORTED_MODULE_10__["NgModel"], _angular_forms__WEBPACK_IMPORTED_MODULE_10__["RangeValueAccessor"], _angular_forms__WEBPACK_IMPORTED_MODULE_10__["DefaultValueAccessor"], _angular_forms__WEBPACK_IMPORTED_MODULE_10__["NumberValueAccessor"], _angular_forms__WEBPACK_IMPORTED_MODULE_10__["SelectControlValueAccessor"], _angular_forms__WEBPACK_IMPORTED_MODULE_10__["NgSelectOption"], _angular_forms__WEBPACK_IMPORTED_MODULE_10__["ɵangular_packages_forms_forms_x"], component_game_data_element_game_data_element_component__WEBPACK_IMPORTED_MODULE_11__["GameDataElementComponent"], _angular_common__WEBPACK_IMPORTED_MODULE_9__["NgForOf"]], pipes: [pipe_safe_pipe__WEBPACK_IMPORTED_MODULE_12__["SafePipe"]], styles: [".main-image-box[_ngcontent-%COMP%] {\r\n  \r\n  width: 250px;\r\n  height: 250px;\r\n}\r\n.main-image[_ngcontent-%COMP%] {\r\n  width: 250px;\r\n}\r\n.table[_ngcontent-%COMP%] {\r\n  display:table;\r\n  width :100%;\r\n  box-sizing: border-box;\r\n  \r\n}\r\n.table-row[_ngcontent-%COMP%] {\r\n  display:table-row;\r\n  box-sizing: border-box;\r\n}\r\n.table-row[_ngcontent-%COMP%]    > div[_ngcontent-%COMP%] {\r\n  display:table-cell;\r\n  border:1px solid #FFF;\r\n  vertical-align: top;\r\n  box-sizing: border-box;\r\n}\r\n.box[_ngcontent-%COMP%] {\r\n  display: inline-block;\r\n  margin: 5px;\r\n  \r\n  box-sizing: border-box;\r\n}\r\n.flex-container[_ngcontent-%COMP%] { \r\n  display: flex; \r\n  flex-flow:  row wrap; \r\n  justify-content: flex-start; \r\n  align-items: stretch;\r\n\r\n  \r\n}\r\n.flex-item[_ngcontent-%COMP%] {\r\n  margin: 5px 0px;\r\n  padding: 10px; \r\n  flex: 1 0 auto;\r\n  \r\n  box-sizing: border-box;\r\n  min-width: 25px;\r\n\r\n  background-color: rgba(234,201,157, 0.8);\r\n  background-color: rgba(240,218,189, 0.8);\r\n  color: #444;\r\n\r\n  \r\n\r\n  \r\n\r\n}\r\n.flex-item[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .flex-item[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .flex-item[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], .flex-item[_ngcontent-%COMP%]   select[_ngcontent-%COMP%] {\r\n  \r\n  color: #CCC;\r\n}\r\ninput[_ngcontent-%COMP%] {\r\n  \r\n  color: #CCC;\r\n}\r\n.top-header[_ngcontent-%COMP%]{\r\n  display:table;\r\n  width :100%;  \r\n}\r\n.extra-setting[_ngcontent-%COMP%] {\r\n  text-align:right;\r\n}\r\n.table-cell[_ngcontent-%COMP%] {\r\n  display:table-cell;\r\n}\r\n.is-hidden[_ngcontent-%COMP%] {\r\n  visibility: hidden;\r\n}\r\n.progress[_ngcontent-%COMP%] {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  position: absolute;\r\n  top: 0;\r\n  bottom: 0;\r\n  left: 0;\r\n  right: 0;\r\n  font-size: 0.9em;\r\n}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImdhbWUtY2hhcmFjdGVyLXNoZWV0LmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRTs7O0dBR0M7RUFDRCxZQUFZO0VBQ1osYUFBYTtBQUNmO0FBQ0E7RUFDRSxZQUFZO0FBQ2Q7QUFFQTtFQUNFLGFBQWE7RUFDYixXQUFXO0VBQ1gsc0JBQXNCO0VBQ3RCLDRCQUE0QjtBQUM5QjtBQUNBO0VBQ0UsaUJBQWlCO0VBQ2pCLHNCQUFzQjtBQUN4QjtBQUNBO0VBQ0Usa0JBQWtCO0VBQ2xCLHFCQUFxQjtFQUNyQixtQkFBbUI7RUFDbkIsc0JBQXNCO0FBQ3hCO0FBQ0E7RUFDRSxxQkFBcUI7RUFDckIsV0FBVztFQUNYLHlCQUF5QjtFQUN6QixzQkFBc0I7QUFDeEI7QUFDQSxrQkFDeUIsV0FBVztFQUNsQyxhQUFhLEVBRWdCLFdBQVc7RUFDeEMsb0JBQW9CLEVBRWlCLFdBQVc7RUFDaEQsMkJBQTJCLEVBRUcsV0FBVztFQUN6QyxvQkFBb0I7O0VBRXBCLG9CQUFvQjtBQUN0QjtBQUVBO0VBQ0UsZUFBZTtFQUNmLGFBQWEsRUFDVyxXQUFXO0VBQ25DLGNBQWM7RUFDZCwwQkFBMEI7RUFDMUIsc0JBQXNCO0VBQ3RCLGVBQWU7O0VBRWYsd0NBQXdDO0VBQ3hDLHdDQUF3QztFQUN4QyxXQUFXOztFQUVYOzs7R0FHQzs7RUFFRDs7O0dBR0M7O0FBRUg7QUFDQTtFQUNFLGVBQWU7RUFDZixXQUFXO0FBQ2I7QUFDQTtFQUNFLGVBQWU7RUFDZixXQUFXO0FBQ2I7QUFFQTtFQUNFLGFBQWE7RUFDYixXQUFXO0FBQ2I7QUFDQTtFQUNFLGdCQUFnQjtBQUNsQjtBQUVBO0VBQ0Usa0JBQWtCO0FBQ3BCO0FBQ0E7RUFDRSxrQkFBa0I7QUFDcEI7QUFFQTtFQUNFLGFBQWE7RUFDYixtQkFBbUI7RUFDbkIsdUJBQXVCO0VBQ3ZCLGtCQUFrQjtFQUNsQixNQUFNO0VBQ04sU0FBUztFQUNULE9BQU87RUFDUCxRQUFRO0VBQ1IsZ0JBQWdCO0FBQ2xCIiwiZmlsZSI6ImdhbWUtY2hhcmFjdGVyLXNoZWV0LmNvbXBvbmVudC5jc3MiLCJzb3VyY2VzQ29udGVudCI6WyIubWFpbi1pbWFnZS1ib3gge1xyXG4gIC8qIHBvc2l0aW9uOiBhYnNvbHV0ZTtcclxuICB0b3A6IDBweDtcclxuICBsZWZ0OiAwO1xyXG4gICovXHJcbiAgd2lkdGg6IDI1MHB4O1xyXG4gIGhlaWdodDogMjUwcHg7XHJcbn1cclxuLm1haW4taW1hZ2Uge1xyXG4gIHdpZHRoOiAyNTBweDtcclxufVxyXG5cclxuLnRhYmxlIHtcclxuICBkaXNwbGF5OnRhYmxlO1xyXG4gIHdpZHRoIDoxMDAlO1xyXG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XHJcbiAgLypib3JkZXI6MXB4IHNvbGlkICNGRkZGMDA7Ki9cclxufVxyXG4udGFibGUtcm93IHtcclxuICBkaXNwbGF5OnRhYmxlLXJvdztcclxuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xyXG59XHJcbi50YWJsZS1yb3cgPiBkaXYge1xyXG4gIGRpc3BsYXk6dGFibGUtY2VsbDtcclxuICBib3JkZXI6MXB4IHNvbGlkICNGRkY7XHJcbiAgdmVydGljYWwtYWxpZ246IHRvcDtcclxuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xyXG59XHJcbi5ib3gge1xyXG4gIGRpc3BsYXk6IGlubGluZS1ibG9jaztcclxuICBtYXJnaW46IDVweDtcclxuICAvKmJvcmRlcjoxcHggc29saWQgI0ZGRjsqL1xyXG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XHJcbn1cclxuLmZsZXgtY29udGFpbmVyIHtcclxuICBkaXNwbGF5OiAtd2Via2l0LWZsZXg7IC8qIFNhZmFyaSAqL1xyXG4gIGRpc3BsYXk6IGZsZXg7XHJcblxyXG4gIC13ZWJraXQtZmxleC1mbG93OiByb3cgd3JhcDsgLyogU2FmYXJpICovXHJcbiAgZmxleC1mbG93OiAgcm93IHdyYXA7XHJcblxyXG4gIC13ZWJraXQtanVzdGlmeS1jb250ZW50OiBmbGV4LXN0YXJ0OyAvKiBTYWZhcmkgKi9cclxuICBqdXN0aWZ5LWNvbnRlbnQ6IGZsZXgtc3RhcnQ7XHJcblxyXG4gIC13ZWJraXQtYWxpZ24taXRlbXM6IHN0cmV0Y2g7IC8qIFNhZmFyaSAqL1xyXG4gIGFsaWduLWl0ZW1zOiBzdHJldGNoO1xyXG5cclxuICAvKm1pbi13aWR0aDogMjUwcHg7Ki9cclxufVxyXG5cclxuLmZsZXgtaXRlbSB7XHJcbiAgbWFyZ2luOiA1cHggMHB4O1xyXG4gIHBhZGRpbmc6IDEwcHg7XHJcbiAgLXdlYmtpdC1mbGV4OiAxIDAgYXV0bzsgLyogU2FmYXJpICovXHJcbiAgZmxleDogMSAwIGF1dG87XHJcbiAgLypib3JkZXI6IDFweCBzb2xpZCAjOTk5OyovXHJcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcclxuICBtaW4td2lkdGg6IDI1cHg7XHJcblxyXG4gIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMjM0LDIwMSwxNTcsIDAuOCk7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgyNDAsMjE4LDE4OSwgMC44KTtcclxuICBjb2xvcjogIzQ0NDtcclxuXHJcbiAgLypcclxuICBib3JkZXItdG9wOiAxcHggc29saWQgIzQ0NDtcclxuICBib3JkZXItYm90dG9tOiAxcHggc29saWQgIzQ0NDtcclxuICAqL1xyXG5cclxuICAvKlxyXG4gIGJhY2tncm91bmQtY29sb3I6IHJnYmEoNzAsIDcwLCA3MCwgMC44KTtcclxuICBjb2xvcjogI0NDQztcclxuICAqL1xyXG5cclxufVxyXG4uZmxleC1pdGVtIGlucHV0LCAuZmxleC1pdGVtIGJ1dHRvbiwgLmZsZXgtaXRlbSB0ZXh0YXJlYSwgLmZsZXgtaXRlbSBzZWxlY3Qge1xyXG4gIC8qY29sb3I6ICM1NTU7Ki9cclxuICBjb2xvcjogI0NDQztcclxufVxyXG5pbnB1dCB7XHJcbiAgLypjb2xvcjogIzU1NTsqL1xyXG4gIGNvbG9yOiAjQ0NDO1xyXG59XHJcblxyXG4udG9wLWhlYWRlcntcclxuICBkaXNwbGF5OnRhYmxlO1xyXG4gIHdpZHRoIDoxMDAlOyAgXHJcbn1cclxuLmV4dHJhLXNldHRpbmcge1xyXG4gIHRleHQtYWxpZ246cmlnaHQ7XHJcbn1cclxuXHJcbi50YWJsZS1jZWxsIHtcclxuICBkaXNwbGF5OnRhYmxlLWNlbGw7XHJcbn1cclxuLmlzLWhpZGRlbiB7XHJcbiAgdmlzaWJpbGl0eTogaGlkZGVuO1xyXG59XHJcblxyXG4ucHJvZ3Jlc3Mge1xyXG4gIGRpc3BsYXk6IGZsZXg7XHJcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcclxuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcclxuICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgdG9wOiAwO1xyXG4gIGJvdHRvbTogMDtcclxuICBsZWZ0OiAwO1xyXG4gIHJpZ2h0OiAwO1xyXG4gIGZvbnQtc2l6ZTogMC45ZW07XHJcbn0iXX0= */"] });
    return GameCharacterSheetComponent;
}());

/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵsetClassMetadata"](GameCharacterSheetComponent, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_1__["Component"],
        args: [{
                selector: 'game-character-sheet',
                templateUrl: './game-character-sheet.component.html',
                styleUrls: ['./game-character-sheet.component.css']
            }]
    }], function () { return [{ type: service_save_data_service__WEBPACK_IMPORTED_MODULE_6__["SaveDataService"] }, { type: service_panel_service__WEBPACK_IMPORTED_MODULE_7__["PanelService"] }, { type: service_modal_service__WEBPACK_IMPORTED_MODULE_8__["ModalService"] }]; }, { tabletopObject: [{
            type: _angular_core__WEBPACK_IMPORTED_MODULE_1__["Input"]
        }] }); })();


/***/ }),

/***/ "zeEm":
/*!*********************************************************!*\
  !*** ./src/app/class/core/file-storage/audio-player.ts ***!
  \*********************************************************/
/*! exports provided: VolumeType, AudioPlayer */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "VolumeType", function() { return VolumeType; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AudioPlayer", function() { return AudioPlayer; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "mrSG");
/* harmony import */ var _audio_file__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./audio-file */ "eRQf");
/* harmony import */ var _file_reader_util__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./file-reader-util */ "N0uT");



var VolumeType;
(function (VolumeType) {
    VolumeType[VolumeType["MASTER"] = 0] = "MASTER";
    VolumeType[VolumeType["AUDITION"] = 1] = "AUDITION";
})(VolumeType || (VolumeType = {}));
var AudioPlayer = /** @class */ (function () {
    function AudioPlayer(audio) {
        this.volumeType = VolumeType.MASTER;
        this.audio = audio;
    }
    Object.defineProperty(AudioPlayer, "audioContext", {
        get: function () {
            if (!AudioPlayer._audioContext)
                AudioPlayer._audioContext = new (window.AudioContext || window.webkitAudioContext)();
            return AudioPlayer._audioContext;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(AudioPlayer, "volume", {
        get: function () { return AudioPlayer._volume; },
        set: function (volume) {
            AudioPlayer._volume = volume;
            AudioPlayer.masterGainNode.gain.setTargetAtTime(AudioPlayer._volume, AudioPlayer.audioContext.currentTime, 0.01);
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(AudioPlayer, "auditionVolume", {
        get: function () { return AudioPlayer._auditionVolume; },
        set: function (auditionVolume) {
            AudioPlayer._auditionVolume = auditionVolume;
            AudioPlayer.auditionGainNode.gain.setTargetAtTime(AudioPlayer._auditionVolume, AudioPlayer.audioContext.currentTime, 0.01);
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(AudioPlayer, "masterGainNode", {
        get: function () {
            if (!AudioPlayer._masterGainNode) {
                var masterGain = AudioPlayer.audioContext.createGain();
                masterGain.gain.setValueAtTime(AudioPlayer._volume, AudioPlayer.audioContext.currentTime);
                masterGain.connect(AudioPlayer.audioContext.destination);
                AudioPlayer._masterGainNode = masterGain;
            }
            return AudioPlayer._masterGainNode;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(AudioPlayer, "auditionGainNode", {
        get: function () {
            if (!AudioPlayer._auditionGainNode) {
                var auditionGain = AudioPlayer.audioContext.createGain();
                auditionGain.gain.setValueAtTime(AudioPlayer._auditionVolume, AudioPlayer.audioContext.currentTime);
                auditionGain.connect(AudioPlayer.audioContext.destination);
                AudioPlayer._auditionGainNode = auditionGain;
            }
            return AudioPlayer._auditionGainNode;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(AudioPlayer, "rootNode", {
        get: function () { return AudioPlayer.masterGainNode; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(AudioPlayer, "auditionNode", {
        get: function () { return AudioPlayer.auditionGainNode; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(AudioPlayer.prototype, "audioElm", {
        get: function () {
            var _this = this;
            if (!this._audioElm) {
                this._audioElm = new Audio();
                this._audioElm.onplay = function () { };
                this._audioElm.onpause = function () { _this.mediaElementSource.disconnect(); };
                this._audioElm.onended = function () { _this.mediaElementSource.disconnect(); };
            }
            return this._audioElm;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(AudioPlayer.prototype, "mediaElementSource", {
        get: function () {
            if (!this._mediaElementSource)
                this._mediaElementSource = AudioPlayer.audioContext.createMediaElementSource(this.audioElm);
            return this._mediaElementSource;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(AudioPlayer.prototype, "volume", {
        get: function () { return this.audioElm.volume; },
        set: function (volume) { this.audioElm.volume = volume; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(AudioPlayer.prototype, "loop", {
        get: function () { return this.audioElm.loop; },
        set: function (loop) { this.audioElm.loop = loop; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(AudioPlayer.prototype, "paused", {
        get: function () { return this.audioElm.paused; },
        enumerable: false,
        configurable: true
    });
    AudioPlayer.play = function (audio, volume) {
        if (volume === void 0) { volume = 1.0; }
        this.playBufferAsync(audio, volume);
    };
    AudioPlayer.prototype.play = function (audio) {
        if (audio === void 0) { audio = this.audio; }
        this.stop();
        this.audio = audio;
        if (!this.audio)
            return;
        var url = this.audio.url;
        if (audio.state === _audio_file__WEBPACK_IMPORTED_MODULE_1__["AudioState"].URL) {
            if (AudioPlayer.cacheMap.has(audio.identifier)) {
                url = AudioPlayer.cacheMap.get(audio.identifier).url;
            }
            else {
                AudioPlayer.createCacheAsync(audio);
            }
        }
        this.mediaElementSource.connect(this.getConnectingAudioNode());
        this.audioElm.src = url;
        this.audioElm.load();
        this.audioElm.play().catch(function (reason) { console.warn(reason); });
    };
    AudioPlayer.prototype.pause = function () {
        this.audioElm.pause();
    };
    AudioPlayer.prototype.stop = function () {
        if (!this.audioElm)
            return;
        this.pause();
        this.audioElm.currentTime = 0;
        this.audioElm.src = '';
        this.audioElm.load();
        this.mediaElementSource.disconnect();
    };
    AudioPlayer.prototype.getConnectingAudioNode = function () {
        switch (this.volumeType) {
            case VolumeType.AUDITION:
                return AudioPlayer.auditionNode;
            default:
                return AudioPlayer.rootNode;
        }
    };
    AudioPlayer.playBufferAsync = function (audio, volume) {
        if (volume === void 0) { volume = 1.0; }
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function () {
            var source, gain;
            return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"])(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, AudioPlayer.createBufferSourceAsync(audio)];
                    case 1:
                        source = _a.sent();
                        if (!source)
                            return [2 /*return*/];
                        gain = AudioPlayer.audioContext.createGain();
                        gain.gain.setValueAtTime(volume, AudioPlayer.audioContext.currentTime);
                        gain.connect(AudioPlayer.rootNode);
                        source.connect(gain);
                        source.onended = function () {
                            source.stop();
                            source.disconnect();
                            gain.disconnect();
                            source.buffer = null;
                        };
                        source.start();
                        return [2 /*return*/];
                }
            });
        });
    };
    AudioPlayer.createBufferSourceAsync = function (audio) {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function () {
            var blob, cache, decodedData, source, reason_1;
            return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"])(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (!audio)
                            return [2 /*return*/, null];
                        _a.label = 1;
                    case 1:
                        _a.trys.push([1, 6, , 7]);
                        blob = audio.blob;
                        if (!(audio.state === _audio_file__WEBPACK_IMPORTED_MODULE_1__["AudioState"].URL)) return [3 /*break*/, 4];
                        if (!AudioPlayer.cacheMap.has(audio.identifier)) return [3 /*break*/, 2];
                        blob = AudioPlayer.cacheMap.get(audio.identifier).blob;
                        return [3 /*break*/, 4];
                    case 2: return [4 /*yield*/, AudioPlayer.createCacheAsync(audio)];
                    case 3:
                        cache = _a.sent();
                        blob = cache && cache.blob ? cache.blob : null;
                        _a.label = 4;
                    case 4:
                        if (!blob)
                            return [2 /*return*/, null];
                        return [4 /*yield*/, this.decodeAudioDataAsync(blob)];
                    case 5:
                        decodedData = _a.sent();
                        source = AudioPlayer.audioContext.createBufferSource();
                        source.buffer = decodedData;
                        return [2 /*return*/, source];
                    case 6:
                        reason_1 = _a.sent();
                        console.warn(reason_1);
                        return [2 /*return*/, null];
                    case 7: return [2 /*return*/];
                }
            });
        });
    };
    AudioPlayer.decodeAudioDataAsync = function (blob) {
        var _this = this;
        return new Promise(function (resolve, reject) { return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(_this, void 0, void 0, function () {
            var _a, _b;
            return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"])(this, function (_c) {
                switch (_c.label) {
                    case 0:
                        _b = (_a = AudioPlayer.audioContext).decodeAudioData;
                        return [4 /*yield*/, _file_reader_util__WEBPACK_IMPORTED_MODULE_2__["FileReaderUtil"].readAsArrayBufferAsync(blob)];
                    case 1:
                        _b.apply(_a, [_c.sent(),
                            function (decodedData) { return resolve(decodedData); },
                            function (error) { return reject(error); }]);
                        return [2 /*return*/];
                }
            });
        }); });
    };
    AudioPlayer.getBlobAsync = function (audio) {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function () {
            var response, blob, error_1;
            return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"])(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (audio.blob)
                            return [2 /*return*/, audio.blob];
                        if (audio.url.length < 1)
                            throw new Error('えっ なにそれ怖い');
                        _a.label = 1;
                    case 1:
                        _a.trys.push([1, 4, , 5]);
                        return [4 /*yield*/, fetch(audio.url)];
                    case 2:
                        response = _a.sent();
                        if (!response.ok)
                            throw new Error('Network response was not ok.');
                        return [4 /*yield*/, response.blob()];
                    case 3:
                        blob = _a.sent();
                        return [2 /*return*/, blob];
                    case 4:
                        error_1 = _a.sent();
                        console.warn('There has been a problem with your fetch operation: ', error_1.message);
                        throw error_1;
                    case 5: return [2 /*return*/];
                }
            });
        });
    };
    AudioPlayer.createCacheAsync = function (audio) {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function () {
            var cache, _a, e_1;
            return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"])(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        cache = { url: audio.url, blob: null };
                        _b.label = 1;
                    case 1:
                        _b.trys.push([1, 3, , 4]);
                        _a = cache;
                        return [4 /*yield*/, AudioPlayer.getBlobAsync(audio)];
                    case 2:
                        _a.blob = _b.sent();
                        return [3 /*break*/, 4];
                    case 3:
                        e_1 = _b.sent();
                        console.error(e_1);
                        return [2 /*return*/, cache];
                    case 4:
                        if (AudioPlayer.cacheMap.has(audio.identifier)) {
                            return [2 /*return*/, AudioPlayer.cacheMap.get(audio.identifier)];
                        }
                        cache.url = URL.createObjectURL(cache.blob);
                        AudioPlayer.cacheMap.set(audio.identifier, cache);
                        return [2 /*return*/, cache];
                }
            });
        });
    };
    AudioPlayer.resumeAudioContext = function () {
        AudioPlayer.audioContext.resume();
        var callback = function () {
            AudioPlayer.audioContext.resume();
            document.removeEventListener('touchstart', callback, true);
            document.removeEventListener('mousedown', callback, true);
            console.log('resumeAudioContext');
        };
        document.addEventListener('touchstart', callback, true);
        document.addEventListener('mousedown', callback, true);
    };
    AudioPlayer._volume = 0.5;
    AudioPlayer._auditionVolume = 0.5;
    AudioPlayer.cacheMap = new Map();
    return AudioPlayer;
}());



/***/ }),

/***/ "zhae":
/*!******************************************************************************!*\
  !*** ./src/app/component/game-table-setting/game-table-setting.component.ts ***!
  \******************************************************************************/
/*! exports provided: GameTableSettingComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GameTableSettingComponent", function() { return GameTableSettingComponent; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "mrSG");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "fXoL");
/* harmony import */ var _udonarium_core_file_storage_image_file__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @udonarium/core/file-storage/image-file */ "FjwV");
/* harmony import */ var _udonarium_core_file_storage_image_storage__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @udonarium/core/file-storage/image-storage */ "JQpJ");
/* harmony import */ var _udonarium_core_synchronize_object_object_serializer__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @udonarium/core/synchronize-object/object-serializer */ "MDT1");
/* harmony import */ var _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @udonarium/core/synchronize-object/object-store */ "hm7o");
/* harmony import */ var _udonarium_core_system__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @udonarium/core/system */ "yNnI");
/* harmony import */ var _udonarium_game_table__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @udonarium/game-table */ "RDF6");
/* harmony import */ var component_file_selecter_file_selecter_component__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! component/file-selecter/file-selecter.component */ "FR7b");
/* harmony import */ var service_modal_service__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! service/modal.service */ "CE6K");
/* harmony import */ var service_save_data_service__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! service/save-data.service */ "Uvtn");
/* harmony import */ var service_panel_service__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! service/panel.service */ "M9xM");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @angular/forms */ "3Pt+");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @angular/common */ "ofXK");
/* harmony import */ var pipe_safe_pipe__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! pipe/safe.pipe */ "6HCy");
















function GameTableSettingComponent_option_6_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "option", 7);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
} if (rf & 2) {
    var gameTable_r3 = ctx.$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpropertyInterpolate"]("value", gameTable_r3.identifier);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtextInterpolate"](gameTable_r3.name);
} }
function GameTableSettingComponent_ng_container_8_div_9_Template(rf, ctx) { if (rf & 1) {
    var _r9 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](1, "button", 30);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("click", function GameTableSettingComponent_ng_container_8_div_9_Template_button_click_1_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r9); var ctx_r8 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](2); return ctx_r8.openDistanceViewImageModal(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](2, "\u8FFD\u52A0\u80CC\u666F\u5716\u50CF");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
} }
function GameTableSettingComponent_ng_container_8_div_10_Template(rf, ctx) { if (rf & 1) {
    var _r11 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "div", 2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("click", function GameTableSettingComponent_ng_container_8_div_10_Template_div_click_0_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r11); var ctx_r10 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](2); return ctx_r10.openDistanceViewImageModal(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelement"](1, "img", 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpipe"](2, "safe");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
} if (rf & 2) {
    var ctx_r5 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("src", _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpipeBind2"](2, 1, ctx_r5.tableDistanceviewImage.url, "resourceUrl"), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵsanitizeUrl"]);
} }
function GameTableSettingComponent_ng_container_8_ng_container_55_div_5_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "div", 36);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
} if (rf & 2) {
    var ctx_r12 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtextInterpolate1"]("", ctx_r12.progresPercent, "%");
} }
var _c0 = function (a0) { return { "is-hidden": a0 }; };
function GameTableSettingComponent_ng_container_8_ng_container_55_Template(rf, ctx) { if (rf & 1) {
    var _r14 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](1, "button", 31);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("click", function GameTableSettingComponent_ng_container_8_ng_container_55_Template_button_click_1_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r14); var ctx_r13 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](2); return ctx_r13.save(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](2, "div", 32);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](3, "div", 33);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](4, "\u4FDD\u5B58");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](5, GameTableSettingComponent_ng_container_8_ng_container_55_div_5_Template, 2, 1, "div", 34);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](6, "button", 35);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("click", function GameTableSettingComponent_ng_container_8_ng_container_55_Template_button_click_6_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r14); var ctx_r15 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](2); return ctx_r15.delete(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](7, "\u522A\u9664");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var ctx_r6 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("disabled", ctx_r6.isSaveing);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngClass", _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpureFunction1"](4, _c0, ctx_r6.isSaveing));
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", ctx_r6.isSaveing);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵattribute"]("disabled", ctx_r6.getGameTables().length <= 1 ? "" : null);
} }
function GameTableSettingComponent_ng_container_8_ng_container_56_Template(rf, ctx) { if (rf & 1) {
    var _r17 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](1, "button", 2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("click", function GameTableSettingComponent_ng_container_8_ng_container_56_Template_button_click_1_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r17); var ctx_r16 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](2); return ctx_r16.restore(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](2, "\u64A4\u56DE");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerEnd"]();
} }
function GameTableSettingComponent_ng_container_8_Template(rf, ctx) { if (rf & 1) {
    var _r19 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](1, "div", 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](2, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](3, " \u5730\u5716 ");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](4, "div", 2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("click", function GameTableSettingComponent_ng_container_8_Template_div_click_4_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r19); var ctx_r18 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](); return ctx_r18.openBgImageModal(); });
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelement"](5, "img", 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpipe"](6, "safe");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](7, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](8, " \u80CC\u666F ");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](9, GameTableSettingComponent_ng_container_8_div_9_Template, 3, 0, "div", 6);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](10, GameTableSettingComponent_ng_container_8_div_10_Template, 3, 4, "div", 10);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](11, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](12, "Name : ");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](13, "input", 11);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("ngModelChange", function GameTableSettingComponent_ng_container_8_Template_input_ngModelChange_13_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r19); var ctx_r20 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](); return ctx_r20.tableName = $event; });
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](14, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](15, "input", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("ngModelChange", function GameTableSettingComponent_ng_container_8_Template_input_ngModelChange_15_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r19); var ctx_r21 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](); return ctx_r21.tableWidth = $event; });
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](16, " Width : ");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](17, "input", 13);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("ngModelChange", function GameTableSettingComponent_ng_container_8_Template_input_ngModelChange_17_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r19); var ctx_r22 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](); return ctx_r22.tableWidth = $event; });
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](18, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](19, "input", 14);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("ngModelChange", function GameTableSettingComponent_ng_container_8_Template_input_ngModelChange_19_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r19); var ctx_r23 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](); return ctx_r23.tableHeight = $event; });
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](20, " Height : ");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](21, "input", 13);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("ngModelChange", function GameTableSettingComponent_ng_container_8_Template_input_ngModelChange_21_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r19); var ctx_r24 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](); return ctx_r24.tableHeight = $event; });
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](22, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](23, " \u683C\u7DDA: ");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](24, "select", 15);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("ngModelChange", function GameTableSettingComponent_ng_container_8_Template_select_ngModelChange_24_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r19); var ctx_r25 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](); return ctx_r25.tableGridType = $event; });
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](25, "option", 16);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](26, "\u7121");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](27, "option", 17);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](28, "\u65B9\u683C");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](29, "option", 18);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](30, "\u516D\u89D2\u683C\uFF08\u7E26\u5411\u5C0D\u9F4A\uFF09");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](31, "option", 19);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](32, "\u516D\u89D2\u683C\uFF08\u6A2A\u5411\u5C0D\u9F4A\uFF09");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](33, " \u683C\u7DDA\u984F\u8272: ");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](34, "input", 20);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("ngModelChange", function GameTableSettingComponent_ng_container_8_Template_input_ngModelChange_34_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r19); var ctx_r26 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](); return ctx_r26.tableGridColor = $event; });
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](35, "datalist", 21);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelement"](36, "option", 22);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelement"](37, "option", 23);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](38, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](39, " \u80CC\u666F\u6FFE\u93E1 ");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](40, "select", 24);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("ngModelChange", function GameTableSettingComponent_ng_container_8_Template_select_ngModelChange_40_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r19); var ctx_r27 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](); return ctx_r27.tableDistanceviewFilter = $event; });
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](41, "option", 25);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](42, "\u7121");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](43, "option", 26);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](44, "\u767D\u8272");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](45, "option", 27);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](46, "\u9ED1\u8272");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelement"](47, "hr");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](48, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](49, "label");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](50, "\u59CB\u7D42\u986F\u793A\u683C\u7DDA: ");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](51, "input", 28);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("ngModelChange", function GameTableSettingComponent_ng_container_8_Template_input_ngModelChange_51_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r19); var ctx_r28 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](); return ctx_r28.tableGridShow = $event; });
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](52, "label");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](53, "\u5C0D\u9F4A\u683C\u7DDA: ");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](54, "input", 29);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("ngModelChange", function GameTableSettingComponent_ng_container_8_Template_input_ngModelChange_54_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r19); var ctx_r29 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](); return ctx_r29.tableGridSnap = $event; });
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](55, GameTableSettingComponent_ng_container_8_ng_container_55_Template, 8, 6, "ng-container", 6);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](56, GameTableSettingComponent_ng_container_8_ng_container_56_Template, 3, 0, "ng-container", 6);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    var ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](5);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("src", _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpipeBind2"](6, 31, ctx_r1.tableBackgroundImage.url, "resourceUrl"), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵsanitizeUrl"]);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", !ctx_r1.tableDistanceviewImage.url);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", ctx_r1.tableDistanceviewImage.url);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngModel", ctx_r1.tableName);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵattribute"]("disabled", !ctx_r1.isEditable ? "" : null);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpropertyInterpolate"]("min", ctx_r1.minSize);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpropertyInterpolate"]("max", ctx_r1.maxSize);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngModel", ctx_r1.tableWidth);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵattribute"]("disabled", !ctx_r1.isEditable ? "" : null);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpropertyInterpolate"]("min", ctx_r1.minSize);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpropertyInterpolate"]("max", ctx_r1.maxSize);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngModel", ctx_r1.tableWidth);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵattribute"]("disabled", !ctx_r1.isEditable ? "" : null);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpropertyInterpolate"]("min", ctx_r1.minSize);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpropertyInterpolate"]("max", ctx_r1.maxSize);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngModel", ctx_r1.tableHeight);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵattribute"]("disabled", !ctx_r1.isEditable ? "" : null);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpropertyInterpolate"]("min", ctx_r1.minSize);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpropertyInterpolate"]("max", ctx_r1.maxSize);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngModel", ctx_r1.tableHeight);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵattribute"]("disabled", !ctx_r1.isEditable ? "" : null);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngModel", ctx_r1.tableGridType);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵattribute"]("disabled", !ctx_r1.isEditable ? "" : null);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](10);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngModel", ctx_r1.tableGridColor);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵattribute"]("disabled", !ctx_r1.isEditable ? "" : null);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](6);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngModel", ctx_r1.tableDistanceviewFilter);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵattribute"]("disabled", !ctx_r1.isEditable ? "" : null);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](11);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngModel", ctx_r1.tableGridShow);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngModel", ctx_r1.tableGridSnap);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", !ctx_r1.isDeleted);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", ctx_r1.isDeleted);
} }
function GameTableSettingComponent_ng_container_9_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](1, "div", 37);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](2, "\u203B\u5C1A\u672A\u5275\u5EFA\u76E4\u9762\u3002 \u60A8\u53EF\u4EE5\u5F9E\u201C\u65B0\u589E\u76E4\u9762\u201D\u4E2D\u5275\u5EFA\u65B0\u76E4\u9762\u3002");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerEnd"]();
} }
var GameTableSettingComponent = /** @class */ (function () {
    function GameTableSettingComponent(modalService, saveDataService, panelService) {
        this.modalService = modalService;
        this.saveDataService = saveDataService;
        this.panelService = panelService;
        this.minSize = 1;
        this.maxSize = 100;
        this.selectedTable = null;
        this.selectedTableXml = '';
        this.isSaveing = false;
        this.progresPercent = 0;
    }
    Object.defineProperty(GameTableSettingComponent.prototype, "tableBackgroundImage", {
        get: function () {
            if (!this.selectedTable)
                return _udonarium_core_file_storage_image_file__WEBPACK_IMPORTED_MODULE_2__["ImageFile"].Empty;
            var file = _udonarium_core_file_storage_image_storage__WEBPACK_IMPORTED_MODULE_3__["ImageStorage"].instance.get(this.selectedTable.imageIdentifier);
            return file ? file : _udonarium_core_file_storage_image_file__WEBPACK_IMPORTED_MODULE_2__["ImageFile"].Empty;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(GameTableSettingComponent.prototype, "tableDistanceviewImage", {
        get: function () {
            if (!this.selectedTable)
                return _udonarium_core_file_storage_image_file__WEBPACK_IMPORTED_MODULE_2__["ImageFile"].Empty;
            var file = _udonarium_core_file_storage_image_storage__WEBPACK_IMPORTED_MODULE_3__["ImageStorage"].instance.get(this.selectedTable.backgroundImageIdentifier);
            return file ? file : _udonarium_core_file_storage_image_file__WEBPACK_IMPORTED_MODULE_2__["ImageFile"].Empty;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(GameTableSettingComponent.prototype, "tableName", {
        get: function () { return this.selectedTable.name; },
        set: function (tableName) { if (this.isEditable)
            this.selectedTable.name = tableName; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(GameTableSettingComponent.prototype, "tableWidth", {
        get: function () { return this.selectedTable.width; },
        set: function (tableWidth) { if (this.isEditable)
            this.selectedTable.width = tableWidth; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(GameTableSettingComponent.prototype, "tableHeight", {
        get: function () { return this.selectedTable.height; },
        set: function (tableHeight) { if (this.isEditable)
            this.selectedTable.height = tableHeight; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(GameTableSettingComponent.prototype, "tableGridColor", {
        get: function () { return this.selectedTable.gridColor.substring(0, 7); },
        set: function (tableGridColor) { if (this.isEditable)
            this.selectedTable.gridColor = tableGridColor + "e6"; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(GameTableSettingComponent.prototype, "tableGridShow", {
        get: function () { return this.tableSelecter.gridShow; },
        set: function (tableGridShow) {
            this.tableSelecter.gridShow = tableGridShow;
            _udonarium_core_system__WEBPACK_IMPORTED_MODULE_6__["EventSystem"].trigger('UPDATE_GAME_OBJECT', this.tableSelecter.toContext()); // 自分にだけイベントを発行してグリッド更新を誘発
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(GameTableSettingComponent.prototype, "tableGridSnap", {
        get: function () { return this.tableSelecter.gridSnap; },
        set: function (tableGridSnap) {
            this.tableSelecter.gridSnap = tableGridSnap;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(GameTableSettingComponent.prototype, "tableGridType", {
        get: function () { return this.selectedTable.gridType; },
        set: function (gridType) { if (this.isEditable)
            this.selectedTable.gridType = Number(gridType); },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(GameTableSettingComponent.prototype, "tableDistanceviewFilter", {
        get: function () { return this.selectedTable.backgroundFilterType; },
        set: function (filterType) { if (this.isEditable)
            this.selectedTable.backgroundFilterType = filterType; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(GameTableSettingComponent.prototype, "tableSelecter", {
        get: function () { return _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_5__["ObjectStore"].instance.get('tableSelecter'); },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(GameTableSettingComponent.prototype, "isEmpty", {
        get: function () { return this.tableSelecter ? (this.tableSelecter.viewTable ? false : true) : true; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(GameTableSettingComponent.prototype, "isDeleted", {
        get: function () {
            if (!this.selectedTable)
                return true;
            return _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_5__["ObjectStore"].instance.get(this.selectedTable.identifier) == null;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(GameTableSettingComponent.prototype, "isEditable", {
        get: function () {
            return !this.isEmpty && !this.isDeleted;
        },
        enumerable: false,
        configurable: true
    });
    GameTableSettingComponent.prototype.ngOnInit = function () {
        var _this = this;
        Promise.resolve().then(function () { return _this.modalService.title = _this.panelService.title = '盤面設定'; });
        this.selectedTable = this.tableSelecter.viewTable;
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_6__["EventSystem"].register(this)
            .on('DELETE_GAME_OBJECT', 1000, function (event) {
            if (!_this.selectedTable || event.data.identifier !== _this.selectedTable.identifier)
                return;
            var object = _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_5__["ObjectStore"].instance.get(event.data.identifier);
            if (object !== null) {
                _this.selectedTableXml = object.toXml();
            }
        });
    };
    GameTableSettingComponent.prototype.ngAfterViewInit = function () { };
    GameTableSettingComponent.prototype.ngOnDestroy = function () {
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_6__["EventSystem"].unregister(this);
    };
    GameTableSettingComponent.prototype.selectGameTable = function (identifier) {
        _udonarium_core_system__WEBPACK_IMPORTED_MODULE_6__["EventSystem"].call('SELECT_GAME_TABLE', { identifier: identifier }, _udonarium_core_system__WEBPACK_IMPORTED_MODULE_6__["Network"].peerId);
        this.selectedTable = _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_5__["ObjectStore"].instance.get(identifier);
        this.selectedTableXml = '';
    };
    GameTableSettingComponent.prototype.getGameTables = function () {
        return _udonarium_core_synchronize_object_object_store__WEBPACK_IMPORTED_MODULE_5__["ObjectStore"].instance.getObjects(_udonarium_game_table__WEBPACK_IMPORTED_MODULE_7__["GameTable"]);
    };
    GameTableSettingComponent.prototype.createGameTable = function () {
        var gameTable = new _udonarium_game_table__WEBPACK_IMPORTED_MODULE_7__["GameTable"]();
        gameTable.name = '空白盤面';
        gameTable.imageIdentifier = 'testTableBackgroundImage_image';
        gameTable.initialize();
        this.selectGameTable(gameTable.identifier);
    };
    GameTableSettingComponent.prototype.save = function () {
        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"])(this, void 0, void 0, function () {
            var _this = this;
            return Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"])(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (!this.selectedTable || this.isSaveing)
                            return [2 /*return*/];
                        this.isSaveing = true;
                        this.progresPercent = 0;
                        this.selectedTable.selected = true;
                        return [4 /*yield*/, this.saveDataService.saveGameObjectAsync(this.selectedTable, 'map_' + this.selectedTable.name, function (percent) {
                                _this.progresPercent = percent;
                            })];
                    case 1:
                        _a.sent();
                        setTimeout(function () {
                            _this.isSaveing = false;
                            _this.progresPercent = 0;
                        }, 500);
                        return [2 /*return*/];
                }
            });
        });
    };
    GameTableSettingComponent.prototype.delete = function () {
        if (!this.isEmpty && this.selectedTable) {
            this.selectedTableXml = this.selectedTable.toXml();
            this.selectedTable.destroy();
        }
    };
    GameTableSettingComponent.prototype.restore = function () {
        if (this.selectedTable && this.selectedTableXml) {
            var restoreTable = _udonarium_core_synchronize_object_object_serializer__WEBPACK_IMPORTED_MODULE_4__["ObjectSerializer"].instance.parseXml(this.selectedTableXml);
            this.selectGameTable(restoreTable.identifier);
            this.selectedTableXml = '';
        }
    };
    GameTableSettingComponent.prototype.openBgImageModal = function () {
        var _this = this;
        if (this.isDeleted)
            return;
        this.modalService.open(component_file_selecter_file_selecter_component__WEBPACK_IMPORTED_MODULE_8__["FileSelecterComponent"]).then(function (value) {
            if (!_this.selectedTable || !value)
                return;
            _this.selectedTable.imageIdentifier = value;
        });
    };
    GameTableSettingComponent.prototype.openDistanceViewImageModal = function () {
        var _this = this;
        if (this.isDeleted)
            return;
        this.modalService.open(component_file_selecter_file_selecter_component__WEBPACK_IMPORTED_MODULE_8__["FileSelecterComponent"], { isAllowedEmpty: true }).then(function (value) {
            if (!_this.selectedTable || !value)
                return;
            _this.selectedTable.backgroundImageIdentifier = value;
        });
    };
    GameTableSettingComponent.ɵfac = function GameTableSettingComponent_Factory(t) { return new (t || GameTableSettingComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdirectiveInject"](service_modal_service__WEBPACK_IMPORTED_MODULE_9__["ModalService"]), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdirectiveInject"](service_save_data_service__WEBPACK_IMPORTED_MODULE_10__["SaveDataService"]), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdirectiveInject"](service_panel_service__WEBPACK_IMPORTED_MODULE_11__["PanelService"])); };
    GameTableSettingComponent.ɵcmp = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdefineComponent"]({ type: GameTableSettingComponent, selectors: [["game-table-setting"]], decls: 10, vars: 4, consts: [[1, "flex-container"], [1, "flex-item", "no-grow"], [3, "click"], ["size", "10", 2, "width", "10em", 3, "ngModel", "change"], [3, "value", 4, "ngFor", "ngForOf"], [1, "flex-item"], [4, "ngIf"], [3, "value"], [1, "images-select"], ["height", "120", 3, "src"], [3, "click", 4, "ngIf"], ["placeholder", "Name", 3, "ngModel", "ngModelChange"], ["type", "range", "name", "tableWidth", 3, "ngModel", "min", "max", "ngModelChange"], ["type", "number", 2, "width", "5em", 3, "ngModel", "min", "max", "ngModelChange"], ["type", "range", "name", "tableHeight", 3, "ngModel", "min", "max", "ngModelChange"], ["name", "tableGridType", 3, "ngModel", "ngModelChange"], ["value", "-1"], ["value", "0"], ["value", "1"], ["value", "2"], ["type", "color", "name", "tableGridColor", "list", "table-grid-color-list", 3, "ngModel", "ngModelChange"], ["id", "table-grid-color-list"], ["value", "#000000"], ["value", "#dddddd"], ["name", "tableDistanceviewFilter", 3, "ngModel", "ngModelChange"], ["value", ""], ["value", "white"], ["value", "black"], ["type", "checkbox", "name", "tableGridShow", 3, "ngModel", "ngModelChange"], ["type", "checkbox", "name", "tableGridSnap", 3, "ngModel", "ngModelChange"], [2, "height", "120px", 3, "click"], [3, "disabled", "click"], [2, "position", "relative"], [3, "ngClass"], ["class", "progress", 4, "ngIf"], [1, "danger", 3, "click"], [1, "progress"], [2, "font-size", "12px"]], template: function GameTableSettingComponent_Template(rf, ctx) { if (rf & 1) {
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "div", 0);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](1, "div", 1);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](2, "div");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](3, "button", 2);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("click", function GameTableSettingComponent_Template_button_click_3_listener() { return ctx.createGameTable(); });
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](4, "\u65B0\u589E\u76E4\u9762");
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](5, "select", 3);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("change", function GameTableSettingComponent_Template_select_change_5_listener($event) { return ctx.selectGameTable($event.target.value); });
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](6, GameTableSettingComponent_option_6_Template, 2, 2, "option", 4);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](7, "div", 5);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](8, GameTableSettingComponent_ng_container_8_Template, 57, 34, "ng-container", 6);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](9, GameTableSettingComponent_ng_container_9_Template, 3, 0, "ng-container", 6);
        } if (rf & 2) {
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](5);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngModel", ctx.selectedTable == null ? null : ctx.selectedTable.identifier);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngForOf", ctx.getGameTables());
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](2);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", !ctx.isEmpty || ctx.selectedTable);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](1);
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", ctx.isEmpty);
        } }, directives: [_angular_forms__WEBPACK_IMPORTED_MODULE_12__["SelectControlValueAccessor"], _angular_forms__WEBPACK_IMPORTED_MODULE_12__["NgControlStatus"], _angular_forms__WEBPACK_IMPORTED_MODULE_12__["NgModel"], _angular_common__WEBPACK_IMPORTED_MODULE_13__["NgForOf"], _angular_common__WEBPACK_IMPORTED_MODULE_13__["NgIf"], _angular_forms__WEBPACK_IMPORTED_MODULE_12__["NgSelectOption"], _angular_forms__WEBPACK_IMPORTED_MODULE_12__["ɵangular_packages_forms_forms_x"], _angular_forms__WEBPACK_IMPORTED_MODULE_12__["DefaultValueAccessor"], _angular_forms__WEBPACK_IMPORTED_MODULE_12__["RangeValueAccessor"], _angular_forms__WEBPACK_IMPORTED_MODULE_12__["NumberValueAccessor"], _angular_forms__WEBPACK_IMPORTED_MODULE_12__["CheckboxControlValueAccessor"], _angular_common__WEBPACK_IMPORTED_MODULE_13__["NgClass"]], pipes: [pipe_safe_pipe__WEBPACK_IMPORTED_MODULE_14__["SafePipe"]], styles: [".flex-container[_ngcontent-%COMP%] { \r\n  display: flex; \r\n  flex-flow:  row wrap; \r\n  justify-content: flex-start; \r\n  align-items: stretch;\r\n\r\n}\r\n.flex-item[_ngcontent-%COMP%] {\r\n  margin: 5px; \r\n  flex: 1 0 auto;\r\n  box-sizing: border-box; \r\n  flex-grow: 1;\r\n  max-width: 100%;\r\n}\r\n.no-grow[_ngcontent-%COMP%]{ \r\n  flex-grow: 0;\r\n}\r\n.images-select[_ngcontent-%COMP%] {\r\n  display: flex;\r\n}\r\n.is-hidden[_ngcontent-%COMP%] {\r\n  visibility: hidden;\r\n}\r\n.progress[_ngcontent-%COMP%] {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  position: absolute;\r\n  top: 0;\r\n  bottom: 0;\r\n  left: 0;\r\n  right: 0;\r\n  font-size: 0.9em;\r\n}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImdhbWUtdGFibGUtc2V0dGluZy5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLGtCQUN5QixXQUFXO0VBQ2xDLGFBQWEsRUFFZ0IsV0FBVztFQUN4QyxvQkFBb0IsRUFFaUIsV0FBVztFQUNoRCwyQkFBMkIsRUFFRyxXQUFXO0VBQ3pDLG9CQUFvQjs7QUFFdEI7QUFDQTtFQUNFLFdBQVcsRUFDYSxXQUFXO0VBQ25DLGNBQWM7RUFDZCxzQkFBc0IsRUFDQSxXQUFXO0VBQ2pDLFlBQVk7RUFDWixlQUFlO0FBQ2pCO0FBRUEsVUFDd0IsV0FBVztFQUNqQyxZQUFZO0FBQ2Q7QUFFQTtFQUNFLGFBQWE7QUFDZjtBQUVBO0VBQ0Usa0JBQWtCO0FBQ3BCO0FBRUE7RUFDRSxhQUFhO0VBQ2IsbUJBQW1CO0VBQ25CLHVCQUF1QjtFQUN2QixrQkFBa0I7RUFDbEIsTUFBTTtFQUNOLFNBQVM7RUFDVCxPQUFPO0VBQ1AsUUFBUTtFQUNSLGdCQUFnQjtBQUNsQiIsImZpbGUiOiJnYW1lLXRhYmxlLXNldHRpbmcuY29tcG9uZW50LmNzcyIsInNvdXJjZXNDb250ZW50IjpbIi5mbGV4LWNvbnRhaW5lciB7XHJcbiAgZGlzcGxheTogLXdlYmtpdC1mbGV4OyAvKiBTYWZhcmkgKi9cclxuICBkaXNwbGF5OiBmbGV4O1xyXG5cclxuICAtd2Via2l0LWZsZXgtZmxvdzogcm93IHdyYXA7IC8qIFNhZmFyaSAqL1xyXG4gIGZsZXgtZmxvdzogIHJvdyB3cmFwO1xyXG5cclxuICAtd2Via2l0LWp1c3RpZnktY29udGVudDogZmxleC1zdGFydDsgLyogU2FmYXJpICovXHJcbiAganVzdGlmeS1jb250ZW50OiBmbGV4LXN0YXJ0O1xyXG5cclxuICAtd2Via2l0LWFsaWduLWl0ZW1zOiBzdHJldGNoOyAvKiBTYWZhcmkgKi9cclxuICBhbGlnbi1pdGVtczogc3RyZXRjaDtcclxuXHJcbn1cclxuLmZsZXgtaXRlbSB7XHJcbiAgbWFyZ2luOiA1cHg7XHJcbiAgLXdlYmtpdC1mbGV4OiAxIDAgYXV0bzsgLyogU2FmYXJpICovXHJcbiAgZmxleDogMSAwIGF1dG87XHJcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcclxuICAtd2Via2l0LWZsZXgtZ3JvdzogMTsgLyogU2FmYXJpICovXHJcbiAgZmxleC1ncm93OiAxO1xyXG4gIG1heC13aWR0aDogMTAwJTtcclxufVxyXG5cclxuLm5vLWdyb3d7XHJcbiAgLXdlYmtpdC1mbGV4LWdyb3c6IDA7IC8qIFNhZmFyaSAqL1xyXG4gIGZsZXgtZ3JvdzogMDtcclxufVxyXG5cclxuLmltYWdlcy1zZWxlY3Qge1xyXG4gIGRpc3BsYXk6IGZsZXg7XHJcbn1cclxuXHJcbi5pcy1oaWRkZW4ge1xyXG4gIHZpc2liaWxpdHk6IGhpZGRlbjtcclxufVxyXG5cclxuLnByb2dyZXNzIHtcclxuICBkaXNwbGF5OiBmbGV4O1xyXG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XHJcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XHJcbiAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gIHRvcDogMDtcclxuICBib3R0b206IDA7XHJcbiAgbGVmdDogMDtcclxuICByaWdodDogMDtcclxuICBmb250LXNpemU6IDAuOWVtO1xyXG59XHJcbiJdfQ== */"] });
    return GameTableSettingComponent;
}());

/*@__PURE__*/ (function () { _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵsetClassMetadata"](GameTableSettingComponent, [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_1__["Component"],
        args: [{
                selector: 'game-table-setting',
                templateUrl: './game-table-setting.component.html',
                styleUrls: ['./game-table-setting.component.css']
            }]
    }], function () { return [{ type: service_modal_service__WEBPACK_IMPORTED_MODULE_9__["ModalService"] }, { type: service_save_data_service__WEBPACK_IMPORTED_MODULE_10__["SaveDataService"] }, { type: service_panel_service__WEBPACK_IMPORTED_MODULE_11__["PanelService"] }]; }, null); })();


/***/ }),

/***/ "zn8P":
/*!******************************************************!*\
  !*** ./$$_lazy_route_resource lazy namespace object ***!
  \******************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

function webpackEmptyAsyncContext(req) {
	// Here Promise.resolve().then() is used instead of new Promise() to prevent
	// uncaught exception popping up in devtools
	return Promise.resolve().then(function() {
		var e = new Error("Cannot find module '" + req + "'");
		e.code = 'MODULE_NOT_FOUND';
		throw e;
	});
}
webpackEmptyAsyncContext.keys = function() { return []; };
webpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;
module.exports = webpackEmptyAsyncContext;
webpackEmptyAsyncContext.id = "zn8P";

/***/ }),

/***/ "ztsr":
/*!***********************************************************!*\
  !*** ./src/app/class/core/system/network/peer-context.ts ***!
  \***********************************************************/
/*! exports provided: PeerContext */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PeerContext", function() { return PeerContext; });
/* harmony import */ var lzbase62_lzbase62_min_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lzbase62/lzbase62.min.js */ "fW0U");
/* harmony import */ var lzbase62_lzbase62_min_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lzbase62_lzbase62_min_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var crypto_js_sha256_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! crypto-js/sha256.js */ "lPiR");
/* harmony import */ var crypto_js_sha256_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(crypto_js_sha256_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _util_base_x__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../util/base-x */ "pVQh");



var Base62 = Object(_util_base_x__WEBPACK_IMPORTED_MODULE_2__["base"])('0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ');
var roomIdPattern = /^(\w{6})(\w{3})(\w*)-(\w*)/i;
var PeerContext = /** @class */ (function () {
    function PeerContext(peerId) {
        this.peerId = '';
        this.userId = '';
        this.roomId = '';
        this.roomName = '';
        this.password = '';
        this.digestUserId = '';
        this.digestPassword = '';
        this.isOpen = false;
        this.parse(peerId);
    }
    Object.defineProperty(PeerContext.prototype, "isRoom", {
        get: function () { return 0 < this.roomId.length; },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(PeerContext.prototype, "hasPassword", {
        get: function () { return 0 < this.password.length + this.digestPassword.length; },
        enumerable: false,
        configurable: true
    });
    PeerContext.prototype.parse = function (peerId) {
        try {
            this.peerId = peerId;
            var regArray = roomIdPattern.exec(peerId);
            var isRoom = regArray != null;
            if (isRoom) {
                this.digestUserId = regArray[1];
                this.roomId = regArray[2];
                this.roomName = lzbase62_lzbase62_min_js__WEBPACK_IMPORTED_MODULE_0__["decompress"](regArray[3]);
                this.digestPassword = regArray[4];
                return;
            }
        }
        catch (e) {
            console.warn(e);
        }
        this.digestUserId = peerId;
        return;
    };
    PeerContext.prototype.verifyPassword = function (password) {
        var digest = calcDigestPassword(this.roomId, password);
        var isCorrect = digest === this.digestPassword;
        return isCorrect;
    };
    PeerContext.parse = function (peerId) {
        return new PeerContext(peerId);
    };
    PeerContext.create = function () {
        var args = [];
        for (var _i = 0; _i < arguments.length; _i++) {
            args[_i] = arguments[_i];
        }
        if (args.length <= 1) {
            return PeerContext._create.apply(this, args);
        }
        else {
            return PeerContext._createRoom.apply(this, args);
        }
    };
    PeerContext._create = function (userId) {
        if (userId === void 0) { userId = ''; }
        var digestUserId = calcDigestUserId(userId);
        var peerContext = new PeerContext(digestUserId);
        peerContext.userId = userId;
        return peerContext;
    };
    PeerContext._createRoom = function (userId, roomId, roomName, password) {
        if (userId === void 0) { userId = ''; }
        if (roomId === void 0) { roomId = ''; }
        if (roomName === void 0) { roomName = ''; }
        if (password === void 0) { password = ''; }
        var digestUserId = this.generateId('******');
        var digestPassword = calcDigestPassword(roomId, password);
        var peerId = "" + digestUserId + roomId + lzbase62_lzbase62_min_js__WEBPACK_IMPORTED_MODULE_0__["compress"](roomName) + "-" + digestPassword;
        var peerContext = new PeerContext(peerId);
        peerContext.userId = userId;
        peerContext.password = password;
        return peerContext;
    };
    PeerContext.generateId = function (format) {
        if (format === void 0) { format = '********'; }
        var h = '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ';
        var k = format;
        k = format.replace(/\*/g, function (c) { return h[Math.floor(Math.random() * (h.length))]; });
        return k;
    };
    return PeerContext;
}());

function calcDigestUserId(userId) {
    if (userId == null)
        return '';
    return calcDigest(userId);
}
function calcDigestPassword(roomId, password) {
    if (roomId == null || password == null)
        return '';
    return 0 < password.length ? calcDigest(roomId + password, 7) : '';
}
function calcDigest(str, truncateLength) {
    if (truncateLength === void 0) { truncateLength = -1; }
    if (str == null)
        return '';
    var hash = crypto_js_sha256_js__WEBPACK_IMPORTED_MODULE_1__(str);
    var array = new Uint8Array(Uint32Array.from(hash.words).buffer);
    var base62 = Base62.encode(array);
    if (truncateLength < 0)
        truncateLength = base62.length;
    if (base62.length < truncateLength)
        truncateLength = base62.length;
    base62 = base62.slice(0, truncateLength);
    return base62;
}


/***/ })

},[[0,"runtime","vendor"]]]);
//# sourceMappingURL=main.js.map