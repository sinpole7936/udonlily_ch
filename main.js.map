{"version":3,"sources":["./src/app/class/core/synchronize-object/object-factory.ts","./src/app/directive/movable.directive.ts","./src/app/class/peer-cursor.ts","./src/app/component/chat-input/chat-input.component.ts","./src/app/component/chat-input/chat-input.component.html","./src/app/component/chat-tachie-img/chat-tachie-img.component.ts","./src/app/component/chat-tachie-img/chat-tachie-img.component.html","./src/app/component/game-character-generator/game-character-generator.component.ts","./src/app/component/game-character-generator/game-character-generator.component.html","./src/app/class/core/synchronize-object/decorator.ts","./src/app/class/card-stack.ts","./src/app/class/core/system/event/listener.ts","./src/app/directive/rotable.directive.ts","./src/app/component/game-table-mask/game-table-mask.component.ts","./src/app/component/game-table-mask/game-table-mask.component.html","./src/app/component/card/card.component.ts","./src/app/component/card/card.component.html","./src/app/component/terrain/terrain.component.ts","./src/app/component/terrain/terrain.component.html","./src/app/class/core/system/event/event.ts","./src/app/component/game-table/table-touch-gesture.ts","./src/app/directive/resize-handler.ts","./src/app/pipe/safe.pipe.ts","./src/app/service/app-config.service.ts","./src/app/component/text-note/text-note.component.ts","./src/app/component/text-note/text-note.component.html","./src/app/class/KariDice.ts","./src/app/directive/input-handler.ts","./src/app/service/context-menu.service.ts","./src/app/class/cut-in-launcher.ts","./src/app/class/core/file-storage/canvas-util.ts","./src/app/class/core/system/util/resettable-timeout.ts","./src/app/service/tabletop-action.service.ts","./src/app/component/game-character/game-character.component.ts","./src/app/component/game-character/game-character.component.html","./src/app/component/text-view/text-view.component.ts","./src/app/component/text-view/text-view.component.html","./src/app/class/game-table-mask.ts","./src/environments/environment.ts","./src/app/component/overview-panel/overview-panel.component.ts","./src/app/component/overview-panel/overview-panel.component.html","./src/app/service/modal.service.ts","./src/app/component/game-data-element/game-data-element.component.ts","./src/app/component/game-data-element/game-data-element.component.html","./src/app/class/room.ts","./src/app/component/modal/modal.component.ts","./src/app/component/modal/modal.component.html","./src/app/component/peer-menu/peer-menu.component.ts","./src/app/component/peer-menu/peer-menu.component.html","./src/app/class/core/synchronize-object/object-node.ts","./src/app/component/file-selecter/file-selecter.component.ts","./src/app/component/file-selecter/file-selecter.component.html","./src/app/component/dice-symbol/dice-symbol.component.ts","./src/app/component/dice-symbol/dice-symbol.component.html","./src/app/class/core/file-storage/image-file.ts","./src/app/component/game-table/grid-line-render.ts","./src/app/service/pointer-device.service.ts","./src/app/class/core/system/event/event-system.ts","./src/app/class/table-selecter.ts","./src/app/class/core/system/network/connection.ts","./src/app/service/image.service.ts","./src/app/class/IdoDice.ts","./src/app/component/game-data-element-buff/game-data-element-buff.component.ts","./src/app/component/game-data-element-buff/game-data-element-buff.component.html","./src/app/component/remote-controller/remote-controller.component.ts","./src/app/component/remote-controller/remote-controller.component.html","./src/app/class/core/file-storage/image-storage.ts","./src/app/class/dice-bot.ts","./src/app/component/chat-message/chat-message.component.ts","./src/app/component/chat-message/chat-message.component.html","./src/app/service/game-object-inventory.service.ts","./src/app/class/game-character.ts","./src/app/service/panel.service.ts","./src/app/class/core/synchronize-object/object-serializer.ts","./src/app/class/core/file-storage/file-reader-util.ts","./src/app/class/core/system/network/skyway-data-connection.ts","./src/app/class/core/file-storage/mime-type.ts","./src/app/class/dice-table.ts","./src/app/component/cut-in-bgm/cut-in-bgm.component.ts","./src/app/component/cut-in-bgm/cut-in-bgm.component.html","./src/app/component/dice-table-setting/dice-table-setting.component.ts","./src/app/component/dice-table-setting/dice-table-setting.component.html","./src/app/component/file-storage/file-storage.component.ts","./src/app/component/file-storage/file-storage.component.html","./src/app/class/core/system/util/uuid.ts","./src/app/service/chat-message.service.ts","./src/app/class/core/file-storage/buffer-sharing-task.ts","./src/app/class/core/file-storage/audio-storage.ts","./src/app/component/game-object-inventory/game-object-inventory.component.ts","./src/app/component/game-object-inventory/game-object-inventory.component.html","./src/app/class/game-table.ts","./src/app/service/tabletop.service.ts","./src/app/class/chat-tab.ts","./src/app/component/cut-in-list/cut-in-list.component.ts","./src/app/component/cut-in-list/cut-in-list.component.html","./src/app/app.component.ts","./src/app/app.component.html","./src/app/component/jukebox/jukebox.component.ts","./src/app/component/jukebox/jukebox.component.html","./src/app/service/coordinate.service.ts","./src/app/component/game-table/game-table.component.ts","./src/app/component/game-table/game-table.component.html","./src/app/service/save-data.service.ts","./src/app/component/game-character-buff-view/game-character-buff-view.component.ts","./src/app/component/game-character-buff-view/game-character-buff-view.component.html","./src/app/component/ui-panel/ui-panel.component.ts","./src/app/component/ui-panel/ui-panel.component.html","./src/app/class/image-tag.ts","./src/app/class/text-note.ts","./src/app/component/chat-tab/chat-tab.component.ts","./src/app/component/chat-tab/chat-tab.component.html","./src/app/class/core/file-storage/audio-sharing-system.ts","./src/app/class/chat-tab-list.ts","./src/app/app.module.ts","./src/app/component/chat-tachie/chat-tachie.component.ts","./src/app/component/chat-tachie/chat-tachie.component.html","./src/app/component/room-setting/room-setting.component.ts","./src/app/component/room-setting/room-setting.component.html","./src/app/class/core/system/util/string-util.ts","./src/app/class/core/system/util/xml-util.ts","./src/app/class/database/database.ts","./src/app/class/core/synchronize-object/object-synchronizer.ts","./src/app/component/context-menu/context-menu.component.ts","./src/app/component/context-menu/context-menu.component.html","./src/app/class/tabletop-object.ts","./src/app/class/core/file-storage/audio-file.ts","./src/app/class/core/system/util/zero-timeout.ts","./src/app/component/controller-input/controller-input.component.ts","./src/app/component/controller-input/controller-input.component.html","./src/app/class/chat-message.ts","./node_modules/bcdice/lib/bcdice/game_system lazy ^\\.\\/.*$ include: \\.js$ namespace object","./src/app/class/tabletop-object-util.ts","./src/app/class/terrain.ts","./src/app/component/peer-cursor/peer-cursor.component.ts","./src/app/component/peer-cursor/peer-cursor.component.html","./src/app/class/data-element.ts","./src/app/class/Jukebox.ts","./src/app/class/core/synchronize-object/object-store.ts","./src/app/component/chat-palette/chat-palette.component.ts","./src/app/component/chat-palette/chat-palette.component.html","./src/app/class/core/system/network/skyway-connection.ts","./src/app/class/core/synchronize-object/synchronize-task.ts","./src/app/class/card.ts","./src/app/component/card-stack-list/card-stack-list.component.ts","./src/app/component/card-stack-list/card-stack-list.component.html","./src/app/component/network-indicator/network-indicator.component.ts","./src/app/component/network-indicator/network-indicator.component.html","./src/app/class/dice-symbol.ts","./src/app/class/transform/matrix-3d.ts","./src/app/component/chat-color-setting/chat-color-setting.component.ts","./src/app/component/chat-color-setting/chat-color-setting.component.html","./src/app/directive/resizable.directive.ts","./src/app/class/core/system/util/base-x.ts","./src/app/component/password-check/password-check.component.ts","./src/app/component/password-check/password-check.component.html","./src/app/class/cut-in.ts","./src/app/class/core/system/network/network.ts","./src/app/class/core/synchronize-object/decorator-core.ts","./src/app/component/card-stack/card-stack.component.ts","./src/app/component/card-stack/card-stack.component.html","./src/app/class/transform/transform.ts","./src/app/component/lobby/lobby.component.ts","./src/app/component/lobby/lobby.component.html","./src/app/service/batch.service.ts","./src/app/directive/tooltip.directive.ts","./src/app/class/chat-palette.ts","./src/app/class/sound-effect.ts","./src/app/class/core/system/util/promise-queue.ts","./src/app/class/core/file-storage/file-archiver.ts","./src/app/component/chat-window/chat-window.component.ts","./src/app/component/chat-window/chat-window.component.html","./src/app/component/chat-message-setting/chat-message-setting.component.ts","./src/app/component/chat-message-setting/chat-message-setting.component.html","./src/app/component/badge/badge.component.ts","./src/app/component/badge/badge.component.html","./src/app/class/core/file-storage/image-sharing-system.ts","./src/app/class/core/synchronize-object/game-object.ts","./src/app/component/cut-in-window/cut-in-window.component.ts","./src/app/component/cut-in-window/cut-in-window.component.html","./src/app/class/image-tag-list.ts","./src/app/class/core/system/index.ts","./src/app/class/core/system/util/compress.ts","./src/app/component/chat-tab-setting/chat-tab-setting.component.ts","./src/app/component/chat-tab-setting/chat-tab-setting.component.html","./src/app/directive/draggable.directive.ts","./src/app/class/transform/css-number.ts","./src/app/class/data-summary-setting.ts","./src/main.ts","./src/app/component/game-character-sheet/game-character-sheet.component.ts","./src/app/component/game-character-sheet/game-character-sheet.component.html","./src/app/class/core/file-storage/audio-player.ts","./src/app/component/game-table-setting/game-table-setting.component.ts","./src/app/component/game-table-setting/game-table-setting.component.html","./$_lazy_route_resource lazy namespace object","./src/app/class/core/system/network/peer-context.ts"],"names":[],"mappings":"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CAAa;IACZ;QAAV,kFAAO,EAAE;gDAAiB;IAChB;QAAV,kFAAO,EAAE;wDAAyB;IACxB;QAAV,kFAAO,EAAE;iDAAkB;IACjB;QAAV,kFAAO,EAAE;kDAAmB;IAClB;QAAV,kFAAO,EAAE;iDAAkB;IAVjB,WAAW;QADvB,qFAAU,CAAC,MAAM,CAAC;OACN,WAAW,CAgDvB;IAAD,kBAAC;CAAA,CAhDgC,+EAAU,GAgD1C;AAhDuB;;;;;;;;;;;;AC7BxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA,qC;;;;;;;;;;;;AC1iEA;AAAA;AAAA;AAAqE;AAS9D,SAAS,aAAa,CAAC,OAAkB,EAAE,cAAgC;IAAh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AAC,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,CAAC;QACpH,IAAI,CAAC,CAAC,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,CAAC;QACpH,IAAI,CAAC,CAAC,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,CAAC;QACpH,IAAI,CAAC,CAAC,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,CAAC;QACpH,IAAI,CAAC,CAAC,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,CAAC;QACpH,IAAI,CAAC,CAAC,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,CAAC;QACpH,IAAI,CAAC,EAAE,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,CAAC;QACrH,IAAI,CAAC,EAAE,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,CAAC;QACrH,IAAI,CAAC,EAAE,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,CAAC;QACrH,IAAI,CAAC,EAAE,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,CAAC;QACrH,IAAI,CAAC,EAAE,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,CAAC;QACrH,IAAI,CAAC,EAAE,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,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G,GAAG,CAAC,CAAC,GAAG,CAAC;QACxE,IAAI,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,CAAC;QACxE,IAAI,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,CAAC;QACxE,IAAI,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,CAAC;QACxE,IAAI,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,CAAC;QACxE,IAAI,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,CAAC;QACxE,IAAI,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,CAAC;QACxE,IAAI,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,CAAC;QACxE,IAAI,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,CAAC;QACxE,IAAI,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,CAAC;QACxE,IAAI,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,CAAC;QACxE,IAAI,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,CAAC;QAExE,GAAG,CAAC,GAAG,GAAG,GAAG,CAAC;QACd,GAAG,CAAC,GAAG,GAAG,GAAG,CAAC;QACd,GAAG,CAAC,GAAG,GAAG,GAAG,CAAC;QACd,GAAG,CAAC,GAAG,GAAG,GAAG,CAAC;QACd,GAAG,CAAC,GAAG,GAAG,GAAG,CAAC;QACd,GAAG,CAAC,GAAG,GAAG,GAAG,CAAC;QACd,GAAG,CAAC,GAAG,GAAG,GAAG,CAAC;QACd,GAAG,CAAC,GAAG,GAAG,GAAG,CAAC;QACd,GAAG,CAAC,GAAG,GAAG,GAAG,CAAC;QACd,GAAG,CAAC,GAAG,GAAG,GAAG,CAAC;QACd,GAAG,CAAC,GAAG,GAAG,GAAG,C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","file":"main.js","sourcesContent":["import { GameObject } from './game-object';\r\n\r\nexport declare var Type: FunctionConstructor;\r\nexport interface Type<T> extends Function {\r\n  new(...args: any[]): T;\r\n}\r\n\r\nexport class ObjectFactory {\r\n  private static _instance: ObjectFactory\r\n  static get instance(): ObjectFactory {\r\n    if (!ObjectFactory._instance) ObjectFactory._instance = new ObjectFactory();\r\n    return ObjectFactory._instance;\r\n  }\r\n\r\n  private constructorMap: Map<string, Type<GameObject>> = new Map();\r\n  private aliasMap: Map<Type<GameObject>, string> = new Map();\r\n\r\n  private constructor() { console.log('ObjectFactory ready...'); };\r\n\r\n  register<T extends GameObject>(constructor: Type<T>, alias?: string) {\r\n    if (!alias) alias = constructor.name || constructor.toString().match(/function\\s*([^(]*)\\(/)[1];\r\n    if (this.constructorMap.has(alias)) {\r\n      console.error('その alias<' + alias + '> はすでに割り当て済みじゃねー？');\r\n      return;\r\n    }\r\n    if (this.aliasMap.has(constructor)) {\r\n      console.error('その constructor はすでに登録済みじゃねー？', constructor);\r\n      return;\r\n    }\r\n    console.log('addGameObjectFactory -> ' + alias);\r\n    this.constructorMap.set(alias, constructor);\r\n    this.aliasMap.set(constructor, alias);\r\n  }\r\n\r\n  create<T extends GameObject>(alias: string, identifer?: string): T {\r\n    let classConstructor = this.constructorMap.get(alias);\r\n    if (!classConstructor) {\r\n      console.error(alias + 'という名のＧameObjectクラスは定義されていません');\r\n      return null;\r\n    }\r\n    let gameObject: GameObject = new classConstructor(identifer);\r\n    return <T>gameObject;\r\n  }\r\n\r\n  getAlias<T extends GameObject>(constructor: Type<T>): string {\r\n    return this.aliasMap.get(constructor);\r\n  }\r\n}\r\n","import { AfterViewInit, Directive, ElementRef, EventEmitter, Input, NgZone, OnDestroy, Output } from '@angular/core';\r\nimport { ObjectStore } from '@udonarium/core/synchronize-object/object-store';\r\nimport { EventSystem } from '@udonarium/core/system';\r\nimport { TableSelecter } from '@udonarium/table-selecter';\r\nimport { TabletopObject } from '@udonarium/tabletop-object';\r\nimport { BatchService } from 'service/batch.service';\r\nimport { CoordinateService } from 'service/coordinate.service';\r\nimport { PointerCoordinate, PointerDeviceService } from 'service/pointer-device.service';\r\n\r\nimport { InputHandler } from './input-handler';\r\n\r\nexport interface MovableOption {\r\n  readonly tabletopObject?: TabletopObject;\r\n  readonly layerName?: string;\r\n  readonly colideLayers?: string[];\r\n  readonly transformCssOffset?: string;\r\n}\r\n\r\n@Directive({\r\n  selector: '[appMovable]'\r\n})\r\nexport class MovableDirective implements AfterViewInit, OnDestroy {\r\n  private static layerHash: { [layerName: string]: MovableDirective[] } = {};\r\n\r\n  private tabletopObject: TabletopObject;\r\n  private layerName: string = '';\r\n  private colideLayers: string[] = [];\r\n  private transformCssOffset: string = '';\r\n\r\n  @Input('movable.option') set option(option: MovableOption) {\r\n    this.tabletopObject = option.tabletopObject != null ? option.tabletopObject : this.tabletopObject;\r\n    this.layerName = option.layerName != null ? option.layerName : this.layerName;\r\n    this.colideLayers = option.colideLayers != null ? option.colideLayers : this.colideLayers;\r\n    this.transformCssOffset = option.transformCssOffset != null ? option.transformCssOffset : this.transformCssOffset;\r\n  }\r\n  @Input('movable.disable') isDisable: boolean = false;\r\n  @Output('movable.onstart') onstart: EventEmitter<PointerEvent> = new EventEmitter();\r\n  @Output('movable.ondragstart') ondragstart: EventEmitter<PointerEvent> = new EventEmitter();\r\n  @Output('movable.ondrag') ondrag: EventEmitter<PointerEvent> = new EventEmitter();\r\n  @Output('movable.ondragend') ondragend: EventEmitter<PointerEvent> = new EventEmitter();\r\n  @Output('movable.onend') onend: EventEmitter<PointerEvent> = new EventEmitter();\r\n\r\n  private _posX: number = 0;\r\n  private _posY: number = 0;\r\n  private _posZ: number = 0;\r\n\r\n  get posX(): number { return this._posX; }\r\n  set posX(posX: number) { this._posX = posX; this.setUpdateTimer(); }\r\n  get posY(): number { return this._posY; }\r\n  set posY(posY: number) { this._posY = posY; this.setUpdateTimer(); }\r\n  get posZ(): number { return this._posZ; }\r\n  set posZ(posZ: number) { this._posZ = posZ; this.setUpdateTimer(); }\r\n\r\n  private pointer3d: PointerCoordinate = { x: 0, y: 0, z: 0 };\r\n  private pointerOffset3d: PointerCoordinate = { x: 0, y: 0, z: 0 };\r\n  private pointerStart3d: PointerCoordinate = { x: 0, y: 0, z: 0 };\r\n  private pointerPrev3d: PointerCoordinate = { x: 0, y: 0, z: 0 };\r\n\r\n  private height: number = 0;\r\n  private width: number = 0;\r\n  private ratio: number = 1.0;\r\n\r\n  private updateTimer: NodeJS.Timer = null;\r\n  private collidableElements: HTMLElement[] = [];\r\n  private input: InputHandler = null;\r\n\r\n  private get isGridSnap(): boolean {\r\n    let tableSelecter = ObjectStore.instance.get<TableSelecter>('tableSelecter');\r\n    return tableSelecter ? tableSelecter.gridSnap : false;\r\n  }\r\n\r\n  constructor(\r\n    private ngZone: NgZone,\r\n    private elementRef: ElementRef,\r\n    private batchService: BatchService,\r\n    private pointerDeviceService: PointerDeviceService,\r\n    private coordinateService: CoordinateService,\r\n  ) { }\r\n\r\n  ngAfterViewInit() {\r\n    this.ngZone.runOutsideAngular(() => {\r\n      this.input = new InputHandler(this.elementRef.nativeElement);\r\n    });\r\n    this.input.onStart = this.onInputStart.bind(this);\r\n    this.input.onMove = this.onInputMove.bind(this);\r\n    this.input.onEnd = this.onInputEnd.bind(this);\r\n    this.input.onContextMenu = this.onContextMenu.bind(this);\r\n\r\n    EventSystem.register(this)\r\n      .on('UPDATE_GAME_OBJECT', -1000, event => {\r\n        if ((event.isSendFromSelf && this.input.isGrabbing) || event.data.identifier !== this.tabletopObject.identifier || !this.shouldTransition(this.tabletopObject)) return;\r\n        this.batchService.add(() => {\r\n          if (this.input.isGrabbing) {\r\n            this.cancel();\r\n          } else {\r\n            this.setAnimatedTransition(true);\r\n          }\r\n          this.stopTransition();\r\n          this.setPosition(this.tabletopObject);\r\n        }, this);\r\n      });\r\n    if (this.layerName.length < 1 && this.tabletopObject) this.layerName = this.tabletopObject.aliasName;\r\n    this.register();\r\n    this.findCollidableElements();\r\n    this.setPosition(this.tabletopObject);\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.cancel();\r\n    this.input.destroy();\r\n    this.unregister();\r\n    EventSystem.unregister(this);\r\n    this.batchService.remove(this);\r\n  }\r\n\r\n  cancel() {\r\n    this.input.cancel();\r\n    this.setPointerEvents(true);\r\n    this.setAnimatedTransition(true);\r\n    this.setCollidableLayer(false);\r\n  }\r\n\r\n  onInputStart(e: MouseEvent | TouchEvent) {\r\n    this.callSelectedEvent();\r\n    if (this.collidableElements.length < 1) this.findCollidableElements(); // 稀にcollidableElementsの取得に失敗している\r\n\r\n    if (this.isDisable || (e as MouseEvent).button === 1 || (e as MouseEvent).button === 2) return this.cancel();\r\n    this.onstart.emit(e as PointerEvent);\r\n\r\n    this.setPointerEvents(false);\r\n    this.setAnimatedTransition(false);\r\n    this.setCollidableLayer(true);\r\n\r\n    let target = document.elementFromPoint(this.input.pointer.x, this.input.pointer.y) as HTMLElement;\r\n    this.pointer3d = this.coordinateService.calcTabletopLocalCoordinate(this.input.pointer, target);\r\n    this.setPointerEvents(true);\r\n\r\n    this.pointerOffset3d.x = this.posX - this.pointer3d.x;\r\n    this.pointerOffset3d.y = this.posY - this.pointer3d.y;\r\n    this.pointerOffset3d.z = this.posZ - this.pointer3d.z;\r\n\r\n    this.pointerStart3d.x = this.pointerPrev3d.x = this.pointer3d.x;\r\n    this.pointerStart3d.y = this.pointerPrev3d.y = this.pointer3d.y;\r\n    this.pointerStart3d.z = this.pointerPrev3d.z = this.pointer3d.z;\r\n\r\n    this.ratio = 1.0;\r\n    if (this.pointer3d.z !== this.posZ) {\r\n      this.ratio /= Math.abs(this.pointer3d.z - this.posZ) / 2;\r\n    }\r\n\r\n    this.width = this.input.target.clientWidth;\r\n    this.height = this.input.target.clientHeight;\r\n  }\r\n\r\n  onInputMove(e: MouseEvent | TouchEvent) {\r\n    if (this.input.isGrabbing && !this.pointerDeviceService.isDragging) {\r\n      return this.cancel(); // todo\r\n    }\r\n    if (this.isDisable || !this.input.isGrabbing) return this.cancel();\r\n    if (e.cancelable) e.preventDefault();\r\n\r\n    if (!this.input.isDragging) this.setPointerEvents(false);\r\n    let target = document.elementFromPoint(this.input.pointer.x, this.input.pointer.y) as HTMLElement;\r\n    if (target == null) return;\r\n\r\n    this.pointer3d = this.coordinateService.calcTabletopLocalCoordinate(this.input.pointer, target);\r\n    if (this.pointerPrev3d.x === this.pointer3d.x && this.pointerPrev3d.y === this.pointer3d.y && this.pointerPrev3d.z === this.pointer3d.z) return;\r\n\r\n    if (!this.input.isDragging) this.ondragstart.emit(e as PointerEvent);\r\n    this.ondrag.emit(e as PointerEvent);\r\n\r\n    let ratio = this.calcDistanceRatio(this.pointerStart3d, this.pointer3d);\r\n    if (ratio < this.ratio) this.ratio = ratio;\r\n\r\n    this.pointerPrev3d.x = this.pointer3d.x;\r\n    this.pointerPrev3d.y = this.pointer3d.y;\r\n    this.pointerPrev3d.z = this.pointer3d.z;\r\n\r\n    this.posX = this.pointer3d.x + (this.pointerOffset3d.x * this.ratio) + (-(this.width / 2) * (1.0 - this.ratio));\r\n    this.posY = this.pointer3d.y + (this.pointerOffset3d.y * this.ratio) + (-(this.height / 2) * (1.0 - this.ratio));\r\n    this.posZ = this.pointer3d.z;\r\n  }\r\n\r\n  onInputEnd(e: MouseEvent | TouchEvent) {\r\n    if (this.isDisable) return this.cancel();\r\n    if (this.input.isDragging) this.ondragend.emit(e as PointerEvent);\r\n    if (this.isGridSnap && this.input.isDragging) this.snapToGrid();\r\n    this.cancel();\r\n    this.onend.emit(e as PointerEvent);\r\n  }\r\n\r\n  onContextMenu(e: MouseEvent | TouchEvent) {\r\n    if (this.isDisable) return this.cancel();\r\n    if (e.cancelable) e.preventDefault();\r\n\r\n    if (this.isGridSnap && this.input.isDragging) this.snapToGrid();\r\n\r\n    let needsDispatch = this.input.isGrabbing && e.isTrusted;\r\n    this.cancel();\r\n\r\n    if (needsDispatch) {\r\n      // ロングプレスによるタッチ操作でコンテキストメニューを開く場合、イベントを適切なDOMに伝搬させる\r\n      e.stopPropagation();\r\n      let ev = new MouseEvent(e.type, e);\r\n      this.ngZone.run(() => this.input.target.dispatchEvent(ev));\r\n    }\r\n  }\r\n\r\n  private callSelectedEvent() {\r\n    if (this.tabletopObject)\r\n      EventSystem.trigger('SELECT_TABLETOP_OBJECT', { identifier: this.tabletopObject.identifier, className: this.tabletopObject.aliasName });\r\n  }\r\n\r\n  private calcDistanceRatio(start: PointerCoordinate, now: PointerCoordinate): number {\r\n    let width = this.collidableElements[0].clientWidth;\r\n    let height = this.collidableElements[0].clientHeight;\r\n    let ratio: number = Math.sqrt(width * width + height * height);\r\n    ratio = ratio < 1 ? 1 : ratio * 3;\r\n\r\n    let distanceY = start.y - now.y;\r\n    let distanceX = start.x - now.x;\r\n    let distanceZ = (start.z - now.z) * 100;\r\n    let distance = Math.sqrt(distanceY ** 2 + distanceX ** 2 + distanceZ ** 2);\r\n\r\n    return ratio / (distance + ratio);\r\n  }\r\n\r\n  snapToGrid(gridSize: number = 25) {\r\n    this.posX = this.calcSnapNum(this.posX, gridSize);\r\n    this.posY = this.calcSnapNum(this.posY, gridSize);\r\n  }\r\n\r\n  private calcSnapNum(num: number, interval: number): number {\r\n    if (interval <= 0) return num;\r\n    num = num < 0 ? num - interval / 2 : num + interval / 2;\r\n    return num - (num % interval);\r\n  }\r\n\r\n  private setPosition(object: TabletopObject) {\r\n    this._posX = object.location.x;\r\n    this._posY = object.location.y;\r\n    this._posZ = object.posZ;\r\n    this.updateTransformCss();\r\n  }\r\n\r\n  private setUpdateTimer() {\r\n    if (this.updateTimer === null && this.tabletopObject) {\r\n      this.updateTimer = setTimeout(() => {\r\n        this.tabletopObject.location.x = this.posX;\r\n        this.tabletopObject.location.y = this.posY;\r\n        this.tabletopObject.posZ = this.posZ;\r\n        this.updateTimer = null;\r\n      }, 66);\r\n    }\r\n    this.updateTransformCss();\r\n  }\r\n\r\n  private findCollidableElements() {\r\n    this.collidableElements = [];\r\n    if (getComputedStyle(this.input.target).pointerEvents !== 'none') {\r\n      this.collidableElements = [this.input.target];\r\n      return;\r\n    }\r\n    this.findNestedCollidableElements(this.input.target);\r\n  }\r\n\r\n  private findNestedCollidableElements(element: HTMLElement) {\r\n    // TODO:不完全\r\n    let children = element.children;\r\n    for (let i = 0; i < children.length; i++) {\r\n      let child = children[i]\r\n      if (!(child instanceof HTMLElement)) continue;\r\n      if (getComputedStyle(child).pointerEvents !== 'none') {\r\n        this.collidableElements.push(child);\r\n      }\r\n    }\r\n    if (this.collidableElements.length < 1) {\r\n      for (let i = 0; i < children.length; i++) {\r\n        let child = children[i]\r\n        if (!(child instanceof HTMLElement)) continue;\r\n        this.findNestedCollidableElements(child);\r\n      }\r\n    }\r\n  }\r\n\r\n  private setPointerEvents(isEnable: boolean) {\r\n    let css = isEnable ? 'auto' : 'none';\r\n    this.collidableElements.forEach(element => element.style.pointerEvents = css);\r\n  }\r\n\r\n  private setAnimatedTransition(isEnable: boolean) {\r\n    if (!this.input) return;\r\n    this.input.target.style.transition = isEnable ? 'transform 132ms linear' : '';\r\n  }\r\n\r\n  private shouldTransition(object: TabletopObject): boolean {\r\n    return object.location.x !== this.posX || object.location.y !== this.posY || object.posZ !== this.posZ;\r\n  }\r\n\r\n  private stopTransition() {\r\n    this.input.target.style.transform = window.getComputedStyle(this.input.target).transform;\r\n  }\r\n\r\n  private updateTransformCss() {\r\n    if (!this.input) return;\r\n    let css = this.transformCssOffset + ' translateX(' + this.posX + 'px) translateY(' + this.posY + 'px) translateZ(' + this.posZ + 'px)';\r\n    this.input.target.style.transform = css;\r\n  }\r\n\r\n  private setCollidableLayer(isCollidable: boolean) {\r\n    // todo\r\n    let isEnable = isCollidable;\r\n    for (let layerName in MovableDirective.layerHash) {\r\n      if (-1 < this.colideLayers.indexOf(layerName)) {\r\n        isEnable = this.input.isGrabbing ? isCollidable : true;\r\n      } else {\r\n        isEnable = !isCollidable;\r\n      }\r\n      MovableDirective.layerHash[layerName].forEach(movable => {\r\n        if (movable === this || movable.input.isGrabbing) return;\r\n        movable.setPointerEvents(isEnable);\r\n      });\r\n    }\r\n  }\r\n\r\n  private register() {\r\n    if (!(this.layerName in MovableDirective.layerHash)) MovableDirective.layerHash[this.layerName] = [];\r\n    let index = MovableDirective.layerHash[this.layerName].indexOf(this);\r\n    if (index < 0) MovableDirective.layerHash[this.layerName].push(this);\r\n  }\r\n\r\n  private unregister() {\r\n    if (!(this.layerName in MovableDirective.layerHash)) return;\r\n    let index = MovableDirective.layerHash[this.layerName].indexOf(this);\r\n    if (-1 < index) MovableDirective.layerHash[this.layerName].splice(index, 1);\r\n  }\r\n}\r\n","import { ImageFile } from './core/file-storage/image-file';\r\nimport { ImageStorage } from './core/file-storage/image-storage';\r\nimport { SyncObject, SyncVar } from './core/synchronize-object/decorator';\r\nimport { GameObject, ObjectContext } from './core/synchronize-object/game-object';\r\nimport { ObjectStore } from './core/synchronize-object/object-store';\r\nimport { EventSystem, Network } from './core/system';\r\n\r\ntype UserId = string;\r\ntype PeerId = string;\r\ntype ObjectIdentifier = string;\r\n\r\n@SyncObject('PeerCursor')\r\nexport class PeerCursor extends GameObject {\r\n  @SyncVar() userId: UserId = '';\r\n  @SyncVar() peerId: PeerId = '';\r\n  @SyncVar() name: string = '';\r\n  @SyncVar() imageIdentifier: string = '';\r\n\r\n  static myCursor: PeerCursor = null;\r\n  private static userIdMap: Map<UserId, ObjectIdentifier> = new Map();\r\n  private static peerIdMap: Map<PeerId, ObjectIdentifier> = new Map();\r\n  chatColorCode: string[]  = [\"#000000\",\"#FF0000\",\"#0099FF\"];\r\n\r\n  \r\n  private _diceImageType: string = \"\";\r\n  private _diceImageIndex: number = -1;\r\n  \r\n  get diceImageType(): string { return this._diceImageType; }\r\n  get diceImageIndex(): number { return this._diceImageIndex; }\r\n\r\n  set diceImageType( type:string ){ this._diceImageType = type ; }\r\n  set diceImageIndex( index: number ){ this._diceImageIndex = index; }\r\n  \r\n  get diceImageIdentifier(): string { \r\n    if( this.diceImageType != \"\"){\r\n      return this.diceImageType + \"_dice\" + \"[\" + this.diceImageIndex.toString().padStart(2,'0') + \"]\"; \r\n    }else{\r\n      return \"\";\r\n    }\r\n  }\r\n\r\n  \r\n\r\n  get isMine(): boolean { return (PeerCursor.myCursor && PeerCursor.myCursor === this); }\r\n  get image(): ImageFile { return ImageStorage.instance.get(this.imageIdentifier); }\r\n\r\n  // GameObject Lifecycle\r\n  onStoreAdded() {\r\n    super.onStoreAdded();\r\n    if (!this.isMine) {\r\n      EventSystem.register(this)\r\n        .on('DISCONNECT_PEER', -1000, event => {\r\n          if (event.data.peerId !== this.peerId) return;\r\n          PeerCursor.userIdMap.delete(this.userId);\r\n          PeerCursor.peerIdMap.delete(this.peerId);\r\n          ObjectStore.instance.remove(this);\r\n        });\r\n    }\r\n  }\r\n\r\n  // GameObject Lifecycle\r\n  onStoreRemoved() {\r\n    super.onStoreRemoved();\r\n    EventSystem.unregister(this);\r\n    PeerCursor.userIdMap.delete(this.userId);\r\n    PeerCursor.peerIdMap.delete(this.peerId);\r\n  }\r\n\r\n  static findByUserId(userId: UserId): PeerCursor {\r\n    return this.find(PeerCursor.userIdMap, userId, true);\r\n  }\r\n\r\n  static findByPeerId(peerId: PeerId): PeerCursor {\r\n    return this.find(PeerCursor.peerIdMap, peerId, false);\r\n  }\r\n\r\n  private static find(map: Map<string, string>, key: string, isUserId: boolean): PeerCursor {\r\n    let identifier = map.get(key);\r\n    if (identifier != null && ObjectStore.instance.get(identifier)) return ObjectStore.instance.get<PeerCursor>(identifier);\r\n    let cursors = ObjectStore.instance.getObjects<PeerCursor>(PeerCursor);\r\n    for (let cursor of cursors) {\r\n      let id = isUserId ? cursor.userId : cursor.peerId;\r\n      if (id === key) {\r\n        map.set(id, cursor.identifier);\r\n        return cursor;\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n\r\n  static createMyCursor(): PeerCursor {\r\n    if (PeerCursor.myCursor) {\r\n      console.warn('It is already created.');\r\n      return PeerCursor.myCursor;\r\n    }\r\n    PeerCursor.myCursor = new PeerCursor();\r\n    PeerCursor.myCursor.peerId = Network.peerId;\r\n    PeerCursor.myCursor.initialize();\r\n    return PeerCursor.myCursor;\r\n  }\r\n\r\n  // override\r\n  apply(context: ObjectContext) {\r\n    let userId = context.syncData['userId'];\r\n    let peerId = context.syncData['peerId'];\r\n    if (userId !== this.userId) {\r\n      PeerCursor.userIdMap.set(userId, this.identifier);\r\n      PeerCursor.userIdMap.delete(this.userId);\r\n    }\r\n    if (peerId !== this.peerId) {\r\n      PeerCursor.peerIdMap.set(peerId, this.identifier);\r\n      PeerCursor.peerIdMap.delete(this.peerId);\r\n    }\r\n    super.apply(context);\r\n  }\r\n\r\n  isPeerAUdon(): boolean {\r\n    return /u.*d.*o.*n/ig.exec(this.peerId) != null;\r\n  }\r\n}\r\n","import { Component, ElementRef, EventEmitter, Input, NgZone, OnDestroy, OnInit, Output, ViewChild } from '@angular/core';\r\nimport GameSystemClass from 'bcdice/lib/game_system';\r\nimport { ChatMessage } from '@udonarium/chat-message';\r\nimport { ImageFile } from '@udonarium/core/file-storage/image-file';\r\nimport { ObjectStore } from '@udonarium/core/synchronize-object/object-store';\r\nimport { EventSystem, Network } from '@udonarium/core/system';\r\nimport { PeerContext } from '@udonarium/core/system/network/peer-context';\r\nimport { ResettableTimeout } from '@udonarium/core/system/util/resettable-timeout';\r\nimport { DiceBot } from '@udonarium/dice-bot';\r\nimport { GameCharacter } from '@udonarium/game-character';\r\nimport { PeerCursor } from '@udonarium/peer-cursor';\r\nimport { TextViewComponent } from 'component/text-view/text-view.component';\r\nimport { BatchService } from 'service/batch.service';\r\nimport { ChatColorSettingComponent } from 'component/chat-color-setting/chat-color-setting.component';\r\n\r\nimport { ChatMessageService } from 'service/chat-message.service';\r\nimport { PanelOption, PanelService } from 'service/panel.service';\r\nimport { PointerDeviceService } from 'service/pointer-device.service';\r\n\r\nimport { ImageStorage } from '@udonarium/core/file-storage/image-storage';\r\n\r\n@Component({\r\n  selector: 'chat-input',\r\n  templateUrl: './chat-input.component.html',\r\n  styleUrls: ['./chat-input.component.css']\r\n})\r\nexport class ChatInputComponent implements OnInit, OnDestroy {\r\n  @ViewChild('textArea', { static: true }) textAreaElementRef: ElementRef;\r\n\r\n  @Input() onlyCharacters: boolean = false;\r\n  @Input() chatTabidentifier: string = '';\r\n\r\n  @Input('gameType') _gameType: string = '';\r\n  @Output() gameTypeChange = new EventEmitter<string>();\r\n  get gameType(): string { return this._gameType };\r\n  set gameType(gameType: string) { this._gameType = gameType; this.gameTypeChange.emit(gameType); }\r\n\r\n  @Input('sendFrom') _sendFrom: string = this.myPeer ? this.myPeer.identifier : '';\r\n  @Output() sendFromChange = new EventEmitter<string>();\r\n  get sendFrom(): string { return this._sendFrom };\r\n  set sendFrom(sendFrom: string) { this._sendFrom = sendFrom; this.sendFromChange.emit(sendFrom); }\r\n\r\n  @Input('sendTo') _sendTo: string = '';\r\n  @Output() sendToChange = new EventEmitter<string>();\r\n  get sendTo(): string { return this._sendTo };\r\n  set sendTo(sendTo: string) { this._sendTo = sendTo; this.sendToChange.emit(sendTo); }\r\n\r\n  @Input('text') _text: string = '';\r\n  @Output() textChange = new EventEmitter<string>();\r\n  get text(): string { return this._text };\r\n  set text(text: string) { this._text = text; this.textChange.emit(text); }\r\n\r\n  @Output() chat = new EventEmitter<{ text: string, gameSystem: GameSystemClass, sendFrom: string, sendTo: string ,tachieNum: number ,messColor: string}>();\r\n\r\n  @Output() tabSwitch = new EventEmitter<number>();\r\n\r\n  get tachieNum(): number {\r\n    let object = ObjectStore.instance.get(this.sendFrom);\r\n    if (object instanceof GameCharacter) {\r\n      return object.selectedTachieNum;\r\n    }\r\n    return 0;\r\n  }\r\n  \r\n  set tachieNum(num:  number){ \r\n    let object = ObjectStore.instance.get(this.sendFrom);\r\n    if (object instanceof GameCharacter) {\r\n      object.selectedTachieNum = num;\r\n    }\r\n  }\r\n\r\n  get isDirect(): boolean { return this.sendTo != null && this.sendTo.length ? true : false }\r\n  gameHelp: string = '';\r\n  loadDiceName: string = '';\r\n\r\n  colorSelectNo_ = 0;\r\n\r\n//  @Input() isChatWindow: boolean = false;\r\n  get isGameCharacter():boolean{\r\n    let object = ObjectStore.instance.get(this.sendFrom);\r\n    if (object instanceof GameCharacter) {    \r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  get colorSelectNo(){\r\n    return this.colorSelectNo_;\r\n  }\r\n\r\n  set colorSelectNo( num : number ){\r\n    if( num < 0){\r\n      this.colorSelectNo_ = 0;\r\n    }else if( num > 2){\r\n      this.colorSelectNo_ = 2;\r\n    }else{\r\n      this.colorSelectNo_ = num ;\r\n    }\r\n  }\r\n  \r\n  get colorSelectorBoxBorder_0(){\r\n    if( 0 == this.colorSelectNo ) return '3px';\r\n    return '1px';\r\n  }\r\n\r\n  get colorSelectorBoxBorder_1(){\r\n    if( 1 == this.colorSelectNo ) return '3px';\r\n    return '1px';\r\n  }\r\n\r\n  get colorSelectorBoxBorder_2(){\r\n    if( 2 == this.colorSelectNo ) return '3px';\r\n    return '1px';\r\n  }\r\n  \r\n  get colorSelectorRadius_0(){\r\n    if( 0 == this.colorSelectNo ) return '9px';\r\n    return '0px';\r\n  }\r\n\r\n  get colorSelectorRadius_1(){\r\n    if( 1 == this.colorSelectNo ) return '9px';\r\n    return '0px';\r\n  }\r\n\r\n  get colorSelectorRadius_2(){\r\n    if( 2 == this.colorSelectNo ) return '9px';\r\n    return '0px';\r\n  }\r\n  \r\n  charactorChatColor(num){\r\n    let object = ObjectStore.instance.get(this.sendFrom);\r\n    if (object instanceof GameCharacter) {\r\n      return object.chatColorCode[num];\r\n    }else{\r\n      return '#000000';\r\n    }\r\n  }\r\n\r\n  get selectChatColor(){\r\n    let object = ObjectStore.instance.get(this.sendFrom);\r\n    if (object instanceof GameCharacter) {\r\n      return this.charactorChatColor(this.colorSelectNo);\r\n    }else{\r\n      return this.playerChatColor(this.colorSelectNo);\r\n    }\r\n  }\r\n  \r\n  \r\n  get charactorChatColor_0(){\r\n    return this.charactorChatColor(0);\r\n  }\r\n\r\n  get charactorChatColor_1(){\r\n    return this.charactorChatColor(1);\r\n  }\r\n\r\n  get charactorChatColor_2(){\r\n    return this.charactorChatColor(2);\r\n  }\r\n  \r\n  playerChatColor(num){\r\n    return this.myPeer.chatColorCode[num];\r\n  }\r\n  \r\n  get playerChatColor_0(){\r\n    return this.playerChatColor(0);\r\n  }\r\n\r\n  get playerChatColor_1(){\r\n    return this.playerChatColor(1);\r\n  }\r\n\r\n  get playerChatColor_2(){\r\n    return this.playerChatColor(2);\r\n  }\r\n  \r\n\r\n  setColorNum( num : number ){\r\n    this.colorSelectNo = num ;\r\n  }\r\n\r\n  get selectCharacterTachie(){\r\n    let object = ObjectStore.instance.get(this.sendFrom);\r\n    if (object instanceof GameCharacter) {\r\n      if( object.imageDataElement.children.length  > this.tachieNum){\r\n        return  object.imageDataElement.children[this.tachieNum];\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n  \r\n  get selectCharacterTachieNum(){\r\n    let object = ObjectStore.instance.get(this.sendFrom);\r\n    if (object instanceof GameCharacter) {\r\n      return  object.imageDataElement.children.length;\r\n    } else if (object instanceof PeerCursor) {\r\n      return 0;\r\n    }\r\n    return 0;\r\n  }\r\n\r\n  get imageFile(): ImageFile {\r\n    \r\n    if( this.selectCharacterTachie ){\r\n      let image:ImageFile = ImageStorage.instance.get(<string>this.selectCharacterTachie.value);\r\n      return image ? image : ImageFile.Empty;\r\n    }\r\n\r\n    let object = ObjectStore.instance.get(this.sendFrom);\r\n    let image: ImageFile = null;\r\n    if (object instanceof GameCharacter) {\r\n      image = object.imageFile;\r\n    } else if (object instanceof PeerCursor) {\r\n      image = object.image;\r\n    }\r\n    return image ? image : ImageFile.Empty;\r\n  }\r\n\r\n  private shouldUpdateCharacterList: boolean = true;\r\n  private _gameCharacters: GameCharacter[] = [];\r\n  get gameCharacters(): GameCharacter[] {\r\n    if (this.shouldUpdateCharacterList) {\r\n      this.shouldUpdateCharacterList = false;\r\n      this._gameCharacters = ObjectStore.instance\r\n        .getObjects<GameCharacter>(GameCharacter)\r\n        .filter(character => this.allowsChat(character));\r\n    }\r\n    return this._gameCharacters;\r\n  }\r\n\r\n  private writingEventInterval: NodeJS.Timer = null;\r\n  private previousWritingLength: number = 0;\r\n  writingPeers: Map<string, ResettableTimeout> = new Map();\r\n  writingPeerNames: string[] = [];\r\n\r\n  get diceBotInfos() { return DiceBot.diceBotInfos }\r\n  get myPeer(): PeerCursor { return PeerCursor.myCursor; }\r\n  get otherPeers(): PeerCursor[] { return ObjectStore.instance.getObjects(PeerCursor); }\r\n\r\n  private calcFitHeightInterval: NodeJS.Timer = null;\r\n\r\n  constructor(\r\n    private ngZone: NgZone,\r\n    public chatMessageService: ChatMessageService,\r\n    private batchService: BatchService,\r\n    private panelService: PanelService,\r\n    private pointerDeviceService: PointerDeviceService\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    EventSystem.register(this)\r\n      .on('MESSAGE_ADDED', event => {\r\n        if (event.data.tabIdentifier !== this.chatTabidentifier) return;\r\n        let message = ObjectStore.instance.get<ChatMessage>(event.data.messageIdentifier);\r\n        let peerCursor = ObjectStore.instance.getObjects<PeerCursor>(PeerCursor).find(obj => obj.userId === message.from);\r\n        let sendFrom = peerCursor ? peerCursor.peerId : '?';\r\n        if (this.writingPeers.has(sendFrom)) {\r\n          this.writingPeers.get(sendFrom).stop();\r\n          this.writingPeers.delete(sendFrom);\r\n          this.updateWritingPeerNames();\r\n        }\r\n      })\r\n      .on('UPDATE_GAME_OBJECT', -1000, event => {\r\n        if (event.data.aliasName !== GameCharacter.aliasName) return;\r\n        this.shouldUpdateCharacterList = true;\r\n        if (event.data.identifier !== this.sendFrom) return;\r\n        let gameCharacter = ObjectStore.instance.get<GameCharacter>(event.data.identifier);\r\n        if (gameCharacter && !this.allowsChat(gameCharacter)) {\r\n          if (0 < this.gameCharacters.length && this.onlyCharacters) {\r\n            this.sendFrom = this.gameCharacters[0].identifier;\r\n          } else {\r\n            this.sendFrom = this.myPeer.identifier;\r\n          }\r\n        }\r\n      })\r\n      .on('DISCONNECT_PEER', event => {\r\n        let object = ObjectStore.instance.get(this.sendTo);\r\n        if (object instanceof PeerCursor && object.peerId === event.data.peerId) {\r\n          this.sendTo = '';\r\n        }\r\n      })\r\n      .on<string>('WRITING_A_MESSAGE', event => {\r\n        if (event.isSendFromSelf || event.data !== this.chatTabidentifier) return;\r\n        if (!this.writingPeers.has(event.sendFrom)) {\r\n          this.writingPeers.set(event.sendFrom, new ResettableTimeout(() => {\r\n            this.writingPeers.delete(event.sendFrom);\r\n            this.updateWritingPeerNames();\r\n            this.ngZone.run(() => { });\r\n          }, 2000));\r\n        }\r\n        this.writingPeers.get(event.sendFrom).reset();\r\n        this.updateWritingPeerNames();\r\n        this.batchService.add(() => this.ngZone.run(() => { }), this);\r\n      });\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    EventSystem.unregister(this);\r\n    this.batchService.remove(this);\r\n  }\r\n\r\n  private updateWritingPeerNames() {\r\n    this.writingPeerNames = Array.from(this.writingPeers.keys()).map(peerId => {\r\n      let peer = PeerCursor.findByPeerId(peerId);\r\n      return peer ? peer.name : '';\r\n    });\r\n  }\r\n\r\n  onInput() {\r\n    if (this.writingEventInterval === null && this.previousWritingLength <= this.text.length) {\r\n      let sendTo: string = null;\r\n      if (this.isDirect) {\r\n        let object = ObjectStore.instance.get(this.sendTo);\r\n        if (object instanceof PeerCursor) {\r\n          let peer = PeerContext.parse(object.peerId);\r\n          if (peer) sendTo = peer.peerId;\r\n        }\r\n      }\r\n      EventSystem.call('WRITING_A_MESSAGE', this.chatTabidentifier, sendTo);\r\n      this.writingEventInterval = setTimeout(() => {\r\n        this.writingEventInterval = null;\r\n      }, 200);\r\n    }\r\n    this.previousWritingLength = this.text.length;\r\n    this.calcFitHeight();\r\n  }\r\n\r\n\r\n  private history: string[] = new Array();\r\n  private currentHistoryIndex: number = -1;\r\n  private static MAX_HISTORY_NUM = 1000;\r\n\r\n  moveHistory(event: KeyboardEvent, direction: number) {\r\n    if (event) event.preventDefault();\r\n\r\n    if (direction < 0 && this.currentHistoryIndex < 0) {\r\n      this.currentHistoryIndex = this.history.length - 1;\r\n    } else if (direction > 0 && this.currentHistoryIndex >= this.history.length - 1) {\r\n      this.currentHistoryIndex = -1;\r\n    } else {\r\n      this.currentHistoryIndex = this.currentHistoryIndex + direction;\r\n    }\r\n\r\n    let histText: string;\r\n    if (this.currentHistoryIndex < 0) {\r\n      histText = '';\r\n    } else {\r\n      histText = this.history[this.currentHistoryIndex];\r\n    }\r\n\r\n    this.text = histText;\r\n    this.previousWritingLength = this.text.length;\r\n    this.kickCalcFitHeight();\r\n  }\r\n\r\n  tabSwitchAction(event: KeyboardEvent, direction: number) {\r\n    if (event) event.preventDefault();\r\n    this.tabSwitch.emit(direction);\r\n  }\r\n\r\n  sendChat(event: KeyboardEvent) {\r\n    if (event) event.preventDefault();\r\n\r\n    if (!this.text.length) return;\r\n    if (event && event.keyCode !== 13) return;\r\n\r\n    if (!this.sendFrom.length) this.sendFrom = this.myPeer.identifier;\r\n\r\n    if (this.history.length >= ChatInputComponent.MAX_HISTORY_NUM) {\r\n      this.history.shift();\r\n    }\r\n    this.history.push(this.text);\r\n    this.currentHistoryIndex = -1;\r\n\r\n    const message = {\r\n      text: this.text, sendFrom: this.sendFrom, sendTo: this.sendTo,\r\n      tachieNum : this.tachieNum, messColor : this.selectChatColor,\r\n    }\r\n    DiceBot.loadGameSystemAsync(this.gameType).then((gameSystem) => {\r\n      this.chat.emit({\r\n        text: message.text, gameSystem: gameSystem, sendFrom: message.sendFrom,\r\n        sendTo: message.sendTo, tachieNum : message.tachieNum, messColor : message.messColor,\r\n      });\r\n    });\r\n    this.text = '';\r\n    this.previousWritingLength = this.text.length;\r\n    this.kickCalcFitHeight();\r\n  }\r\n\r\n  kickCalcFitHeight() {\r\n    if (this.calcFitHeightInterval == null) {\r\n      this.calcFitHeightInterval = setTimeout(() => {\r\n        this.calcFitHeightInterval = null;\r\n        this.calcFitHeight();\r\n      }, 0)\r\n    }\r\n  }\r\n\r\n  calcFitHeight() {\r\n    let textArea: HTMLTextAreaElement = this.textAreaElementRef.nativeElement;\r\n    textArea.style.height = '';\r\n    if (textArea.scrollHeight >= textArea.offsetHeight) {\r\n      textArea.style.height = textArea.scrollHeight + 'px';\r\n    }\r\n  }\r\n\r\n  loadDiceBot(gameType: string) {\r\n    console.log('onChangeGameType ready');\r\n    DiceBot.getHelpMessage(gameType).then(help => {\r\n      console.log('onChangeGameType done\\n' + help);\r\n    });\r\n  }\r\n\r\n  isGameTypeInList(): boolean{\r\n    for( let diceBotInfo of this.diceBotInfos ){\r\n      if( diceBotInfo.id === this.gameType ){ return true ;}\r\n    }\r\n    return false;\r\n  }\r\n\r\n  showDicebotHelp() {\r\n    DiceBot.getHelpMessage(this.gameType).then(help => {\r\n      this.gameHelp = help;\r\n\r\n      let gameName: string = 'DiceBot';\r\n      for (let diceBotInfo of DiceBot.diceBotInfos) {\r\n        if (diceBotInfo.id === this.gameType) {\r\n          gameName = 'DiceBot<' + diceBotInfo.name + '＞'\r\n        }\r\n      }\r\n      gameName += '的說明';\r\n\r\n      let coordinate = this.pointerDeviceService.pointers[0];\r\n      let option: PanelOption = { left: coordinate.x, top: coordinate.y, width: 600, height: 500 };\r\n      let textView = this.panelService.open(TextViewComponent, option);\r\n      textView.title = gameName;\r\n      textView.text =\r\n        '【擲骰BOT】你可以在聊天中進行自定義的擲骰\\n'\r\n        + '例如輸入）2D6+1　攻撃！\\n'\r\n        + '會輸出）   2D6+1　攻撃！\\n'\r\n        + '　　　　  diceBot: (2d6) → 7\\n'\r\n        + '如上面一樣,在骰子數字後方隔空白位打字,就可以進行發言。\\n'\r\n        + '以下還有其他例子\\n'\r\n        + '3D6+1>=9 ：骰出3d6+1然後判定是否大過等於9\\n'\r\n        + '1D100<=50 ：進行D100 50%的判定\\n'\r\n        + '3U6[5] ：擲出3D6，每骰出一粒5或以上的話會有獎勵骰一粒(可以無限獎勵)\\n'\r\n        + '3B6 ：和3D6一樣,但不進行合併計算\\n'\r\n        + '10B6>=4 ：擲出10d6,計算其中有多少粒骰大過等於4\\n'\r\n        + '(8/2)D(4+6)<=(5*3)：骰子粒數和條件可以用算式\\n'\r\n        + 'C(10-4*3/2+2)：C(計算式）也可以只進行數字計算\\n'\r\n        + 'Choice[a,b,c]：列出不同的元素去選擇。例如隨機選出攻擊對象\\n'\r\n        + 'S3D6 ： 進行暗骰，其他人看不到結果\\n'\r\n        + '3D6/2 ： 骰出的點數除2 (捨棄小數點)。RoundUp /2U、四捨五入 /2R。\\n'\r\n        + 'D66 ： 投擲D66。順序根據遊戲設定。D66N：正常、D66S：升序。\\n'\r\n        + '===================================\\n'\r\n        + this.gameHelp;\r\n    });\r\n  }\r\n\r\n  shoeColorSetting(){\r\n    let object = ObjectStore.instance.get(this.sendFrom);\r\n    if (object instanceof GameCharacter) {\r\n      \r\n      let coordinate = this.pointerDeviceService.pointers[0];\r\n      let title = '色設定';\r\n      if (object.name.length) title += ' - ' + object.name;\r\n//クロームのカラーピッカーがスペースが足りないと黒表示されることへの暫定対処　20210321\r\n//      let option: PanelOption = { title: title, left: coordinate.x + 50, top: coordinate.y - 150, width: 300, height: 120 };\r\n        let option: PanelOption = { title: title, left: coordinate.x + 50, top: coordinate.y - 300, width: 300, height: 170 };\r\n      let component = this.panelService.open<ChatColorSettingComponent>(ChatColorSettingComponent, option);\r\n      component.tabletopObject = object;\r\n    }else{\r\n      let coordinate = this.pointerDeviceService.pointers[0];\r\n      let title = '色設定';\r\n//      let option: PanelOption = { title: title, left: coordinate.x + 50, top: coordinate.y - 150, width: 300, height: 120 };\r\n        let option: PanelOption = { title: title, left: coordinate.x + 50, top: coordinate.y - 300, width: 300, height: 170 };\r\n      let component = this.panelService.open<ChatColorSettingComponent>(ChatColorSettingComponent, option);\r\n      component.tabletopObject = null;\r\n    }\r\n  }\r\n\r\n\r\n  private allowsChat(gameCharacter: GameCharacter): boolean {\r\n    switch (gameCharacter.location.name) {\r\n      case 'table':\r\n        return !gameCharacter.nonTalkFlag;\r\n      case this.myPeer.peerId:\r\n        if( gameCharacter.nonTalkFlag ) return false;\r\n        return true;\r\n      case 'graveyard':\r\n        return false;\r\n      default:\r\n        if( gameCharacter.nonTalkFlag ) return false;\r\n        for (const conn of Network.peerContexts) {\r\n          if (conn.isOpen && gameCharacter.location.name === conn.peerId) {\r\n            return false;\r\n          }\r\n        }\r\n        return true;\r\n    }\r\n  }\r\n}\r\n","<div class=\"table\" [ngClass]=\"{ 'direct-message': isDirect }\">\r\n  <div class=\"table-cell imagebox\">\r\n    <img *ngIf=\"0 < imageFile.url.length\" class=\"image\" [src]=\"imageFile.url | safe: 'resourceUrl'\" />\r\n  </div>\r\n  <div class=\"table-cell\" style=\"width:100%\">\r\n    <div>\r\n      <ng-select class=\"ud-select\" style=\"width: 12em;\" [(ngModel)]=\"sendFrom\" [clearable]=\"false\">\r\n        <ng-option *ngIf=\"!onlyCharacters\" [value]=\"myPeer?.identifier\">{{myPeer?.name}}（自己）</ng-option>\r\n        <ng-option *ngFor=\"let gameCharacter of gameCharacters\" [value]=\"gameCharacter.identifier\">{{gameCharacter.name}}\r\n        </ng-option>\r\n      </ng-select> ＞\r\n      <ng-select class=\"ud-select\" style=\"width: 10em;\" [(ngModel)]=\"sendTo\" [clearable]=\"false\">\r\n        <ng-option [value]=\"''\">所有人</ng-option>\r\n        <ng-option *ngFor=\"let peer of otherPeers\" [value]=\"peer.identifier\">{{peer.name}}\r\n          <ng-container *ngIf=\"peer === myPeer\">（自己）</ng-container>\r\n        </ng-option>\r\n      </ng-select>\r\n      <ng-select class=\"ud-select\" style=\"width: 15em; margin-left:.1em;\" (change)=\"loadDiceBot($event)\" [(ngModel)]=\"gameType\"\r\n        [ngModelOptions]=\"{standalone: true}\" [clearable]=\"false\">\r\n        <ng-option *ngFor=\"let diceBotInfo of diceBotInfos\" [value]=\"diceBotInfo.id\">{{diceBotInfo.name}}</ng-option>\r\n      </ng-select>\r\n      <button (click)=\"showDicebotHelp()\">?</button>\r\n    </div>\r\n    <div>\r\n      <ng-container *ngIf=\"!isGameTypeInList()\">\r\n        <font size=\"1.5\" color=\"#FF0000\">※找不到Dice bot（可能是其他版本），請重新選擇。</font>\r\n      </ng-container>\r\n    </div>\r\n    <div class=\"table\">\r\n      <div class=\"table-cell color-box-tag\">\r\n        <ng-container *ngIf=\"!isGameCharacter\">\r\n          <div class=\"color\" (click)=\"setColorNum(0);\"\r\n          [ngStyle]=\"{'background-color': playerChatColor_0 ,'border':'solid ' + colorSelectorBoxBorder_0 + ' #666666' , 'border-radius': colorSelectorRadius_0 }\"\r\n          ></div>\r\n          <div class=\"color\" (click)=\"setColorNum(1);\"\r\n          [ngStyle]=\"{'background-color': playerChatColor_1 ,'border':'solid ' + colorSelectorBoxBorder_1 + ' #666666' , 'border-radius': colorSelectorRadius_1 }\"\r\n          ></div>\r\n          <div class=\"color\" (click)=\"setColorNum(2);\"\r\n          [ngStyle]=\"{'background-color': playerChatColor_2 ,'border':'solid ' + colorSelectorBoxBorder_2 + ' #666666' , 'border-radius': colorSelectorRadius_2 }\"\r\n          ></div>\r\n        </ng-container>\r\n        <ng-container *ngIf=\"isGameCharacter\">\r\n          <div class=\"color\" (click)=\"setColorNum(0);\"\r\n          [ngStyle]=\"{'background-color': charactorChatColor_0 ,'border':'solid ' + colorSelectorBoxBorder_0 + ' #666666' , 'border-radius': colorSelectorRadius_0 }\"\r\n          ></div>\r\n          <div class=\"color\" (click)=\"setColorNum(1);\"\r\n          [ngStyle]=\"{'background-color': charactorChatColor_1 ,'border':'solid ' + colorSelectorBoxBorder_1 + ' #666666' , 'border-radius': colorSelectorRadius_1 }\"\r\n          ></div>\r\n          <div class=\"color\" (click)=\"setColorNum(2);\"\r\n          [ngStyle]=\"{'background-color': charactorChatColor_2 ,'border':'solid ' + colorSelectorBoxBorder_2 + ' #666666' , 'border-radius': colorSelectorRadius_2 }\"\r\n          ></div>\r\n        </ng-container>\r\n      </div>\r\n      <div class=\"table-cell color-setting-tag\">\r\n        <button class=\"color-setting small-font\" (click)=\"shoeColorSetting();\"><i class=\"material-icons small-font\">settings</i>色設定</button>\r\n      </div>\r\n\r\n<!-- 立ち絵ここから-->\r\n      <div class=\"table-cell tachie-tag \">\r\n        <ng-container *ngIf=\"1 > selectCharacterTachieNum\">\r\n          <input type=\"range\" [style]=\"'font-size: 0.8em; min-width: 1em; width:' + (10) + 'em; --min: 0; --max: ' + 0 + '; --val:' + 10 +';' | safe: 'style'\"\r\n          min=\"0\" max=\"0\" [(ngModel)]=\"tachieNum\" />\r\n           0/0 立繪\r\n        </ng-container>\r\n        <ng-container *ngIf=\"1 <= selectCharacterTachieNum\">\r\n          <input type=\"range\" [style]=\"'font-size: 0.8em; min-width: 1em; width:' + (10) + 'em; --min: 0; --max: ' + 0 + '; --val:' + 10 +';' | safe: 'style'\"\r\n          min=\"0\" max=\"{{selectCharacterTachieNum -1}}\" [(ngModel)]=\"tachieNum\" />\r\n         {{tachieNum}}/{{selectCharacterTachieNum - 1}} 立繪\r\n<!--          <ng-container *ngIf=\"1 <= selectCharacterTachieNum\">-->\r\n            <ng-container *ngIf=\"selectCharacterTachie\"> \r\n              <ng-container *ngIf=\"selectCharacterTachie.currentValue.length > 0\"> \r\n                {{selectCharacterTachie.currentValue}}\r\n              </ng-container>\r\n            </ng-container>\r\n<!--          </ng-container>-->\r\n        </ng-container>\r\n      </div>\r\n      <div class=\"table-cell\">\r\n      </div>\r\n\r\n    </div>\r\n<!-- ここまで-->\r\n    <div>\r\n      <form>\r\n        <textarea class=\"chat-input\" placeholder=\"Enter:送出 Shift+Enter:換行 Ctrl+上下:履歴 Ctrl+左右:切換分頁\" [(ngModel)]=\"text\"\r\n          [ngModelOptions]=\"{standalone: true}\" (input)=\"onInput()\" (keydown.enter)=\"sendChat($event)\"\r\n          (keydown.control.arrowup)=\"moveHistory($event, -1)\" (keydown.control.arrowdown)=\"moveHistory($event, 1)\"\r\n          (keydown.control.arrowleft)=\"tabSwitchAction($event, -1)\" (keydown.control.arrowright)=\"tabSwitchAction($event, 1)\"\r\n          #textArea></textarea>\r\n        <button type=\"submit\" (click)=\"sendChat(null)\">SEND</button>\r\n      </form>\r\n    </div>\r\n    <div class=\"writing-info\">\r\n      <ng-container *ngIf=\"0 < writingPeerNames.length\">\r\n        <span *ngFor=\"let peerName of writingPeerNames; index as i\" style=\"font-weight: bold;\">{{peerName}}<span\r\n            *ngIf=\"writingPeerNames.length !== (i + 1)\">, </span></span>\r\n        <span> 輸入中...</span>\r\n      </ng-container>\r\n    </div>\r\n  </div>\r\n</div>\r\n","import { Component, ElementRef,   ChangeDetectorRef, EventEmitter, Input, NgZone, OnDestroy, OnInit, Output, ViewChild } from '@angular/core';\r\n\r\nimport { ChatMessage } from '@udonarium/chat-message';\r\nimport { ChatTab } from '@udonarium/chat-tab';\r\nimport { ObjectStore } from '@udonarium/core/synchronize-object/object-store';\r\nimport { EventSystem } from '@udonarium/core/system';\r\nimport { PeerCursor } from '@udonarium/peer-cursor';\r\nimport { ChatMessageSettingComponent } from 'component/chat-message-setting/chat-message-setting.component';\r\nimport { ChatMessageService } from 'service/chat-message.service';\r\nimport { PanelOption, PanelService } from 'service/panel.service';\r\nimport { PointerDeviceService } from 'service/pointer-device.service';\r\n\r\nimport { ImageFile } from '@udonarium/core/file-storage/image-file';\r\nimport { ImageStorage } from '@udonarium/core/file-storage/image-storage';\r\n\r\nimport { ChatTabList } from '@udonarium/chat-tab-list';\r\n\r\n@Component({\r\n  selector: 'chat-tachie-img',\r\n  templateUrl: './chat-tachie-img.component.html',\r\n  styleUrls: ['./chat-tachie-img.component.css']\r\n})\r\nexport class ChatTachieImageComponent implements OnInit, OnDestroy{\r\n\r\n  @Input() chatTabidentifier: string = '';\r\n  @Input() isTilteTop = false;\r\n  @Input() dispByMouse = false;\r\n\r\n  @ViewChild('tachieArea', { read: ElementRef }) private tachieArea: ElementRef;  \r\n  private _tachieAreaWidth = 0;\r\n  \r\n  \r\n  get chatTab(): ChatTab { return ObjectStore.instance.get<ChatTab>(this.chatTabidentifier); }\r\n\r\n  get tachieY_Pos():number{ \r\n    if( !this.chatTabList.isTachieInWindow ){\r\n      return - this.chatTabList.tachieHeightValue - 26 ;\r\n    }else{\r\n      return 0;\r\n    }\r\n  }\r\n\r\n  get tachieAreaWidth():number{ \r\n    return this._tachieAreaWidth;\r\n  }\r\n\r\n  get chatTabList(): ChatTabList { return ObjectStore.instance.get<ChatTabList>('ChatTabList'); }\r\n  \r\n  get dispFlag():boolean{\r\n    \r\n    if( this.isTilteTop && !this.chatTabList.isTachieInWindow ) return true;\r\n    if( !this.isTilteTop && this.chatTabList.isTachieInWindow ) return true;\r\n    return false;\r\n  }\r\n  \r\n  get isTachieDispMode(){\r\n    if( this.chatTabList.isKeepTachieOutWindow ){\r\n      return this.dispFlag ; \r\n    }else{\r\n      return this.dispFlag && this.dispByMouse ;\r\n    }\r\n  }\r\n  \r\n  tachieAreaHeight( pos: number) : number {\r\n    if( this.chatTab ){\r\n      if( this.chatTab.tachieDispFlag ){\r\n        if( this.chatTab.tachiePosIsDisp( pos ) ){\r\n          return this.chatTabList.tachieHeightValue;\r\n        }\r\n      }\r\n    }\r\n    return 0;\r\n  }\r\n  \r\n  //\r\n  get tachieAreaHeight00() : number { return this.tachieAreaHeight(0); }\r\n  get tachieAreaHeight01() : number { return this.tachieAreaHeight(1); }\r\n  get tachieAreaHeight02() : number { return this.tachieAreaHeight(2); }\r\n  get tachieAreaHeight03() : number { return this.tachieAreaHeight(3); }\r\n  get tachieAreaHeight04() : number { return this.tachieAreaHeight(4); }\r\n  get tachieAreaHeight05() : number { return this.tachieAreaHeight(5); }\r\n  get tachieAreaHeight06() : number { return this.tachieAreaHeight(6); }\r\n  get tachieAreaHeight07() : number { return this.tachieAreaHeight(7); }\r\n  get tachieAreaHeight08() : number { return this.tachieAreaHeight(8); }\r\n  get tachieAreaHeight09() : number { return this.tachieAreaHeight(9); }\r\n  get tachieAreaHeight10() : number { return this.tachieAreaHeight(10); }\r\n  get tachieAreaHeight11() : number { return this.tachieAreaHeight(11); }\r\n  \r\n  private timerId;\r\n  \r\n//立ち絵表示幅取得\r\n  ngAfterViewInit() {\r\n    this._tachieAreaWidth = this.tachieArea.nativeElement.offsetWidth;\r\n    this.changeDetectionRef.detectChanges();\r\n  }  \r\n\r\n  ngAfterViewChecked() {\r\n    this._tachieAreaWidth = this.tachieArea.nativeElement.offsetWidth;\r\n    this.changeDetectionRef.detectChanges();\r\n  }  \r\n\r\n//z-index取得\r\n  private _zindexOffset = 10;\r\n\r\n  get zIndex_00(): number { return this.chatTab.tachieZindex(0) + this._zindexOffset; }\r\n  get zIndex_01(): number { return this.chatTab.tachieZindex(1) + this._zindexOffset; }\r\n  get zIndex_02(): number { return this.chatTab.tachieZindex(2) + this._zindexOffset; }\r\n  get zIndex_03(): number { return this.chatTab.tachieZindex(3) + this._zindexOffset; }\r\n  get zIndex_04(): number { return this.chatTab.tachieZindex(4) + this._zindexOffset; }\r\n  get zIndex_05(): number { return this.chatTab.tachieZindex(5) + this._zindexOffset; }\r\n  get zIndex_06(): number { return this.chatTab.tachieZindex(6) + this._zindexOffset; }\r\n  get zIndex_07(): number { return this.chatTab.tachieZindex(7) + this._zindexOffset; }\r\n  get zIndex_08(): number { return this.chatTab.tachieZindex(8) + this._zindexOffset; }\r\n  get zIndex_09(): number { return this.chatTab.tachieZindex(9) + this._zindexOffset; }\r\n  get zIndex_10(): number { return this.chatTab.tachieZindex(10) + this._zindexOffset; }\r\n  get zIndex_11(): number { return this.chatTab.tachieZindex(11) + this._zindexOffset; }\r\n\r\n  private _opacity = 0.66\r\n\r\n  get opacity_00(): number { if( this.chatTab.tachieZindex(0) == 11 ){return 1;}else{ return this._opacity ;}  }\r\n  get opacity_01(): number { if( this.chatTab.tachieZindex(1) == 11 ){return 1;}else{ return this._opacity ;}  }\r\n  get opacity_02(): number { if( this.chatTab.tachieZindex(2) == 11 ){return 1;}else{ return this._opacity ;}  }\r\n  get opacity_03(): number { if( this.chatTab.tachieZindex(3) == 11 ){return 1;}else{ return this._opacity ;}  }\r\n  get opacity_04(): number { if( this.chatTab.tachieZindex(4) == 11 ){return 1;}else{ return this._opacity ;}  }\r\n  get opacity_05(): number { if( this.chatTab.tachieZindex(5) == 11 ){return 1;}else{ return this._opacity ;}  }\r\n  get opacity_06(): number { if( this.chatTab.tachieZindex(6) == 11 ){return 1;}else{ return this._opacity ;}  }\r\n  get opacity_07(): number { if( this.chatTab.tachieZindex(7) == 11 ){return 1;}else{ return this._opacity ;}  }\r\n  get opacity_08(): number { if( this.chatTab.tachieZindex(8) == 11 ){return 1;}else{ return this._opacity ;}  }\r\n  get opacity_09(): number { if( this.chatTab.tachieZindex(9) == 11 ){return 1;}else{ return this._opacity ;}  }\r\n  get opacity_10(): number { if( this.chatTab.tachieZindex(10) == 11 ){return 1;}else{ return this._opacity ;}  }\r\n  get opacity_11(): number { if( this.chatTab.tachieZindex(11) == 11 ){return 1;}else{ return this._opacity ;}  }\r\n\r\n\r\n//この実装は後でどうにかしたい\r\n  get imageFileUrl_00(): string { \r\n     if( ! this.chatTab.imageIdentifier )return '';\r\n     let image:ImageFile = ImageStorage.instance.get(this.chatTab.imageIdentifier[0]);\r\n     if (image) return image.url;\r\n     return '';\r\n  }\r\n\r\n  get imageFileUrl_01(): string { \r\n  if( ! this.chatTab.imageIdentifier )return '';\r\n     let image:ImageFile = ImageStorage.instance.get(this.chatTab.imageIdentifier[1]);\r\n     if (image) return image.url;\r\n     return '';\r\n  }\r\n\r\n  get imageFileUrl_02(): string { \r\n  if( ! this.chatTab.imageIdentifier )return '';\r\n     let image:ImageFile = ImageStorage.instance.get(this.chatTab.imageIdentifier[2]);\r\n     if (image) return image.url;\r\n     return '';\r\n  }\r\n\r\n  get imageFileUrl_03(): string { \r\n     if( ! this.chatTab.imageIdentifier )return '';\r\n     let image:ImageFile = ImageStorage.instance.get(this.chatTab.imageIdentifier[3]);\r\n     if (image) return image.url;\r\n     return '';\r\n  }\r\n\r\n  get imageFileUrl_04(): string { \r\n     if( ! this.chatTab.imageIdentifier )return '';\r\n     let image:ImageFile = ImageStorage.instance.get(this.chatTab.imageIdentifier[4]);\r\n     if (image) return image.url;\r\n     return '';\r\n  }\r\n\r\n  get imageFileUrl_05(): string { \r\n     if( ! this.chatTab.imageIdentifier )return '';\r\n     let image:ImageFile = ImageStorage.instance.get(this.chatTab.imageIdentifier[5]);\r\n     if (image) return image.url;\r\n     return '';\r\n  }\r\n\r\n  get imageFileUrl_06(): string { \r\n     if( ! this.chatTab.imageIdentifier )return '';\r\n     let image:ImageFile = ImageStorage.instance.get(this.chatTab.imageIdentifier[6]);\r\n     if (image) return image.url;\r\n     return '';\r\n  }\r\n\r\n  get imageFileUrl_07(): string { \r\n     if( ! this.chatTab.imageIdentifier )return '';\r\n     let image:ImageFile = ImageStorage.instance.get(this.chatTab.imageIdentifier[7]);\r\n     if (image) return image.url;\r\n     return '';\r\n  }\r\n\r\n  get imageFileUrl_08(): string { \r\n     if( ! this.chatTab.imageIdentifier )return '';\r\n     let image:ImageFile = ImageStorage.instance.get(this.chatTab.imageIdentifier[8]);\r\n     if (image) return image.url;\r\n     return '';\r\n  }\r\n\r\n  get imageFileUrl_09(): string { \r\n     if( ! this.chatTab.imageIdentifier )return '';\r\n     let image:ImageFile = ImageStorage.instance.get(this.chatTab.imageIdentifier[9]);\r\n     if (image) return image.url;\r\n     return '';\r\n  }\r\n\r\n  get imageFileUrl_10(): string { \r\n     if( ! this.chatTab.imageIdentifier )return '';\r\n     let image:ImageFile = ImageStorage.instance.get(this.chatTab.imageIdentifier[10]);\r\n     if (image) return image.url;\r\n     return '';\r\n  }\r\n\r\n  get imageFileUrl_11(): string { \r\n     if( ! this.chatTab.imageIdentifier )return '';\r\n     let image:ImageFile = ImageStorage.instance.get(this.chatTab.imageIdentifier[11]);\r\n     if (image) return image.url;\r\n     return '';\r\n  }\r\n\r\n  tachieClick( pos : number ){\r\n    console.log(\"tachieClick\" + pos);\r\n    this.chatTab.tachiePosHide(pos);\r\n  }\r\n\r\n  constructor(\r\n    public chatMessageService: ChatMessageService,\r\n    private changeDetectionRef: ChangeDetectorRef,\r\n    private panelService: PanelService,\r\n    private pointerDeviceService: PointerDeviceService\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    EventSystem.unregister(this);\r\n  }\r\n\r\n  trackByChatTab(index: number, chatTab: ChatTab) {\r\n    return chatTab.identifier;\r\n  }\r\n}\r\n","<div>\r\n  <div id=\"tachie-component_\">\r\n    <div class=\"tachie-image-box\" #tachieArea style=\"height:0px,width:100%\">\r\n      <ng-container *ngIf=\"chatTab\" >\r\n        <ng-container *ngIf=\"chatTab.tachieDispFlag\" >\r\n          <ng-container *ngIf=\"isTachieDispMode\" >\r\n\r\n          <img class=\"tachie-image pos00\" #tachie00 *ngIf=\"0 < imageFileUrl_00.length\" \r\n          [src]=\"imageFileUrl_00 | safe: 'resourceUrl'\"  \r\n          [ngStyle]=\"{'transform': 'translateX(  calc( (' + tachieAreaWidth  + 'px - 100% ) / 11 * 0  ) ) translateY( ' + tachieY_Pos + 'px)',\r\n          'z-index': zIndex_00 , 'opacity': opacity_00 ,'height': tachieAreaHeight00 + 'px'}\" \r\n          (mousedown)=\"tachieClick(0)\"/>\r\n\r\n          <img class=\"tachie-image pos01\" #tachie01 *ngIf=\"0 < imageFileUrl_01.length\" \r\n          [src]=\"imageFileUrl_01 | safe: 'resourceUrl'\"  \r\n          [ngStyle]=\"{'transform': 'translateX(  calc( (' + tachieAreaWidth  + 'px - 100% ) / 11 * 1  ) ) translateY(' + tachieY_Pos + 'px)',\r\n          'z-index': zIndex_01 , 'opacity': opacity_01 ,'height': tachieAreaHeight01 + 'px'}\" \r\n          (mousedown)=\"tachieClick(1)\"/>\r\n\r\n          <img class=\"tachie-image pos02\" #tachie02 *ngIf=\"0 < imageFileUrl_02.length\" \r\n          [src]=\"imageFileUrl_02 | safe: 'resourceUrl'\"  \r\n          [ngStyle]=\"{'transform': 'translateX(  calc( (' + tachieAreaWidth  + 'px - 100% ) / 11 * 2  ) ) translateY(' + tachieY_Pos + 'px)',\r\n          'z-index': zIndex_02 , 'opacity': opacity_02 ,'height': tachieAreaHeight02 + 'px'}\" \r\n          (mousedown)=\"tachieClick(2)\"/>\r\n\r\n          <img class=\"tachie-image pos03\" #tachie03 *ngIf=\"0 < imageFileUrl_03.length\" \r\n          [src]=\"imageFileUrl_03 | safe: 'resourceUrl'\"  \r\n          [ngStyle]=\"{'transform': 'translateX(  calc( (' + tachieAreaWidth  + 'px - 100% ) / 11 * 3  ) ) translateY(' + tachieY_Pos + 'px)',\r\n          'z-index': zIndex_03 , 'opacity': opacity_03 ,'height': tachieAreaHeight03 + 'px'}\" \r\n          (mousedown)=\"tachieClick(3)\"/>\r\n\r\n          <img class=\"tachie-image pos04\" #tachie04 *ngIf=\"0 < imageFileUrl_04.length\" \r\n          [src]=\"imageFileUrl_04 | safe: 'resourceUrl'\"  \r\n          [ngStyle]=\"{'transform': 'translateX(  calc( (' + tachieAreaWidth  + 'px - 100% ) / 11 * 4  ) ) translateY(' + tachieY_Pos + 'px)',\r\n          'z-index': zIndex_04 , 'opacity': opacity_04 ,'height': tachieAreaHeight04 + 'px'}\" \r\n          (mousedown)=\"tachieClick(4)\"/>\r\n\r\n          <img class=\"tachie-image pos05\" #tachie05 *ngIf=\"0 < imageFileUrl_05.length\" \r\n          [src]=\"imageFileUrl_05 | safe: 'resourceUrl'\"  \r\n          [ngStyle]=\"{'transform': 'translateX(  calc( (' + tachieAreaWidth  + 'px - 100% ) / 11 * 5  ) ) translateY(' + tachieY_Pos + 'px)',\r\n          'z-index': zIndex_05 , 'opacity': opacity_05 ,'height': tachieAreaHeight05 + 'px'}\" \r\n          (mousedown)=\"tachieClick(5)\"/>\r\n\r\n          <img class=\"tachie-image pos06\" #tachie06 *ngIf=\"0 < imageFileUrl_06.length\" \r\n          [src]=\"imageFileUrl_06 | safe: 'resourceUrl'\"  \r\n          [ngStyle]=\"{'transform': 'translateX(  calc( (' + tachieAreaWidth  + 'px - 100% ) / 11 * 6  ) ) translateY(' + tachieY_Pos + 'px)',\r\n          'z-index': zIndex_06 , 'opacity': opacity_06 ,'height': tachieAreaHeight06 + 'px'}\" \r\n          (mousedown)=\"tachieClick(6)\"/>\r\n\r\n          <img class=\"tachie-image pos07\" #tachie07 *ngIf=\"0 < imageFileUrl_07.length\" \r\n          [src]=\"imageFileUrl_07 | safe: 'resourceUrl'\"  \r\n          [ngStyle]=\"{'transform': 'translateX(  calc( (' + tachieAreaWidth  + 'px - 100% ) / 11 * 7  ) ) translateY(' + tachieY_Pos + 'px)',\r\n          'z-index': zIndex_07 , 'opacity': opacity_07 ,'height': tachieAreaHeight07 + 'px'}\" \r\n          (mousedown)=\"tachieClick(7)\"/>\r\n\r\n          <img class=\"tachie-image pos08\" #tachie08 *ngIf=\"0 < imageFileUrl_08.length\" [src]=\"imageFileUrl_08 | safe: 'resourceUrl'\"  \r\n          [ngStyle]=\"{'transform': 'translateX(  calc( (' + tachieAreaWidth  + 'px - 100% ) / 11 * 8  ) ) translateY(' + tachieY_Pos + 'px)',\r\n          'z-index': zIndex_08 , 'opacity': opacity_08 ,'height': tachieAreaHeight08 + 'px'}\" \r\n          (mousedown)=\"tachieClick(8)\"/>\r\n\r\n          <img class=\"tachie-image pos09\" #tachie09 *ngIf=\"0 < imageFileUrl_09.length\" [src]=\"imageFileUrl_09 | safe: 'resourceUrl'\"  \r\n          [ngStyle]=\"{'transform': 'translateX(  calc( (' + tachieAreaWidth  + 'px - 100% ) / 11 * 9  ) ) translateY(' + tachieY_Pos + 'px)',\r\n          'z-index': zIndex_09 , 'opacity': opacity_09 ,'height': tachieAreaHeight09 + 'px'}\" \r\n          (mousedown)=\"tachieClick(9)\"/>\r\n\r\n          <img class=\"tachie-image pos10\" #tachie10 *ngIf=\"0 < imageFileUrl_10.length\" [src]=\"imageFileUrl_10 | safe: 'resourceUrl'\"  \r\n          [ngStyle]=\"{'transform': 'translateX(  calc( (' + tachieAreaWidth  + 'px - 100% ) / 11 * 10  ) ) translateY(' + tachieY_Pos + 'px)',\r\n          'z-index': zIndex_10 , 'opacity': opacity_10 ,'height': tachieAreaHeight10 + 'px'}\" \r\n          (mousedown)=\"tachieClick(10)\"/>\r\n\r\n          <img class=\"tachie-image pos11\" #tachie11 *ngIf=\"0 < imageFileUrl_11.length\" [src]=\"imageFileUrl_11 | safe: 'resourceUrl'\"  \r\n          [ngStyle]=\"{'transform': 'translateX(  calc( (' + tachieAreaWidth  + 'px - 100% ) / 11 * 11  ) ) translateY(' + tachieY_Pos + 'px)',\r\n          'z-index': zIndex_11 , 'opacity': opacity_11 ,'height': tachieAreaHeight11 + 'px'}\" \r\n          (mousedown)=\"tachieClick(11)\"/>\r\n\r\n          </ng-container>\r\n        </ng-container>\r\n      </ng-container>\r\n\r\n    </div>\r\n  </div>\r\n</div>\r\n","import { AfterViewInit, Component, OnDestroy, OnInit, ViewContainerRef } from '@angular/core';\r\n\r\nimport { ImageFile } from '@udonarium/core/file-storage/image-file';\r\nimport { ImageStorage } from '@udonarium/core/file-storage/image-storage';\r\nimport { ObjectSerializer } from '@udonarium/core/synchronize-object/object-serializer';\r\nimport { ObjectStore } from '@udonarium/core/synchronize-object/object-store';\r\nimport { EventSystem } from '@udonarium/core/system';\r\nimport { GameCharacter } from '@udonarium/game-character';\r\nimport { GameTableMask } from '@udonarium/game-table-mask';\r\nimport { TableSelecter } from '@udonarium/table-selecter';\r\n\r\nimport { FileSelecterComponent } from 'component/file-selecter/file-selecter.component';\r\nimport { ModalService } from 'service/modal.service';\r\nimport { PanelService } from 'service/panel.service';\r\n\r\n@Component({\r\n  selector: 'game-character-generator',\r\n  templateUrl: './game-character-generator.component.html',\r\n  styleUrls: ['./game-character-generator.component.css']\r\n})\r\nexport class GameCharacterGeneratorComponent implements OnInit, OnDestroy, AfterViewInit {\r\n\r\n  name: string = \"角色\";\r\n  size: number = 1;\r\n  xml: string = '';\r\n\r\n  minSize: number = 1;\r\n  maxSize: number = 20;\r\n\r\n  tableBackgroundImage: ImageFile = ImageFile.createEmpty('null');\r\n\r\n  constructor(\r\n    private viewContainerRef: ViewContainerRef,\r\n    private modalService: ModalService,\r\n    private panelService: PanelService\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    Promise.resolve().then(() => this.panelService.title = '角色產生器');\r\n    EventSystem.register(this)\r\n      .on('SELECT_FILE', event => {\r\n        console.log('SELECT_FILE GameCharacterGeneratorComponent ' + event.data.fileIdentifier);\r\n\r\n        let fileIdentifier: string = event.data.fileIdentifier;\r\n\r\n        let file: ImageFile = ImageStorage.instance.get(fileIdentifier);\r\n        if (file) this.tableBackgroundImage = file;\r\n\r\n      });\r\n  }\r\n\r\n  ngAfterViewInit() { }\r\n\r\n  ngOnDestroy() {\r\n    EventSystem.unregister(this);\r\n  }\r\n\r\n  createGameCharacter() {\r\n    GameCharacter.create(this.name, this.size, this.tableBackgroundImage.identifier);\r\n  }\r\n  createGameTableMask() {\r\n    let viewTable = ObjectStore.instance.get<TableSelecter>('tableSelecter').viewTable;\r\n    if (!viewTable) return;\r\n    let tableMask = GameTableMask.create('地圖迷霧', 5, 5, 100);\r\n    viewTable.appendChild(tableMask);\r\n  }\r\n\r\n  createGameCharacterForXML(xml: string) {\r\n    ObjectSerializer.instance.parseXml(xml);\r\n  }\r\n\r\n  openModal() {\r\n    this.modalService.open(FileSelecterComponent);\r\n  }\r\n}\r\n","<button (click)=\"openModal()\">選擇圖片</button>\r\n<div>\r\n  <img height=\"120\" [src]=\"tableBackgroundImage.url | safe: 'resourceUrl'\">\r\n</div>\r\n<input [(ngModel)]=\"name\" placeholder=\"Name\" name=\"name\" />\r\n<div>\r\n  <div>\r\n    <input [(ngModel)]=\"size\" type=\"range\" min=\"{{minSize}}\" max=\"{{maxSize}}\" name=\"size\" /> Size : <input [(ngModel)]=\"size\"\r\n      type=\"number\" min=\"{{minSize}}\" max=\"{{maxSize}}\">\r\n  </div>\r\n  <button (click)=\"createGameCharacter()\">新增角色</button>\r\n  <button (click)=\"createGameTableMask()\">新增地圖迷霧</button>\r\n  <!--\r\n  <div>\r\n    <button (click)=\"createGameCharacterForXML(xml)\">↓のXMLからキャラクターを作る</button>\r\n    <textarea style=\"width:100%; height:5em; resize: none;\" [(ngModel)]=\"xml\" placeholder=\"XML\"></textarea>\r\n  </div>\r\n  -->\r\n</div>","import { defineSyncAttribute, defineSyncObject, defineSyncVariable } from './decorator-core';\r\nimport { GameObject } from './game-object';\r\nimport { Type } from './object-factory';\r\nimport { ObjectNode } from './object-node';\r\n\r\nexport function SyncObject(alias: string) {\r\n  return <T extends GameObject>(constructor: Type<T>) => {\r\n    defineSyncObject(alias)(constructor);\r\n  }\r\n}\r\n\r\nexport function SyncVar() {\r\n  return <T extends GameObject>(target: T, key: string | symbol) => {\r\n    if (target instanceof ObjectNode) {\r\n      defineSyncAttribute()(target, key);\r\n    } else {\r\n      defineSyncVariable()(target, key);\r\n    }\r\n  }\r\n}\r\n","import { Card } from './card';\r\nimport { ImageFile } from './core/file-storage/image-file';\r\nimport { SyncObject, SyncVar } from './core/synchronize-object/decorator';\r\nimport { ObjectNode } from './core/synchronize-object/object-node';\r\nimport { EventSystem } from './core/system';\r\nimport { DataElement } from './data-element';\r\nimport { PeerCursor } from './peer-cursor';\r\nimport { TabletopObject } from './tabletop-object';\r\nimport { moveToTopmost } from './tabletop-object-util';\r\n\r\n@SyncObject('card-stack')\r\nexport class CardStack extends TabletopObject {\r\n  @SyncVar() rotate: number = 0;\r\n  @SyncVar() zindex: number = 0;\r\n  @SyncVar() owner: string = '';\r\n  @SyncVar() isShowTotal: boolean = true;\r\n\r\n  get name(): string { return this.getCommonValue('name', ''); }\r\n  get ownerName(): string {\r\n    let object = PeerCursor.findByUserId(this.owner);\r\n    return object ? object.name : '';\r\n  }\r\n  get hasOwner(): boolean { return 0 < this.owner.length; }\r\n\r\n  private get cardRoot(): ObjectNode {\r\n    for (let node of this.children) {\r\n      if (node.getAttribute('name') === 'cardRoot') return node;\r\n    }\r\n    return null;\r\n  }\r\n  get cards(): Card[] { return this.cardRoot ? <Card[]>this.cardRoot.children : []; }\r\n  get topCard(): Card { return this.isEmpty ? null : this.cards[0]; }\r\n  get isEmpty(): boolean { return this.cards.length < 1 }\r\n  get imageFile(): ImageFile { return this.topCard ? this.topCard.imageFile : null; }\r\n\r\n  // ObjectNode Lifecycle\r\n  onChildRemoved(child: ObjectNode) {\r\n    super.onChildRemoved(child);\r\n    if (child instanceof Card) {\r\n      EventSystem.trigger('CARD_STACK_DECREASED', { cardStackIdentifier: this.identifier, cardIdentifier: child.identifier });\r\n    }\r\n  }\r\n\r\n  shuffle(): Card[] {\r\n    if (!this.cardRoot) return;\r\n    let length = this.cardRoot.children.length;\r\n    for (let card of this.cards) {\r\n      card.index = Math.random() * length;\r\n      card.rotate = Math.floor(Math.random() * 2) * 180;\r\n      this.setSamePositionFor(card);\r\n    }\r\n    return this.cards;\r\n  }\r\n\r\n  drawCard(): Card {\r\n    let card = this.topCard ? this.cardRoot.removeChild(this.topCard) : null;\r\n    if (card) {\r\n      card.rotate += this.rotate;\r\n      if (360 < card.rotate) card.rotate -= 360;\r\n      this.setSamePositionFor(card);\r\n      card.toTopmost();\r\n    }\r\n    return card;\r\n  }\r\n\r\n  drawCardAll(): Card[] {\r\n    let cards = this.cards;\r\n    for (let card of cards) {\r\n      this.cardRoot.removeChild(card);\r\n      card.rotate += this.rotate;\r\n      this.setSamePositionFor(card);\r\n      if (360 < card.rotate) card.rotate -= 360;\r\n    }\r\n    return cards;\r\n  }\r\n\r\n  faceUp() {\r\n    if (this.topCard) {\r\n      this.topCard.faceUp();\r\n      this.setSamePositionFor(this.topCard);\r\n    }\r\n  }\r\n\r\n  faceDown() {\r\n    if (this.topCard) {\r\n      this.topCard.faceDown();\r\n      this.setSamePositionFor(this.topCard);\r\n    }\r\n  }\r\n\r\n  faceUpAll() {\r\n    for (let card of this.cards) {\r\n      card.faceUp();\r\n      this.setSamePositionFor(card);\r\n    }\r\n  }\r\n\r\n  faceDownAll() {\r\n    for (let card of this.cards) {\r\n      card.faceDown();\r\n      this.setSamePositionFor(card);\r\n    }\r\n  }\r\n\r\n  uprightAll() {\r\n    for (let card of this.cards) {\r\n      card.rotate = 0;\r\n      this.setSamePositionFor(card);\r\n    }\r\n  }\r\n\r\n  unifyCardsSize(size: number): void {\r\n    for (const card of this.cards) {\r\n      if (card.size !== size) card.size = size;\r\n    }\r\n  }\r\n\r\n  putOnTop(card: Card): Card {\r\n    if (!this.cardRoot) return null;\r\n    if (!this.topCard) return this.putOnBottom(card);\r\n    card.owner = '';\r\n    card.zindex = 0;\r\n    let delta = Math.abs(card.rotate - this.rotate);\r\n    if (180 < delta) delta = 360 - delta;\r\n    card.rotate = delta <= 90 ? 0 : 180;\r\n    this.setSamePositionFor(card);\r\n    return this.cardRoot.insertBefore(card, this.topCard);\r\n  }\r\n\r\n  putOnBottom(card: Card): Card {\r\n    if (!this.cardRoot) return null;\r\n    card.owner = '';\r\n    card.zindex = 0;\r\n    let delta = Math.abs(card.rotate - this.rotate);\r\n    if (180 < delta) delta = 360 - delta;\r\n    card.rotate = delta <= 90 ? 0 : 180;\r\n    this.setSamePositionFor(card);\r\n    return this.cardRoot.appendChild(card);\r\n  }\r\n\r\n  toTopmost() {\r\n    moveToTopmost(this, ['card']);\r\n  }\r\n\r\n  // override\r\n  setLocation(location: string) {\r\n    super.setLocation(location);\r\n    let cards = this.cards;\r\n    for (let card of cards) card.setLocation(location);\r\n  }\r\n\r\n  private setSamePositionFor(card: Card) {\r\n    card.location.name = this.location.name;\r\n    card.location.x = this.location.x;\r\n    card.location.y = this.location.y;\r\n    card.posZ = this.posZ;\r\n  }\r\n\r\n  static create(name: string, identifier?: string): CardStack {\r\n    let object: CardStack = null;\r\n\r\n    if (identifier) {\r\n      object = new CardStack(identifier);\r\n    } else {\r\n      object = new CardStack();\r\n    }\r\n    object.createDataElements();\r\n    object.commonDataElement.appendChild(DataElement.create('name', name, {}, 'name_' + object.identifier));\r\n    let cardRoot = new ObjectNode('cardRoot_' + object.identifier);\r\n    cardRoot.setAttribute('name', 'cardRoot');\r\n    cardRoot.initialize();\r\n    object.appendChild(cardRoot);\r\n    object.initialize();\r\n\r\n    return object;\r\n  }\r\n}","import { Event } from './event';\r\nimport { Callback, EventMap, Observer } from './observer';\r\nimport { Subject } from './subject';\r\n\r\nexport class Listener implements Observer {\r\n  private _subject: Subject;\r\n  private _key: any;\r\n  private _eventName: string;\r\n  private _priority: number = 0;\r\n  private _callback: Callback<any>;\r\n  private _isOnlyOnce: boolean;\r\n  private _isRegistered: boolean = false;\r\n\r\n  get subject() { return this._subject; }\r\n  get key() { return this._key; }\r\n  get eventName() { return this._eventName; }\r\n  get priority() { return this._priority; }\r\n  get callback() { return this._callback; }\r\n  get isOnlyOnce() { return this._isOnlyOnce; }\r\n  get isRegistered() { return this._isRegistered; }\r\n\r\n  constructor(subject: Subject, key: any) {\r\n    this._subject = subject;\r\n    this._key = key;\r\n  }\r\n\r\n  on<K extends keyof EventMap>(eventName: K, callback: Callback<EventMap[K]>): Listener\r\n  on<K extends keyof EventMap>(eventName: K, priority: number, callback: Callback<EventMap[K]>): Listener\r\n  on(eventName: string, callback: Callback<any>): Listener\r\n  on(eventName: string, priority: number, callback: Callback<any>): Listener\r\n  on<T>(eventName: string, callback: Callback<T>): Listener\r\n  on<T>(eventName: string, priority: number, callback: Callback<T>): Listener\r\n  on(...args: any[]): Listener {\r\n    this._isOnlyOnce = false;\r\n    if (args.length === 2) {\r\n      return this.register(args[0], 0, args[1]);\r\n    } else {\r\n      return this.register(args[0], args[1], args[2]);\r\n    }\r\n  }\r\n\r\n  once<K extends keyof EventMap>(eventName: K, callback: Callback<EventMap[K]>): Listener\r\n  once<K extends keyof EventMap>(eventName: K, priority: number, callback: Callback<EventMap[K]>): Listener\r\n  once(eventName: string, callback: Callback<any>): Listener\r\n  once(eventName: string, priority: number, callback: Callback<any>): Listener\r\n  once<T>(eventName: string, callback: Callback<T>): Listener\r\n  once<T>(eventName: string, priority: number, callback: Callback<T>): Listener\r\n  once(...args: any[]): Listener {\r\n    let listener = this.on.apply(this, args);\r\n    this._isOnlyOnce = true;\r\n    return listener;\r\n  }\r\n\r\n  private register(eventName: string, priority: number, callback: Callback<any>): Listener {\r\n    if (this.isRegistered) this.unregister();\r\n    this._eventName = eventName ? eventName : '*';\r\n    this._priority = priority;\r\n    this._callback = callback;\r\n\r\n    this.subject.registerListener(this);\r\n    this._isRegistered = true;\r\n    return new Listener(this.subject, this.key);\r\n  }\r\n\r\n  unregister(): this {\r\n    this.subject.unregisterListener(this);\r\n    this._callback = null;\r\n    this._isRegistered = false;\r\n    return this;\r\n  }\r\n\r\n  trigger(event: Event<any>) {\r\n    if (this.callback && this.isRegistered) {\r\n      this.callback.apply(this.key, [event, this]);\r\n      if (this.isOnlyOnce) this.unregister();\r\n    }\r\n  }\r\n\r\n  isEqual(key: any, eventName: string, callback: Callback<any>) {\r\n    let matchTarget = (key == null || key === this.key);\r\n    let matchEventName = (eventName == null || eventName === this.eventName);\r\n    let matchCallback = (callback == null || callback === this.callback);\r\n\r\n    return matchTarget && matchEventName && matchCallback;\r\n  }\r\n}\r\n","import { AfterViewInit, Directive, ElementRef, EventEmitter, Input, NgZone, OnDestroy, Output } from '@angular/core';\r\nimport { EventSystem } from '@udonarium/core/system';\r\nimport { TabletopObject } from '@udonarium/tabletop-object';\r\nimport { BatchService } from 'service/batch.service';\r\nimport { CoordinateService } from 'service/coordinate.service';\r\nimport { PointerCoordinate, PointerDeviceService } from 'service/pointer-device.service';\r\n\r\nimport { InputHandler } from './input-handler';\r\n\r\nexport interface RotableTabletopObject extends TabletopObject {\r\n  rotate: number;\r\n}\r\n\r\nexport interface RotableOption {\r\n  readonly tabletopObject?: RotableTabletopObject;\r\n  readonly grabbingSelecter?: string;\r\n  readonly transformCssOffset?: string;\r\n}\r\n\r\n@Directive({\r\n  selector: '[appRotable]'\r\n})\r\nexport class RotableDirective implements AfterViewInit, OnDestroy {\r\n  protected tabletopObject: RotableTabletopObject;\r\n\r\n  private transformCssOffset: string = '';\r\n  private grabbingSelecter: string = '.rotate-grab';\r\n  @Input('rotable.option') set option(option: RotableOption) {\r\n    this.tabletopObject = option.tabletopObject != null ? option.tabletopObject : this.tabletopObject;\r\n    this.grabbingSelecter = option.grabbingSelecter != null ? option.grabbingSelecter : this.grabbingSelecter;\r\n    this.transformCssOffset = option.transformCssOffset != null ? option.transformCssOffset : this.transformCssOffset;\r\n  }\r\n  @Input('rotable.disable') isDisable: boolean = false;\r\n  @Output('rotable.onstart') onstart: EventEmitter<PointerEvent> = new EventEmitter();\r\n  @Output('rotable.ondragstart') ondragstart: EventEmitter<PointerEvent> = new EventEmitter();\r\n  @Output('rotable.ondrag') ondrag: EventEmitter<PointerEvent> = new EventEmitter();\r\n  @Output('rotable.ondragend') ondragend: EventEmitter<PointerEvent> = new EventEmitter();\r\n  @Output('rotable.onend') onend: EventEmitter<PointerEvent> = new EventEmitter();\r\n\r\n  private _rotate: number = 0;\r\n  get rotate(): number { return this._rotate; }\r\n  set rotate(rotate: number) { this._rotate = rotate; this.setUpdateTimer(); }\r\n  @Input('rotable.value') set value(value: number) { this._rotate = value; this.updateTransformCss(); }\r\n  @Output('rotable.valueChange') valueChange: EventEmitter<number> = new EventEmitter();\r\n\r\n  private get isAllowedToRotate(): boolean {\r\n    if (!this.grabbingElement || !this.input.target) return false;\r\n    if (this.grabbingSelecter.length < 1) return true;\r\n    let elements = this.input.target.querySelectorAll(this.grabbingSelecter);\r\n    let macth = false;\r\n    for (let i = 0; i < elements.length; i++) {\r\n      macth = elements[i].contains(this.grabbingElement);\r\n      if (macth) return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  private rotateOffset: number = 0;\r\n  private updateTimer: NodeJS.Timer = null;\r\n  private grabbingElement: HTMLElement = null;\r\n  private input: InputHandler = null;\r\n\r\n  constructor(\r\n    private ngZone: NgZone,\r\n    private elementRef: ElementRef,\r\n    private batchService: BatchService,\r\n    private pointerDeviceService: PointerDeviceService,\r\n    private coordinateService: CoordinateService,\r\n  ) { }\r\n\r\n  ngAfterViewInit() {\r\n    this.ngZone.runOutsideAngular(() => {\r\n      this.input = new InputHandler(this.elementRef.nativeElement);\r\n    });\r\n    this.input.onStart = this.onInputStart.bind(this);\r\n    this.input.onMove = this.onInputMove.bind(this);\r\n    this.input.onEnd = this.onInputEnd.bind(this);\r\n    this.input.onContextMenu = this.onContextMenu.bind(this);\r\n\r\n    if (this.tabletopObject) {\r\n      EventSystem.register(this)\r\n        .on('UPDATE_GAME_OBJECT', -1000, event => {\r\n          if ((event.isSendFromSelf && this.input.isGrabbing) || event.data.identifier !== this.tabletopObject.identifier || !this.shouldTransition(this.tabletopObject)) return;\r\n          this.batchService.add(() => {\r\n            if (this.input.isGrabbing) {\r\n              this.cancel();\r\n            } else {\r\n              this.setAnimatedTransition(true);\r\n            }\r\n            this.stopTransition();\r\n            this.setRotate(this.tabletopObject);\r\n          }, this);\r\n        });\r\n      this.setRotate(this.tabletopObject);\r\n    } else {\r\n      this.updateTransformCss();\r\n    }\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.cancel();\r\n    this.input.destroy();\r\n    EventSystem.unregister(this);\r\n    this.batchService.remove(this);\r\n  }\r\n\r\n  cancel() {\r\n    this.input.cancel();\r\n    this.grabbingElement = null;\r\n    this.setAnimatedTransition(true);\r\n  }\r\n\r\n  onInputStart(e: MouseEvent | TouchEvent) {\r\n    this.grabbingElement = e.target as HTMLElement;\r\n    if (this.isDisable || !this.isAllowedToRotate || (e as MouseEvent).button === 1 || (e as MouseEvent).button === 2) return this.cancel();\r\n    e.stopPropagation();\r\n    this.onstart.emit(e as PointerEvent);\r\n\r\n    let pointer = this.coordinateService.convertLocalToLocal(this.input.pointer, this.grabbingElement, this.input.target.parentElement);\r\n    this.rotateOffset = this.calcRotate(pointer, this.rotate);\r\n    this.setAnimatedTransition(false);\r\n  }\r\n\r\n  onInputMove(e: MouseEvent | TouchEvent) {\r\n    if (this.input.isGrabbing && !this.pointerDeviceService.isDragging) {\r\n      return this.cancel(); // todo\r\n    }\r\n    if (this.isDisable || !this.input.isGrabbing) return this.cancel();\r\n\r\n    if (e.cancelable) e.preventDefault();\r\n    e.stopPropagation();\r\n    let pointer3d = this.coordinateService.convertLocalToLocal(this.input.pointer, this.grabbingElement, this.input.target.parentElement);\r\n    let angle = this.calcRotate(pointer3d, this.rotateOffset);\r\n\r\n    if (!this.input.isDragging) this.ondragstart.emit(e as PointerEvent);\r\n    this.ondrag.emit(e as PointerEvent);\r\n    this.rotate = angle;\r\n  }\r\n\r\n  onInputEnd(e: MouseEvent | TouchEvent) {\r\n    if (this.isDisable) return this.cancel();\r\n    e.stopPropagation();\r\n    if (this.input.isDragging) this.ondragend.emit(e as PointerEvent);\r\n    this.cancel();\r\n    this.snapToPolygonal();\r\n    this.onend.emit(e as PointerEvent);\r\n  }\r\n\r\n  onContextMenu(e: MouseEvent | TouchEvent) {\r\n    if (this.isDisable) return this.cancel();\r\n    if (e.cancelable) e.preventDefault();\r\n    this.cancel();\r\n    this.snapToPolygonal();\r\n  }\r\n\r\n  private calcRotate(pointer: PointerCoordinate, rotateOffset: number): number {\r\n    let centerX = this.input.target.clientWidth / 2;\r\n    let centerY = this.input.target.clientHeight / 2;\r\n    let x = pointer.x - centerX;\r\n    let y = pointer.y - centerY;\r\n    let rad = Math.atan2(y, x);\r\n    return ((rad * 180 / Math.PI) - rotateOffset) % 360;\r\n  }\r\n\r\n  snapToPolygonal(polygonal: number = 24) {\r\n    if (polygonal <= 1) return;\r\n    this.rotate = this.rotate < 0 ? this.rotate - (180 / polygonal) : this.rotate + (180 / polygonal);\r\n    this.rotate -= (this.rotate) % (360 / polygonal);\r\n  }\r\n\r\n  private setUpdateTimer() {\r\n    if (this.updateTimer === null) {\r\n      this.updateTimer = setTimeout(() => {\r\n        this.valueChange.emit(this.rotate);\r\n        if (this.tabletopObject) this.tabletopObject.rotate = this.rotate;\r\n        this.updateTimer = null;\r\n      }, 66);\r\n    }\r\n    this.updateTransformCss();\r\n  }\r\n\r\n  private setRotate(object: RotableTabletopObject) {\r\n    if (object) this._rotate = object.rotate;\r\n    this.updateTransformCss();\r\n  }\r\n\r\n  private setAnimatedTransition(isEnable: boolean) {\r\n    if (!this.input) return;\r\n    this.input.target.style.transition = isEnable ? 'transform 132ms linear' : '';\r\n  }\r\n\r\n  private shouldTransition(object: RotableTabletopObject): boolean {\r\n    return object.rotate !== this.rotate;\r\n  }\r\n\r\n  private stopTransition() {\r\n    this.input.target.style.transform = window.getComputedStyle(this.input.target).transform;\r\n  }\r\n\r\n  private updateTransformCss() {\r\n    if (!this.input) return;\r\n    let css = this.transformCssOffset + ' rotateZ(' + this.rotate + 'deg)';\r\n    this.input.target.style.transform = css;\r\n  }\r\n}\r\n","import {\r\n  AfterViewInit,\r\n  ChangeDetectionStrategy,\r\n  ChangeDetectorRef,\r\n  Component,\r\n  ElementRef,\r\n  HostListener,\r\n  Input,\r\n  NgZone,\r\n  OnDestroy,\r\n  OnInit,\r\n} from '@angular/core';\r\nimport { ImageFile } from '@udonarium/core/file-storage/image-file';\r\nimport { ObjectNode } from '@udonarium/core/synchronize-object/object-node';\r\nimport { ObjectStore } from '@udonarium/core/synchronize-object/object-store';\r\nimport { EventSystem } from '@udonarium/core/system';\r\nimport { GameTableMask } from '@udonarium/game-table-mask';\r\nimport { PresetSound, SoundEffect } from '@udonarium/sound-effect';\r\nimport { GameCharacterSheetComponent } from 'component/game-character-sheet/game-character-sheet.component';\r\nimport { InputHandler } from 'directive/input-handler';\r\nimport { MovableOption } from 'directive/movable.directive';\r\nimport { ContextMenuSeparator, ContextMenuService } from 'service/context-menu.service';\r\nimport { CoordinateService } from 'service/coordinate.service';\r\nimport { PanelOption, PanelService } from 'service/panel.service';\r\nimport { PointerDeviceService } from 'service/pointer-device.service';\r\nimport { TabletopActionService } from 'service/tabletop-action.service';\r\n\r\n@Component({\r\n  selector: 'game-table-mask',\r\n  templateUrl: './game-table-mask.component.html',\r\n  styleUrls: ['./game-table-mask.component.css'],\r\n  changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class GameTableMaskComponent implements OnInit, OnDestroy, AfterViewInit {\r\n  @Input() gameTableMask: GameTableMask = null;\r\n  @Input() is3D: boolean = false;\r\n\r\n  get name(): string { return this.gameTableMask.name; }\r\n  get width(): number { return this.adjustMinBounds(this.gameTableMask.width); }\r\n  get height(): number { return this.adjustMinBounds(this.gameTableMask.height); }\r\n  get opacity(): number { return this.gameTableMask.opacity; }\r\n  get imageFile(): ImageFile { return this.gameTableMask.imageFile; }\r\n  get isLock(): boolean { return this.gameTableMask.isLock; }\r\n  set isLock(isLock: boolean) { this.gameTableMask.isLock = isLock; }\r\n\r\n  gridSize: number = 50;\r\n\r\n  movableOption: MovableOption = {};\r\n\r\n  private input: InputHandler = null;\r\n\r\n  constructor(\r\n    private ngZone: NgZone,\r\n    private tabletopActionService: TabletopActionService,\r\n    private contextMenuService: ContextMenuService,\r\n    private elementRef: ElementRef<HTMLElement>,\r\n    private panelService: PanelService,\r\n    private changeDetector: ChangeDetectorRef,\r\n    private pointerDeviceService: PointerDeviceService,\r\n    private coordinateService: CoordinateService,\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    EventSystem.register(this)\r\n      .on('UPDATE_GAME_OBJECT', -1000, event => {\r\n        let object = ObjectStore.instance.get(event.data.identifier);\r\n        if (!this.gameTableMask || !object) return;\r\n        if (this.gameTableMask === object || (object instanceof ObjectNode && this.gameTableMask.contains(object))) {\r\n          this.changeDetector.markForCheck();\r\n        }\r\n      })\r\n      .on('SYNCHRONIZE_FILE_LIST', event => {\r\n        this.changeDetector.markForCheck();\r\n      })\r\n      .on('UPDATE_FILE_RESOURE', -1000, event => {\r\n        this.changeDetector.markForCheck();\r\n      });\r\n    this.movableOption = {\r\n      tabletopObject: this.gameTableMask,\r\n      transformCssOffset: 'translateZ(0.15px)',\r\n      colideLayers: ['terrain']\r\n    };\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    this.ngZone.runOutsideAngular(() => {\r\n      this.input = new InputHandler(this.elementRef.nativeElement);\r\n    });\r\n    this.input.onStart = this.onInputStart.bind(this);\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.input.destroy();\r\n    EventSystem.unregister(this);\r\n  }\r\n\r\n  @HostListener('dragstart', ['$event'])\r\n  onDragstart(e) {\r\n    e.stopPropagation();\r\n    e.preventDefault();\r\n  }\r\n\r\n  onInputStart(e: any) {\r\n    this.input.cancel();\r\n\r\n    // TODO:もっと良い方法考える\r\n    if (this.isLock) {\r\n      EventSystem.trigger('DRAG_LOCKED_OBJECT', {});\r\n    }\r\n  }\r\n\r\n  @HostListener('contextmenu', ['$event'])\r\n  onContextMenu(e: Event) {\r\n    e.stopPropagation();\r\n    e.preventDefault();\r\n\r\n    if (!this.pointerDeviceService.isAllowedToOpenContextMenu) return;\r\n    let menuPosition = this.pointerDeviceService.pointers[0];\r\n    let objectPosition = this.coordinateService.calcTabletopLocalCoordinate();\r\n    this.contextMenuService.open(menuPosition, [\r\n      (this.isLock\r\n        ? {\r\n          name: '固定解除', action: () => {\r\n            this.isLock = false;\r\n            SoundEffect.play(PresetSound.unlock);\r\n          }\r\n        }\r\n        : {\r\n          name: '固定する', action: () => {\r\n            this.isLock = true;\r\n            SoundEffect.play(PresetSound.lock);\r\n          }\r\n        }\r\n      ),\r\n      ContextMenuSeparator,\r\n      { name: 'マップマスクを編集', action: () => { this.showDetail(this.gameTableMask); } },\r\n      {\r\n        name: 'コピーを作る', action: () => {\r\n          let cloneObject = this.gameTableMask.clone();\r\n          console.log('コピー', cloneObject);\r\n          cloneObject.location.x += this.gridSize;\r\n          cloneObject.location.y += this.gridSize;\r\n          cloneObject.isLock = false;\r\n          if (this.gameTableMask.parent) this.gameTableMask.parent.appendChild(cloneObject);\r\n          SoundEffect.play(PresetSound.cardPut);\r\n        }\r\n      },\r\n      {\r\n        name: '削除する', action: () => {\r\n          this.gameTableMask.destroy();\r\n          SoundEffect.play(PresetSound.sweep);\r\n        }\r\n      },\r\n      ContextMenuSeparator,\r\n      { name: 'オブジェクト作成', action: null, subActions: this.tabletopActionService.makeDefaultContextMenuActions(objectPosition) }\r\n    ], this.name);\r\n  }\r\n\r\n  onMove() {\r\n    SoundEffect.play(PresetSound.cardPick);\r\n  }\r\n\r\n  onMoved() {\r\n    SoundEffect.play(PresetSound.cardPut);\r\n  }\r\n\r\n  private adjustMinBounds(value: number, min: number = 0): number {\r\n    return value < min ? min : value;\r\n  }\r\n\r\n  private showDetail(gameObject: GameTableMask) {\r\n    let coordinate = this.pointerDeviceService.pointers[0];\r\n    let title = 'マップマスク設定';\r\n    if (gameObject.name.length) title += ' - ' + gameObject.name;\r\n    let option: PanelOption = { title: title, left: coordinate.x - 200, top: coordinate.y - 150, width: 400, height: 300 };\r\n    let component = this.panelService.open<GameCharacterSheetComponent>(GameCharacterSheetComponent, option);\r\n    component.tabletopObject = gameObject;\r\n  }\r\n}\r\n","<div class=\"component\" [ngClass]=\"{'is-grab': !isLock}\"\r\n  [style.width.px]=\"width * gridSize\" [style.height.px]=\"height * gridSize\"\r\n  appMovable [movable.option]=\"movableOption\" [movable.disable]=\"isLock\" (movable.ondragstart)=\"onMove()\" (movable.ondragend)=\"onMoved()\">\r\n  <div *ngIf=\"imageFile.url.length < 1; then blackMask; else imageMask\"></div>\r\n  <ng-template #blackMask>\r\n    <div class=\"border is-fit-full\" [style.background-color]=\"'rgba(10, 10, 10,' + opacity +')'\"></div>\r\n  </ng-template>\r\n  <ng-template #imageMask>\r\n    <div class=\"border is-fit-full\">\r\n      <img class=\"image is-fit-full\" [style.opacity]=\"opacity\" [src]=\"imageFile.url | safe: 'resourceUrl'\">\r\n    </div>\r\n  </ng-template>\r\n  <div *ngIf=\"isLock\" class=\"lock-icon is-center\">\r\n    <i class=\"material-icons\">lock</i>\r\n  </div>\r\n</div>","import {\r\n  AfterViewInit,\r\n  ChangeDetectionStrategy,\r\n  ChangeDetectorRef,\r\n  Component,\r\n  ElementRef,\r\n  HostListener,\r\n  Input,\r\n  NgZone,\r\n  OnDestroy,\r\n  OnInit,\r\n} from '@angular/core';\r\nimport { Card, CardState } from '@udonarium/card';\r\nimport { CardStack } from '@udonarium/card-stack';\r\nimport { ImageFile } from '@udonarium/core/file-storage/image-file';\r\nimport { ObjectNode } from '@udonarium/core/synchronize-object/object-node';\r\nimport { ObjectStore } from '@udonarium/core/synchronize-object/object-store';\r\nimport { EventSystem, Network } from '@udonarium/core/system';\r\nimport { PeerCursor } from '@udonarium/peer-cursor';\r\nimport { PresetSound, SoundEffect } from '@udonarium/sound-effect';\r\nimport { GameCharacterSheetComponent } from 'component/game-character-sheet/game-character-sheet.component';\r\nimport { InputHandler } from 'directive/input-handler';\r\nimport { MovableOption } from 'directive/movable.directive';\r\nimport { RotableOption } from 'directive/rotable.directive';\r\nimport { ContextMenuSeparator, ContextMenuService } from 'service/context-menu.service';\r\nimport { ImageService } from 'service/image.service';\r\nimport { PanelOption, PanelService } from 'service/panel.service';\r\nimport { PointerDeviceService } from 'service/pointer-device.service';\r\nimport { TabletopService } from 'service/tabletop.service';\r\n\r\n@Component({\r\n  selector: 'card',\r\n  templateUrl: './card.component.html',\r\n  styleUrls: ['./card.component.css'],\r\n  changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class CardComponent implements OnInit, OnDestroy, AfterViewInit {\r\n  @Input() card: Card = null;\r\n  @Input() is3D: boolean = false;\r\n\r\n  get name(): string { return this.card.name; }\r\n  get state(): CardState { return this.card.state; }\r\n  set state(state: CardState) { this.card.state = state; }\r\n  get rotate(): number { return this.card.rotate; }\r\n  set rotate(rotate: number) { this.card.rotate = rotate; }\r\n  get owner(): string { return this.card.owner; }\r\n  set owner(owner: string) { this.card.owner = owner; }\r\n  get zindex(): number { return this.card.zindex; }\r\n  get size(): number { return this.adjustMinBounds(this.card.size); }\r\n\r\n  get isHand(): boolean { return this.card.isHand; }\r\n  get isFront(): boolean { return this.card.isFront; }\r\n  get isVisible(): boolean { return this.card.isVisible; }\r\n  get hasOwner(): boolean { return this.card.hasOwner; }\r\n  get ownerName(): string { return this.card.ownerName; }\r\n\r\n  get imageFile(): ImageFile { return this.imageService.getSkeletonOr(this.card.imageFile); }\r\n  get frontImage(): ImageFile { return this.imageService.getSkeletonOr(this.card.frontImage); }\r\n  get backImage(): ImageFile { return this.imageService.getSkeletonOr(this.card.backImage); }\r\n\r\n  private iconHiddenTimer: NodeJS.Timer = null;\r\n  get isIconHidden(): boolean { return this.iconHiddenTimer != null };\r\n\r\n  gridSize: number = 50;\r\n\r\n  movableOption: MovableOption = {};\r\n  rotableOption: RotableOption = {};\r\n\r\n  private doubleClickTimer: NodeJS.Timer = null;\r\n  private doubleClickPoint = { x: 0, y: 0 };\r\n\r\n  private input: InputHandler = null;\r\n\r\n  constructor(\r\n    private ngZone: NgZone,\r\n    private contextMenuService: ContextMenuService,\r\n    private panelService: PanelService,\r\n    private elementRef: ElementRef<HTMLElement>,\r\n    private changeDetector: ChangeDetectorRef,\r\n    private tabletopService: TabletopService,\r\n    private imageService: ImageService,\r\n    private pointerDeviceService: PointerDeviceService\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    EventSystem.register(this)\r\n      .on('UPDATE_GAME_OBJECT', -1000, event => {\r\n        let object = ObjectStore.instance.get(event.data.identifier);\r\n        if (!this.card || !object) return;\r\n        if ((this.card === object)\r\n          || (object instanceof ObjectNode && this.card.contains(object))\r\n          || (object instanceof PeerCursor && object.userId === this.card.owner)) {\r\n          this.changeDetector.markForCheck();\r\n        }\r\n      })\r\n      .on('SYNCHRONIZE_FILE_LIST', event => {\r\n        this.changeDetector.markForCheck();\r\n      })\r\n      .on('UPDATE_FILE_RESOURE', -1000, event => {\r\n        this.changeDetector.markForCheck();\r\n      })\r\n      .on('DISCONNECT_PEER', event => {\r\n        let cursor = PeerCursor.findByPeerId(event.data.peerId);\r\n        if (!cursor || this.card.owner === cursor.userId) this.changeDetector.markForCheck();\r\n      });\r\n    this.movableOption = {\r\n      tabletopObject: this.card,\r\n      transformCssOffset: 'translateZ(0.15px)',\r\n      colideLayers: ['terrain']\r\n    };\r\n    this.rotableOption = {\r\n      tabletopObject: this.card\r\n    };\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    this.ngZone.runOutsideAngular(() => {\r\n      this.input = new InputHandler(this.elementRef.nativeElement);\r\n    });\r\n    this.input.onStart = e => this.ngZone.run(() => this.onInputStart(e));\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.input.destroy();\r\n    EventSystem.unregister(this);\r\n  }\r\n\r\n  @HostListener('carddrop', ['$event'])\r\n  onCardDrop(e) {\r\n    if (this.card === e.detail || (e.detail instanceof Card === false && e.detail instanceof CardStack === false)) {\r\n      return;\r\n    }\r\n    e.stopPropagation();\r\n    e.preventDefault();\r\n\r\n    if (e.detail instanceof CardStack) {\r\n      let cardStack: CardStack = e.detail;\r\n      let distance: number = (cardStack.location.x - this.card.location.x) ** 2 + (cardStack.location.y - this.card.location.y) ** 2 + (cardStack.posZ - this.card.posZ) ** 2;\r\n      if (distance < 25 ** 2) {\r\n        cardStack.location.x = this.card.location.x;\r\n        cardStack.location.y = this.card.location.y;\r\n        cardStack.posZ = this.card.posZ;\r\n        cardStack.putOnBottom(this.card);\r\n      }\r\n    }\r\n  }\r\n\r\n  startDoubleClickTimer(e) {\r\n    if (!this.doubleClickTimer) {\r\n      this.stopDoubleClickTimer();\r\n      this.doubleClickTimer = setTimeout(() => this.stopDoubleClickTimer(), e.touches ? 500 : 300);\r\n      this.doubleClickPoint = this.input.pointer;\r\n      return;\r\n    }\r\n\r\n    if (e.touches) {\r\n      this.input.onEnd = this.onDoubleClick.bind(this);\r\n    } else {\r\n      this.onDoubleClick();\r\n    }\r\n  }\r\n\r\n  stopDoubleClickTimer() {\r\n    clearTimeout(this.doubleClickTimer);\r\n    this.doubleClickTimer = null;\r\n    this.input.onEnd = null;\r\n  }\r\n\r\n  onDoubleClick() {\r\n    this.stopDoubleClickTimer();\r\n    let distance = (this.doubleClickPoint.x - this.input.pointer.x) ** 2 + (this.doubleClickPoint.y - this.input.pointer.y) ** 2;\r\n    if (distance < 10 ** 2) {\r\n      console.log('onDoubleClick !!!!');\r\n      if (this.hasOwner && !this.isHand) return;\r\n      this.state = this.isVisible && !this.isHand ? CardState.BACK : CardState.FRONT;\r\n      this.owner = '';\r\n      SoundEffect.play(PresetSound.cardDraw);\r\n    }\r\n  }\r\n\r\n  @HostListener('dragstart', ['$event'])\r\n  onDragstart(e) {\r\n    e.stopPropagation();\r\n    e.preventDefault();\r\n  }\r\n\r\n  onInputStart(e: MouseEvent | TouchEvent) {\r\n    this.startDoubleClickTimer(e);\r\n    this.card.toTopmost();\r\n    this.startIconHiddenTimer();\r\n  }\r\n\r\n  @HostListener('contextmenu', ['$event'])\r\n  onContextMenu(e: Event) {\r\n    e.stopPropagation();\r\n    e.preventDefault();\r\n    if (!this.pointerDeviceService.isAllowedToOpenContextMenu) return;\r\n    let position = this.pointerDeviceService.pointers[0];\r\n    this.contextMenuService.open(position, [\r\n      (!this.isVisible || this.isHand\r\n        ? {\r\n          name: '表にする', action: () => {\r\n            this.card.faceUp();\r\n            SoundEffect.play(PresetSound.cardDraw);\r\n          }\r\n        }\r\n        : {\r\n          name: '裏にする', action: () => {\r\n            this.card.faceDown();\r\n            SoundEffect.play(PresetSound.cardDraw);\r\n          }\r\n        }\r\n      ),\r\n      (this.isHand\r\n        ? {\r\n          name: '裏にする', action: () => {\r\n            this.card.faceDown();\r\n            SoundEffect.play(PresetSound.cardDraw);\r\n          }\r\n        }\r\n        : {\r\n          name: '自分だけ見る', action: () => {\r\n            SoundEffect.play(PresetSound.cardDraw);\r\n            this.card.faceDown();\r\n            this.owner = Network.peerContext.userId;\r\n          }\r\n        }),\r\n      ContextMenuSeparator,\r\n      {\r\n        name: '重なったカードで山札を作る', action: () => {\r\n          this.createStack();\r\n          SoundEffect.play(PresetSound.cardPut);\r\n        }\r\n      },\r\n      ContextMenuSeparator,\r\n      { name: 'カードを編集', action: () => { this.showDetail(this.card); } },\r\n      {\r\n        name: 'コピーを作る', action: () => {\r\n          let cloneObject = this.card.clone();\r\n          cloneObject.location.x += this.gridSize;\r\n          cloneObject.location.y += this.gridSize;\r\n          cloneObject.toTopmost();\r\n          SoundEffect.play(PresetSound.cardPut);\r\n        }\r\n      },\r\n      {\r\n        name: '削除する', action: () => {\r\n          this.card.destroy();\r\n          SoundEffect.play(PresetSound.sweep);\r\n        }\r\n      },\r\n    ], this.isVisible ? this.name : 'カード');\r\n  }\r\n\r\n  onMove() {\r\n    this.input.cancel();\r\n    SoundEffect.play(PresetSound.cardPick);\r\n  }\r\n\r\n  onMoved() {\r\n    SoundEffect.play(PresetSound.cardPut);\r\n    this.ngZone.run(() => this.dispatchCardDropEvent());\r\n  }\r\n\r\n  private createStack() {\r\n    let cardStack = CardStack.create('山札');\r\n    cardStack.location.x = this.card.location.x;\r\n    cardStack.location.y = this.card.location.y;\r\n    cardStack.posZ = this.card.posZ;\r\n    cardStack.location.name = this.card.location.name;\r\n    cardStack.rotate = this.rotate;\r\n    cardStack.zindex = this.card.zindex;\r\n\r\n    let cards: Card[] = this.tabletopService.cards.filter(card => {\r\n      let distance: number = (card.location.x - this.card.location.x) ** 2 + (card.location.y - this.card.location.y) ** 2 + (card.posZ - this.card.posZ) ** 2;\r\n      return distance < 100 ** 2;\r\n    });\r\n\r\n    cards.sort((a, b) => {\r\n      if (a.zindex < b.zindex) return 1;\r\n      if (a.zindex > b.zindex) return -1;\r\n      return 0;\r\n    });\r\n\r\n    for (let card of cards) {\r\n      cardStack.putOnBottom(card);\r\n    }\r\n  }\r\n\r\n  private dispatchCardDropEvent() {\r\n    console.log('dispatchCardDropEvent');\r\n    let element: HTMLElement = this.elementRef.nativeElement;\r\n    let parent = element.parentElement;\r\n    let children = parent.children;\r\n    let event = new CustomEvent('carddrop', { detail: this.card, bubbles: true });\r\n    for (let i = 0; i < children.length; i++) {\r\n      children[i].dispatchEvent(event);\r\n    }\r\n  }\r\n\r\n  private startIconHiddenTimer() {\r\n    clearTimeout(this.iconHiddenTimer);\r\n    this.iconHiddenTimer = setTimeout(() => {\r\n      this.iconHiddenTimer = null;\r\n      this.changeDetector.markForCheck();\r\n    }, 300);\r\n    this.changeDetector.markForCheck();\r\n  }\r\n\r\n  private adjustMinBounds(value: number, min: number = 0): number {\r\n    return value < min ? min : value;\r\n  }\r\n\r\n  private showDetail(gameObject: Card) {\r\n    EventSystem.trigger('SELECT_TABLETOP_OBJECT', { identifier: gameObject.identifier, className: gameObject.aliasName });\r\n    let coordinate = this.pointerDeviceService.pointers[0];\r\n    let title = 'カード設定';\r\n    if (gameObject.name.length) title += ' - ' + gameObject.name;\r\n    let option: PanelOption = { title: title, left: coordinate.x - 300, top: coordinate.y - 300, width: 600, height: 600 };\r\n    let component = this.panelService.open<GameCharacterSheetComponent>(GameCharacterSheetComponent, option);\r\n    component.tabletopObject = gameObject;\r\n  }\r\n}","<div class=\"component is-3d is-pointer-events-none is-grab\" [style.width.px]=\"size * gridSize\"\r\n  appMovable [movable.option]=\"movableOption\" (movable.ondragstart)=\"onMove()\" (movable.ondragend)=\"onMoved()\">\r\n  <div class=\"component-content is-pointer-events-auto\"\r\n    appRotable [rotable.option]=\"rotableOption\" (rotable.ondragstart)=\"onMove()\" (rotable.ondragend)=\"onMoved()\">\r\n    <img *ngIf=\"imageFile\" class=\"card-image\" [src]=\"(isFront ? frontImage.url : backImage.url) | safe: 'resourceUrl'\">\r\n    <div *ngIf=\"!isFront && hasOwner && 0 < ownerName.length\" class=\"name-tag is-nowrap has-length-limit is-black-background\" [ngStyle]=\"{'transform': 'translateY(-75%) translateX(-50%) translateX(' + size * gridSize / 2 +'px)'}\">\r\n      <span>{{ownerName}}</span>\r\n    </div>\r\n    <img *ngIf=\"isHand && frontImage\" class=\"card-image thumbnail-transform is-translucent\" [src]=\"frontImage.url | safe: 'resourceUrl'\">\r\n    <ng-container *ngIf=\"!isIconHidden\">\r\n      <div class=\"rotate-grab of-left-top\">\r\n        <i class=\"material-icons\">autorenew</i>\r\n      </div>\r\n      <div class=\"rotate-grab of-left-bottom\">\r\n        <i class=\"material-icons\">autorenew</i>\r\n      </div>\r\n      <div class=\"rotate-grab of-right-bottom\">\r\n        <i class=\"material-icons\">autorenew</i>\r\n      </div>\r\n      <div class=\"rotate-grab of-right-top\">\r\n        <i class=\"material-icons\">autorenew</i>\r\n      </div>\r\n      <div class=\"border-bg is-pointer-events-none\"></div>\r\n    </ng-container>\r\n  </div>\r\n</div>","import {\r\n  AfterViewInit,\r\n  ChangeDetectionStrategy,\r\n  ChangeDetectorRef,\r\n  Component,\r\n  ElementRef,\r\n  HostListener,\r\n  Input,\r\n  NgZone,\r\n  OnDestroy,\r\n  OnInit,\r\n} from '@angular/core';\r\nimport { ImageFile } from '@udonarium/core/file-storage/image-file';\r\nimport { ObjectNode } from '@udonarium/core/synchronize-object/object-node';\r\nimport { ObjectStore } from '@udonarium/core/synchronize-object/object-store';\r\nimport { EventSystem } from '@udonarium/core/system';\r\nimport { PresetSound, SoundEffect } from '@udonarium/sound-effect';\r\nimport { Terrain, TerrainViewState } from '@udonarium/terrain';\r\nimport { GameCharacterSheetComponent } from 'component/game-character-sheet/game-character-sheet.component';\r\nimport { InputHandler } from 'directive/input-handler';\r\nimport { MovableOption } from 'directive/movable.directive';\r\nimport { RotableOption } from 'directive/rotable.directive';\r\nimport { ContextMenuSeparator, ContextMenuService } from 'service/context-menu.service';\r\nimport { CoordinateService } from 'service/coordinate.service';\r\nimport { ImageService } from 'service/image.service';\r\nimport { PanelOption, PanelService } from 'service/panel.service';\r\nimport { PointerDeviceService } from 'service/pointer-device.service';\r\nimport { TabletopActionService } from 'service/tabletop-action.service';\r\n\r\n@Component({\r\n  selector: 'terrain',\r\n  templateUrl: './terrain.component.html',\r\n  styleUrls: ['./terrain.component.css'],\r\n  changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class TerrainComponent implements OnInit, OnDestroy, AfterViewInit {\r\n  @Input() terrain: Terrain = null;\r\n  @Input() is3D: boolean = false;\r\n\r\n  get name(): string { return this.terrain.name; }\r\n  get mode(): TerrainViewState { return this.terrain.mode; }\r\n  set mode(mode: TerrainViewState) { this.terrain.mode = mode; }\r\n\r\n  get isLocked(): boolean { return this.terrain.isLocked; }\r\n  set isLocked(isLocked: boolean) { this.terrain.isLocked = isLocked; }\r\n  get hasWall(): boolean { return this.terrain.hasWall; }\r\n  get hasFloor(): boolean { return this.terrain.hasFloor; }\r\n\r\n  get wallImage(): ImageFile { return this.imageService.getSkeletonOr(this.terrain.wallImage); }\r\n  get floorImage(): ImageFile { return this.imageService.getSkeletonOr(this.terrain.floorImage); }\r\n\r\n  get height(): number { return this.adjustMinBounds(this.terrain.height); }\r\n  get width(): number { return this.adjustMinBounds(this.terrain.width); }\r\n  get depth(): number { return this.adjustMinBounds(this.terrain.depth); }\r\n\r\n  get isVisibleFloor(): boolean { return 0 < this.width * this.depth; }\r\n  get isVisibleWallTopBottom(): boolean { return 0 < this.width * this.height; }\r\n  get isVisibleWallLeftRight(): boolean { return 0 < this.depth * this.height; }\r\n\r\n  gridSize: number = 50;\r\n\r\n  movableOption: MovableOption = {};\r\n  rotableOption: RotableOption = {};\r\n\r\n  private input: InputHandler = null;\r\n\r\n  constructor(\r\n    private ngZone: NgZone,\r\n    private imageService: ImageService,\r\n    private tabletopActionService: TabletopActionService,\r\n    private contextMenuService: ContextMenuService,\r\n    private elementRef: ElementRef<HTMLElement>,\r\n    private panelService: PanelService,\r\n    private changeDetector: ChangeDetectorRef,\r\n    private pointerDeviceService: PointerDeviceService,\r\n    private coordinateService: CoordinateService,\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    EventSystem.register(this)\r\n      .on('UPDATE_GAME_OBJECT', -1000, event => {\r\n        let object = ObjectStore.instance.get(event.data.identifier);\r\n        if (!this.terrain || !object) return;\r\n        if (this.terrain === object || (object instanceof ObjectNode && this.terrain.contains(object))) {\r\n          this.changeDetector.markForCheck();\r\n        }\r\n      })\r\n      .on('SYNCHRONIZE_FILE_LIST', event => {\r\n        this.changeDetector.markForCheck();\r\n      })\r\n      .on('UPDATE_FILE_RESOURE', -1000, event => {\r\n        this.changeDetector.markForCheck();\r\n      });\r\n    this.movableOption = {\r\n      tabletopObject: this.terrain,\r\n      colideLayers: ['terrain']\r\n    };\r\n    this.rotableOption = {\r\n      tabletopObject: this.terrain\r\n    };\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    this.ngZone.runOutsideAngular(() => {\r\n      this.input = new InputHandler(this.elementRef.nativeElement);\r\n    });\r\n    this.input.onStart = this.onInputStart.bind(this);\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.input.destroy();\r\n    EventSystem.unregister(this);\r\n  }\r\n\r\n  @HostListener('dragstart', ['$event'])\r\n  onDragstart(e) {\r\n    e.stopPropagation();\r\n    e.preventDefault();\r\n  }\r\n\r\n  onInputStart(e: any) {\r\n    this.input.cancel();\r\n\r\n    // TODO:もっと良い方法考える\r\n    if (this.isLocked) {\r\n      EventSystem.trigger('DRAG_LOCKED_OBJECT', {});\r\n    }\r\n  }\r\n\r\n  @HostListener('contextmenu', ['$event'])\r\n  onContextMenu(e: Event) {\r\n    e.stopPropagation();\r\n    e.preventDefault();\r\n\r\n    if (!this.pointerDeviceService.isAllowedToOpenContextMenu) return;\r\n\r\n    let menuPosition = this.pointerDeviceService.pointers[0];\r\n    let objectPosition = this.coordinateService.calcTabletopLocalCoordinate();\r\n    this.contextMenuService.open(menuPosition, [\r\n      (this.isLocked\r\n        ? {\r\n          name: '解除固定', action: () => {\r\n            this.isLocked = false;\r\n            SoundEffect.play(PresetSound.unlock);\r\n          }\r\n        } : {\r\n          name: '固定', action: () => {\r\n            this.isLocked = true;\r\n            SoundEffect.play(PresetSound.lock);\r\n          }\r\n        }),\r\n      ContextMenuSeparator,\r\n      (this.hasWall\r\n        ? {\r\n          name: '不顯示牆壁', action: () => {\r\n            this.mode = TerrainViewState.FLOOR;\r\n            if (this.depth * this.width === 0) {\r\n              this.terrain.width = this.width <= 0 ? 1 : this.width;\r\n              this.terrain.depth = this.depth <= 0 ? 1 : this.depth;\r\n            }\r\n          }\r\n        } : {\r\n          name: '顯示牆壁', action: () => {\r\n            this.mode = TerrainViewState.ALL;\r\n          }\r\n        }),\r\n      ContextMenuSeparator,\r\n      { name: '編輯地形設定', action: () => { this.showDetail(this.terrain); } },\r\n      {\r\n        name: '製作副本', action: () => {\r\n          let cloneObject = this.terrain.clone();\r\n          cloneObject.location.x += this.gridSize;\r\n          cloneObject.location.y += this.gridSize;\r\n          cloneObject.isLocked = false;\r\n          if (this.terrain.parent) this.terrain.parent.appendChild(cloneObject);\r\n          SoundEffect.play(PresetSound.blockPut);\r\n        }\r\n      },\r\n      {\r\n        name: '刪除', action: () => {\r\n          this.terrain.destroy();\r\n          SoundEffect.play(PresetSound.sweep);\r\n        }\r\n      },\r\n      ContextMenuSeparator,\r\n      { name: '製作物件', action: null, subActions: this.tabletopActionService.makeDefaultContextMenuActions(objectPosition) }\r\n    ], this.name);\r\n  }\r\n\r\n  onMove() {\r\n    SoundEffect.play(PresetSound.blockPick);\r\n  }\r\n\r\n  onMoved() {\r\n    SoundEffect.play(PresetSound.blockPut);\r\n  }\r\n\r\n  private adjustMinBounds(value: number, min: number = 0): number {\r\n    return value < min ? min : value;\r\n  }\r\n\r\n  private showDetail(gameObject: Terrain) {\r\n    EventSystem.trigger('SELECT_TABLETOP_OBJECT', { identifier: gameObject.identifier, className: gameObject.aliasName });\r\n    let coordinate = this.pointerDeviceService.pointers[0];\r\n    let title = '地形設定';\r\n    if (gameObject.name.length) title += ' - ' + gameObject.name;\r\n    let option: PanelOption = { title: title, left: coordinate.x - 250, top: coordinate.y - 150, width: 500, height: 300 };\r\n    let component = this.panelService.open<GameCharacterSheetComponent>(GameCharacterSheetComponent, option);\r\n    component.tabletopObject = gameObject;\r\n  }\r\n}\r\n","<div class=\"component is-3d is-pointer-events-none\"\r\n  [style.width.px]=\"width * gridSize\" [style.height.px]=\"depth * gridSize\"\r\n  appMovable [movable.option]=\"movableOption\" [movable.disable]=\"isLocked\" (movable.ondragstart)=\"onMove()\" (movable.ondragend)=\"onMoved()\">\r\n  <div class=\"component-content is-3d is-pointer-events-auto\" [ngClass]=\"{'is-grab': !isLocked}\"\r\n    appRotable [rotable.option]=\"rotableOption\" (rotable.ondragstart)=\"onMove()\" (rotable.ondragend)=\"onMoved()\" [rotable.disable]=\"isLocked\">\r\n    <ng-container *ngIf=\"hasFloor && isVisibleFloor && 0 < floorImage?.url.length\">\r\n      <div class=\"texture\" [ngClass]=\"{'blinking-animation': !isLocked}\" [ngStyle]=\"{'transform': 'translateZ(' + height * gridSize +'px)'}\"\r\n        [style.background-image]=\"'url(' + floorImage.url + ')' | safe: 'style'\"></div>\r\n    </ng-container>\r\n    <ng-container *ngIf=\"hasWall && 0 < wallImage?.url.length\">\r\n      <div *ngIf=\"isVisibleWallTopBottom\" [ngClass]=\"{'blinking-animation': !isLocked}\"\r\n        class=\"texture of-wall-top\" [style.background-image]=\"'url(' + wallImage.url + ')' | safe: 'style'\"\r\n        [style.width.px]=\"width * gridSize\" [style.height.px]=\"height * gridSize\"></div>\r\n      <div *ngIf=\"isVisibleWallTopBottom\" [ngClass]=\"{'blinking-animation': !isLocked}\"\r\n        class=\"texture of-wall-bottom\" [style.background-image]=\"'url(' + wallImage.url + ')' | safe: 'style'\"\r\n        [style.width.px]=\"width * gridSize\" [style.height.px]=\"height * gridSize\"></div>\r\n      <div *ngIf=\"isVisibleWallLeftRight\" [ngClass]=\"{'blinking-animation': !isLocked}\"\r\n        class=\"texture of-wall-left\" [style.background-image]=\"'url(' + wallImage.url + ')' | safe: 'style'\"\r\n        [style.width.px]=\"depth * gridSize\" [style.height.px]=\"height * gridSize\"></div>\r\n      <div *ngIf=\"isVisibleWallLeftRight\" [ngClass]=\"{'blinking-animation': !isLocked}\"\r\n        class=\"texture of-wall-right\" [style.background-image]=\"'url(' + wallImage.url + ')' | safe: 'style'\"\r\n        [style.width.px]=\"depth * gridSize\" [style.height.px]=\"height * gridSize\"></div>\r\n    </ng-container>\r\n    <ng-container *ngIf=\"!isLocked\">\r\n      <div class=\"pedestal-grab rotate-grab\"></div>\r\n      <div class=\"rotate-grab of-left-top rotate-grab-icon\">\r\n        <i class=\"material-icons\">autorenew</i>\r\n      </div>\r\n      <div class=\"rotate-grab of-left-bottom rotate-grab-icon\">\r\n        <i class=\"material-icons\">autorenew</i>\r\n      </div>\r\n      <div class=\"rotate-grab of-right-bottom rotate-grab-icon\">\r\n        <i class=\"material-icons\">autorenew</i>\r\n      </div>\r\n      <div class=\"rotate-grab of-right-top rotate-grab-icon\">\r\n        <i class=\"material-icons\">autorenew</i>\r\n      </div>\r\n    </ng-container>\r\n  </div>\r\n</div>","import { Network } from '../network/network';\r\n\r\nexport class Event<T> implements EventContext<T>{\r\n  readonly isSendFromSelf: boolean = false;\r\n\r\n  constructor(\r\n    readonly eventName: string,\r\n    public data: T,\r\n    readonly sendFrom: string = Network.instance.peerId) {\r\n    this.isSendFromSelf = this.sendFrom === Network.instance.peerId;\r\n  }\r\n\r\n  toContext(): EventContext<T> {\r\n    return {\r\n      sendFrom: this.sendFrom,\r\n      eventName: this.eventName,\r\n      data: this.data,\r\n    };\r\n  }\r\n}\r\n\r\nexport interface EventContext<T> {\r\n  sendFrom: string;\r\n  eventName: string;\r\n  data: T;\r\n}\r\n","import { NgZone } from '@angular/core';\r\n\r\ntype Callback = (srcEvent: TouchEvent | MouseEvent | PointerEvent) => void;\r\ntype OnGestureCallback = (srcEvent: TouchEvent | MouseEvent | PointerEvent) => void;\r\ntype OnTransformCallback = (transformX: number, transformY: number, transformZ: number, rotateX: number, rotateY: number, rotateZ: number, event: string, srcEvent: TouchEvent | MouseEvent | PointerEvent) => void;\r\n\r\nexport enum TableTouchGestureEvent {\r\n  PAN = 'pan',\r\n  TAP_PINCH = 'tappinch',\r\n  PINCH = 'pinch',\r\n  ROTATE = 'rotate',\r\n}\r\n\r\nexport class TableTouchGesture {\r\n  private hammer: HammerManager = null;\r\n  private deltaHammerDeltaX: number = 0;\r\n  private deltaHammerDeltaY = 1.0;\r\n  private deltaHammerScale = 1.0;\r\n  private deltaHammerRotation = 0;\r\n\r\n  private prevHammerDeltaX: number = 0;\r\n  private prevHammerDeltaY: number = 0;\r\n  private prevHammerScale: number = 0;\r\n  private prevHammerRotation: number = 0;\r\n\r\n  private tappedPanTimer: NodeJS.Timer = null;\r\n  private tappedPanCenter: HammerPoint = { x: 0, y: 0 };\r\n\r\n  onstart: Callback = null;\r\n  onend: Callback = null;\r\n  ongesture: OnGestureCallback = null;\r\n  ontransform: OnTransformCallback = null;\r\n\r\n  constructor(readonly targetElement: Element, private readonly ngZone: NgZone) {\r\n    this.initializeHammer();\r\n  }\r\n\r\n  destroy() {\r\n    this.clearTappedPanTimer();\r\n    this.hammer.destroy();\r\n  }\r\n\r\n  private initializeHammer() {\r\n    this.hammer = new Hammer.Manager(this.targetElement, { inputClass: Hammer.TouchInput });\r\n\r\n    let tap = new Hammer.Tap();\r\n    let pan1p = new Hammer.Pan({ event: 'pan1p', pointers: 1, threshold: 0 });\r\n    let pan2p = new Hammer.Pan({ event: 'pan2p', pointers: 2, threshold: 0 });\r\n    let pinch = new Hammer.Pinch();\r\n    let rotate = new Hammer.Rotate();\r\n\r\n    pan1p.recognizeWith(pan2p);\r\n    pan1p.recognizeWith(rotate);\r\n    pan1p.recognizeWith(pinch);\r\n\r\n    pan2p.recognizeWith(pinch);\r\n    pan2p.recognizeWith(rotate);\r\n    pinch.recognizeWith(rotate);\r\n\r\n    this.hammer.add([tap, pan1p, pan2p, pinch, rotate]);\r\n\r\n    this.hammer.on('hammer.input', this.onHammer.bind(this));\r\n    this.hammer.on('tap', this.onTap.bind(this));\r\n    this.hammer.on('pan1pstart', this.onTappedPanStart.bind(this));\r\n    this.hammer.on('pan1pmove', this.onTappedPanMove.bind(this));\r\n    this.hammer.on('pan1pend', this.onTappedPanEnd.bind(this));\r\n    this.hammer.on('pan1pcancel', this.onTappedPanEnd.bind(this));\r\n    this.hammer.on('pan2pmove', this.onPanMove.bind(this));\r\n    this.hammer.on('pinchmove', this.onPinchMove.bind(this));\r\n    this.hammer.on('rotatemove', this.onRotateMove.bind(this));\r\n\r\n    // iOS で contextmenu が発火しない問題へのworkaround.\r\n    let ua = window.navigator.userAgent.toLowerCase();\r\n    let isiOS = ua.indexOf('iphone') > -1 || ua.indexOf('ipad') > -1 || ua.indexOf('macintosh') > -1 && 'ontouchend' in document;\r\n    if (!isiOS) return;\r\n    this.hammer.add(new Hammer.Press({ time: 251 }));\r\n    this.hammer.on('press', ev => {\r\n      let event = new MouseEvent('contextmenu', {\r\n        bubbles: true,\r\n        cancelable: true,\r\n        clientX: ev.center.x,\r\n        clientY: ev.center.y,\r\n      });\r\n      this.ngZone.run(() => ev.srcEvent.target.dispatchEvent(event));\r\n    });\r\n  }\r\n\r\n  private onHammer(ev: HammerInput) {\r\n    if (ev.isFirst) {\r\n      this.deltaHammerScale = ev.scale;\r\n      this.deltaHammerRotation = ev.rotation;\r\n      this.deltaHammerDeltaX = ev.deltaX;\r\n      this.deltaHammerDeltaY = ev.deltaY;\r\n      if (this.onstart) this.onstart(ev.srcEvent);\r\n    } else if (ev.isFinal) {\r\n      if (this.onend) this.onend(ev.srcEvent);\r\n    } else {\r\n      this.deltaHammerScale = ev.scale - this.prevHammerScale;\r\n      this.deltaHammerRotation = ev.rotation - this.prevHammerRotation;\r\n      this.deltaHammerDeltaX = ev.deltaX - this.prevHammerDeltaX;\r\n      this.deltaHammerDeltaY = ev.deltaY - this.prevHammerDeltaY;\r\n    }\r\n    this.prevHammerScale = ev.scale;\r\n    this.prevHammerRotation = ev.rotation;\r\n    this.prevHammerDeltaX = ev.deltaX;\r\n    this.prevHammerDeltaY = ev.deltaY;\r\n\r\n    if (this.tappedPanTimer == null || ev.eventType != Hammer.INPUT_START) return;\r\n    let distance = (this.tappedPanCenter.x - ev.center.x) ** 2 + (this.tappedPanCenter.y - ev.center.y) ** 2;\r\n    if (50 ** 2 < distance) {\r\n      this.clearTappedPanTimer();\r\n    }\r\n  }\r\n\r\n  private onTap(ev: HammerInput) {\r\n    this.tappedPanCenter = ev.center;\r\n    this.tappedPanTimer = setTimeout(() => { this.tappedPanTimer = null; }, 400);\r\n    if (this.ongesture) this.ongesture(ev.srcEvent);\r\n  }\r\n\r\n  private onTappedPanStart(ev: HammerInput) {\r\n    if (this.tappedPanTimer == null) return;\r\n    this.clearTappedPanTimer(false);\r\n    if (this.ongesture) this.ongesture(ev.srcEvent);\r\n  }\r\n\r\n  private onTappedPanEnd(ev: HammerInput) {\r\n    this.clearTappedPanTimer();\r\n  }\r\n\r\n  private onTappedPanMove(ev: HammerInput) {\r\n    if (this.tappedPanTimer == null) {\r\n      let transformX = this.deltaHammerDeltaX;\r\n      let transformY = this.deltaHammerDeltaY;\r\n      let transformZ = 0;\r\n      if (this.ontransform) this.ontransform(transformX, transformY, transformZ, 0, 0, 0, TableTouchGestureEvent.PAN, ev.srcEvent);\r\n    } else {\r\n      this.clearTappedPanTimer(false);\r\n      let scale = this.deltaHammerDeltaY;\r\n      let transformZ = scale * 7.5;\r\n      if (this.ongesture) this.ongesture(ev.srcEvent);\r\n      if (this.ontransform) this.ontransform(0, 0, transformZ, 0, 0, 0, TableTouchGestureEvent.TAP_PINCH, ev.srcEvent);\r\n    }\r\n  }\r\n\r\n  private onPanMove(ev: HammerInput) {\r\n    this.clearTappedPanTimer();\r\n    let rotateX = -this.deltaHammerDeltaY / window.innerHeight * 100;\r\n    if (this.ongesture) this.ongesture(ev.srcEvent);\r\n    if (this.ontransform) this.ontransform(0, 0, 0, rotateX, 0, 0, TableTouchGestureEvent.ROTATE, ev.srcEvent);\r\n  }\r\n\r\n  private onPinchMove(ev: HammerInput) {\r\n    this.clearTappedPanTimer();\r\n    let transformZ = this.deltaHammerScale * 500;\r\n    if (this.ongesture) this.ongesture(ev.srcEvent);\r\n    if (this.ontransform) this.ontransform(0, 0, transformZ, 0, 0, 0, TableTouchGestureEvent.PINCH, ev.srcEvent);\r\n  }\r\n\r\n  private onRotateMove(ev: HammerInput) {\r\n    this.clearTappedPanTimer();\r\n    let rotateZ = this.deltaHammerRotation;\r\n    if (this.ongesture) this.ongesture(ev.srcEvent);\r\n    if (this.ontransform) this.ontransform(0, 0, 0, 0, 0, rotateZ, TableTouchGestureEvent.ROTATE, ev.srcEvent);\r\n  }\r\n\r\n  private clearTappedPanTimer(needsSetNull: boolean = true) {\r\n    clearTimeout(this.tappedPanTimer);\r\n    if (needsSetNull) this.tappedPanTimer = null;\r\n  }\r\n}","import { InputHandler } from './input-handler';\r\n\r\nexport enum HandleType {\r\n  N = 'n',\r\n  E = 'e',\r\n  W = 'w',\r\n  S = 's',\r\n  NE = 'ne',\r\n  NW = 'nw',\r\n  SE = 'se',\r\n  SW = 'sw',\r\n}\r\n\r\nexport class ResizeHandler {\r\n  input: InputHandler = null;\r\n  private handle: HTMLElement = null;\r\n  private width = 12;\r\n\r\n  constructor(\r\n    readonly target: HTMLElement,\r\n    readonly type: HandleType\r\n  ) {\r\n    this.initialize();\r\n  }\r\n\r\n  private initialize() {\r\n    this.handle = this.target.ownerDocument.createElement('div');\r\n    this.handle.classList.add('ui-resize-handler-' + this.type);\r\n    this.input = new InputHandler(this.handle);\r\n    this.target.appendChild(this.handle);\r\n\r\n    let style = this.handle.style;\r\n    style.position = 'absolute';\r\n    style.zIndex = '1';\r\n    style.backgroundColor = 'transparent';\r\n\r\n    switch (this.type) {\r\n      case HandleType.N:\r\n        style.top = `${-this.width * 3 / 4}px`;\r\n        style.left = '0px';\r\n        style.right = '0px';\r\n        style.height = `${this.width}px`;\r\n        style.cursor = 'ns-resize';\r\n        break;\r\n      case HandleType.E:\r\n        style.top = '0px';\r\n        style.bottom = '0px';\r\n        style.right = `${-this.width * 3 / 4}px`;\r\n        style.width = `${this.width}px`;\r\n        style.cursor = 'ew-resize';\r\n        break;\r\n      case HandleType.W:\r\n        style.top = '0px';\r\n        style.bottom = '0px';\r\n        style.left = `${-this.width * 3 / 4}px`;\r\n        style.width = `${this.width}px`;\r\n        style.cursor = 'ew-resize';\r\n        break;\r\n      case HandleType.S:\r\n        style.bottom = `${-this.width * 3 / 4}px`;\r\n        style.left = '0px';\r\n        style.right = '0px';\r\n        style.height = `${this.width}px`;\r\n        style.cursor = 'ns-resize';\r\n        break;\r\n      case HandleType.NE:\r\n        style.top = `${-this.width * 3 / 4}px`;\r\n        style.right = `${-this.width * 3 / 4}px`;\r\n        style.width = `${this.width * 3 / 2}px`;\r\n        style.height = `${this.width * 3 / 2}px`;\r\n        style.cursor = 'nesw-resize';\r\n        style.zIndex = '2';\r\n        break;\r\n      case HandleType.NW:\r\n        style.top = `${-this.width * 3 / 4}px`;\r\n        style.left = `${-this.width * 3 / 4}px`;\r\n        style.width = `${this.width * 3 / 2}px`;\r\n        style.height = `${this.width * 3 / 2}px`;\r\n        style.cursor = 'nwse-resize';\r\n        style.zIndex = '2';\r\n        break;\r\n      case HandleType.SE:\r\n        style.bottom = `${-this.width * 3 / 4}px`;\r\n        style.right = `${-this.width * 3 / 4}px`;\r\n        style.width = `${this.width * 3 / 2}px`;\r\n        style.height = `${this.width * 3 / 2}px`;\r\n        style.cursor = 'nwse-resize';\r\n        style.zIndex = '2';\r\n        break;\r\n      case HandleType.SW:\r\n        style.bottom = `${-this.width * 3 / 4}px`;\r\n        style.left = `${-this.width * 3 / 4}px`;\r\n        style.width = `${this.width * 3 / 2}px`;\r\n        style.height = `${this.width * 3 / 2}px`;\r\n        style.cursor = 'nesw-resize';\r\n        style.zIndex = '2';\r\n        break;\r\n    }\r\n  }\r\n\r\n  destroy() {\r\n    this.handle.remove();\r\n    this.input.destroy();\r\n  }\r\n}\r\n","import { Pipe, PipeTransform } from '@angular/core';\r\nimport { DomSanitizer, SafeHtml, SafeResourceUrl, SafeScript, SafeStyle, SafeUrl } from '@angular/platform-browser';\r\n\r\n@Pipe({\r\n  name: 'safe'\r\n})\r\nexport class SafePipe implements PipeTransform {\r\n\r\n  constructor(protected _sanitizer: DomSanitizer) {  }\r\n\r\n  public transform(value: string, type: string = 'html'): SafeHtml | SafeStyle | SafeScript | SafeUrl | SafeResourceUrl {\r\n    switch (type) {\r\n      case 'html': return this._sanitizer.bypassSecurityTrustHtml(value);\r\n      case 'style': return this._sanitizer.bypassSecurityTrustStyle(value);\r\n      case 'script': return this._sanitizer.bypassSecurityTrustScript(value);\r\n      case 'url': return this._sanitizer.bypassSecurityTrustUrl(value);\r\n      case 'resourceUrl': return this._sanitizer.bypassSecurityTrustResourceUrl(value);\r\n      default: throw new Error(`Invalid safe type specified: ${type}`);\r\n    }\r\n  }\r\n}","import { Injectable } from '@angular/core';\r\n\r\nimport { EventSystem, Network } from '@udonarium/core/system';\r\nimport { Database } from '@udonarium/database/database';\r\n\r\nimport * as yaml from 'js-yaml/dist/js-yaml.min.js';\r\n\r\nexport interface AppConfig {\r\n  webrtc: {\r\n    key: string,\r\n    config?: {\r\n      iceServers?: RTCIceServer[],\r\n      certificates?: string\r\n    }\r\n  },\r\n  app: {\r\n    title: string,\r\n    mode: string\r\n  }\r\n}\r\n\r\nconst objectPropertyKeys = Object.getOwnPropertyNames(Object.prototype);\r\nconst arrayPropertyKeys = Object.getOwnPropertyNames(Array.prototype);\r\n\r\n@Injectable()\r\nexport class AppConfigService {\r\n\r\n  constructor() { }\r\n\r\n  peerHistory: string[] = [];\r\n  isOpen: boolean = false;\r\n\r\n  static appConfig: AppConfig = {\r\n    webrtc: {\r\n      key: ''\r\n    },\r\n    app: {\r\n      title: '',\r\n      mode: ''\r\n    }\r\n  }\r\n\r\n  initialize() {\r\n    this.initAppConfig();\r\n    this.initDatabase();\r\n  }\r\n\r\n  private async initDatabase() {\r\n    console.log('initDatabase...');\r\n    if (!window.indexedDB) {\r\n      console.warn('このブラウザは安定板の IndexedDB をサポートしていません。IndexedDB の機能は利用できません。');\r\n      return;\r\n    }\r\n\r\n    let db = new Database();\r\n\r\n    let history = await db.getPeerHistory();\r\n    history.sort((a, b) => {\r\n      if (a.timestamp < b.timestamp) return 1;\r\n      if (a.timestamp > b.timestamp) return -1;\r\n      return 0;\r\n    });\r\n\r\n    for (let i = 1; i < history.length; i++) {\r\n      db.deletePeerHistory(history[i].peerId);\r\n    }\r\n\r\n    console.log('履歴: ', history);\r\n\r\n    this.peerHistory = [];\r\n    if (history.length) {\r\n      for (let historyId of history[0].history) {\r\n        if (historyId !== history[0].peerId) {\r\n          this.peerHistory.push(historyId);\r\n        }\r\n      }\r\n    }\r\n    console.log('最終履歴: ', this.peerHistory);\r\n\r\n    EventSystem.register(this)\r\n      .on('CONNECT_PEER', -1000, () => {\r\n        console.log('AppConfigService CONNECT_PEER', Network.peerIds);\r\n        if (!this.isOpen) {\r\n          this.isOpen = true;\r\n        }\r\n        db.addPeerHistory(Network.peerId, Network.peerIds);\r\n      })\r\n      .on('DISCONNECT_PEER', -1000, () => {\r\n        console.log('AppConfigService DISCONNECT_PEER', Network.peerIds);\r\n      });\r\n  }\r\n\r\n  private async initAppConfig() {\r\n    try {\r\n      console.log('YAML読み込み...');\r\n      let config = await this.loadYaml();\r\n      let obj = yaml.safeLoad(config);\r\n      AppConfigService.applyConfig(obj);\r\n      console.log(AppConfigService.appConfig);\r\n    } catch (e) {\r\n      console.warn(e);\r\n    }\r\n    EventSystem.trigger('LOAD_CONFIG', AppConfigService.appConfig);\r\n  }\r\n\r\n  private loadYaml(): Promise<string> {\r\n    return new Promise((resolve, reject) => {\r\n      let config = document.querySelector('script[type$=\"yaml\"]');\r\n      if (!config) {\r\n        console.warn('loadYaml element not found.');\r\n        resolve('');\r\n        return;\r\n      }\r\n\r\n      console.log('loadYaml ready...', config);\r\n      let configString = config.textContent;\r\n      let url = config.getAttribute('src');\r\n\r\n      if (url == null) {\r\n        console.warn('loadYaml url undefined.');\r\n        resolve(configString);\r\n        return;\r\n      }\r\n\r\n      let http = new XMLHttpRequest();\r\n      http.open('get', url, true);\r\n      http.onerror = (event) => {\r\n        console.error(event);\r\n        resolve(configString);\r\n      };\r\n      http.onreadystatechange = (event) => {\r\n        if (http.readyState !== 4) {\r\n          return;\r\n        }\r\n        if (http.status === 200) {\r\n          console.log('loadYaml success!');\r\n          configString = http.responseText;\r\n        } else {\r\n          console.warn('loadYaml fail...? status:' + http.status);\r\n        }\r\n        resolve(configString);\r\n      };\r\n      console.log('loadYaml start');\r\n      http.send(null);\r\n    });\r\n  }\r\n\r\n  private static applyConfig(config: Object, root: Object = AppConfigService.appConfig): Object {\r\n    if (config == null) return root;\r\n    let keys = Object.getOwnPropertyNames(config);\r\n    for (let key of keys) {\r\n      let invalidPropertyKeys = Array.isArray(config) || Array.isArray(root) ? objectPropertyKeys.concat(arrayPropertyKeys) : objectPropertyKeys;\r\n      if (invalidPropertyKeys.includes(key)) {\r\n        console.log(`skip invalid key (${key})`);\r\n        continue;\r\n      } else if (config[key] != null && typeof config[key] === 'object') {\r\n        if (root[key] == null) root[key] = Array.isArray(config[key]) ? [] : {};\r\n        AppConfigService.applyConfig(config[key], root[key]);\r\n      } else if (typeof config[key] !== 'function' && typeof root[key] !== 'function') {\r\n        root[key] = config[key];\r\n      }\r\n    }\r\n    return root;\r\n  }\r\n}\r\n","import { AfterViewInit, ChangeDetectionStrategy, ChangeDetectorRef, Component, ElementRef, HostListener, Input, NgZone, OnDestroy, OnInit, ViewChild } from '@angular/core';\r\nimport { ImageFile } from '@udonarium/core/file-storage/image-file';\r\nimport { ObjectNode } from '@udonarium/core/synchronize-object/object-node';\r\nimport { ObjectStore } from '@udonarium/core/synchronize-object/object-store';\r\nimport { EventSystem } from '@udonarium/core/system';\r\nimport { PresetSound, SoundEffect } from '@udonarium/sound-effect';\r\nimport { TextNote } from '@udonarium/text-note';\r\nimport { GameCharacterSheetComponent } from 'component/game-character-sheet/game-character-sheet.component';\r\nimport { MovableOption } from 'directive/movable.directive';\r\nimport { RotableOption } from 'directive/rotable.directive';\r\nimport { ContextMenuService } from 'service/context-menu.service';\r\nimport { PanelOption, PanelService } from 'service/panel.service';\r\nimport { PointerDeviceService } from 'service/pointer-device.service';\r\n\r\n@Component({\r\n  selector: 'text-note',\r\n  templateUrl: './text-note.component.html',\r\n  styleUrls: ['./text-note.component.css'],\r\n  changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class TextNoteComponent implements OnInit, OnDestroy, AfterViewInit {\r\n  @ViewChild('textArea', { static: true }) textAreaElementRef: ElementRef;\r\n\r\n  @Input() textNote: TextNote = null;\r\n  @Input() is3D: boolean = false;\r\n\r\n  get title(): string { return this.textNote.title; }\r\n\r\n  oldText : string = '';\r\n  oldFontSize : number = 9;\r\n  get text(): string { \r\n    console.log('get text');  \r\n    \r\n    if( this.oldText != this.textNote.text){\r\n      this.calcFitHeightIfNeeded(); \r\n    }\r\n    this.oldText == this.textNote.text;\r\n    return this.textNote.text;  \r\n    }\r\n  set text(text: string) { \r\n    console.log('set text'); \r\n    this.calcFitHeightIfNeeded(); \r\n    this.textNote.text = text;\r\n    this.oldText = text;\r\n    }\r\n  get fontSize(): number { \r\n    console.log('get fontSize');\r\n    \r\n    if( this.oldFontSize != this.textNote.fontSize ){\r\n      this.calcFitHeightIfNeeded(); \r\n    }\r\n    this.oldFontSize = this.textNote.fontSize;\r\n    return this.textNote.fontSize; \r\n    }\r\n  get imageFile(): ImageFile { return this.textNote.imageFile; }\r\n  get rotate(): number { return this.textNote.rotate; }\r\n  set rotate(rotate: number) { this.textNote.rotate = rotate; }\r\n  get height(): number { return this.adjustMinBounds(this.textNote.height); }\r\n  get width(): number { return this.adjustMinBounds(this.textNote.width); }\r\n\r\n  get isSelected(): boolean { return document.activeElement === this.textAreaElementRef.nativeElement; }\r\n\r\n  private callbackOnMouseUp = (e) => this.onMouseUp(e);\r\n\r\n  gridSize: number = 50;\r\n\r\n  private calcFitHeightTimer: NodeJS.Timer = null;\r\n\r\n  movableOption: MovableOption = {};\r\n  rotableOption: RotableOption = {};\r\n\r\n  constructor(\r\n    private ngZone: NgZone,\r\n    private contextMenuService: ContextMenuService,\r\n    private panelService: PanelService,\r\n    private changeDetector: ChangeDetectorRef,\r\n    private pointerDeviceService: PointerDeviceService\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    EventSystem.register(this)\r\n      .on('RESIZE_NOTE_OBJECT', -1000, event => {\r\n        console.log('resize');\r\n        let object = ObjectStore.instance.get(event.data.identifier);\r\n        if (!this.textNote || !object) return;\r\n        if (this.textNote === object ) {\r\n          this.calcFitHeight();\r\n        }\r\n      })\r\n      .on('UPDATE_GAME_OBJECT', -1000, event => {\r\n        let object = ObjectStore.instance.get(event.data.identifier);\r\n        if (!this.textNote || !object) return;\r\n        if (this.textNote === object || (object instanceof ObjectNode && this.textNote.contains(object))) {\r\n          this.changeDetector.markForCheck();\r\n        }\r\n      })\r\n      .on('SYNCHRONIZE_FILE_LIST', event => {\r\n        this.changeDetector.markForCheck();\r\n      })\r\n      .on('UPDATE_FILE_RESOURE', -1000, event => {\r\n        this.changeDetector.markForCheck();\r\n      });\r\n    this.movableOption = {\r\n      tabletopObject: this.textNote,\r\n      transformCssOffset: 'translateZ(0.15px)',\r\n      colideLayers: ['terrain']\r\n    };\r\n    this.rotableOption = {\r\n      tabletopObject: this.textNote\r\n    };\r\n  }\r\n\r\n  ngAfterViewInit() { }\r\n\r\n  ngOnDestroy() {\r\n    EventSystem.unregister(this);\r\n  }\r\n\r\n  @HostListener('dragstart', ['$event'])\r\n  onDragstart(e) {\r\n    e.stopPropagation();\r\n    e.preventDefault();\r\n  }  \r\n\r\n  @HostListener('mousedown', ['$event'])\r\n  onMouseDown(e: any) {\r\n    console.log('e.id onMouseDown:' + e.target.id );\r\n    if (this.isSelected) return;\r\n    e.preventDefault();\r\n    this.textNote.toTopmost();\r\n\r\n    // TODO:もっと良い方法考える\r\n    if (e.button === 2) {\r\n      EventSystem.trigger('DRAG_LOCKED_OBJECT', {});\r\n      return;\r\n    }\r\n    this.addMouseEventListeners();\r\n  }\r\n\r\n  onMouseUp(e: any) {\r\n    console.log('e.id onMouseUp:' + e.target.id );\r\n\r\n      if (this.pointerDeviceService.isAllowedToOpenContextMenu) {\r\n        console.log('TEST');\r\n        let selection = window.getSelection();\r\n        if (!selection.isCollapsed) selection.removeAllRanges();\r\n\r\n//        if( e.target.id != 'scroll'){\r\n          this.textAreaElementRef.nativeElement.focus();\r\n//        }\r\n      }\r\n      this.removeMouseEventListeners();\r\n      e.preventDefault();\r\n  }\r\n\r\n  onRotateMouseDown(e: any) {\r\n    console.log('e.id onRotateMouseDown:' + e.target.id );\r\n    e.stopPropagation();\r\n    e.preventDefault();\r\n  }\r\n\r\n  @HostListener('contextmenu', ['$event'])\r\n  onContextMenu(e: Event) {\r\n    this.removeMouseEventListeners();\r\n    if (this.isSelected) return;\r\n    e.stopPropagation();\r\n    e.preventDefault();\r\n\r\n    if (!this.pointerDeviceService.isAllowedToOpenContextMenu) return;\r\n    let position = this.pointerDeviceService.pointers[0];\r\n    this.contextMenuService.open(position, [\r\n      { name: '編輯筆記', action: () => { this.showDetail(this.textNote); } },\r\n      {\r\n        name: '製作副本', action: () => {\r\n          let cloneObject = this.textNote.clone();\r\n          console.log('複製', cloneObject);\r\n          cloneObject.location.x += this.gridSize;\r\n          cloneObject.location.y += this.gridSize;\r\n          cloneObject.toTopmost();\r\n          SoundEffect.play(PresetSound.cardPut);\r\n        }\r\n      },\r\n      {\r\n        name: '刪除', action: () => {\r\n          this.textNote.destroy();\r\n          SoundEffect.play(PresetSound.sweep);\r\n        }\r\n      },\r\n    ], this.title);\r\n  }\r\n\r\n  onMove() {\r\n    SoundEffect.play(PresetSound.cardPick);\r\n  }\r\n\r\n  onMoved() {\r\n    SoundEffect.play(PresetSound.cardPut);\r\n  }\r\n\r\n  calcFitHeightIfNeeded() {\r\n    if (this.calcFitHeightTimer) return;\r\n    this.ngZone.runOutsideAngular(() => {\r\n      this.calcFitHeightTimer = setTimeout(() => {\r\n        this.calcFitHeight();\r\n        this.calcFitHeightTimer = null;\r\n      }, 0);\r\n    });\r\n  }\r\n\r\n  oldScrollHeight = 0;\r\n  oldOffsetHeight = 0;\r\n  \r\n  calcFitHeight() {\r\n    console.log('calcFitHeight');\r\n    let textArea: HTMLTextAreaElement = this.textAreaElementRef.nativeElement;\r\n    \r\n//    if( ( this.oldScrollHeight == 0 ) && ( this.oldOffsetHeight == 0)){\r\n//      textArea.style.height = '0';\r\n//    }\r\n    textArea.style.height = '0';\r\n    if( ! this.textNote.limitHeight ){\r\n      console.log('textArea.scrollHeight' + textArea.scrollHeight);\r\n      console.log('textArea.offsetHeight' + textArea.offsetHeight);\r\n      if (textArea.scrollHeight > textArea.offsetHeight) {\r\n        console.log('更新');\r\n        \r\n        textArea.style.height = textArea.scrollHeight + 'px';\r\n        this.oldScrollHeight = textArea.scrollHeight;\r\n        this.oldOffsetHeight = textArea.offsetHeight;\r\n      }\r\n    }else{\r\n      let textAreaHeight = textArea.scrollHeight;\r\n      let textAreaMax = this.height * this.gridSize  - 2;\r\n      \r\n      if( textAreaMax < this.gridSize ) textAreaMax = this.gridSize - 2;\r\n      if( this.title.length ){ \r\n        textAreaMax -= 32 ;\r\n      }else{\r\n        textAreaMax -= 2 ;\r\n      }\r\n      if( textAreaHeight > textAreaMax ) textAreaHeight = textAreaMax;\r\n      textArea.style.height = textAreaHeight + 'px';\r\n    }\r\n  }\r\n\r\n  private adjustMinBounds(value: number, min: number = 0): number {\r\n    return value < min ? min : value;\r\n  }\r\n\r\n  private addMouseEventListeners() {\r\n    document.body.addEventListener('mouseup', this.callbackOnMouseUp, false);\r\n  }\r\n\r\n  private removeMouseEventListeners() {\r\n    document.body.removeEventListener('mouseup', this.callbackOnMouseUp, false);\r\n  }\r\n\r\n  private showDetail(gameObject: TextNote) {\r\n    EventSystem.trigger('SELECT_TABLETOP_OBJECT', { identifier: gameObject.identifier, className: gameObject.aliasName });\r\n    let coordinate = this.pointerDeviceService.pointers[0];\r\n    let title = '設定共有筆記';\r\n    if (gameObject.title.length) title += ' - ' + gameObject.title;\r\n    let option: PanelOption = { title: title, left: coordinate.x - 350, top: coordinate.y - 200, width: 700, height: 400 };\r\n    let component = this.panelService.open<GameCharacterSheetComponent>(GameCharacterSheetComponent, option);\r\n    component.tabletopObject = gameObject;\r\n  }\r\n}\r\n","<div class=\"component is-3d is-pointer-events-none\"\r\n  appMovable [movable.option]=\"movableOption\" [movable.disable]=\"isSelected\" (movable.ondragstart)=\"onMove()\" (movable.ondragend)=\"onMoved()\">\r\n  <div class=\"is-3d\" appRotable [rotable.option]=\"rotableOption\" (rotable.ondragstart)=\"onMove()\" (rotable.ondragend)=\"onMoved()\">\r\n  <div class=\"component-content is-3d is-pointer-events-auto\"\r\n    [style.width.px]=\"width * gridSize\">\r\n    <div class=\"upright-transform is-3d is-bg-color is-bg-texture\"\r\n      [style.background-image]=\"'url(' + imageFile?.url + ')' | safe: 'style'\" [style.width.px]=\"width * gridSize\" [style.min-height.px]=\"height * gridSize\" >\r\n      <div *ngIf=\"title.length\" class=\"title is-black-background is-pointer-events-none\">{{title}}</div>\r\n\r\n        <textarea (input)=\"calcFitHeight();\" #textArea class=\"textarea\" \r\n        [style.font-size.px]=\"fontSize + 9\" [(ngModel)]=\"text\" spellcheck=\"false\" id=\"text-area\" \r\n        style = \"overflow:hidden auto;\"\r\n        ></textarea>\r\n       \r\n    </div>\r\n    <div class=\"rotate-grab of-left-top\">\r\n      <i class=\"material-icons\">autorenew</i>\r\n    </div>\r\n    <div class=\"rotate-grab of-right-top\">\r\n      <i class=\"material-icons\">autorenew</i>\r\n    </div>\r\n  </div>\r\n</div>\r\n</div>\r\n\r\n<!-- �������������̕����ł悢���m�肷��܂ŃR�����g�Ƃ��Ďc��\r\n<div class=\"component is-3d is-pointer-events-none\"\r\n  appMovable [movable.option]=\"movableOption\" [movable.disable]=\"isSelected\" (movable.ondragstart)=\"onMove()\" (movable.ondragend)=\"onMoved()\">\r\n  <div class=\"is-3d\" appRotable [rotable.option]=\"rotableOption\" (rotable.ondragstart)=\"onMove()\" (rotable.ondragend)=\"onMoved()\">\r\n  <div class=\"component-content is-3d is-pointer-events-auto\"\r\n    [style.width.px]=\"width * gridSize\">\r\n    <div class=\"upright-transform is-3d is-bg-color is-bg-texture\"\r\n      [style.background-image]=\"'url(' + imageFile?.url + ')' | safe: 'style'\" [style.width.px]=\"width * gridSize\" [style.min-height.px]=\"height * gridSize\" [style.max-height.px]=\"height * gridSize\">\r\n      <div *ngIf=\"title.length\" class=\"title is-black-background is-pointer-events-none\">{{title}}</div>\r\n      <textarea (input)=\"calcFitHeight();\" #textArea class=\"textarea\" [ngClass]=\"{'is-pointer-events-none': !isSelected, 'is-pointer-events-auto': isSelected, 'is-outline-text': !isSelected}\"\r\n        [style.font-size.px]=\"fontSize + 9\" [(ngModel)]=\"text\" spellcheck=\"false\"\r\n        style = \"overflow:hidden auto;\" [style.max-height.px]=\"height * gridSize - 27\" ></textarea>\r\n    </div>\r\n    <div class=\"rotate-grab of-left-top\">\r\n      <i class=\"material-icons\">autorenew</i>\r\n    </div>\r\n    <div class=\"rotate-grab of-right-top\">\r\n      <i class=\"material-icons\">autorenew</i>\r\n    </div>\r\n  </div>\r\n</div>\r\n</div>\r\n-->\r\n\r\n","// original version from\r\n// https://gist.github.com/h-mikisato/b5753689483b02b19585365b8ce5940f\r\n// and\r\n// https://github.com/blhsrwznrghfzpr/bcdice-js/blob/extend-samlpe/examples/ts/custom_dicebot.ts\r\n\r\nimport Base from 'bcdice/lib/base';\r\nimport Result from 'bcdice/lib/result';\r\n\r\nimport { BaseInstance } from 'bcdice/lib/internal/types/base';\r\n\r\nexport default class KariDice extends Base {\r\n  static readonly ID = 'KariDice';\r\n  static readonly NAME = '仮ダイス';\r\n  static readonly SORT_KEY = 'かりたいす';\r\n  static readonly COMMAND_PATTERN = /^S?([+\\-(]*\\d+|\\d+B\\d+|C[+\\-(]*\\d+|choice|D66|(repeat|rep|x)\\d+|\\d+R\\d+|\\d+U\\d+|BCDiceVersion|KD)/i;\r\n// 下記は標準ダイスのコマンドパターンマッチするように書き加える\r\n/*\r\n  /^S?([+\\-(]*\\d+|\\d+B\\d+|C[+\\-(]*\\d+|choice|D66|(repeat|rep|x)\\d+|\\d+R\\d+|\\d+U\\d+|BCDiceVersion)/i\r\n*/\r\n  static readonly HELP_MESSAGE = `\r\n・KD\r\nゾロ目かどうかを判定します\r\n`.trim();\r\n\r\n  private command: string;\r\n  private commandWithoutRepeat: string;\r\n  private repeat: number;\r\n\r\n  static eval(command: string): Result | null {\r\n    return new KariDice(command).eval();\r\n  }\r\n\r\n  constructor(command: string, internal?: BaseInstance) {\r\n    const found = command.replace(/^repeat/i, 'x').replace(/^rep/i, 'x').match(/^x([0-9]+)\\s+(.*)/i);\r\n    let commandWithoutRepeat: string;\r\n    let repeat: number;\r\n    if (found !== null) {\r\n      repeat = parseInt(found[1],10);\r\n      if (repeat <= 0) { repeat = 1; }\r\n      commandWithoutRepeat = found[2];\r\n    } else {\r\n      repeat = 1;\r\n      commandWithoutRepeat = command;\r\n    }\r\n    const changeText = commandWithoutRepeat.replace(/^KD/i, '2D6').replace(/^SKD/i, 'S2D6');\r\n    if (repeat > 1) {\r\n      super(`x${repeat} ${changeText}`, internal);\r\n    } else {\r\n      super(changeText, internal);\r\n    }\r\n    this.command = command;\r\n    this.commandWithoutRepeat = commandWithoutRepeat;\r\n    this.repeat = repeat;\r\n  }\r\n\r\n  eval(): Result | null {\r\n    if (this.commandWithoutRepeat.match(/^KD/i)) {\r\n      return this.custom_dice();\r\n    }\r\n    if (this.commandWithoutRepeat.match(/^SKD/i)) {\r\n      return this.custom_dice();\r\n    }\r\n    return super.eval();\r\n  }\r\n\r\n  private custom_dice(): Result | null {\r\n    const result = super.eval();\r\n    if (result == null) {\r\n      return null;\r\n    }\r\n    let zorome = 0;\r\n    for (let i = 0; i < this.repeat; i++) {\r\n      const val1 = result.detailedRands[2 * i].value;\r\n      const val2 = result.detailedRands[2 * i + 1].value;\r\n      if (val1 === val2) {\r\n        zorome += 1;\r\n      }\r\n    }\r\n\r\n    let zoromeText: string;\r\n    if (this.repeat == 1 && zorome == 1) {\r\n      zoromeText = ' ＞ ゾロ目！';\r\n    } else if (zorome >= 1) {\r\n      zoromeText = `\\n\\n＞ ゾロ目${zorome}個！`;\r\n    } else {\r\n      zoromeText = '';\r\n    }\r\n\r\n    const text = result.text + zoromeText;\r\n\r\n    return {\r\n      ...result,\r\n      text,\r\n    };\r\n  }\r\n}\r\n","import { PointerCoordinate, PointerData } from 'service/pointer-device.service';\r\n\r\nconst MOUSE_IDENTIFIER = -9999;\r\n\r\ninterface InputHandlerOption {\r\n  readonly capture?: boolean\r\n  readonly passive?: boolean\r\n  readonly always?: boolean\r\n}\r\n\r\nexport class InputHandler {\r\n  onStart: (ev: MouseEvent | TouchEvent) => void;\r\n  onMove: (ev: MouseEvent | TouchEvent) => void;\r\n  onEnd: (ev: MouseEvent | TouchEvent) => void;\r\n  onContextMenu: (ev: MouseEvent | TouchEvent) => void;\r\n\r\n  private callbackOnMouse = this.onMouse.bind(this);\r\n  private callbackOnTouch = this.onTouch.bind(this);\r\n  private callbackOnMenu = this.onMenu.bind(this);\r\n\r\n  private lastPointers: PointerData[] = [];\r\n  private primaryPointer: PointerData = { x: 0, y: 0, z: 0, identifier: MOUSE_IDENTIFIER }\r\n  get pointer(): PointerCoordinate { return this.primaryPointer; }\r\n\r\n  private _isDragging: boolean = false;\r\n  private _isGrabbing: boolean = false;\r\n  get isDragging(): boolean { return this._isDragging; }\r\n  get isGrabbing(): boolean { return this._isGrabbing; }\r\n\r\n  private _isDestroyed: boolean = false;\r\n  get isDestroyed(): boolean { return this._isDestroyed; }\r\n\r\n  private readonly option: InputHandlerOption = null;\r\n\r\n  constructor(readonly target: HTMLElement, option: InputHandlerOption = { capture: false, passive: false, always: false }) {\r\n    this.option = {\r\n      capture: option.capture === true,\r\n      passive: option.passive === true,\r\n      always: option.always === true\r\n    };\r\n    this.initialize();\r\n  }\r\n\r\n  private initialize() {\r\n    this.target.addEventListener('mousedown', this.callbackOnMouse, this.option.capture);\r\n    this.target.addEventListener('touchstart', this.callbackOnTouch, this.option.capture);\r\n    if (this.option.always) this.addEventListeners();\r\n  }\r\n\r\n  destroy() {\r\n    this.cancel();\r\n    this._isDestroyed = true;\r\n    this.target.removeEventListener('mousedown', this.callbackOnMouse, this.option.capture);\r\n    this.target.removeEventListener('touchstart', this.callbackOnTouch, this.option.capture);\r\n    this.removeEventListeners();\r\n  }\r\n\r\n  cancel() {\r\n    this._isDragging = this._isGrabbing = false;\r\n    if (!this.option.always) this.removeEventListeners();\r\n  }\r\n\r\n  private onMouse(e: MouseEvent) {\r\n    let mosuePointer: PointerData = { x: e.pageX, y: e.pageY, z: 0, identifier: MOUSE_IDENTIFIER };\r\n    if (this.isSyntheticEvent(mosuePointer)) return;\r\n    this.lastPointers = [mosuePointer];\r\n    this.primaryPointer = mosuePointer;\r\n\r\n    this.onPointer(e);\r\n  }\r\n\r\n  private onTouch(e: TouchEvent) {\r\n    let length = e.changedTouches.length;\r\n    if (length < 1) return;\r\n    this.lastPointers = [];\r\n    for (let i = 0; i < length; i++) {\r\n      let touch = e.changedTouches[i];\r\n      let touchPointer: PointerData = { x: touch.pageX, y: touch.pageY, z: 0, identifier: touch.identifier };\r\n      this.lastPointers.push(touchPointer);\r\n    }\r\n\r\n    if (e.type === 'touchstart') {\r\n      this.primaryPointer = this.lastPointers[0];\r\n    } else {\r\n      let changedTouches = Array.from(e.changedTouches);\r\n      let touch = changedTouches.find(touch => touch.identifier === this.primaryPointer.identifier);\r\n      if (touch == null) {\r\n        let isTouchContinues = Array.from(e.touches).find(touch => touch.identifier === this.primaryPointer.identifier) != null;\r\n        if (!isTouchContinues) {\r\n          // タッチを追跡できなくなったら終了\r\n          if (this.onEnd) this.onEnd(e);\r\n          this.cancel();\r\n        }\r\n        return;\r\n      }\r\n      let touchPointer: PointerData = { x: touch.pageX, y: touch.pageY, z: 0, identifier: touch.identifier };\r\n      this.primaryPointer = touchPointer;\r\n    }\r\n\r\n    this.onPointer(e);\r\n  }\r\n\r\n  private onPointer(e: MouseEvent | TouchEvent) {\r\n    switch (e.type) {\r\n      case 'mousedown':\r\n      case 'touchstart':\r\n        this._isGrabbing = true;\r\n        this._isDragging = false;\r\n        this.addEventListeners();\r\n        if (this.onStart) this.onStart(e);\r\n        break;\r\n      case 'mousemove':\r\n      case 'touchmove':\r\n        if (this.onMove) this.onMove(e);\r\n        this._isDragging = this._isGrabbing;\r\n        break;\r\n      default:\r\n        if (this.onEnd) this.onEnd(e);\r\n        this.cancel();\r\n        break;\r\n    }\r\n  }\r\n\r\n  private onMenu(e: MouseEvent | TouchEvent) {\r\n    if (this.onContextMenu) this.onContextMenu(e);\r\n  }\r\n\r\n  private isSyntheticEvent(mosuePointer: PointerData, threshold: number = 15): boolean {\r\n    for (let pointer of this.lastPointers) {\r\n      if (pointer.identifier === mosuePointer.identifier) continue;\r\n      let distance = (mosuePointer.x - pointer.x) ** 2 + (mosuePointer.y - pointer.y) ** 2;\r\n      if (distance < threshold ** 2) {\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n  private addEventListeners() {\r\n    let option: AddEventListenerOptions = {\r\n      capture: this.option.capture,\r\n      passive: this.option.passive\r\n    }\r\n    this.target.ownerDocument.addEventListener('mousemove', this.callbackOnMouse, option);\r\n    this.target.ownerDocument.addEventListener('mouseup', this.callbackOnMouse, option);\r\n    this.target.ownerDocument.addEventListener('touchmove', this.callbackOnTouch, option);\r\n    this.target.ownerDocument.addEventListener('touchend', this.callbackOnTouch, option);\r\n    this.target.ownerDocument.addEventListener('touchcancel', this.callbackOnTouch, option);\r\n    this.target.ownerDocument.addEventListener('contextmenu', this.callbackOnMenu, option);\r\n    this.target.ownerDocument.addEventListener('drop', this.callbackOnMouse, option);\r\n  }\r\n\r\n  private removeEventListeners() {\r\n    let option: EventListenerOptions = {\r\n      capture: this.option.capture\r\n    }\r\n    this.target.ownerDocument.removeEventListener('mousemove', this.callbackOnMouse, option);\r\n    this.target.ownerDocument.removeEventListener('mouseup', this.callbackOnMouse, option);\r\n    this.target.ownerDocument.removeEventListener('touchmove', this.callbackOnTouch, option);\r\n    this.target.ownerDocument.removeEventListener('touchend', this.callbackOnTouch, option);\r\n    this.target.ownerDocument.removeEventListener('touchcancel', this.callbackOnTouch, option);\r\n    this.target.ownerDocument.removeEventListener('contextmenu', this.callbackOnMenu, option);\r\n    this.target.ownerDocument.removeEventListener('drop', this.callbackOnMouse, option);\r\n  }\r\n}\r\n","import { ComponentFactoryResolver, ComponentRef, Injectable, ViewContainerRef } from '@angular/core';\r\n\r\ninterface ContextMenuPoint {\r\n  x: number,\r\n  y: number\r\n}\r\n\r\nexport enum ContextMenuType {\r\n  ACTION = 'action',\r\n  SEPARATOR = 'separator',\r\n}\r\n\r\nexport const ContextMenuSeparator: ContextMenuAction = {\r\n  name: '',\r\n  enabled: true,\r\n  type: ContextMenuType.SEPARATOR\r\n}\r\n\r\nexport interface ContextMenuAction {\r\n  name: string,\r\n  action?: Function,\r\n  enabled?: boolean,\r\n  type?: ContextMenuType,\r\n  subActions?: ContextMenuAction[]\r\n}\r\n\r\n@Injectable()\r\nexport class ContextMenuService {\r\n  /* Todo */\r\n  static defaultParentViewContainerRef: ViewContainerRef;\r\n  static ContextMenuComponentClass: { new(...args: any[]): any } = null;\r\n\r\n  private panelComponentRef: ComponentRef<any>\r\n\r\n  title: string = '';\r\n  actions: ContextMenuAction[] = [];\r\n  position: ContextMenuPoint = { x: 0, y: 0 };\r\n\r\n  constructor(\r\n    private componentFactoryResolver: ComponentFactoryResolver\r\n  ) { }\r\n\r\n  get isShow(): boolean {\r\n    return this.panelComponentRef ? true : false;\r\n  }\r\n\r\n  open(position: ContextMenuPoint, actions: ContextMenuAction[], title?: string, parentViewContainerRef?: ViewContainerRef) {\r\n    this.close();\r\n    if (!parentViewContainerRef) {\r\n      parentViewContainerRef = ContextMenuService.defaultParentViewContainerRef;\r\n      console.log('Context Open');\r\n    }\r\n    let panelComponentRef: ComponentRef<any>;\r\n\r\n    const injector = parentViewContainerRef.injector;\r\n    const panelComponentFactory = this.componentFactoryResolver.resolveComponentFactory(ContextMenuService.ContextMenuComponentClass);\r\n\r\n    panelComponentRef = parentViewContainerRef.createComponent(panelComponentFactory, parentViewContainerRef.length, injector);\r\n\r\n    const childPanelService: ContextMenuService = panelComponentRef.injector.get(ContextMenuService);\r\n\r\n    childPanelService.panelComponentRef = panelComponentRef;\r\n    if (actions) {\r\n      childPanelService.actions = actions;\r\n    }\r\n    if (position) {\r\n      childPanelService.position.x = position.x;\r\n      childPanelService.position.y = position.y;\r\n    }\r\n\r\n    childPanelService.title = title != null ? title : '';\r\n\r\n    panelComponentRef.onDestroy(() => {\r\n      childPanelService.panelComponentRef = null;\r\n    });\r\n  }\r\n\r\n  close() {\r\n    if (this.panelComponentRef) {\r\n      this.panelComponentRef.destroy();\r\n      this.panelComponentRef = null;\r\n    }\r\n  }\r\n}","import { Component, NgZone, OnDestroy, OnInit } from '@angular/core';\r\n\r\nimport { AudioFile } from './core/file-storage/audio-file';\r\nimport { AudioPlayer } from './core/file-storage/audio-player';\r\nimport { AudioStorage } from './core/file-storage/audio-storage';\r\n\r\nimport { SyncObject, SyncVar } from './core/synchronize-object/decorator';\r\nimport { GameObject, ObjectContext } from './core/synchronize-object/game-object';\r\nimport { EventSystem } from './core/system';\r\n\r\nimport { ImageFile } from '@udonarium/core/file-storage/image-file';\r\nimport { ImageStorage } from '@udonarium/core/file-storage/image-storage';\r\nimport { ObjectStore } from '@udonarium/core/synchronize-object/object-store';\r\n\r\nimport { CutInWindowComponent } from 'component/cut-in-window/cut-in-window.component';\r\nimport { ModalService } from 'service/modal.service';\r\n\r\nimport { CutIn } from './cut-in';\r\n\r\nimport { Network } from '@udonarium/core/system';\r\n\r\n@SyncObject('cut-in-launcher')\r\nexport class CutInLauncher extends GameObject {\r\n\r\n  @SyncVar() test: string = 'test001';\r\n  @SyncVar() launchCutInIdentifier: string  = '';\r\n  @SyncVar() launchTimeStamp: number = 0;\r\n  @SyncVar() launchMySelf = false;\r\n  @SyncVar() launchIsStart: boolean = false;\r\n  @SyncVar() stopBlankTagCutInTimeStamp: number = 0;\r\n  @SyncVar() sendTo : string = '';\r\n\r\n  reloadDummy = 5;\r\n\r\n  // カットイン時のジューク音楽停止はカットインリストウィンドウ操作による\r\n  // 秘話仕様で止まる必要もないためそのまま止めずにカットインする\r\n  chatActivateCutIn( text: string , sendTo: string){\r\n    const text2 = ' ' + text;\r\n    const matches_array = text2.match(/\\s(\\S+)$/i);\r\n    let activateName = '';\r\n\r\n    if ( matches_array ){\r\n      activateName = RegExp.$1;\r\n      const allCutIn = this.getCutIns();\r\n\r\n      for ( const cutIn_ of allCutIn ){\r\n        if ( cutIn_.chatActivate && ( cutIn_.name == activateName ) ){\r\n          this.startCutIn( cutIn_ , sendTo);\r\n          return ;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  startCutInMySelf( cutIn: CutIn ){\r\n    this.launchCutInIdentifier = cutIn.identifier;\r\n    this.launchIsStart = true;\r\n    this.launchTimeStamp = this.launchTimeStamp + 1;\r\n    this.launchMySelf = true;\r\n    this.sendTo = '';\r\n    this.startSelfCutIn();\r\n  }\r\n\r\n\r\n  startCutIn( cutIn: CutIn , sendTo?: string ){\r\n    this.launchCutInIdentifier = cutIn.identifier;\r\n    this.launchIsStart = true;\r\n    this.launchTimeStamp = this.launchTimeStamp + 1;\r\n    this.launchMySelf = false;\r\n\r\n    if ( sendTo ) {\r\n      this.sendTo = sendTo;\r\n    }\r\n    else{\r\n      this.sendTo = '';\r\n    }\r\n\r\n    this.startSelfCutIn();\r\n  }\r\n\r\n  stopCutIn( cutIn: CutIn ){\r\n    this.launchCutInIdentifier = cutIn.identifier;\r\n    this.launchIsStart = false;\r\n    this.launchTimeStamp = this.launchTimeStamp + 1;\r\n    this.launchMySelf = false;\r\n\r\n    this.stopSelfCutIn();\r\n  }\r\n\r\n  stopBlankTagCutIn( ){\r\n    this.stopBlankTagCutInTimeStamp = this.stopBlankTagCutInTimeStamp + 1;\r\n    EventSystem.trigger('STOP_CUT_IN_BY_BGM', {  });\r\n  }\r\n\r\n  sameTagCutIn( cutIn: CutIn ): CutIn[] {\r\n\r\n    const cutIns = this.getCutIns() ;\r\n    const tagName = cutIn.tagName;\r\n    const sameTagCutIn: CutIn[] = [];\r\n    for ( const cutIn_ of cutIns ){\r\n      if ( cutIn_.tagName == tagName && cutIn_.identifier !== cutIn.identifier){\r\n        sameTagCutIn.push( cutIn_ );\r\n      }\r\n    }\r\n    return sameTagCutIn;\r\n  }\r\n\r\n  startSelfCutIn( ){\r\n    const cutIn_ = ObjectStore.instance.get(this.launchCutInIdentifier);\r\n    EventSystem.trigger('START_CUT_IN', { cutIn : cutIn_ });\r\n  }\r\n\r\n  stopSelfCutIn( ){\r\n    const cutIn_ = ObjectStore.instance.get(this.launchCutInIdentifier);\r\n    EventSystem.trigger('STOP_CUT_IN', { cutIn : cutIn_ });\r\n  }\r\n\r\n\r\n\r\n  stopSelfCutInByIdentifier( identifier: string ){\r\n    const cutIn_ = ObjectStore.instance.get( identifier );\r\n    EventSystem.trigger('STOP_CUT_IN', { cutIn : cutIn_ });\r\n  }\r\n\r\n  getCutIns(): CutIn[] {\r\n    return ObjectStore.instance.getObjects(CutIn);\r\n  }\r\n\r\n\r\n  // GameObject Lifecycle\r\n  onStoreAdded() {\r\n    super.onStoreAdded();\r\n  }\r\n\r\n  // GameObject Lifecycle\r\n  onStoreRemoved() {\r\n    super.onStoreRemoved();\r\n  }\r\n\r\n  // override\r\n  apply(context: ObjectContext) {\r\n    console.log('CutInLauncher apply() CALL');\r\n\r\n    const launchCutInIdentifier = this.launchCutInIdentifier;\r\n    const launchIsStart = this.launchIsStart;\r\n    const launchTimeStamp = this.launchTimeStamp;\r\n    const stopBlankTagCutInTimeStamp = this.stopBlankTagCutInTimeStamp;\r\n    const launchMySelf = this.launchMySelf;\r\n    const sendTo = this.sendTo;\r\n\r\n    super.apply(context);\r\n\r\n    if ( this.launchMySelf ) { return; } // ソロ再生用の場合他の人は発火しない\r\n\r\n    console.log('this.sendTo :' + this.sendTo);\r\n\r\n    if ( stopBlankTagCutInTimeStamp !== this.stopBlankTagCutInTimeStamp ){\r\n      console.log('データ伝搬で検知 無タグカットイン停止のトリガー');\r\n      EventSystem.trigger('STOP_CUT_IN_BY_BGM', {  });\r\n    }\r\n\r\n    if ( this.sendTo != '' ){ // 秘話再生\r\n      if ( this.sendTo != Network.peerContext.userId ){\r\n        return;\r\n      }\r\n    }\r\n\r\n    if ( launchCutInIdentifier !== this.launchCutInIdentifier ||\r\n        launchIsStart !== this.launchIsStart ||\r\n        launchTimeStamp !== this.launchTimeStamp ){\r\n      if ( this.launchIsStart ){\r\n        this.startSelfCutIn();\r\n      }else{\r\n        this.stopSelfCutIn();\r\n      }\r\n    }\r\n  }\r\n}\r\n","export namespace CanvasUtil {\r\n  /**\r\n   * https://github.com/viliusle/Hermite-resize\r\n   * Hermite resize - fast image resize/resample using Hermite filter. 1 cpu version!\r\n   * \r\n   * @param {HtmlElement} canvas\r\n   * @param {int} width\r\n   * @param {int} height\r\n   * @param {boolean} resize_canvas if true, canvas will be resized. Optional.\r\n   */\r\n  export function resize(canvas: HTMLCanvasElement, width: number, height: number, resize_canvas?: boolean) {\r\n    let width_source = canvas.width;\r\n    let height_source = canvas.height;\r\n    width = Math.round(width);\r\n    height = Math.round(height);\r\n\r\n    let ratio_w = width_source / width;\r\n    let ratio_h = height_source / height;\r\n    let ratio_w_half = Math.ceil(ratio_w / 2);\r\n    let ratio_h_half = Math.ceil(ratio_h / 2);\r\n\r\n    let ctx = canvas.getContext('2d');\r\n    let img = ctx.getImageData(0, 0, width_source, height_source);\r\n    let img2 = ctx.createImageData(width, height);\r\n    let data = img.data;\r\n    let data2 = img2.data;\r\n\r\n    for (let j = 0; j < height; j++) {\r\n      for (let i = 0; i < width; i++) {\r\n        let x2 = (i + j * width) * 4;\r\n        let weight = 0;\r\n        let weights = 0;\r\n        let weights_alpha = 0;\r\n        let gx_r = 0;\r\n        let gx_g = 0;\r\n        let gx_b = 0;\r\n        let gx_a = 0;\r\n        let center_y = (j + 0.5) * ratio_h;\r\n        let yy_start = Math.floor(j * ratio_h);\r\n        let yy_stop = Math.ceil((j + 1) * ratio_h);\r\n        for (let yy = yy_start; yy < yy_stop; yy++) {\r\n          let dy = Math.abs(center_y - (yy + 0.5)) / ratio_h_half;\r\n          let center_x = (i + 0.5) * ratio_w;\r\n          let w0 = dy * dy; //pre-calc part of w\r\n          let xx_start = Math.floor(i * ratio_w);\r\n          let xx_stop = Math.ceil((i + 1) * ratio_w);\r\n          for (let xx = xx_start; xx < xx_stop; xx++) {\r\n            let dx = Math.abs(center_x - (xx + 0.5)) / ratio_w_half;\r\n            let w = Math.sqrt(w0 + dx * dx);\r\n            if (w >= 1) {\r\n              //pixel too far\r\n              continue;\r\n            }\r\n            //hermite filter\r\n            weight = 2 * w * w * w - 3 * w * w + 1;\r\n            let pos_x = 4 * (xx + yy * width_source);\r\n            //alpha\r\n            gx_a += weight * data[pos_x + 3];\r\n            weights_alpha += weight;\r\n            //colors\r\n            if (data[pos_x + 3] < 255)\r\n              weight = weight * data[pos_x + 3] / 250;\r\n            gx_r += weight * data[pos_x];\r\n            gx_g += weight * data[pos_x + 1];\r\n            gx_b += weight * data[pos_x + 2];\r\n            weights += weight;\r\n          }\r\n        }\r\n        data2[x2] = gx_r / weights;\r\n        data2[x2 + 1] = gx_g / weights;\r\n        data2[x2 + 2] = gx_b / weights;\r\n        data2[x2 + 3] = gx_a / weights_alpha;\r\n      }\r\n    }\r\n    //clear and resize canvas\r\n    if (resize_canvas === true) {\r\n      canvas.width = width;\r\n      canvas.height = height;\r\n    } else {\r\n      ctx.clearRect(0, 0, width_source, height_source);\r\n    }\r\n\r\n    //draw\r\n    ctx.putImageData(img2, 0, 0);\r\n  }\r\n}\r\n","type TimerCallback = (...args: any[]) => void;\r\n\r\nexport class ResettableTimeout {\r\n  private callback: TimerCallback;\r\n  private timerMilliSecond: number = 0;\r\n  private timeoutDate: number = 0;\r\n  private timeoutTimer: NodeJS.Timer;\r\n  private isStopped: boolean = false;\r\n\r\n  get isActive(): boolean { return this.timeoutTimer != null; }\r\n\r\n  constructor(callback: TimerCallback, ms: number) {\r\n    this.callback = callback;\r\n    this.timerMilliSecond = ms;\r\n    this.reset();\r\n  }\r\n\r\n  stop() {\r\n    this.isStopped = true;\r\n  }\r\n\r\n  clear() {\r\n    this.callback = null;\r\n    this.timerMilliSecond = 0;\r\n    this.timeoutDate = 0;\r\n    if (this.timeoutTimer) clearTimeout(this.timeoutTimer);\r\n    this.timeoutTimer = null;\r\n    this.isStopped = false;\r\n  }\r\n\r\n  reset()\r\n  reset(ms: number)\r\n  reset(callback: TimerCallback, ms: number)\r\n  reset(...args: any[]) {\r\n    if (args.length === 1) {\r\n      this.timerMilliSecond = args[0];\r\n    } else if (1 < args.length) {\r\n      this.callback = args[0];\r\n      this.timerMilliSecond = args[1];\r\n    }\r\n    this.isStopped = false;\r\n\r\n    let oldTimeoutDate = this.timeoutDate;\r\n    this.timeoutDate = performance.now() + this.timerMilliSecond;\r\n\r\n    if (this.timeoutTimer && oldTimeoutDate <= this.timeoutDate) return;\r\n    this.setTimeout();\r\n  }\r\n\r\n  private setTimeout() {\r\n    if (this.timeoutTimer) clearTimeout(this.timeoutTimer);\r\n    this.timeoutTimer = null;\r\n    if (!this.callback) return;\r\n\r\n    this.timeoutTimer = setTimeout(() => {\r\n      this.timeoutTimer = null;\r\n      if (this.isStopped) return;\r\n\r\n      if (performance.now() < this.timeoutDate) {\r\n        this.setTimeout();\r\n      } else {\r\n        if (this.callback) this.callback();\r\n      }\r\n    }, this.timeoutDate - performance.now());\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { Card } from '@udonarium/card';\r\nimport { CardStack } from '@udonarium/card-stack';\r\nimport { ImageContext, ImageFile } from '@udonarium/core/file-storage/image-file';\r\nimport { ImageStorage } from '@udonarium/core/file-storage/image-storage';\r\nimport { ObjectStore } from '@udonarium/core/synchronize-object/object-store';\r\nimport { EventSystem } from '@udonarium/core/system';\r\nimport { DiceSymbol, DiceType } from '@udonarium/dice-symbol';\r\nimport { GameCharacter } from '@udonarium/game-character';\r\nimport { GameTable } from '@udonarium/game-table';\r\nimport { GameTableMask } from '@udonarium/game-table-mask';\r\nimport { PresetSound, SoundEffect } from '@udonarium/sound-effect';\r\nimport { TableSelecter } from '@udonarium/table-selecter';\r\nimport { Terrain } from '@udonarium/terrain';\r\nimport { TextNote } from '@udonarium/text-note';\r\n\r\nimport { ImageTag } from '@udonarium/image-tag'; \r\nimport { DataElement } from '@udonarium/data-element';\r\n\r\n\r\nimport { ContextMenuAction } from './context-menu.service';\r\nimport { PointerCoordinate } from './pointer-device.service';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class TabletopActionService {\r\n\r\n  constructor() { }\r\n\r\n  createGameCharacter(position: PointerCoordinate): GameCharacter {\r\n    let character = GameCharacter.create('新しいキャラクター', 1, '');\r\n    character.location.x = position.x - 25;\r\n    character.location.y = position.y - 25;\r\n    character.posZ = position.z;\r\n    return character;\r\n  }\r\n\r\n  createGameTableMask(position: PointerCoordinate): GameTableMask {\r\n    let viewTable = this.getViewTable();\r\n    if (!viewTable) return;\r\n\r\n    let tableMask = GameTableMask.create('マップマスク', 5, 5, 100);\r\n    tableMask.location.x = position.x - 25;\r\n    tableMask.location.y = position.y - 25;\r\n    tableMask.posZ = position.z;\r\n\r\n    viewTable.appendChild(tableMask);\r\n    return tableMask;\r\n  }\r\n\r\n\r\n  createTerrain(position: PointerCoordinate): Terrain {\r\n    let url: string = './assets/images/tex.jpg';\r\n    let image: ImageFile = ImageStorage.instance.get(url)\r\n//本家PR #92より\r\n//    if (!image) image = ImageStorage.instance.add(url);\r\n    if (!image) {\r\n      image = ImageStorage.instance.add(url);\r\n      ImageTag.create(image.identifier).tag = '地形';\r\n    }\r\n//\r\n    let viewTable = this.getViewTable();\r\n    if (!viewTable) return;\r\n\r\n    let terrain = Terrain.create('地形', 2, 2, 2, image.identifier, image.identifier);\r\n    terrain.location.x = position.x - 50;\r\n    terrain.location.y = position.y - 50;\r\n    terrain.posZ = position.z;\r\n\r\n    viewTable.appendChild(terrain);\r\n    return terrain;\r\n  }\r\n\r\n  createTextNote(position: PointerCoordinate): TextNote {\r\n    let textNote = TextNote.create('共有メモ', 'テキストを入力してください', 5, 4, 3);\r\n    textNote.location.x = position.x;\r\n    textNote.location.y = position.y;\r\n    textNote.posZ = position.z;\r\n    return textNote;\r\n  }\r\n\r\n  createDiceSymbol(position: PointerCoordinate, name: string, diceType: DiceType, imagePathPrefix: string): DiceSymbol {\r\n    let diceSymbol = DiceSymbol.create(name, diceType, 1);\r\n    let image: ImageFile = null;\r\n\r\n    diceSymbol.faces.forEach(face => {\r\n      let url: string = `./assets/images/dice/${imagePathPrefix}/${imagePathPrefix}[${face}].png`;\r\n      image = ImageStorage.instance.get(url);\r\n      if (!image) { image = ImageStorage.instance.add(url); }\r\n      diceSymbol.imageDataElement.getFirstElementByName(face).value = image.identifier;\r\n    });\r\n\r\n    diceSymbol.location.x = position.x - 25;\r\n    diceSymbol.location.y = position.y - 25;\r\n    diceSymbol.posZ = position.z;\r\n    return diceSymbol;\r\n  }\r\n\r\n\r\n  createTrump(position: PointerCoordinate): CardStack {\r\n    let cardStack = CardStack.create('トランプ山札');\r\n    cardStack.location.x = position.x - 25;\r\n    cardStack.location.y = position.y - 25;\r\n    cardStack.posZ = position.z;\r\n\r\n    let back: string = './assets/images/trump/z02.gif';\r\n//本家PR #92より\r\n//    if (!ImageStorage.instance.get(back)) {\r\n//      ImageStorage.instance.add(back);\r\n//    }\r\n    if (!ImageStorage.instance.get(back)) {\r\n      const image = ImageStorage.instance.add(back);\r\n      ImageTag.create(image.identifier).tag = 'トランプ';\r\n    }\r\n//\r\n    let suits: string[] = ['c', 'd', 'h', 's'];\r\n    let trumps: string[] = [];\r\n\r\n    for (let suit of suits) {\r\n      for (let i = 1; i <= 13; i++) {\r\n        trumps.push(suit + (('00' + i).slice(-2)));\r\n      }\r\n    }\r\n\r\n    trumps.push('x01');\r\n    trumps.push('x02');\r\n\r\n    for (let trump of trumps) {\r\n      let url: string = './assets/images/trump/' + trump + '.gif';\r\n      if (!ImageStorage.instance.get(url)) {\r\n//本家PR #92より\r\n//          ImageStorage.instance.add(url);\r\n          const image = ImageStorage.instance.add(url);\r\n          ImageTag.create(image.identifier).tag = 'トランプ';\r\n//\r\n\r\n      }\r\n      let card = Card.create('カード', url, back);\r\n      cardStack.putOnBottom(card);\r\n    }\r\n    return cardStack;\r\n  }\r\n\r\n\r\n  makeDefaultTable() {\r\n    let tableSelecter = new TableSelecter('tableSelecter');\r\n    tableSelecter.initialize();\r\n\r\n    let gameTable = new GameTable('gameTable');\r\n    let testBgFile: ImageFile = null;\r\n    let bgFileContext = ImageFile.createEmpty('testTableBackgroundImage_image').toContext();\r\n    bgFileContext.url = './assets/images/BG10a_80.jpg';\r\n    testBgFile = ImageStorage.instance.add(bgFileContext);\r\n//本家PR #92より\r\n    ImageTag.create(testBgFile.identifier).tag = '背景';    \r\n//\r\n//entyu_2 #92\r\n    //ImageTag.create(testBgFile.identifier).tag = 'default テーブル';\r\n//\r\n\r\n    gameTable.name = '最初のテーブル';\r\n    gameTable.imageIdentifier = testBgFile.identifier;\r\n    gameTable.width = 20;\r\n    gameTable.height = 15;\r\n    gameTable.initialize();\r\n\r\n    tableSelecter.viewTableIdentifier = gameTable.identifier;\r\n  }\r\n\r\n\r\n  //バフ追加\r\n  addBuffRound(character :GameCharacter,name:string,subcom:string,round:number){\r\n    // @ts-ignore\r\n    if(character.buffDataElement.children){\r\n      for (let dataElm of character.buffDataElement.children){\r\n        dataElm.appendChild(DataElement.create(name, round , { 'type': 'numberResource', 'currentValue': subcom }, name + '_' + character.identifier ));\r\n        return;\r\n      }\r\n    }\r\n  }\r\n\r\n  initAprilDiceImage(){\r\n    let file: ImageFile = null;\r\n    let fileContext: ImageContext = null;\r\n    \r\n    fileContext = ImageFile.createEmpty('1d4_dice[00]').toContext();\r\n    fileContext.url = './assets/images/april_dice/1d4_dice[00].png';\r\n    file = ImageStorage.instance.add(fileContext);\r\n    ImageTag.create(file.identifier).tag = 'システム予約';    \r\n\r\n    fileContext = ImageFile.createEmpty('1d4_dice[01]').toContext();\r\n    fileContext.url = './assets/images/april_dice/1d4_dice[01].png';\r\n    file = ImageStorage.instance.add(fileContext);\r\n    ImageTag.create(file.identifier).tag = 'システム予約';    \r\n\r\n    fileContext = ImageFile.createEmpty('1d4_dice[02]').toContext();\r\n    fileContext.url = './assets/images/april_dice/1d4_dice[02].png';\r\n    file = ImageStorage.instance.add(fileContext);\r\n    ImageTag.create(file.identifier).tag = 'システム予約';    \r\n\r\n    fileContext = ImageFile.createEmpty('1d4_dice[03]').toContext();\r\n    fileContext.url = './assets/images/april_dice/1d4_dice[03].png';\r\n    file = ImageStorage.instance.add(fileContext);\r\n    ImageTag.create(file.identifier).tag = 'システム予約';    \r\n\r\n    fileContext = ImageFile.createEmpty('1d6_dice[00]').toContext();\r\n    fileContext.url = './assets/images/april_dice/1d6_dice[00].png';\r\n    file = ImageStorage.instance.add(fileContext);\r\n    ImageTag.create(file.identifier).tag = 'システム予約';    \r\n\r\n    fileContext = ImageFile.createEmpty('1d6_dice[01]').toContext();\r\n    fileContext.url = './assets/images/april_dice/1d6_dice[01].png';\r\n    file = ImageStorage.instance.add(fileContext);\r\n    ImageTag.create(file.identifier).tag = 'システム予約';    \r\n\r\n    fileContext = ImageFile.createEmpty('1d6_dice[02]').toContext();\r\n    fileContext.url = './assets/images/april_dice/1d6_dice[02].png';\r\n    file = ImageStorage.instance.add(fileContext);\r\n    ImageTag.create(file.identifier).tag = 'システム予約';    \r\n\r\n    fileContext = ImageFile.createEmpty('1d6_dice[03]').toContext();\r\n    fileContext.url = './assets/images/april_dice/1d6_dice[03].png';\r\n    file = ImageStorage.instance.add(fileContext);\r\n    ImageTag.create(file.identifier).tag = 'システム予約';    \r\n\r\n    fileContext = ImageFile.createEmpty('2d6_dice[00]').toContext();\r\n    fileContext.url = './assets/images/april_dice/2d6_dice[00].png';\r\n    file = ImageStorage.instance.add(fileContext);\r\n    ImageTag.create(file.identifier).tag = 'システム予約';    \r\n\r\n    fileContext = ImageFile.createEmpty('2d6_dice[01]').toContext();\r\n    fileContext.url = './assets/images/april_dice/2d6_dice[01].png';\r\n    file = ImageStorage.instance.add(fileContext);\r\n    ImageTag.create(file.identifier).tag = 'システム予約';    \r\n\r\n    fileContext = ImageFile.createEmpty('2d6_dice[02]').toContext();\r\n    fileContext.url = './assets/images/april_dice/2d6_dice[02].png';\r\n    file = ImageStorage.instance.add(fileContext);\r\n    ImageTag.create(file.identifier).tag = 'システム予約';    \r\n\r\n    fileContext = ImageFile.createEmpty('2d6_dice[03]').toContext();\r\n    fileContext.url = './assets/images/april_dice/2d6_dice[03].png';\r\n    file = ImageStorage.instance.add(fileContext);\r\n    ImageTag.create(file.identifier).tag = 'システム予約';    \r\n    \r\n    fileContext = ImageFile.createEmpty('1d8_dice[00]').toContext();\r\n    fileContext.url = './assets/images/april_dice/1d8_dice[00].png';\r\n    file = ImageStorage.instance.add(fileContext);\r\n    ImageTag.create(file.identifier).tag = 'システム予約';    \r\n\r\n    fileContext = ImageFile.createEmpty('1d8_dice[01]').toContext();\r\n    fileContext.url = './assets/images/april_dice/1d8_dice[01].png';\r\n    file = ImageStorage.instance.add(fileContext);\r\n    ImageTag.create(file.identifier).tag = 'システム予約';    \r\n\r\n    fileContext = ImageFile.createEmpty('1d8_dice[02]').toContext();\r\n    fileContext.url = './assets/images/april_dice/1d8_dice[02].png';\r\n    file = ImageStorage.instance.add(fileContext);\r\n    ImageTag.create(file.identifier).tag = 'システム予約';    \r\n\r\n    fileContext = ImageFile.createEmpty('1d8_dice[03]').toContext();\r\n    fileContext.url = './assets/images/april_dice/1d8_dice[03].png';\r\n    file = ImageStorage.instance.add(fileContext);\r\n    ImageTag.create(file.identifier).tag = 'システム予約';    \r\n\r\n    fileContext = ImageFile.createEmpty('1d10_dice[00]').toContext();\r\n    fileContext.url = './assets/images/april_dice/1d10_dice[00].png';\r\n    file = ImageStorage.instance.add(fileContext);\r\n    ImageTag.create(file.identifier).tag = 'システム予約';    \r\n\r\n    fileContext = ImageFile.createEmpty('1d10_dice[01]').toContext();\r\n    fileContext.url = './assets/images/april_dice/1d10_dice[01].png';\r\n    file = ImageStorage.instance.add(fileContext);\r\n    ImageTag.create(file.identifier).tag = 'システム予約';    \r\n\r\n    fileContext = ImageFile.createEmpty('1d10_dice[02]').toContext();\r\n    fileContext.url = './assets/images/april_dice/1d10_dice[02].png';\r\n    file = ImageStorage.instance.add(fileContext);\r\n    ImageTag.create(file.identifier).tag = 'システム予約';    \r\n\r\n    fileContext = ImageFile.createEmpty('1d10_dice[03]').toContext();\r\n    fileContext.url = './assets/images/april_dice/1d10_dice[03].png';\r\n    file = ImageStorage.instance.add(fileContext);\r\n    ImageTag.create(file.identifier).tag = 'システム予約';    \r\n\r\n    fileContext = ImageFile.createEmpty('1d12_dice[00]').toContext();\r\n    fileContext.url = './assets/images/april_dice/1d12_dice[00].png';\r\n    file = ImageStorage.instance.add(fileContext);\r\n    ImageTag.create(file.identifier).tag = 'システム予約';    \r\n\r\n    fileContext = ImageFile.createEmpty('1d12_dice[01]').toContext();\r\n    fileContext.url = './assets/images/april_dice/1d12_dice[01].png';\r\n    file = ImageStorage.instance.add(fileContext);\r\n    ImageTag.create(file.identifier).tag = 'システム予約';    \r\n\r\n    fileContext = ImageFile.createEmpty('1d12_dice[02]').toContext();\r\n    fileContext.url = './assets/images/april_dice/1d12_dice[02].png';\r\n    file = ImageStorage.instance.add(fileContext);\r\n    ImageTag.create(file.identifier).tag = 'システム予約';    \r\n\r\n    fileContext = ImageFile.createEmpty('1d12_dice[03]').toContext();\r\n    fileContext.url = './assets/images/april_dice/1d12_dice[03].png';\r\n    file = ImageStorage.instance.add(fileContext);\r\n    ImageTag.create(file.identifier).tag = 'システム予約';    \r\n\r\n    fileContext = ImageFile.createEmpty('1d20_dice[00]').toContext();\r\n    fileContext.url = './assets/images/april_dice/1d20_dice[00].png';\r\n    file = ImageStorage.instance.add(fileContext);\r\n    ImageTag.create(file.identifier).tag = 'システム予約';    \r\n\r\n    fileContext = ImageFile.createEmpty('1d20_dice[01]').toContext();\r\n    fileContext.url = './assets/images/april_dice/1d20_dice[01].png';\r\n    file = ImageStorage.instance.add(fileContext);\r\n    ImageTag.create(file.identifier).tag = 'システム予約';    \r\n\r\n    fileContext = ImageFile.createEmpty('1d20_dice[02]').toContext();\r\n    fileContext.url = './assets/images/april_dice/1d20_dice[02].png';\r\n    file = ImageStorage.instance.add(fileContext);\r\n    ImageTag.create(file.identifier).tag = 'システム予約';    \r\n\r\n    fileContext = ImageFile.createEmpty('1d20_dice[03]').toContext();\r\n    fileContext.url = './assets/images/april_dice/1d20_dice[03].png';\r\n    file = ImageStorage.instance.add(fileContext);\r\n    ImageTag.create(file.identifier).tag = 'システム予約';    \r\n\r\n    fileContext = ImageFile.createEmpty('1d100_dice[00]').toContext();\r\n    fileContext.url = './assets/images/april_dice/1d100_dice[00].png';\r\n    file = ImageStorage.instance.add(fileContext);\r\n    ImageTag.create(file.identifier).tag = 'システム予約';    \r\n\r\n    fileContext = ImageFile.createEmpty('1d100_dice[01]').toContext();\r\n    fileContext.url = './assets/images/april_dice/1d100_dice[01].png';\r\n    file = ImageStorage.instance.add(fileContext);\r\n    ImageTag.create(file.identifier).tag = 'システム予約';    \r\n\r\n    fileContext = ImageFile.createEmpty('1d100_dice[02]').toContext();\r\n    fileContext.url = './assets/images/april_dice/1d100_dice[02].png';\r\n    file = ImageStorage.instance.add(fileContext);\r\n    ImageTag.create(file.identifier).tag = 'システム予約';    \r\n\r\n    fileContext = ImageFile.createEmpty('1d100_dice[03]').toContext();\r\n    fileContext.url = './assets/images/april_dice/1d100_dice[03].png';\r\n    file = ImageStorage.instance.add(fileContext);\r\n    ImageTag.create(file.identifier).tag = 'システム予約';    \r\n\r\n    fileContext = ImageFile.createEmpty('april[00]').toContext();\r\n    fileContext.url = './assets/images/april/april[00].png';\r\n    file = ImageStorage.instance.add(fileContext);\r\n    ImageTag.create(file.identifier).tag = 'システム予約';    \r\n\r\n    fileContext = ImageFile.createEmpty('april[01]').toContext();\r\n    fileContext.url = './assets/images/april/april[01].png';\r\n    file = ImageStorage.instance.add(fileContext);\r\n    ImageTag.create(file.identifier).tag = 'システム予約';    \r\n  }\r\n  \r\n  makeDefaultTabletopObjects() {\r\n    let testCharacter: GameCharacter = null;\r\n    let testFile: ImageFile = null;\r\n    let fileContext: ImageContext = null;\r\n    \r\n    //-------------------------\r\n    testCharacter = new GameCharacter('testCharacter_1');\r\n    fileContext = ImageFile.createEmpty('testCharacter_1_image').toContext();\r\n    fileContext.url = './assets/images/mon_052.gif';\r\n    testFile = ImageStorage.instance.add(fileContext);\r\n    testCharacter.location.x = 5 * 50;\r\n    testCharacter.location.y = 9 * 50;\r\n    testCharacter.initialize();\r\n    ImageTag.create(testFile.identifier).tag = 'モンスター';    //本家PR #92より\r\n\r\n    testCharacter.createTestGameDataElement('モンスターA', 1, testFile.identifier);\r\n    this.addBuffRound( testCharacter ,'テストバフ1' , '防+1' , 3);\r\n\r\n    //-------------------------\r\n    testCharacter = new GameCharacter('testCharacter_2');\r\n    testCharacter.location.x = 8 * 50;\r\n    testCharacter.location.y = 8 * 50;\r\n    testCharacter.initialize();\r\n    testCharacter.createTestGameDataElement('モンスターB', 1, testFile.identifier);\r\n\r\n    //-------------------------\r\n    testCharacter = new GameCharacter('testCharacter_3');\r\n    fileContext = ImageFile.createEmpty('testCharacter_3_image').toContext();\r\n    fileContext.url = './assets/images/mon_128.gif';\r\n    testFile = ImageStorage.instance.add(fileContext);\r\n    testCharacter.location.x = 4 * 50;\r\n    testCharacter.location.y = 2 * 50;\r\n    testCharacter.initialize();\r\n\r\n    testFile = ImageStorage.instance.add(fileContext);\r\n    ImageTag.create(testFile.identifier).tag = 'モンスター'; //本家PR #92より\r\n    testCharacter.createTestGameDataElement('モンスターC', 3, testFile.identifier);\r\n    //-------------------------\r\n\r\n    testCharacter = new GameCharacter('testCharacter_4');\r\n    fileContext = ImageFile.createEmpty('testCharacter_4_image').toContext();\r\n    fileContext.url = './assets/images/mon_150.gif';\r\n//本家PR #92より\r\n//    fileContext.tag = 'テスト01';\r\n\r\n    testFile = ImageStorage.instance.add(fileContext);\r\n    \r\n    ImageTag.create(testFile.identifier).tag = '';//本家PR #92より\r\n    testCharacter.location.x = 6 * 50;\r\n    testCharacter.location.y = 11 * 50;\r\n    testCharacter.initialize();\r\n    testCharacter.createTestGameDataElement('キャラクターA', 1, testFile.identifier);\r\n    this.addBuffRound( testCharacter ,'テストバフ2' , '攻撃+10' , 1);\r\n    \r\n    //-------------------------\r\n    testCharacter = new GameCharacter('testCharacter_5');\r\n    fileContext = ImageFile.createEmpty('testCharacter_5_image').toContext();\r\n    fileContext.url = './assets/images/mon_211.gif';\r\n    testFile = ImageStorage.instance.add(fileContext);\r\n    testCharacter.location.x = 12 * 50;\r\n    testCharacter.location.y = 12 * 50;\r\n    testCharacter.initialize();\r\n    testCharacter.createTestGameDataElement('キャラクターB', 1, testFile.identifier);\r\n    this.addBuffRound( testCharacter ,'テストバフ2' , '攻撃+10' , 1);\r\n\r\n    //-------------------------\r\n\r\n    testCharacter = new GameCharacter('testCharacter_6');\r\n    fileContext = ImageFile.createEmpty('testCharacter_6_image').toContext();\r\n    fileContext.url = './assets/images/mon_135.gif';\r\n    testFile = ImageStorage.instance.add(fileContext);\r\n    \r\n    ImageTag.create(testFile.identifier).tag = '';//本家PR #92より\r\n\r\n    testCharacter.initialize();\r\n    testCharacter.location.x = 5 * 50;\r\n    testCharacter.location.y = 13 * 50;\r\n    testCharacter.createTestGameDataElement('キャラクターC', 1, testFile.identifier);\r\n    this.addBuffRound( testCharacter ,'テストバフ3' , '回避+5' , 1);\r\n    \r\n  }\r\n\r\n  makeDefaultContextMenuActions(position: PointerCoordinate): ContextMenuAction[] {\r\n    return [\r\n      this.getCreateCharacterMenu(position),\r\n      this.getCreateTableMaskMenu(position),\r\n      this.getCreateTerrainMenu(position),\r\n      this.getCreateTextNoteMenu(position),\r\n      this.getCreateTrumpMenu(position),\r\n      this.getCreateDiceSymbolMenu(position),\r\n    ];\r\n  }\r\n\r\n  private getCreateCharacterMenu(position: PointerCoordinate): ContextMenuAction {\r\n    return {\r\n      name: 'キャラクターを作成', action: () => {\r\n        let character = this.createGameCharacter(position);\r\n        EventSystem.trigger('SELECT_TABLETOP_OBJECT', { identifier: character.identifier, className: character.aliasName });\r\n        SoundEffect.play(PresetSound.piecePut);\r\n      }\r\n    }\r\n  }\r\n\r\n  private getCreateTableMaskMenu(position: PointerCoordinate): ContextMenuAction {\r\n    return {\r\n      name: 'マップマスクを作成', action: () => {\r\n        this.createGameTableMask(position);\r\n        SoundEffect.play(PresetSound.cardPut);\r\n      }\r\n    }\r\n  }\r\n\r\n  private getCreateTerrainMenu(position: PointerCoordinate): ContextMenuAction {\r\n    return {\r\n      name: '地形を作成', action: () => {\r\n        this.createTerrain(position);\r\n        SoundEffect.play(PresetSound.blockPut);\r\n      }\r\n    }\r\n  }\r\n\r\n  private getCreateTextNoteMenu(position: PointerCoordinate): ContextMenuAction {\r\n    return {\r\n      name: '共有メモを作成', action: () => {\r\n        this.createTextNote(position);\r\n        SoundEffect.play(PresetSound.cardPut);\r\n      }\r\n    }\r\n  }\r\n\r\n  private getCreateTrumpMenu(position: PointerCoordinate): ContextMenuAction {\r\n    return {\r\n      name: 'トランプの山札を作成', action: () => {\r\n        this.createTrump(position);\r\n        SoundEffect.play(PresetSound.cardPut);\r\n      }\r\n    }\r\n  }\r\n\r\n  private getCreateDiceSymbolMenu(position: PointerCoordinate): ContextMenuAction {\r\n    let dices: { menuName: string, diceName: string, type: DiceType, imagePathPrefix: string }[] = [\r\n      { menuName: 'D4', diceName: 'D4', type: DiceType.D4, imagePathPrefix: '4_dice' },\r\n      { menuName: 'D6', diceName: 'D6', type: DiceType.D6, imagePathPrefix: '6_dice' },\r\n      { menuName: 'D8', diceName: 'D8', type: DiceType.D8, imagePathPrefix: '8_dice' },\r\n      { menuName: 'D10', diceName: 'D10', type: DiceType.D10, imagePathPrefix: '10_dice' },\r\n      { menuName: 'D10 (00-90)', diceName: 'D10', type: DiceType.D10_10TIMES, imagePathPrefix: '100_dice' },\r\n      { menuName: 'D12', diceName: 'D12', type: DiceType.D12, imagePathPrefix: '12_dice' },\r\n      { menuName: 'D20', diceName: 'D20', type: DiceType.D20, imagePathPrefix: '20_dice' },\r\n    ];\r\n    let subMenus: ContextMenuAction[] = [];\r\n\r\n    dices.forEach(item => {\r\n      subMenus.push({\r\n        name: item.menuName, action: () => {\r\n          this.createDiceSymbol(position, item.diceName, item.type, item.imagePathPrefix);\r\n          SoundEffect.play(PresetSound.dicePut);\r\n        }\r\n      });\r\n    });\r\n    return { name: 'ダイスを作成', action: null, subActions: subMenus };\r\n  }\r\n\r\n  private getViewTable(): GameTable {\r\n    let tableSelecter = ObjectStore.instance.get<TableSelecter>('tableSelecter');\r\n    return tableSelecter ? tableSelecter.viewTable : null;\r\n  }\r\n}\r\n","import { animate, keyframes, style, transition, trigger } from '@angular/animations';\r\nimport {\r\n  AfterViewInit,\r\n  ChangeDetectionStrategy,\r\n  ChangeDetectorRef,\r\n  Component,\r\n  ElementRef,\r\n  HostListener,\r\n  Input,\r\n  OnDestroy,\r\n  OnInit,\r\n  ViewChild\r\n} from '@angular/core';\r\nimport { ImageFile } from '@udonarium/core/file-storage/image-file';\r\nimport { ObjectNode } from '@udonarium/core/synchronize-object/object-node';\r\nimport { ObjectStore } from '@udonarium/core/synchronize-object/object-store';\r\nimport { EventSystem, Network } from '@udonarium/core/system';\r\nimport { GameCharacter } from '@udonarium/game-character';\r\nimport { PresetSound, SoundEffect } from '@udonarium/sound-effect';\r\nimport { ChatPaletteComponent } from 'component/chat-palette/chat-palette.component';\r\nimport { GameCharacterSheetComponent } from 'component/game-character-sheet/game-character-sheet.component';\r\nimport { MovableOption } from 'directive/movable.directive';\r\nimport { RotableOption } from 'directive/rotable.directive';\r\nimport { ContextMenuSeparator, ContextMenuService } from 'service/context-menu.service';\r\nimport { PanelOption, PanelService } from 'service/panel.service';\r\nimport { PointerDeviceService } from 'service/pointer-device.service';\r\nimport { RemoteControllerComponent } from 'component/remote-controller/remote-controller.component';\r\n\r\n@Component({\r\n  selector: 'game-character',\r\n  templateUrl: './game-character.component.html',\r\n  styleUrls: ['./game-character.component.css'],\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n  animations: [\r\n    trigger('bounceInOut', [\r\n      transition('void => *', [\r\n        animate('600ms ease', keyframes([\r\n          style({ transform: 'scale3d(0, 0, 0)', offset: 0 }),\r\n          style({ transform: 'scale3d(1.5, 1.5, 1.5)', offset: 0.5 }),\r\n          style({ transform: 'scale3d(0.75, 0.75, 0.75)', offset: 0.75 }),\r\n          style({ transform: 'scale3d(1.125, 1.125, 1.125)', offset: 0.875 }),\r\n          style({ transform: 'scale3d(1.0, 1.0, 1.0)', offset: 1.0 })\r\n        ]))\r\n      ]),\r\n      transition('* => void', [\r\n        animate(100, style({ transform: 'scale3d(0, 0, 0)' }))\r\n      ])\r\n    ])\r\n  ]\r\n})\r\nexport class GameCharacterComponent implements OnInit, OnDestroy, AfterViewInit {\r\n  @Input() gameCharacter: GameCharacter = null;\r\n  @Input() is3D: boolean = false;\r\n  @ViewChild('root') rootElementRef: ElementRef<HTMLElement>;\r\n\r\n  get name(): string { return this.gameCharacter.name; }\r\n  get size(): number { return this.adjustMinBounds(this.gameCharacter.size); }\r\n  get imageFile(): ImageFile { return this.gameCharacter.imageFile; }\r\n  get rotate(): number { return this.gameCharacter.rotate; }\r\n  set rotate(rotate: number) { this.gameCharacter.rotate = rotate; }\r\n  get roll(): number { return this.gameCharacter.roll; }\r\n  set roll(roll: number) { this.gameCharacter.roll = roll; }\r\n\r\n  gridSize: number = 50;\r\n\r\n  movableOption: MovableOption = {};\r\n  rotableOption: RotableOption = {};\r\n\r\n  private highlightTimer: NodeJS.Timer;\r\n  private unhighlightTimer: NodeJS.Timer;\r\n\r\n  constructor(\r\n    private contextMenuService: ContextMenuService,\r\n    private panelService: PanelService,\r\n    private changeDetector: ChangeDetectorRef,\r\n    private pointerDeviceService: PointerDeviceService,\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    EventSystem.register(this)\r\n      .on('UPDATE_GAME_OBJECT', -1000, event => {\r\n        let object = ObjectStore.instance.get(event.data.identifier);\r\n        if (!this.gameCharacter || !object) return;\r\n        if (this.gameCharacter === object || (object instanceof ObjectNode && this.gameCharacter.contains(object))) {\r\n          this.changeDetector.markForCheck();\r\n        }\r\n      })\r\n      .on('SYNCHRONIZE_FILE_LIST', event => {\r\n        this.changeDetector.markForCheck();\r\n      })\r\n      .on('UPDATE_FILE_RESOURE', -1000, event => {\r\n        this.changeDetector.markForCheck();\r\n      })\r\n      .on('HIGHTLIGHT_TABLETOP_OBJECT', event => {\r\n        if (this.gameCharacter.identifier !== event.data.identifier) { return; }\r\n        if (this.gameCharacter.location.name != \"table\") { return; }\r\n\r\n        console.log(`recv focus event to ${this.gameCharacter.name}`);\r\n        // アニメーション開始のタイマーが既にあってアニメーション開始前（ごくわずかな間）ならば何もしない\r\n        if (this.highlightTimer != null) { return; }\r\n\r\n        // アニメーション中であればアニメーションを初期化\r\n        if (this.rootElementRef.nativeElement.classList.contains('focused')) {\r\n          clearTimeout(this.unhighlightTimer);\r\n          this.rootElementRef.nativeElement.classList.remove('focused');\r\n        }\r\n\r\n        // アニメーション開始処理タイマー\r\n        this.highlightTimer = setTimeout(() => {\r\n          this.highlightTimer = null;\r\n          this.rootElementRef.nativeElement.classList.add('focused');\r\n        }, 0);\r\n\r\n        // アニメーション終了処理タイマー\r\n        this.unhighlightTimer = setTimeout(() => {\r\n          this.unhighlightTimer = null;\r\n          this.rootElementRef.nativeElement.classList.remove('focused');\r\n        }, 1010);\r\n      });\r\n    this.movableOption = {\r\n      tabletopObject: this.gameCharacter,\r\n      transformCssOffset: 'translateZ(1.0px)',\r\n      colideLayers: ['terrain']\r\n    };\r\n    this.rotableOption = {\r\n      tabletopObject: this.gameCharacter\r\n    };\r\n  }\r\n\r\n  ngAfterViewInit() { }\r\n\r\n  ngOnDestroy() {\r\n    EventSystem.unregister(this);\r\n  }\r\n\r\n  @HostListener('dragstart', ['$event'])\r\n  onDragstart(e: any) {\r\n    console.log('Dragstart Cancel !!!!');\r\n    e.stopPropagation();\r\n    e.preventDefault();\r\n  }\r\n\r\n  @HostListener('contextmenu', ['$event'])\r\n  onContextMenu(e: Event) {\r\n    e.stopPropagation();\r\n    e.preventDefault();\r\n\r\n    if (!this.pointerDeviceService.isAllowedToOpenContextMenu) return;\r\n\r\n    let position = this.pointerDeviceService.pointers[0];\r\n    this.contextMenuService.open(position, [\r\n      { name: '顯示詳細', action: () => { this.showDetail(this.gameCharacter); } },\r\n      { name: '顯示對話組合版', action: () => { this.showChatPalette(this.gameCharacter) } },\r\n      { name: '顯示控制板', action: () => { this.showRemoteController(this.gameCharacter) } },\r\n      ContextMenuSeparator,\r\n      {\r\n        name: '移動至共有倉庫', action: () => {\r\n          this.gameCharacter.setLocation('common');\r\n          SoundEffect.play(PresetSound.piecePut);\r\n        }\r\n      },\r\n      {\r\n        name: '移動至個人倉庫', action: () => {\r\n          this.gameCharacter.setLocation(Network.peerId);\r\n          SoundEffect.play(PresetSound.piecePut);\r\n        }\r\n      },\r\n      {\r\n        name: '移動至墓地', action: () => {\r\n          this.gameCharacter.setLocation('graveyard');\r\n          SoundEffect.play(PresetSound.sweep);\r\n        }\r\n      },\r\n      ContextMenuSeparator,\r\n      {\r\n        name: '製作副本', action: () => {\r\n          let cloneObject = this.gameCharacter.clone();\r\n          cloneObject.location.x += this.gridSize;\r\n          cloneObject.location.y += this.gridSize;\r\n          cloneObject.update();\r\n          SoundEffect.play(PresetSound.piecePut);\r\n        }\r\n      },\r\n    ], this.name);\r\n  }\r\n\r\n  onMove() {\r\n    SoundEffect.play(PresetSound.piecePick);\r\n  }\r\n\r\n  onMoved() {\r\n    SoundEffect.play(PresetSound.piecePut);\r\n  }\r\n\r\n  private adjustMinBounds(value: number, min: number = 0): number {\r\n    return value < min ? min : value;\r\n  }\r\n\r\n  private showDetail(gameObject: GameCharacter) {\r\n    let coordinate = this.pointerDeviceService.pointers[0];\r\n    let title = '角色卡';\r\n    if (gameObject.name.length) title += ' - ' + gameObject.name;\r\n    let option: PanelOption = { title: title, left: coordinate.x - 400, top: coordinate.y - 300, width: 800, height: 600 };\r\n    let component = this.panelService.open<GameCharacterSheetComponent>(GameCharacterSheetComponent, option);\r\n    component.tabletopObject = gameObject;\r\n  }\r\n\r\n  private showChatPalette(gameObject: GameCharacter) {\r\n    let coordinate = this.pointerDeviceService.pointers[0];\r\n    let option: PanelOption = { left: coordinate.x - 250, top: coordinate.y - 175, width: 615, height: 350 };\r\n    let component = this.panelService.open<ChatPaletteComponent>(ChatPaletteComponent, option);\r\n    component.character = gameObject;\r\n  }\r\n\r\n  private showRemoteController(gameObject: GameCharacter) {\r\n    let coordinate = this.pointerDeviceService.pointers[0];\r\n    let option: PanelOption = { left: coordinate.x - 250, top: coordinate.y - 175, width: 700, height: 600 };\r\n    let component = this.panelService.open<RemoteControllerComponent>(RemoteControllerComponent, option);\r\n    component.character = gameObject;\r\n  }\r\n}\r\n","<div class=\"component is-3d is-grab is-pointer-events-none\" [style.width.px]=\"size * gridSize\"\r\n  [style.height.px]=\"size * gridSize\" appMovable [movable.option]=\"movableOption\" (movable.ondragstart)=\"onMove()\"\r\n  (movable.ondragend)=\"onMoved()\" #root>\r\n  <div class=\"component-content is-3d\" [@bounceInOut]=\"'in'\">\r\n    <div class=\"component-content is-3d is-pointer-events-auto\" appRotable [rotable.option]=\"rotableOption\"\r\n      (rotable.ondragstart)=\"onMove()\" (rotable.ondragend)=\"onMoved()\">\r\n      \r\n      <div *ngIf=\"!this.gameCharacter.hideInventory\" class=\"pedestal-inner\" [style]=\"{ 'border': 'solid 6px #FFCC80'}\"></div> \r\n      <div *ngIf=\"this.gameCharacter.hideInventory\" class=\"pedestal-inner\" [style]=\"{ 'border': 'solid 6px #A0E0FF'}\"></div>\r\n      <div class=\"pedestal-outer\"></div>\r\n      <div class=\"pedestal-grab rotate-grab\">\r\n<!--����]�A�C�R��-->\r\n        <div class=\"pedestal-grab-border\">\r\n          <div class=\"material-icons of-front\">autorenew</div>\r\n          <div class=\"material-icons of-back\">autorenew</div>\r\n        </div>\r\n      </div>\r\n      <div class=\"upright-transform is-fit-width is-3d\">\r\n<!--�@-->\r\n        <div class=\"rotate-frame is-3d\" [style.width.px]=\"size * gridSize\" [style.height.px]=\"size * gridSize\"\r\n          appRotable [(rotable.value)]=\"roll\" (rotable.ondragstart)=\"onMove()\" (rotable.ondragend)=\"onMoved()\">\r\n\r\n\r\n          <div class=\"rotate-inner is-3d\">\r\n<!-- �o�t�\\��-->\r\n        <div *ngIf=\"this.gameCharacter.buffDataElement\" >\r\n\r\n          <ng-container *ngIf=\"this.gameCharacter.buffDataElement.children.length == 1\">\r\n            <ng-container *ngFor=\"let child of this.gameCharacter.buffDataElement.children\">\r\n              <ng-container *ngIf=\"child.children.length > 0\">\r\n               \r\n                <div style=\"\" *ngIf=\"this.gameCharacter.buffDataElement\" class=\"buff-tag is-nowrap is-buff-background is-3d\" \r\n                 [ngStyle]=\"{'transform': 'translateX(-50%) translateX(' + size * gridSize / 2 +'px) translateY(-100%)'}\">\r\n                \r\n                  <div class=\"table fornt-tag\">\r\n                    <div class=\"flex-item\" *ngFor=\"let childElement of this.gameCharacter.buffDataElement.children\">\r\n                      <div class=\"table-row\" game-data-element-buff [gameDataElement]=\"childElement\" [isEdit]=\"isEdit\" [isPieceMode]=\"true\"></div>\r\n                    </div>\r\n                  </div>\r\n                  <div class=\"table back-tag\">\r\n                    <div class=\"flex-item\" *ngFor=\"let childElement of this.gameCharacter.buffDataElement.children\">\r\n                      <div class=\"table-row\" game-data-element-buff [gameDataElement]=\"childElement\" [isEdit]=\"isEdit\" [isPieceMode]=\"true\"></div>\r\n                    </div>\r\n                  </div>\r\n                 </div>\r\n              </ng-container>\r\n            </ng-container>\r\n          </ng-container>\r\n        </div>\r\n           \r\n\r\n<!--���O�\\��-->\r\n \r\n            <ng-container *ngIf=\"this.gameCharacter.nonTalkFlag\">\r\n              <div *ngIf=\"0 < name.length\" class=\"name-tag is-nowrap is-black-background is-3d\"\r\n                [ngStyle]=\"{'transform': 'translateX(-50%) translateX(' + size * gridSize / 2 +'px)'\r\n                ,'background-color': 'rgba(255,255,255, 0.6)' , 'color' : '#333' ,  'border': 'solid 1px #555' }\">\r\n                <div class=\"fornt-tag has-length-limit is-3d\" >{{name}}</div>\r\n                <div class=\"back-tag has-length-limit is-3d\" >{{name}}</div>\r\n              </div>\r\n            </ng-container>\r\n\r\n            <ng-container *ngIf=\"!this.gameCharacter.nonTalkFlag\">\r\n              <div *ngIf=\"0 < name.length\" class=\"name-tag is-nowrap is-black-background is-3d\"\r\n                [ngStyle]=\"{'transform': 'translateX(-50%) translateX(' + size * gridSize / 2 +'px)'}\">\r\n                <div class=\"fornt-tag has-length-limit is-3d\">{{name}}</div>\r\n                <div class=\"back-tag has-length-limit is-3d\">{{name}}</div>\r\n              </div>\r\n            </ng-container>\r\n\r\n            <img class=\"image\" *ngIf=\"0 < imageFile.url.length\" [src]=\"imageFile.url | safe: 'resourceUrl'\">\r\n\r\n<!--��]���L������-->\r\n            <div class=\"grab-group\">\r\n              <div class=\"rotate-grab rotate-grab-icon of-top\"\r\n                [ngStyle]=\"{'transform': 'translateX(-50%) translateX(' + size * gridSize / 2 +'px)'}\">\r\n                <i class=\"material-icons\">autorenew</i>\r\n              </div>\r\n              <div class=\"rotate-grab rotate-grab-icon of-bottom\"\r\n                [ngStyle]=\"{'transform': 'translateX(-50%) translateX(' + size * gridSize / 2 +'px'}\">\r\n                <i class=\"material-icons\">autorenew</i>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n","import { Component, Input, OnInit } from '@angular/core';\r\n\r\nimport { ModalService } from 'service/modal.service';\r\nimport { PanelService } from 'service/panel.service';\r\n\r\n@Component({\r\n  selector: 'text-view',\r\n  templateUrl: './text-view.component.html',\r\n  styleUrls: ['./text-view.component.css']\r\n})\r\nexport class TextViewComponent implements OnInit {\r\n\r\n  @Input() text: string = '';\r\n  @Input() title: string = '';\r\n  constructor(\r\n    private panelService: PanelService,\r\n    private modalService: ModalService\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    Promise.resolve().then(() => {\r\n      this.panelService.title = this.title;\r\n      if (this.modalService.option && this.modalService.option.title != null) {\r\n        this.modalService.title = this.modalService.option.title ? this.modalService.option.title : '';\r\n        this.text = this.modalService.option.text ? this.modalService.option.text : '';\r\n      }\r\n    });\r\n  }\r\n\r\n}\r\n","<span><pre class=\"text\">{{text}}</pre></span>","import { SyncObject, SyncVar } from './core/synchronize-object/decorator';\r\nimport { DataElement } from './data-element';\r\nimport { TabletopObject } from './tabletop-object';\r\n\r\n@SyncObject('table-mask')\r\nexport class GameTableMask extends TabletopObject {\r\n  @SyncVar() isLock: boolean = false;\r\n\r\n  get name(): string { return this.getCommonValue('name', ''); }\r\n  get width(): number { return this.getCommonValue('width', 1); }\r\n  get height(): number { return this.getCommonValue('height', 1); }\r\n  get opacity(): number {\r\n    let element = this.getElement('opacity', this.commonDataElement);\r\n    let num = element ? <number>element.currentValue / <number>element.value : 1;\r\n    return Number.isNaN(num) ? 1 : num;\r\n  }\r\n\r\n  static create(name: string, width: number, height: number, opacity: number, identifier?: string): GameTableMask {\r\n    let object: GameTableMask = null;\r\n\r\n    if (identifier) {\r\n      object = new GameTableMask(identifier);\r\n    } else {\r\n      object = new GameTableMask();\r\n    }\r\n    object.createDataElements();\r\n\r\n    object.commonDataElement.appendChild(DataElement.create('name', name, {}, 'name_' + object.identifier));\r\n    object.commonDataElement.appendChild(DataElement.create('width', width, {}, 'width_' + object.identifier));\r\n    object.commonDataElement.appendChild(DataElement.create('height', height, {}, 'height_' + object.identifier));\r\n    object.commonDataElement.appendChild(DataElement.create('opacity', opacity, { type: 'numberResource', currentValue: opacity }, 'opacity_' + object.identifier));\r\n    object.initialize();\r\n\r\n    return object;\r\n  }\r\n}\r\n","// This file can be replaced during build by using the `fileReplacements` array.\r\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\r\n// The list of file replacements can be found in `angular.json`.\r\n\r\nexport const environment = {\r\n  production: false\r\n};\r\n\r\n/*\r\n * For easier debugging in development mode, you can import the following file\r\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\r\n *\r\n * This import should be commented out in production mode because it will have a negative impact\r\n * on performance if an error is thrown.\r\n */\r\n// import 'zone.js/dist/zone-error';  // Included with Angular CLI.\r\n","import { animate, keyframes, style, transition, trigger } from '@angular/animations';\r\nimport {\r\n  AfterViewInit,\r\n  ChangeDetectionStrategy,\r\n  ChangeDetectorRef,\r\n  Component,\r\n  ElementRef,\r\n  Input,\r\n  OnDestroy,\r\n  ViewChild,\r\n} from '@angular/core';\r\nimport { ObjectNode } from '@udonarium/core/synchronize-object/object-node';\r\nimport { ObjectStore } from '@udonarium/core/synchronize-object/object-store';\r\nimport { EventSystem } from '@udonarium/core/system';\r\nimport { DataElement } from '@udonarium/data-element';\r\nimport { TabletopObject } from '@udonarium/tabletop-object';\r\nimport { GameObjectInventoryService } from 'service/game-object-inventory.service';\r\nimport { PointerDeviceService } from 'service/pointer-device.service';\r\n\r\nimport { GameCharacter } from '@udonarium/game-character'; //\r\nimport { TextNote } from '@udonarium/text-note'; //\r\n\r\n@Component({\r\n  selector: 'overview-panel',\r\n  templateUrl: './overview-panel.component.html',\r\n  styleUrls: ['./overview-panel.component.css'],\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n  animations: [\r\n    trigger('fadeInOut', [\r\n      transition('void => *', [\r\n        animate('100ms ease-out', keyframes([\r\n          style({ opacity: 0, offset: 0 }),\r\n          style({ opacity: 1, offset: 1.0 })\r\n        ]))\r\n      ]),\r\n      transition('* => void', [\r\n        animate('100ms ease-in', keyframes([\r\n          style({ opacity: 1, offset: 0 }),\r\n          style({ opacity: 0, offset: 1.0 })\r\n        ]))\r\n      ])\r\n    ])\r\n  ]\r\n})\r\nexport class OverviewPanelComponent implements AfterViewInit, OnDestroy {\r\n  @ViewChild('draggablePanel', { static: true }) draggablePanel: ElementRef<HTMLElement>;\r\n  @Input() tabletopObject: TabletopObject = null;\r\n\r\n  @Input() left: number = 0;\r\n  @Input() top: number = 0;\r\n\r\n  get imageUrl(): string { return this.tabletopObject && this.tabletopObject.imageFile ? this.tabletopObject.imageFile.url : ''; }\r\n  get hasImage(): boolean { return 0 < this.imageUrl.length; }\r\n\r\n  get inventoryDataElms(): DataElement[] { return this.tabletopObject ? this.getInventoryTags(this.tabletopObject) : []; }\r\n  get dataElms(): DataElement[] { return this.tabletopObject && this.tabletopObject.detailDataElement ? this.tabletopObject.detailDataElement.children as DataElement[] : []; }\r\n  get hasDataElms(): boolean { return 0 < this.dataElms.length; }\r\n\r\n  get newLineString(): string { return this.inventoryService.newLineString; }\r\n  get isPointerDragging(): boolean { return this.pointerDeviceService.isDragging; }\r\n\r\n  get pointerEventsStyle(): any { return { 'is-pointer-events-auto': !this.isPointerDragging, 'pointer-events-none': this.isPointerDragging }; }\r\n\r\n  isOpenImageView: boolean = false;\r\n\r\n  constructor(\r\n    private inventoryService: GameObjectInventoryService,\r\n    private changeDetector: ChangeDetectorRef,\r\n    private pointerDeviceService: PointerDeviceService\r\n  ) { }\r\n\r\n  ngAfterViewInit() {\r\n    this.initPanelPosition();\r\n    setTimeout(() => {\r\n      this.adjustPositionRoot();\r\n    }, 16);\r\n    EventSystem.register(this)\r\n      .on('UPDATE_GAME_OBJECT', -1000, event => {\r\n        let object = ObjectStore.instance.get(event.data.identifier);\r\n        if (!this.tabletopObject || !object || !(object instanceof ObjectNode)) return;\r\n        if (this.tabletopObject === object || this.tabletopObject.contains(object)) {\r\n          this.changeDetector.markForCheck();\r\n        }\r\n      })\r\n      .on('SYNCHRONIZE_FILE_LIST', event => {\r\n        this.changeDetector.markForCheck();\r\n      })\r\n      .on('UPDATE_FILE_RESOURE', -1000, event => {\r\n        this.changeDetector.markForCheck();\r\n      });\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    EventSystem.unregister(this);\r\n  }\r\n\r\n  private initPanelPosition() {\r\n    let panel: HTMLElement = this.draggablePanel.nativeElement;\r\n    let outerWidth = panel.offsetWidth;\r\n    let outerHeight = panel.offsetHeight;\r\n\r\n    let offsetLeft = this.left + 100;\r\n    let offsetTop = this.top - outerHeight - 50;\r\n\r\n    let isCollideLeft = false;\r\n    let isCollideTop = false;\r\n\r\n    if (window.innerWidth < offsetLeft + outerWidth) {\r\n      offsetLeft = window.innerWidth - outerWidth;\r\n      isCollideLeft = true;\r\n    }\r\n\r\n    if (offsetTop <= 0) {\r\n      offsetTop = 0;\r\n      isCollideTop = true;\r\n    }\r\n\r\n    if (isCollideLeft) {\r\n      offsetLeft = this.left - outerWidth - 100;\r\n    }\r\n\r\n    if (offsetLeft < 0) offsetLeft = 0;\r\n    if (offsetTop < 0) offsetTop = 0;\r\n\r\n    panel.style.left = offsetLeft + 'px';\r\n    panel.style.top = offsetTop + 'px';\r\n  }\r\n\r\n  private adjustPositionRoot() {\r\n    let panel: HTMLElement = this.draggablePanel.nativeElement;\r\n\r\n    let panelBox = panel.getBoundingClientRect();\r\n\r\n    let diffLeft = 0;\r\n    let diffTop = 0;\r\n\r\n    if (window.innerWidth < panelBox.right + diffLeft) {\r\n      diffLeft += window.innerWidth - (panelBox.right + diffLeft);\r\n    }\r\n    if (panelBox.left + diffLeft < 0) {\r\n      diffLeft += 0 - (panelBox.left + diffLeft);\r\n    }\r\n\r\n    if (window.innerHeight < panelBox.bottom + diffTop) {\r\n      diffTop += window.innerHeight - (panelBox.bottom + diffTop);\r\n    }\r\n    if (panelBox.top + diffTop < 0) {\r\n      diffTop += 0 - (panelBox.top + diffTop);\r\n    }\r\n\r\n    panel.style.left = panel.offsetLeft + diffLeft + 'px';\r\n    panel.style.top = panel.offsetTop + diffTop + 'px';\r\n  }\r\n\r\n  chanageImageView(isOpen: boolean) {\r\n    this.isOpenImageView = isOpen;\r\n  }\r\n\r\n  private getInventoryTags(gameObject: TabletopObject): DataElement[] {\r\n    return this.inventoryService.tableInventory.dataElementMap.get(gameObject.identifier);\r\n  }\r\n  \r\n  get overViewNoteWidth() : number {\r\n    \r\n    let note = <TextNote>this.tabletopObject;\r\n    if( ! note ) return 250;\r\n    let width = note.overViewWidth ;\r\n    if( width < 250 ) width = 250;\r\n    if( width > 800 ) width = 800;\r\n    \r\n    return width;\r\n  }\r\n\r\n  get overViewNoteMaxHeight() : number {\r\n    \r\n    let note = <TextNote>this.tabletopObject;\r\n    if( ! note ) return 250;\r\n    let maxHeight = note.overViewMaxHeight ;\r\n    if( maxHeight < 250 ) maxHeight = 250;\r\n    if( maxHeight > 1000 ) maxHeight = 1000;\r\n    \r\n    return maxHeight;\r\n    \r\n  }\r\n  \r\n  get overViewCharacterWidth() : number {\r\n    \r\n    let character = <GameCharacter>this.tabletopObject;\r\n    if( ! character ) return 270;\r\n    let width = character.overViewWidth ;\r\n    if( width < 270 ) width = 270;\r\n    if( width > 800 ) width = 800;\r\n    \r\n    return width;\r\n  }\r\n\r\n  get overViewCharacterMaxHeight() : number {\r\n    \r\n    let character = <GameCharacter>this.tabletopObject;\r\n    if( ! character ) return 250;\r\n    let maxHeight = character.overViewMaxHeight ;\r\n    if( maxHeight < 250 ) maxHeight = 250;\r\n    if( maxHeight > 1000 ) maxHeight = 1000;\r\n    \r\n    return maxHeight;\r\n    \r\n  }\r\n\r\n  escapeHtml(text) {\r\n    return text.replace(/&/g, \"&amp;\").replace(/</g, \"&lt;\").replace(/>/g, \"&gt;\")\r\n               .replace(/\"/g, \"&quot;\").replace(/'/g, \"&#039;\");\r\n  }\r\n  \r\n  isEditUrl( dataElmIdentifier) {\r\n    let box = <HTMLInputElement>document.getElementById(dataElmIdentifier);\r\n    if( !box )return false;\r\n//   console.log( \"Edit:\" + dataElmIdentifier  + \":\" + box.checked   );\r\n    return box.checked;\r\n  }\r\n  \r\n  isUrlText( text ){\r\n    if( text.match( /^https:\\/\\// ) )return true;\r\n    if( text.match( /^http:\\/\\// ) )return true;\r\n    return false;\r\n  }\r\n  \r\n  changeChk(){\r\n    //�������Ȃ�\r\n  }\r\n\r\n  textFocus( dataElmIdentifier ){\r\n    //console.log( \"text forcus:\" + dataElmIdentifier );\r\n    let box = <HTMLInputElement>document.getElementById(dataElmIdentifier);\r\n    box.checked = true;\r\n  }\r\n  \r\n}\r\n","<div class=\"component is-pointer-events-none\" [@fadeInOut]=\"'in'\" appDraggable #draggablePanel>\r\n  <ng-container [ngSwitch]=\"tabletopObject.aliasName\">\r\n    <ng-container *ngSwitchCase=\"'numberResource'\">\r\n    </ng-container>\r\n    <ng-container *ngSwitchCase=\"'card'\">\r\n      <ng-container *ngTemplateOutlet=\"overviewCard; context: { card: tabletopObject }\"></ng-container>\r\n    </ng-container>\r\n    <ng-container *ngSwitchCase=\"'card-stack'\">\r\n      <ng-container *ngTemplateOutlet=\"overviewCard; context: { card: tabletopObject }\"></ng-container>\r\n    </ng-container>\r\n    <ng-container *ngSwitchCase=\"'text-note'\">\r\n      <ng-container *ngTemplateOutlet=\"overviewNote; context: { note: tabletopObject }\"></ng-container>\r\n    </ng-container>\r\n    <ng-container *ngSwitchCase=\"'character'\">\r\n      <ng-container *ngTemplateOutlet=\"overviewCharacter; context: { character: tabletopObject }\"></ng-container>\r\n    </ng-container>\r\n    <ng-container *ngSwitchCase=\"'dice-symbol'\">\r\n      <ng-container *ngTemplateOutlet=\"overviewDiceSymbol; context: { dice: tabletopObject }\"></ng-container>\r\n    </ng-container>\r\n    <ng-container *ngSwitchDefault>\r\n      <ng-container *ngTemplateOutlet=\"overviewCharacter; context: { character: tabletopObject }\"></ng-container>\r\n    </ng-container>\r\n  </ng-container>\r\n</div>\r\n\r\n<ng-container *ngIf=\"isOpenImageView\">\r\n  <ng-container *ngTemplateOutlet=\"imageView\"></ng-container>\r\n</ng-container>\r\n\r\n<ng-template #overviewCard let-card=\"card\">\r\n  <div class=\"component-content is-small-size\"\r\n    [ngClass]=\"{ 'is-pointer-events-auto': !this.isPointerDragging, 'pointer-events-none': this.isPointerDragging }\">\r\n    <div *ngIf=\"hasImage\" style=\"position: relative;\">\r\n      <img class=\"card-image\" [src]=\"imageUrl | safe: 'resourceUrl'\" />\r\n      <button class=\"zoom-button\" (click)=\"chanageImageView(true)\">\r\n        <i class=\"material-icons\">zoom_in</i>\r\n      </button>\r\n      <div *ngIf=\"card.hasOwner && 0 < card.ownerName.length\" class=\"component-owner position-right-bottom\"\r\n        [ngClass]=\"{'with-button-marign': hasImage}\">\r\n        <div class=\"owner-tag\">{{card.ownerName}}</div>\r\n      </div>\r\n    </div>\r\n    <div *ngIf=\"0 < card?.name?.length\" class=\"component-title title-background\"\r\n      [ngClass]=\"{'with-button-marign': hasImage}\">\r\n      <ng-container *ngIf=\"card.isVisible == null || card.isVisible\">{{card.name}}</ng-container>\r\n      <ng-container *ngIf=\"card.isVisible != null && !card.isVisible\">Card</ng-container>\r\n    </div>\r\n    <div class=\"component-background\">\r\n      <div class=\"grid-container-root\" *ngIf=\"hasDataElms && card.isVisible\">\r\n        <div class=\"grid-container\">\r\n          <ng-container *ngFor=\"let dataElm of dataElms\">\r\n            <ng-container *ngTemplateOutlet=\"dataElement; context: { dataElm: dataElm }\"></ng-container>\r\n          </ng-container>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</ng-template>\r\n\r\n<ng-template #overviewNote let-note=\"note\">\r\n  <div class=\"component-content is-large-size\" [ngStyle]=\"{'max-width': 1000 + 'px','width': overViewNoteWidth + 'px'}\" \r\n    [ngClass]=\"{ 'is-pointer-events-auto': !this.isPointerDragging, 'pointer-events-none': this.isPointerDragging }\" >\r\n    <div class=\"component-title title-background\"  [ngStyle]=\"{'max-width': 1000 + 'px'}\" >{{note.title}}</div>\r\n    <div class=\"component-background text-note-container\" [ngStyle]=\"{'width': overViewNoteWidth + 'px','max-height': overViewNoteMaxHeight +'px'}\">\r\n      <div style=\"position: relative; width:100%\">\r\n        <div class=\"is-fill\">\r\n          <textarea class=\"textarea\" [(ngModel)]=\"note.text\" spellcheck=\"false\"></textarea>\r\n        </div>\r\n        <div class=\"textarea-spacer\">{{note.text}}</div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</ng-template>\r\n\r\n<ng-template #overviewCharacter let-character=\"character\">\r\n  <div class=\"component-content character-grid-container is-middle-size\" >\r\n    <div class=\"title-bg-area title-background\"\r\n      [ngClass]=\"{ 'is-pointer-events-auto': !this.isPointerDragging, 'pointer-events-none': this.isPointerDragging }\">\r\n    </div>\r\n    <div class=\"image-area character-image-box\"\r\n      [ngClass]=\"{ 'is-pointer-events-auto': !this.isPointerDragging, 'pointer-events-none': this.isPointerDragging }\"\r\n      *ngIf=\"hasImage\">\r\n      <img class=\"character-image\" [src]=\"imageUrl | safe: 'resourceUrl'\" />\r\n    </div>\r\n    <div class=\"title-area component-title\" [ngClass]=\"{ 'is-pointer-events-auto': !this.isPointerDragging,\r\n    'pointer-events-none': this.isPointerDragging }\">{{character.name}}</div>\r\n    <div class=\"void-area is-pointer-events-none\"></div>\r\n    <div class=\"dataElm-area component-background\"\r\n      [ngClass]=\"{ 'is-pointer-events-auto': !this.isPointerDragging, 'pointer-events-none': this.isPointerDragging }\">\r\n      <div class=\"grid-container-root\" *ngIf=\"hasDataElms\"   \r\n      [ngStyle]=\"{'width': overViewCharacterWidth + 'px','max-height': overViewCharacterMaxHeight +'px'}\">\r\n\r\n        <ng-container *ngFor=\"let dataElm of inventoryDataElms\">\r\n          <ng-container *ngIf=\"dataElm && dataElm.name !== newLineString\">\r\n            <div class=\"grid-container\">\r\n              <ng-container *ngTemplateOutlet=\"dataElement; context: { dataElm: dataElm }\"></ng-container>\r\n            </div>\r\n          </ng-container>\r\n        </ng-container>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</ng-template>\r\n\r\n<ng-template #overviewDiceSymbol let-dice=\"dice\">\r\n  <div class=\"component-content character-grid-container is-middle-size\">\r\n    <div class=\"title-bg-area title-background\"\r\n      [ngClass]=\"{ 'is-pointer-events-auto': !this.isPointerDragging, 'pointer-events-none': this.isPointerDragging }\">\r\n    </div>\r\n    <div class=\"title-area component-title\"\r\n      [ngClass]=\"{ 'is-pointer-events-auto': !this.isPointerDragging, 'pointer-events-none': this.isPointerDragging }\">\r\n      {{dice.name}}:\r\n      <ng-container *ngIf=\"dice.isVisible\">{{dice.face}}</ng-container>\r\n      <ng-container *ngIf=\"!dice.isVisible\">???</ng-container>\r\n    </div>\r\n    <div *ngIf=\"dice.hasOwner && 0 < dice.ownerName.length\" class=\"owner-name-area component-owner\"\r\n      [ngClass]=\"{ 'is-pointer-events-auto': !this.isPointerDragging, 'pointer-events-none': this.isPointerDragging }\">\r\n      <div class=\"owner-tag\">{{dice.ownerName}}\r\n      </div>\r\n    </div>\r\n    <div class=\"image-area character-image-box\"\r\n      [ngClass]=\"{ 'is-pointer-events-auto': !this.isPointerDragging, 'pointer-events-none': this.isPointerDragging }\"\r\n      *ngIf=\"hasImage\">\r\n      <img class=\"character-image\" [ngClass]=\"{'is-black-mask': !dice.isVisible, 'is-harf-black-mask': dice.isMine}\"\r\n        [src]=\"imageUrl | safe: 'resourceUrl'\" />\r\n    </div>\r\n    <div class=\"void-area is-pointer-events-none\"></div>\r\n    <div class=\"dataElm-area component-background\"\r\n      [ngClass]=\"{ 'is-pointer-events-auto': !this.isPointerDragging, 'pointer-events-none': this.isPointerDragging }\">\r\n      <div class=\"grid-container-root\" *ngIf=\"hasDataElms && dice.isVisible\">\r\n        <div class=\"grid-container\">\r\n          <ng-container *ngFor=\"let dataElm of dataElms\">\r\n            <ng-container *ngIf=\"dataElm && dataElm.name !== newLineString\">\r\n              <ng-container *ngTemplateOutlet=\"dataElement; context: { dataElm: dataElm }\"></ng-container>\r\n            </ng-container>\r\n          </ng-container>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</ng-template>\r\n\r\n<ng-template #dataElement let-dataElm=\"dataElm\">\r\n  <ng-container *ngIf=\"0 < dataElm.children.length; then thenBlock; else elseBlock\"></ng-container>\r\n  <ng-template #thenBlock>\r\n    <div class=\"section\" style=\"padding-top: 0.5em;\">\r\n      <div class=\"section-text\" *ngIf=\"0 < dataElm.name.trim().length\">{{dataElm.name}}</div>\r\n      <div class=\"grid-container indetnt\">\r\n        <ng-container *ngFor=\"let childElm of dataElm.children\">\r\n          <ng-container *ngTemplateOutlet=\"dataElement; context: { dataElm: childElm }\"></ng-container>\r\n        </ng-container>\r\n      </div>\r\n    </div>\r\n  </ng-template>\r\n  <ng-template #elseBlock>\r\n    <ng-container [ngSwitch]=\"dataElm.type\">\r\n      <ng-container *ngSwitchCase=\"'note'\">\r\n        <div class=\"section\">\r\n          \r\n          <div>{{dataElm.name}} \r\n            <span [hidden]=\"!isUrlText(dataElm.value)\">\r\n              &nbsp;&nbsp;URL編集:<input id = {{dataElm.myIdentifer}} type=\"checkbox\" (change)=\"changeChk()\"/>\r\n            </span>\r\n          </div>\r\n          <div class=\"note\" style=\"position: relative;\">\r\n            <div class=\"is-fill\">\r\n              <textarea class=\"textarea\" [(ngModel)]=\"dataElm.value\" spellcheck=\"false\" \r\n              (focus)=\"textFocus(dataElm.myIdentifer)\"\r\n              [hidden]=\"!isEditUrl(dataElm.myIdentifer) && isUrlText(dataElm.value)\" ></textarea>\r\n\r\n              <span class=\"textarea-url\" [innerHTML]=\"escapeHtml(dataElm.value) | linky:{stripPrefix: false}\" \r\n              [hidden]=\"isEditUrl(dataElm.myIdentifer) || !isUrlText(dataElm.value)\"></span>\r\n\r\n            </div>\r\n            <div class=\"textarea-spacer\" >{{dataElm.value}}</div>\r\n          </div>\r\n        </div>\r\n      </ng-container>\r\n      <ng-container *ngSwitchCase=\"'numberResource'\">\r\n        <div class=\"tag\">{{dataElm.name}}</div>\r\n        <div class=\"value\">\r\n          <div style=\"display: inline-block; width: min-content;\">\r\n            <div class=\"hidden-spacer\" style=\"margin-right: 2em;\">{{dataElm.currentValue}}</div>\r\n            <input class=\"input\" type=\"number\" size=\"1\" [(ngModel)]=\"dataElm.currentValue\" />\r\n          </div>\r\n          <div style=\"display: inline;\"> / {{dataElm.value}}</div>\r\n        </div>\r\n        <div class=\"section\" style=\"line-height: 1em;\">\r\n          <input type=\"range\"\r\n            [style]=\"'font-size: 0.8em; width: 100%; --min: 0; --max:' + dataElm.value + '; --val:' + dataElm.currentValue +';' | safe: 'style'\"\r\n            min=\"0\" max=\"{{dataElm.value}}\" [(ngModel)]=\"dataElm.currentValue\" />\r\n        </div>\r\n      </ng-container>\r\n      <ng-container *ngSwitchDefault>\r\n        <div class=\"tag\">{{dataElm.name}}</div>\r\n        <div class=\"value\">\r\n          <div class=\"hidden-spacer\">{{dataElm.value}}</div>\r\n          <input class=\"input\" size=\"1\" [(ngModel)]=\"dataElm.value\" />\r\n        </div>\r\n      </ng-container>\r\n    </ng-container>\r\n    <div class=\"section border\"></div>\r\n  </ng-template>\r\n</ng-template>\r\n\r\n<ng-template #imageView>\r\n  <div class=\"image-view-background is-fill\" (click)=\"chanageImageView(false)\" [@fadeInOut]=\"'in'\">\r\n    <div class=\"close-button is-pointer-events-none\"><i class=\"material-icons\">close</i></div>\r\n    <img class=\"contain-image\" [src]=\"imageUrl | safe: 'resourceUrl'\" />\r\n  </div>\r\n</ng-template>","import { ComponentFactoryResolver, ComponentRef, Injectable, Injector, ViewContainerRef } from '@angular/core';\r\n\r\n/*\r\nthanks\r\nhttp://qiita.com/Quramy/items/ccfcfa0e45dd9e43f041\r\nhttp://qiita.com/alclimb/items/1c740a432c10b6dc700a\r\n*/\r\n\r\nclass ModalContext {\r\n  constructor(\r\n    private _resolve: Function,\r\n    private _reject: Function,\r\n    public option?: any\r\n  ) {\r\n  }\r\n  resolve(value: any) {\r\n    this._resolve(value);\r\n    this._resolve = null;\r\n  }\r\n  reject(reason?: any) {\r\n    this._reject(reason);\r\n    this._reject = null;\r\n  }\r\n}\r\n\r\n@Injectable()\r\nexport class ModalService {\r\n  private modalContext: ModalContext = null;\r\n  private count = 0;\r\n\r\n  title: string = '無名のモーダル';\r\n\r\n  /* Todo */\r\n  static defaultParentViewContainerRef: ViewContainerRef;\r\n  static ModalComponentClass: { new(...args: any[]): any } = null;\r\n\r\n  constructor(\r\n    private componentFactoryResolver: ComponentFactoryResolver\r\n  ) { }\r\n\r\n  get option(): any {\r\n    return this.modalContext ? this.modalContext.option : null;\r\n  }\r\n\r\n  get isShow(): boolean {\r\n    return this.count > 0;\r\n  }\r\n\r\n  open<T>(childComponent: { new(...args: any[]) }, option?, parentViewContainerRef?: ViewContainerRef): Promise<T> {\r\n    if (!parentViewContainerRef) {\r\n      parentViewContainerRef = ModalService.defaultParentViewContainerRef;\r\n    }\r\n    let panelComponentRef: ComponentRef<any>;\r\n    return new Promise<T>((resolve, reject) => {\r\n      // Injector 作成\r\n      const _resolve = (val: T) => {\r\n        if (panelComponentRef) {\r\n          panelComponentRef.destroy();\r\n          resolve(val);\r\n          this.count--;\r\n        }\r\n      };\r\n\r\n      const _reject = (reason?: any) => {\r\n        if (panelComponentRef) {\r\n          panelComponentRef.destroy();\r\n          reject(reason);\r\n          this.count--;\r\n        }\r\n      };\r\n\r\n      const childModalService: ModalService = new ModalService(this.componentFactoryResolver);\r\n      childModalService.modalContext = new ModalContext(_resolve, _reject, option);\r\n\r\n      const parentInjector = parentViewContainerRef.injector;//parentViewContainerRef.parentInjector;\r\n      const injector = Injector.create([{ provide: ModalService, useValue: childModalService }], parentInjector);\r\n\r\n      const panelComponentFactory = this.componentFactoryResolver.resolveComponentFactory(ModalService.ModalComponentClass);\r\n      const bodyComponentFactory = this.componentFactoryResolver.resolveComponentFactory(childComponent);\r\n      panelComponentRef = parentViewContainerRef.createComponent(panelComponentFactory, parentViewContainerRef.length, injector);\r\n      panelComponentRef.instance.content.createComponent(bodyComponentFactory);\r\n\r\n      panelComponentRef.onDestroy(() => {\r\n        this.count--;\r\n      });\r\n\r\n      this.count++;\r\n    });\r\n  }\r\n\r\n  resolve(value?: any) {\r\n    if (this.modalContext) {\r\n      this.modalContext.resolve(value);\r\n      this.modalContext = null;\r\n    }\r\n  }\r\n\r\n  reject(reason?: any) {\r\n    if (this.modalContext) {\r\n      this.modalContext.reject(reason);\r\n      this.modalContext = null;\r\n    }\r\n  }\r\n}","import {\r\n  AfterViewInit,\r\n  ChangeDetectionStrategy,\r\n  ChangeDetectorRef,\r\n  Component,\r\n  Input,\r\n  OnDestroy,\r\n  OnInit,\r\n} from '@angular/core';\r\nimport { EventSystem } from '@udonarium/core/system';\r\nimport { DataElement } from '@udonarium/data-element';\r\n\r\nimport { ImageFile } from '@udonarium/core/file-storage/image-file';\r\nimport { ImageStorage } from '@udonarium/core/file-storage/image-storage';\r\nimport { FileSelecterComponent } from 'component/file-selecter/file-selecter.component';\r\nimport { ModalService } from 'service/modal.service';\r\nimport { PanelService } from 'service/panel.service';\r\n\r\n@Component({\r\n  selector: 'game-data-element, [game-data-element]',\r\n  templateUrl: './game-data-element.component.html',\r\n  styleUrls: ['./game-data-element.component.css'],\r\n  changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class GameDataElementComponent implements OnInit, OnDestroy, AfterViewInit {\r\n  @Input() gameDataElement: DataElement = null;\r\n  @Input() isEdit: boolean = false;\r\n  @Input() isTagLocked: boolean = false;\r\n  @Input() isValueLocked: boolean = false;\r\n\r\n  @Input() isImage: boolean = false;\r\n  @Input() indexNum: number = 0;\r\n\r\n  private _name: string = '';\r\n  get name(): string { return this._name; }\r\n  set name(name: string) { this._name = name; this.setUpdateTimer(); }\r\n\r\n  private _value: number | string = 0;\r\n  get value(): number | string { return this._value; }\r\n  set value(value: number | string) { this._value = value; this.setUpdateTimer(); }\r\n\r\n  private _currentValue: number | string = 0;\r\n  get currentValue(): number | string { return this._currentValue; }\r\n  set currentValue(currentValue: number | string) { this._currentValue = currentValue; this.setUpdateTimer(); }\r\n\r\n  private updateTimer: NodeJS.Timer = null;\r\n\r\n  constructor(\r\n    private panelService: PanelService,\r\n    private modalService: ModalService,\r\n    private changeDetector: ChangeDetectorRef\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    if (this.gameDataElement) this.setValues(this.gameDataElement);\r\n\r\n    EventSystem.register(this)\r\n      .on('UPDATE_GAME_OBJECT', -1000, event => {\r\n        if (this.gameDataElement && event.data.identifier === this.gameDataElement.identifier) {\r\n          this.setValues(this.gameDataElement);\r\n          this.changeDetector.markForCheck();\r\n        }\r\n      })\r\n      .on('DELETE_GAME_OBJECT', -1000, event => {\r\n        if (this.gameDataElement && this.gameDataElement.identifier === event.data.identifier) {\r\n          this.changeDetector.markForCheck();\r\n        }\r\n      });\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    EventSystem.unregister(this);\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n\r\n  }\r\n\r\n  get imageFileUrl(): string { \r\n     let image:ImageFile = ImageStorage.instance.get(<string>this.gameDataElement.value);\r\n     if (image) return image.url;\r\n     return '';\r\n  }\r\n\r\n  openModal(name: string = '', isAllowedEmpty: boolean = false) {\r\n    this.modalService.open<string>(FileSelecterComponent, { isAllowedEmpty: isAllowedEmpty }).then(value => {\r\n//      if (!this.tabletopObject || !this.tabletopObject.imageDataElement || !value) return;\r\n      if (!value) return;\r\n      let element = this.gameDataElement;\r\n      if (!element) return;\r\n      element.value = value;\r\n    });\r\n  }\r\n\r\n  addImageElement() {\r\n    this.gameDataElement.appendChild(DataElement.create('imageIdentifier', '', { type: 'image' }));\r\n  }\r\n\r\n\r\n  addElement() {\r\n    this.gameDataElement.appendChild(DataElement.create('標籤', '', {}));\r\n  }\r\n\r\n  deleteElement() {\r\n    this.gameDataElement.destroy();\r\n  }\r\n\r\n\r\n  deleteImageElement() {\r\n    if( this.gameDataElement.parent.children[0] != this.gameDataElement)    this.gameDataElement.destroy();\r\n  }\r\n\r\n\r\n  upElement() {\r\n    let parentElement = this.gameDataElement.parent;\r\n    let index: number = parentElement.children.indexOf(this.gameDataElement);\r\n    if (0 < index) {\r\n      let prevElement = parentElement.children[index - 1];\r\n      parentElement.insertBefore(this.gameDataElement, prevElement);\r\n    }\r\n  }\r\n\r\n  downElement() {\r\n    let parentElement = this.gameDataElement.parent;\r\n    let index: number = parentElement.children.indexOf(this.gameDataElement);\r\n    if (index < parentElement.children.length - 1) {\r\n      let nextElement = parentElement.children[index + 1];\r\n      parentElement.insertBefore(nextElement, this.gameDataElement);\r\n    }\r\n  }\r\n\r\n\r\n  setElementType(type: string) {\r\n    this.gameDataElement.setAttribute('type', type);\r\n  }\r\n\r\n  private setValues(object: DataElement) {\r\n    this._name = object.name;\r\n    this._currentValue = object.currentValue;\r\n    this._value = object.value;\r\n  }\r\n\r\n  private setUpdateTimer() {\r\n    clearTimeout(this.updateTimer);\r\n    this.updateTimer = setTimeout(() => {\r\n      if (this.gameDataElement.name !== this.name) this.gameDataElement.name = this.name;\r\n      if (this.gameDataElement.currentValue !== this.currentValue) this.gameDataElement.currentValue = this.currentValue;\r\n      if (this.gameDataElement.value !== this.value) this.gameDataElement.value = this.value;\r\n      this.updateTimer = null;\r\n    }, 66);\r\n  }\r\n\r\n  escapeHtml(text) {\r\n    return text.replace(/&/g, \"&amp;\").replace(/</g, \"&lt;\").replace(/>/g, \"&gt;\")\r\n               .replace(/\"/g, \"&quot;\").replace(/'/g, \"&#039;\");\r\n  }\r\n  \r\n  isEditUrl( dataElmIdentifier) {\r\n    let box = <HTMLInputElement>document.getElementById(dataElmIdentifier);\r\n    if( !box )return false;\r\n    return box.checked;\r\n  }\r\n  \r\n  isUrlText( text ){\r\n    if( text.match( /^https:\\/\\// ) )return true;\r\n    if( text.match( /^http:\\/\\// ) )return true;\r\n    return false;\r\n  }\r\n  \r\n  changeChk(){\r\n    //実処理なし\r\n  }\r\n\r\n  textFocus( dataElmIdentifier ){\r\n    let box = <HTMLInputElement>document.getElementById(dataElmIdentifier);\r\n    box.checked = true;\r\n  }\r\n  \r\n}\r\n","<ng-container *ngIf=\"gameDataElement\">\r\n  <ng-container *ngIf=\"gameDataElement.children.length < 1\">\r\n    <div *ngIf=\"isEdit\" class=\"table-cell table-cell_solid\">\r\n\r\n      <ng-container *ngIf=\"!isImage\">\r\n\r\n        <ng-container *ngTemplateOutlet=\"editButtons\"></ng-container>\r\n        <select (change)=\"setElementType($event.target.value)\" [ngModel]=\"gameDataElement.type\">\r\n          <option value=\"\">通常</option>\r\n          <option value=\"numberResource\">數值</option>\r\n          <option value=\"note\">筆記</option>\r\n        </select>\r\n      </ng-container>\r\n      <ng-container *ngIf=\"isImage && indexNum>=1\">\r\n        <ng-container  *ngTemplateOutlet=\"editButtonsImageTop\"></ng-container>\r\n      </ng-container>\r\n      <ng-container *ngIf=\"isImage && indexNum<1\">\r\n        <ng-container  *ngTemplateOutlet=\"editButtonsImageMiddle\"></ng-container>\r\n      </ng-container>\r\n\r\n    </div>\r\n    <div class=\"table-cell table-cell_solid\">\r\n      <ng-container *ngIf=\"isTagLocked\">\r\n        <ng-container *ngIf=\"!isImage\">\r\n          <div style=\"font-family: Cambria, Georgia; font-size: 0.9rem;\">{{name}}</div>\r\n        </ng-container>\r\n      </ng-container>\r\n      <ng-container *ngIf=\"!isTagLocked\">\r\n        <ng-container *ngIf=\"!isImage\">\r\n          <div class=\"hidden-spacer\" style=\"font-family: Cambria, Georgia; font-size: 0.9rem;\">{{name}}</div>\r\n          <input style=\"width:100%; min-width:10px; font-family: Cambria, Georgia; font-size: 0.9rem;\" size=\"1\"\r\n          [(ngModel)]=\"name\" placeholder=\"Value\" />\r\n        </ng-container>\r\n\r\n      </ng-container>\r\n    </div>\r\n    <div class=\"table-cell\" >\r\n      <ng-container [ngSwitch]=\"gameDataElement.type\">\r\n        <ng-container *ngSwitchCase=\"'numberResource'\">\r\n          <input [style]=\"'font-size: 1.0em; min-width: 90px; width: 90%; --min: 0; --max: ' + value + '; --val:' + currentValue +';' | safe: 'style'\"\r\n            [(ngModel)]=\"currentValue\" type=\"range\" min=\"0\" max=\"{{value}}\" />\r\n          <br>\r\n          <input style=\"width: 5em; text-align: right;\" size=\"1\" type=\"number\" [(ngModel)]=\"currentValue\" placeholder=\"Value\" />\r\n          /\r\n          <input style=\"width: 5em;\" size=\"1\" type=\"number\" [(ngModel)]=\"value\" placeholder=\"Value\" />\r\n        </ng-container>\r\n        <ng-container *ngSwitchCase=\"'note'\">\r\n          <span [hidden]=\"!isUrlText(value)\" style=\"font-size: 0.8em;\">\r\n            &nbsp;&nbsp;URL編集:<input id = \"{{gameDataElement.myIdentifer +'_elm'}}\" type=\"checkbox\" (change)=\"changeChk()\"/>\r\n          </span>\r\n<!--\r\n          <textarea style=\"width:100%; height:5em; min-width:50px; resize: none; font-size: 0.8em;\" [(ngModel)]=\"value\" placeholder=\"Note\"></textarea>\r\n-->\r\n          <textarea class=\"textarea-url\" \r\n          style=\"width:100%;height:5em; min-width:50px; resize: none; font-size: 0.8em;\"\r\n          [(ngModel)]=\"value\" placeholder=\"Note\"\r\n          [hidden]=\"!isEditUrl(gameDataElement.myIdentifer + '_elm') && isUrlText(gameDataElement.value)\"\r\n          (focus)=\"textFocus(gameDataElement.myIdentifer + '_elm')\">\r\n          </textarea>\r\n              \r\n          <div [hidden]=\"isEditUrl(gameDataElement.myIdentifer + '_elm') || !isUrlText(gameDataElement.value)\" \r\n          style=\"width:100%;max-width:200px;min-width:50px;\"><!--overflow:scroll;height:5em;-->\r\n            <span class=\"textarea-url\" \r\n            style=\"width:100%;min-width:50px; font-size: 0.8em;\" \r\n            [innerHTML]=\"escapeHtml(value) | linky:{stripPrefix: false}\"></span>\r\n          </div>\r\n        </ng-container>\r\n        <ng-container *ngSwitchDefault>\r\n\r\n          <ng-container *ngIf=\"!isImage\">\r\n            <div class=\"hidden-spacer\" style=\"font-size: 1.0em; font-family: Cambria, Georgia;\">{{value}}</div>\r\n            <input style=\"width:100%; min-width:10px;\" size=\"1\" [(ngModel)]=\"value\" placeholder=\"Value\" />\r\n          </ng-container>\r\n          <ng-container *ngIf=\"isImage\">\r\n          <div class=\"table-2\" >\r\n            <div class=\"table-cell-2 sub-image-box\">\r\n              \r\n              <img *ngIf=\"imageFileUrl\" class=\"sub-image\" [src]=\"imageFileUrl | safe: 'resourceUrl'\" [alt]=\"gameDataElement.value\"/>\r\n            </div>\r\n            <div class=\"table-cell-2 sub-table\">\r\n                <span>立繪編號{{indexNum}}: </span><input style=\"width:100%; min-width:10px;\" size=\"1\" [(ngModel)]=\"currentValue\" placeholder=\"立繪名稱\" />\r\n                <button class=\"tachie-button\" (click)=\"openModal('imageIdentifier', true)\" style=\"font-size:1.0em;\">變更圖片</button>\r\n\r\n            </div>\r\n          </div>\r\n          </ng-container>\r\n\r\n        </ng-container>\r\n      </ng-container>\r\n    </div>\r\n  </ng-container>\r\n  <ng-container *ngIf=\"0 < gameDataElement.children.length\">\r\n    <div *ngIf=\"isEdit\" class=\"table-cell table-cell_solid\" style=\"vertical-align: top;\">\r\n\r\n      <ng-container *ngIf=\"isImage\">\r\n        <ng-container *ngTemplateOutlet=\"editButtonsImageTitle\"></ng-container>\r\n      </ng-container>\r\n      <ng-container *ngIf=\"!isImage\">\r\n        <ng-container *ngTemplateOutlet=\"editButtons\"></ng-container>\r\n      </ng-container>\r\n\r\n    </div>\r\n    <div class=\"table-cell table-cell_inner-table\" style=\"padding:0; width:0;\"></div>\r\n    <div class=\"table-cell_inner-table\">\r\n      <div class=\"table-cell_inner-table-title\">\r\n        <ng-container *ngIf=\"isTagLocked\">\r\n          <div style=\"padding: 2px; font-family: Cambria, Georgia; font-size: 1.0rem; font-weight: bold;\">{{name}}</div>\r\n        </ng-container>\r\n        <ng-container *ngIf=\"!isTagLocked\">\r\n          <input style=\"width:100%; min-width:10px; font-family: Cambria, Georgia; font-size: 1.0rem; font-weight: bold;\"\r\n            size=\"1\" [(ngModel)]=\"name\" placeholder=\"Value\" />\r\n        </ng-container>\r\n      </div>\r\n      <div class=\"table\" *ngIf=\"0 < gameDataElement.children.length\">\r\n\r\n          <div game-data-element class=\"table-row\" *ngFor=\"let childElement of gameDataElement.children; let i = index;\"\r\n            [gameDataElement]=\"childElement\" [isEdit]=\"isEdit\" [isTagLocked]=\"isTagLocked\"  [isImage]=\"isImage\" [indexNum]=\"i\"></div>\r\n\r\n      </div>\r\n    </div>\r\n  </ng-container>\r\n</ng-container>\r\n<ng-template #editButtons>\r\n  <button (click)=\"addElement()\"><i class=\"material-icons\">add_circle</i></button>\r\n  <button (click)=\"upElement()\"><i class=\"material-icons\">arrow_upward</i></button>\r\n  <br>\r\n  <button (click)=\"deleteElement()\"><i class=\"material-icons\">remove_circle_outline</i></button>\r\n  <button (click)=\"downElement()\"><i class=\"material-icons\">arrow_downward</i></button>\r\n</ng-template>\r\n\r\n\r\n<ng-template #editButtonsImageTop>\r\n  <button class=\"dummy\" style = \"visibility:hidden\"><i class=\"material-icons\">remove_circle_outline</i></button>\r\n  <button (click)=\"upElement()\"><i class=\"material-icons\">arrow_upward</i></button>\r\n  <br>\r\n  <button (click)=\"deleteImageElement();\"><i class=\"material-icons\">remove_circle_outline</i></button>\r\n  <button (click)=\"downElement()\"><i class=\"material-icons\">arrow_downward</i></button>\r\n</ng-template>\r\n<ng-template #editButtonsImageMiddle>\r\n  <button class=\"dummy\" style = \"visibility:hidden\"><i class=\"material-icons\">remove_circle_outline</i></button>\r\n  <button (click)=\"upElement()\"><i class=\"material-icons\">arrow_upward</i></button>\r\n  <br>\r\n  <button class=\"dummy\" style = \"visibility:hidden\"><i class=\"material-icons\">remove_circle_outline</i></button>\r\n  <button (click)=\"downElement()\"><i class=\"material-icons\">arrow_downward</i></button>\r\n</ng-template>\r\n<ng-template #editButtonsImageTitle>\r\n  <button (click)=\"addImageElement()\"><i class=\"material-icons\">add_circle</i></button>\r\n</ng-template>\r\n\r\n","import { Card } from './card';\r\nimport { CardStack } from './card-stack';\r\nimport { SyncObject } from './core/synchronize-object/decorator';\r\nimport { GameObject } from './core/synchronize-object/game-object';\r\nimport { InnerXml, ObjectSerializer } from './core/synchronize-object/object-serializer';\r\nimport { ObjectStore } from './core/synchronize-object/object-store';\r\nimport { DiceSymbol } from './dice-symbol';\r\nimport { GameCharacter } from './game-character';\r\nimport { GameTable } from './game-table';\r\nimport { GameTableMask } from './game-table-mask';\r\nimport { Terrain } from './terrain';\r\nimport { TextNote } from './text-note';\r\n\r\nimport { CutIn } from './cut-in';\r\nimport { DiceTable } from './dice-table';\r\n\r\n@SyncObject('room')\r\nexport class Room extends GameObject implements InnerXml {\r\n  // GameObject Lifecycle\r\n  onStoreAdded() {\r\n    super.onStoreAdded();\r\n    ObjectStore.instance.remove(this); // ObjectStoreには登録しない\r\n  }\r\n\r\n  innerXml(): string {\r\n    let xml = '';\r\n    let objects: GameObject[] = [];\r\n    objects = objects.concat(ObjectStore.instance.getObjects(GameTable));\r\n    objects = objects.concat(ObjectStore.instance.getObjects(GameCharacter));\r\n    objects = objects.concat(ObjectStore.instance.getObjects(TextNote));\r\n    objects = objects.concat(ObjectStore.instance.getObjects(CardStack));\r\n    objects = objects.concat(ObjectStore.instance.getObjects(Card).filter((obj) => { return obj.parent === null }));\r\n    objects = objects.concat(ObjectStore.instance.getObjects(DiceSymbol));\r\n    objects = objects.concat(ObjectStore.instance.getObjects(CutIn));\r\n    objects = objects.concat(ObjectStore.instance.getObjects(DiceTable));\r\n\r\n    for (let object of objects) {\r\n      \r\n      xml += object.toXml();\r\n      \r\n    }\r\n    return xml;\r\n  }\r\n\r\n  parseInnerXml(element: Element) {\r\n    let objects: GameObject[] = [];\r\n    objects = objects.concat(ObjectStore.instance.getObjects(GameTable));\r\n    objects = objects.concat(ObjectStore.instance.getObjects(GameTableMask));\r\n    objects = objects.concat(ObjectStore.instance.getObjects(Terrain));\r\n    objects = objects.concat(ObjectStore.instance.getObjects(GameCharacter));\r\n    objects = objects.concat(ObjectStore.instance.getObjects(TextNote));\r\n    objects = objects.concat(ObjectStore.instance.getObjects(CardStack));\r\n    objects = objects.concat(ObjectStore.instance.getObjects(Card));\r\n    objects = objects.concat(ObjectStore.instance.getObjects(DiceSymbol));\r\n\r\n    objects = objects.concat(ObjectStore.instance.getObjects(CutIn));\r\n    objects = objects.concat(ObjectStore.instance.getObjects(DiceTable));\r\n\r\n    for (let object of objects) {\r\n      object.destroy();\r\n    }\r\n    for (let i = 0; i < element.children.length; i++) {\r\n      ObjectSerializer.instance.parseXml(element.children[i]);\r\n    }\r\n  }\r\n}\r\n","import { animate, keyframes, state, style, transition, trigger } from '@angular/animations';\r\nimport { Component, ViewChild, ViewContainerRef } from '@angular/core';\r\nimport { ModalService } from 'service/modal.service';\r\n\r\n@Component({\r\n  selector: 'modal',\r\n  templateUrl: './modal.component.html',\r\n  styleUrls: ['./modal.component.css'],\r\n  animations: [\r\n    trigger('flyInOut', [\r\n      transition('void => *', [\r\n        animate('100ms ease-out', keyframes([\r\n          style({ transform: 'scale(0.8, 0.8)', opacity: '0', offset: 0 }),\r\n          style({ transform: 'scale(1.0, 1.0)', opacity: '1.0', offset: 1.0 })\r\n        ]))\r\n      ]),\r\n      transition('* => void', [\r\n        animate(100, style({ transform: 'scale(0, 0)' }))\r\n      ])\r\n    ]),\r\n    trigger('bgInOut', [\r\n      state('in', style({ 'background-color': 'rgba(30, 30, 30, 0.4)' })),\r\n      transition('void => *', [\r\n        style({ 'background-color': 'rgba(30, 30, 30, 0.0)' }), animate(200)\r\n      ]),\r\n      transition('* => void', [\r\n        animate(200, style({ 'background-color': 'rgba(30, 30, 30, 0.0)' }))\r\n      ])\r\n    ]),\r\n  ]\r\n})\r\nexport class ModalComponent {\r\n  @ViewChild('content', { read: ViewContainerRef, static: true }) content: ViewContainerRef;\r\n\r\n  constructor(\r\n    public modalService: ModalService) { }\r\n\r\n  clickBackground(event: MouseEvent) {\r\n    if (event.target === event.currentTarget) this.resolve();\r\n  }\r\n\r\n  resolve() {\r\n    this.modalService.resolve(null);\r\n  }\r\n\r\n  reject() {\r\n    this.modalService.reject();\r\n  }\r\n}\r\n","<div class=\"component\">\r\n  <div [@bgInOut]=\"'in'\" class=\"modal-background\" (click)=\"clickBackground($event)\"></div>\r\n  <div [@flyInOut]=\"'in'\" class=\"modal-panel\">\r\n    <div class=\"title\">\r\n      <div class=\"title-button\">\r\n        <button (click)=\"resolve()\"><i class=\"material-icons\" style=\"font-size: 14px;\">close</i></button>\r\n      </div>\r\n      {{modalService.title}}\r\n    </div>\r\n    <div class=\"scrollable-panel\">\r\n      <ng-content></ng-content>\r\n      <div #content></div>\r\n    </div>\r\n    <!--<div class=\"footer\"><button (click)=\"resolve()\">OK</button><button (click)=\"resolve()\">CANCEL</button></div>-->\r\n  </div>\r\n</div>","import { AfterViewInit, Component, NgZone, OnDestroy, OnInit } from '@angular/core';\r\n\r\nimport { ObjectStore } from '@udonarium/core/synchronize-object/object-store';\r\nimport { PeerContext } from '@udonarium/core/system/network/peer-context';\r\nimport { EventSystem, Network } from '@udonarium/core/system';\r\nimport { PeerCursor } from '@udonarium/peer-cursor';\r\n\r\nimport { FileSelecterComponent } from 'component/file-selecter/file-selecter.component';\r\nimport { LobbyComponent } from 'component/lobby/lobby.component';\r\nimport { AppConfigService } from 'service/app-config.service';\r\nimport { ModalService } from 'service/modal.service';\r\nimport { PanelService } from 'service/panel.service';\r\n\r\n@Component({\r\n  selector: 'peer-menu',\r\n  templateUrl: './peer-menu.component.html',\r\n  styleUrls: ['./peer-menu.component.css']\r\n})\r\nexport class PeerMenuComponent implements OnInit, OnDestroy, AfterViewInit {\r\n\r\n  targetUserId: string = '';\r\n  networkService = Network\r\n  gameRoomService = ObjectStore.instance;\r\n  help: string = '';\r\n\r\n  get myPeer(): PeerCursor { return PeerCursor.myCursor; }\r\n\r\n  constructor(\r\n    private ngZone: NgZone,\r\n    private modalService: ModalService,\r\n    private panelService: PanelService,\r\n    public appConfigService: AppConfigService\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    Promise.resolve().then(() => this.panelService.title = '連線情報');\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    EventSystem.register(this)\r\n      .on('OPEN_NETWORK', event => {\r\n        this.ngZone.run(() => { });\r\n      });\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    EventSystem.unregister(this);\r\n  }\r\n\r\n  changeIcon() {\r\n    this.modalService.open<string>(FileSelecterComponent).then(value => {\r\n      if (!this.myPeer || !value) return;\r\n      this.myPeer.imageIdentifier = value;\r\n    });\r\n  }\r\n\r\n  private resetPeerIfNeeded() {\r\n    if (Network.peerContexts.length < 1) {\r\n      Network.open();\r\n      PeerCursor.myCursor.peerId = Network.peerId;\r\n    }\r\n  }\r\n\r\n  connectPeer() {\r\n    this.help = '';\r\n    let context = PeerContext.create(this.targetUserId);\r\n    if (context.isRoom) return;\r\n    ObjectStore.instance.clearDeleteHistory();\r\n    Network.connect(context.peerId);\r\n  }\r\n\r\n  async connectPeerHistory() {\r\n    this.help = '';\r\n    let conectPeers: PeerContext[] = [];\r\n    let roomId: string = '';\r\n\r\n    for (let peerId of this.appConfigService.peerHistory) {\r\n      let context = PeerContext.parse(peerId);\r\n      if (context.isRoom) {\r\n        if (roomId !== context.roomId) conectPeers = [];\r\n        roomId = context.roomId;\r\n        conectPeers.push(context);\r\n      } else {\r\n        if (roomId !== context.roomId) conectPeers = [];\r\n        conectPeers.push(context);\r\n      }\r\n    }\r\n\r\n    if (roomId.length) {\r\n      console.warn('connectPeerRoom <' + roomId + '>');\r\n      let conectPeers: PeerContext[] = [];\r\n      let peerIds = await Network.listAllPeers();\r\n      for (let peerId of peerIds) {\r\n        console.log(peerId);\r\n        let context = PeerContext.parse(peerId);\r\n        if (context.roomId === roomId) {\r\n          conectPeers.push(context);\r\n        }\r\n      }\r\n      if (conectPeers.length < 1) {\r\n        this.help = '找不到您上次連接的房間。 它可能已經解散了。';\r\n        console.warn('Room is already closed...');\r\n        return;\r\n      }\r\n      Network.open(PeerContext.generateId(), conectPeers[0].roomId, conectPeers[0].roomName, conectPeers[0].password);\r\n    } else {\r\n      console.warn('connectPeers ' + conectPeers.length);\r\n      Network.open();\r\n    }\r\n\r\n    PeerCursor.myCursor.peerId = Network.peerId;\r\n\r\n    let listener = EventSystem.register(this);\r\n    listener.on('OPEN_NETWORK', event => {\r\n      console.log('OPEN_NETWORK', event.data.peerId);\r\n      EventSystem.unregisterListener(listener);\r\n      ObjectStore.instance.clearDeleteHistory();\r\n      for (let context of conectPeers) {\r\n        Network.connect(context.peerId);\r\n      }\r\n    });\r\n  }\r\n\r\n  showLobby() {\r\n    this.modalService.open(LobbyComponent, { width: 700, height: 400, left: 0, top: 400 });\r\n  }\r\n\r\n  findUserId(peerId: string) {\r\n    const peerCursor = PeerCursor.findByPeerId(peerId);\r\n    return peerCursor ? peerCursor.userId : '';\r\n  }\r\n\r\n  findPeerName(peerId: string) {\r\n    const peerCursor = PeerCursor.findByPeerId(peerId);\r\n    return peerCursor ? peerCursor.name : '';\r\n  }\r\n}\r\n","<div *ngIf=\"myPeer\">\r\n  <button (click)=\"changeIcon()\">變更頭像</button>\r\n  <div *ngIf=\"myPeer.image\" class=\"image cover\" [style.background-image]=\"'url(' + myPeer.image.url + ')' | safe: 'style' \"\r\n    (click)=\"changeIcon()\">\r\n    <!--<img *ngIf=\"myPeer.image\" [src]=\"myPeer.image.url | safe: 'resourceUrl'\" />-->\r\n  </div>\r\n  <span>你的暱稱：  <input [(ngModel)]=\"myPeer.name\"  placeholder=\"ニックネーム\" /></span>\r\n</div>\r\n<div>\r\n  <span>你的ID：<span *ngIf=\"networkService.isOpen\" style=\"font-weight: bold;\">{{networkService.peerContext.userId}}</span>\r\n  <span *ngIf=\"!networkService.isOpen\" style=\"font-weight: bold;\">???</span>\r\n  </span>\r\n</div>\r\n<!--<div>host ID:{{networkService.hostPeerID}}</div>-->\r\n<ng-container *ngIf=\"networkService.peerContext.isRoom\">\r\n  <hr/>\r\n  <div>\r\n    <span>房間名稱：<span *ngIf=\"networkService.isOpen\" style=\"font-weight: bold;\">{{networkService.peerContext.roomName}}/{{networkService.peerContext.roomId}}</span></span>\r\n  </div>\r\n  <div>\r\n    <span>密碼：<span *ngIf=\"networkService.isOpen\" style=\"font-weight: bold;\">{{networkService.peerContext.password}}</span></span>\r\n  </div>\r\n</ng-container>\r\n<hr/>\r\n<div *ngFor=\"let context of networkService.peerContexts\">\r\n  <div>\r\n    <span *ngIf=\"!context.isOpen\">[連線中]</span>\r\n    <span>其他参加者：{{findUserId(context.peerId)}} [{{findPeerName(context.peerId)}}]</span>\r\n  </div>\r\n</div>\r\n<div>\r\n  <ng-container *ngIf=\"!networkService.peerContext.isRoom\">\r\n    <input [(ngModel)]=\"targetUserId\" placeholder=\"連線對像的ID\" name=\"targetUserId\" />\r\n    <button (click)=\"connectPeer()\" [disabled]=\"!networkService.isOpen\">私人連線</button><br>\r\n  </ng-container>\r\n  <button *ngIf=\"networkService.peerIds.length <= 1\" (click)=\"showLobby()\" [disabled]=\"!networkService.isOpen\">顯示大廳(房間列表)</button>\r\n</div>\r\n<div><span style=\"font-size: 12px;\">{{help}}</span></div>\r\n<ng-container *ngIf=\"!networkService.peerContext.isRoom\">\r\n  <div style=\"font-size: 12px;\" *ngIf=\"networkService.peerContexts.length < 1\">※若要使用私人連線，請與對方分享彼此的ID。</div>\r\n  <div style=\"font-size: 12px;\" *ngIf=\"networkService.peerContexts.length < 1\">※可以自己打開兩頁這個網站，進行測試。</div>\r\n</ng-container>\r\n<ng-container *ngIf=\"networkService.peerContext.isRoom\">\r\n  <div style=\"font-size: 12px;\">※使用大廳功能時，不能使用私人連線。</div>\r\n</ng-container>\r\n","import { XmlUtil } from '../system/util/xml-util';\r\nimport { Attributes } from './attributes';\r\nimport { defineSyncObject as SyncObject, defineSyncVariable as SyncVar } from './decorator-core';\r\nimport { GameObject, ObjectContext } from './game-object';\r\nimport { InnerXml, ObjectSerializer, XmlAttributes } from './object-serializer';\r\nimport { ObjectStore } from './object-store';\r\n\r\n@SyncObject('node')\r\nexport class ObjectNode extends GameObject implements XmlAttributes, InnerXml {\r\n  @SyncVar() value: number | string = '';\r\n  @SyncVar() protected attributes: Attributes = {};\r\n  @SyncVar() private parentIdentifier: string = '';\r\n  @SyncVar() protected majorIndex: number = 0;\r\n  @SyncVar() protected minorIndex: number = Math.random();\r\n\r\n  get index(): number { return this.majorIndex + this.minorIndex; }\r\n  set index(index: number) {\r\n    this.majorIndex = index | 0;\r\n    this.minorIndex = index - this.majorIndex;\r\n    if (this.parent) this.parent.needsSort = true;\r\n  }\r\n\r\n  get parent(): ObjectNode { return ObjectStore.instance.get<ObjectNode>(this.parentIdentifier); }\r\n  get parentId(): string { return this.parentIdentifier; }\r\n  get parentIsAssigned(): boolean { return 0 < this.parentIdentifier.length; }\r\n  get parentIsUnknown(): boolean { return this.parentIsAssigned && ObjectStore.instance.get(this.parentIdentifier) == null; }\r\n  get parentIsDestroyed(): boolean { return this.parentIsAssigned && ObjectStore.instance.isDeleted(this.parentIdentifier); }\r\n\r\n  private _children: ObjectNode[] = [];\r\n  get children(): ObjectNode[] {\r\n    if (this.needsSort) {\r\n      this.needsSort = false;\r\n      this._children.sort((a, b) => a.index - b.index);\r\n    }\r\n    return this._children.concat();\r\n  }\r\n\r\n  // TODO 名前　親Nodeの存在が未知の状態であるNode\r\n  private static unknownNodes: { [identifier: string]: ObjectNode[] } = {};\r\n  private needsSort: boolean = true;\r\n\r\n  // override\r\n  destroy() {\r\n    super.destroy();\r\n    for (let child of this._children.concat()) {\r\n      child.destroy();\r\n    }\r\n    this._children = [];\r\n  }\r\n\r\n  // GameObject Lifecycle\r\n  onStoreAdded() {\r\n    super.onStoreAdded();\r\n    this.initializeChildren();\r\n  }\r\n\r\n  // GameObject Lifecycle\r\n  onStoreRemoved() {\r\n    super.onStoreRemoved();\r\n    if (this.parent) this.parent.removeChild(this);\r\n  }\r\n\r\n  // ObjectNode Lifecycle\r\n  onChildAdded(child: ObjectNode) { }\r\n\r\n  // ObjectNode Lifecycle\r\n  onChildRemoved(child: ObjectNode) { }\r\n\r\n  private _onChildAdded(child: ObjectNode) {\r\n    let node: ObjectNode = this;\r\n    while (node) {\r\n      node.onChildAdded(child);\r\n      node = node.parent;\r\n      if (node === this) break;\r\n    }\r\n  }\r\n\r\n  private _onChildRemoved(child: ObjectNode) {\r\n    let node: ObjectNode = this;\r\n    while (node) {\r\n      node.onChildRemoved(child);\r\n      node = node.parent;\r\n      if (node === this) break;\r\n    }\r\n  }\r\n\r\n  private initializeChildren() {\r\n    if (ObjectNode.unknownNodes[this.identifier] == null) return;\r\n    let objects = ObjectNode.unknownNodes[this.identifier];\r\n    for (let object of objects) {\r\n      if (object.parent === this) this.updateChildren(object);\r\n    }\r\n    if (ObjectNode.unknownNodes[this.identifier]) {\r\n      delete ObjectNode.unknownNodes[this.identifier];\r\n    }\r\n  }\r\n\r\n  private updateChildren(child: ObjectNode = this) {\r\n    let index = this._children.indexOf(child);\r\n    let isAdded = false;\r\n    let isMyChild = child.parent === this;\r\n\r\n    if (index < 0 && isMyChild) {\r\n      this._children.push(child);\r\n      index = this._children.length - 1;\r\n      isAdded = true;\r\n    } else if (0 <= index && !isMyChild) {\r\n      this._children.splice(index, 1);\r\n      this._onChildRemoved(child);\r\n      return;\r\n    } else if (index < 0 && !isMyChild) {\r\n      return;\r\n    }\r\n\r\n    let childrenLength = this._children.length;\r\n    if (!childrenLength) return;\r\n    let prevIndex = index - 1 < 0 ? 0 : index - 1;\r\n    let nextIndex = childrenLength - 1 < index + 1 ? childrenLength - 1 : index + 1;\r\n\r\n    if (this._children[prevIndex].index > child.index || child.index > this._children[nextIndex].index) this.needsSort = true;\r\n    if (isAdded) this._onChildAdded(child);\r\n  }\r\n\r\n  private updateIndexs() {\r\n    let children = this.children;\r\n    for (let i = 0; i < children.length; i++) {\r\n      children[i].majorIndex = i;\r\n      children[i].minorIndex = Math.random();\r\n    }\r\n  }\r\n\r\n  appendChild<T extends ObjectNode>(child: T): T {\r\n    if (child.contains(this)) return null;\r\n    if (child.parent && child.parent !== this) child.parent.removeChild(child);\r\n\r\n    let lastIndex = 0 < this.children.length ? this.children[this.children.length - 1].majorIndex + 1 : 0;\r\n\r\n    child.parentIdentifier = this.identifier;\r\n    child.majorIndex = lastIndex;\r\n    child.minorIndex = Math.random();\r\n\r\n    this.updateChildren(child);\r\n\r\n    return child;\r\n  }\r\n\r\n  insertBefore<T extends ObjectNode>(child: T, reference: ObjectNode): T {\r\n    if (child.contains(this)) return null;\r\n    if (child === reference && child.parent === this) return child;\r\n\r\n    if (child.parent && child.parent !== this) child.parent.removeChild(child);\r\n\r\n    let index = this.children.indexOf(reference);\r\n    if (index < 0) return this.appendChild(child);\r\n\r\n    child.parentIdentifier = this.identifier;\r\n\r\n    let prevIndex = 0 < index ? this.children[index - 1].index : 0;\r\n    let diff = reference.index - prevIndex;\r\n    let insertIndex = prevIndex + diff * (0.45 + 0.1 * Math.random());\r\n    child.majorIndex = insertIndex | 0;\r\n    child.minorIndex = insertIndex - child.majorIndex;\r\n\r\n    this.updateChildren(child);\r\n    if (diff < 1e-7) {\r\n      this.updateIndexs();\r\n    }\r\n\r\n    return child;\r\n  }\r\n\r\n  removeChild<T extends ObjectNode>(child: T): T {\r\n    let children = this.children;\r\n    let index: number = children.indexOf(child);\r\n    if (index < 0) return null;\r\n\r\n    child.parentIdentifier = '';\r\n    child.majorIndex = 0;\r\n    child.minorIndex = Math.random();\r\n\r\n    this.updateChildren(child);\r\n    return child;\r\n  }\r\n\r\n  contains(child: ObjectNode): boolean {\r\n    let parent = child.parent;\r\n    while (parent) {\r\n      if (parent === child) {\r\n        console.error('あ やっべ、循環参照', child);\r\n        return false;\r\n      }\r\n      if (parent === this) return true;\r\n      parent = parent.parent;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  setAttribute(name: string, value: number | string) {\r\n    this.attributes[name] = value;\r\n    this.update();\r\n  }\r\n\r\n  getAttribute(name: string): string {\r\n    if (this.attributes[name] == null) {\r\n      return '';\r\n    }\r\n    return <string>this.attributes[name];\r\n  }\r\n\r\n  removeAttribute(name: string) {\r\n    delete this.attributes[name];\r\n    this.update();\r\n  }\r\n\r\n  toAttributes(): Attributes {\r\n    return ObjectSerializer.toAttributes(this.attributes);\r\n  };\r\n\r\n  parseAttributes(attributes: NamedNodeMap) {\r\n    ObjectSerializer.parseAttributes(this.attributes, attributes);\r\n  };\r\n\r\n  innerXml(): string {\r\n    let xml = '';\r\n    xml += XmlUtil.encodeEntityReference(this.value + '');\r\n    for (let child of this.children) {\r\n      xml += ObjectSerializer.instance.toXml(child);\r\n    }\r\n    return xml;\r\n  };\r\n\r\n  parseInnerXml(element: Element) {\r\n    let children = element.children;\r\n    let length = children.length;\r\n    if (0 < length) {\r\n      for (let i = 0; i < length; i++) {\r\n        let child = ObjectSerializer.instance.parseXml(children[i]);\r\n        if (child instanceof ObjectNode) this.appendChild(child);\r\n      }\r\n    } else {\r\n      this.value = XmlUtil.decodeEntityReference(element.innerHTML);\r\n    }\r\n  };\r\n\r\n  // override\r\n  apply(context: ObjectContext) {\r\n    let oldParent = this.parent;\r\n    super.apply(context);\r\n    if (oldParent && this.parent !== oldParent) oldParent.updateChildren(this);\r\n    if (this.parent) {\r\n      this.parent.updateChildren(this);\r\n    } else if (this.parentIsAssigned) {\r\n      if (!(this.parentIdentifier in ObjectNode.unknownNodes)) {\r\n        ObjectNode.unknownNodes[this.parentIdentifier] = [];\r\n      }\r\n      ObjectNode.unknownNodes[this.parentIdentifier].push(this);\r\n    }\r\n  }\r\n}\r\n","import {\r\n  AfterViewInit,\r\n  ChangeDetectionStrategy,\r\n  ChangeDetectorRef,\r\n  Component,\r\n  Input,\r\n  OnDestroy,\r\n  OnInit,\r\n} from '@angular/core';\r\nimport { ImageFile } from '@udonarium/core/file-storage/image-file';\r\nimport { ImageStorage } from '@udonarium/core/file-storage/image-storage';\r\nimport { EventSystem, Network } from '@udonarium/core/system';\r\nimport { ModalService } from 'service/modal.service';\r\nimport { PanelService } from 'service/panel.service';\r\n\r\nimport { ImageTag } from '@udonarium/image-tag';//本家PR #92より\r\n\r\n@Component({\r\n  selector: 'file-selector',\r\n  templateUrl: './file-selecter.component.html',\r\n  styleUrls: ['./file-selecter.component.css'],\r\n  changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class FileSelecterComponent implements OnInit, OnDestroy, AfterViewInit {\r\n\r\n//本家PR #92より\r\n  searchWord: string = '';\r\n\r\n  private _searchWord: string;\r\n  \r\n  private _searchWords: string[];\r\n  get searchWords(): string[] {\r\n    if (this._searchWord !== this.searchWord) {\r\n      this._searchWord = this.searchWord;\r\n      this._searchWords = this.searchWord != null && 0 < this.searchWord.trim().length ? this.searchWord.trim().split(/\\s+/) : [];\r\n    }\r\n    return this._searchWords; \r\n  }\r\n//\r\n\r\n\r\n  @Input() isAllowedEmpty: boolean = false;\r\n\r\n  getAllImage():ImageFile[]{\r\n    let imageFileList: ImageFile[] = [];\r\n    \r\n    for (let imageFile of this.fileStorageService.images){\r\n      let identifier = imageFile.context.identifier;\r\n      let tag: string = '';\r\n      if( ImageTag.get(identifier) ) tag = ImageTag.get(identifier).tag;\r\n      \r\n      if( tag != 'システム予約')   //システム予約名を非表示\r\n        imageFileList.push(imageFile);\r\n    }\r\n    return imageFileList;\r\n  }\r\n\r\n//本家PR #92より\r\n  get images(): ImageFile[] {\r\n      let imageFileList: ImageFile[] = [];\r\n      if (this.selectTag == '全て') return this.getAllImage();\r\n\r\n      for (let imageFile of this.fileStorageService.images){\r\n        let identifier = imageFile.context.identifier;\r\n\r\n        if( ImageTag.get(identifier) ){\r\n          let tag: string = ImageTag.get(identifier).tag;\r\n          if( this.selectTag == tag ){\r\n            imageFileList.push(imageFile);\r\n          }\r\n        }else{//タグ未設定の場合 画像投下直後は ImageTag.get(identifier) は空文字ではなく該当なしとなるため\r\n          if( this.selectTag == '' ){\r\n            imageFileList.push(imageFile);\r\n          }\r\n        }\r\n      }\r\n\r\n      return imageFileList;\r\n  }\r\n\r\n  selectedFile: ImageFile = null;\r\n  get isSelected(): boolean { return this.selectedFile != null; }\r\n  get selectedImageTag(): ImageTag {\r\n    if (!this.isSelected) return null;\r\n    const imageTag = ImageTag.get(this.selectedFile.identifier);\r\n    return imageTag ? imageTag : ImageTag.create(this.selectedFile.identifier);\r\n  }\r\n\r\n  get tagList(): string[]{\r\n    let tags:  string[] = [];\r\n    for (let imageFile of this.fileStorageService.images){\r\n      let identifier = imageFile.context.identifier;\r\n      let imageTag = ImageTag.get(identifier);\r\n      if( imageTag ){\r\n        if( imageTag.tag ){\r\n          if( imageTag.tag != 'システム予約')   //システム予約名を非表示\r\n            tags.push(imageTag.tag);\r\n        }\r\n      }\r\n    }\r\n    \r\n    let tags2:  string[] = Array.from(new Set(tags));\r\n    tags2.unshift('全て');\r\n    tags2.unshift('');\r\n    return tags2;\r\n  }\r\n  \r\n  selectTag :string = '';\r\n  fileStorageService = ImageStorage.instance;\r\n\r\n  identifierList :string[] = [];\r\n  newTagName:string = '';\r\n\r\n  resetBtn() {\r\n\r\n  }\r\n\r\n  onChange(fileName:string, checked : boolean) {\r\n\r\n    const imageTag = ImageTag.get(fileName);\r\n    if( !imageTag ) ImageTag.create(fileName);\r\n\r\n    if (checked) {\r\n       if (this.identifierList.indexOf(fileName) < 0) { \r\n          this.identifierList.push(fileName);\r\n       }\r\n    } else {\r\n       if (this.identifierList.indexOf(fileName) > -1) {\r\n         this.identifierList.splice(this.identifierList.indexOf(fileName), 1);              \r\n       }\r\n    }\r\n  }\r\n\r\n  get empty(): ImageFile { return ImageFile.Empty; }\r\n\r\n  constructor(\r\n    private changeDetector: ChangeDetectorRef,\r\n    private panelService: PanelService,\r\n    private modalService: ModalService\r\n  ) {\r\n    this.isAllowedEmpty = this.modalService.option && this.modalService.option.isAllowedEmpty ? true : false;\r\n  }\r\n\r\n  ngOnInit() {\r\n    Promise.resolve().then(() => this.modalService.title = this.panelService.title = 'ファイル一覧');\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    EventSystem.register(this).on('SYNCHRONIZE_FILE_LIST', event => {\r\n      if (event.isSendFromSelf) {\r\n        this.changeDetector.markForCheck();\r\n      }\r\n    });\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    EventSystem.unregister(this);\r\n  }\r\n\r\n  onSelectedFile(file: ImageFile) {\r\n    console.log('onSelectedFile', file);\r\n    EventSystem.call('SELECT_FILE', { fileIdentifier: file.identifier }, Network.peerId);\r\n    this.modalService.resolve(file.identifier);\r\n  }\r\n}\r\n","<form>\r\n  <div class=\"image-chg\">\r\n    <label *ngFor=\"let tag of tagList\" >\r\n      <input name=\"image-chg\"  type=\"radio\" value=\"{{tag}}\"  [(ngModel)]=\"selectTag\" (change) =\"resetBtn()\" >\r\n      <div *ngIf= \"tag.length == 0\" >未設定</div>\r\n      <div *ngIf= \"tag.length > 0\" >{{tag}}</div>\r\n    </label>\r\n  </div>\r\n</form>\r\n<div id=\"file-list\">\r\n  <span class=\"empty\" *ngIf=\"isAllowedEmpty\">\r\n    <button (click)=\"onSelectedFile(empty)\">無圖片</button>\r\n  </span>\r\n    <span *ngFor=\"let file of images\" class=\"image\">\r\n    <div style=\"float:left\">\r\n      <img *ngIf=\"(0 < file.url.length) \" [src]=\"file.url | safe: 'resourceUrl'\" [alt]=\"file.name\" height=\"120\" (click)=\"onSelectedFile(file)\">\r\n      <img *ngIf=\"file.url.length <= 0 \" src=\"assets/images/loading.gif\" alt=\"{{file.name}}\">\r\n    </div>\r\n    </span>\r\n</div>","import { animate, keyframes, style, transition, trigger } from '@angular/animations';\r\nimport {\r\n  AfterViewInit,\r\n  ChangeDetectionStrategy,\r\n  ChangeDetectorRef,\r\n  Component,\r\n  ElementRef,\r\n  HostListener,\r\n  Input,\r\n  NgZone,\r\n  OnDestroy,\r\n  OnInit,\r\n} from '@angular/core';\r\nimport { ImageFile } from '@udonarium/core/file-storage/image-file';\r\nimport { ObjectNode } from '@udonarium/core/synchronize-object/object-node';\r\nimport { ObjectStore } from '@udonarium/core/synchronize-object/object-store';\r\nimport { EventSystem, Network } from '@udonarium/core/system';\r\nimport { DiceSymbol } from '@udonarium/dice-symbol';\r\nimport { PeerCursor } from '@udonarium/peer-cursor';\r\nimport { PresetSound, SoundEffect } from '@udonarium/sound-effect';\r\nimport { GameCharacterSheetComponent } from 'component/game-character-sheet/game-character-sheet.component';\r\nimport { InputHandler } from 'directive/input-handler';\r\nimport { MovableOption } from 'directive/movable.directive';\r\nimport { RotableOption } from 'directive/rotable.directive';\r\nimport { ContextMenuAction, ContextMenuSeparator, ContextMenuService } from 'service/context-menu.service';\r\nimport { PanelOption, PanelService } from 'service/panel.service';\r\nimport { PointerDeviceService } from 'service/pointer-device.service';\r\n\r\n@Component({\r\n  selector: 'dice-symbol',\r\n  templateUrl: './dice-symbol.component.html',\r\n  styleUrls: ['./dice-symbol.component.css'],\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n  animations: [\r\n    trigger('diceRoll', [\r\n      transition('* => active', [\r\n        animate('800ms ease', keyframes([\r\n          style({ transform: 'scale3d(0.8, 0.8, 0.8) rotateZ(0deg)', offset: 0 }),\r\n          style({ transform: 'scale3d(1.2, 1.2, 1.2) rotateZ(360deg)', offset: 0.5 }),\r\n          style({ transform: 'scale3d(0.75, 0.75, 0.75) rotateZ(520deg)', offset: 0.75 }),\r\n          style({ transform: 'scale3d(1.125, 1.125, 1.125) rotateZ(630deg)', offset: 0.875 }),\r\n          style({ transform: 'scale3d(1.0, 1.0, 1.0) rotateZ(720deg)', offset: 1.0 })\r\n        ]))\r\n      ])\r\n    ]),\r\n    trigger('bounceInOut', [\r\n      transition('void => *', [\r\n        animate('600ms ease', keyframes([\r\n          style({ transform: 'scale3d(0, 0, 0)', offset: 0 }),\r\n          style({ transform: 'scale3d(1.5, 1.5, 1.5)', offset: 0.5 }),\r\n          style({ transform: 'scale3d(0.75, 0.75, 0.75)', offset: 0.75 }),\r\n          style({ transform: 'scale3d(1.125, 1.125, 1.125)', offset: 0.875 }),\r\n          style({ transform: 'scale3d(1.0, 1.0, 1.0)', offset: 1.0 })\r\n        ]))\r\n      ]),\r\n      transition('* => void', [\r\n        animate(100, style({ transform: 'scale3d(0, 0, 0)' }))\r\n      ])\r\n    ])\r\n  ]\r\n})\r\nexport class DiceSymbolComponent implements OnInit, AfterViewInit, OnDestroy {\r\n  @Input() diceSymbol: DiceSymbol = null;\r\n  @Input() is3D: boolean = false;\r\n\r\n  get face(): string { return this.diceSymbol.face; }\r\n  set face(face: string) { this.diceSymbol.face = face; }\r\n  get owner(): string { return this.diceSymbol.owner; }\r\n  set owner(owner: string) { this.diceSymbol.owner = owner; }\r\n  get rotate(): number { return this.diceSymbol.rotate; }\r\n  set rotate(rotate: number) { this.diceSymbol.rotate = rotate; }\r\n\r\n  get name(): string { return this.diceSymbol.name; }\r\n  set name(name: string) { this.diceSymbol.name = name; }\r\n  get size(): number { return this.adjustMinBounds(this.diceSymbol.size); }\r\n\r\n  get faces(): string[] { return this.diceSymbol.faces; }\r\n  get imageFile(): ImageFile {\r\n    let image = this.diceSymbol.imageFile;\r\n    return image ? image : this.emptyImage;\r\n  }\r\n\r\n  get isMine(): boolean { return this.diceSymbol.isMine; }\r\n  get hasOwner(): boolean { return this.diceSymbol.hasOwner; }\r\n  get ownerName(): string { return this.diceSymbol.ownerName; }\r\n  get isVisible(): boolean { return this.diceSymbol.isVisible; }\r\n\r\n  animeState: string = 'inactive';\r\n\r\n  private iconHiddenTimer: NodeJS.Timer = null;\r\n  get isIconHidden(): boolean { return this.iconHiddenTimer != null };\r\n\r\n  private emptyImage: ImageFile = ImageFile.Empty;\r\n  gridSize: number = 50;\r\n\r\n  movableOption: MovableOption = {};\r\n  rotableOption: RotableOption = {};\r\n\r\n  private doubleClickTimer: NodeJS.Timer = null;\r\n  private doubleClickPoint = { x: 0, y: 0 };\r\n\r\n  private input: InputHandler = null;\r\n\r\n  constructor(\r\n    private ngZone: NgZone,\r\n    private panelService: PanelService,\r\n    private contextMenuService: ContextMenuService,\r\n    private elementRef: ElementRef<HTMLElement>,\r\n    private changeDetector: ChangeDetectorRef,\r\n    private pointerDeviceService: PointerDeviceService) { }\r\n\r\n  ngOnInit() {\r\n    EventSystem.register(this)\r\n      .on('ROLL_DICE_SYNBOL', -1000, event => {\r\n        if (event.data.identifier === this.diceSymbol.identifier) {\r\n          this.ngZone.run(() => {\r\n            this.animeState = 'inactive';\r\n            this.changeDetector.markForCheck();\r\n            setTimeout(() => { this.animeState = 'active'; this.changeDetector.markForCheck(); });\r\n          });\r\n        }\r\n      })\r\n      .on('UPDATE_GAME_OBJECT', -1000, event => {\r\n        let object = ObjectStore.instance.get(event.data.identifier);\r\n        if (!this.diceSymbol || !object) return;\r\n        if ((this.diceSymbol === object)\r\n          || (object instanceof ObjectNode && this.diceSymbol.contains(object))\r\n          || (object instanceof PeerCursor && object.userId === this.diceSymbol.owner)) {\r\n          this.changeDetector.markForCheck();\r\n        }\r\n      })\r\n      .on('SYNCHRONIZE_FILE_LIST', event => {\r\n        this.changeDetector.markForCheck();\r\n      })\r\n      .on('UPDATE_FILE_RESOURE', -1000, event => {\r\n        this.changeDetector.markForCheck();\r\n      })\r\n      .on('DISCONNECT_PEER', event => {\r\n        let cursor = PeerCursor.findByPeerId(event.data.peerId);\r\n        if (!cursor || this.diceSymbol.owner === cursor.userId) this.changeDetector.markForCheck();\r\n      });\r\n    this.movableOption = {\r\n      tabletopObject: this.diceSymbol,\r\n      transformCssOffset: 'translateZ(1.0px)',\r\n      colideLayers: ['terrain']\r\n    };\r\n    this.rotableOption = {\r\n      tabletopObject: this.diceSymbol\r\n    };\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    this.ngZone.runOutsideAngular(() => {\r\n      this.input = new InputHandler(this.elementRef.nativeElement);\r\n    });\r\n    this.input.onStart = e => this.ngZone.run(() => this.onInputStart(e));\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.input.destroy();\r\n    EventSystem.unregister(this);\r\n  }\r\n\r\n  @HostListener('dragstart', ['$event'])\r\n  onDragstart(e: any) {\r\n    e.stopPropagation();\r\n    e.preventDefault();\r\n  }\r\n\r\n  animationShuffleDone(event: any) {\r\n    this.animeState = 'inactive';\r\n    this.changeDetector.markForCheck();\r\n  }\r\n\r\n  onInputStart(e: MouseEvent | TouchEvent) {\r\n    this.startDoubleClickTimer(e);\r\n    this.startIconHiddenTimer();\r\n  }\r\n\r\n  startDoubleClickTimer(e) {\r\n    if (!this.doubleClickTimer) {\r\n      this.stopDoubleClickTimer();\r\n      this.doubleClickTimer = setTimeout(() => this.stopDoubleClickTimer(), e.touches ? 500 : 300);\r\n      this.doubleClickPoint = this.input.pointer;\r\n      return;\r\n    }\r\n\r\n    if (e.touches) {\r\n      this.input.onEnd = this.onDoubleClick.bind(this);\r\n    } else {\r\n      this.onDoubleClick();\r\n    }\r\n  }\r\n\r\n  stopDoubleClickTimer() {\r\n    clearTimeout(this.doubleClickTimer);\r\n    this.doubleClickTimer = null;\r\n    this.input.onEnd = null;\r\n  }\r\n\r\n  onDoubleClick() {\r\n    this.stopDoubleClickTimer();\r\n    let distance = (this.doubleClickPoint.x - this.input.pointer.x) ** 2 + (this.doubleClickPoint.y - this.input.pointer.y) ** 2;\r\n    if (distance < 10 ** 2) {\r\n      if (this.isVisible) this.diceRoll();\r\n    }\r\n  }\r\n\r\n  @HostListener('contextmenu', ['$event'])\r\n  onContextMenu(e: Event) {\r\n    e.stopPropagation();\r\n    e.preventDefault();\r\n\r\n    if (!this.pointerDeviceService.isAllowedToOpenContextMenu) return;\r\n    let position = this.pointerDeviceService.pointers[0];\r\n\r\n    let actions: ContextMenuAction[] = [];\r\n\r\n    if (this.isVisible) {\r\n      actions.push({\r\n        name: 'ダイスを振る', action: () => {\r\n          this.diceRoll();\r\n        }\r\n      });\r\n    }\r\n    actions.push(ContextMenuSeparator);\r\n    if (this.isMine || this.hasOwner) {\r\n      actions.push({\r\n        name: 'ダイスを公開', action: () => {\r\n          this.owner = '';\r\n          SoundEffect.play(PresetSound.unlock);\r\n        }\r\n      });\r\n    }\r\n    if (!this.isMine) {\r\n      actions.push({\r\n        name: '自分だけ見る', action: () => {\r\n          this.owner = Network.peerContext.userId;\r\n          SoundEffect.play(PresetSound.lock);\r\n        }\r\n      });\r\n    }\r\n\r\n    if (this.isVisible) {\r\n      let subActions: ContextMenuAction[] = [];\r\n      this.faces.forEach(face => {\r\n        subActions.push({\r\n          name: `${face}`, action: () => {\r\n            this.face = face;\r\n            SoundEffect.play(PresetSound.dicePut);\r\n          }\r\n        });\r\n      });\r\n      actions.push({ name: `ダイス目を設定`, action: null, subActions: subActions });\r\n    }\r\n\r\n    actions.push(ContextMenuSeparator);\r\n\r\n    actions.push({ name: '詳細を表示', action: () => { this.showDetail(this.diceSymbol); } });\r\n    actions.push({\r\n      name: 'コピーを作る', action: () => {\r\n        let cloneObject = this.diceSymbol.clone();\r\n        cloneObject.location.x += this.gridSize;\r\n        cloneObject.location.y += this.gridSize;\r\n        cloneObject.update();\r\n        SoundEffect.play(PresetSound.dicePut);\r\n      }\r\n    });\r\n    actions.push({\r\n      name: '削除する', action: () => {\r\n        this.diceSymbol.destroy();\r\n        SoundEffect.play(PresetSound.sweep);\r\n      }\r\n    });\r\n    this.contextMenuService.open(position, actions, this.name);\r\n  }\r\n\r\n  onMove() {\r\n    SoundEffect.play(PresetSound.dicePick);\r\n  }\r\n\r\n  onMoved() {\r\n    SoundEffect.play(PresetSound.dicePut);\r\n  }\r\n\r\n  diceRoll(): string {\r\n    EventSystem.call('ROLL_DICE_SYNBOL', { identifier: this.diceSymbol.identifier });\r\n    SoundEffect.play(PresetSound.diceRoll1);\r\n    return this.diceSymbol.diceRoll();\r\n  }\r\n\r\n  showDetail(gameObject: DiceSymbol) {\r\n    EventSystem.trigger('SELECT_TABLETOP_OBJECT', { identifier: gameObject.identifier, className: gameObject.aliasName });\r\n    let coordinate = this.pointerDeviceService.pointers[0];\r\n    let title = 'ダイスシンボル設定';\r\n    if (gameObject.name.length) title += ' - ' + gameObject.name;\r\n    let option: PanelOption = { title: title, left: coordinate.x - 300, top: coordinate.y - 300, width: 600, height: 600 };\r\n    let component = this.panelService.open<GameCharacterSheetComponent>(GameCharacterSheetComponent, option);\r\n    component.tabletopObject = gameObject;\r\n  }\r\n\r\n  private startIconHiddenTimer() {\r\n    clearTimeout(this.iconHiddenTimer);\r\n    this.iconHiddenTimer = setTimeout(() => {\r\n      this.iconHiddenTimer = null;\r\n      this.changeDetector.markForCheck();\r\n    }, 300);\r\n    this.changeDetector.markForCheck();\r\n  }\r\n\r\n  private adjustMinBounds(value: number, min: number = 0): number {\r\n    return value < min ? min : value;\r\n  }\r\n}\r\n","<div class=\"component is-3d is-grab is-pointer-events-none\" [style.width.px]=\"size * gridSize\" [style.height.px]=\"size * gridSize\"\r\n  appMovable [movable.option]=\"movableOption\" (movable.ondragstart)=\"onMove()\" (movable.ondragend)=\"onMoved()\">\r\n  <div class=\"component-content is-3d\" [@bounceInOut]=\"'in'\">\r\n    <div appRotable [rotable.option]=\"rotableOption\" (rotable.ondragstart)=\"onMove()\" (rotable.ondragend)=\"onMoved()\"\r\n      class=\"component-content is-3d is-pointer-events-auto\">\r\n      <div class=\"pedestal-inner\" [ngClass]=\"{'is-gray-border': hasOwner}\"></div>\r\n      <div class=\"pedestal-outer\"></div>\r\n      <ng-container *ngIf=\"!isIconHidden\">\r\n      <div class=\"pedestal-grab rotate-grab\">\r\n        <div class=\"pedestal-grab-border\">\r\n          <div class=\"material-icons of-front\">autorenew</div>\r\n          <div class=\"material-icons of-back\">autorenew</div>\r\n        </div>\r\n      </div>\r\n      </ng-container>\r\n      <div class=\"component-content is-3d\" [@diceRoll]=\"animeState\" (@diceRoll.done)=\"animationShuffleDone($event)\">\r\n        <div class=\"upright-transform is-fit-width is-3d\">\r\n          <div class=\"rotate-frame is-3d\" [style.width.px]=\"size * gridSize\" [style.height.px]=\"size * gridSize\">\r\n            <div class=\"rotate-inner is-3d\">\r\n              <div *ngIf=\"0 < name.length\" class=\"name-tag is-nowrap is-black-background is-3d\" [ngStyle]=\"{'transform': 'translateX(-50%) translateX(' + size * gridSize / 2 +'px)'}\">\r\n                <div class=\"fornt-tag is-3d\">{{name}}:<span *ngIf=\"isVisible\">{{face}}</span><span *ngIf=\"!isVisible\">???</span></div>\r\n                <div class=\"back-tag is-3d\">{{name}}:<span *ngIf=\"isVisible\">{{face}}</span><span *ngIf=\"!isVisible\">???</span></div>\r\n              </div>\r\n              <div *ngIf=\"hasOwner && 0 < ownerName.length\" class=\"owner-tag is-nowrap is-black-background is-3d\" [ngStyle]=\"{'transform': 'translateX(-50%) translateX(' + size * gridSize / 2 +'px)'}\">\r\n                <div class=\"fornt-tag has-length-limit is-3d\">{{ownerName}}</div>\r\n                <div class=\"back-tag has-length-limit is-3d\">{{ownerName}}</div>\r\n              </div>\r\n              <img class=\"image\" *ngIf=\"0 < imageFile.url.length\" [src]=\"imageFile.url | safe: 'resourceUrl'\" [ngClass]=\"{'is-black-mask': !isVisible, 'is-harf-black-mask': isMine}\">\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>","import { CanvasUtil } from './canvas-util';\r\nimport { FileReaderUtil } from './file-reader-util';\r\n\r\nexport enum ImageState {\r\n  NULL = 0,\r\n  THUMBNAIL = 1,\r\n  COMPLETE = 2,\r\n  URL = 1000,\r\n}\r\n\r\nexport interface ImageContext {\r\n  identifier: string;\r\n  name: string;\r\n  type: string;\r\n  blob: Blob;\r\n  url: string;\r\n  thumbnail: ThumbnailContext;\r\n}\r\n\r\nexport interface ThumbnailContext {\r\n  type: string;\r\n  blob: Blob;\r\n  url: string;\r\n}\r\n\r\nexport class ImageFile {\r\n  context: ImageContext = {\r\n    identifier: '',\r\n    name: '',\r\n    blob: null,\r\n    type: '',\r\n    url: '',\r\n    thumbnail: {\r\n      blob: null,\r\n      type: '',\r\n      url: '',\r\n    }\r\n  };\r\n\r\n  get identifier(): string { return this.context.identifier };\r\n  get name(): string { return this.context.name };\r\n  get blob(): Blob { return this.context.blob ? this.context.blob : this.context.thumbnail.blob; };\r\n  get url(): string { return this.context.url ? this.context.url : this.context.thumbnail.url; };\r\n  get thumbnail(): ThumbnailContext { return this.context.thumbnail };\r\n\r\n  get state(): ImageState {\r\n    if (!this.url && !this.blob) return ImageState.NULL;\r\n    if (this.url && !this.blob) return ImageState.URL;\r\n    if (this.blob === this.thumbnail.blob) return ImageState.THUMBNAIL;\r\n    return ImageState.COMPLETE;\r\n  }\r\n\r\n  get isEmpty(): boolean { return this.state <= ImageState.NULL; }\r\n\r\n  private constructor() { }\r\n\r\n  static createEmpty(identifier: string): ImageFile {\r\n    let imageFile = new ImageFile();\r\n    imageFile.context.identifier = identifier;\r\n\r\n    return imageFile;\r\n  }\r\n\r\n  static create(url: string): ImageFile\r\n  static create(context: ImageContext): ImageFile\r\n  static create(arg: any): ImageFile {\r\n    if (typeof arg === 'string') {\r\n      let imageFile = new ImageFile();\r\n      imageFile.context.identifier = arg;\r\n      imageFile.context.name = arg;\r\n      imageFile.context.url = arg;\r\n      return imageFile;\r\n    } else {\r\n      let imageFile = new ImageFile();\r\n      imageFile.apply(arg);\r\n      return imageFile;\r\n    }\r\n  }\r\n\r\n  static async createAsync(file: File): Promise<ImageFile>\r\n  static async createAsync(blob: Blob): Promise<ImageFile>\r\n  static async createAsync(arg: any): Promise<ImageFile> {\r\n    if (arg instanceof File) {\r\n      return await ImageFile._createAsync(arg, arg.name);\r\n    } else if (arg instanceof Blob) {\r\n      return await ImageFile._createAsync(arg);\r\n    }\r\n  }\r\n\r\n  private static async _createAsync(blob: Blob, name?: string): Promise<ImageFile> {\r\n    let arrayBuffer = await FileReaderUtil.readAsArrayBufferAsync(blob);\r\n\r\n    let imageFile = new ImageFile();\r\n    imageFile.context.identifier = await FileReaderUtil.calcSHA256Async(arrayBuffer);\r\n    imageFile.context.name = name;\r\n    imageFile.context.blob = new Blob([arrayBuffer], { type: blob.type });\r\n    imageFile.context.url = window.URL.createObjectURL(imageFile.context.blob);\r\n\r\n    try {\r\n      imageFile.context.thumbnail = await ImageFile.createThumbnailAsync(imageFile.context);\r\n    } catch (e) {\r\n      throw e;\r\n    }\r\n\r\n    if (imageFile.context.name != null) imageFile.context.name = imageFile.context.identifier;\r\n\r\n    return imageFile;\r\n  }\r\n\r\n  destroy() {\r\n    this.revokeURLs();\r\n  }\r\n\r\n  apply(context: ImageContext) {\r\n    if (!this.context.identifier && context.identifier) this.context.identifier = context.identifier;\r\n    if (!this.context.name && context.name) this.context.name = context.name;\r\n    if (!this.context.blob && context.blob) this.context.blob = context.blob;\r\n    if (!this.context.type && context.type) this.context.type = context.type;\r\n    if (!this.context.url && context.url) {\r\n      if (this.state !== ImageState.URL) window.URL.revokeObjectURL(this.context.url);\r\n      this.context.url = context.url;\r\n    }\r\n    if (!this.context.thumbnail.blob && context.thumbnail.blob) this.context.thumbnail.blob = context.thumbnail.blob;\r\n    if (!this.context.thumbnail.type && context.thumbnail.type) this.context.thumbnail.type = context.thumbnail.type;\r\n    if (!this.context.thumbnail.url && context.thumbnail.url) {\r\n      if (this.state !== ImageState.URL) window.URL.revokeObjectURL(this.context.thumbnail.url);\r\n      this.context.thumbnail.url = context.thumbnail.url;\r\n    }\r\n    this.createURLs();\r\n  }\r\n\r\n  toContext(): ImageContext {\r\n    return {\r\n      identifier: this.context.identifier,\r\n      name: this.context.name,\r\n      blob: this.context.blob,\r\n      type: this.context.type,\r\n      url: this.context.url,\r\n      thumbnail: {\r\n        blob: this.context.thumbnail.blob,\r\n        type: this.context.thumbnail.type,\r\n        url: this.context.thumbnail.url,\r\n      }\r\n    }\r\n  }\r\n\r\n  private createURLs() {\r\n    if (this.state === ImageState.URL) return;\r\n    if (this.context.blob && this.context.url === '') this.context.url = window.URL.createObjectURL(this.context.blob);\r\n    if (this.context.thumbnail.blob && this.context.thumbnail.url === '') this.context.thumbnail.url = window.URL.createObjectURL(this.context.thumbnail.blob);\r\n  }\r\n\r\n  private revokeURLs() {\r\n    if (this.state === ImageState.URL) return;\r\n    window.URL.revokeObjectURL(this.context.url);\r\n    window.URL.revokeObjectURL(this.context.thumbnail.url);\r\n  }\r\n\r\n  private static createThumbnailAsync(context: ImageContext): Promise<ThumbnailContext> {\r\n    return new Promise((resolve, reject) => {\r\n      let canvas: HTMLCanvasElement = document.createElement('canvas');\r\n      let render: CanvasRenderingContext2D = canvas.getContext('2d');\r\n      let image: HTMLImageElement = new Image();\r\n      image.onload = (event) => {\r\n        let scale: number = 128 / (image.width < image.height ? image.height : image.width);\r\n        scale = scale < 1 ? scale : 1.0;\r\n        var dstWidth = image.width * scale;\r\n        var dstHeight = image.height * scale;\r\n        canvas.width = image.width;//dstWidth;\r\n        canvas.height = image.height;//dstHeight;\r\n\r\n        render.drawImage(image, 0, 0);\r\n        CanvasUtil.resize(canvas, dstWidth, dstHeight, true);\r\n\r\n        canvas.toBlob(blob => {\r\n          let thumbnail: ThumbnailContext = {\r\n            type: blob.type,\r\n            blob: blob,\r\n            url: window.URL.createObjectURL(blob),\r\n          };\r\n          resolve(thumbnail);\r\n        }, context.blob.type);\r\n      };\r\n      image.onabort = image.onerror = () => {\r\n        reject();\r\n      }\r\n      image.src = context.url;\r\n    });\r\n  }\r\n\r\n  static Empty: ImageFile = ImageFile.createEmpty('null');\r\n}\r\n","import { GridType } from '@udonarium/game-table';\r\n\r\ntype StrokeGridFunc = (w: number, h: number, gridSize: number) => GridPosition;\r\ntype GridPosition = { gx: number, gy: number };\r\n\r\nexport class GridLineRender {\r\n  constructor(readonly canvasElement: HTMLCanvasElement) {\r\n  }\r\n\r\n  private makeBrush(context: CanvasRenderingContext2D, gridSize: number, gridColor: string): CanvasRenderingContext2D {\r\n    // 座標描画用brush設定\r\n    context.strokeStyle = gridColor;\r\n    context.fillStyle = context.strokeStyle;\r\n    context.lineWidth = 1;\r\n\r\n    let fontSize: number = Math.floor(gridSize / 5);\r\n    context.font = `bold ${fontSize}px sans-serif`;\r\n    context.textBaseline = 'top';\r\n    context.textAlign = 'center';\r\n    return context\r\n  }\r\n\r\n  render(width: number, height: number, gridSize: number = 50, gridType: GridType = GridType.SQUARE, gridColor: string = '#000000e6') {\r\n    this.canvasElement.width = width * gridSize;\r\n    this.canvasElement.height = height * gridSize;\r\n    let context: CanvasRenderingContext2D = this.canvasElement.getContext('2d');\r\n\r\n    if (gridType < 0) return;\r\n\r\n    let calcGridPosition: StrokeGridFunc = this.generateCalcGridPositionFunc(gridType);\r\n    this.makeBrush(context, gridSize, gridColor);\r\n    for (let h = 0; h <= height; h++) {\r\n      for (let w = 0; w <= width; w++) {\r\n        let { gx, gy } = calcGridPosition(w, h, gridSize);\r\n        this.strokeSquare(context, gx, gy, gridSize);\r\n        context.fillText((w + 1).toString() + '-' + (h + 1).toString(), gx + (gridSize / 2), gy + (gridSize / 2));\r\n      }\r\n    }\r\n  }\r\n\r\n  private generateCalcGridPositionFunc(gridType: GridType): StrokeGridFunc {\r\n    switch (gridType) {\r\n      case GridType.HEX_VERTICAL: // ヘクス縦揃え\r\n        return (w, h, gridSize) => {\r\n          if ((w % 2) === 1) {\r\n            return { gx: w * gridSize, gy: h * gridSize };\r\n          } else {\r\n            return { gx: w * gridSize, gy: h * gridSize + (gridSize / 2) };\r\n          }\r\n        }\r\n\r\n      case GridType.HEX_HORIZONTAL: // ヘクス横揃え(どどんとふ互換)\r\n        return (w, h, gridSize) => {\r\n          if ((h % 2) === 1) {\r\n            return { gx: w * gridSize, gy: h * gridSize };\r\n          } else {\r\n            return { gx: w * gridSize + (gridSize / 2), gy: h * gridSize };\r\n          }\r\n        }\r\n\r\n      default: // スクエア(default)\r\n        return (w, h, gridSize) => {\r\n          return { gx: w * gridSize, gy: h * gridSize };\r\n        }\r\n    }\r\n  }\r\n\r\n  private strokeSquare(context: CanvasRenderingContext2D, gx: number, gy: number, gridSize: number) {\r\n    context.beginPath();\r\n    context.strokeRect(gx, gy, gridSize, gridSize);\r\n  }\r\n\r\n  private strokeHex(context: CanvasRenderingContext2D, gx: number, gy: number, gridSize: number, gridType: GridType) {\r\n    let deg = gridType === GridType.HEX_HORIZONTAL ? -30 : 0;\r\n    let radius = gridSize / Math.sqrt(3);\r\n    let cx = gx + gridSize / 2;\r\n    let cy = gy + gridSize / 2;\r\n\r\n    context.beginPath();\r\n    for (let i = 0; i < 6; i++) {\r\n      deg += 60;\r\n      let radian = Math.PI / 180 * deg;\r\n      let x = Math.cos(radian) * radius + cx;\r\n      let y = Math.sin(radian) * radius + cy;\r\n      context.lineTo(x, y);\r\n    }\r\n    context.closePath();\r\n    context.stroke();\r\n  }\r\n}\r\n","import { Injectable, NgZone } from '@angular/core';\r\n\r\nexport interface PointerCoordinate {\r\n  x: number;\r\n  y: number;\r\n  z: number;\r\n}\r\n\r\nexport interface PointerData extends PointerCoordinate {\r\n  identifier: number;\r\n}\r\n\r\nconst MOUSE_IDENTIFIER = -9999;\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class PointerDeviceService {\r\n  private callbackOnPointerDown = (e) => this.onPointerDown(e);\r\n  private callbackOnPointerMove = (e) => this.onPointerMove(e);\r\n  private callbackOnPointerUp = (e) => this.onPointerUp(e);\r\n  private callbackOnContextMenu = (e) => this.onContextMenu(e);\r\n\r\n  private _isAllowedToOpenContextMenu: boolean = false;\r\n  get isAllowedToOpenContextMenu(): boolean { return this._isAllowedToOpenContextMenu; }\r\n\r\n  targetElement: HTMLElement;\r\n\r\n  pointers: PointerData[] = [{ x: 0, y: 0, z: 0, identifier: -1 }];\r\n  private startPostion: PointerData = this.pointers[0];\r\n  private primaryPointer: PointerData = this.pointers[0];\r\n  get pointer(): PointerCoordinate { return this.primaryPointer; }\r\n  get pointerX(): number { return this.primaryPointer.x; }\r\n  get pointerY(): number { return this.primaryPointer.y; }\r\n\r\n  isDragging: boolean = false; // todo\r\n\r\n  constructor(private ngZone: NgZone) { }\r\n\r\n  initialize() {\r\n    this.addEventListeners();\r\n  }\r\n\r\n  destroy() {\r\n    this.removeEventListeners();\r\n  }\r\n\r\n  private onPointerDown(e: any) {\r\n    this.onPointerMove(e);\r\n    this._isAllowedToOpenContextMenu = true;\r\n    this.startPostion = this.pointers[0];\r\n  }\r\n\r\n  private onPointerMove(e: MouseEvent)\r\n  private onPointerMove(e: TouchEvent)\r\n  private onPointerMove(e: any) {\r\n    if (e.touches) {\r\n      this.onTouchMove(e);\r\n    } else {\r\n      this.onMouseMove(e);\r\n    }\r\n    this.targetElement = e.target;\r\n  }\r\n\r\n  private onPointerUp(e: any) {\r\n    this.onPointerMove(e);\r\n  }\r\n\r\n  private onMouseMove(e: MouseEvent) {\r\n    let mosuePointer: PointerData = { x: e.pageX, y: e.pageY, z: 0, identifier: MOUSE_IDENTIFIER };\r\n    if (this.isSyntheticEvent(mosuePointer)) return;\r\n    if (this._isAllowedToOpenContextMenu) this.preventContextMenuIfNeeded(mosuePointer);\r\n    this.pointers = [mosuePointer];\r\n    this.primaryPointer = mosuePointer;\r\n  }\r\n\r\n  private onTouchMove(e: TouchEvent) {\r\n    let length = e.touches.length;\r\n    if (length < 1) return;\r\n    this.pointers = [];\r\n    for (let i = 0; i < length; i++) {\r\n      let touch = e.touches[i];\r\n      let touchPointer: PointerData = { x: touch.pageX, y: touch.pageY, z: 0, identifier: touch.identifier };\r\n      if (this._isAllowedToOpenContextMenu) this.preventContextMenuIfNeeded(touchPointer);\r\n      this.pointers.push(touchPointer);\r\n    }\r\n    this.primaryPointer = this.pointers[0];\r\n  }\r\n\r\n  private onContextMenu(e: any) {\r\n    this._isAllowedToOpenContextMenu = true;\r\n    this.onPointerUp(e);\r\n  }\r\n\r\n  private preventContextMenuIfNeeded(pointer: PointerCoordinate, threshold: number = 3) {\r\n    let distance = (pointer.x - this.startPostion.x) ** 2 + (pointer.y - this.startPostion.y) ** 2;\r\n    if (threshold ** 2 < distance) this._isAllowedToOpenContextMenu = false;\r\n  }\r\n\r\n  private isSyntheticEvent(mosuePointer: PointerData, threshold: number = 15): boolean {\r\n    for (let pointer of this.pointers) {\r\n      if (pointer.identifier === mosuePointer.identifier) continue;\r\n      let distance = (mosuePointer.x - pointer.x) ** 2 + (mosuePointer.y - pointer.y) ** 2;\r\n      if (distance < threshold ** 2) return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  private addEventListeners() {\r\n    this.ngZone.runOutsideAngular(() => {\r\n      document.body.addEventListener('mousedown', this.callbackOnPointerDown, true);\r\n      document.body.addEventListener('mousemove', this.callbackOnPointerMove, true);\r\n      document.body.addEventListener('mouseup', this.callbackOnPointerUp, true);\r\n      document.body.addEventListener('touchstart', this.callbackOnPointerDown, true);\r\n      document.body.addEventListener('touchmove', this.callbackOnPointerMove, true);\r\n      document.body.addEventListener('touchend', this.callbackOnPointerUp, true);\r\n      document.body.addEventListener('touchcancel', this.callbackOnPointerUp, true);\r\n      document.body.addEventListener('drop', this.callbackOnPointerUp, true);\r\n      document.body.addEventListener('contextmenu', this.callbackOnContextMenu, true);\r\n    });\r\n  }\r\n\r\n  private removeEventListeners() {\r\n    document.body.removeEventListener('mousedown', this.callbackOnPointerDown, true);\r\n    document.body.removeEventListener('mousemove', this.callbackOnPointerMove, true);\r\n    document.body.removeEventListener('mouseup', this.callbackOnPointerUp, true);\r\n    document.body.removeEventListener('touchstart', this.callbackOnPointerDown, true);\r\n    document.body.removeEventListener('touchmove', this.callbackOnPointerMove, true);\r\n    document.body.removeEventListener('touchend', this.callbackOnPointerUp, true);\r\n    document.body.removeEventListener('touchcancel', this.callbackOnPointerUp, true);\r\n    document.body.removeEventListener('drop', this.callbackOnPointerUp, true);\r\n    document.body.removeEventListener('contextmenu', this.callbackOnContextMenu, true);\r\n  }\r\n}\r\n","import { Network } from '../network/network';\r\nimport { Event, EventContext } from './event';\r\nimport { Listener } from './listener';\r\nimport { Callback } from './observer';\r\nimport { Subject } from './subject';\r\n\r\ntype EventName = string;\r\n\r\nexport class EventSystem implements Subject {\r\n  private static _instance: EventSystem\r\n  static get instance(): EventSystem {\r\n    if (!EventSystem._instance) {\r\n      EventSystem._instance = new EventSystem();\r\n      EventSystem._instance.initializeNetworkEvent();\r\n    }\r\n    return EventSystem._instance;\r\n  }\r\n\r\n  private listenerMap: Map<EventName, Listener[]> = new Map();\r\n  private constructor() {\r\n    console.log('EventSystem ready...');\r\n  }\r\n\r\n  register(key: any): Listener {\r\n    let listener: Listener = new Listener(this, key);\r\n    return listener;\r\n  }\r\n\r\n  unregister(key: any): void\r\n  unregister(key: any, eventName: string): void\r\n  unregister(key: any, callback: Callback<any>): void\r\n  unregister(key: any, eventName: string, callback: Callback<any>): void\r\n  unregister(...args: any[]): void {\r\n    if (args.length === 1) {\r\n      this._unregister(args[0], null, null);\r\n    } else if (args.length === 2) {\r\n      if (typeof args[1] === 'string') {\r\n        this._unregister(args[0], args[1], null);\r\n      } else {\r\n        this._unregister(args[0], null, args[1]);\r\n      }\r\n    } else {\r\n      this._unregister(args[0], args[1], args[2]);\r\n    }\r\n  }\r\n\r\n  private _unregister(key: any = this, eventName: string, callback: Callback<any>) {\r\n    let listenersIterator = this.listenerMap.values();\r\n    for (let listeners of listenersIterator) {\r\n      for (let listener of listeners.concat()) {\r\n        if (listener.isEqual(key, eventName, callback)) {\r\n          listener.unregister();\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  registerListener(listener: Listener): Listener {\r\n    let listeners: Listener[] = this.getListeners(listener.eventName);\r\n\r\n    listeners.push(listener);\r\n    listeners.sort((a, b) => b.priority - a.priority);\r\n    this.listenerMap.set(listener.eventName, listeners);\r\n    return listener;\r\n  }\r\n\r\n  unregisterListener(listener: Listener): Listener {\r\n    let listeners = this.getListeners(listener.eventName);\r\n    let index = listeners.indexOf(listener);\r\n    if (index < 0) return null;\r\n    listeners.splice(index, 1);\r\n    listener.unregister();\r\n    if (listeners.length < 1) this.listenerMap.delete(listener.eventName);\r\n    return listener;\r\n  }\r\n\r\n  call<T>(eventName: string, data: T, sendTo?: string): void\r\n  call<T>(event: Event<T>, sendTo?: string): void\r\n  call<T>(...args: any[]): void {\r\n    if (typeof args[0] === 'string') {\r\n      this._call(new Event(args[0], args[1]), args[2]);\r\n    } else {\r\n      this._call(args[0], args[1]);\r\n    }\r\n  }\r\n\r\n  private _call(event: Event<any>, sendTo?: string) {\r\n    let context = event.toContext();\r\n    Network.instance.send(context, sendTo);\r\n  }\r\n\r\n  trigger<T>(eventName: string, data: T): Event<T>\r\n  trigger<T>(event: Event<T>): Event<T>\r\n  trigger<T>(event: EventContext<T>): Event<T>\r\n  trigger<T>(...args: any[]): Event<T> {\r\n    if (args.length === 2) {\r\n      this._trigger(new Event(args[0], args[1]));\r\n    } else if (args[0] instanceof Event) {\r\n      return this._trigger(args[0]);\r\n    } else {\r\n      return this._trigger(new Event(args[0].eventName, args[0].data, args[0].sendFrom));\r\n    }\r\n  }\r\n\r\n  private _trigger<T>(event: Event<T>): Event<T> {\r\n    let listeners = this.getListeners(event.eventName).concat(this.getListeners('*'));\r\n    for (let listener of listeners) {\r\n      listener.trigger(event);\r\n    }\r\n    return event;\r\n  }\r\n\r\n  private getListeners(eventName: string): Listener[] {\r\n    return this.listenerMap.has(eventName) ? this.listenerMap.get(eventName) : [];\r\n  }\r\n\r\n  private initializeNetworkEvent() {\r\n    let callback = Network.instance.callback;\r\n\r\n    callback.onOpen = (peerId) => {\r\n      this.trigger('OPEN_NETWORK', { peerId: peerId });\r\n    }\r\n    callback.onClose = (peerId) => {\r\n      this.trigger('CLOSE_NETWORK', { peerId: peerId });\r\n    }\r\n\r\n    callback.onConnect = (peerId) => {\r\n      this.sendSystemMessage('<' + peerId + '> connect <DataConnection>');\r\n      this.trigger('CONNECT_PEER', { peerId: peerId });\r\n    }\r\n\r\n    callback.onDisconnect = (peerId) => {\r\n      this.sendSystemMessage('<' + peerId + '> disconnect <DataConnection>');\r\n      this.trigger('DISCONNECT_PEER', { peerId: peerId });\r\n    }\r\n\r\n    callback.onData = (peerId, data: EventContext<never>[]) => {\r\n      for (let event of data) {\r\n        this.trigger(event);\r\n      }\r\n    }\r\n\r\n    callback.onError = (peerId, err) => {\r\n      this.sendSystemMessage('<' + peerId + '> ' + err);\r\n    }\r\n  }\r\n\r\n  private sendSystemMessage(message: string) {\r\n    console.log(message);\r\n  }\r\n}\r\n","import { SyncObject, SyncVar } from './core/synchronize-object/decorator';\r\nimport { GameObject } from './core/synchronize-object/game-object';\r\nimport { ObjectStore } from './core/synchronize-object/object-store';\r\nimport { EventSystem } from './core/system';\r\nimport { GameTable } from './game-table';\r\n\r\n@SyncObject('TableSelecter')\r\nexport class TableSelecter extends GameObject {\r\n  @SyncVar() viewTableIdentifier: string = '';\r\n  gridShow: boolean = false; // true=常時グリッド表示\r\n  gridSnap: boolean = true;\r\n\r\n  // GameObject Lifecycle\r\n  onStoreAdded() {\r\n    super.onStoreAdded();\r\n    EventSystem.register(this)\r\n      .on('SELECT_GAME_TABLE', event => {\r\n        console.log('SELECT_GAME_TABLE ' + this.identifier);\r\n\r\n        if (this.viewTable) this.viewTable.selected = false;\r\n        this.viewTableIdentifier = event.data.identifier;\r\n        if (this.viewTable) this.viewTable.selected = true;\r\n      });\r\n  }\r\n\r\n  // GameObject Lifecycle\r\n  onStoreRemoved() {\r\n    super.onStoreRemoved();\r\n    EventSystem.unregister(this);\r\n  }\r\n\r\n  get viewTable(): GameTable {\r\n    let table: GameTable = ObjectStore.instance.get<GameTable>(this.viewTableIdentifier);\r\n    if (!table) {\r\n      table = ObjectStore.instance.getObjects<GameTable>(GameTable)[0];\r\n      if (table && (this.viewTableIdentifier.length < 1 || ObjectStore.instance.isDeleted(this.viewTableIdentifier))) {\r\n        this.viewTableIdentifier = table.identifier;\r\n        EventSystem.trigger('SELECT_GAME_TABLE', { identifier: table.identifier });\r\n      }\r\n    }\r\n    return table;\r\n  }\r\n}\r\n","import { IPeerContext } from './peer-context';\r\n\r\nexport class ConnectionCallback {\r\n  onOpen: (peerId: string) => void;\r\n  onClose: (peerId: string) => void;\r\n  onConnect: (peerId: string) => void;\r\n  onDisconnect: (peerId: string) => void;\r\n  onData: (peerId: string, data: any) => void;\r\n  onError: (peerId: string, err: any) => void;\r\n}\r\n\r\nexport interface Connection {\r\n  readonly peerId: string;\r\n  readonly peerIds: string[];\r\n  readonly peerContext: IPeerContext;\r\n  readonly peerContexts: IPeerContext[];\r\n  readonly callback: ConnectionCallback;\r\n  readonly bandwidthUsage: number;\r\n\r\n  open(peerId: string)\r\n  open(userId: string, roomId: string, roomName: string, password: string)\r\n  close()\r\n  connect(peerId: string): boolean\r\n  disconnect(peerId: string): boolean\r\n  disconnectAll()\r\n  send(data: any, sendTo?: string)\r\n  setApiKey(key: string);\r\n  listAllPeers(): Promise<string[]>\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { ImageFile } from '@udonarium/core/file-storage/image-file';\r\n\r\nconst skeletonImage: ImageFile = ImageFile.create('./assets/images/skeleton.png');\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class ImageService {\r\n\r\n  constructor() { }\r\n\r\n  getSkeletonOr(image: ImageFile): ImageFile {\r\n    return image && !image.isEmpty ? image : skeletonImage;\r\n  }\r\n}\r\n","// original version from\r\n// https://gist.github.com/h-mikisato/b5753689483b02b19585365b8ce5940f\r\n// and\r\n// https://github.com/blhsrwznrghfzpr/bcdice-js/blob/extend-samlpe/examples/ts/custom_dicebot.ts\r\n\r\n\r\nimport Base from 'bcdice/lib/base';\r\nimport Result from 'bcdice/lib/result';\r\n\r\nimport { BaseInstance } from 'bcdice/lib/internal/types/base';\r\n\r\nexport default class IdoDice extends Base {\r\n  static readonly ID = 'IdoDice';\r\n  static readonly NAME = 'イドの証明';\r\n  static readonly SORT_KEY = 'いとのしょうめい';\r\n  static readonly COMMAND_PATTERN = /^S?([+\\-(]*\\d+|\\d+B\\d+|C[+\\-(]*\\d+|choice|D66|(repeat|rep|x)\\d+|\\d+R\\d+|\\d+U\\d+|BCDiceVersion|ID\\d*<=[+\\-(]*\\d+|RES\\([\\+\\-\\d\\(\\)\\/\\*CR]+\\)|CBR\\(\\d+,\\d+\\))/i;\r\n// 下記は標準ダイスのコマンドパターンマッチするように書き加える\r\n/*\r\n  /^S?([+\\-(]*\\d+|\\d+B\\d+|C[+\\-(]*\\d+|choice|D66|(repeat|rep|x)\\d+|\\d+R\\d+|\\d+U\\d+|BCDiceVersion)/i\r\n*/\r\n  static readonly HELP_MESSAGE = `\r\n・円柱の身内用に作成したカスタムダイス\r\n1d100と目標値による成功度を算出します。\r\n\r\n・CoCとは似ていますが判定基準細部が異なります。\r\n\r\n・F値(標準96)以上＞ファンブル\r\n・目標値を超える＞失敗\r\n・目標値を以下＞成功\r\n・1/S値(標準1/5)以下＞スペシャル\r\n・C値(標準5)以下＞クリティカル\r\n\r\n・専用命令(ID<=x(オプション文字：省略可))\r\n  使用例)技能値200で判定する場合\r\n  ID<=200 :1d100<=200と同じ\r\n  (ID<=200) → 31 → スペシャル\r\n  ■追加文字定義\r\n    Fn：F値nで判定 無指定はn=96扱い\r\n      ID<=200F90\r\n      (ID<=200F90) F90 → 91 → 致命的失敗\r\n    Sn：S値を1/nに変更する 無指定n=5扱い\r\n      ID<=200S3\r\n      (ID<=200S3) S3 → 65 → スペシャル\r\n    Cn：C値をnに変更する 無指定n=5扱い\r\n      ID<=200C10\r\n      (ID<=200C10) C10 → 10 → 決定的成功/スペシャル\r\n    P：パーフェクトオーダー状態S値1/4、C10で判定(S4C10と同じ)\r\n      ID<=200P\r\n      (ID<=200P) S4 C10 → 41 → スペシ ャル\r\n    B：ボスフラグF値100で判定(F100と同じ)\r\n    ID<=200B\r\n    (ID<=200B) F100 → 99 → 成功\r\n    複数種同時定義可能\r\n      ID<=200BC20S3　ボスがC値20S1/3で判定\r\n      (ID<=200BC20S3) S3 C20 F100 → 15 → 決定的成功/スペシャル\r\n\r\n・複数判定(IDy<=x(オプション文字：省略可)):オプションは前述の書式と同様\r\n\r\n    y回の判定結果を\r\n    C（クリティカル）S（スペシャル）1C（1クリ）F（ファンブル）\r\n    100F（100ファンブル）N（通常成功）X（失敗）で表示\r\n\r\n    IDy<=x で目標値xでy回判定\r\n      ID4<=85　　修験律動4人掛け等\r\n      (ID4<=85) → 73,60,12,64 → N,N,S,N\r\n\r\n    オプション文字指定例\r\n      ID3<=120PB パフェオボス乱槍\r\n      (ID3<=120PB) S4 C10 F100 → 4,81,21 → C,N,S\r\n`.trim();\r\n\r\n  private commandWithoutRepeat: string;\r\n\r\n  private dispCommandId: string;\r\n  private dispCommandRes: string;\r\n  private dispCommandCbr: string;\r\n\r\n  private repeat: number;\r\n  private option: string;\r\n  private target: number;\r\n\r\n  private critical: number;\r\n  private famble: number;\r\n  private special: number;\r\n  private dicenum: number;\r\n\r\n  static eval(command: string): Result | null {\r\n    return new IdoDice(command).eval();\r\n  }\r\n\r\n  constructor(command: string, internal?: BaseInstance) {\r\n    const found = command.replace(/^repeat/i, 'x').replace(/^rep/i, 'x').match(/^x([0-9]+)\\s+(.*)$/i);\r\n    let commandWithoutRepeat: string;\r\n    let repeat: number;\r\n    if (found !== null) {\r\n      repeat = parseInt(found[1], 10);\r\n      if (repeat <= 0) { repeat = 1; }\r\n      commandWithoutRepeat = found[2];\r\n    } else {\r\n      repeat = 1;\r\n      commandWithoutRepeat = command;\r\n    }\r\n    let changeText = '';\r\n// IDxコマンド\r\n    const regExp = /^([S]?)ID(\\d*)<=([\\d\\-\\+\\*\\/\\(\\)CR]+)(.*)$/i;\r\n    let matchResult = commandWithoutRepeat.match(regExp);\r\n    if ( matchResult ){\r\n      let dicenum = matchResult[2] == '' ? '1' : matchResult[2]; // IDx x省略時は1\r\n      let commandDiceNum = matchResult[2];\r\n      if ( parseInt(dicenum, 10) < 1){\r\n        dicenum = '1';\r\n        commandDiceNum = '';\r\n      }\r\n      changeText = matchResult[1] + dicenum + 'b100<=' + matchResult[3]; // シークレットの場合はSをつけてxb100をロール\r\n      if (repeat > 1) {\r\n        super(`x${repeat} ${changeText}`, internal);\r\n      } else {\r\n        super(changeText, internal);\r\n      }\r\n\r\n      console.log('matchResult' + matchResult);\r\n      this.commandWithoutRepeat = commandWithoutRepeat;\r\n      this.repeat = repeat;\r\n      this.dicenum = parseInt(dicenum, 10);\r\n      this.option = matchResult[4].split(/\\s/)[0]; // IDx<=n以降のオプション部分切り出し\r\n      this.optionCommand(this.option);\r\n      this.dispCommandId = matchResult[1] + 'ID' + commandDiceNum + '<=';\r\n      return;\r\n    }\r\n\r\n// 1d100コマンド\r\n    const regExpD100 = /^([S]?)1d100<=([\\d\\-\\+\\*\\/\\(\\)CR]+)(.*)$/i;\r\n    matchResult = commandWithoutRepeat.match(regExpD100);\r\n    if ( matchResult ){\r\n      if ( matchResult[3].split(/\\s/)[0] == '' ){// マッチ部分以降が空であるかスペース区切りのコメントかチェック\r\n        console.log('matchResult' + matchResult);\r\n\r\n        const dicenum = '1';\r\n        changeText = matchResult[1] + '1d100<=' + matchResult[2];\r\n        if (repeat > 1) {\r\n          super(`x${repeat} ${changeText}`, internal);\r\n        } else {\r\n          super(changeText, internal);\r\n        }\r\n\r\n        console.log('matchResult' + matchResult);\r\n        this.commandWithoutRepeat = matchResult[1] + '1d100<=' + matchResult[2];\r\n        this.repeat = repeat;\r\n        this.dicenum = 1;\r\n        this.dispCommandId = '1d100<=';\r\n        return;\r\n      }\r\n    }\r\n\r\n\r\n// RES(X-Y)コマンド\r\n    const regExpRes = /^([S]?)RES\\(([\\d\\-\\+\\*\\/\\(\\)CR]+)\\)(.*)$/i;\r\n    matchResult = commandWithoutRepeat.match(regExpRes);\r\n    if ( matchResult ){\r\n      if ( matchResult[3].split(/\\s/)[0] == '' ){// マッチ部分以降が空であるかスペース区切りのコメントかチェック\r\n        changeText = matchResult[1] + '1d100<=(' + matchResult[2] + ')*5+50';\r\n        if (repeat > 1) {\r\n          super(`x${repeat} ${changeText}`, internal);\r\n        } else {\r\n          super(changeText, internal);\r\n        }\r\n        console.log('matchResult' + matchResult);\r\n        this.commandWithoutRepeat = commandWithoutRepeat;\r\n        this.repeat = repeat;\r\n        return;\r\n      }\r\n    }\r\n\r\n// CBR(X,Y)コマンド\r\n    const regExpCbr = /^([S]?)CBR\\((\\d+),(\\d+)\\)(.*)$/i;\r\n    matchResult = commandWithoutRepeat.match(regExpCbr);\r\n    if ( matchResult ){\r\n      if ( matchResult[4].split(/\\s/)[0] == '' ){// マッチ部分以降が空であるかスペース区切りのコメントかチェック\r\n        const val1 = parseInt(matchResult[2], 10);\r\n        const val2 = parseInt(matchResult[3], 10);\r\n        const val = val1 < val2 ? val1 : val2;\r\n        changeText = matchResult[1] + '1d100<=' + val;\r\n        console.log('val1:' + val1 + ' val2:' + val2 + ' text:' + changeText);\r\n        if (repeat > 1) {\r\n          super(`x${repeat} ${changeText}`, internal);\r\n        } else {\r\n          super(changeText, internal);\r\n        }\r\n        console.log('matchResult' + matchResult);\r\n        this.commandWithoutRepeat = commandWithoutRepeat;\r\n        this.repeat = repeat;\r\n        this.dispCommandCbr = '1d100<=' + matchResult[2] + ',' + matchResult[3];\r\n        return;\r\n      }\r\n    }\r\n\r\n// 専用コマンド不一致の場合通常ダイス\r\n    changeText = commandWithoutRepeat;\r\n    if (repeat > 1) {\r\n      super(`x${repeat} ${changeText}`, internal);\r\n    } else {\r\n      super(changeText, internal);\r\n    }\r\n    this.commandWithoutRepeat = commandWithoutRepeat;\r\n    this.repeat = repeat;\r\n    this.dispCommandId = '';\r\n    return;\r\n  }\r\n\r\n  eval(): Result | null {\r\n    if (this.commandWithoutRepeat.match(/^S?ID/i)) {\r\n      return this.chkOptionCommand(this.option) ? this.custom_dice_id() : null;\r\n    }\r\n    if (this.dispCommandId.match(/^1d100<=/i)) {\r\n      return this.custom_dice_d100();\r\n    }\r\n    if (this.commandWithoutRepeat.match(/^S?RES/i)) {\r\n      return this.custom_dice_res();\r\n    }\r\n    if (this.commandWithoutRepeat.match(/^S?CBR/i)) {\r\n      return this.custom_dice_cbr();\r\n    }\r\n\r\n    return super.eval();\r\n  }\r\n\r\n// オプションコマンドの書式チェック\r\n  private chkOptionCommand(command: string): boolean{\r\n    const optionReplace = command.replace(/P/i, 'S4C10').replace(/S\\d+/i, '').replace(/C\\d+/i, '').replace(/F\\d+|B/i, '');\r\n    return optionReplace == '' ? true : false;\r\n  }\r\n\r\n// オプションコマンドの解釈C,F,S倍率を変更\r\n  private optionCommand(command: string): null{\r\n    this.critical = 5;\r\n    this.famble = 96;\r\n    this.special = 5;\r\n\r\n    const matchCritical = command.match(/C(\\d+)/i);\r\n    if (matchCritical){\r\n      this.critical = parseInt(matchCritical[1], 10);\r\n    }\r\n\r\n    const matchFamble = command.match(/F(\\d+)/i);\r\n    if (matchFamble){\r\n      this.famble = parseInt(matchFamble[1], 10);\r\n    }\r\n\r\n    const matchSpecial = command.match(/S(\\d+)/i);\r\n    if (matchSpecial){\r\n      this.special = parseInt(matchSpecial[1], 10);\r\n    }\r\n\r\n    const matchBoss = command.match(/B/i);\r\n    if (matchBoss){\r\n      this.famble = 100;\r\n    }\r\n\r\n    const matchParfect = command.match(/P/i);\r\n    if (matchParfect){\r\n      this.special = 4;\r\n      this.critical = 10;\r\n    }\r\n    console.log( 'C:' + this.critical + ' F:' + this.famble + ' S:' + this.special);\r\n    return;\r\n  }\r\n\r\n// IDn<=xコマンド結果テキスト記述\r\n  private diceResultTextSingleId( diceValue: number[]): string{\r\n    let resultText = '(' + this.dispCommandId.toUpperCase() + this.target + ')';\r\n\r\n    if ( this.special != 5){\r\n      resultText += ' S' + this.special;\r\n    }\r\n    if ( this.critical != 5){\r\n      resultText += ' C' + this.critical;\r\n    }\r\n    if ( this.famble != 96){\r\n      resultText += ' F' + this.famble;\r\n    }\r\n    resultText += ' ＞ ';\r\n\r\n    if ( diceValue.length == 1){\r\n      resultText += diceValue[0] + ' ＞ ';\r\n      if ( diceValue[0] >= this.famble){\r\n        resultText += '致命的失敗';\r\n      }else if ( diceValue[0] > this.target ){\r\n        resultText += '失敗';\r\n      }else if ( diceValue[0] <= this.critical && diceValue[0] <= (this.target / this.special) ){\r\n        resultText += '決定的成功/スペシャル';\r\n      }else if ( diceValue[0] <= this.critical){\r\n        resultText += '決定的成功';\r\n      }else if ( diceValue[0] <= (this.target / this.special)){\r\n        resultText += 'スペシャル';\r\n      }else{\r\n        resultText += '成功';\r\n      }\r\n    }else{\r\n      for (let i = 0; i < diceValue.length ; i++) {\r\n        if ( i != 0 ){\r\n          resultText += ',';\r\n        }\r\n        resultText += diceValue[i];\r\n      }\r\n      resultText += ' ＞ ';\r\n      for (let i = 0; i < diceValue.length ; i++) {\r\n        if ( i != 0 ){\r\n          resultText += ',';\r\n        }\r\n        if ( diceValue[i] >= 100){\r\n          resultText += '100F';\r\n        }else if ( diceValue[i] >= this.famble){\r\n          resultText += 'F';\r\n        }else if ( diceValue[i] > this.target ){\r\n          resultText += 'X';\r\n        }else if ( diceValue[i] <= 1){\r\n          resultText += '1C';\r\n        }else if ( diceValue[i] <= this.critical){\r\n          resultText += 'C';\r\n        }else if ( diceValue[i] <= (this.target / this.special)){\r\n          resultText += 'S';\r\n        }else{\r\n          resultText += 'N';\r\n        }\r\n      }\r\n    }\r\n    return resultText;\r\n  }\r\n\r\n// IDn<=xコマンド結果処理\r\n  private custom_dice_id(): Result | null {\r\n    const result = super.eval();\r\n    if (result == null) {\r\n      return null;\r\n    }\r\n    console.log( 'result:' + result.text);\r\n\r\n    // BCDice結果から演算済みの目標値を取り出す\r\n    const target = result.text.match(/b100<=(\\d+)/i);\r\n    if ( !target ){ return null; }\r\n    this.target = parseInt( target[1], 10);\r\n\r\n    // 書式が特殊なため自力書き出し\r\n    let newResultText = '';\r\n    for (let i = 0; i < this.repeat; i++) {\r\n      const dice: number[] = [];\r\n\r\n      // 1リピート分のダイスを取得\r\n      for (let j = 0; j < this.dicenum; j++) {\r\n        dice.push( result.detailedRands[this.dicenum * i + j].value );\r\n      }\r\n      // 結果のテキストを作成\r\n      if ( this.repeat > 1){\r\n        if ( i > 0 ){\r\n          newResultText += '\\n\\n';\r\n        }\r\n        newResultText += '#' + (i + 1) + '\\n' + this.diceResultTextSingleId(dice);\r\n      }else{\r\n        newResultText += this.diceResultTextSingleId(dice);\r\n      }\r\n    }\r\n\r\n    const text = newResultText;\r\n    return {\r\n      ...result,\r\n      text,\r\n    };\r\n  }\r\n\r\n// 1d100<=xコマンド結果テキスト記述\r\n  private diceResultTextSingleD100( diceValue: number): string{\r\n    let resultText = '(' + this.dispCommandId.toUpperCase() + this.target + ')';\r\n\r\n    this.critical = 5;\r\n    this.famble = 96;\r\n    this.special = 5;\r\n\r\n    resultText += ' ＞ ' + diceValue + ' ＞ ';\r\n    if ( diceValue >= this.famble){\r\n      resultText += '致命的失敗';\r\n    }else if ( diceValue > this.target ){\r\n      resultText += '失敗';\r\n    }else if ( diceValue <= this.critical && diceValue <= (this.target / this.special) ){\r\n      resultText += '決定的成功/スペシャル';\r\n    }else if ( diceValue <= this.critical){\r\n      resultText += '決定的成功';\r\n    }else if ( diceValue <= (this.target / this.special)){\r\n      resultText += 'スペシャル';\r\n    }else{\r\n      resultText += '成功';\r\n    }\r\n    return resultText;\r\n  }\r\n\r\n// 1d100<=xコマンド結果処理\r\n  private custom_dice_d100(): Result | null {\r\n    const result = super.eval();\r\n    if (result == null) {\r\n      return null;\r\n    }\r\n    console.log( 'result:' + result.text);\r\n\r\n    // BCDice結果から演算済みの目標値を取り出す\r\n    const target = result.text.match(/1d100<=(\\d+)/i);\r\n    if ( !target ){ return null; }\r\n    this.target = parseInt( target[1], 10);\r\n    console.log( 'target:' + target);\r\n\r\n    // 自力書き出し\r\n    let newResultText = '';\r\n    for (let i = 0; i < this.repeat; i++) {\r\n      let dice: number;\r\n      dice = result.detailedRands[i].value;\r\n      // 結果のテキストを作成\r\n      if ( this.repeat > 1){\r\n        if ( i > 0 ){\r\n          newResultText += '\\n\\n';\r\n        }\r\n        newResultText += '#' + (i + 1) + '\\n' + this.diceResultTextSingleD100(dice);\r\n      }else{\r\n        newResultText += this.diceResultTextSingleD100(dice);\r\n      }\r\n    }\r\n\r\n    const text = newResultText;\r\n    return {\r\n      ...result,\r\n      text,\r\n    };\r\n  }\r\n\r\n// RESコマンド結果テキスト記述\r\n  private diceResultTextSingleRes( diceValue: number , target: number): string{\r\n    let resultText: string = '(1D100<=' + target + ')' + ' ＞ ';\r\n    if ( target >= 100 ){\r\n      resultText += '自動成功';\r\n    }else if ( target <= 0 ){\r\n      resultText += '自動失敗';\r\n    }else if ( diceValue <= target ){\r\n      resultText += diceValue + ' ＞ ';\r\n      resultText += '成功';\r\n    }else{\r\n      resultText += diceValue + ' ＞ ';\r\n      resultText += '失敗';\r\n    }\r\n    return resultText;\r\n  }\r\n\r\n// RESコマンド結果処理\r\n  private custom_dice_res(): Result | null {\r\n    const result = super.eval();\r\n    if (result == null) {\r\n      return null;\r\n    }\r\n    console.log( 'result:' + result.text);\r\n\r\n    // BCDice結果から演算済みの目標値を取り出す\r\n    const target = result.text.match(/1d100<=(\\d+)/i);\r\n    if ( !target ){ return null; }\r\n    const targetNum: number = parseInt(target[1], 10);\r\n\r\n    let newResultText = '';\r\n    for (let i = 0; i < this.repeat; i++) {\r\n      const value = result.detailedRands[i].value;\r\n      console.log( 'dice value:' + value);\r\n\r\n      if ( this.repeat > 1){\r\n        if ( i > 0 ){\r\n          newResultText += '\\n\\n';\r\n        }\r\n        newResultText += '#' + (i + 1) + '\\n' + this.diceResultTextSingleRes(value , targetNum);\r\n      }else{\r\n        newResultText += this.diceResultTextSingleRes(value , targetNum);\r\n      }\r\n    }\r\n\r\n    const text = newResultText;\r\n    return {\r\n      ...result,\r\n      text,\r\n    };\r\n  }\r\n\r\n// CBRコマンド結果テキスト記述\r\n  private diceResultTextSingleCbr( diceValue: number , target: number): string{\r\n    let resultText: string = '(' + this.dispCommandCbr + ')' + ' ＞ ';\r\n\r\n    this.target = target;\r\n    this.critical = 5;\r\n    this.special = 5;\r\n    this.famble = 96;\r\n\r\n    resultText += diceValue + ' ＞ ';\r\n    if ( diceValue >= this.famble){\r\n      resultText += '致命的失敗';\r\n    }else if ( diceValue > this.target ){\r\n      resultText += '失敗';\r\n    }else if ( diceValue <= this.critical && diceValue <= (this.target / this.special) ){\r\n      resultText += '決定的成功/スペシャル';\r\n    }else if ( diceValue <= this.critical){\r\n      resultText += '決定的成功';\r\n    }else if ( diceValue <= (this.target / this.special)){\r\n      resultText += 'スペシャル';\r\n    }else{\r\n      resultText += '成功';\r\n    }\r\n    return resultText;\r\n  }\r\n\r\n// RESコマンド結果処理\r\n  private custom_dice_cbr(): Result | null {\r\n    const result = super.eval();\r\n    if (result == null) {\r\n      return null;\r\n    }\r\n    console.log( 'result:' + result.text);\r\n\r\n    // BCDice結果から演算済みの目標値を取り出す\r\n    const target = result.text.match(/1d100<=(\\d+)/i);\r\n    if ( !target ){ return null; }\r\n    const targetNum: number = parseInt(target[1], 10);\r\n\r\n    let newResultText = '';\r\n    for (let i = 0; i < this.repeat; i++) {\r\n      const value = result.detailedRands[i].value;\r\n      console.log( 'dice value:' + value);\r\n\r\n      if ( this.repeat > 1){\r\n        if ( i > 0 ){\r\n          newResultText += '\\n\\n';\r\n        }\r\n        newResultText += '#' + (i + 1) + '\\n' + this.diceResultTextSingleCbr(value , targetNum);\r\n      }else{\r\n        newResultText += this.diceResultTextSingleCbr(value , targetNum);\r\n      }\r\n    }\r\n\r\n    const text = newResultText;\r\n    return {\r\n      ...result,\r\n      text,\r\n    };\r\n  }\r\n\r\n}\r\n","import {\r\n  AfterViewInit,\r\n  ChangeDetectionStrategy,\r\n  ChangeDetectorRef,\r\n  Component,\r\n  Input,\r\n  OnDestroy,\r\n  OnInit,\r\n} from '@angular/core';\r\nimport { EventSystem } from '@udonarium/core/system';\r\nimport { DataElement } from '@udonarium/data-element';\r\n\r\n@Component({\r\n  selector: 'game-data-element-buff, [game-data-element-buff]',\r\n  templateUrl: './game-data-element-buff.component.html',\r\n  styleUrls: ['./game-data-element-buff.component.css'],\r\n//  changeDetection: ChangeDetectionStrategy.OnPush\r\n    changeDetection: ChangeDetectionStrategy.Default\r\n\r\n})\r\nexport class GameDataElementBuffComponent implements OnInit, OnDestroy, AfterViewInit {\r\n  @Input() gameDataElement: DataElement = null;\r\n  @Input() isEdit: boolean = false;\r\n  @Input() isTagLocked: boolean = false;\r\n  @Input() isValueLocked: boolean = false;\r\n  @Input() isPieceMode: boolean = false;\r\n\r\n  private _name: string = '';\r\n  get name(): string { return this._name; }\r\n  set name(name: string) { this._name = name; this.setUpdateTimer(); }\r\n\r\n  private _value: number | string = 0;\r\n  get value(): number | string { return this._value; }\r\n  set value(value: number | string) { this._value = value; this.setUpdateTimer(); }\r\n\r\n  private _currentValue: number | string = 0;\r\n  get currentValue(): number | string { return this._currentValue; }\r\n  set currentValue(currentValue: number | string) { this._currentValue = currentValue; this.setUpdateTimer(); }\r\n\r\n  private updateTimer: NodeJS.Timer = null;\r\n\r\n  constructor(\r\n    private changeDetector: ChangeDetectorRef\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    if (this.gameDataElement) this.setValues(this.gameDataElement);\r\n\r\n    EventSystem.register(this)\r\n      .on('UPDATE_GAME_OBJECT', -1000, event => {\r\n        if (this.gameDataElement && event.data.identifier === this.gameDataElement.identifier) {\r\n          this.setValues(this.gameDataElement);\r\n          this.changeDetector.markForCheck();\r\n        }\r\n      })\r\n      .on('DELETE_GAME_OBJECT', -1000, event => {\r\n        if (this.gameDataElement && this.gameDataElement.identifier === event.data.identifier) {\r\n          this.changeDetector.markForCheck();\r\n        }\r\n      });\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    EventSystem.unregister(this);\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n\r\n  }\r\n\r\n  addElement() {\r\n    this.gameDataElement.appendChild(DataElement.create('TEST', 8 , { 'type': 'numberResource', 'currentValue': '001' }, 'TEST')); // + '_' + character.identifier\r\n  }\r\n\r\n  deleteElement() {\r\n    this.gameDataElement.destroy();\r\n  }\r\n\r\n  upElement() {\r\n    let parentElement = this.gameDataElement.parent;\r\n    let index: number = parentElement.children.indexOf(this.gameDataElement);\r\n    if (0 < index) {\r\n      let prevElement = parentElement.children[index - 1];\r\n      parentElement.insertBefore(this.gameDataElement, prevElement);\r\n    }\r\n  }\r\n\r\n  downElement() {\r\n    let parentElement = this.gameDataElement.parent;\r\n    let index: number = parentElement.children.indexOf(this.gameDataElement);\r\n    if (index < parentElement.children.length - 1) {\r\n      let nextElement = parentElement.children[index + 1];\r\n      parentElement.insertBefore(nextElement, this.gameDataElement);\r\n    }\r\n  }\r\n\r\n  setElementType(type: string) {\r\n    this.gameDataElement.setAttribute('type', type);\r\n  }\r\n\r\n  private setValues(object: DataElement) {\r\n    this._name = object.name;\r\n    this._currentValue = object.currentValue;\r\n    this._value = object.value;\r\n  }\r\n\r\n  private setUpdateTimer() {\r\n    clearTimeout(this.updateTimer);\r\n    this.updateTimer = setTimeout(() => {\r\n      if (this.gameDataElement.name !== this.name) this.gameDataElement.name = this.name;\r\n      if (this.gameDataElement.currentValue !== this.currentValue) this.gameDataElement.currentValue = this.currentValue;\r\n      if (this.gameDataElement.value !== this.value) this.gameDataElement.value = this.value;\r\n      this.updateTimer = null;\r\n    }, 66);\r\n  }\r\n  \r\n  deletBuff( data : DataElement ){\r\n    data.destroy();\r\n  }\r\n}\r\n","<ng-container *ngIf=\"!isPieceMode\">\r\n  <ng-container *ngIf=\"gameDataElement\">\r\n    <ng-container *ngIf=\"gameDataElement.children.length < 1\">\r\n      <ng-container [ngSwitch]=\"gameDataElement.type\">\r\n        <ng-container *ngSwitchCase=\"'numberResource'\">\r\n          <div class=\"table-cell\" style=\"border-bottom:none;\">\r\n            <button (click)=\"deletBuff(gameDataElement)\" style=\"width:5em;\">刪除</button>\r\n          </div>\r\n          <div class=\"table table-cell\" style=\"\" style=\"border-bottom:none\">\r\n            <div class=\"table-cell\" style=\"width:60%;\">\r\n              <ng-container *ngIf=\"!isTagLocked\"><!-- NAME -->\r\n                <div class=\"hidden-spacer\" style=\"font-family: Cambria, Georgia; font-size: 0.9rem;\">{{name}}</div>\r\n\r\n                <input style=\"width:100%; min-width:10px; font-family: Cambria, Georgia; font-size: 0.9rem;\" size=\"1\"\r\n                [(ngModel)]=\"name\" placeholder=\"Value\" >\r\n              </ng-container>\r\n            </div>\r\n            <div class=\"table-cell\" style=\"width:0px;\">/</div>\r\n            <div class=\"table-cell\" style=\"width:30%;\">\r\n              <input style=\"width:100%;\" size=\"1\" type=\"string\" [(ngModel)]=\"currentValue\" placeholder=\"Value\" />\r\n            </div>\r\n            <div class=\"table-cell\" style=\"width:0px;\">/</div>\r\n            <div class=\"table-cell\" >\r\n              <input style=\"width: 3em;\" size=\"1\" type=\"number\" [(ngModel)]=\"value\" placeholder=\"Value\" />\r\n            </div>\r\n            <div class=\"table-cell\" >R</div>\r\n          </div>\r\n        </ng-container>\r\n        <ng-container *ngSwitchDefault>\r\n          <div class=\"table\" style=\"width:100%;\">\r\n\r\n            <div class=\"table-cell_inner-table-title\" >\r\n              <ng-container *ngIf=\"!isTagLocked\">\r\n                <div class=\"inputLock\" >{{gameDataElement.name}}</div>\r\n<!--\r\n                <input style=\"width:100%; min-width:10px; font-family: Cambria, Georgia; font-size: 1.0rem; font-weight: bold;\"\r\n                  size=\"1\" [(ngModel)]=\"name\" placeholder=\"Value\" />\r\n-->\r\n              </ng-container>\r\n            </div>\r\n          </div>\r\n        </ng-container>\r\n      </ng-container>\r\n    </ng-container>\r\n\r\n    <ng-container *ngIf=\"0 < gameDataElement.children.length\">\r\n        <div class=\"table\" style=\"width:100%;\">\r\n  \r\n          <div class=\"table-cell_inner-table-title\">\r\n            <ng-container *ngIf=\"!isTagLocked\">\r\n                <div class=\"inputLock\" >{{gameDataElement.name}}</div>\r\n<!--\r\n              <input style=\"width:100%; min-width:10px; font-family: Cambria, Georgia; font-size: 1.0rem; font-weight: bold;\"\r\n                size=\"1\" [(ngModel)]=\"name\" placeholder=\"Value\" />\r\n-->\r\n            </ng-container>\r\n          </div>\r\n\r\n          <div class=\"table\" *ngIf=\"0 < gameDataElement.children.length\">\r\n            <div game-data-element-buff class=\"table-row\" *ngFor=\"let childElement of gameDataElement.children\"\r\n              [gameDataElement]=\"childElement\" [isEdit]=\"isEdit\" [isTagLocked]=\"isTagLocked\"></div>\r\n          </div>\r\n      </div>\r\n<!--    \r\n-->\r\n    </ng-container>\r\n  </ng-container>\r\n</ng-container>\r\n\r\n<ng-container *ngIf=\"isPieceMode\">\r\n  <ng-container *ngIf=\"gameDataElement.children.length < 1\">\r\n    <ng-container [ngSwitch]=\"gameDataElement.type\">\r\n      <ng-container *ngSwitchCase=\"'numberResource'\">\r\n<span style=\"font-family: Cambria, Georgia; font-size: 0.4rem;\">       \r\n{{gameDataElement.name}} / {{gameDataElement.currentValue}} / {{gameDataElement.value}}R \r\n</span>\r\n<!--\r\n          <div class=\"table-cell-2\" style=\"font-family: Cambria, Georgia; font-size: 0.7rem;\">×</div>\r\n          <div class=\"table-cell-2\" style=\"width:50%;\">\r\n              <div class=\"hidden-spacer\" style=\"font-family: Cambria, Georgia; font-size: 0.7rem;\">{{name}}</div>\r\n              <input style=\"width:100%; min-width:10px; font-family: Cambria, Georgia; font-size: 0.7rem;\" size=\"1\"\r\n                [(ngModel)]=\"name\" placeholder=\"Value\" >\r\n          </div>\r\n          <div class=\"table-cell-2\" style=\"font-family: Cambria, Georgia; font-size: 0.7rem;\">/</div>\r\n          <div class=\"table-cell-2\" style=\"width:30%;\">\r\n              <div class=\"hidden-spacer\" style=\"font-family: Cambria, Georgia; font-size: 0.7rem;\">{{currentValue}}</div>\r\n              <input style=\"width:100%;min-width:10px; font-family: Cambria, Georgia; font-size: 0.7rem;\" size=\"1\" \r\n               type=\"string\" [(ngModel)]=\"currentValue\" placeholder=\"Value\" />\r\n          </div>\r\n          <div class=\"table-cell-2\" style=\"font-family: Cambria, Georgia; font-size: 0.7rem;\">/</div>\r\n          <div class=\"table-cell-2\" >\r\n              <div class=\"hidden-spacer\" style=\"font-family: Cambria, Georgia; font-size: 0.7rem;\">{{value}}</div>\r\n              <input style=\"width: 3em;min-width:10px; font-family: Cambria, Georgia; font-size: 0.7rem;\" size=\"1\" \r\n               type=\"number\" [(ngModel)]=\"value\" placeholder=\"Value\" />\r\n          </div>\r\n          <div class=\"table-cell-2\" >R</div>\r\n<!-- -->\r\n      </ng-container>\r\n    </ng-container>\r\n  </ng-container>\r\n\r\n  <ng-container *ngIf=\"0 < gameDataElement.children.length\">\r\n<!--     <div >{{gameDataElement.children.length}}</div> -->\r\n     <div game-data-element-buff class=\"table-row\" *ngFor=\"let childElement of gameDataElement.children\"\r\n      [gameDataElement]=\"childElement\" [isEdit]=\"isEdit\" [isTagLocked]=\"isTagLocked\" [isPieceMode]=\"isPieceMode\"></div>\r\n    \r\n  </ng-container>\r\n</ng-container>\r\n\r\n\r\n<ng-template #editButtons>\r\n  <button (click)=\"addElement()\"><i class=\"material-icons\">add_circle</i></button>\r\n  <button (click)=\"upElement()\"><i class=\"material-icons\">arrow_upward</i></button>\r\n  <br>\r\n  <button (click)=\"deleteElement()\"><i class=\"material-icons\">remove_circle_outline</i></button>\r\n  <button (click)=\"downElement()\"><i class=\"material-icons\">arrow_downward</i></button>\r\n</ng-template>","import { ElementRef, Input, ViewChild } from '@angular/core';\r\nimport { AfterViewInit, ChangeDetectionStrategy, ChangeDetectorRef, Component, OnDestroy, OnInit } from '@angular/core';\r\nimport GameSystemClass from 'bcdice/lib/game_system';\r\n\r\nimport { ChatPalette } from '@udonarium/chat-palette';\r\nimport { ChatTab } from '@udonarium/chat-tab';\r\nimport { ObjectStore } from '@udonarium/core/synchronize-object/object-store';\r\nimport { EventSystem, Network } from '@udonarium/core/system';\r\nimport { DiceBot } from '@udonarium/dice-bot';\r\nimport { GameCharacter } from '@udonarium/game-character';\r\nimport { PeerCursor } from '@udonarium/peer-cursor';\r\nimport { ControllerInputComponent } from 'component/controller-input/controller-input.component';\r\nimport { ChatMessageService } from 'service/chat-message.service';\r\nimport { PanelOption, PanelService } from 'service/panel.service';\r\n\r\nimport { GameObject } from '@udonarium/core/synchronize-object/game-object';\r\nimport { DataElement } from '@udonarium/data-element';\r\nimport { SortOrder } from '@udonarium/data-summary-setting';\r\nimport { PresetSound, SoundEffect } from '@udonarium/sound-effect';\r\nimport { TabletopObject } from '@udonarium/tabletop-object';\r\nimport { ChatPaletteComponent } from 'component/chat-palette/chat-palette.component';\r\nimport { GameCharacterSheetComponent } from 'component/game-character-sheet/game-character-sheet.component';\r\nimport { ContextMenuAction, ContextMenuService, ContextMenuSeparator } from 'service/context-menu.service';\r\nimport { GameObjectInventoryService } from 'service/game-object-inventory.service';\r\nimport { PointerDeviceService } from 'service/pointer-device.service';\r\n\r\nimport { GameDataElementBuffComponent } from 'component/game-data-element-buff/game-data-element-buff.component';\r\nimport { GameCharacterBuffViewComponent } from 'component/game-character-buff-view/game-character-buff-view.component';\r\n\r\nclass RemotControllerSelect {\r\n    identifier: string;\r\n    type: string;\r\n    name: string;\r\n}\r\n\r\n@Component({\r\n  selector: 'remote-controller',\r\n  templateUrl: './remote-controller.component.html',\r\n  styleUrls: ['./remote-controller.component.css']\r\n\r\n})\r\nexport class RemoteControllerComponent implements OnInit, OnDestroy {\r\n\r\n  get palette(): ChatPalette { return this.character.remoteController; }\r\n  \r\n  private _gameSystem: GameSystemClass;\r\n\r\n  get gameType(): string { return this._gameSystem == null ? '' : this._gameSystem.ID };\r\n  set gameType(gameType: string) {\r\n    DiceBot.loadGameSystemAsync(gameType).then((gameSystem) => {\r\n      this._gameSystem = gameSystem;\r\n      if (this.character.remoteController) this.character.remoteController.dicebot = gameSystem.ID;\r\n    });\r\n  };\r\n\r\n  get sendFrom(): string { return this.character.identifier; }\r\n  set sendFrom(sendFrom: string) {\r\n    this.onSelectedCharacter(sendFrom);\r\n  }\r\n\r\n  get diceBotInfos() { return DiceBot.diceBotInfos; }\r\n\r\n  get chatTab(): ChatTab { return ObjectStore.instance.get<ChatTab>(this.chatTabidentifier); }\r\n  get myPeer(): PeerCursor { return PeerCursor.myCursor; }\r\n  get otherPeers(): PeerCursor[] { return ObjectStore.instance.getObjects(PeerCursor); }\r\n\r\n  constructor(\r\n    public chatMessageService: ChatMessageService,\r\n    private panelService: PanelService,\r\n\r\n    private changeDetector: ChangeDetectorRef,\r\n    private inventoryService: GameObjectInventoryService,\r\n    private contextMenuService: ContextMenuService,\r\n    private pointerDeviceService: PointerDeviceService\r\n\r\n  ) {\r\n    this.initTimestamp = Date.now();\r\n    console.log('this.initTimestamp ' + this.initTimestamp);\r\n  }\r\n\r\n  get sortTag(): string { return this.inventoryService.sortTag; }\r\n  set sortTag(sortTag: string) { this.inventoryService.sortTag = sortTag; }\r\n  get sortOrder(): SortOrder { return this.inventoryService.sortOrder; }\r\n  set sortOrder(sortOrder: SortOrder) { this.inventoryService.sortOrder = sortOrder; }\r\n  get dataTag(): string { return this.inventoryService.dataTag; }\r\n  set dataTag(dataTag: string) { this.inventoryService.dataTag = dataTag; }\r\n  get dataTags(): string[] { return this.inventoryService.dataTags; }\r\n\r\n  get sortOrderName(): string { return this.sortOrder === SortOrder.ASC ? '昇順' : '降順'; }\r\n\r\n  get newLineString(): string { return this.inventoryService.newLineString; }\r\n  @ViewChild('controllerInput', { static: true }) controllerInputComponent: ControllerInputComponent;\r\n  @ViewChild('chatPalette') chatPaletteElementRef: ElementRef<HTMLSelectElement>;\r\n  @Input() character: GameCharacter = null;\r\n  errorMessageBuff = '';\r\n  errorMessageController = '';\r\n\r\n  private _gameType = '';\r\n  private initTimestamp = 0;\r\n\r\n  public buffAreaIsHide = false;\r\n  public controllerAreaIsHide = false;\r\n\r\n  chatTabidentifier = '';\r\n\r\n  remotNumber = 0;\r\n\r\n  recoveryLimitFlag = false;\r\n\r\n  disptimer = null;\r\n\r\n  selectCharacter = null;\r\n\r\n  remotControllerSelect: RemotControllerSelect = {\r\n    identifier : '',\r\n    type : '',\r\n    name : ''\r\n  };\r\n  remotControllerRadio = '';\r\n\r\n  remotControlleridentifier: string[] = ['test01', 'test02'];\r\n  testTag  = '0001';\r\n\r\n  text = '';\r\n  sendTo = '';\r\n\r\n  isEdit = false;\r\n  editPalette = '';\r\n\r\n  private doubleClickTimer: NodeJS.Timer = null;\r\n\r\n  charList: string[] = [];\r\n\r\n\r\n  inventoryTypes: string[] = ['table', 'common', 'graveyard'];\r\n  selectTab = 'table';\r\n  selectedIdentifier = '';\r\n\r\n  hideChkBoxEvent( eventValue: boolean) {\r\n    this.buffAreaIsHide = eventValue;\r\n  }\r\n  controllerHideChkChange( eventValue: boolean ){\r\n    this.controllerAreaIsHide = eventValue;\r\n  }\r\n  recoveryLimitFlagChange( value ){\r\n    // 現状特に処理なし\r\n  }\r\n\r\n\r\n  reverseValue(){\r\n    this.remotNumber = -this.remotNumber;\r\n  }\r\n\r\n\r\n  remotSelect( identifier: string , type: string , name: string ){\r\n    this.remotControllerSelect.identifier = identifier;\r\n    this.remotControllerSelect.type = type;\r\n    this.remotControllerSelect.name = name;\r\n  }\r\n\r\n  charListChange(charName: string, checked: boolean) {\r\n\r\n    if (checked) {\r\n       if (this.charList.indexOf(charName) < 0) {\r\n          this.charList.push(charName);\r\n       }\r\n    } else {\r\n       if (this.charList.indexOf(charName) > -1) {\r\n         this.charList.splice(this.charList.indexOf(charName), 1);\r\n       }\r\n    }\r\n  }\r\n\r\n\r\n  ngOnInit() {\r\n    Promise.resolve().then(() => this.updatePanelTitle());\r\n    this.chatTabidentifier = this.chatMessageService.chatTabs ? this.chatMessageService.chatTabs[0].identifier : '';\r\n    this.gameType = this.character.remoteController ? this.character.remoteController.dicebot : '';\r\n    EventSystem.register(this)\r\n      .on('DELETE_GAME_OBJECT', -1000, event => {\r\n        if (this.character && this.character.identifier === event.data.identifier) {\r\n          this.panelService.close();\r\n        }\r\n        if (this.chatTabidentifier === event.data.identifier) {\r\n          this.chatTabidentifier = this.chatMessageService.chatTabs ? this.chatMessageService.chatTabs[0].identifier : '';\r\n        }\r\n      });\r\n\r\n    EventSystem.register(this)\r\n      .on('SELECT_TABLETOP_OBJECT', -1000, event => {\r\n        if (ObjectStore.instance.get(event.data.identifier) instanceof TabletopObject) {\r\n          this.selectedIdentifier = event.data.identifier;\r\n          this.changeDetector.markForCheck();\r\n        }\r\n      })\r\n      .on('SYNCHRONIZE_FILE_LIST', event => {\r\n        if (event.isSendFromSelf) { this.changeDetector.markForCheck(); }\r\n      })\r\n      .on('UPDATE_INVENTORY', event => {\r\n        if (event.isSendFromSelf) { this.changeDetector.markForCheck(); }\r\n      })\r\n      .on('OPEN_NETWORK', event => {\r\n        this.inventoryTypes = ['table', 'common', Network.peerId, 'graveyard'];\r\n        if (!this.inventoryTypes.includes(this.selectTab)) {\r\n          this.selectTab = Network.peerId;\r\n        }\r\n      });\r\n    this.inventoryTypes = ['table', 'common', Network.peerId, 'graveyard'];\r\n\r\n    this.disptimer = setInterval(() => {\r\n      this.changeDetector.detectChanges();\r\n    }, 200 );\r\n  }\r\n\r\n\r\n  ngOnDestroy() {\r\n    EventSystem.unregister(this);\r\n    this.disptimer = null;\r\n    if (this.isEdit) { this.toggleEditMode(); }\r\n  }\r\n\r\n  updatePanelTitle() {\r\n    this.panelService.title = this.character.name + ' 的控制面板';\r\n  }\r\n\r\n  onSelectedCharacter(identifier: string) {\r\n    if (this.isEdit) { this.toggleEditMode(); }\r\n    const object = ObjectStore.instance.get(identifier);\r\n    if (object instanceof GameCharacter) {\r\n      this.character = object;\r\n      const gameType = this.character.remoteController ? this.character.remoteController.dicebot : '';\r\n      if (0 < gameType.length) { this.gameType = gameType; }\r\n    }\r\n    this.updatePanelTitle();\r\n  }\r\n\r\n  selectPalette(line: string) {\r\n    this.text = line;\r\n  }\r\n\r\n  clickPalette(line: string) {\r\n    if (this.doubleClickTimer && this.text === line) {\r\n      clearTimeout(this.doubleClickTimer);\r\n      this.doubleClickTimer = null;\r\n      this.controllerInputComponent.sendChat(null);\r\n    } else {\r\n      this.text = line;\r\n      this.doubleClickTimer = setTimeout(() => { this.doubleClickTimer = null; }, 400);\r\n    }\r\n  }\r\n\r\n\r\n  resetPaletteSelect() {\r\n    if (!this.chatPaletteElementRef.nativeElement) { return; }\r\n    this.chatPaletteElementRef.nativeElement.selectedIndex = -1;\r\n  }\r\n\r\n  toggleEditMode() {\r\n    this.isEdit = this.isEdit ? false : true;\r\n    if (this.isEdit) {\r\n      this.editPalette = this.palette.value + '';\r\n    } else {\r\n      this.palette.setPalette(this.editPalette);\r\n    }\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n  }\r\n\r\n  getTabTitle(inventoryType: string) {\r\n    switch (inventoryType) {\r\n      case 'table':\r\n        return '桌面';\r\n      case Network.peerId:\r\n        return '個人';\r\n      case 'graveyard':\r\n        return '墓場';\r\n      default:\r\n        return '共有';\r\n    }\r\n  }\r\n\r\n  getInventory(inventoryType: string) {\r\n    switch (inventoryType) {\r\n      case 'table':\r\n        return this.inventoryService.tableInventory;\r\n      case Network.peerId:\r\n        return this.inventoryService.privateInventory;\r\n      case 'graveyard':\r\n        return this.inventoryService.graveyardInventory;\r\n      default:\r\n        return this.inventoryService.commonInventory;\r\n    }\r\n  }\r\n\r\n  getGameObjects(inventoryType: string): TabletopObject[] {\r\n    switch (inventoryType) {\r\n      case 'table':\r\n      const tableCharacterList_dest = [] ;\r\n      const tableCharacterList_scr = this.inventoryService.tableInventory.tabletopObjects;\r\n      for (const character of tableCharacterList_scr) {\r\n        const character_: GameCharacter = character as GameCharacter;\r\n        if ( !character_.hideInventory ) { tableCharacterList_dest.push( character as TabletopObject ); }\r\n      }\r\n      return tableCharacterList_dest;\r\n    }\r\n  }\r\n\r\n  getInventoryTags(gameObject: GameCharacter): DataElement[] {\r\n    return this.getInventory(gameObject.location.name).dataElementMap.get(gameObject.identifier);\r\n  }\r\n\r\n  toggleEdit() {\r\n    this.isEdit = !this.isEdit;\r\n  }\r\n  selectGameObject(gameObject: GameObject) {\r\n    const aliasName: string = gameObject.aliasName;\r\n    EventSystem.trigger('SELECT_TABLETOP_OBJECT', { identifier: gameObject.identifier, className: gameObject.aliasName });\r\n\r\n    this.selectCharacter = gameObject;\r\n  }\r\n\r\n  getTargetCharacters( checkedOnly: boolean ): GameCharacter[]{\r\n    const gameCharacters = new Array();\r\n    const objectList = this.getGameObjects(this.selectTab);\r\n    for (const object of objectList){\r\n      if (object instanceof GameCharacter) {\r\n        if ( object.hideInventory ) { continue; } // 非表示対象の除外のため\r\n\r\n        const box = document.getElementById(object.identifier + '_' + this.initTimestamp) as HTMLInputElement;\r\n        if ( box ){\r\n          if ( box.checked || (!checkedOnly) ){\r\n            gameCharacters.push(object);\r\n          }\r\n        }\r\n      }\r\n    }\r\n    return gameCharacters;\r\n  }\r\n\r\n  remotBuffRoundDo(gameCharacters: GameCharacter[]){\r\n    if ( gameCharacters.length <= 0 ) { return; }\r\n\r\n    for (const character of gameCharacters){\r\n\r\n      if (character.buffDataElement.children){\r\n        for (const dataElm of character.buffDataElement.children){\r\n          for (const data  of dataElm.children){\r\n            let oldNumS = '';\r\n            let sum: number;\r\n\r\n            oldNumS = (data.value as string);\r\n            sum = parseInt(oldNumS);\r\n            sum = sum - 1;\r\n            data.value = sum;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  remotBuffRound( checkedOnly: boolean ){\r\n    let text = '';\r\n    const gameCharacters = this.getTargetCharacters( checkedOnly );\r\n    if ( gameCharacters.length <= 0 ) { return; }\r\n    if ( ! this.chatTab) {  return; }\r\n\r\n    const mess = '';\r\n    if ( gameCharacters.length > 0){\r\n      for (const object of gameCharacters){\r\n        text = text + '[' + object.name + ']';\r\n      }\r\n      this.remotBuffRoundDo(gameCharacters);\r\n      let mess = '減少BUFF的R ' + text;\r\n      this.chatMessageService.sendMessage(this.chatTab, mess, this._gameSystem, this.sendFrom, this.sendTo ,this.controllerInputComponent.tachieNum);\r\n    }\r\n  }\r\n\r\n  remotBuffRoundSelect(){\r\n    this.remotBuffRound( true );\r\n  }\r\n\r\n  remotBuffRoundALL(){\r\n    this.remotBuffRound( false );\r\n  }\r\n\r\n  remotBuffDeleteZeroRoundDo(gameCharacters: GameCharacter[]){\r\n    if ( gameCharacters.length <= 0 ) { return; }\r\n    for (const character of gameCharacters){\r\n\r\n      if (character.buffDataElement.children){\r\n        for (const dataElm of character.buffDataElement.children){\r\n          for (const data  of dataElm.children){\r\n            let oldNumS = '';\r\n            let num: number;\r\n\r\n            oldNumS = (data.value as string);\r\n            num = parseInt(oldNumS);\r\n            if ( num <= 0){\r\n              data.destroy();\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  remotBuffDeleteZeroRound( checkedOnly: boolean ){\r\n    let text = '';\r\n    const gameCharacters = this.getTargetCharacters( checkedOnly );\r\n\r\n    const mess = '';\r\n    if ( gameCharacters.length > 0){\r\n      for (const object of gameCharacters){\r\n        text = text + '[' + object.name + ']';\r\n      }\r\n      this.remotBuffDeleteZeroRoundDo(gameCharacters);\r\n      let mess = '刪除0R以下的BUFF ' + text;\r\n      this.chatMessageService.sendMessage(this.chatTab, mess, this._gameSystem, this.sendFrom, this.sendTo, this.controllerInputComponent.tachieNum);\r\n    }\r\n  }\r\n\r\n  remotBuffDeleteZeroRoundSelect(){\r\n    this.remotBuffDeleteZeroRound( true );\r\n  }\r\n  remotBuffDeleteZeroRoundALL(){\r\n    this.remotBuffDeleteZeroRound( false );\r\n  }\r\n\r\n  remotAddBuffRound(gameCharacters: GameCharacter[], name: string, subcom: string, round: number){\r\n\r\n    const text = '';\r\n    if ( gameCharacters.length <= 0 ) { return; }\r\n    for (const character of gameCharacters){\r\n      if (character.buffDataElement.children){\r\n        for (const dataElm of character.buffDataElement.children){\r\n          const data = character.buffDataElement.getFirstElementByName( name );\r\n          if ( data ){\r\n            data.value = round;\r\n            data.currentValue = subcom;\r\n          }else{\r\n            dataElm.appendChild(DataElement.create(name, round , { type: 'numberResource', currentValue: subcom }, ));\r\n          }\r\n\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  sendChat(value: { text: string, gameSystem: GameSystemClass, sendFrom: string, sendTo: string ,tachieNum: number ,messColor: string }) {\r\n\r\n    let text = '';\r\n    const gameCharacters = this.getTargetCharacters( true );\r\n\r\n    const splittext: string[] =  value.text.split(/\\s+/);\r\n    let round = 3;\r\n    let sub = '';\r\n    let buffname = '';\r\n    let bufftext = '';\r\n\r\n    if ( splittext.length == 0) {\r\n      return;\r\n    }\r\n    if ( splittext[0] == '') {\r\n      return;\r\n    }\r\n\r\n    buffname = splittext[0];\r\n    bufftext = splittext[0];\r\n    if ( splittext.length > 1){ sub = splittext[1]; bufftext = bufftext + '/' + splittext[1]; }\r\n    if ( splittext.length > 2){ round = parseInt(splittext[2]); bufftext = bufftext + '/' + round + 'R'; }\r\n\r\n    if ( gameCharacters.length > 0){\r\n      for (const object of gameCharacters){\r\n        text = text + '[' + object.name + ']';\r\n      }\r\n      this.remotAddBuffRound(gameCharacters,buffname,sub,round);\r\n      let mess = '賦予BUFF ' + bufftext + ' > ' + text;\r\n      this.chatMessageService.sendMessage(this.chatTab, mess, this._gameSystem, this.sendFrom, this.sendTo ,value.tachieNum , value.messColor );\r\n      this.errorMessageBuff = '';\r\n    }else{\r\n      this.errorMessageBuff = '未選擇對象';\r\n    }\r\n  }\r\n\r\n  remotChangeValue(){\r\n    let text = '';\r\n    const gameCharacters = this.getTargetCharacters( true );\r\n\r\n    if (this.remotControllerSelect.identifier == ''){\r\n      this.errorMessageController = '未選擇變更項目';\r\n      return;\r\n    }\r\n\r\n    for (const object of gameCharacters){\r\n\r\n      const data = object.detailDataElement.getFirstElementByName(this.remotControllerSelect.identifier);\r\n      if ( data ){\r\n        let oldNumS = '';\r\n        let newNum: number;\r\n        let sum: number;\r\n\r\n        if ( this.remotControllerSelect.type == 'value') {\r\n          oldNumS = (data.value as string);\r\n          sum = parseInt(oldNumS);\r\n          sum = sum + this.remotNumber;\r\n          data.value = sum;\r\n          newNum = (data.value as number);\r\n        }\r\n\r\n        let maxRecoveryMess = '';\r\n        if ( this.remotControllerSelect.type == 'currentValue'){\r\n          oldNumS = (data.currentValue as string);\r\n          sum = parseInt(oldNumS);\r\n          sum = sum + this.remotNumber;\r\n          data.currentValue = sum;\r\n          if ( this.recoveryLimitFlag && data.currentValue >= data.value ){\r\n            maxRecoveryMess = '(最大)';\r\n            data.currentValue = data.value;\r\n          }\r\n          newNum = (data.currentValue as number);\r\n        }\r\n        text = text + '[' + object.name + ' ' + oldNumS + '>' + newNum + maxRecoveryMess + '] ';\r\n      }\r\n    }\r\n\r\n    if ( text != '' ){\r\n      let hugou = '+';\r\n      if( this.remotNumber < 0) hugou = ''\r\n      let mess = '[' +this.remotControllerSelect.name + ']変更[' + hugou +this.remotNumber + ']＞' + text;\r\n      this.chatMessageService.sendMessage(this.chatTab, mess, this._gameSystem, this.sendFrom, this.sendTo ,this.controllerInputComponent.tachieNum , this.controllerInputComponent.selectChatColor );\r\n      this.errorMessageController = '';\r\n    }else{\r\n      this.errorMessageController = '未選擇對象角色';\r\n    }\r\n  }\r\n\r\n\r\n  trackByGameObject(index: number, gameObject: GameObject) {\r\n    return gameObject ? gameObject.identifier : index;\r\n  }\r\n\r\n  buffEdit( gameCharacter: GameCharacter){\r\n      const coordinate = this.pointerDeviceService.pointers[0];\r\n      const option: PanelOption = { left: coordinate.x, top: coordinate.y, width: 420, height: 300 };\r\n      option.title = gameCharacter.name + '的BUFF編輯';\r\n      const component = this.panelService.open(GameCharacterBuffViewComponent, option);\r\n      component.character = gameCharacter;\r\n\r\n  }\r\n\r\n  allBoxCheck( value: { check: boolean }){\r\n\r\n    const objectList = this.getGameObjects(this.selectTab);\r\n    for (const object of objectList){\r\n      if (object instanceof GameCharacter) {\r\n        const box = document.getElementById(object.identifier + '_' + this.initTimestamp) as HTMLInputElement;\r\n        if ( box ){\r\n          box.checked = value.check;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  targetBlockClick(identifier){\r\n    console.log( 'identifier:' + identifier + ' initTimestamp:' + this.initTimestamp);\r\n    const box = document.getElementById(identifier + '_' + this.initTimestamp) as HTMLInputElement;\r\n    box.checked = !box.checked;\r\n  }\r\n\r\n  onChange(identifier) {\r\n    this.targetBlockClick(identifier);\r\n  }\r\n\r\n}\r\n","<div class=\"remote-controller-wrapper\">\r\n<div class=\"sticky-top-left\">\r\n    <div class=\"flex-container\">\r\n      <div style=\"flex-grow: 0;\">\r\n        <form>\r\n         <div class=\"chat-tab\">\r\n           <label *ngFor=\"let chatTab of chatMessageService.chatTabs\">\r\n             <input name=\"chat-tab\" type=\"radio\" value=\"{{chatTab.identifier}}\" ng-control=\"options\" [(ngModel)]=\"chatTabidentifier\">\r\n             <div>{{chatTab.name}}</div>\r\n           </label>\r\n         </div>\r\n        </form>\r\n\r\n        <controller-input [onlyCharacters]=\"true\" [chatTabidentifier]=\"chatTabidentifier\" \r\n        [(gameType)]=\"gameType\" [(sendFrom)]=\"sendFrom\" [(text)]=\"text\" [(selectNum)]=\"this.getTargetCharacters( true ).length\"\r\n        (allBox)=\"allBoxCheck($event)\" (chat)=\"sendChat($event)\" (hideChkEvent)=\"hideChkBoxEvent($event)\"\r\n        #controllerInput>\r\n        </controller-input>\r\n\r\n        <ng-container *ngIf=\"! buffAreaIsHide \">\r\n          <div *ngIf=\"errorMessageBuff.length > 0\" >{{errorMessageBuff}}\r\n          </div>\r\n          <div *ngIf=\"isEdit\" class=\"edit-info\"><i class=\"material-icons\" style=\"vertical-align: bottom; size:0.8rem;\">info_outline</i> BUFF編輯中</div>\r\n\r\n          <div *ngIf=\"!isEdit\" style=\"flex-grow: 1; height: 0; min-height: 100px;\">\r\n            <select class=\"palette\" style=\"overflow-y: auto;\" size=\"5\" (input)=\"selectPalette($event.target.value)\" (click)=\"clickPalette($event.target.value)\" #chatPalette>\r\n            <form>\r\n              <ng-container *ngIf=\"! buffHideIsChk \">\r\n                <textarea class=\"controller-input\" placeholder=\"按Enter送出\" [(ngModel)]=\"text\"\r\n                [ngModelOptions]=\"{standalone: true}\" (input)=\"onInput()\" (keydown.enter)=\"sendChat($event)\" \r\n                #textArea></textarea>\r\n                <button type=\"submit\" (click)=\"sendChat(null)\">實行</button>\r\n              </ng-container>\r\n            </form>\r\n            <ng-container *ngIf=\"palette\">\r\n              <option *ngFor=\"let palette of palette.getPalette()\" value=\"{{palette}}\">{{palette}}</option>\r\n            </ng-container>\r\n            </select>\r\n          </div>\r\n          <div *ngIf=\"isEdit\" style=\"flex-grow: 1; height: 0; min-height: 100px;\">\r\n           <textarea class=\"palette\" style=\"resize: none;\" [(ngModel)]=\"editPalette\" placeholder=\"BUFF編輯板\"></textarea>\r\n          </div>\r\n          <div style=\"flex-grow: 0;\">\r\n            <button type=\"submit\" (click)=\"toggleEditMode()\" style=\"width:20em\">\r\n              <span *ngIf=\"!isEdit\">編輯BUFF欄</span>\r\n              <span *ngIf=\"isEdit\">確定BUFF欄</span>\r\n            </button>\r\n            <BR>\r\n            <button type=\"submit\" (click)=\"remotBuffRoundSelect()\" style=\"width:10em\">\r\n            <span>BUFF R減少/選擇</span>\r\n            </button>\r\n            <button type=\"submit\" (click)=\"remotBuffRoundALL()\" style=\"width:10em\">\r\n              <span>BUFF R減少/全員</span>\r\n            </button>\r\n            <button type=\"submit\" (click)=\"remotBuffDeleteZeroRoundSelect()\" style=\"width:10em\">\r\n              <span>0R以下消去/選擇</span>\r\n            </button>\r\n            <button type=\"submit\" (click)=\"remotBuffDeleteZeroRoundALL()\" style=\"width:10em\">\r\n              <span>0R以下消去/全員</span>\r\n            </button>\r\n          </div>\r\n        </ng-container>\r\n      </div>\r\n    </div>\r\n    <hr>\r\n\r\n    <div style=\"width:100%;\">計數控制\r\n      <div style=\"float:right;text-align:right;\">隱藏\r\n        <input name=\"buff_hide_chk\" type=\"checkbox\" \r\n        (change) =\"controllerHideChkChange($event.target.checked)\" >\r\n      </div>\r\n    </div>\r\n\r\n    <ng-container *ngIf=\"! controllerAreaIsHide \">\r\n      <div>\r\n        變更量\r\n        <input style=\"width: 3.0em;   font-size: 1.2em;\" size=\"1\" \r\n        type=\"number\" [(ngModel)]=\"this.remotNumber\" placeholder=\"Value\" />\r\n        <button (click)=\"reverseValue()\" >\r\n          <span > ± </span>\r\n        </button>\r\n        <button type=\"submit\"  (click)=\"remotChangeValue()\" >\r\n          <span >操作</span>\r\n        </button>\r\n        <div style=\"float:right;text-align:right;margin-top:5px;\">\r\n          最大制限\r\n          <input name=\"max_limit_chk\" type=\"checkbox\" [(ngModel)]=\"this.recoveryLimitFlag\"\r\n          (change) =\"recoveryLimitFlagChange($event.target.checked)\" >\r\n        </div>\r\n      </div>\r\n      <div *ngIf=\"errorMessageController.length > 0\">{{errorMessageController}}\r\n      </div>\r\n      <div *ngIf=\"character.rootDataElement\">\r\n        <div class=\"controller\">\r\n          <ng-container *ngFor=\"let data of character.detailDataElement.children;\">\r\n            <ng-container  *ngFor=\"let dataElm of data.children; \">\r\n              <ng-container *ngIf=\"dataElm && this.dataTags.includes(dataElm.name)\">\r\n                <ng-container [ngSwitch]=\"dataElm.attributes['type']\">\r\n                  <div *ngSwitchCase=\"'numberResource'\">\r\n                    <label >\r\n                      <input name=\"controller\" type=\"radio\" value=\"{{dataElm.name + '現在値'}}\" \r\n                      ng-control=\"options\" (click)=\"remotSelect(dataElm.name,'currentValue',(dataElm.name + '現在値'))\" />\r\n                      <div>{{dataElm.name + '現在値'}}</div>\r\n                    </label>\r\n\r\n                    <label >\r\n                      <input name=\"controller\" type=\"radio\" value=\"{{dataElm.name + '最大値'}}\"\r\n                      ng-control=\"options\" (click)=\"remotSelect(dataElm.name,'value',(dataElm.name + '最大値'))\" />\r\n                      <div>{{dataElm.name + '最大値'}}</div>\r\n                    </label>\r\n                  </div>\r\n\r\n                  <label *ngSwitchDefault>\r\n                    <input name=\"controller\" type=\"radio\" value=\"{{dataElm.name}}\" \r\n                     ng-control=\"options\" (click)=\"remotSelect(dataElm.name,'value',dataElm.name)\" />\r\n                    <div>{{dataElm.name}}</div>\r\n                  </label>\r\n\r\n                </ng-container>\r\n              </ng-container>\r\n            </ng-container >\r\n          </ng-container> \r\n        </div>\r\n      </div>\r\n    </ng-container>\r\n</div>\r\n\r\n<div class=\"controller-right\">\r\n    <div *ngIf=\"getGameObjects(selectTab).length < 1\">{{getTabTitle(selectTab)}}清單為空</div>\r\n    <div \r\n     *ngFor=\"let gameObject of getGameObjects(selectTab); trackBy: trackByGameObject\"\r\n     [ngClass]=\"{'box': true, 'selected': 0 }\" >\r\n      <ng-container *ngTemplateOutlet=\"gameObjectTags; context:{ gameObject: gameObject}\"></ng-container>\r\n    </div>\r\n<!-- インベントリ -->\r\n<ng-template #gameObjectTags let-gameObject=\"gameObject\">\r\n  <div class=\"inventory-object \" >\r\n\r\n    <div class=\"object-tags-box\">\r\n      <div>\r\n        <span class=\"object-name\">{{gameObject.name}}</span>\r\n        <button class=\"tab-setting small-font\" (click)=\"buffEdit( gameObject )\">BUFF編輯</button>\r\n      </div>\r\n      <div class=\"table\">\r\n        <div class=\"table-cell click-area\" (click)=\"targetBlockClick(gameObject.identifier)\">\r\n          <div class=\"image-box\">\r\n            <img *ngIf=\"gameObject.imageFile.url\" [src]=\"gameObject.imageFile.url | safe: 'resourceUrl'\" />\r\n          </div>\r\n          <input class=\"target_chk\" id ={{gameObject.identifier}}_{{initTimestamp}}  name=\"target_chk\" \r\n          type=\"checkbox\" (change) =\"onChange(gameObject.identifier)\" >\r\n<!-- +{{initTmepstamp}} -->\r\n        </div>\r\n        <div class=\"table-cell\">\r\n          <div *ngIf=\"gameObject.rootDataElement\">\r\n            <ng-container *ngFor=\"let dataElm of getInventoryTags(gameObject); trackBy: trackByGameObject\">\r\n              <ng-container *ngTemplateOutlet=\"dataElmTag; context:{ dataElm: dataElm}\"></ng-container>\r\n            </ng-container>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</ng-template>\r\n\r\n<ng-template #dataElmTag let-dataElm=\"dataElm\">\r\n  <ng-container *ngIf=\"dataElm?.name === newLineString\"><br></ng-container>\r\n  <div *ngIf=\"dataElm && dataElm.name !== newLineString\" class=\"object-tag\">\r\n    <ng-container [ngSwitch]=\"dataElm.attributes['type']\">\r\n      <ng-container *ngSwitchCase=\"'numberResource'\">\r\n        <div class=\"tag-name\">{{dataElm.name}}</div>\r\n        <div style=\"text-align: center;\">\r\n          <div style=\"display: inline-block;\">\r\n            <div class=\"tag-value-box\" >              \r\n              <div class=\"hidden-spacer\" style=\"font-weight: bold;\">&nbsp;&nbsp;{{dataElm.value}}</div>\r\n              <div class=\"hidden-spacer\" style=\"font-weight: bold;\">&nbsp;&nbsp;{{dataElm.currentValue}}</div>\r\n              <div class=\"table\">\r\n                <div class=\"table-cell tag-slash\">\r\n                  <div style=\"padding: 2px;\">&nbsp;</div><div style=\"padding: 2px;\">/</div>\r\n                </div>\r\n                <div class=\"table-cell\">\r\n                  <input class=\"input tag-value\" size=\"1\" [(ngModel)]=\"dataElm.currentValue\" \r\n                  placeholder=\"\" />\r\n                  <input class=\"input tag-value\" size=\"1\" [(ngModel)]=\"dataElm.value\" \r\n                  placeholder=\"\" />\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n      </ng-container>\r\n      <ng-container *ngSwitchCase=\"'note'\">\r\n      </ng-container>\r\n      <ng-container *ngSwitchDefault>\r\n        <div class=\"tag-name\">{{dataElm.name}}</div>\r\n        <div style=\"text-align: center;\">\r\n          <div style=\"display: inline-block;\">\r\n            <div class=\"tag-value-box\">\r\n              <div class=\"hidden-spacer\" style=\"font-weight: bold;\">{{dataElm.value}}</div>\r\n              <input class=\"input tag-value\" size=\"1\" [(ngModel)]=\"dataElm.value\" placeholder=\"\" />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </ng-container>\r\n    </ng-container>\r\n  </div>\r\n</ng-template>\r\n</div> <!-- end of .controller-right -->\r\n\r\n</div> <!-- end of .remote-controller-wrapper -->\r\n","import { EventSystem } from '../system';\r\nimport { ResettableTimeout } from '../system/util/resettable-timeout';\r\nimport { ImageContext, ImageFile, ImageState } from './image-file';\r\n\r\nexport type CatalogItem = { readonly identifier: string, readonly state: number };\r\n\r\nexport class ImageStorage {\r\n  private static _instance: ImageStorage\r\n  static get instance(): ImageStorage {\r\n    if (!ImageStorage._instance) ImageStorage._instance = new ImageStorage();\r\n    return ImageStorage._instance;\r\n  }\r\n\r\n  private imageHash: { [identifier: string]: ImageFile } = {};\r\n\r\n  get images(): ImageFile[] {\r\n    let images: ImageFile[] = [];\r\n    for (let identifier in this.imageHash) {\r\n      images.push(this.imageHash[identifier]);\r\n    }\r\n    return images;\r\n  }\r\n\r\n  private lazyTimer: ResettableTimeout;\r\n\r\n  private constructor() {\r\n    console.log('ImageStorage ready...');\r\n  }\r\n\r\n  private destroy() {\r\n    for (let identifier in this.imageHash) {\r\n      this.delete(identifier);\r\n    }\r\n  }\r\n\r\n  async addAsync(file: File): Promise<ImageFile>\r\n  async addAsync(blob: Blob): Promise<ImageFile>\r\n  async addAsync(arg: any): Promise<ImageFile> {\r\n    let image: ImageFile = await ImageFile.createAsync(arg);\r\n\r\n    return this._add(image);\r\n  }\r\n\r\n  add(url: string): ImageFile\r\n  add(image: ImageFile): ImageFile\r\n  add(context: ImageContext): ImageFile\r\n  add(arg: any): ImageFile {\r\n    let image: ImageFile;\r\n    if (typeof arg === 'string') {\r\n      image = ImageFile.create(arg);\r\n    } else if (arg instanceof ImageFile) {\r\n      image = arg;\r\n    } else {\r\n      if (this.update(arg)) return this.imageHash[arg.identifier];\r\n      image = ImageFile.create(arg);\r\n    }\r\n    return this._add(image);\r\n  }\r\n\r\n  private _add(image: ImageFile): ImageFile {\r\n    if (ImageState.COMPLETE <= image.state) this.lazySynchronize(100);\r\n    if (this.update(image)) return this.imageHash[image.identifier];\r\n    this.imageHash[image.identifier] = image;\r\n    console.log('add Image: ' + image.identifier);\r\n    return image;\r\n  }\r\n\r\n  private update(image: ImageFile): boolean\r\n  private update(image: ImageContext): boolean\r\n  private update(image: any): boolean {\r\n    let context: ImageContext;\r\n    if (image instanceof ImageFile) {\r\n      context = image.toContext();\r\n    } else {\r\n      context = image;\r\n    }\r\n    let updatingImage: ImageFile = this.imageHash[image.identifier];\r\n    if (updatingImage) {\r\n      updatingImage.apply(image);\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  delete(identifier: string): boolean {\r\n    let deleteImage: ImageFile = this.imageHash[identifier];\r\n    if (deleteImage) {\r\n      deleteImage.destroy();\r\n      delete this.imageHash[identifier];\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  get(identifier: string): ImageFile {\r\n    let image: ImageFile = this.imageHash[identifier];\r\n    if (image) return image;\r\n    return null;\r\n  }\r\n\r\n  synchronize(peer?: string) {\r\n    if (this.lazyTimer) this.lazyTimer.stop();\r\n    EventSystem.call('SYNCHRONIZE_FILE_LIST', this.getCatalog(), peer);\r\n  }\r\n\r\n  lazySynchronize(ms: number, peer?: string) {\r\n    if (this.lazyTimer == null) this.lazyTimer = new ResettableTimeout(() => this.synchronize(peer), ms);\r\n    this.lazyTimer.reset(ms);\r\n  }\r\n\r\n  getCatalog(): CatalogItem[] {\r\n    let catalog: CatalogItem[] = [];\r\n    for (let image of this.images) {\r\n      if (ImageState.COMPLETE <= image.state) {\r\n        catalog.push({ identifier: image.identifier, state: image.state });\r\n      }\r\n    }\r\n    return catalog;\r\n  }\r\n}\r\n","import Loader from 'bcdice/lib/loader/loader';\r\nimport GameSystemClass from 'bcdice/lib/game_system';\r\nimport { GameSystemInfo } from 'bcdice/lib/bcdice/game_system_list.json';\r\n\r\nimport { ChatMessage, ChatMessageContext } from './chat-message';\r\nimport { ChatTab } from './chat-tab';\r\nimport { SyncObject } from './core/synchronize-object/decorator';\r\nimport { GameObject } from './core/synchronize-object/game-object';\r\nimport { GameCharacter } from './game-character';\r\nimport { DataElement } from './data-element';\r\n\r\nimport { ObjectStore } from './core/synchronize-object/object-store';\r\nimport { EventSystem } from './core/system';\r\nimport { PromiseQueue } from './core/system/util/promise-queue';\r\nimport { StringUtil } from './core/system/util/string-util';\r\nimport { DiceTable } from './dice-table';\r\nimport { DiceTablePalette } from './chat-palette';\r\n\r\nimport { PeerCursor } from './peer-cursor';\r\n\r\nimport KariDice from './KariDice';\r\nimport IdoDice from './IdoDice';\r\n// 追加カスタムダイスは下記追記\r\n// import *** from './***';\r\n\r\n\r\ninterface ResourceEdit {\r\n  target: string;\r\n  targetHalfWidth: string;\r\n  operator: string;\r\n  diceResult: string;\r\n  command: string;\r\n  isDiceRoll: boolean;\r\n\r\n  hitName: string;\r\n  calcAns: number;\r\n  detaElm: DataElement;\r\n}\r\n\r\ninterface DiceRollResult {\r\n  result: string;\r\n  isSecret: boolean;\r\n}\r\n\r\n// bcdice-js custom loader class\r\nclass WebpackLoader extends Loader {\r\n  async dynamicImport(className: string): Promise<void> {\r\n    await import(\r\n      /* webpackChunkName: \"[request]\"  */\r\n      /* webpackInclude: /\\.js$/ */\r\n      `bcdice/lib/bcdice/game_system/${className}`\r\n    );\r\n  }\r\n}\r\n\r\n@SyncObject('dice-bot')\r\nexport class DiceBot extends GameObject {\r\n  private static loader: WebpackLoader = new WebpackLoader();\r\n  private static queue: PromiseQueue = new PromiseQueue('DiceBotQueue');\r\n\r\n  static diceBotInfos: GameSystemInfo[] = DiceBot.listAvailableGameSystems().sort(\r\n    (a, b) => {\r\n      const aKey: string = a.sortKey;\r\n      const bKey: string = b.sortKey;\r\n      if (aKey < bKey) {\r\n        return -1;\r\n      }\r\n      if (aKey > bKey) {\r\n        return 1;\r\n      }\r\n      return 0;\r\n    }\r\n  );\r\n\r\n  static getCustomGameSystemInfo(ststem: GameSystemClass): GameSystemInfo{\r\n    const gameSystemInfo: GameSystemInfo = {\r\n      id: ststem.ID,\r\n      name: ststem.NAME,\r\n      className: ststem.ID,\r\n      sortKey: ststem.SORT_KEY\r\n    };\r\n    return gameSystemInfo;\r\n  }\r\n\r\n  static listAvailableGameSystems(): GameSystemInfo[]{\r\n    const diceBotInfos: GameSystemInfo[] = DiceBot.loader.listAvailableGameSystems();\r\n    diceBotInfos.push( this.getCustomGameSystemInfo( KariDice as GameSystemClass ));\r\n    diceBotInfos.push( this.getCustomGameSystemInfo( IdoDice as GameSystemClass ));\r\n    // 追加カスタムダイスは下記追記\r\n    // diceBotInfos.push( getCustomGameSystemInfo( *** ));\r\n    return diceBotInfos;\r\n  }\r\n\r\n  static diceRollAsync(message: string, gameSystem: GameSystemClass): Promise<DiceRollResult> {\r\n    return DiceBot.queue.add(() => {\r\n      try {\r\n        const result = gameSystem.eval(message);\r\n        if (result) {\r\n          console.log('diceRoll!!!', result.text);\r\n          console.log('isSecret!!!', result.secret);\r\n          return {\r\n            result: `${gameSystem.ID} : ${result.text}`,\r\n            isSecret: result.secret,\r\n          };\r\n        }\r\n      } catch (e) {\r\n        console.error(e);\r\n      }\r\n      return { result: '', isSecret: false };\r\n    });\r\n  }\r\n/*\r\n  static getDiceBotId(gameType: string): Promise<string> {\r\n    return DiceBot.queue.add(async (resolve, reject) => {\r\n      let id = '';\r\n      try {\r\n        const gameSystem = await DiceBot.loadGameSystemAsync(gameType);\r\n        id = gameSystem.ID;\r\n      } catch (e) {\r\n        console.error(e);\r\n      }\r\n      resolve(id);\r\n      return;\r\n    });\r\n  }\r\n*/\r\n  static getHelpMessage(gameType: string): Promise<string> {\r\n    return DiceBot.queue.add(async (resolve, reject) => {\r\n      let help = '';\r\n      try {\r\n        const gameSystem = await DiceBot.loadGameSystemAsync(gameType);\r\n        help = gameSystem.HELP_MESSAGE;\r\n      } catch (e) {\r\n        console.error(e);\r\n      }\r\n      resolve(help);\r\n      return;\r\n    });\r\n  }\r\n\r\n  static loadCustomGameSystem(gameType: string): any{\r\n    if ( gameType == 'KariDice') { return KariDice; }\r\n    if ( gameType == 'IdoDice') { return IdoDice; }\r\n    // 追加カスタムダイスは下記追記\r\n    // if( gameType == '***') return ***;\r\n\r\n    return null;\r\n  }\r\n\r\n  static loadGameSystemAsync(gameType: string): Promise<any> {\r\n\r\n    const id = this.diceBotInfos.some((info) => info.id === gameType)\r\n      ? gameType\r\n      : 'DiceBot';\r\n\r\n    return new Promise( (resolve) => {\r\n      let system = this.loadCustomGameSystem( gameType );\r\n      if ( !system ){\r\n        system = DiceBot.loader.dynamicLoad(id);\r\n      }\r\n      resolve( system );\r\n    });\r\n  }\r\n\r\n  getDiceTables(): DiceTable[] {\r\n    return ObjectStore.instance.getObjects(DiceTable);\r\n  }\r\n\r\n  // 繰り返しコマンドを除去し、sより後ろがCOMMAND_PATTERNにマッチするか確認\r\n  checkSecretDiceCommand(gameSystem: GameSystemClass, chatText: string): boolean {\r\n    const text: string = StringUtil.toHalfWidth(chatText).toLowerCase();\r\n    const nonRepeatText = text.replace(/^(\\d+)?\\s+/, 'repeat1 ').replace(/^x(\\d+)?\\s+/, 'repeat1 ').replace(/repeat(\\d+)?\\s+/, '');\r\n    const regArray = /^s(.*)?/ig.exec(nonRepeatText);\r\n    console.log('checkSecretDiceCommand:' + chatText + ' gameSystem.name:' + gameSystem.name);\r\n\r\n    if ( gameSystem.COMMAND_PATTERN ){\r\n      return regArray && gameSystem.COMMAND_PATTERN.test(regArray[1]);\r\n    }\r\n    console.log('checkSecretDiceCommand:' + false);\r\n    return false;\r\n  }\r\n\r\n  // GameObject Lifecycle\r\n  onStoreAdded() {\r\n    super.onStoreAdded();\r\n    EventSystem.register(this)\r\n      .on('SEND_MESSAGE', async event => {\r\n        const chatMessage = ObjectStore.instance.get<ChatMessage>(event.data.messageIdentifier);\r\n        if (!chatMessage || !chatMessage.isSendFromSelf || chatMessage.isSystem) { return; }\r\n\r\n        const text: string = StringUtil.toHalfWidth(chatMessage.text);\r\n        const gameType: string = chatMessage.tags ? chatMessage.tags[0] : '';\r\n\r\n        try {\r\n          const regArray = /^((\\d+)?\\s+)?(.*)?/ig.exec(text);\r\n          const repeat: number = (regArray[2] != null) ? Number(regArray[2]) : 1;\r\n          let rollText: string = (regArray[3] != null) ? regArray[3] : text;\r\n          console.log('SEND_MESSAGE gameType :' + gameType);\r\n          const gameSystem = await DiceBot.loadGameSystemAsync(gameType);\r\n          if ( gameSystem.COMMAND_PATTERN ){\r\n            if ( !gameSystem.COMMAND_PATTERN.test(rollText)) { return; }\r\n          }\r\n          if (!rollText || repeat < 1 ) { return; }\r\n\r\n          // 繰り返しコマンドに変換\r\n          if (repeat > 1) {\r\n            rollText = `x${repeat} ${rollText}`;\r\n          }\r\n\r\n          const rollResult = await DiceBot.diceRollAsync(rollText, gameSystem);\r\n          if (!rollResult.result) { return; }\r\n\r\n          rollResult.result = rollResult.result.replace(/\\n?(#\\d+)\\n/ig, '$1 '); // 繰り返しロールを詰める\r\n\r\n          this.sendResultMessage(rollResult, chatMessage);\r\n        } catch (e) {\r\n          console.error(e);\r\n        }\r\n        return;\r\n      })\r\n      .on('DICE_TABLE_MESSAGE', async event => {\r\n        console.log('ダイス表判定');\r\n\r\n        const chatMessage = ObjectStore.instance.get<ChatMessage>(event.data.messageIdentifier);\r\n        if (!chatMessage || !chatMessage.isSendFromSelf || chatMessage.isSystem) { return; }\r\n\r\n        const text: string = StringUtil.toHalfWidth(chatMessage.text);\r\n        const splitText = text.split(/\\s/);\r\n\r\n        const diceTable = this.getDiceTables() ;\r\n        if ( !diceTable ) {return; }\r\n        if ( splitText.length == 0 ) {return; }\r\n\r\n        console.log('コマンド候補:' + splitText[0] );\r\n\r\n        const rollDice = null ;\r\n        let rollTable = null;\r\n        for ( const table of diceTable){\r\n          if ( table.command == splitText[0] ){\r\n            rollTable = table;\r\n          }\r\n        }\r\n        if ( !rollTable ) { return; }\r\n\r\n        try {\r\n          const regArray = /^((\\d+)?\\s+)?([^\\s]*)?/ig.exec(rollTable.dice);\r\n          const repeat: number = (regArray[2] != null) ? Number(regArray[2]) : 1;\r\n          const rollText: string = (regArray[3] != null) ? regArray[3] : text;\r\n          const finalResult: DiceRollResult = { result: '', isSecret: false };\r\n          for (let i = 0; i < repeat && i < 32; i++) {\r\n            const gameSystem = await DiceBot.loadGameSystemAsync(rollTable.diceTablePalette.dicebot);\r\n            const rollResult = await DiceBot.diceRollAsync(rollText, gameSystem);\r\n            if (rollResult.result.length < 1) { break; }\r\n\r\n            finalResult.result += rollResult.result;\r\n            finalResult.isSecret = finalResult.isSecret || rollResult.isSecret;\r\n            if (1 < repeat) { finalResult.result += ` #${i + 1}`; }\r\n          }\r\n\r\n          const rolledDiceNum = finalResult.result.match(/\\d+$/);\r\n          let tableAns = 'ダイス目の番号が表にありません';\r\n          if ( rolledDiceNum ){\r\n            console.log('rolledDiceNum:' + rolledDiceNum[0] );\r\n\r\n            const tablePalette = rollTable.diceTablePalette.getPalette();\r\n            console.log('tablePalette:' + tablePalette );\r\n            for ( const i in tablePalette ){\r\n              console.log('oneTable:' + tablePalette[i] );\r\n\r\n              const splitOneTable = tablePalette[i].split(/[:：,，\\s]/);\r\n              if ( splitOneTable[0] == rolledDiceNum[0] ){\r\n                tableAns = tablePalette[i];\r\n              }\r\n            }\r\n\r\n          }\r\n          finalResult.result += '\\n' + tableAns;\r\n          this.sendResultMessage(finalResult , chatMessage);\r\n\r\n        } catch (e) {\r\n          console.error(e);\r\n        }\r\n        return;\r\n      })\r\n      .on('RESOURCE_EDIT_MESSAGE', async event => {\r\n        const chatMessage = ObjectStore.instance.get<ChatMessage>(event.data.messageIdentifier);\r\n        if (!chatMessage || !chatMessage.isSendFromSelf || chatMessage.isSystem) { return; }\r\n\r\n        const text: string = StringUtil.toHalfWidth(chatMessage.text);\r\n        const gameType: string = chatMessage.tags ? chatMessage.tags[0] : '';\r\n\r\n        this.checkResourceEditCommand( chatMessage );\r\n\r\n\r\n        return;\r\n      })\r\n\r\n      // ダイスからぶりによる擬似的なダイス交換を行う\r\n\r\n      // 注※\r\n      // 空振り処理は実装しているが\r\n      // 数学上　実行によって実行後の判定の成功率やダイスの偏りに影響は及ぼさない\r\n\r\n      // コードを実装した円柱は、採用しているユドナリウムリリィのダイスの乱数発生器にχ二乗検定による統計的検証は行い、\r\n      // 乱数性質に問題がないことは確認、理解した上で作っている\r\n\r\n      // あくまで\r\n      // 『ダイスを交換したり　悪い出目が偶然続いたときに　ダイスを空振りしてお祓いをしたくなる　今日のダイスは偏っている気がする』など\r\n      // 人間の心理をターゲートとしたコマンドである\r\n\r\n      // このコマンドでダイスロール時に表示されるアイコンが変更されるがこれは視覚上演出であり\r\n      // 空振りした回数やダイスの乱数とは無関係に差し替えている\r\n\r\n      // 別のオンラインセッションツールの「どどんとふむせる」のまそっぷ機能のオマージュであり(細部実装は異なる)\r\n\r\n      // 性質上　2021年エイプリールフールコマンドとして実装した\r\n      // 実装意図はユーモアであることを記しておく\r\n\r\n      .on('APRIL_MESSAGE', async event => {\r\n//        console.log('えいぷりる実行判定');\r\n\r\n        const chatMessage = ObjectStore.instance.get<ChatMessage>(event.data.messageIdentifier);\r\n        if (!chatMessage || !chatMessage.isSendFromSelf || chatMessage.isSystem) { return; }\r\n\r\n        const text: string = StringUtil.toHalfWidth(chatMessage.text);\r\n        const splitText = text.split(/\\s/);\r\n        const gameSystem = await DiceBot.loadGameSystemAsync(chatMessage.tags ? chatMessage.tags[0] : '');\r\n\r\n        const diceTable = this.getDiceTables() ;\r\n        if ( !diceTable ) {return; }\r\n        if ( splitText.length == 0 ) {return; }\r\n\r\n        if ( splitText[0] == '#まそっぷ' || splitText[0] == '#エイプリル'){\r\n          setTimeout(() => { this.alertAprilMessage(chatMessage); }, 10);\r\n          return;\r\n        }\r\n        if ( splitText[0] != '#えいぷりる') { return; }\r\n\r\n        console.log('えいぷりる実行:' + splitText[0] + ':' + splitText[1] + ':' + splitText.length);\r\n\r\n        let diceType = '2d6';\r\n        let rollDiceType = 'd6';\r\n\r\n        if ( splitText.length >= 2){\r\n          const chkType = splitText[1].toLowerCase();\r\n          if ( chkType == '1d4' || chkType == '4')       {diceType = '1d4';  rollDiceType = 'd4'; }\r\n          if ( chkType == '1d6' || chkType == '6')       {diceType = '1d6';  rollDiceType = 'd6'; }\r\n          if ( chkType == '2d6')                         {diceType = '2d6';  rollDiceType = 'd6'; }\r\n          if ( chkType == '1d8'  || chkType == '8')      {diceType = '1d8';  rollDiceType = 'd8'; }\r\n          if ( chkType == '1d10'  || chkType == '10')    {diceType = '1d10'; rollDiceType = 'd10'; }\r\n          if ( chkType == '1d12'  || chkType == '12')    {diceType = '1d12'; rollDiceType = 'd12'; }\r\n          if ( chkType == '1d20'  || chkType == '20')    {diceType = '1d20'; rollDiceType = 'd20'; }\r\n          if ( chkType == '1d100'  || chkType == '100')  {diceType = '1d100'; rollDiceType = 'd100'; }\r\n          if ( chkType == '0' ) { diceType = ''; }\r\n        }\r\n\r\n        console.log('えいぷりる ダイスタイプ:' + diceType);\r\n\r\n        const nowDiceImageIndex = PeerCursor.myCursor.diceImageIndex;\r\n        let newDiceImageIndex = 0;\r\n\r\n        const imageIndexMax = 3;\r\n        if ( nowDiceImageIndex < 0){// 画像のランダム決定は標準乱数つかう\r\n          newDiceImageIndex = Math.floor(Math.random() * ( imageIndexMax + 1) );\r\n        }else{\r\n          newDiceImageIndex = Math.floor(Math.random() * ( imageIndexMax ) );\r\n          if ( nowDiceImageIndex <= newDiceImageIndex ) {\r\n            newDiceImageIndex ++;\r\n          }\r\n        }\r\n\r\n        PeerCursor.myCursor.diceImageType = diceType;\r\n        if ( diceType == '' ){\r\n          PeerCursor.myCursor.diceImageIndex = -1;\r\n          setTimeout(() => { this.unDispDiceAprilMessage(chatMessage); }, 10);\r\n          return;\r\n        }else{\r\n          PeerCursor.myCursor.diceImageIndex = newDiceImageIndex;\r\n        }\r\n//        console.log('えいぷりる ダイスImage:' + PeerCursor.myCursor.diceImageIdentifier);\r\n\r\n        const changeFate0 = 100;\r\n\r\n        let changeFate1 = Math.floor(Math.random() * 100) + 1; // 一度のロール量上限100による\r\n        if ( changeFate1 < 1) { changeFate1 = 1; }\r\n        if ( changeFate1 > 100) { changeFate1 = 100; }\r\n\r\n        let changeFate2 = Math.floor(Math.random() * 100) + 1; // 一度のロール量上限100による\r\n        if ( changeFate2 < 1) { changeFate2 = 1; }\r\n        if ( changeFate2 > 100) { changeFate2 = 100; }\r\n\r\n        let aprilRollDice = '';\r\n\r\n        if ( diceType == '2d6' ){\r\n          aprilRollDice = changeFate0 + rollDiceType + '+' + changeFate0 + rollDiceType + '+' +\r\n                              changeFate1 + rollDiceType + '+' + changeFate1 + rollDiceType + '+' +\r\n                              changeFate2 + rollDiceType + '+' + changeFate2 + rollDiceType ;\r\n        }else{\r\n          aprilRollDice = changeFate0 + rollDiceType + '+' + changeFate1 + rollDiceType + '+' + changeFate2 + rollDiceType ;\r\n        }\r\n        try {\r\n          const regArray = /^((\\d+)?\\s+)?([^\\s]*)?/ig.exec( aprilRollDice );\r\n          const rollText: string = (regArray[3] != null) ? regArray[3] : text;\r\n\r\n          const rollResult = await DiceBot.diceRollAsync(rollText, gameSystem);\r\n          if (!rollResult.result) { return; }\r\n\r\n          this.sendAprilMessage(rollResult, changeFate0 + changeFate1 + changeFate2 , chatMessage);\r\n        } catch (e) {\r\n          console.error(e);\r\n        }\r\n\r\n        return;\r\n      });\r\n  }\r\n\r\n  private alertAprilMessage( originalMessage: ChatMessage) {\r\n    const text = '「ちゃんと『#えいぷりる』ってよんでください！ダイス運下げますよっ！？」';\r\n\r\n    const aprilMessage: ChatMessageContext = {\r\n      identifier: '',\r\n      tabIdentifier: originalMessage.tabIdentifier,\r\n      originFrom: originalMessage.from,\r\n      from: 'System',\r\n      timestamp: originalMessage.timestamp + 1,\r\n      imageIdentifier: 'april[01]',\r\n      tag: 'system',\r\n      name: '<えいぷりる>' ,\r\n      text,\r\n      messColor: originalMessage.messColor,\r\n      imagePos: originalMessage.imagePos ? originalMessage.imagePos : null\r\n    };\r\n\r\n    const chatTab = ObjectStore.instance.get<ChatTab>(originalMessage.tabIdentifier);\r\n    if (chatTab) { chatTab.addMessage(aprilMessage); }\r\n  }\r\n\r\n\r\n  private unDispDiceAprilMessage( originalMessage: ChatMessage) {\r\n    const text = 'ダイス画像をデフォルト(非表示)にしました';\r\n\r\n    const aprilMessage: ChatMessageContext = {\r\n      identifier: '',\r\n      tabIdentifier: originalMessage.tabIdentifier,\r\n      originFrom: originalMessage.from,\r\n      from: 'System',\r\n      timestamp: originalMessage.timestamp + 1,\r\n      imageIdentifier: 'april[00]',\r\n      tag: 'system',\r\n      name: '<えいぷりる>' ,\r\n      text,\r\n      messColor: originalMessage.messColor\r\n    };\r\n\r\n    const chatTab = ObjectStore.instance.get<ChatTab>(originalMessage.tabIdentifier);\r\n    if (chatTab) { chatTab.addMessage(aprilMessage); }\r\n  }\r\n\r\n  private sendAprilMessage(rollResult: DiceRollResult, roollNum: number , originalMessage: ChatMessage) {\r\n    const result: string = rollResult.result;\r\n    const isSecret: boolean = rollResult.isSecret;\r\n\r\n    if (result.length < 1) { return; }\r\n    console.log('result.length:' + result.length);\r\n\r\n    const totalFate = result.match(/\\d+$/);\r\n    const text = '「まそっぷ！」えいぷりるは炎の剣で ' + roollNum + ' 連続でダイスを突いた → ' + totalFate + ' 運命が変わったかもしれない';\r\n\r\n    const diceBotMessage: ChatMessageContext = {\r\n      identifier: '',\r\n      tabIdentifier: originalMessage.tabIdentifier,\r\n      originFrom: originalMessage.from,\r\n      from: 'System-BCDice',\r\n      timestamp: originalMessage.timestamp + 1,\r\n      imageIdentifier: 'april[00]',\r\n      tag: 'system',\r\n      name: '<BCDice：' + 'えいぷりる' + '>' ,\r\n      text,\r\n      messColor: originalMessage.messColor,\r\n      imagePos: originalMessage.imagePos ? originalMessage.imagePos : null\r\n    };\r\n\r\n    if (originalMessage.to != null && 0 < originalMessage.to.length) {\r\n      diceBotMessage.to = originalMessage.to;\r\n      if (originalMessage.to.indexOf(originalMessage.from) < 0) {\r\n        diceBotMessage.to += ' ' + originalMessage.from;\r\n      }\r\n    }\r\n    const chatTab = ObjectStore.instance.get<ChatTab>(originalMessage.tabIdentifier);\r\n    if (chatTab) { chatTab.addMessage(diceBotMessage); }\r\n  }\r\n\r\n  private checkResourceEditCommand( originalMessage: ChatMessage ){\r\n    const splitText = originalMessage.text.split(/\\s/);\r\n    let result = null;\r\n\r\n    const allEditList: ResourceEdit[] = null;\r\n\r\n    console.log( 'checkResourceEditCommand' + splitText);\r\n\r\n    for (const chktxt of splitText) {\r\n      console.log('chktxt' + chktxt);\r\n      if (chktxt.match(/^[:：].+/gi)) {\r\n        console.log( 'checkResourceEditCommand 2');\r\n\r\n        result = chktxt.match(/[:：][^:：]+/gi);\r\n        if ( result ){\r\n          this.resourceEditProcess( result , originalMessage );\r\n        }\r\n      }\r\n    }\r\n\r\n  }\r\n\r\n  async resourceEditProcess( result: string[] , originalMessage: ChatMessage){\r\n\r\n    const object = ObjectStore.instance.get<GameCharacter>(originalMessage.sendFrom);\r\n    if (object instanceof GameCharacter) {\r\n      console.log( 'object.location.name' + object.location.name );\r\n    }else{\r\n      console.log('キャラクタじゃないので操作できません');\r\n      return;\r\n    }\r\n\r\n    const allEditList: ResourceEdit[] = [];\r\n    let data: DataElement ;\r\n    const gameSystem = await DiceBot.loadGameSystemAsync(originalMessage.tags ? originalMessage.tags[0] : '');\r\n\r\n\r\n    for ( const oneText of result ){\r\n      const oneResourceEdit: ResourceEdit = {\r\n        target: '',\r\n        targetHalfWidth: '',\r\n        operator: '',\r\n        diceResult: '',\r\n        command: '',\r\n        isDiceRoll: false,\r\n        hitName: '',\r\n        calcAns: 0,\r\n        detaElm : null\r\n      };\r\n\r\n      const replaceText = oneText.replace('：', ':').replace('＋', '+').replace('－', '-').replace('＝', '=');\r\n\r\n      console.log('リソース変更：' + replaceText);\r\n      const resourceEditRegExp = /[:]([^-+=]+)([-+=])(.+)/;\r\n      const resourceEditResult = replaceText.match(resourceEditRegExp);\r\n      if (!resourceEditResult) { return ; }\r\n\r\n      const reg1: string = resourceEditResult[1];\r\n      const reg2: string = resourceEditResult[2];\r\n      const reg3: string = resourceEditResult[3];\r\n\r\n      console.log( reg1 + '/' + reg2 + '/' + reg3 );\r\n\r\n      oneResourceEdit.target = reg1;                                                       // 操作対象検索文字タイプ生値\r\n      oneResourceEdit.targetHalfWidth = StringUtil.toHalfWidth(reg1);                    // 操作対象検索文字半角化\r\n      oneResourceEdit.operator = reg2;                                                 // 演算符号\r\n      const commandPrefix = reg2 == '-' ? '-' : '';\r\n      oneResourceEdit.command = commandPrefix + StringUtil.toHalfWidth(reg3) + '+(1d1-1)';\r\n      // 操作量C()とダイスロールが必要な場合分けをしないために+(1d1-1)を付加してダイスロール命令にしている\r\n\r\n      if (StringUtil.toHalfWidth(reg3).match(/\\d[dD]/)) {\r\n        oneResourceEdit.isDiceRoll = true;\r\n      } else {\r\n        oneResourceEdit.isDiceRoll = false;\r\n      }\r\n\r\n      // 操作対象検索\r\n      data = object.detailDataElement.getFirstElementByName(oneResourceEdit.target);\r\n      if (data) {\r\n        oneResourceEdit.hitName = oneResourceEdit.target;\r\n        oneResourceEdit.detaElm = data;\r\n      } else {\r\n        data =  object.detailDataElement.getFirstElementByName(oneResourceEdit.targetHalfWidth);\r\n        if (data) {\r\n          oneResourceEdit.hitName = oneResourceEdit.targetHalfWidth;\r\n          oneResourceEdit.detaElm = data;\r\n        } else {\r\n          // 検索リソースヒットせず\r\n          return ; // 実行失敗\r\n        }\r\n      }\r\n      console.log('oneResourceEdit.detaElm :V' + oneResourceEdit.detaElm.value + ' cV ' + oneResourceEdit.detaElm.currentValue);\r\n\r\n      // ダイスロール及び四則演算\r\n      try {\r\n        const rollResult = await DiceBot.diceRollAsync(oneResourceEdit.command, gameSystem);\r\n        if (!rollResult.result) { return null; }\r\n\r\n        const splitResult = rollResult.result.split(' ＞ ');\r\n        oneResourceEdit.diceResult = splitResult[splitResult.length - 2].replace(/\\+\\(1\\[1\\]\\-1\\)$/, '');\r\n\r\n        const resultMatch = rollResult.result.match(/([-+]?\\d+)$/); // 計算結果だけ格納\r\n        console.log( 'calcAns:' + resultMatch[1]);\r\n\r\n        oneResourceEdit.calcAns = parseInt(resultMatch[1], 10);\r\n      } catch (e) {\r\n        console.error(e);\r\n      }\r\n      console.log( 'target:' + oneResourceEdit.target + ' operator:' + oneResourceEdit.operator + ' command:' + oneResourceEdit.command + ' ans:' + oneResourceEdit.calcAns);\r\n      allEditList.push( oneResourceEdit );\r\n    }\r\n\r\n    this.resourceEdit( allEditList , originalMessage);\r\n    return;\r\n  }\r\n\r\n  private resourceEdit( allEditList: ResourceEdit[] , originalMessage: ChatMessage){\r\n    let text = '';\r\n    let oldValueS = '';\r\n    const oldValue = 0;\r\n\r\n    let calc = 0;\r\n    let isDiceRoll = false;\r\n    for ( const edit of allEditList) {\r\n      if (edit.detaElm.type == 'numberResource') {\r\n        oldValueS = (edit.detaElm.currentValue as string) ;\r\n\r\n        if (edit.operator == '=') {\r\n          calc = edit.calcAns;\r\n        } else {\r\n          calc = parseInt(oldValueS, 10) + edit.calcAns;\r\n        }\r\n        edit.detaElm.currentValue = calc;\r\n\r\n      } else if (edit.detaElm.type != 'note') {\r\n        oldValueS = (edit.detaElm.value as string) ;\r\n\r\n        if (edit.operator == '=') {\r\n          calc = edit.calcAns;\r\n        } else {\r\n          calc = parseInt(oldValueS, 10) + edit.calcAns;\r\n        }\r\n        edit.detaElm.value = calc;\r\n      }\r\n      /*\r\n      let textoperator;\r\n      if( edit.operator == '='){\r\n        textoperator = ' ＞ ';\r\n      }else{\r\n        textoperator = edit.operator;\r\n      }\r\n      */\r\n      const operatorText = edit.operator == '-' ? '' : edit.operator;\r\n      text += edit.hitName + ':' + oldValueS + operatorText + edit.diceResult + '＞' + calc + '    ';\r\n      if ( edit.isDiceRoll ) { isDiceRoll = true; }\r\n    }\r\n    text = text.replace(/\\s\\s\\s\\s$/, '');\r\n\r\n    console.log( 'text:' + text);\r\n    let fromText;\r\n    let nameText;\r\n    if ( isDiceRoll ){\r\n      fromText = 'System-BCDice';\r\n      nameText = '<BCDice：' + originalMessage.name + '>';\r\n    }else{\r\n      fromText = 'System';\r\n      nameText = originalMessage.name;\r\n    }\r\n    const resourceMessage: ChatMessageContext = {\r\n      identifier: '',\r\n      tabIdentifier: originalMessage.tabIdentifier,\r\n      originFrom: originalMessage.from,\r\n      from: fromText,\r\n      timestamp: originalMessage.timestamp + 2,\r\n      imageIdentifier: PeerCursor.myCursor.diceImageIdentifier ,\r\n      tag: 'system',\r\n      name: nameText,\r\n      text,\r\n      messColor: originalMessage.messColor\r\n    };\r\n\r\n    const chatTab = ObjectStore.instance.get<ChatTab>(originalMessage.tabIdentifier);\r\n    if (chatTab) { chatTab.addMessage(resourceMessage); }\r\n\r\n  }\r\n\r\n  private sendResultMessage(rollResult: DiceRollResult, originalMessage: ChatMessage) {\r\n    let result: string = rollResult.result;\r\n    const isSecret: boolean = rollResult.isSecret;\r\n\r\n    if (result.length < 1) { return; }\r\n    console.log('result.length:' + result.length);\r\n    result = result.replace(/[＞]/g, s => '→').trim();\r\n\r\n    const diceBotMessage: ChatMessageContext = {\r\n      identifier: '',\r\n      tabIdentifier: originalMessage.tabIdentifier,\r\n      originFrom: originalMessage.from,\r\n      from: 'System-BCDice',\r\n      timestamp: originalMessage.timestamp + 1,\r\n      imageIdentifier: PeerCursor.myCursor.diceImageIdentifier ,\r\n      tag: isSecret ? 'system secret' : 'system',\r\n      name: isSecret ? '<Secret-BCDice：' + originalMessage.name + '>' : '<BCDice：' + originalMessage.name + '>',\r\n      text: result,\r\n      messColor: originalMessage.messColor\r\n    };\r\n\r\n    if (originalMessage.to != null && 0 < originalMessage.to.length) {\r\n      diceBotMessage.to = originalMessage.to;\r\n      if (originalMessage.to.indexOf(originalMessage.from) < 0) {\r\n        diceBotMessage.to += ' ' + originalMessage.from;\r\n      }\r\n    }\r\n    const chatTab = ObjectStore.instance.get<ChatTab>(originalMessage.tabIdentifier);\r\n    if (chatTab) { chatTab.addMessage(diceBotMessage); }\r\n  }\r\n\r\n  // GameObject Lifecycle\r\n  onStoreRemoved() {\r\n    super.onStoreRemoved();\r\n    EventSystem.unregister(this);\r\n  }\r\n\r\n}\r\n","import { animate, keyframes, style, transition, trigger } from '@angular/animations';\r\nimport { AfterViewInit, ChangeDetectionStrategy, Component, Input, OnInit } from '@angular/core';\r\n\r\nimport { ChatMessage } from '@udonarium/chat-message';\r\nimport { ImageFile } from '@udonarium/core/file-storage/image-file';\r\nimport { ChatMessageService } from 'service/chat-message.service';\r\n\r\nimport { ChatTabList } from '@udonarium/chat-tab-list';\r\nimport { ObjectStore } from '@udonarium/core/synchronize-object/object-store';\r\n\r\n@Component({\r\n  selector: 'chat-message',\r\n  templateUrl: './chat-message.component.html',\r\n  styleUrls: ['./chat-message.component.css'],\r\n  animations: [\r\n    trigger('flyInOut', [\r\n      transition('* => active', [\r\n        animate('200ms ease-out', keyframes([\r\n          style({ transform: 'translateX(100px)', opacity: '0', offset: 0 }),\r\n          style({ transform: 'translateX(0)', opacity: '1', offset: 1.0 })\r\n        ]))\r\n      ]),\r\n      transition('void => *', [\r\n        animate('200ms ease-out', keyframes([\r\n          style({ opacity: '0', offset: 0 }),\r\n          style({ opacity: '1', offset: 1.0 })\r\n        ]))\r\n      ])\r\n    ])\r\n  ],\r\n  changeDetection: ChangeDetectionStrategy.Default\r\n})\r\n\r\nexport class ChatMessageComponent implements OnInit, AfterViewInit {\r\n  @Input() chatMessage: ChatMessage;\r\n\r\n  @Input() simpleDispFlagTime: boolean = false;\r\n  @Input() simpleDispFlagUserId: boolean = false;\r\n  @Input() chatSimpleDispFlag: boolean = false;\r\n\r\n  imageFile: ImageFile = ImageFile.Empty;\r\n  animeState: string = 'inactive';\r\n\r\n  get chatTabList(): ChatTabList { return ObjectStore.instance.get<ChatTabList>('ChatTabList'); }\r\n  \r\n  constructor(\r\n    private chatMessageService: ChatMessageService\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    let file: ImageFile = this.chatMessage.image;\r\n    if (file) this.imageFile = file;\r\n    let time = this.chatMessageService.getTime();\r\n    if (time - 10 * 1000 < this.chatMessage.timestamp) this.animeState = 'active';\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n  }\r\n\r\n  discloseMessage() {\r\n    this.chatMessage.tag = this.chatMessage.tag.replace('secret', '');\r\n  }\r\n\r\n  escapeHtml(text) {\r\n    return text.replace(/&/g, \"&amp;\").replace(/</g, \"&lt;\").replace(/>/g, \"&gt;\")\r\n               .replace(/\"/g, \"&quot;\").replace(/'/g, \"&#039;\");\r\n  }\r\n}\r\n","<div class=\"container\">\r\n  <div [@flyInOut]=\"animeState\">\r\n  <ng-container *ngIf=\"!chatSimpleDispFlag\">\r\n    <div class=\"message\" [ngClass]=\"{'direct-message': (chatMessage.isDirect || chatMessage.isSecret), \r\n    'system-message':chatMessage.isSystem, 'dicebot-message': chatMessage.isDicebot}\"\r\n    >\r\n      <div class=\"image\">\r\n      <img *ngIf=\"0 < imageFile?.url?.length\" [src]=\"imageFile?.url | safe: 'resourceUrl'\" />\r\n      </div>\r\n      <div class=\"body\" [ngStyle]=\"{'color': chatMessage.messColor }\">\r\n        <div class=\"title\">\r\n          <span class=\"msg-name\">{{chatMessage.name}}</span>\r\n          <span class='tip msg-from'>{{chatMessage.from}}</span>\r\n          <span class='tip msg-timestamp'>{{chatMessage.timestamp | date:'y/M/d H:mm'}}</span>\r\n        </div>\r\n        <div class=\"text msg-text\">\r\n          <ng-container *ngIf=\"!chatMessage.isSecret || chatMessage.isSendFromSelf; then visible; else secret\"></ng-container>\r\n        </div>\r\n      </div>\r\n\r\n    </div>\r\n  </ng-container>\r\n  <ng-container *ngIf=\"chatSimpleDispFlag\">\r\n    <div class=\"message-small\" [ngClass]=\"{'direct-message': (chatMessage.isDirect || chatMessage.isSecret), \r\n    'system-message':chatMessage.isSystem, 'dicebot-message': chatMessage.isDicebot}\"\r\n    >\r\n      <div class=\"body\" [ngStyle]=\"{'color': chatMessage.messColor }\">\r\n        <span class=\"title\">\r\n          <font class=\"msg-name\">{{chatMessage.name}}</font>：\r\n          <font *ngIf=\"simpleDispFlagUserId\" class='tip msg-from'>{{chatMessage.from}}</font>\r\n          <font *ngIf=\"simpleDispFlagTime\" class='tip msg-timestamp'>{{chatMessage.timestamp | date:'H:mm'}}</font>\r\n          <font class=\"text msg-text\">\r\n            <ng-container *ngIf=\"!chatMessage.isSecret || chatMessage.isSendFromSelf; then visible; else secret\">\r\n            </ng-container>\r\n          </font>\r\n        </span>\r\n      </div>\r\n    </div>\r\n  </ng-container>\r\n  </div>\r\n</div>\r\n<ng-template #visible>\r\n  <span [innerHTML]=\"escapeHtml(chatMessage.text) | linky:{stripPrefix: false}\"></span>\r\n  <button *ngIf=\"chatMessage.isSecret\" (click)=\"discloseMessage()\">公開結果</button>\r\n</ng-template>\r\n<ng-template #secret>\r\n  <span>（暗骰）</span>\r\n</ng-template>\r\n","import { Injectable } from '@angular/core';\r\nimport { ObjectStore } from '@udonarium/core/synchronize-object/object-store';\r\nimport { EventSystem, Network } from '@udonarium/core/system';\r\nimport { StringUtil } from '@udonarium/core/system/util/string-util';\r\nimport { DataElement } from '@udonarium/data-element';\r\nimport { DataSummarySetting, SortOrder } from '@udonarium/data-summary-setting';\r\nimport { GameCharacter } from '@udonarium/game-character';\r\nimport { TabletopObject } from '@udonarium/tabletop-object';\r\n\r\ntype ObjectIdentifier = string;\r\ntype LocationName = string;\r\ntype ElementName = string;\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class GameObjectInventoryService {\r\n  private get summarySetting(): DataSummarySetting { return DataSummarySetting.instance; }\r\n\r\n  get sortTag(): string { return this.summarySetting.sortTag; }\r\n  set sortTag(sortTag: string) { this.summarySetting.sortTag = sortTag; }\r\n  get sortOrder(): SortOrder { return this.summarySetting.sortOrder; }\r\n  set sortOrder(sortOrder: SortOrder) { this.summarySetting.sortOrder = sortOrder; }\r\n  get dataTag(): string { return this.summarySetting.dataTag; }\r\n  set dataTag(dataTag: string) { this.summarySetting.dataTag = dataTag; }\r\n  get dataTags(): string[] { return this.summarySetting.dataTags; }\r\n\r\n  tableInventory: ObjectInventory = new ObjectInventory(object => { return object.location.name === 'table'; });\r\n  commonInventory: ObjectInventory = new ObjectInventory(object => { return !this.isAnyLocation(object.location.name); });\r\n  privateInventory: ObjectInventory = new ObjectInventory(object => { return object.location.name === Network.peerId; });\r\n  graveyardInventory: ObjectInventory = new ObjectInventory(object => { return object.location.name === 'graveyard'; });\r\n\r\n  private locationMap: Map<ObjectIdentifier, LocationName> = new Map();\r\n  private tagNameMap: Map<ObjectIdentifier, ElementName> = new Map();\r\n\r\n  readonly newLineString: string = '/';\r\n  readonly newLineDataElement: DataElement = DataElement.create(this.newLineString);\r\n\r\n  constructor() {\r\n    this.initialize();\r\n  }\r\n\r\n  private initialize() {\r\n    EventSystem.register(this)\r\n      .on('OPEN_NETWORK', event => { this.refresh(); })\r\n      .on('CONNECT_PEER', event => { this.refresh(); })\r\n      .on('DISCONNECT_PEER', event => { this.refresh(); })\r\n      .on('UPDATE_GAME_OBJECT', -1000, event => {\r\n        let object = ObjectStore.instance.get(event.data.identifier);\r\n        if (!object) return;\r\n\r\n        if (object instanceof GameCharacter) {\r\n          let prevLocation = this.locationMap.get(object.identifier);\r\n          if (object.location.name !== prevLocation) {\r\n            this.locationMap.set(object.identifier, object.location.name);\r\n            this.refresh();\r\n          }\r\n        } else if (object instanceof DataElement) {\r\n          if (!this.containsInGameCharacter(object)) return;\r\n\r\n          let prevName = this.tagNameMap.get(object.identifier);\r\n          if ((this.dataTags.includes(prevName) || this.dataTags.includes(object.name)) && object.name !== prevName) {\r\n            this.tagNameMap.set(object.identifier, object.name);\r\n            this.refreshDataElements();\r\n          }\r\n          if (this.sortTag === object.name) {\r\n            this.refreshSort();\r\n          }\r\n          if (0 < object.children.length) {\r\n            this.refreshDataElements();\r\n            this.refreshSort();\r\n          }\r\n          this.callInventoryUpdate();\r\n        } else if (object instanceof DataSummarySetting) {\r\n          this.refreshDataElements();\r\n          this.refreshSort();\r\n          this.callInventoryUpdate();\r\n        }\r\n      })\r\n      .on('DELETE_GAME_OBJECT', 1000, event => {\r\n        this.locationMap.delete(event.data.identifier);\r\n        this.tagNameMap.delete(event.data.identifier);\r\n        this.refresh();\r\n      })\r\n      .on('SYNCHRONIZE_FILE_LIST', event => {\r\n        if (event.isSendFromSelf) this.callInventoryUpdate();\r\n      });\r\n  }\r\n\r\n  private containsInGameCharacter(element: DataElement): boolean {\r\n    let parent = element.parent;\r\n    let aliasName = GameCharacter.aliasName;\r\n    while (parent) {\r\n      if (parent.aliasName === aliasName) return true;\r\n      parent = parent.parent;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  private refresh() {\r\n    this.refreshObjects();\r\n    this.refreshDataElements();\r\n    this.refreshSort();\r\n    this.callInventoryUpdate();\r\n  }\r\n\r\n  private refreshObjects() {\r\n    this.tableInventory.refreshObjects();\r\n    this.commonInventory.refreshObjects();\r\n    this.privateInventory.refreshObjects();\r\n    this.graveyardInventory.refreshObjects();\r\n  }\r\n\r\n  private refreshDataElements() {\r\n    this.tableInventory.refreshDataElements();\r\n    this.commonInventory.refreshDataElements();\r\n    this.privateInventory.refreshDataElements();\r\n    this.graveyardInventory.refreshDataElements();\r\n  }\r\n\r\n  private refreshSort() {\r\n    this.tableInventory.refreshSort();\r\n    this.commonInventory.refreshSort();\r\n    this.privateInventory.refreshSort();\r\n    this.graveyardInventory.refreshSort();\r\n  }\r\n\r\n  private callInventoryUpdate() {\r\n    EventSystem.trigger('UPDATE_INVENTORY', null);\r\n  }\r\n\r\n  private isAnyLocation(location: string): boolean {\r\n    if (location === 'table' || location === Network.peerId || location === 'graveyard') return true;\r\n    for (let conn of Network.peerContexts) {\r\n      if (conn.isOpen && location === conn.peerId) {\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n}\r\n\r\nclass ObjectInventory {\r\n  newLineString: string = '/';\r\n  private newLineDataElement: DataElement = DataElement.create(this.newLineString);\r\n\r\n  private get summarySetting(): DataSummarySetting { return DataSummarySetting.instance; }\r\n\r\n  get sortTag(): string { return this.summarySetting.sortTag; }\r\n  set sortTag(sortTag: string) { this.summarySetting.sortTag = sortTag; }\r\n\r\n  get sortOrder(): SortOrder { return this.summarySetting.sortOrder; }\r\n  set sortOrder(sortOrder: SortOrder) { this.summarySetting.sortOrder = sortOrder; }\r\n\r\n  get dataTag(): string { return this.summarySetting.dataTag; }\r\n  set dataTag(dataTag: string) { this.summarySetting.dataTag = dataTag; }\r\n\r\n  get dataTags(): string[] { return this.summarySetting.dataTags; }\r\n\r\n  private _tabletopObjects: TabletopObject[] = [];\r\n  get tabletopObjects(): TabletopObject[] {\r\n    if (this.needsRefreshObjects) {\r\n      this._tabletopObjects = this.searchTabletopObjects();\r\n      this.needsRefreshObjects = false;\r\n    }\r\n    if (this.needsSort) {\r\n      this._tabletopObjects = this.sortTabletopObjects(this._tabletopObjects);\r\n      this.needsSort = false;\r\n    }\r\n    return this._tabletopObjects;\r\n  }\r\n\r\n  get length(): number {\r\n    if (this.needsRefreshObjects) {\r\n      this._tabletopObjects = this.searchTabletopObjects();\r\n      this.needsRefreshObjects = false;\r\n    }\r\n    return this._tabletopObjects.length;\r\n  }\r\n\r\n  private _dataElementMap: Map<ObjectIdentifier, DataElement[]> = new Map();\r\n  get dataElementMap(): Map<ObjectIdentifier, DataElement[]> {\r\n    if (this.needsRefreshElements) {\r\n      this._dataElementMap.clear();\r\n      let caches = this.tabletopObjects;\r\n      for (let object of caches) {\r\n        if (!object.rootDataElement) continue;\r\n        let elements = this.dataTags.map(tag => tag === this.newLineString ? this.newLineDataElement : object.rootDataElement.getFirstElementByName(tag));\r\n        this._dataElementMap.set(object.identifier, elements);\r\n      }\r\n      this.needsRefreshElements = false;\r\n    }\r\n    return this._dataElementMap;\r\n  }\r\n\r\n  private needsRefreshObjects: boolean = true;\r\n  private needsRefreshElements: boolean = true;\r\n  private needsSort: boolean = true;\r\n\r\n  constructor(\r\n    readonly classifier: (object: TabletopObject) => boolean\r\n  ) { }\r\n\r\n  refreshObjects() {\r\n    this.needsRefreshObjects = true;\r\n  }\r\n\r\n  refreshDataElements() {\r\n    this.needsRefreshElements = true;\r\n  }\r\n\r\n  refreshSort() {\r\n    this.needsSort = true;\r\n  }\r\n\r\n  private searchTabletopObjects(): TabletopObject[] {\r\n    let objects: TabletopObject[] = ObjectStore.instance.getObjects(GameCharacter);\r\n    let caches: TabletopObject[] = [];\r\n    for (let object of objects) {\r\n      if (this.classifier(object)) caches.push(object);\r\n    }\r\n    return caches;\r\n  }\r\n\r\n  private sortTabletopObjects(objects: TabletopObject[]): TabletopObject[] {\r\n    let sortTag = this.sortTag.length ? this.sortTag.trim() : '';\r\n    let sortOrder = this.sortOrder === 'ASC' ? -1 : 1;\r\n    if (sortTag.length < 1) return objects;\r\n\r\n    objects.sort((a, b) => {\r\n      let aElm = a.rootDataElement.getFirstElementByName(sortTag);\r\n      let bElm = b.rootDataElement.getFirstElementByName(sortTag);\r\n      if (!aElm && !bElm) return 0;\r\n      if (!bElm) return -1;\r\n      if (!aElm) return 1;\r\n\r\n      let aValue = this.convertToSortableValue(aElm);\r\n      let bValue = this.convertToSortableValue(bElm);\r\n      if (aValue < bValue) return sortOrder;\r\n      if (aValue > bValue) return sortOrder * -1;\r\n      return 0;\r\n    });\r\n    return objects;\r\n  }\r\n\r\n  private convertToSortableValue(dataElement: DataElement): number | string {\r\n    let value = dataElement.isNumberResource ? dataElement.currentValue : dataElement.value;\r\n    let resultStr = StringUtil.toHalfWidth((value + '').trim());\r\n    let resultNum = +resultStr;\r\n    return Number.isNaN(resultNum) ? resultStr : resultNum;\r\n  }\r\n}\r\n","import { ChatPalette,BuffPalette } from './chat-palette';\r\n\r\nimport { SyncObject, SyncVar } from './core/synchronize-object/decorator';\r\nimport { DataElement } from './data-element';\r\nimport { TabletopObject } from './tabletop-object';\r\n\r\n//import { GameObjectInventoryService } from 'service/game-object-inventory.service';\r\nimport { ObjectStore } from './core/synchronize-object/object-store';\r\n\r\n@SyncObject('character')\r\nexport class GameCharacter extends TabletopObject {\r\n  @SyncVar() rotate: number = 0;\r\n  @SyncVar() roll: number = 0;\r\n\r\n  @SyncVar() hideInventory: boolean = false;\r\n  @SyncVar() nonTalkFlag: boolean = false;\r\n  @SyncVar() overViewWidth: number = 270;\r\n  @SyncVar() overViewMaxHeight: number = 250;\r\n\r\n  @SyncVar() chatColorCode: string[]  = [\"#000000\",\"#FF0000\",\"#0099FF\"];\r\n  @SyncVar() syncDummyCounter: number = 0;\r\n\r\n  _selectedTachieNum:number = 0;\r\n  \r\n  get selectedTachieNum(): number { \r\n    \r\n    if( this._selectedTachieNum > ( this.imageDataElement.children.length - 1) ){\r\n      this._selectedTachieNum = this.imageDataElement.children.length - 1;\r\n    }\r\n    if( this._selectedTachieNum < 0 ){\r\n      this._selectedTachieNum = 0;\r\n    }\r\n   \r\n    return this._selectedTachieNum; \r\n  }\r\n\r\n  set selectedTachieNum(num : number){ \r\n    \r\n    console.log(\"set selectedTachieNum NUM=\" + num +\" len\" + this.imageDataElement.children.length);\r\n    \r\n    if( num > ( this.imageDataElement.children.length - 1 ) ){\r\n      num = this.imageDataElement.children.length - 1;\r\n    }\r\n    if( num < 0 ){\r\n      num = 0;\r\n    }\r\n    this._selectedTachieNum = num\r\n    console.log(\"set selectedTachieNum\" + this._selectedTachieNum);\r\n\r\n  }\r\n\r\n  \r\n  \r\n  get name(): string { return this.getCommonValue('name', ''); }\r\n  get size(): number { return this.getCommonValue('size', 1); }\r\n\r\n  get chatPalette(): ChatPalette {\r\n    for (let child of this.children) {\r\n      if (child instanceof ChatPalette) return child;\r\n    }\r\n    return null;\r\n  }\r\n\r\n  set name(value:string) { this.setCommonValue('name', value); }\r\n\r\n  TestExec() {\r\n    console.log('TestExec');\r\n \r\n  }  \r\n  get remoteController(): BuffPalette {\r\n    for (let child of this.children) {\r\n      if (child instanceof BuffPalette){\r\n        return child;\r\n      } \r\n    }\r\n    return null;\r\n  }\r\n\r\n  static create(name: string, size: number, imageIdentifier: string ): GameCharacter {\r\n    let gameCharacter: GameCharacter = new GameCharacter();\r\n    gameCharacter.createDataElements();\r\n    gameCharacter.initialize();\r\n\r\n    gameCharacter.createTestGameDataElement(name, size, imageIdentifier);\r\n\r\n    return gameCharacter;\r\n  }\r\n\r\n  addExtendData(){\r\n    \r\n    this.addBuffDataElement();\r\n    \r\n    let istachie = this.detailDataElement.getElementsByName('立絵位置');\r\n    if( istachie.length == 0 ){\r\n      let testElement: DataElement = DataElement.create('立絵位置', '', {}, '立絵位置' + this.identifier);\r\n      this.detailDataElement.appendChild(testElement);\r\n      testElement.appendChild(DataElement.create('POS', 11, { 'type': 'numberResource', 'currentValue': '0' }, 'POS_' + this.identifier));\r\n    }\r\n    let isbuff = this.buffDataElement.getElementsByName('BUFF/DEBUFF');\r\n    if( isbuff.length == 0 ){\r\n      let buffElement: DataElement = DataElement.create('BUFF/DEBUFF', '', {}, 'BUFF/DEBUFF' + this.identifier);\r\n      this.buffDataElement.appendChild(buffElement);\r\n    }\r\n    if( this.remoteController == null){\r\n      let controller: BuffPalette = new BuffPalette('RemotController_' + this.identifier);\r\n      controller.setPalette(`範例：\r\nマッスルベアー DB+2 3\r\nクリティカルレイ A 18\r\nセイクリッドウェポン 命+1攻+2 18`);\r\n      controller.initialize();\r\n      this.appendChild(controller);\r\n    }\r\n  }\r\n\r\n  clone() :this {\r\n    let cloneObject = super.clone();\r\n\r\n    let objectname:string;\r\n    let reg = new RegExp('^(.*)_([0-9]+)$');\r\n    let res = cloneObject.name.match(reg);\r\n    \r\n    let cloneNumber:number = 0;\r\n    if(res != null && res.length == 3) {\r\n      objectname = res[1];\r\n      cloneNumber = parseInt(res[2]) + 1;\r\n    } else {\r\n      objectname = cloneObject.name ;\r\n      cloneNumber = 2;\r\n    }\r\n\r\n    let list = ObjectStore.instance.getObjects(GameCharacter);\r\n    for (let character of list ) {\r\n      if( character.location.name == 'graveyard' ) continue;\r\n      \r\n      res = character.name.match(reg);\r\n      if(res != null && res.length == 3 && res[1] == objectname) {\r\n        let numberChk = parseInt(res[2]) + 1 ;\r\n        if( cloneNumber <= numberChk ){\r\n          cloneNumber = numberChk\r\n        }\r\n      }\r\n    }\r\n\r\n    cloneObject.name = objectname + '_' + cloneNumber;\r\n    cloneObject.update();\r\n    \r\n    return cloneObject;\r\n\r\n  }\r\n\r\n  createTestGameDataElement(name: string, size: number, imageIdentifier: string) {\r\n    this.createDataElements();\r\n\r\n    let nameElement: DataElement = DataElement.create('name', name, {}, 'name_' + this.identifier);\r\n    let sizeElement: DataElement = DataElement.create('size', size, {}, 'size_' + this.identifier);\r\n\r\n    if (this.imageDataElement.getFirstElementByName('imageIdentifier')) {\r\n      this.imageDataElement.getFirstElementByName('imageIdentifier').value = imageIdentifier;\r\n    }\r\n\r\n    let resourceElement: DataElement = DataElement.create('資源', '', {}, '資源' + this.identifier);\r\n    let hpElement: DataElement = DataElement.create('HP', 200, { 'type': 'numberResource', 'currentValue': '200' }, 'HP_' + this.identifier);\r\n    let mpElement: DataElement = DataElement.create('MP', 100, { 'type': 'numberResource', 'currentValue': '100' }, 'MP_' + this.identifier);\r\n\r\n    this.commonDataElement.appendChild(nameElement);\r\n    this.commonDataElement.appendChild(sizeElement);\r\n\r\n    this.detailDataElement.appendChild(resourceElement);\r\n    resourceElement.appendChild(hpElement);\r\n    resourceElement.appendChild(mpElement);\r\n\r\n    //TEST\r\n    let testElement: DataElement = DataElement.create('情報', '', {}, '情報' + this.identifier);\r\n    this.detailDataElement.appendChild(testElement);\r\n    testElement.appendChild(DataElement.create('説明', '在這裡寫上說明\\nABCDE', { 'type': 'note' }, '説明' + this.identifier));\r\n    testElement.appendChild(DataElement.create('筆記', '任意文字列\\n１\\n２\\n３\\n４\\n５', { 'type': 'note' }, '筆記' + this.identifier));\r\n\r\n    //TEST\r\n    testElement = DataElement.create('能力', '', {}, '能力' + this.identifier);\r\n    this.detailDataElement.appendChild(testElement);\r\n    testElement.appendChild(DataElement.create('器用度', 24, {}, '器用度' + this.identifier));\r\n    testElement.appendChild(DataElement.create('敏捷度', 24, {}, '敏捷度' + this.identifier));\r\n    testElement.appendChild(DataElement.create('筋力', 24, {}, '筋力' + this.identifier));\r\n    testElement.appendChild(DataElement.create('生命力', 24, {}, '生命力' + this.identifier));\r\n    testElement.appendChild(DataElement.create('知力', 24, {}, '知力' + this.identifier));\r\n    testElement.appendChild(DataElement.create('精神力', 24, {}, '精神力' + this.identifier));\r\n\r\n    //TEST\r\n    testElement = DataElement.create('戰鬥特技', '', {}, '戰鬥特技' + this.identifier);\r\n    this.detailDataElement.appendChild(testElement);\r\n    testElement.appendChild(DataElement.create('Lv1', '全力攻撃', {}, 'Lv1' + this.identifier));\r\n    testElement.appendChild(DataElement.create('Lv3', '武器嫻熟/劍', {}, 'Lv3' + this.identifier));\r\n    testElement.appendChild(DataElement.create('Lv5', '武器嫻熟/劍Ⅱ', {}, 'Lv5' + this.identifier));\r\n    testElement.appendChild(DataElement.create('Lv7', '頑強', {}, 'Lv7' + this.identifier));\r\n    testElement.appendChild(DataElement.create('Lv9', '順勢斬', {}, 'Lv9' + this.identifier));\r\n    testElement.appendChild(DataElement.create('自動', '治癒適正', {}, '自動' + this.identifier));\r\n    \r\n    //\r\n    let domParser: DOMParser = new DOMParser();\r\n    let gameCharacterXMLDocument: Document = domParser.parseFromString(this.rootDataElement.toXml(), 'application/xml');\r\n\r\n    let palette: ChatPalette = new ChatPalette('ChatPalette_' + this.identifier);\r\n    palette.setPalette(`對話組合版範例：\r\n2d6+1 ダイスロール\r\n１ｄ２０＋{敏捷}＋｛格闘｝　{name}の格闘！\r\n//敏捷=10+{敏捷A}\r\n//敏捷A=10\r\n//格闘＝１`);\r\n    palette.initialize();\r\n    this.appendChild(palette);\r\n\r\n    this.addExtendData();\r\n  }\r\n\r\n\r\n  createTestGameDataElementExtendSample(name: string, size: number, imageIdentifier: string) {\r\n    this.createDataElements();\r\n\r\n    let nameElement: DataElement = DataElement.create('name', name, {}, 'name_' + this.identifier);\r\n    let sizeElement: DataElement = DataElement.create('size', size, {}, 'size_' + this.identifier);\r\n\r\n    if (this.imageDataElement.getFirstElementByName('imageIdentifier')) {\r\n      this.imageDataElement.getFirstElementByName('imageIdentifier').value = imageIdentifier;\r\n    }\r\n\r\n//    let resourceElement: DataElement = DataElement.create('リソース', '', {}, 'リソース' + this.identifier);\r\n//    let hpElement: DataElement = DataElement.create('HP', 200, { 'type': 'numberResource', 'currentValue': '200' }, 'HP_' + this.identifier);\r\n//    let mpElement: DataElement = DataElement.create('MP', 100, { 'type': 'numberResource', 'currentValue': '100' }, 'MP_' + this.identifier);\r\n\r\n    this.commonDataElement.appendChild(nameElement);\r\n    this.commonDataElement.appendChild(sizeElement);\r\n\r\n//    this.detailDataElement.appendChild(resourceElement);\r\n//    resourceElement.appendChild(hpElement);\r\n//    resourceElement.appendChild(mpElement);\r\n\r\n    //TEST\r\n    let testElement: DataElement = DataElement.create('情報', '', {}, '情報' + this.identifier);\r\n    this.detailDataElement.appendChild(testElement);\r\n    testElement.appendChild(DataElement.create('説明', \r\n`このキャラクターはキャラクターBの補助用のコマを作るときのサンプルです。\r\nまず、このキャラクターはキャラクターシートの設定で「テーブルインベントリ非表示」「発言をしない」のチェックが入っています。\r\nこのように設定したキャラクターは「非表示」で足元のサークルの色が青に変わり、テーブルインベントリやリリィ追加機能のカウンターリモコンに表示されなくなります。\r\n戦闘非参加キャラを立ち絵やコマのためにテーブルに出したい場合に使用できます。\r\nまた、プロフ等の追加情報を表示するためのコマ等、発言が不要な場合、「発言をしない」のチェックを入れることでチャットタブ等のリストに表示されなくなります。\r\n部位数が10あるモンスターの駒を出したけど頭だけ喋ればいい、等の場合に使います。このチェックをONにするとコマの上のキャラ名が白地に黒文字に変わります。\r\n次に、ポップアップのサイズ設定です。リリィではキャラクターシートからポップアップの横幅、最大縦幅を変更可能な様に拡張しています。\r\nこれで遊ぶ仲間が許してくれれば、数千文字のプロフィールを書いても大丈夫です。\\n\r\nなお、ポップアップする項目の設定は インベントリ＞設定＞表示項目 で行います。\r\nリリィでは説明のため初期の項目に情報をに追加しているので、情報の子項目のこの文章である「説明」と「持ち物」が表示されています。\r\n定義されていても持っていない項目は表示されないのでこのコマからはHPや能力値を削っています。\r\nゲームごとに使いやすいように使ってください。\r\n`, { 'type': 'note' }, '説明' + this.identifier));\r\n    testElement.appendChild(DataElement.create('持有物', \r\n`こういった文章も見やすくなります。\r\nアイテム1：3個　効果〇〇\r\nアイテム2：3個　効果パーティ内一人のHPをXXする\r\nアイテム3：3個　効果敵一人の魔法を△する\r\nアイテム4：3個　効果A\r\nアイテム5：3個　効果B`,\r\n { 'type': 'note' }, '持有物' + this.identifier));\r\n\r\n    let domParser: DOMParser = new DOMParser();\r\n    let gameCharacterXMLDocument: Document = domParser.parseFromString(this.rootDataElement.toXml(), 'application/xml');\r\n\r\n    let palette: ChatPalette = new ChatPalette('ChatPalette_' + this.identifier);\r\n    palette.setPalette(`對話組合版範例：\r\n2d6+1 ダイスロール\r\n１ｄ２０＋{敏捷}＋｛格闘｝　{name}の格闘！\r\n//敏捷=10+{敏捷A}\r\n//敏捷A=10\r\n//格闘＝１`);\r\n    palette.initialize();\r\n    this.appendChild(palette);\r\n    this.addExtendData();\r\n\r\n    \r\n\r\n\r\n  }\r\n\r\n}\r\n","import { ComponentFactoryResolver, ComponentRef, Injectable, ViewContainerRef } from '@angular/core';\r\nimport { ChatTab } from '@udonarium/chat-tab';\r\n\r\ndeclare var Type: FunctionConstructor;\r\ninterface Type<T> extends Function {\r\n  new(...args: any[]): T;\r\n}\r\n\r\nexport interface PanelOption {\r\n  title?: string;\r\n  left?: number;\r\n  top?: number;\r\n  width?: number;\r\n  height?: number;\r\n  \r\n  isCutIn?: boolean; //この方式でよいか検討のこと\r\n  cutInIdentifier?: string;\r\n}\r\n\r\n@Injectable()\r\nexport class PanelService {\r\n  /* Todo */\r\n  static defaultParentViewContainerRef: ViewContainerRef;\r\n  static UIPanelComponentClass: { new(...args: any[]): any } = null;\r\n\r\n  private panelComponentRef: ComponentRef<any>\r\n  title: string = '無名のパネル';\r\n  left: number = 0;\r\n  top: number = 0;\r\n  width: number = 100;\r\n  height: number = 100;\r\n  isCutIn: boolean = false ; //この方式でよいか検討のこと\r\n  cutInIdentifier: string = '';\r\n  chatTab: ChatTab = null;\r\n\r\n  scrollablePanel: HTMLDivElement = null;\r\n\r\n  constructor(\r\n    private componentFactoryResolver: ComponentFactoryResolver\r\n  ) { }\r\n\r\n  get isShow(): boolean {\r\n    return this.panelComponentRef ? true : false;\r\n  }\r\n\r\n  open<T>(childComponent: Type<T>, option?: PanelOption, parentViewContainerRef?: ViewContainerRef): T {\r\n    if (!parentViewContainerRef) {\r\n      parentViewContainerRef = PanelService.defaultParentViewContainerRef;\r\n    }\r\n    let panelComponentRef: ComponentRef<any>;\r\n\r\n    const injector = parentViewContainerRef.injector;\r\n\r\n    const panelComponentFactory = this.componentFactoryResolver.resolveComponentFactory(PanelService.UIPanelComponentClass);\r\n    const bodyComponentFactory = this.componentFactoryResolver.resolveComponentFactory(childComponent);\r\n\r\n    panelComponentRef = parentViewContainerRef.createComponent(panelComponentFactory, parentViewContainerRef.length, injector);\r\n    let bodyComponentRef: ComponentRef<any> = panelComponentRef.instance.content.createComponent(bodyComponentFactory);\r\n\r\n    const childPanelService: PanelService = panelComponentRef.injector.get(PanelService);\r\n\r\n    childPanelService.panelComponentRef = panelComponentRef;\r\n    if (option) {\r\n      if (option.title) childPanelService.title = option.title;\r\n      if (option.top) childPanelService.top = option.top;\r\n      if (option.left) childPanelService.left = option.left;\r\n      if (option.width) childPanelService.width = option.width;\r\n      if (option.height) childPanelService.height = option.height;\r\n      if (option.isCutIn){\r\n         childPanelService.isCutIn = option.isCutIn;  //この方式でよいか検討のこと\r\n      }\r\n      if (option.cutInIdentifier){\r\n         childPanelService.cutInIdentifier = option.cutInIdentifier;  //この方式でよいか検討のこと\r\n      }\r\n      \r\n//      if (option.chatTab){\r\n//         childPanelService.chatTab = option.chatTab;  //この方式でよいか検討のこと\r\n//      }\r\n      \r\n    }\r\n    panelComponentRef.onDestroy(() => {\r\n      childPanelService.panelComponentRef = null;\r\n    });\r\n\r\n    return <T>bodyComponentRef.instance;\r\n  }\r\n\r\n  close() {\r\n    if (this.panelComponentRef) {\r\n      this.panelComponentRef.destroy();\r\n      this.panelComponentRef = null;\r\n    }\r\n\r\n  }\r\n}","import { XmlUtil } from '../system/util/xml-util';\r\nimport { Attributes } from './attributes';\r\nimport { GameObject, ObjectContext } from './game-object';\r\nimport { ObjectFactory } from './object-factory';\r\n\r\nexport interface XmlAttributes extends GameObject {\r\n  toAttributes(): Attributes;\r\n  parseAttributes(attributes: NamedNodeMap);\r\n}\r\n\r\nexport interface InnerXml extends GameObject {\r\n  innerXml(): string;\r\n  parseInnerXml(element: Element);\r\n}\r\n\r\nconst objectPropertyKeys = Object.getOwnPropertyNames(Object.prototype);\r\nconst arrayPropertyKeys = Object.getOwnPropertyNames(Array.prototype);\r\n\r\nexport class ObjectSerializer {\r\n  private static _instance: ObjectSerializer\r\n  static get instance(): ObjectSerializer {\r\n    if (!ObjectSerializer._instance) ObjectSerializer._instance = new ObjectSerializer();\r\n    return ObjectSerializer._instance;\r\n  }\r\n\r\n  private constructor() {\r\n    console.log('ObjectSerializer ready...');\r\n  };\r\n\r\n  toXml(gameObject: GameObject): string {\r\n    let xml = '';\r\n    let attributes = 'toAttributes' in gameObject ? (<XmlAttributes>gameObject).toAttributes() : ObjectSerializer.toAttributes(gameObject.toContext().syncData);\r\n    let tagName = gameObject.aliasName;\r\n\r\n    let attrStr = '';\r\n    for (let name in attributes) {\r\n      let attribute = XmlUtil.encodeEntityReference(attributes[name] + '');\r\n      if (attribute == null) continue;\r\n      attrStr += ' ' + name + '=\"' + attribute + '\"';\r\n    }\r\n    xml += `<${tagName + attrStr}>`;\r\n    xml += 'innerXml' in gameObject ? (<InnerXml>gameObject).innerXml() : '';\r\n    xml += `</${tagName}>`;\r\n    return xml;\r\n  }\r\n\r\n  static toAttributes(syncData: Object): Attributes {\r\n    let attributes = {};\r\n    for (let syncVar in syncData) {\r\n      let item = syncData[syncVar];\r\n      let key = syncVar;\r\n      let childAttr = ObjectSerializer.make2Attributes(item, key);\r\n      for (let name in childAttr) {\r\n        attributes[name] = childAttr[name];\r\n      }\r\n    }\r\n    return attributes;\r\n  }\r\n\r\n  private static make2Attributes(item: any, key: string): Attributes {\r\n    let attributes = {};\r\n    if (Array.isArray(item)) {\r\n      let arrayAttributes = ObjectSerializer.array2attributes(item, key);\r\n      for (let name in arrayAttributes) {\r\n        attributes[name] = arrayAttributes[name];\r\n      }\r\n    } else if (typeof item === 'object') {\r\n      let objAttributes = ObjectSerializer.object2attributes(item, key);\r\n      for (let name in objAttributes) {\r\n        attributes[name] = objAttributes[name];\r\n      }\r\n    } else {\r\n      attributes[key] = item;\r\n    }\r\n    return attributes;\r\n  }\r\n\r\n  private static object2attributes(obj: any, rootKey: string): Attributes {\r\n    let attributes = {};\r\n    for (let objKey in obj) {\r\n      let item = obj[objKey];\r\n      let key = rootKey + '.' + objKey;\r\n      let childAttr = ObjectSerializer.make2Attributes(item, key);\r\n      for (let name in childAttr) {\r\n        attributes[name] = childAttr[name];\r\n      }\r\n    }\r\n    return attributes;\r\n  }\r\n\r\n  private static array2attributes(array: Array<any>, rootKey: string): Attributes {\r\n    let attributes = {};\r\n    let length = array.length;\r\n    for (let i = 0; i < length; i++) {\r\n      let item = array[i];\r\n      let key = rootKey + '.' + i;\r\n      let childAttr = ObjectSerializer.make2Attributes(item, key);\r\n      for (let name in childAttr) {\r\n        attributes[name] = childAttr[name];\r\n      }\r\n    }\r\n    return attributes;\r\n  }\r\n\r\n  parseXml(xml: string | Element): GameObject {\r\n    let xmlElement: Element = null;\r\n    if (typeof xml === 'string') {\r\n      xmlElement = XmlUtil.xml2element(xml);\r\n    } else {\r\n      xmlElement = xml;\r\n    }\r\n    if (!xmlElement) {\r\n      console.error('xmlElementが空です');\r\n      return null;\r\n    }\r\n\r\n    let gameObject: GameObject = ObjectFactory.instance.create(xmlElement.tagName);\r\n    if (!gameObject) return null;\r\n\r\n    if ('parseAttributes' in gameObject) {\r\n      (<XmlAttributes>gameObject).parseAttributes(xmlElement.attributes);\r\n    } else {\r\n      let context: ObjectContext = gameObject.toContext();\r\n      ObjectSerializer.parseAttributes(context.syncData, xmlElement.attributes);\r\n      gameObject.apply(context);\r\n    }\r\n\r\n    gameObject.initialize();\r\n    if ('parseInnerXml' in gameObject) {\r\n      (<InnerXml>gameObject).parseInnerXml(xmlElement);\r\n    }\r\n    return gameObject;\r\n  }\r\n\r\n  static parseAttributes(syncData: Object, attributes: NamedNodeMap): Object {\r\n    let length = attributes.length;\r\n    for (let i = 0; i < length; i++) {\r\n      let value = attributes[i].value;\r\n      value = XmlUtil.decodeEntityReference(value);\r\n\r\n      let split: string[] = attributes[i].name.split('.');\r\n      let key: string | number = split[0];\r\n      let obj: Object | Array<any> = syncData;\r\n\r\n      let pollutionKey = split.find(splitKey => objectPropertyKeys.includes(splitKey));\r\n      if (pollutionKey != null) {\r\n        console.log(`skip invalid key (${pollutionKey})`);\r\n        continue;\r\n      }\r\n\r\n      if (1 < split.length) {\r\n        ({ obj, key } = ObjectSerializer.attributes2object(split, obj, key));\r\n        if (key == null) continue;\r\n      }\r\n\r\n      let type = typeof obj[key];\r\n      if (type !== 'string' && obj[key] != null) {\r\n        value = JSON.parse(value);\r\n      }\r\n      obj[key] = value;\r\n    }\r\n    return syncData;\r\n  }\r\n\r\n  private static attributes2object(split: string[], obj: Object | any[], key: string | number) {\r\n    // 階層構造の解析 foo.bar.0=\"abc\" 等\r\n    // 処理として実装こそしているが、xmlの仕様としては良くないので使用するべきではない.\r\n    let parentObj: Object | Array<any> = null;\r\n    let length = split.length;\r\n    for (let i = 0; i < length; i++) {\r\n      let index = parseInt(split[i]);\r\n      if (parentObj && !Number.isNaN(index) && !Array.isArray(obj) && Object.keys(parentObj).length) {\r\n        parentObj[key] = [];\r\n        obj = parentObj[key];\r\n      }\r\n      key = Number.isNaN(index) ? split[i] : index;\r\n\r\n      if (Array.isArray(obj) && typeof key !== 'number') {\r\n        console.warn('Arrayにはindexの挿入しか許可しない');\r\n        return { obj, key: null };\r\n      }\r\n      if (i + 1 < length) {\r\n        if (obj[key] == null)\r\n          obj[key] = typeof key === 'number' ? [] : {};\r\n        parentObj = obj;\r\n        obj = obj[key];\r\n      }\r\n    }\r\n    return { obj, key };\r\n  }\r\n\r\n  private static parseInnerXml(element: Element): GameObject {\r\n    return null;\r\n  }\r\n}\r\n","import * as CryptoJS from 'crypto-js/core.js';\r\nimport * as WordArray from 'crypto-js/lib-typedarrays.js';\r\nimport * as SHA256 from 'crypto-js/sha256.js';\r\n\r\nexport namespace FileReaderUtil {\r\n  export function readAsArrayBufferAsync(blob: Blob): Promise<ArrayBuffer> {\r\n    return new Promise<ArrayBuffer>((resolve, reject) => {\r\n      let reader = new FileReader();\r\n      reader.onload = event => { resolve(reader.result as ArrayBuffer); }\r\n      reader.onabort = reader.onerror = (e) => { reject(e); }\r\n      reader.readAsArrayBuffer(blob);\r\n    });\r\n  }\r\n\r\n  export function readAsTextAsync(blob: Blob): Promise<string> {\r\n    return new Promise<string>((resolve, reject) => {\r\n      let reader = new FileReader();\r\n      reader.onload = event => { resolve(reader.result as string); }\r\n      reader.onabort = reader.onerror = (e) => { reject(e); }\r\n      reader.readAsText(blob);\r\n    });\r\n  }\r\n\r\n  export async function calcSHA256Async(arrayBuffer: ArrayBuffer): Promise<string>\r\n  export async function calcSHA256Async(blob: Blob): Promise<string>\r\n  export async function calcSHA256Async(arg: any): Promise<string> {\r\n    if (arg instanceof Blob) {\r\n      return _calcSHA256Async(arg);\r\n    } else {\r\n      return _calcSHA256(arg);\r\n    }\r\n  }\r\n\r\n  async function _calcSHA256Async(blob: Blob): Promise<string> {\r\n    return _calcSHA256(await FileReaderUtil.readAsArrayBufferAsync(blob));\r\n  }\r\n\r\n  function _calcSHA256(arrayBuffer: ArrayBuffer): string {\r\n    let wordArray = WordArray.create(arrayBuffer);\r\n    return SHA256(<any>wordArray).toString();\r\n  }\r\n}\r\n","import { EventEmitter } from 'events';\r\nimport * as MessagePack from 'msgpack-lite';\r\n\r\nimport { UUID } from '../util/uuid';\r\nimport { setZeroTimeout } from '../util/zero-timeout';\r\n\r\n// @types/skywayを使用すると@types/webrtcが定義エラーになるので代替定義\r\ndeclare module PeerJs {\r\n  export type Peer = any;\r\n  export type DataConnection = any;\r\n}\r\n\r\ninterface DataChank {\r\n  id: string;\r\n  data: Uint8Array;\r\n  index: number;\r\n  total: number;\r\n};\r\n\r\ninterface ReceivedChank {\r\n  id: string;\r\n  chanks: Uint8Array[];\r\n  length: number;\r\n  byteLength: number;\r\n};\r\n\r\nexport class SkyWayDataConnection extends EventEmitter {\r\n  private chunkSize = 15.5 * 1024;\r\n  private receivedMap: Map<string, ReceivedChank> = new Map();\r\n  private timeoutTimer: NodeJS.Timer = null;\r\n\r\n  get open(): boolean { return this.conn.open; }\r\n  get remoteId(): string { return this.conn.remoteId; }\r\n  get metadata(): any { return this.conn.metadata; }\r\n\r\n  constructor(private conn: PeerJs.DataConnection) {\r\n    super();\r\n    conn.on('data', data => this.onData(data));\r\n    conn.on('open', () => {\r\n      this.clearTimeoutTimer();\r\n      exchangeSkyWayImplementation(conn);\r\n      this.emit('open');\r\n    });\r\n    conn.on('close', () => {\r\n      this.clearTimeoutTimer();\r\n      this.emit('close');\r\n    });\r\n    conn.on('error', err => {\r\n      this.clearTimeoutTimer();\r\n      this.emit('error', err);\r\n    });\r\n\r\n    this.setTimeoutTimer();\r\n  }\r\n\r\n  close() {\r\n    this.clearTimeoutTimer();\r\n    this.conn.close();\r\n  }\r\n\r\n  send(data: any) {\r\n    let encodedData: Uint8Array = MessagePack.encode(data);\r\n\r\n    let total = Math.ceil(encodedData.byteLength / this.chunkSize);\r\n    if (total <= 1) {\r\n      this.conn.send(encodedData);\r\n      return;\r\n    }\r\n\r\n    let id = UUID.generateUuid();\r\n\r\n    let sliceData: Uint8Array = null;\r\n    let chank: DataChank = null;\r\n    for (let sliceIndex = 0; sliceIndex < total; sliceIndex++) {\r\n      sliceData = encodedData.slice(sliceIndex * this.chunkSize, (sliceIndex + 1) * this.chunkSize);\r\n      chank = { id: id, data: sliceData, index: sliceIndex, total: total };\r\n      this.conn.send(MessagePack.encode(chank));\r\n    }\r\n  }\r\n\r\n  private onData(data: ArrayBuffer) {\r\n    let chank: DataChank = MessagePack.decode(new Uint8Array(data));\r\n\r\n    if (chank.id == null) {\r\n      this.emit('data', chank);\r\n      return;\r\n    }\r\n\r\n    let received = this.receivedMap.get(chank.id);\r\n    if (received == null) {\r\n      received = { id: chank.id, chanks: new Array(chank.total), length: 0, byteLength: 0 };\r\n      this.receivedMap.set(chank.id, received);\r\n    }\r\n\r\n    if (received.chanks[chank.index] != null) return;\r\n\r\n    received.length++;\r\n    received.byteLength += chank.data.byteLength;\r\n    received.chanks[chank.index] = chank.data;\r\n\r\n    if (received.length < chank.total) return;\r\n    this.receivedMap.delete(chank.id);\r\n\r\n    let uint8Array = new Uint8Array(received.byteLength);\r\n\r\n    let pos = 0;\r\n    for (let c of received.chanks) {\r\n      uint8Array.set(c, pos);\r\n      pos += c.byteLength;\r\n    }\r\n\r\n    let decodedData = MessagePack.decode(uint8Array);\r\n\r\n    this.emit('data', decodedData);\r\n  }\r\n\r\n  private setTimeoutTimer() {\r\n    this.clearTimeoutTimer();\r\n    this.timeoutTimer = setTimeout(() => {\r\n      console.warn(`timeout ${this.conn.remoteId}`);\r\n      this.timeoutTimer = null;\r\n      this.emit('close');\r\n    }, 15000);\r\n  }\r\n\r\n  private clearTimeoutTimer() {\r\n    if (this.timeoutTimer == null) return;\r\n    clearTimeout(this.timeoutTimer);\r\n    this.timeoutTimer = null;\r\n  }\r\n}\r\n\r\n/* \r\nSkyWay の DataConnection._startSendLoop() を取り替える.\r\nsetInterval() に由来する遅延を解消するが skyway-js-sdk の更新次第で動作しなくなるので注意.\r\n\r\nhttps://github.com/skyway/skyway-js-sdk/blob/master/src/peer/dataConnection.js\r\n*/\r\nfunction exchangeSkyWayImplementation(conn: PeerJs.DataConnection) {\r\n  if (conn._dc && conn._sendBuffer) {\r\n    conn._startSendLoop = startSendLoopZeroTimeout;\r\n  }\r\n}\r\n\r\nfunction startSendLoopZeroTimeout() {\r\n  if (!this.sendInterval) {\r\n    this.sendInterval = setZeroTimeout(sendBuffertZeroTimeout.bind(this));\r\n  }\r\n}\r\n\r\nfunction sendBuffertZeroTimeout() {\r\n  const currMsg = this._sendBuffer.shift();\r\n  try {\r\n    this._dc.send(currMsg);\r\n  } catch (error) {\r\n    this._sendBuffer.push(currMsg);\r\n  }\r\n\r\n  if (this._sendBuffer.length === 0) {\r\n    this.sendInterval = undefined;\r\n  } else {\r\n    this.sendInterval = setZeroTimeout(sendBuffertZeroTimeout.bind(this));\r\n  }\r\n}\r\n","export namespace MimeType {\r\n  const types = {\r\n    gif: 'image/gif',\r\n    jpg: 'image/jpeg',\r\n    jpeg: 'image/jpeg',\r\n    jpe: 'image/jpeg',\r\n    png: 'image/png',\r\n    apng: 'image/apng',\r\n    webp: 'image/webp',\r\n    svg: 'image/svg+xml',\r\n    svgz: 'image/svg+xml',\r\n    ico: 'image/x-icon',\r\n    cur: 'image/x-icon',\r\n    bmp: 'image/bmp',\r\n    html: 'text/html',\r\n    htm: 'text/html',\r\n    shtml: 'text/html',\r\n    xml: 'text/xml',\r\n    yml: 'text/yaml',\r\n    yaml: 'text/yaml',\r\n    json: 'application/json',\r\n    map: 'application/json',\r\n    zip: 'application/zip',\r\n    mp3: 'audio/mp3',\r\n    wav: 'audio/wav',\r\n    m4a: 'audio/aac',\r\n    ogg: 'audio/ogg',\r\n    mpg: 'video/mpeg',\r\n    mpeg: 'video/mpeg',\r\n    mp4: 'video/mp4',\r\n    webm: 'video/webm'\r\n  };\r\n\r\n  export function type(fileName: string): string {\r\n    let ext = fileName.replace(/.*[\\.\\/\\\\]/, '').toLowerCase();\r\n    return types[ext] ? types[ext] : '';\r\n  }\r\n\r\n  export function extension(mimeType: string): string {\r\n    for (let key in types) {\r\n      if (types[key] === mimeType) {\r\n        return key;\r\n      }\r\n    }\r\n    return mimeType.split('/')[1];\r\n  }\r\n}","import { SyncObject, SyncVar } from './core/synchronize-object/decorator';\r\nimport { ObjectNode } from './core/synchronize-object/object-node';\r\nimport { ObjectContext } from './core/synchronize-object/game-object';\r\nimport { DiceTablePalette } from './chat-palette';\r\n\r\nexport interface TableLine {\r\n  table: string;\r\n}\r\n\r\nexport interface TableVariable {\r\n  name: string;\r\n  table: string;\r\n}\r\n\r\n\r\n@SyncObject('dice-table')\r\nexport class DiceTable extends ObjectNode{ \r\n\r\n  @SyncVar() name: string = 'ダイス表';\r\n  @SyncVar() command: string = 'SAMPLE';\r\n  @SyncVar() dice: string = '1d6';\r\n  \r\n  text:string='';\r\n\r\n  get diceTablePalette(): DiceTablePalette {\r\n    for (let child of this.children) {\r\n      if (child instanceof DiceTablePalette){\r\n        return child;\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n\r\n  static create(): DiceTable {\r\n    let diceTable: DiceTable = new DiceTable();\r\n    diceTable.name = '白紙のダイス表';\r\n    diceTable.initialize();\r\n\r\n    let palette: DiceTablePalette = new DiceTablePalette( 'table_' + diceTable.identifier);\r\n\r\n    palette.setPalette(\r\n`ダイス表入力例：\r\n1:ダイス表チャート例【森】\r\n2:ダイス表チャート例【海】\r\n3:ダイス表チャート例【平地】\r\n4:ダイス表チャート例【沼】\r\n5:ダイス表チャート例【空】\r\n6:ダイス表チャート例【山】`);\r\n    palette.initialize();\r\n    \r\n    diceTable.appendChild(palette);\r\n    return diceTable;\r\n  }\r\n  \r\n  // override\r\n  apply(context: ObjectContext) {\r\n    super.apply(context);\r\n  }\r\n\r\n\r\n\r\n\r\n}","import { Component, NgZone, OnDestroy, OnInit } from '@angular/core';\r\n\r\nimport { AudioFile } from '@udonarium/core/file-storage/audio-file';\r\nimport { AudioPlayer, VolumeType } from '@udonarium/core/file-storage/audio-player';\r\nimport { AudioStorage } from '@udonarium/core/file-storage/audio-storage';\r\nimport { FileArchiver } from '@udonarium/core/file-storage/file-archiver';\r\nimport { ObjectStore } from '@udonarium/core/synchronize-object/object-store';\r\nimport { EventSystem } from '@udonarium/core/system';\r\nimport { Jukebox } from '@udonarium/Jukebox';\r\n\r\nimport { ModalService } from 'service/modal.service';\r\n\r\nimport { PointerDeviceService } from 'service/pointer-device.service';\r\nimport { PanelOption, PanelService } from 'service/panel.service';\r\n\r\n@Component({\r\n  selector: 'app-cut-in-bgm',\r\n  templateUrl: './cut-in-bgm.component.html',\r\n  styleUrls: ['./cut-in-bgm.component.css']\r\n})\r\nexport class CutInBgmComponent implements OnInit, OnDestroy {\r\n\r\n  get volume(): number { return AudioPlayer.volume; }\r\n  set volume(volume: number) { AudioPlayer.volume = volume; }\r\n\r\n  get auditionVolume(): number { return AudioPlayer.auditionVolume; }\r\n  set auditionVolume(auditionVolume: number) { AudioPlayer.auditionVolume = auditionVolume; }\r\n\r\n  get audios(): AudioFile[] { return AudioStorage.instance.audios.filter(audio => !audio.isHidden); }\r\n  get jukebox(): Jukebox { return ObjectStore.instance.get<Jukebox>('Jukebox'); }\r\n\r\n  readonly auditionPlayer: AudioPlayer = new AudioPlayer();\r\n  private lazyUpdateTimer: NodeJS.Timer = null;\r\n\r\n\r\n  constructor(\r\n    private modalService: ModalService,\r\n    private panelService: PanelService,\r\n    private ngZone: NgZone\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    Promise.resolve().then(() => this.modalService.title = this.panelService.title = 'カットインBGM選択');\r\n    this.auditionPlayer.volumeType = VolumeType.AUDITION;\r\n    EventSystem.register(this)\r\n      .on('*', event => {\r\n      });\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    EventSystem.unregister(this);\r\n    this.stop();\r\n  }\r\n\r\n  play(audio: AudioFile) {\r\n    this.auditionPlayer.play(audio);\r\n  }\r\n\r\n  stop() {\r\n    this.auditionPlayer.stop();\r\n  }\r\n  \r\n  \r\n  selectBgm(file: AudioFile) {\r\n    if( !file )return; \r\n    console.log('onSelectedFile', file);\r\n    \r\n    console.log('file.identifier' + file.identifier);\r\n    console.log('file.name' + file.name);\r\n    \r\n    this.modalService.resolve(file.identifier);\r\n  }\r\n  \r\n  \r\n  handleFileSelect(event: Event) {\r\n    let files = (<HTMLInputElement>event.target).files;\r\n    if (files.length) FileArchiver.instance.load(files);\r\n  }\r\n\r\n  private lazyNgZoneUpdate() {\r\n    if (this.lazyUpdateTimer !== null) return;\r\n    this.lazyUpdateTimer = setTimeout(() => {\r\n      this.lazyUpdateTimer = null;\r\n      this.ngZone.run(() => { });\r\n    }, 100);\r\n  }\r\n\r\n\r\n}\r\n","<div>\r\n  <div *ngFor=\"let audio of audios\" class=\"box\">\r\n    <button (click)=\"selectBgm(audio)\"  >登録</button>\r\n\r\n    <button *ngIf=\"audio !== auditionPlayer?.audio || auditionPlayer?.paused\" (click)=\"play(audio)\" [disabled]=\"!audio.isReady\" >試聴/再生</button>\r\n    <button *ngIf=\"audio === auditionPlayer?.audio && !auditionPlayer?.paused\" (click)=\"stop()\" [disabled]=\"!audio.isReady\" >試聴/停止</button>\r\n    <span *ngIf=\"audio === auditionPlayer?.audio && !auditionPlayer?.paused\">【試聴中】</span>\r\n    <span>{{audio.name}}</span>\r\n  </div>\r\n  <div *ngIf=\"audios.length < 1\" >音楽がアップロードされていません。</div>\r\n</div>\r\n","import { AfterViewInit, Component, OnDestroy, OnInit , Input , Output , EventEmitter } from '@angular/core';\r\n\r\nimport { ObjectSerializer } from '@udonarium/core/synchronize-object/object-serializer';\r\nimport { ObjectStore } from '@udonarium/core/synchronize-object/object-store';\r\n\r\nimport { FileSelecterComponent } from 'component/file-selecter/file-selecter.component';\r\nimport { ModalService } from 'service/modal.service';\r\nimport { PanelService } from 'service/panel.service';\r\nimport { SaveDataService } from 'service/save-data.service';\r\n\r\nimport { DiceBot } from '@udonarium/dice-bot';\r\nimport { DiceTable } from '@udonarium/dice-table';\r\nimport { DiceTablePalette } from '@udonarium/chat-palette';\r\n\r\n@Component({\r\n  selector: 'dice-table-setting',\r\n  templateUrl: './dice-table-setting.component.html',\r\n  styleUrls: ['./dice-table-setting.component.css']\r\n})\r\nexport class DiceTableSettingComponent implements OnInit, OnDestroy, AfterViewInit {\r\n\r\n  @Input('gameType') _gameType: string = '';\r\n  @Output() gameTypeChange = new EventEmitter<string>();\r\n  get gameType(): string { \r\n    return this.isEditable ? this.selectedTable.diceTablePalette.dicebot : '' ;\r\n  }\r\n  set gameType(gameType: string) { \r\n    if( this.isEditable ){\r\n      this.selectedTable.diceTablePalette.dicebot = gameType ;\r\n      this._gameType = gameType; this.gameTypeChange.emit(gameType); \r\n    }\r\n  }\r\n\r\n  loadDiceBot(gameType: string) {\r\n    console.log('onChangeGameType ready');\r\n    DiceBot.getHelpMessage(gameType).then(help => {\r\n      console.log('onChangeGameType done\\n' + help);\r\n    });\r\n  }\r\n\r\n  get diceBotInfos() { return DiceBot.diceBotInfos }\r\n\r\n  get tableName(): string { return this.isEditable ? this.selectedTable.name : '' ; }\r\n  set tableName(tableName: string) { if (this.isEditable) this.selectedTable.name = tableName; }\r\n\r\n  get tableDice(): string { return this.isEditable ? this.selectedTable.dice : '' ; }\r\n  set tableDice(tableDice: string) { if (this.isEditable) this.selectedTable.dice = tableDice; }\r\n\r\n  get tableCommand(): string { return this.isEditable ? this.selectedTable.command : '' ; }\r\n  set tableCommand(tableCommand: string) { if (this.isEditable) this.selectedTable.command = tableCommand; }\r\n\r\n  get tableText(): string { \r\n    return this.isEditable ? this.selectedTable.text : '' ; \r\n    }\r\n  set tableText(tableText: string) { \r\n    if(this.isEditable)console.log(tableText); \r\n    if (this.isEditable) this.selectedTable.text = tableText+''; \r\n  }\r\n\r\n  get diceTablePalette(): DiceTablePalette {\r\n    if(!this.isEditable)return null;\r\n    \r\n    for (let child of this.selectedTable.children) {\r\n      if (child instanceof DiceTablePalette) return child;\r\n    }\r\n    return null;\r\n  }\r\n\r\n  isEdit : boolean = false;\r\n  selectedTable: DiceTable = null;\r\n  editPalette: string = '';\r\n\r\n//  get isEmpty(): boolean { return this.tableSelecter ? (this.tableSelecter.viewTable ? false : true) : true; }\r\n  get isEmpty(): boolean { return false }\r\n\r\n  get isSelected(): boolean { return this.selectedTable ? true : false; }\r\n\r\n  get isDeleted(): boolean {\r\n    if (!this.selectedTable) return true;\r\n    return ObjectStore.instance.get<DiceTable>(this.selectedTable.identifier) == null;\r\n  }\r\n\r\n  get isEditable(): boolean {\r\n//    return !this.isEmpty && !this.isDeleted;\r\n    return !this.isEmpty && this.isSelected && !this.isDeleted;\r\n  }\r\n\r\n  isSaveing: boolean = false;\r\n  progresPercent: number = 0;\r\n\r\n  constructor(\r\n    private modalService: ModalService,\r\n    private saveDataService: SaveDataService,\r\n    private panelService: PanelService\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    Promise.resolve().then(() => this.modalService.title = this.panelService.title = 'ダイス表設定');\r\n  }\r\n\r\n  ngAfterViewInit() { }\r\n\r\n  ngOnDestroy() {\r\n  }\r\n\r\n  selectDiceTable(identifier: string) {\r\n    this.selectedTable = ObjectStore.instance.get<DiceTable>(identifier);\r\n  }\r\n\r\n  getDiceTables(): DiceTable[] {\r\n    return ObjectStore.instance.getObjects(DiceTable);\r\n  }\r\n  \r\n  \r\n  createDiceTable() {\r\n    let diceTable = DiceTable.create();\r\n    this.selectDiceTable(diceTable.identifier);\r\n  }\r\n\r\n  async save() {\r\n    if (!this.selectedTable) return;\r\n    this.isSaveing = true;\r\n    this.progresPercent = 0;\r\n\r\n    let fileName: string = 'dice_table_' + this.selectedTable.name;\r\n\r\n    await this.saveDataService.saveGameObjectAsync(this.selectedTable, fileName, percent => {\r\n      this.progresPercent = percent;\r\n    });\r\n\r\n    setTimeout(() => {\r\n      this.isSaveing = false;\r\n      this.progresPercent = 0;\r\n    }, 500);\r\n  }\r\n\r\n  delete() {\r\n    if (!this.isEmpty && this.selectedTable) {\r\n      this.selectedTable.destroy();\r\n    }\r\n  }\r\n  \r\n  toggleEditMode(){\r\n    this.isEdit = this.isEdit ? false : true;\r\n    if (this.isEdit) {\r\n      this.editPalette = this.selectedTable.diceTablePalette.value + '';\r\n    } else {\r\n      this.selectedTable.diceTablePalette.setPalette(this.editPalette);\r\n    }\r\n  }\r\n  \r\n}\r\n","<div class=\"table\">\r\n  <div class=\"table-cell \" style = \"width:13em\">\r\n    <div>\r\n      <button (click)=\"createDiceTable()\" [attr.disabled]=\"this.isEdit ? '' : null\">創建新表</button>\r\n    </div>\r\n    <select style=\"width: 100%;\" size=\"15;padding-right:5px\" (change)=\"selectDiceTable($event.target.value)\" \r\n    [ngModel]=\"selectedTable?.identifier\"  [attr.disabled]=\"this.isEdit ? '' : null\">\r\n      <option *ngFor=\"let diceTable of getDiceTables()\" value=\"{{diceTable.identifier}}\">{{diceTable.name}}</option>\r\n    </select>\r\n  </div>\r\n  <div class=\"table-cell\" style=\"width:5px;max-width:5px\">\r\n  </div>\r\n  <div class=\"table-cell\" >\r\n    <div class=\"table\">\r\n      <div class=\"table-cell\" style=\"width: 7em;\">\r\n        <span style=\"width: 7em;display:inline-block;\">骰子表標題 :</span>\r\n      </div>\r\n      <div class=\"table-cell\" style=\"width: 100%; padding-right:10px;\">\r\n        <input [(ngModel)]=\"tableName\" placeholder=\"Name\" style=\"width:100%;\" [attr.disabled]=\"!isEditable ? '' : null\" />\r\n      </div>\r\n    </div>\r\n    <div class=\"table\">\r\n      <div class=\"table-cell\" style=\"width: 7em;\">\r\n        <span style=\"width: 7em;display:inline-block;\">骰子 :</span>\r\n      </div>\r\n      <div class=\"table-cell\" style=\"width: 100%; padding-right:10px;\">\r\n        <input [(ngModel)]=\"tableDice\" placeholder=\"Dice\" style=\"width:100%;\" [attr.disabled]=\"!isEditable ? '' : null\" />\r\n      </div>\r\n    </div>\r\n    <div>\r\n      <div class=\"table-cell\" style=\"width: 7em;\">\r\n        <span style=\"width: 7em;display:inline-block;\">指令 :</span>\r\n      </div>\r\n      <div class=\"table-cell\" style=\"width: 100%; padding-right:10px;\">\r\n        <input [(ngModel)]=\"tableCommand\" placeholder=\"Command\" style=\"width:100%;\" [attr.disabled]=\"!isEditable ? '' : null\" />\r\n      </div>\r\n    </div>\r\n    <div>\r\n      <ng-select class=\"ud-select\" style=\"width: 12em;\" (change)=\"loadDiceBot($event)\" [(ngModel)]=\"gameType\"\r\n        [ngModelOptions]=\"{standalone: true}\" [attr.disabled]=\"!isEditable ? '' : null\" [clearable]=\"false\">\r\n        <ng-option *ngFor=\"let diceBotInfo of diceBotInfos\" [value]=\"diceBotInfo.id\">{{diceBotInfo.name}}</ng-option>\r\n      </ng-select>\r\n    </div>\r\n\r\n    <div *ngIf=\"isEdit\" class=\"edit-info\">\r\n      <i class=\"material-icons\" style=\"vertical-align: bottom; size:0.8rem;\">info_outline</i> 骰子表編輯中\r\n    </div>\r\n<!--入力部 -->\r\n    <div *ngIf=\"!isEdit\" style=\"flex-grow: 1; height: 0; min-height: 150px;\">\r\n      <select class=\"palette\" style=\"overflow-y: auto;\" size=\"5\" >\r\n        <ng-container *ngIf=\"selectedTable\">\r\n          <ng-container *ngIf=\"selectedTable.diceTablePalette\">\r\n            <option *ngFor=\"let palette of selectedTable.diceTablePalette.getPalette()\" value=\"{{palette}}\">{{palette}}</option>\r\n          </ng-container>\r\n        </ng-container>\r\n      </select>\r\n    </div>\r\n    <div *ngIf=\"isEdit\" style=\"flex-grow: 1; height: 0; min-height: 150px;\">\r\n      <textarea class=\"palette\" style=\"resize: none;\" [(ngModel)]=\"editPalette\" placeholder=\"骰子表\"></textarea>\r\n    </div>\r\n    <div style=\"flex-grow: 0;\">\r\n      <button type=\"submit\" (click)=\"toggleEditMode()\" [attr.disabled]=\"!isEditable ? '' : null\">\r\n        <span *ngIf=\"!isEdit\">編輯骰子表</span>\r\n        <span *ngIf=\"isEdit\">確定骰子表</span>\r\n      </button>\r\n    </div>\r\n    <hr/>\r\n    <div>\r\n      <ng-container *ngIf=\"!isDeleted\">\r\n        <button (click)=\"save()\">保存</button>\r\n        <button class=\"danger\" (click)=\"delete()\" [attr.disabled]=\"getDiceTables().length <= 0 ? '' : null\">刪除</button>\r\n      </ng-container>\r\n    </div>\r\n    <ng-container *ngIf=\"isEmpty\">\r\n      <div style=\"font-size: 12px;\">※尚未創建骰子表。 您可以從“創建新表”中創建一個新的骰子表。</div>\r\n    </ng-container>\r\n  </div>\r\n<!--入力部ここまで -->\r\n</div>\r\n\r\n","import { AfterViewInit, ChangeDetectionStrategy, ChangeDetectorRef, Component, OnDestroy, OnInit } from '@angular/core';\r\n\r\nimport { FileArchiver } from '@udonarium/core/file-storage/file-archiver';\r\nimport { ImageFile } from '@udonarium/core/file-storage/image-file';\r\nimport { ImageStorage } from '@udonarium/core/file-storage/image-storage';\r\nimport { EventSystem, Network } from '@udonarium/core/system';\r\n\r\nimport { PanelService } from 'service/panel.service';\r\n\r\nimport { ImageTag } from '@udonarium/image-tag';//本家PR #92より\r\n\r\n@Component({\r\n  selector: 'file-storage',\r\n  templateUrl: './file-storage.component.html',\r\n  styleUrls: ['./file-storage.component.css'],\r\n  changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class FileStorageComponent implements OnInit, OnDestroy, AfterViewInit {\r\n\r\n  private initTimestamp : number = 0;\r\n\r\n//本家PR #92より\r\n  searchWord: string = '';\r\n  private _searchWord: string;\r\n  private _searchWords: string[];\r\n  get searchWords(): string[] {\r\n    if (this._searchWord !== this.searchWord) {\r\n      this._searchWord = this.searchWord;\r\n      this._searchWords = this.searchWord != null && 0 < this.searchWord.trim().length ? this.searchWord.trim().split(/\\s+/) : [];\r\n    }\r\n    return this._searchWords;\r\n  }\r\n\r\n  getAllImage():ImageFile[]{\r\n    let imageFileList: ImageFile[] = [];\r\n    \r\n    for (let imageFile of this.fileStorageService.images){\r\n      let identifier = imageFile.context.identifier;\r\n      let tag: string = '';\r\n      if( ImageTag.get(identifier) ) tag = ImageTag.get(identifier).tag;\r\n      \r\n      if( tag != 'システム予約')   //システム予約名を非表示\r\n        imageFileList.push(imageFile);\r\n    }\r\n    return imageFileList;\r\n  }\r\n\r\n  get images(): ImageFile[] {\r\n      let imageFileList: ImageFile[] = [];\r\n      if (this.selectTag == '全て') return this.getAllImage();\r\n      for (let imageFile of this.fileStorageService.images){\r\n        let identifier = imageFile.context.identifier;\r\n\r\n        if( ImageTag.get(identifier) ){//\r\n          let tag: string = ImageTag.get(identifier).tag;\r\n          if( tag == this.selectTag ){\r\n            imageFileList.push(imageFile);\r\n          }\r\n        }else{//タグ未設定の場合 画像投下直後は ImageTag.get(identifier) は空文字ではなく該当なしとなるため\r\n          if( this.selectTag == '' ){\r\n            imageFileList.push(imageFile);\r\n          }\r\n        }\r\n      }\r\n      return imageFileList;\r\n  }\r\n\r\n  selectedFile: ImageFile = null;\r\n  get isSelected(): boolean { return this.selectedFile != null; }\r\n  get selectedImageTag(): ImageTag {\r\n    if (!this.isSelected) return null;\r\n    const imageTag = ImageTag.get(this.selectedFile.identifier);\r\n    return imageTag ? imageTag : ImageTag.create(this.selectedFile.identifier);\r\n  }\r\n  \r\n  get tagList(): string[]{\r\n    let tags:  string[] = [];\r\n    for (let imageFile of this.fileStorageService.images){\r\n      let identifier = imageFile.context.identifier;\r\n      let imageTag = ImageTag.get(identifier);\r\n      if( imageTag ){\r\n        if( imageTag.tag ){\r\n          if( imageTag.tag != 'システム予約')   //システム予約名を非表示\r\n            tags.push(imageTag.tag);\r\n        }\r\n      }\r\n    }\r\n    \r\n    let tags2:  string[] = Array.from(new Set(tags));\r\n    tags2.unshift('全て');\r\n    tags2.unshift('');\r\n    return tags2;\r\n    \r\n  }\r\n  \r\n  fileStorageService = ImageStorage.instance;\r\n\r\n  inputNewTag(newTag: string) { \r\n    this.newTagName = newTag;\r\n  }\r\n\r\n  changeTag(){\r\n   \r\n    if( this.newTagName == '全て' ) return; //表示上混乱するタグの禁止\r\n    if( this.newTagName == 'システム予約' )return; //システム予約名称\r\n    \r\n    let changeableImages = this.images; \r\n    console.log(\"this.newTagName\" + this.newTagName );\r\n    \r\n    for (let img of changeableImages) {\r\n//    console.log(\"img.context.identifier:\"+img.context.identifier);\r\n      let box = <HTMLInputElement>document.getElementById(img.context.identifier+'_'+ this.initTimestamp);\r\n      if( box ){\r\n        if( box.checked ){\r\n          let imageTag = ImageTag.get(img.context.identifier);\r\n          imageTag = imageTag ? imageTag : ImageTag.create(img.context.identifier);\r\n          if( this.newTagName == '未設定' ){ \r\n            imageTag.tag = '';\r\n          }else{\r\n            imageTag.tag = this.newTagName;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  selectTag :string = '';\r\n  newTagName:string = '';\r\n  \r\n  resetBtn() {\r\n//  処理なし\r\n  }\r\n\r\n\r\n//本家PR #92より\r\n  constructor(\r\n    private changeDetector: ChangeDetectorRef,\r\n    private panelService: PanelService\r\n  ) { \r\n    this.initTimestamp = Date.now();\r\n  }\r\n\r\n  ngOnInit() {\r\n    Promise.resolve().then(() => this.panelService.title = 'ファイル一覧');\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    EventSystem.register(this).on('SYNCHRONIZE_FILE_LIST', event => {\r\n      if (event.isSendFromSelf) {\r\n        this.changeDetector.markForCheck();\r\n      }\r\n    });\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    EventSystem.unregister(this);\r\n  }\r\n\r\n  handleFileSelect(event: Event) {\r\n    let input = <HTMLInputElement>event.target;\r\n    let files = input.files;\r\n    if (files.length) FileArchiver.instance.load(files);\r\n    input.value = '';\r\n  }\r\n\r\n  onSelectedFile(file: ImageFile) {\r\n    console.log('onSelectedFile', file);\r\n    EventSystem.call('SELECT_FILE', { fileIdentifier: file.identifier }, Network.peerId);\r\n\r\n    this.selectedFile = file;//本家PR #92より\r\n  }\r\n  \r\n  imgBlockClick(identifier){\r\n    console.log( \"identifier:\"+identifier);\r\n    let box = <HTMLInputElement>document.getElementById(identifier+'_'+ this.initTimestamp);\r\n    box.checked = !box.checked;\r\n  }\r\n  \r\n  onChange(identifier) {\r\n    this.imgBlockClick(identifier);\r\n  }\r\n\r\n  \r\n}\r\n","<form>\r\n  <div class=\"image-chg\">\r\n    <label *ngFor=\"let tag of tagList\" >\r\n      <input name=\"image-chg\"  type=\"radio\" value=\"{{tag}}\"  [(ngModel)]=\"selectTag\" (change) =\"resetBtn()\" >\r\n      <div *ngIf= \"tag.length == 0\" >未設定</div>\r\n      <div *ngIf= \"tag.length > 0\" >{{tag}}</div>\r\n    </label>\r\n  </div>\r\n</form>\r\n<label>\r\n  <div class=\"drop-zone\">\r\n    <div>\r\n      <i class=\"material-icons large-font\">add_photo_alternate</i>\r\n    </div>\r\n    <div>拖曳圖片到這裡上傳</div>\r\n    <div class=\"small-font\">或點擊這裡選擇圖片</div>\r\n    <input type=\"file\" style=\"display: none;\" (change)=\"handleFileSelect($event)\" multiple accept=\"image/*\"/>\r\n    <div class=\"small-font\">\r\n      <br>每張圖片最大2MB</div>\r\n  </div>\r\n</label>\r\n<div class=\"sticky-top\">\r\n  <div>\r\n    <button (click)=\"changeTag()\">變更標籤</button>\r\n    <input class=\"input\" maxlength=\"12\" (input)=\"inputNewTag($event.target.value)\" placeholder=\"新標籤名\">\r\n  </div>\r\n</div>\r\n<div id=\"file-list\">\r\n  <span *ngFor=\"let file of images\" class=\"image_\">\r\n    <div class=\"img-box\" style=\"float:left\" (click)=\"imgBlockClick(file.identifier)\">\r\n      <img *ngIf=\"(0 < file.url.length) \" [src]=\"file.url | safe: 'resourceUrl'\" [alt]=\"file.name\" height=\"120\" (click)=\"onSelectedFile(file)\">\r\n      <img *ngIf=\"file.url.length <= 0 \" src=\"assets/images/loading.gif\" alt=\"{{file.name}}\">\r\n      <input class=\"img-chk\" *ngIf=\"(0 < file.url.length)\" id = {{file.identifier}}_{{initTimestamp}} name=\"tag_chg_chk\" type=\"checkbox\" (change) =\"onChange(file.identifier)\" >\r\n    </div>\r\n  </span>\r\n</div>\r\n","export namespace UUID {\r\n  let lut = [];\r\n  for (let i = 0; i < 256; i++) {\r\n    lut[i] = (i < 16 ? '0' : '') + (i).toString(16);\r\n  }\r\n  export function generateUuid(): string {\r\n    const dvals = new Uint32Array(4);\r\n    window.crypto.getRandomValues(dvals);\r\n    const d0 = dvals[0];\r\n    const d1 = dvals[1];\r\n    const d2 = dvals[2];\r\n    const d3 = dvals[3];\r\n    return lut[d0 & 0xff] + lut[d0 >> 8 & 0xff] + lut[d0 >> 16 & 0xff] + lut[d0 >> 24 & 0xff] + '-' +\r\n      lut[d1 & 0xff] + lut[d1 >> 8 & 0xff] + '-' + lut[d1 >> 16 & 0x0f | 0x40] + lut[d1 >> 24 & 0xff] + '-' +\r\n      lut[d2 & 0x3f | 0x80] + lut[d2 >> 8 & 0xff] + '-' + lut[d2 >> 16 & 0xff] + lut[d2 >> 24 & 0xff] + lut[d3 & 0xff] + lut[d3 >> 8 & 0xff] + lut[d3 >> 16 & 0xff] + lut[d3 >> 24 & 0xff];\r\n  }\r\n}","import { Injectable } from '@angular/core';\r\nimport GameSystemClass from 'bcdice/lib/game_system';\r\n\r\nimport { ChatMessage, ChatMessageContext } from '@udonarium/chat-message';\r\nimport { ChatTab } from '@udonarium/chat-tab';\r\nimport { ChatTabList } from '@udonarium/chat-tab-list';\r\nimport { ObjectStore } from '@udonarium/core/synchronize-object/object-store';\r\nimport { Network } from '@udonarium/core/system';\r\nimport { GameCharacter } from '@udonarium/game-character';\r\nimport { PeerCursor } from '@udonarium/peer-cursor';\r\nimport { ImageStorage } from '@udonarium/core/file-storage/image-storage';\r\n\r\nimport { StringUtil } from '@udonarium/core/system/util/string-util';\r\n\r\nimport { DiceBot } from '@udonarium/dice-bot';\r\n\r\nconst HOURS = 60 * 60 * 1000;\r\n\r\n@Injectable()\r\nexport class ChatMessageService {\r\n  private intervalTimer: NodeJS.Timer = null;\r\n  private timeOffset: number = Date.now();\r\n  private performanceOffset: number = performance.now();\r\n\r\n  private ntpApiUrls: string[] = [\r\n    'https://ntp-a1.nict.go.jp/cgi-bin/json',\r\n    'https://ntp-b1.nict.go.jp/cgi-bin/json',\r\n  ];\r\n\r\n  gameType: string = 'DiceBot';\r\n\r\n  constructor() { }\r\n\r\n  get chatTabs(): ChatTab[] {\r\n    return ChatTabList.instance.chatTabs;\r\n  }\r\n\r\n  calibrateTimeOffset() {\r\n    if (this.intervalTimer != null) {\r\n      console.log('calibrateTimeOffset was canceled.');\r\n      return;\r\n    }\r\n    let index = Math.floor(Math.random() * this.ntpApiUrls.length);\r\n    let ntpApiUrl = this.ntpApiUrls[index];\r\n    let sendTime = performance.now();\r\n    fetch(ntpApiUrl)\r\n      .then(response => {\r\n        if (response.ok) return response.json();\r\n        throw new Error('Network response was not ok.');\r\n      })\r\n      .then(jsonObj => {\r\n        let endTime = performance.now();\r\n        let latency = (endTime - sendTime) / 2;\r\n        let timeobj = jsonObj;\r\n        let st: number = timeobj.st * 1000;\r\n        let fixedTime = st + latency;\r\n        this.timeOffset = fixedTime;\r\n        this.performanceOffset = endTime;\r\n        console.log('latency: ' + latency + 'ms');\r\n        console.log('st: ' + st + '');\r\n        console.log('timeOffset: ' + this.timeOffset);\r\n        console.log('performanceOffset: ' + this.performanceOffset);\r\n        this.setIntervalTimer();\r\n      })\r\n      .catch(error => {\r\n        console.warn('There has been a problem with your fetch operation: ', error.message);\r\n        this.setIntervalTimer();\r\n      });\r\n    this.setIntervalTimer();\r\n  }\r\n\r\n  private setIntervalTimer() {\r\n    if (this.intervalTimer != null) clearTimeout(this.intervalTimer);\r\n    this.intervalTimer = setTimeout(() => {\r\n      this.intervalTimer = null;\r\n      this.calibrateTimeOffset();\r\n    }, 6 * HOURS);\r\n  }\r\n\r\n  getTime(): number {\r\n    return Math.floor(this.timeOffset + (performance.now() - this.performanceOffset));\r\n  }\r\n\r\n  // 本家からachieNum?: number color? :string を追加\r\n  sendMessage(chatTab: ChatTab, text: string, gameSystem: GameSystemClass | null, sendFrom: string, sendTo?: string, tachieNum?: number, color? :string): ChatMessage {\r\n\r\n    let img;\r\n    let imgIndex;\r\n    if( tachieNum > 0 ){\r\n      imgIndex = tachieNum;\r\n    }else{\r\n      imgIndex = 0;\r\n    }\r\n    \r\n    let _color;\r\n    if( !color ){\r\n      _color = \"#000000\";\r\n    }else{\r\n      _color = color;\r\n    }\r\n    \r\n    let dicebot = ObjectStore.instance.get<DiceBot>('DiceBot');\r\n    let chatMessageTag: string;\r\n    if (gameSystem == null) {\r\n      chatMessageTag = '';\r\n    } else if (dicebot.checkSecretDiceCommand(gameSystem, text)) {\r\n      chatMessageTag = `${gameSystem.ID} secret`;\r\n    } else {\r\n      chatMessageTag = gameSystem.ID;\r\n    }\r\n\r\n    let chatMessage: ChatMessageContext = {\r\n      from: Network.peerContext.userId,\r\n      to: this.findId(sendTo),\r\n      name: this.makeMessageName(sendFrom, sendTo),\r\n      imageIdentifier: this.findImageIdentifier(sendFrom,imgIndex),//lily\r\n      timestamp: this.calcTimeStamp(chatTab),\r\n      tag: chatMessageTag,\r\n      text: text,\r\n      imagePos: this.findImagePos(sendFrom),//lily\r\n      messColor: _color,//lily\r\n      sendFrom: sendFrom //lily\r\n    };\r\n\r\n    // ハイド処理\r\n    let chkMessage = ' ' + StringUtil.toHalfWidth(text).toLowerCase();\r\n    let matches_array = chkMessage.match(/\\s@(\\S+)$/i);\r\n    if( matches_array ){\r\n      if( RegExp.$1 == 'hide' )\r\n        chatMessage.imageIdentifier = '';\r\n        \r\n      chatMessage.text = text.replace(/([@＠]\\S+)$/i,'');\r\n    }\r\n    \r\n    // 立ち絵置き換え\r\n    let matches_array_num = chkMessage.match(/\\s@(\\d+)$/i);\r\n    if( matches_array_num ){\r\n      let num: number = parseInt(RegExp.$1);\r\n      chatMessage.imageIdentifier = this.findImageIdentifier(sendFrom,num);\r\n\r\n      chatMessage.text = text.replace(/([@＠]\\S+)$/i,'');\r\n    }\r\n\r\n    return chatTab.addMessage(chatMessage);\r\n  }\r\n\r\n  private findId(identifier: string): string {\r\n    let object = ObjectStore.instance.get(identifier);\r\n    if (object instanceof GameCharacter) {\r\n      return object.identifier;\r\n    } else if (object instanceof PeerCursor) {\r\n      return object.userId;\r\n    }\r\n    return null;\r\n  }\r\n\r\n  private findObjectName(identifier: string): string {\r\n    let object = ObjectStore.instance.get(identifier);\r\n    if (object instanceof GameCharacter) {\r\n      return object.name;\r\n    } else if (object instanceof PeerCursor) {\r\n      return object.name;\r\n    }\r\n    return identifier;\r\n  }\r\n\r\n  private makeMessageName(sendFrom: string, sendTo?: string): string {\r\n    let sendFromName = this.findObjectName(sendFrom);\r\n    if (sendTo == null || sendTo.length < 1) return sendFromName;\r\n\r\n    let sendToName = this.findObjectName(sendTo);\r\n    return sendFromName + ' > ' + sendToName;\r\n  }\r\n\r\n  private findImageIdentifier(sendFrom,index:number): string {\r\n\r\n    let object = ObjectStore.instance.get(sendFrom);\r\n    if (object instanceof GameCharacter) {\r\n      console.log(\"object.imageDataElement.children.length\"+ object.imageDataElement.children.length);\r\n      if( object.imageDataElement.children.length  > index ){\r\n        let img = ImageStorage.instance.get(<string>object.imageDataElement.children[index].value);\r\n        if( img ){\r\n          return  img.identifier;\r\n        }\r\n      }\r\n      return '';\r\n    } else if (object instanceof PeerCursor) {\r\n      return object.imageIdentifier;\r\n    }\r\n    return sendFrom;\r\n\r\n  }\r\n\r\n//entyu\r\n  private findImagePos(identifier: string): number {\r\n    let object = ObjectStore.instance.get(identifier);\r\n    if (object instanceof GameCharacter) {\r\n//        let element = object.getElement('POS', object.detailDataElement);\r\n        let element = object.detailDataElement.getFirstElementByName('POS'); //1.13.xとのmargeで修正\r\n        if(element)\r\n            if( 0 <= <number>element.currentValue && <number>element.currentValue <= 11)\r\n                return <number>element.currentValue;\r\n        return 0;\r\n    }\r\n    return -1;\r\n  }\r\n//\r\n  private calcTimeStamp(chatTab: ChatTab): number {\r\n    let now = this.getTime();\r\n    let latest = chatTab.latestTimeStamp;\r\n    return now <= latest ? latest + 1 : now;\r\n  }\r\n}\r\n","import * as MessagePack from 'msgpack-lite';\r\n\r\nimport { EventSystem } from '../system';\r\nimport { ResettableTimeout } from '../system/util/resettable-timeout';\r\nimport { clearZeroTimeout, setZeroTimeout } from '../system/util/zero-timeout';\r\n\r\ninterface ChankData {\r\n  index: number;\r\n  length: number;\r\n  chank: Uint8Array;\r\n}\r\n\r\nexport class BufferSharingTask<T> {\r\n  readonly identifier: string;\r\n  readonly sendTo: string;\r\n\r\n  private data: T;\r\n  private uint8Array: Uint8Array;\r\n  private chanks: Uint8Array[] = [];\r\n  private chankSize: number = 32 * 1024;\r\n  private chankReceiveCount: number = 0;\r\n  private sendChankTimer: number;\r\n\r\n  private sentChankIndex = 0;\r\n  private completedChankIndex = 0;\r\n\r\n  private startTime = 0;\r\n  private isCanceled = false;\r\n\r\n  private onstart: () => void;\r\n  onprogress: (task: BufferSharingTask<T>, loded: number, total: number) => void;\r\n  onfinish: (task: BufferSharingTask<T>, data: T) => void;\r\n  ontimeout: (task: BufferSharingTask<T>) => void;\r\n  oncancel: (task: BufferSharingTask<T>) => void;\r\n\r\n  private timeoutTimer: ResettableTimeout;\r\n\r\n  private constructor(identifier: string, sendTo?: string, data?: T) {\r\n    this.identifier = identifier;\r\n    this.sendTo = sendTo;\r\n    this.data = data;\r\n  }\r\n\r\n  static createSendTask<T>(identifier: string, sendTo: string, data?: T): BufferSharingTask<T> {\r\n    let task = new BufferSharingTask(identifier, sendTo, data);\r\n    task.onstart = () => task.initializeSend();\r\n    return task;\r\n  }\r\n\r\n  static createReceiveTask<T>(identifier: string): BufferSharingTask<T> {\r\n    let task = new BufferSharingTask<T>(identifier);\r\n    task.onstart = () => task.initializeReceive();\r\n    return task;\r\n  }\r\n\r\n  start(data?: T) {\r\n    if (!this.onstart) {\r\n      console.warn('再起動する仕様など無い。');\r\n      return;\r\n    }\r\n    this.data = data;\r\n    this.onstart();\r\n    this.onstart = null;\r\n  }\r\n\r\n  private progress(loded: number, total: number) {\r\n    if (this.onprogress) this.onprogress(this, loded, total);\r\n  }\r\n\r\n  private finish() {\r\n    if (this.isCanceled) return;\r\n    this.isCanceled = true;\r\n    if (this.onfinish) this.onfinish(this, this.data);\r\n    this.dispose();\r\n  }\r\n\r\n  private timeout() {\r\n    if (this.isCanceled) return;\r\n    this.isCanceled = true;\r\n    if (this.ontimeout) this.ontimeout(this);\r\n    if (this.onfinish) this.onfinish(this, this.data);\r\n    this.dispose();\r\n  }\r\n\r\n  cancel() {\r\n    if (this.isCanceled) return;\r\n    if (this.sendTo != null) EventSystem.call('CANCEL_TASK_' + this.identifier, null, this.sendTo);\r\n    this._cancel();\r\n  }\r\n\r\n  private _cancel() {\r\n    if (this.isCanceled) return;\r\n    this.isCanceled = true;\r\n    if (this.oncancel) this.oncancel(this);\r\n    if (this.onfinish) this.onfinish(this, this.data);\r\n    this.dispose();\r\n  }\r\n\r\n  private dispose() {\r\n    EventSystem.unregister(this);\r\n    if (this.sendChankTimer) clearZeroTimeout(this.sendChankTimer);\r\n    if (this.timeoutTimer) this.timeoutTimer.clear();\r\n    this.sendChankTimer = null;\r\n    this.timeoutTimer = null;\r\n    this.onprogress = this.onfinish = this.ontimeout = this.oncancel = null;\r\n  }\r\n\r\n  private initializeSend() {\r\n    this.uint8Array = MessagePack.encode(this.data);\r\n    let total = Math.ceil(this.uint8Array.byteLength / this.chankSize);\r\n    this.chanks = new Array(total);\r\n\r\n    console.log('チャンク分割 ' + this.identifier, this.chanks.length);\r\n\r\n    EventSystem.register(this)\r\n      .on<number>('FILE_MORE_CHANK_' + this.identifier, event => {\r\n        if (this.sendTo !== event.sendFrom) return;\r\n        this.completedChankIndex = event.data;\r\n        if (this.sendChankTimer == null) {\r\n          this.resetTimeout();\r\n          this.sendChank(this.sentChankIndex + 1);\r\n        }\r\n      })\r\n      .on('DISCONNECT_PEER', event => {\r\n        if (event.data.peerId !== this.sendTo) return;\r\n        console.warn('送信キャンセル（Peer切断）', this, event.data.peerId);\r\n        this._cancel();\r\n      })\r\n      .on('CANCEL_TASK_' + this.identifier, event => {\r\n        console.warn('送信キャンセル', this, event.sendFrom);\r\n        this._cancel();\r\n      });\r\n    this.sentChankIndex = this.completedChankIndex = 0;\r\n    setZeroTimeout(() => this.sendChank(0));\r\n  }\r\n\r\n  private sendChank(index: number) {\r\n    let chank = this.uint8Array.slice(index * this.chankSize, (index + 1) * this.chankSize);\r\n    let data = { index: index, length: this.chanks.length, chank: chank };\r\n    EventSystem.call('FILE_SEND_CHANK_' + this.identifier, data, this.sendTo);\r\n    this.sentChankIndex = index;\r\n    this.sendChankTimer = null;\r\n    if (this.chanks.length <= index + 1) {\r\n      console.log('バッファ送信完了', this.identifier);\r\n      setZeroTimeout(() => this.finish());\r\n    } else if (this.completedChankIndex + 4 <= index) {\r\n      this.resetTimeout();\r\n    } else {\r\n      this.sendChankTimer = setZeroTimeout(() => { this.sendChank(this.sentChankIndex + 1); });\r\n    }\r\n  }\r\n\r\n  private initializeReceive() {\r\n    this.resetTimeout();\r\n    this.startTime = performance.now();\r\n    this.chankReceiveCount = 0;\r\n    EventSystem.register(this)\r\n      .on<ChankData>('FILE_SEND_CHANK_' + this.identifier, event => {\r\n        if (this.chanks.length < 1) this.chanks = new Array(event.data.length);\r\n\r\n        if (this.chanks[event.data.index] != null) {\r\n          console.log(`already received. [${event.data.index}] <${this.identifier}>`);\r\n          return;\r\n        }\r\n        this.chankReceiveCount++;\r\n        this.chanks[event.data.index] = event.data.chank;\r\n        this.progress(event.data.index, event.data.length);\r\n        if (this.chanks.length <= this.chankReceiveCount) {\r\n          this.finishReceive();\r\n        } else {\r\n          this.resetTimeout();\r\n          EventSystem.call('FILE_MORE_CHANK_' + this.identifier, event.data.index, event.sendFrom);\r\n        }\r\n      })\r\n      .on('DISCONNECT_PEER', event => {\r\n        if (event.data.peerId !== this.sendTo) return;\r\n        console.warn('受信キャンセル（Peer切断）', this, event.data.peerId);\r\n        this._cancel();\r\n      })\r\n      .on('CANCEL_TASK_' + this.identifier, event => {\r\n        console.warn('受信キャンセル', this, event.sendFrom);\r\n        this._cancel();\r\n      });\r\n  }\r\n\r\n  private finishReceive() {\r\n    console.log('バッファ受信完了', this.identifier);\r\n\r\n    let sumLength = 0;\r\n    for (let chank of this.chanks) { sumLength += chank.byteLength; }\r\n\r\n    let time = performance.now() - this.startTime;\r\n    let rate = (sumLength / 1024 / 1024) / (time / 1000);\r\n    console.log(`${(sumLength / 1024).toFixed(2)}KB ${(time / 1000).toFixed(2)}秒 転送速度: ${rate.toFixed(2)}MB/s`);\r\n\r\n    let uint8Array = new Uint8Array(sumLength);\r\n    let pos = 0;\r\n\r\n    for (let chank of this.chanks) {\r\n      uint8Array.set(chank, pos);\r\n      pos += chank.byteLength;\r\n    }\r\n\r\n    this.data = MessagePack.decode(uint8Array);\r\n    this.finish();\r\n  }\r\n\r\n  private resetTimeout() {\r\n    if (this.timeoutTimer == null) this.timeoutTimer = new ResettableTimeout(() => this.timeout(), 30 * 1000);\r\n    this.timeoutTimer.reset();\r\n  }\r\n}\r\n","import { EventSystem } from '../system';\r\nimport { ResettableTimeout } from '../system/util/resettable-timeout';\r\nimport { AudioFile, AudioFileContext, AudioState } from './audio-file';\r\n\r\nexport type CatalogItem = { readonly identifier: string, readonly state: number };\r\n\r\nexport class AudioStorage {\r\n  private static _instance: AudioStorage\r\n  static get instance(): AudioStorage {\r\n    if (!AudioStorage._instance) AudioStorage._instance = new AudioStorage();\r\n    return AudioStorage._instance;\r\n  }\r\n\r\n  private lazyTimer: ResettableTimeout;\r\n  private hash: { [identifier: string]: AudioFile } = {};\r\n\r\n  get audios(): AudioFile[] {\r\n    let audios: AudioFile[] = [];\r\n    for (let identifier in this.hash) {\r\n      audios.push(this.hash[identifier]);\r\n    }\r\n    return audios;\r\n  }\r\n\r\n  private constructor() {\r\n    console.log('AudioStorage ready...');\r\n  }\r\n\r\n  private destroy() {\r\n    for (let identifier in this.hash) {\r\n      this.delete(identifier);\r\n    }\r\n  }\r\n\r\n  async addAsync(file: File): Promise<AudioFile>\r\n  async addAsync(blob: Blob): Promise<AudioFile>\r\n  async addAsync(arg: any): Promise<AudioFile> {\r\n    let audio: AudioFile = await AudioFile.createAsync(arg);\r\n\r\n    return this._add(audio);\r\n  }\r\n\r\n  add(url: string): AudioFile\r\n  add(audio: AudioFile): AudioFile\r\n  add(context: AudioFileContext): AudioFile\r\n  add(arg: any): AudioFile {\r\n    let audio: AudioFile;\r\n    if (typeof arg === 'string') {\r\n      audio = AudioFile.create(arg);\r\n    } else if (arg instanceof AudioFile) {\r\n      audio = arg;\r\n    } else {\r\n      if (this.update(arg)) return this.hash[arg.identifier];\r\n      audio = AudioFile.create(arg);\r\n    }\r\n    return this._add(audio);\r\n  }\r\n\r\n  private _add(audio: AudioFile): AudioFile {\r\n    if (AudioState.COMPLETE <= audio.state) this.lazySynchronize(100);\r\n    if (this.update(audio)) return this.hash[audio.identifier];\r\n    this.hash[audio.identifier] = audio;\r\n    console.log('add Audio: ' + audio.identifier);\r\n    return audio;\r\n  }\r\n\r\n  private update(audio: AudioFile): boolean\r\n  private update(audio: AudioFileContext): boolean\r\n  private update(audio: any): boolean {\r\n    let context: AudioFileContext;\r\n    if (audio instanceof AudioFile) {\r\n      context = audio.toContext();\r\n    } else {\r\n      context = audio;\r\n    }\r\n    let updateAudio: AudioFile = this.hash[audio.identifier];\r\n    if (updateAudio) {\r\n      updateAudio.apply(audio);\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  delete(identifier: string): boolean {\r\n    let audio: AudioFile = this.hash[identifier];\r\n    if (audio) {\r\n      audio.destroy();\r\n      delete this.hash[identifier];\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  get(identifier: string): AudioFile {\r\n    let audio: AudioFile = this.hash[identifier];\r\n    if (audio) return audio;\r\n    return null;\r\n  }\r\n\r\n  synchronize(peer?: string) {\r\n    if (this.lazyTimer) this.lazyTimer.stop();\r\n    EventSystem.call('SYNCHRONIZE_AUDIO_LIST', this.getCatalog(), peer);\r\n  }\r\n\r\n  lazySynchronize(ms: number, peer?: string) {\r\n    if (this.lazyTimer == null) this.lazyTimer = new ResettableTimeout(() => this.synchronize(peer), ms);\r\n    this.lazyTimer.reset(ms);\r\n  }\r\n\r\n  getCatalog(): CatalogItem[] {\r\n    let catalog: CatalogItem[] = [];\r\n    for (let audio of AudioStorage.instance.audios) {\r\n      if (AudioState.COMPLETE <= audio.state) {\r\n        catalog.push({ identifier: audio.identifier, state: audio.state });\r\n      }\r\n    }\r\n    return catalog;\r\n  }\r\n}\r\n","import { AfterViewInit, ChangeDetectionStrategy, ChangeDetectorRef, Component, OnDestroy, OnInit } from '@angular/core';\r\n\r\nimport { GameObject } from '@udonarium/core/synchronize-object/game-object';\r\nimport { ObjectStore } from '@udonarium/core/synchronize-object/object-store';\r\nimport { EventSystem, Network } from '@udonarium/core/system';\r\nimport { DataElement } from '@udonarium/data-element';\r\nimport { SortOrder } from '@udonarium/data-summary-setting';\r\nimport { GameCharacter } from '@udonarium/game-character';\r\nimport { PresetSound, SoundEffect } from '@udonarium/sound-effect';\r\nimport { TabletopObject } from '@udonarium/tabletop-object';\r\n\r\nimport { ChatPaletteComponent } from 'component/chat-palette/chat-palette.component';\r\nimport { GameCharacterSheetComponent } from 'component/game-character-sheet/game-character-sheet.component';\r\nimport { ContextMenuAction, ContextMenuService, ContextMenuSeparator } from 'service/context-menu.service';\r\nimport { GameObjectInventoryService } from 'service/game-object-inventory.service';\r\nimport { PanelOption, PanelService } from 'service/panel.service';\r\nimport { PointerDeviceService } from 'service/pointer-device.service';\r\n\r\nimport { RemoteControllerComponent } from 'component/remote-controller/remote-controller.component';\r\n\r\n@Component({\r\n  selector: 'game-object-inventory',\r\n  templateUrl: './game-object-inventory.component.html',\r\n  styleUrls: ['./game-object-inventory.component.css'],\r\n  changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class GameObjectInventoryComponent implements OnInit, AfterViewInit, OnDestroy {\r\n  inventoryTypes: string[] = ['table', 'common', 'graveyard'];\r\n\r\n  selectTab: string = 'table';\r\n  selectedIdentifier: string = '';\r\n\r\n  isEdit: boolean = false;\r\n  disptimer = null;\r\n\r\n  get sortTag(): string { return this.inventoryService.sortTag; }\r\n  set sortTag(sortTag: string) { this.inventoryService.sortTag = sortTag; }\r\n  get sortOrder(): SortOrder { return this.inventoryService.sortOrder; }\r\n  set sortOrder(sortOrder: SortOrder) { this.inventoryService.sortOrder = sortOrder; }\r\n  get dataTag(): string { return this.inventoryService.dataTag; }\r\n  set dataTag(dataTag: string) { this.inventoryService.dataTag = dataTag; }\r\n  get dataTags(): string[] { return this.inventoryService.dataTags; }\r\n\r\n  get sortOrderName(): string { return this.sortOrder === SortOrder.ASC ? '昇順' : '降順'; }\r\n\r\n  get newLineString(): string { return this.inventoryService.newLineString; }\r\n\r\n  constructor(\r\n    private changeDetector: ChangeDetectorRef,\r\n    private panelService: PanelService,\r\n    private inventoryService: GameObjectInventoryService,\r\n    private contextMenuService: ContextMenuService,\r\n    private pointerDeviceService: PointerDeviceService\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    Promise.resolve().then(() => this.panelService.title = 'インベントリ');\r\n    EventSystem.register(this)\r\n      .on('SELECT_TABLETOP_OBJECT', -1000, event => {\r\n        if (ObjectStore.instance.get(event.data.identifier) instanceof TabletopObject) {\r\n          this.selectedIdentifier = event.data.identifier;\r\n          this.changeDetector.markForCheck();\r\n        }\r\n      })\r\n      .on('SYNCHRONIZE_FILE_LIST', event => {\r\n        if (event.isSendFromSelf) this.changeDetector.markForCheck();\r\n      })\r\n      .on('UPDATE_INVENTORY', event => {\r\n        if (event.isSendFromSelf) this.changeDetector.markForCheck();\r\n      })\r\n      .on('OPEN_NETWORK', event => {\r\n        this.inventoryTypes = ['table', 'common', Network.peerId, 'graveyard'];\r\n        if (!this.inventoryTypes.includes(this.selectTab)) {\r\n          this.selectTab = Network.peerId;\r\n        }\r\n      });\r\n    this.inventoryTypes = ['table', 'common', Network.peerId, 'graveyard'];\r\n\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    this.disptimer = setInterval(() => {\r\n      this.changeDetector.detectChanges();\r\n    }, 200 );\r\n    //インベントリ非表示機能のために追加、操作を検知して更新する方式に変えたい\r\n    \r\n  }\r\n\r\n  ngOnDestroy() {\r\n    EventSystem.unregister(this);\r\n    this.disptimer = null;\r\n  }\r\n\r\n  getTabTitle(inventoryType: string) {\r\n    switch (inventoryType) {\r\n      case 'table':\r\n        return 'テーブル';\r\n      case Network.peerId:\r\n        return '個人';\r\n      case 'graveyard':\r\n        return '墓場';\r\n      default:\r\n        return '共有';\r\n    }\r\n  }\r\n\r\n  getInventory(inventoryType: string) {\r\n    switch (inventoryType) {\r\n      case 'table':\r\n        return this.inventoryService.tableInventory;\r\n      case Network.peerId:\r\n        return this.inventoryService.privateInventory;\r\n      case 'graveyard':\r\n        return this.inventoryService.graveyardInventory;\r\n      default:\r\n        return this.inventoryService.commonInventory;\r\n    }\r\n  }\r\n\r\n  getGameObjects(inventoryType: string): TabletopObject[] {\r\n    switch (inventoryType) {\r\n      case 'table':\r\n        \r\n        let tableCharacterList_dest = [] ;\r\n        let tableCharacterList_scr = this.inventoryService.tableInventory.tabletopObjects;\r\n        for (let character of tableCharacterList_scr) {\r\n          let character_ : GameCharacter = <GameCharacter>character;\r\n          if( !character_.hideInventory ) tableCharacterList_dest.push( <TabletopObject>character );\r\n        }\r\n        return tableCharacterList_dest;\r\n\r\n      default:\r\n        return this.getInventory(inventoryType).tabletopObjects;\r\n    }\r\n  }\r\n\r\n  getInventoryTags(gameObject: GameCharacter): DataElement[] {\r\n    return this.getInventory(gameObject.location.name).dataElementMap.get(gameObject.identifier);\r\n  }\r\n\r\n  onContextMenu(e: Event, gameObject: GameCharacter) {\r\n    if (document.activeElement instanceof HTMLInputElement && document.activeElement.getAttribute('type') !== 'range') return;\r\n    e.stopPropagation();\r\n    e.preventDefault();\r\n\r\n    if (!this.pointerDeviceService.isAllowedToOpenContextMenu) return;\r\n\r\n    this.selectGameObject(gameObject);\r\n\r\n    let position = this.pointerDeviceService.pointers[0];\r\n\r\n    let actions: ContextMenuAction[] = [];\r\n\r\n    actions.push({ name: '詳細を表示', action: () => { this.showDetail(gameObject); } });\r\n    if (gameObject.location.name !== 'graveyard') {\r\n      actions.push({ name: 'チャットパレットを表示', action: () => { this.showChatPalette(gameObject) } });\r\n      actions.push({ name: 'リモコンを表示', action: () => { this.showRemoteController(gameObject) } });\r\n    }\r\n    actions.push(ContextMenuSeparator);\r\n    let locations = [\r\n      { name: 'table', alias: 'テーブルに移動' },\r\n      { name: 'common', alias: '共有イベントリに移動' },\r\n      { name: Network.peerId, alias: '個人イベントリに移動' },\r\n      { name: 'graveyard', alias: '墓場に移動' }\r\n    ];\r\n    for (let location of locations) {\r\n      if (gameObject.location.name === location.name) continue;\r\n      actions.push({\r\n        name: location.alias, action: () => {\r\n          gameObject.setLocation(location.name);\r\n          SoundEffect.play(PresetSound.piecePut);\r\n        }\r\n      });\r\n    }\r\n\r\n    if (gameObject.location.name === 'graveyard') {\r\n      actions.push({\r\n        name: '削除する', action: () => {\r\n          this.deleteGameObject(gameObject);\r\n          SoundEffect.play(PresetSound.sweep);\r\n        }\r\n      });\r\n    }\r\n    actions.push(ContextMenuSeparator);\r\n    actions.push({\r\n      name: 'コピーを作る', action: () => {\r\n        this.cloneGameObject(gameObject);\r\n        SoundEffect.play(PresetSound.piecePut);\r\n      }\r\n    });\r\n\r\n    this.contextMenuService.open(position, actions, gameObject.name);\r\n  }\r\n\r\n  toggleEdit() {\r\n    this.isEdit = !this.isEdit;\r\n  }\r\n\r\n  cleanInventory() {\r\n    let tabTitle = this.getTabTitle(this.selectTab);\r\n    let gameObjects = this.getGameObjects(this.selectTab);\r\n    if (!confirm(`${tabTitle}に存在する${gameObjects.length}個の要素を完全に削除しますか？`)) return;\r\n    for (const gameObject of gameObjects) {\r\n      this.deleteGameObject(gameObject);\r\n    }\r\n    SoundEffect.play(PresetSound.sweep);\r\n  }\r\n\r\n  private cloneGameObject(gameObject: TabletopObject) {\r\n    gameObject.clone();\r\n  }\r\n\r\n  private showDetail(gameObject: GameCharacter) {\r\n    EventSystem.trigger('SELECT_TABLETOP_OBJECT', { identifier: gameObject.identifier, className: gameObject.aliasName });\r\n    let coordinate = this.pointerDeviceService.pointers[0];\r\n    let title = 'キャラクターシート';\r\n    if (gameObject.name.length) title += ' - ' + gameObject.name;\r\n    let option: PanelOption = { title: title, left: coordinate.x - 800, top: coordinate.y - 300, width: 800, height: 600 };\r\n    let component = this.panelService.open<GameCharacterSheetComponent>(GameCharacterSheetComponent, option);\r\n    component.tabletopObject = gameObject;\r\n  }\r\n\r\n  private showChatPalette(gameObject: GameCharacter) {\r\n    let coordinate = this.pointerDeviceService.pointers[0];\r\n    let option: PanelOption = { left: coordinate.x - 250, top: coordinate.y - 175, width: 615, height: 350 };\r\n    let component = this.panelService.open<ChatPaletteComponent>(ChatPaletteComponent, option);\r\n    component.character = gameObject;\r\n  }\r\n\r\n  private showRemoteController(gameObject: GameCharacter) {\r\n    let coordinate = this.pointerDeviceService.pointers[0];\r\n    let option: PanelOption = { left: coordinate.x - 250, top: coordinate.y - 175, width: 700, height: 600 };\r\n    let component = this.panelService.open<RemoteControllerComponent>(RemoteControllerComponent, option);\r\n    component.character = gameObject;\r\n\r\n  }\r\n\r\n  private focusToObject(e: Event, gameObject: GameCharacter) {\r\n    if (!(e.target instanceof HTMLElement)) { return; }\r\n    if (e.target.tagName.toLowerCase() == 'input') { return; }\r\n    if (gameObject.location.name != \"table\") { return; }\r\n    EventSystem.trigger('FOCUS_TO_TABLETOP_COORDINATE', { x: gameObject.location.x, y: gameObject.location.y });\r\n  }\r\n\r\n  selectGameObject(gameObject: GameObject) {\r\n    let aliasName: string = gameObject.aliasName;\r\n    EventSystem.trigger('SELECT_TABLETOP_OBJECT', { identifier: gameObject.identifier, className: gameObject.aliasName });\r\n    EventSystem.trigger('HIGHTLIGHT_TABLETOP_OBJECT', { identifier: gameObject.identifier });\r\n  }\r\n\r\n  private deleteGameObject(gameObject: GameObject) {\r\n    gameObject.destroy();\r\n    this.changeDetector.markForCheck();\r\n  }\r\n\r\n  trackByGameObject(index: number, gameObject: GameObject) {\r\n    return gameObject ? gameObject.identifier : index;\r\n  }\r\n}\r\n","<div class=\"component\">\r\n  <ng-container *ngTemplateOutlet=\"inventoryTab\"></ng-container>\r\n  <ng-container *ngTemplateOutlet=\"inventoryViewSetting\"></ng-container>\r\n  <div *ngIf=\"getGameObjects(selectTab).length < 1\">{{getTabTitle(selectTab)}}清單為空</div>\r\n<!--    <ng-container *ngIf=\"!gameObject.hideInventory && gameObject.location.name == 'table'\"> -->\r\n  <div (contextmenu)=\"onContextMenu($event, gameObject)\" *ngFor=\"let gameObject of getGameObjects(selectTab); trackBy: trackByGameObject\"\r\n     (click)=\"selectGameObject(gameObject)\"  (dblclick)=\"focusToObject($event, gameObject)\"\r\n     [ngClass]=\"{'box': true, 'selected': (selectedIdentifier === gameObject.identifier)}\">\r\n    <ng-container *ngTemplateOutlet=\"gameObjectTags; context:{ gameObject: gameObject}\"></ng-container>\r\n  </div>\r\n\r\n  <div *ngIf=\"selectTab === 'graveyard'\" style=\"padding-top: 6px;\">\r\n    <button class=\"danger\" (click)=\"cleanInventory()\" [attr.disabled]=\"getGameObjects(selectTab).length < 1 ? '' : null\">清空墓地</button>\r\n  </div>\r\n</div>\r\n\r\n<ng-template #inventoryTab>\r\n  <form class=\"is-sticky-top\">\r\n    <div class=\"tab\">\r\n      <label *ngFor=\"let inventoryType of inventoryTypes\">\r\n        <input name=\"tab\" type=\"radio\" value=\"{{inventoryType}}\" ng-control=\"options\" [(ngModel)]=\"selectTab\">\r\n        <div>{{getTabTitle(inventoryType)}} ({{getInventory(inventoryType).length}})</div>\r\n      </label>\r\n    </div>\r\n  </form>\r\n</ng-template>\r\n<ng-template #inventoryViewSetting>\r\n  <ng-container *ngIf=\"isEdit\">\r\n    <div>\r\n      <div style=\"font-size: 12px;\">排列次序</div>\r\n      <input [(ngModel)]=\"sortTag\" placeholder=\"標籤名稱\" />\r\n      <select [(ngModel)]=\"sortOrder\">\r\n        <option value=\"ASC\">昇順</option>\r\n        <option value=\"DESC\">降順</option>\r\n      </select>\r\n    </div>\r\n    <div style=\"font-size: 12px; padding-top: 6px;\">顯示項目</div>\r\n    <input style=\"width: 100%; box-sizing: border-box;\" [(ngModel)]=\"dataTag\" placeholder=\"用空格將各標籤分隔 斜線隔行 ex.「HP MP / 備註」\" />\r\n    <div style=\"padding-top: 6px;\">\r\n      <button class=\"tab-setting small-font\" (click)=\"toggleEdit()\"><i class=\"material-icons small-font\">settings</i>完了</button>\r\n    </div>\r\n  </ng-container>\r\n  <ng-container *ngIf=\"!isEdit\">\r\n    <table style=\"font-size: 0.8em;\">\r\n      <tr>\r\n        <th style=\" vertical-align:middle;\">排列次序:</th>\r\n        <td style=\" vertical-align:middle;\">\r\n          <ng-container *ngIf=\"0 < sortTag.length\">{{sortTag}} ({{sortOrderName}})</ng-container>\r\n          <ng-container *ngIf=\"sortTag.length < 1\">-</ng-container>\r\n        </td>\r\n        <td><button class=\"tab-setting small-font\" (click)=\"toggleEdit()\"><i class=\"material-icons small-font\">settings</i>設定</button></td>\r\n      </tr>\r\n    </table>\r\n  </ng-container>\r\n</ng-template>\r\n<ng-template #gameObjectTags let-gameObject=\"gameObject\">\r\n  <div class=\"inventory-object\">\r\n    <div class=\"object-name\">{{gameObject.name}}\r\n      <button style=\"font-size: 0.8em; padding: 2px 5px;\" *ngIf=\"selectedIdentifier === gameObject.identifier\" (click)=\"onContextMenu($event, gameObject)\">\r\n        <i class=\"material-icons\" style=\"font-size: 1em;\">settings</i>\r\n      </button>\r\n    </div>\r\n    <div class=\"object-tags-box\">\r\n      <div class=\"table-cell image-box\">\r\n        <img *ngIf=\"gameObject.imageFile.url\" [src]=\"gameObject.imageFile.url | safe: 'resourceUrl'\" />\r\n      </div>\r\n      <div class=\"table-cell\">\r\n        <div *ngIf=\"gameObject.rootDataElement\">\r\n          <ng-container *ngFor=\"let dataElm of getInventoryTags(gameObject); trackBy: trackByGameObject\">\r\n            <ng-container *ngTemplateOutlet=\"dataElmTag; context:{ dataElm: dataElm}\"></ng-container>\r\n          </ng-container>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</ng-template>\r\n<ng-template #dataElmTag let-dataElm=\"dataElm\">\r\n  <ng-container *ngIf=\"dataElm?.name === newLineString\"><br></ng-container>\r\n  <div *ngIf=\"dataElm && dataElm.name !== newLineString\" class=\"object-tag\">\r\n    <ng-container [ngSwitch]=\"dataElm.attributes['type']\">\r\n      <ng-container *ngSwitchCase=\"'numberResource'\">\r\n        <div class=\"resource-tag\">\r\n          <div style=\"font-size: 0.8em; display: inline-block; margin-right: 0.5em;\">{{dataElm.name}}</div>\r\n          <input class=\"input resource-value\" type=\"number\" size=\"1\" [(ngModel)]=\"dataElm.currentValue\" placeholder=\"Value\" />\r\n        </div>\r\n        <div class=\"resource-tag\">\r\n          <input type=\"range\" [style]=\"'font-size: 0.8em; min-width: 1em; width:' + (dataElm.name.length + 4.5) + 'em; --min: 0; --max: ' + dataElm.value + '; --val:' + dataElm.currentValue +';' | safe: 'style'\"\r\n            min=\"0\" max=\"{{dataElm.value}}\" [(ngModel)]=\"dataElm.currentValue\" />\r\n        </div>\r\n      </ng-container>\r\n      <ng-container *ngSwitchDefault>\r\n        <div class=\"tag-name\">{{dataElm.name}}</div>\r\n        <div style=\"text-align: center;\">\r\n          <div style=\"display: inline-block;\">\r\n            <div class=\"tag-value-box\">\r\n              <div class=\"hidden-spacer\" style=\"font-weight: bold;\">{{dataElm.value}}</div>\r\n              <input class=\"input tag-value\" size=\"1\" [(ngModel)]=\"dataElm.value\" placeholder=\"\" />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </ng-container>\r\n    </ng-container>\r\n  </div>\r\n</ng-template>\r\n","import { SyncObject, SyncVar } from './core/synchronize-object/decorator';\r\nimport { ObjectNode } from './core/synchronize-object/object-node';\r\nimport { EventSystem } from './core/system';\r\nimport { GameTableMask } from './game-table-mask';\r\nimport { Terrain } from './terrain';\r\n\r\nexport enum GridType {\r\n  NONE = -1,\r\n  SQUARE = 0,\r\n  HEX_VERTICAL = 1,\r\n  HEX_HORIZONTAL = 2,\r\n}\r\n\r\nexport enum FilterType {\r\n  NONE = '',\r\n  WHITE = 'white',\r\n  BLACK = 'black',\r\n}\r\n\r\n@SyncObject('game-table')\r\nexport class GameTable extends ObjectNode {\r\n  @SyncVar() name: string = '桌面';\r\n  @SyncVar() width: number = 20;\r\n  @SyncVar() height: number = 20;\r\n  @SyncVar() gridSize: number = 50;\r\n  @SyncVar() imageIdentifier: string = 'imageIdentifier';\r\n  @SyncVar() backgroundImageIdentifier: string = 'imageIdentifier';\r\n  @SyncVar() backgroundFilterType: FilterType = FilterType.NONE;\r\n  @SyncVar() selected: boolean = false;\r\n  @SyncVar() gridType: GridType = GridType.SQUARE;\r\n  @SyncVar() gridColor: string = '#000000e6';\r\n\r\n  get terrains(): Terrain[] {\r\n    let terrains: Terrain[] = [];\r\n    this.children.forEach(object => {\r\n      if (object instanceof Terrain) terrains.push(object);\r\n    });\r\n    return terrains;\r\n  }\r\n\r\n  get masks(): GameTableMask[] {\r\n    let masks: GameTableMask[] = [];\r\n    this.children.forEach(object => {\r\n      if (object instanceof GameTableMask) masks.push(object);\r\n    });\r\n    return masks;\r\n  }\r\n\r\n  // GameObject Lifecycle\r\n  onStoreAdded() {\r\n    super.onStoreAdded();\r\n    if (this.selected) EventSystem.trigger('SELECT_GAME_TABLE', { identifier: this.identifier });\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { Card } from '@udonarium/card';\r\nimport { CardStack } from '@udonarium/card-stack';\r\nimport { ChatTab } from '@udonarium/chat-tab';\r\nimport { ChatTabList } from '@udonarium/chat-tab-list';\r\nimport { ObjectSerializer } from '@udonarium/core/synchronize-object/object-serializer';\r\nimport { ObjectStore } from '@udonarium/core/synchronize-object/object-store';\r\nimport { EventSystem } from '@udonarium/core/system';\r\nimport { DiceSymbol } from '@udonarium/dice-symbol';\r\nimport { GameCharacter } from '@udonarium/game-character';\r\nimport { GameTable } from '@udonarium/game-table';\r\nimport { GameTableMask } from '@udonarium/game-table-mask';\r\nimport { PeerCursor } from '@udonarium/peer-cursor';\r\nimport { PresetSound, SoundEffect } from '@udonarium/sound-effect';\r\nimport { TableSelecter } from '@udonarium/table-selecter';\r\nimport { TabletopObject } from '@udonarium/tabletop-object';\r\nimport { Terrain } from '@udonarium/terrain';\r\nimport { TextNote } from '@udonarium/text-note';\r\n\r\nimport { CoordinateService } from './coordinate.service';\r\n//本家PR #92より\r\nimport { ImageTag } from '@udonarium/image-tag';\r\n//\r\nimport { DataElement } from '@udonarium/data-element';\r\nimport { DiceTable } from '@udonarium/dice-table';\r\nimport { DiceTablePalette } from '@udonarium/chat-palette';\r\ntype ObjectIdentifier = string;\r\ntype LocationName = string;\r\n\r\n@Injectable()\r\nexport class TabletopService {\r\n  private _emptyTable: GameTable = new GameTable('');\r\n  get tableSelecter(): TableSelecter { return ObjectStore.instance.get<TableSelecter>('tableSelecter'); }\r\n  get currentTable(): GameTable {\r\n    let table = this.tableSelecter.viewTable;\r\n    return table ? table : this._emptyTable;\r\n  }\r\n\r\n  private locationMap: Map<ObjectIdentifier, LocationName> = new Map();\r\n  private parentMap: Map<ObjectIdentifier, ObjectIdentifier> = new Map();\r\n  private characterCache = new TabletopCache<GameCharacter>(() => ObjectStore.instance.getObjects(GameCharacter).filter(obj => obj.isVisibleOnTable));\r\n  private cardCache = new TabletopCache<Card>(() => ObjectStore.instance.getObjects(Card).filter(obj => obj.isVisibleOnTable));\r\n  private cardStackCache = new TabletopCache<CardStack>(() => ObjectStore.instance.getObjects(CardStack).filter(obj => obj.isVisibleOnTable));\r\n  private tableMaskCache = new TabletopCache<GameTableMask>(() => {\r\n    let viewTable = this.tableSelecter.viewTable;\r\n    return viewTable ? viewTable.masks : [];\r\n  });\r\n  private terrainCache = new TabletopCache<Terrain>(() => {\r\n    let viewTable = this.tableSelecter.viewTable;\r\n    return viewTable ? viewTable.terrains : [];\r\n  });\r\n  private textNoteCache = new TabletopCache<TextNote>(() => ObjectStore.instance.getObjects(TextNote));\r\n  private diceSymbolCache = new TabletopCache<DiceSymbol>(() => ObjectStore.instance.getObjects(DiceSymbol));\r\n\r\n  get characters(): GameCharacter[] { return this.characterCache.objects; }\r\n  get cards(): Card[] { return this.cardCache.objects; }\r\n  get cardStacks(): CardStack[] { return this.cardStackCache.objects; }\r\n  get tableMasks(): GameTableMask[] { return this.tableMaskCache.objects; }\r\n  get terrains(): Terrain[] { return this.terrainCache.objects; }\r\n  get textNotes(): TextNote[] { return this.textNoteCache.objects; }\r\n  get diceSymbols(): DiceSymbol[] { return this.diceSymbolCache.objects; }\r\n  get peerCursors(): PeerCursor[] { return ObjectStore.instance.getObjects<PeerCursor>(PeerCursor); }\r\n\r\n  constructor(\r\n    private coordinateService: CoordinateService\r\n  ) {\r\n    console.log('円柱 constructor時');\r\n    this.initialize();\r\n  }\r\n\r\n  private initialize() {\r\n    this.refreshCacheAll();\r\n    EventSystem.register(this)\r\n      .on('UPDATE_GAME_OBJECT', -1000, event => {\r\n         console.log('UPDATE_GAME_OBJECT' + event);\r\n        if (event.data.identifier === this.currentTable.identifier || event.data.identifier === this.tableSelecter.identifier) {\r\n          this.refreshCache(GameTableMask.aliasName);\r\n          this.refreshCache(Terrain.aliasName);\r\n          return;\r\n        }\r\n\r\n        let object = ObjectStore.instance.get(event.data.identifier);\r\n        if (!object || !(object instanceof TabletopObject)) {\r\n          this.refreshCache(event.data.aliasName);\r\n        } else if (this.shouldRefreshCache(object)) {\r\n          this.refreshCache(event.data.aliasName);\r\n          this.updateMap(object);\r\n        }\r\n      })\r\n      .on('DELETE_GAME_OBJECT', -1000, event => {\r\n        let garbage = ObjectStore.instance.get(event.data.identifier);\r\n         console.log('DELETE_GAME_OBJECT');\r\n        if (garbage == null || garbage.aliasName.length < 1) {\r\n          this.refreshCacheAll();\r\n        } else {\r\n          this.refreshCache(garbage.aliasName);\r\n        }\r\n      })\r\n      .on('XML_LOADED', event => {\r\n        let xmlElement: Element = event.data.xmlElement;\r\n        // todo:立体地形の上にドロップした時の挙動\r\n        console.log('parseXml todo:立体地形の上にドロップした時の挙動');\r\n\r\n        let gameObject = ObjectSerializer.instance.parseXml(xmlElement);\r\n        \r\n        if (gameObject instanceof TabletopObject) {\r\n          console.log('TabletopObject 追加');\r\n          let pointer = this.coordinateService.calcTabletopLocalCoordinate();\r\n          gameObject.location.x = pointer.x - 25;\r\n          gameObject.location.y = pointer.y - 25;\r\n          gameObject.posZ = pointer.z;\r\n          this.placeToTabletop(gameObject);\r\n          SoundEffect.play(PresetSound.piecePut);\r\n        } else if (gameObject instanceof ChatTab) {\r\n\r\n          ChatTabList.instance.addChatTab(gameObject);\r\n\r\n        } \r\n\r\n        //通常版データが投下されたときに、追加が必要な要素を追加\r\n        let objects: TabletopObject[] = ObjectStore.instance.getObjects(GameCharacter);\r\n        for (let gameObject of objects) {\r\n          if (gameObject instanceof GameCharacter) {\r\n            console.log('GameCharacter Load 追加データ確認');\r\n            let gameCharacter:GameCharacter =  gameObject;\r\n            gameCharacter.addExtendData();\r\n          }\r\n        }        \r\n\r\n      });\r\n  }\r\n\r\n  private findCache(aliasName: string): TabletopCache<any> {\r\n    switch (aliasName) {\r\n      case GameCharacter.aliasName:\r\n        return this.characterCache;\r\n      case Card.aliasName:\r\n        return this.cardCache;\r\n      case CardStack.aliasName:\r\n        return this.cardStackCache;\r\n      case GameTableMask.aliasName:\r\n        return this.tableMaskCache;\r\n      case Terrain.aliasName:\r\n        return this.terrainCache;\r\n      case TextNote.aliasName:\r\n        return this.textNoteCache;\r\n      case DiceSymbol.aliasName:\r\n        return this.diceSymbolCache;\r\n      default:\r\n        return null;\r\n    }\r\n  }\r\n\r\n  private refreshCache(aliasName: string) {\r\n    let cache = this.findCache(aliasName);\r\n    if (cache) cache.refresh();\r\n  }\r\n\r\n  private refreshCacheAll() {\r\n    this.characterCache.refresh();\r\n    this.cardCache.refresh();\r\n    this.cardStackCache.refresh();\r\n    this.tableMaskCache.refresh();\r\n    this.terrainCache.refresh();\r\n    this.textNoteCache.refresh();\r\n    this.diceSymbolCache.refresh();\r\n    this.clearMap();\r\n  }\r\n\r\n  private shouldRefreshCache(object: TabletopObject): boolean {\r\n    return this.locationMap.get(object.identifier) !== object.location.name || this.parentMap.get(object.identifier) !== object.parentId;\r\n  }\r\n\r\n  private updateMap(object: TabletopObject) {\r\n    this.locationMap.set(object.identifier, object.location.name);\r\n    this.parentMap.set(object.identifier, object.parentId);\r\n  }\r\n\r\n  private clearMap() {\r\n    this.locationMap.clear();\r\n    this.parentMap.clear();\r\n  }\r\n\r\n  private placeToTabletop(gameObject: TabletopObject) {\r\n    switch (gameObject.aliasName) {\r\n      case GameTableMask.aliasName:\r\n        if (gameObject instanceof GameTableMask) gameObject.isLock = false;\r\n      case Terrain.aliasName:\r\n        if (gameObject instanceof Terrain) gameObject.isLocked = false;\r\n        if (!this.tableSelecter || !this.tableSelecter.viewTable) return;\r\n        this.tableSelecter.viewTable.appendChild(gameObject);\r\n        break;\r\n      default:\r\n        gameObject.setLocation('table');\r\n        break;\r\n    }\r\n  }\r\n/* #marge\r\n  calcTabletopLocalCoordinate(\r\n    x: number = this.pointerDeviceService.pointers[0].x,\r\n    y: number = this.pointerDeviceService.pointers[0].y,\r\n    target: HTMLElement = this.pointerDeviceService.targetElement\r\n  ): PointerCoordinate {\r\n    let coordinate: PointerCoordinate = { x: x, y: y, z: 0 };\r\n    if (target.contains(this.dragAreaElement)) {\r\n      coordinate = PointerDeviceService.convertToLocal(coordinate, this.dragAreaElement);\r\n      coordinate.z = 0;\r\n    } else {\r\n      coordinate = PointerDeviceService.convertLocalToLocal(coordinate, target, this.dragAreaElement);\r\n    }\r\n    return { x: coordinate.x, y: coordinate.y, z: 0 < coordinate.z ? coordinate.z : 0 };\r\n  }\r\n*/\r\n\r\n\r\n/*\r\n  makeDefaultTabletopObjects() {\r\n    let testCharacter: GameCharacter = null;\r\n    let testFile: ImageFile = null;\r\n    let fileContext: ImageContext = null;\r\n\r\n    //-------------------------\r\n    testCharacter = new GameCharacter('testCharacter_1');\r\n\r\n    fileContext = ImageFile.createEmpty('testCharacter_1_image').toContext();\r\n    fileContext.url = './assets/images/mon_052.gif';\r\n    testFile = ImageStorage.instance.add(fileContext);\r\n    \r\n    \r\n    ImageTag.create(testFile.identifier).tag = 'モンスター';    //本家PR #92より\r\n        \r\n    testCharacter.location.x = 5 * 50;\r\n    testCharacter.location.y = 9 * 50;\r\n    testCharacter.initialize();\r\n    testCharacter.createTestGameDataElement('モンスターA', 1, testFile.identifier);\r\n    this.addBuffRound( testCharacter ,'テストバフ1' , '防+1' , 3);\r\n\r\n    //-------------------------\r\n    testCharacter = new GameCharacter('testCharacter_2');\r\n\r\n    testCharacter.location.x = 8 * 50;\r\n    testCharacter.location.y = 8 * 50;\r\n    testCharacter.initialize();\r\n    testCharacter.createTestGameDataElement('モンスターB', 1, testFile.identifier);\r\n\r\n    //-------------------------\r\n    testCharacter = new GameCharacter('testCharacter_3');\r\n\r\n    fileContext = ImageFile.createEmpty('testCharacter_3_image').toContext();\r\n    fileContext.url = './assets/images/mon_128.gif';\r\n//本家PR #92より\r\n//  fileContext.tag = 'テスト01';\r\n    testFile = ImageStorage.instance.add(fileContext);\r\n\r\n    ImageTag.create(testFile.identifier).tag = 'モンスター'; //本家PR #92より\r\n\r\n    testCharacter.location.x = 4 * 50;\r\n    testCharacter.location.y = 2 * 50;\r\n    testCharacter.initialize();\r\n    testCharacter.createTestGameDataElement('モンスターC', 3, testFile.identifier);\r\n\r\n    //-------------------------\r\n    testCharacter = new GameCharacter('testCharacter_4');\r\n\r\n    fileContext = ImageFile.createEmpty('testCharacter_4_image').toContext();\r\n    fileContext.url = './assets/images/mon_150.gif';\r\n//本家PR #92より\r\n//    fileContext.tag = 'テスト01';\r\n    testFile = ImageStorage.instance.add(fileContext);\r\n\r\n    ImageTag.create(testFile.identifier).tag = '';//本家PR #92より\r\n\r\n    testCharacter.location.x = 6 * 50;\r\n    testCharacter.location.y = 11 * 50;\r\n    testCharacter.initialize();\r\n    testCharacter.createTestGameDataElement('キャラクターA', 1, testFile.identifier);\r\n    this.addBuffRound( testCharacter ,'テストバフ2' , '攻撃+10' , 1);\r\n\r\n    //-------------------------\r\n    testCharacter = new GameCharacter('testCharacter_5');\r\n\r\n    fileContext = ImageFile.createEmpty('testCharacter_5_image').toContext();\r\n    fileContext.url = './assets/images/mon_211.gif';\r\n    testFile = ImageStorage.instance.add(fileContext);\r\n    \r\n    ImageTag.create(testFile.identifier).tag = ''; //本家PR #92より\r\n\r\n    testCharacter.location.x = 12 * 50;\r\n    testCharacter.location.y = 12 * 50;\r\n    testCharacter.initialize();\r\n    testCharacter.createTestGameDataElement('キャラクターB', 1, testFile.identifier);\r\n    this.addBuffRound( testCharacter ,'テストバフ2' , '攻撃+10' , 1);\r\n\r\n    testCharacter = new GameCharacter('testCharacter_5B');\r\n\r\n    fileContext = ImageFile.createEmpty('testCharacter_5_image').toContext();\r\n    fileContext.url = './assets/images/mon_211.gif';\r\n    testFile = ImageStorage.instance.add(fileContext);\r\n    \r\n    ImageTag.create(testFile.identifier).tag = ''; //本家PR #92より\r\n\r\n    testCharacter.location.x = 11 * 50;\r\n    testCharacter.location.y = 10 * 50;\r\n    testCharacter.initialize();\r\n    testCharacter.createTestGameDataElementExtendSample('Bのサブコマ', 1, testFile.identifier);\r\n    \r\n    testCharacter.hideInventory = true;\r\n    testCharacter.nonTalkFlag = true;\r\n    testCharacter.overViewWidth = 350;\r\n    testCharacter.overViewMaxHeight = 350;\r\n    //-------------------------\r\n    testCharacter = new GameCharacter('testCharacter_6');\r\n\r\n    fileContext = ImageFile.createEmpty('testCharacter_6_image').toContext();\r\n    fileContext.url = './assets/images/mon_135.gif';\r\n    testFile = ImageStorage.instance.add(fileContext);\r\n    \r\n    ImageTag.create(testFile.identifier).tag = '';//本家PR #92より\r\n\r\n    testCharacter.initialize();\r\n    testCharacter.location.x = 5 * 50;\r\n    testCharacter.location.y = 13 * 50;\r\n    testCharacter.createTestGameDataElement('キャラクターC', 1, testFile.identifier);\r\n    this.addBuffRound( testCharacter ,'テストバフ3' , '回避+5' , 1);\r\n    \r\n    \r\n  }\r\n*/\r\n\r\n/*\r\n  getContextMenuActionsForCreateObject(position: PointerCoordinate): ContextMenuAction[] {\r\n    return [\r\n      this.getCreateCharacterMenu(position),\r\n      this.getCreateTableMaskMenu(position),\r\n      this.getCreateTerrainMenu(position),\r\n      this.getCreateTextNoteMenu(position),\r\n      this.getCreateTrumpMenu(position),\r\n      this.getCreateDiceSymbolMenu(position),\r\n    ];\r\n  }\r\n*/\r\n  /*\r\n  private getCreateCharacterMenu(position: PointerCoordinate): ContextMenuAction {\r\n    return {\r\n      name: 'キャラクターを作成', action: () => {\r\n        let character = this.createGameCharacter(position);\r\n        EventSystem.trigger('SELECT_TABLETOP_OBJECT', { identifier: character.identifier, className: character.aliasName });\r\n        SoundEffect.play(PresetSound.piecePut);\r\n      }\r\n    }\r\n  }\r\n  */\r\n  /*\r\n  private getCreateTableMaskMenu(position: PointerCoordinate): ContextMenuAction {\r\n    return {\r\n      name: 'マップマスクを作成', action: () => {\r\n        this.createGameTableMask(position);\r\n        SoundEffect.play(PresetSound.cardPut);\r\n      }\r\n    }\r\n  }\r\n  */\r\n  /*\r\n  private getCreateTerrainMenu(position: PointerCoordinate): ContextMenuAction {\r\n    return {\r\n      name: '地形を作成', action: () => {\r\n        this.createTerrain(position);\r\n        SoundEffect.play(PresetSound.blockPut);\r\n      }\r\n    }\r\n  }\r\n  */\r\n  /*\r\n  private getCreateTextNoteMenu(position: PointerCoordinate): ContextMenuAction {\r\n    return {\r\n      name: '共有メモを作成', action: () => {\r\n        this.createTextNote(position);\r\n        SoundEffect.play(PresetSound.cardPut);\r\n      }\r\n    }\r\n  }\r\n  */\r\n  /*\r\n  private getCreateTrumpMenu(position: PointerCoordinate): ContextMenuAction {\r\n    return {\r\n      name: 'トランプの山札を作成', action: () => {\r\n        this.createTrump(position);\r\n        SoundEffect.play(PresetSound.cardPut);\r\n      }\r\n    }\r\n  }\r\n  */\r\n  /*\r\n  private getCreateDiceSymbolMenu(position: PointerCoordinate): ContextMenuAction {\r\n    let dices: { menuName: string, diceName: string, type: DiceType, imagePathPrefix: string }[] = [\r\n      { menuName: 'D4', diceName: 'D4', type: DiceType.D4, imagePathPrefix: '4_dice' },\r\n      { menuName: 'D6', diceName: 'D6', type: DiceType.D6, imagePathPrefix: '6_dice' },\r\n      { menuName: 'D8', diceName: 'D8', type: DiceType.D8, imagePathPrefix: '8_dice' },\r\n      { menuName: 'D10', diceName: 'D10', type: DiceType.D10, imagePathPrefix: '10_dice' },\r\n      { menuName: 'D10 (00-90)', diceName: 'D10', type: DiceType.D10_10TIMES, imagePathPrefix: '100_dice' },\r\n      { menuName: 'D12', diceName: 'D12', type: DiceType.D12, imagePathPrefix: '12_dice' },\r\n      { menuName: 'D20', diceName: 'D20', type: DiceType.D20, imagePathPrefix: '20_dice' },\r\n    ];\r\n    let subMenus: ContextMenuAction[] = [];\r\n\r\n    dices.forEach(item => {\r\n      subMenus.push({\r\n        name: item.menuName, action: () => {\r\n          this.createDiceSymbol(position, item.diceName, item.type, item.imagePathPrefix);\r\n          SoundEffect.play(PresetSound.dicePut);\r\n        }\r\n      });\r\n    });\r\n    return { name: 'ダイスを作成', action: null, subActions: subMenus };\r\n  }\r\n  */\r\n  \r\n}\r\n\r\nclass TabletopCache<T extends TabletopObject> {\r\n  private needsRefresh: boolean = true;\r\n\r\n  private _objects: T[] = [];\r\n  get objects(): T[] {\r\n    if (this.needsRefresh) {\r\n      this._objects = this.refreshCollector();\r\n      this._objects = this._objects ? this._objects : [];\r\n      this.needsRefresh = false;\r\n    }\r\n    return this._objects;\r\n  }\r\n\r\n  constructor(\r\n    readonly refreshCollector: () => T[]\r\n  ) { }\r\n\r\n  refresh() {\r\n    this.needsRefresh = true;\r\n  }\r\n}\r\n","import { ChatMessage, ChatMessageContext } from './chat-message';\r\nimport { SyncObject, SyncVar } from './core/synchronize-object/decorator';\r\nimport { ObjectNode } from './core/synchronize-object/object-node';\r\nimport { InnerXml, ObjectSerializer } from './core/synchronize-object/object-serializer';\r\nimport { EventSystem } from './core/system';\r\n\r\nimport { ImageFile } from './core/file-storage/image-file';\r\nimport { ImageStorage } from './core/file-storage/image-storage';\r\n\r\nimport { PeerCursor } from '@udonarium/peer-cursor';\r\nimport { Network } from '@udonarium/core/system';\r\nimport { PeerContext } from '@udonarium/core/system/network/peer-context';\r\n\r\nimport { ObjectStore } from '@udonarium/core/synchronize-object/object-store';\r\nimport { CutInLauncher } from './cut-in-launcher';\r\n\r\n@SyncObject('chat-tab')\r\nexport class ChatTab extends ObjectNode implements InnerXml {\r\n  @SyncVar() name: string = 'タブ';\r\n\r\n  @SyncVar() pos_num: number = -1;\r\n  @SyncVar() imageIdentifier: string[] = ['a','b','c','d','e','f','g','h','i','j','k','l'];\r\n  @SyncVar() imageCharactorName: string[] = ['#0','#1','#2','#3','#4','#5','#6','#7','#8','#9','#10','#11'];\r\n  @SyncVar() imageIdentifierZpos: number[] = [0,1,2,3,4,5,6,7,8,9,10,11];\r\n\r\n  @SyncVar() count:number = 0;\r\n  @SyncVar() imageIdentifierDummy: string = 'test';//通信開始ために使わなくても書かなきゃだめっぽい後日見直し\r\n\r\n  get cutInLauncher(): CutInLauncher { return ObjectStore.instance.get<CutInLauncher>('CutInLauncher'); }\r\n\r\n  tachieReset(){\r\n    this.imageIdentifier = ['a','b','c','d','e','f','g','h','i','j','k','l'];\r\n    this.imageCharactorName = ['#0','#1','#2','#3','#4','#5','#6','#7','#8','#9','#10','#11'];\r\n    this.imageIdentifierZpos = [0,1,2,3,4,5,6,7,8,9,10,11];\r\n    this.imageIdentifierDummy = 'test';\r\n  }\r\n\r\n\r\n//  imageDispFlag: boolean[] = [false,false,false,false,false,false,false,false,false,false,false,false];\r\n  imageDispFlag: boolean[] = [true,true,true,true,true,true,true,true,true,true,true,true];\r\n\r\n  get chatMessages(): ChatMessage[] { return <ChatMessage[]>this.children; }\r\n\r\n  get imageZposList( ): number[] {\r\n    let ret:number[] = this.imageIdentifierZpos.slice();\r\n    return ret;\r\n  }\r\n\r\n  getImageCharactorPos(name:string){\r\n    for (let i = 0; i < this.imageCharactorName.length ; i++) {\r\n      if( name == this.imageCharactorName[i] ){\r\n        return i;\r\n      }\r\n    }\r\n    return -1;\r\n  }\r\n\r\n  tachiePosHide( pos :number ){\r\n    this.imageDispFlag[pos] = false;\r\n    console.log( this.imageDispFlag );\r\n  }\r\n\r\n  tachiePosIsDisp( pos :number ):boolean{\r\n    return this.imageDispFlag[pos];\r\n  }\r\n\r\n  tachieZindex( toppos : number ):number {\r\n    let index = this.imageIdentifierZpos.indexOf( Number(toppos) );\r\n    return index;\r\n  }\r\n\r\n  public chatSimpleDispFlag = 0;\r\n  public tachieDispFlag = 1;\r\n\r\n  replaceTachieZindex( toppos : number ){\r\n    let index = this.imageIdentifierZpos.indexOf( Number(toppos) );\r\n    if( index >= 0 ){\r\n      this.imageIdentifierZpos.splice(index,1);\r\n      this.imageIdentifierZpos.push( Number(toppos) );\r\n      console.log( 'imageIdentifierZpos = ' + this.imageIdentifierZpos ); \r\n    }\r\n  }\r\n\r\n  private _dispCharctorIcon: boolean = true;\r\n  get dispCharctorIcon(): boolean { return this._dispCharctorIcon; }\r\n  set dispCharctorIcon( flag : boolean) { this._dispCharctorIcon = flag; }\r\n\r\n  private _unreadLength: number = 0;\r\n  get unreadLength(): number { return this._unreadLength; }\r\n  get hasUnread(): boolean { return 0 < this.unreadLength; }\r\n\r\n  get latestTimeStamp(): number {\r\n    let lastIndex = this.chatMessages.length - 1;\r\n    return lastIndex < 0 ? 0 : this.chatMessages[lastIndex].timestamp;\r\n  }\r\n  \r\n  // ObjectNode Lifecycle\r\n  onChildAdded(child: ObjectNode) {\r\n    super.onChildAdded(child);\r\n    if (child.parent === this && child instanceof ChatMessage && child.isDisplayable) {\r\n      if(this.children.length == 1){ //ログデリート時\r\n        this._unreadLength = 1;\r\n      }else{\r\n        this._unreadLength++;\r\n      }\r\n\r\n      if ( child.to != null && child.to !== '') {\r\n        // 秘話時に立ち絵の更新をかけない(処理なし)\r\n      }else{\r\n        //マウスクリック非表示を復帰する\r\n        this.imageDispFlag[child.imagePos] = true;\r\n//        console.log(\"立ち絵テスト3 this.imageDispFlag[child.imagePos]\" + child.imagePos + \" / \"+this.imageDispFlag[child.imagePos] + \":\");\r\n      }\r\n\r\n      EventSystem.trigger('MESSAGE_ADDED', { tabIdentifier: this.identifier, messageIdentifier: child.identifier });\r\n    }\r\n  }\r\n  \r\n  addMessage(message: ChatMessageContext): ChatMessage {\r\n    message.tabIdentifier = this.identifier;\r\n\r\n    let chat = new ChatMessage();\r\n    for (let key in message) {\r\n      console.log('addMessage:'+key);\r\n      if (key === 'identifier') continue;\r\n      if (key === 'tabIdentifier') continue;\r\n      \r\n      if (key === 'text') {\r\n        chat.value = message[key];\r\n        continue;\r\n      }\r\n      if (message[key] == null || message[key] === '') continue;\r\n\r\n      if (key === 'imagePos') {\r\n        if (message['to'] != null && message['to'] !== '') { continue; } // 秘話時に立ち絵の更新をかけない\r\n        this.pos_num = message[key];\r\n        if( 0 <= this.pos_num && this.pos_num < this.imageIdentifier.length ){\r\n          let oldpos = this.getImageCharactorPos(message['name']);\r\n          if( oldpos >= 0 ){ //同名キャラの古い位置を消去\r\n            this.imageIdentifier[oldpos] = '';\r\n            this.imageCharactorName[oldpos] = '';\r\n            this.imageDispFlag[oldpos] = false;\r\n          }\r\n          //非表示コマンド\\s\r\n\r\n          if( message['imageIdentifier'] == '' ){\r\n            //事前に古い立ち絵は消す処理をしているため処理なし\r\n          }else{\r\n           \r\n            this.imageIdentifier[this.pos_num] = message['imageIdentifier'];\r\n            this.imageCharactorName[this.pos_num] =message['name'];\r\n            this.replaceTachieZindex(this.pos_num);\r\n            this.imageDispFlag[this.pos_num] = true;\r\n\r\n            chat.setAttribute(key, message[key]);\r\n          }\r\n          this.imageIdentifierDummy = message['imageIdentifier'];//同期方法が無理やり感がある、後日\r\n           \r\n        }\r\n        continue;\r\n      }\r\n\r\n      chat.setAttribute(key, message[key]);\r\n    }\r\n    chat.initialize();\r\n    \r\n    if( 0 > chat.tags.indexOf('secret') ){\r\n      this.cutInLauncher.chatActivateCutIn( chat.text , message['to'] );//カットイン末尾発動\r\n    }\r\n \r\n    EventSystem.trigger('SEND_MESSAGE', { tabIdentifier: this.identifier, messageIdentifier: chat.identifier });\r\n\r\n    EventSystem.trigger('DICE_TABLE_MESSAGE', { tabIdentifier: this.identifier, messageIdentifier: chat.identifier });\r\n\r\n    EventSystem.trigger('RESOURCE_EDIT_MESSAGE', { tabIdentifier: this.identifier, messageIdentifier: chat.identifier });\r\n    \r\n    //2021年4月実装のえいぷりるコマンド判定    \r\n    EventSystem.trigger('APRIL_MESSAGE', { tabIdentifier: this.identifier, messageIdentifier: chat.identifier });\r\n\r\n\r\n    this.appendChild(chat);\r\n    return chat;\r\n  }\r\n\r\n  markForRead() {\r\n    this._unreadLength = 0;\r\n  }\r\n\r\n  innerXml(): string {\r\n    let xml = '';\r\n    for (let child of this.children) {\r\n      if (child instanceof ChatMessage && !child.isDisplayable) continue;\r\n      xml += ObjectSerializer.instance.toXml(child);\r\n    }\r\n    return xml;\r\n  };\r\n  \r\n  //ChatMessageに入れるか考えたがログ以外に使わないのでここにおく\r\n  messageHtml( isTime : boolean , tabName : string, message : ChatMessage ): string{\r\n    let str :string = '';\r\n    if( message ) {\r\n      \r\n      if( tabName ) str += \"[\" + this.escapeHtml( tabName ) + \"]\";\r\n      \r\n      if( isTime ){\r\n        let date = new Date( message.timestamp );\r\n        str += ( '00' + date.getHours() ).slice( -2 ) + \":\" +  ( '00' + date.getMinutes()).slice( -2 ) + \"：\";\r\n      }\r\n      \r\n      str += \"<font color='\";\r\n      if( message.messColor ) str += message.messColor.toLowerCase();\r\n      str += \"'>\";\r\n\r\n      str += \"<b>\";\r\n      if( message.name ) str += this.escapeHtml( message.name );\r\n      str += \"</b>\";\r\n      \r\n      str += \"：\";\r\n      if( !message.isSecret || message.isSendFromSelf ){\r\n        if( message.text ) str += this.escapeHtml( message.text ).replace(/\\n/g,'<br>');\r\n      }else{\r\n        str += \"（シークレットダイス）\";\r\n      }\r\n      str += \"</font><br>\";\r\n      \r\n      str += '\\n';\r\n    }\r\n    return str;\r\n  }\r\n    \r\n  escapeHtml(string) {\r\n    if(typeof string !== 'string') {\r\n      return string;\r\n    }\r\n    return string.replace(/[&'`\"<>]/g, function(match){\r\n      return {\r\n        '&': '&amp;',\r\n        \"'\": '&#x27;',\r\n        '`': '&#x60;',\r\n        '\"': '&quot;',\r\n        '<': '&lt;',\r\n        '>': '&gt;',\r\n      }[match]\r\n    });\r\n  }\r\n\r\n\r\n  logHtml( ): string {\r\n    \r\n    let head : string =     \r\n    \"<?xml version='1.0' encoding='UTF-8'?>\"+'\\n'+\r\n    \"<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Transitional//EN' 'http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd'>\"+'\\n'+\r\n    \"<html xmlns='http://www.w3.org/1999/xhtml' lang='ja'>\"+'\\n'+\r\n    \"  <head>\"+'\\n'+\r\n    \"    <meta http-equiv='Content-Type' content='text/html; charset=UTF-8' />\"+'\\n'+\r\n    \"    <title>チャットログ：\" + this.escapeHtml( this.name ) + \"</title>\"+'\\n'+\r\n    \"  </head>\"+'\\n'+\r\n    \"  <body>\"+'\\n';\r\n\r\n    let last : string =\r\n    \"\"+'\\n'+\r\n    \"  </body>\"+'\\n'+\r\n    \"</html>\";\r\n\r\n    let main : string = \"\";\r\n\r\n\r\n    for (let mess of this.chatMessages ) {\r\n      let to = mess.to;\r\n      let from = mess.from;\r\n      let myId = Network.peerContext.userId;//1.13.xとのmargeで修正\r\n      console.log( \"from:\" + mess.from\r\n                  + \" To:\" + mess.to + \"myId:\" + myId);\r\n      if( to ){\r\n        if( ( to != myId) && ( from != myId) ){\r\n          continue;\r\n        }\r\n      }\r\n\r\n      main += this.messageHtml( true , '' , mess );\r\n    }\r\n    let str :string = head + main + last;\r\n    \r\n    return str;\r\n  }\r\n\r\n  parseInnerXml(element: Element) {\r\n    return super.parseInnerXml(element);\r\n  };\r\n}\r\n","import { Component, NgZone, OnDestroy, OnInit } from '@angular/core';\r\nimport { AudioFile } from '@udonarium/core/file-storage/audio-file';\r\nimport { AudioPlayer, VolumeType } from '@udonarium/core/file-storage/audio-player';\r\nimport { AudioStorage } from '@udonarium/core/file-storage/audio-storage';\r\nimport { FileArchiver } from '@udonarium/core/file-storage/file-archiver';\r\nimport { ObjectStore } from '@udonarium/core/synchronize-object/object-store';\r\nimport { Jukebox } from '@udonarium/Jukebox';\r\nimport { CutInLauncher } from '@udonarium/cut-in-launcher';\r\n\r\nimport { ModalService } from 'service/modal.service';\r\nimport { PanelOption, PanelService } from 'service/panel.service';\r\n\r\nimport { ImageFile } from '@udonarium/core/file-storage/image-file';\r\nimport { ImageStorage } from '@udonarium/core/file-storage/image-storage';\r\nimport { ObjectSerializer } from '@udonarium/core/synchronize-object/object-serializer';\r\n\r\nimport { EventSystem, Network } from '@udonarium/core/system';\r\nimport { CutIn } from '@udonarium/cut-in';\r\n\r\nimport { FileSelecterComponent } from 'component/file-selecter/file-selecter.component';\r\nimport { CutInBgmComponent } from 'component/cut-in-bgm/cut-in-bgm.component';\r\nimport { SaveDataService } from 'service/save-data.service';\r\n\r\nimport { PointerDeviceService } from 'service/pointer-device.service';\r\n\r\n@Component({\r\n  selector: 'app-cut-in-list',\r\n  templateUrl: './cut-in-list.component.html',\r\n  styleUrls: ['./cut-in-list.component.css']\r\n})\r\nexport class CutInListComponent implements OnInit, OnDestroy {\r\n  \r\n  minSize: number = 10;\r\n  maxSize: number = 1200;\r\n\r\n  get cutInLauncher(): CutInLauncher { return ObjectStore.instance.get<CutInLauncher>('CutInLauncher'); }\r\n  \r\n  get cutInName(): string { return this.isEditable ? this.selectedCutIn.name : '' ; }\r\n  set cutInName(cutInName: string) { if (this.isEditable) this.selectedCutIn.name = cutInName; }\r\n\r\n  set cutInWidth(cutInWidth: number) { \r\n    if (this.isEditable) this.selectedCutIn.width = cutInWidth; \r\n\r\n    if( this.keepImageAspect ){\r\n       this.selectedCutIn.height = Math.floor(  cutInWidth  * this.originalImgHeight() /  this.originalImgWidth() );\r\n       console.log(\" this.keepImageAspect H\" + this.selectedCutIn.height);\r\n    }\r\n  }\r\n  set cutInHeight(cutInHeight: number) {\r\n    if (this.isEditable) this.selectedCutIn.height = cutInHeight; \r\n\r\n    if( this.keepImageAspect ){\r\n       this.selectedCutIn.width = Math.floor(  cutInHeight *  this.originalImgWidth() /  this.originalImgHeight() );\r\n       console.log(\" this.keepImageAspect W\" + this.selectedCutIn.width);\r\n    }\r\n  }\r\n\r\n\r\n  \r\n  get cutInWidth(): number { \r\n    if( !this.isEditable ) return 0;\r\n    if( !this.selectedCutIn ) return 0;\r\n    \r\n    if( this.cutInOriginalSize ){\r\n      this.selectedCutIn.width = this.originalImgWidth();\r\n    }\r\n    return  this.selectedCutIn.width ; \r\n  }\r\n\r\n  get cutInHeight(): number { \r\n    if( !this.isEditable ) return 0;\r\n    if( !this.selectedCutIn ) return 0;\r\n\r\n    if( this.cutInOriginalSize ){\r\n      this.selectedCutIn.height = this.originalImgHeight();\r\n    }\r\n    return  this.selectedCutIn.height ; \r\n  }\r\n\r\n  keepImageAspect: boolean = false;\r\n  \r\n  chkImageAspect( ){\r\n\r\n    if( !this.isEditable ) return 0;\r\n    if( !this.selectedCutIn ) return 0;\r\n    \r\n    setTimeout(() => { \r\n      if( this.keepImageAspect ){\r\n        let imageurl = this.selectedCutIn.cutInImage.url;\r\n        if( imageurl.length > 0 ){\r\n          let img = new Image();\r\n          img.src = imageurl;\r\n          console.log(\"img.height /  img.width \" + img.height + \" \"+  img.width);\r\n          this.selectedCutIn.height = Math.floor(  this.selectedCutIn.width  * img.height /  img.width );\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n\r\n\r\n\r\n  get cutInX_Pos(): number { return this.isEditable ? this.selectedCutIn.x_pos : 0 ; }\r\n  set cutInX_Pos(cutInX_Pos: number) { if (this.isEditable) this.selectedCutIn.x_pos = cutInX_Pos; }\r\n\r\n  get cutInY_Pos(): number { return this.isEditable ? this.selectedCutIn.y_pos : 0 ; }\r\n  set cutInY_Pos(cutInY_Pos: number) { if (this.isEditable) this.selectedCutIn.y_pos = cutInY_Pos; }\r\n\r\n  get cutInOriginalSize(): boolean { return this.isEditable ? this.selectedCutIn.originalSize : false ; }\r\n  set cutInOriginalSize(cutInOriginalSize: boolean) { if (this.isEditable) this.selectedCutIn.originalSize = cutInOriginalSize; }\r\n\r\n  get cutInIsLoop(): boolean { return this.isEditable ? this.selectedCutIn.isLoop : false ; }\r\n  set cutInIsLoop(cutInIsLoop: boolean) { if (this.isEditable) this.selectedCutIn.isLoop = cutInIsLoop; }\r\n\r\n  get chatActivate(): boolean { return this.isEditable ? this.selectedCutIn.chatActivate : false ; }\r\n  set chatActivate(chatActivate: boolean) { if (this.isEditable) this.selectedCutIn.chatActivate = chatActivate; }\r\n\r\n  get cutInOutTime(): number { return this.isEditable ? this.selectedCutIn.outTime : 0 ; }\r\n  set cutInOutTime(cutInOutTime: number) { if (this.isEditable) this.selectedCutIn.outTime = cutInOutTime; }\r\n\r\n  get cutInUseOutUrl(): boolean { return this.isEditable ? this.selectedCutIn.useOutUrl : false ; }\r\n  set cutInUseOutUrl(cutInUseOutUrl: boolean) { if (this.isEditable) this.selectedCutIn.useOutUrl = cutInUseOutUrl; }\r\n\r\n  get cutInOutUrl(): string { return this.isEditable ? this.selectedCutIn.outUrl : '' ; }\r\n  set cutInOutUrl(cutInOutUrl: string) { if (this.isEditable) this.selectedCutIn.outUrl = cutInOutUrl; }\r\n\r\n  get cutInTagName(): string { return this.isEditable ? this.selectedCutIn.tagName : '' ; }\r\n  set cutInTagName(cutInTagName: string) { if (this.isEditable) this.selectedCutIn.tagName = cutInTagName; }\r\n\r\n  get cutInAudioName(): string { return this.isEditable ? this.selectedCutIn.audioName : '' ; }\r\n  set cutInAudioName(cutInAudioName: string) { if (this.isEditable) this.selectedCutIn.audioName = cutInAudioName; }\r\n\r\n  get cutInAudioIdentifier(): string { return this.isEditable ? this.selectedCutIn.audioIdentifier : '' ; }\r\n  set cutInAudioIdentifier(cutInAudioIdentifier: string) { if (this.isEditable) this.selectedCutIn.audioIdentifier = cutInAudioIdentifier; }\r\n\r\n  get audios(): AudioFile[] { return AudioStorage.instance.audios.filter(audio => !audio.isHidden); }\r\n\r\n  get jukebox(): Jukebox { return ObjectStore.instance.get<Jukebox>('Jukebox'); }\r\n\r\n  get cutInImage(): ImageFile {\r\n    if (!this.selectedCutIn) return ImageFile.Empty;\r\n    let file = ImageStorage.instance.get(this.selectedCutIn.imageIdentifier);\r\n    return file ? file : ImageFile.Empty;\r\n  }\r\n  \r\n  private lazyUpdateTimer: NodeJS.Timer = null;\r\n  selectedCutIn: CutIn = null;\r\n\r\n  get isSelected(): boolean { return this.selectedCutIn ? true : false; }\r\n  get isEditable(): boolean {\r\n    return !this.isEmpty && this.isSelected;\r\n  }\r\n\r\n  get isEmpty(): boolean { return false ; }\r\n\r\n  isSaveing: boolean = false;\r\n  progresPercent: number = 0;\r\n\r\n  constructor(\r\n    private pointerDeviceService: PointerDeviceService,//\r\n    private modalService: ModalService,\r\n    private saveDataService: SaveDataService,\r\n    private panelService: PanelService,\r\n    private ngZone: NgZone\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    Promise.resolve().then(() => this.modalService.title = this.panelService.title = 'カットインリスト');\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    EventSystem.unregister(this);\r\n  }\r\n\r\n\r\n  selectCutIn(identifier: string) {\r\n    this.selectedCutIn = ObjectStore.instance.get<CutIn>(identifier);\r\n  }\r\n\r\n  getCutIns(): CutIn[] {\r\n    return ObjectStore.instance.getObjects(CutIn);\r\n  }\r\n\r\n  createCutIn() {\r\n    let cutIn = new CutIn();\r\n    cutIn.name = '未設定のカットイン';\r\n    cutIn.imageIdentifier = 'testTableBackgroundImage_image';\r\n    cutIn.initialize();\r\n    this.selectCutIn(cutIn.identifier);\r\n  }\r\n\r\n  async save() {\r\n    if (!this.selectedCutIn) return;\r\n    this.isSaveing = true;\r\n    this.progresPercent = 0;\r\n\r\n    this.selectedCutIn.selected = true;\r\n    let fileName: string = 'cut_' + this.selectedCutIn.name;\r\n\r\n    await this.saveDataService.saveGameObjectAsync(this.selectedCutIn, fileName, percent => {\r\n      this.progresPercent = percent;\r\n    });\r\n\r\n    setTimeout(() => {\r\n      this.isSaveing = false;\r\n      this.progresPercent = 0;\r\n    }, 500);\r\n  }\r\n\r\n  delete() {\r\n    if (!this.isEmpty && this.selectedCutIn) {\r\n      this.selectedCutIn.destroy();\r\n      this.selectedCutIn = null;\r\n    }\r\n  }\r\n\r\n  openCutInImageModal() {\r\n    if (!this.isSelected) return;\r\n    this.modalService.open<string>(FileSelecterComponent).then(value => {\r\n      if (!this.selectedCutIn || !value) return;\r\n      this.selectedCutIn.imageIdentifier = value;\r\n    });\r\n  }\r\n\r\n  openCutInBgmModal() {\r\n    if (!this.isSelected) return;\r\n    this.modalService.open<string>(CutInBgmComponent).then(value => {\r\n      console.log('CUTIN '+ value);\r\n      if (!this.selectedCutIn || !value) return;\r\n\r\n      this.cutInAudioIdentifier = value;\r\n      \r\n      let audio = AudioStorage.instance.get(value);\r\n      if( audio ){\r\n        this.cutInAudioName = audio.name;\r\n        console.log('cutInAudioName'+ this.cutInAudioName);\r\n      }\r\n    });\r\n  }\r\n\r\n\r\n  isCutInBgmUploaded() {\r\n    if (!this.isSelected) return false;\r\n\r\n    let audio = AudioStorage.instance.get( this.cutInAudioIdentifier );\r\n    return audio ? true : false ;\r\n  }\r\n\r\n  stoppreviewCutIn(){\r\n    //jukuと同じにする\r\n  }\r\n  \r\n  originalImgWidth(){\r\n    if( !this.isSelected) return 0;\r\n    if( !this.selectedCutIn )return 0;\r\n    if( !this.selectedCutIn.cutInImage) return 0;\r\n\r\n    let imageurl = this.selectedCutIn.cutInImage.url;\r\n    if( imageurl.length > 0 ){\r\n      let img = new Image();\r\n      img.src = imageurl;\r\n      return img.width;\r\n    }\r\n    return 0;\r\n  }\r\n\r\n  originalImgHeight(){\r\n    if( !this.isSelected) return 0;\r\n    if( !this.selectedCutIn )return 0;\r\n    if( !this.selectedCutIn.cutInImage) return 0;\r\n\r\n    let imageurl = this.selectedCutIn.cutInImage.url;\r\n    if( imageurl.length > 0 ){\r\n      let img = new Image();\r\n      img.src = imageurl;\r\n      return img.height;\r\n    }\r\n    return 0;\r\n  }\r\n\r\n\r\n\r\n  previewCutIn(){\r\n    if( this.selectedCutIn.originalSize ){\r\n      let imageurl = this.selectedCutIn.cutInImage.url;\r\n      if( imageurl.length > 0 ){\r\n        let img = new Image();\r\n        img.src = imageurl;\r\n        this.selectedCutIn.width = this.originalImgWidth();\r\n        this.selectedCutIn.height = this.originalImgHeight();\r\n      }\r\n    }\r\n    //プレビューではジューク音楽の停止をしない\r\n    this.cutInLauncher.startCutInMySelf( this.selectedCutIn );\r\n    \r\n  }\r\n  \r\n  playCutIn(){ \r\n    if( this.selectedCutIn.originalSize ){\r\n      let imageurl = this.selectedCutIn.cutInImage.url;\r\n      if( imageurl.length > 0 ){\r\n        let img = new Image();\r\n        img.src = imageurl;\r\n        this.selectedCutIn.width = this.originalImgWidth();\r\n        this.selectedCutIn.height = this.originalImgHeight();\r\n      }\r\n    }\r\n    \r\n    //同名タグが再生中の場合そのタグのカットインを停止してから生成\r\n    //無タグ、かつ音楽が指定されている場合　jukebox　を停止する\r\n    //タグ名有りの場合、音楽が設定されていない場合　jukebox　は停止しない\r\n    if( this.isCutInBgmUploaded() && ( this.cutInTagName == '' ) ){\r\n      this.jukebox.stop();\r\n    }\r\n    \r\n    this.cutInLauncher.startCutIn( this.selectedCutIn );\r\n    \r\n  }\r\n\r\n  stopCutIn(){\r\n    if(!this.isSelected) return;\r\n    this.cutInLauncher.stopCutIn( this.selectedCutIn );\r\n    \r\n  }\r\n\r\n  }\r\n","<div class=\"flex-container\">\r\n  <div class=\"flex-item no-grow\">\r\n    <div>\r\n      <button (click)=\"createCutIn()\">創建新Cut in</button>\r\n    </div>\r\n    <select style=\"width: 15em;\" size=\"20\" (change)=\"selectCutIn($event.target.value)\" [ngModel]=\"selectedCutIn?.identifier\">\r\n      <option *ngFor=\"let cutIn of getCutIns()\" value=\"{{cutIn.identifier}}\">{{cutIn.name}}</option>\r\n    </select>\r\n  </div>\r\n  <div class=\"flex-item\" style=\"width:380px\">\r\n    <ng-container *ngIf=\"!isEmpty || selectedCutIn\">\r\n      <div class=\"images-select\">\r\n        <div>\r\n          圖片\r\n          <div (click)=\"openCutInImageModal()\"  style=\"height:120px;\" >\r\n            <img height=\"120\" [src]=\"cutInImage.url | safe: 'resourceUrl'\">\r\n          </div>\r\n        </div>\r\n        <div>\r\n        </div>\r\n      </div>\r\n      <div>名稱 :\r\n        <input [(ngModel)]=\"cutInName\" placeholder=\"Name\" [attr.disabled]=\"!isEditable ? '' : null\" />\r\n      </div>\r\n\r\n      <div >音樂檔 :\r\n        <button (click)=\"openCutInBgmModal()\">設定</button><br>\r\n\r\n        <button  (click)=\"playCutIn()\" [disabled]=\"\" >Cut in播放</button>\r\n        <button  (click)=\"stopCutIn()\" [disabled]=\"\" >Cut in停止</button>\r\n        <button  (click)=\"previewCutIn()\" [disabled]=\"\" >Cut in預覽</button><br>\r\n        LINK:<span *ngIf=\"isCutInBgmUploaded()\" >OK：</span><span *ngIf=\"!isCutInBgmUploaded()\" >NG：</span><br>\r\n        <ng-container *ngIf=\"!isCutInBgmUploaded()\">\r\n          <span *ngIf=\"cutInAudioName.length>0 \" >音樂文件未上傳</span>\r\n          <span *ngIf=\"cutInAudioName.length<=0 \" >未設置音樂文件</span>\r\n        </ng-container>\r\n        <br>\r\n        <ng-container *ngIf=\"isEditable\" >{{cutInAudioName}}</ng-container><br>\r\n\r\n      </div>\r\n      <div>\r\n        顯示原尺寸：<input type=\"checkbox\" [(ngModel)]=\"cutInOriginalSize\" name=\"cutInOriginalSize\" [attr.disabled]=\"!isEditable ? '' : null\"/>\r\n      </div>\r\n      <div>\r\n        Width :<input [(ngModel)]=\"cutInWidth\" type=\"number\" min=\"{{minSize}}\" max=\"{{maxSize}}\" style=\"width: 5em;\" [attr.disabled]=\"!isEditable || cutInOriginalSize ? '' : null\">\r\n        維持長寬比 :<input type=\"checkbox\" [(ngModel)]=\"keepImageAspect\" name=\"keepImageAspect\" \r\n        [attr.disabled]=\"!isEditable || cutInOriginalSize ? '' : null\" (click)=\"chkImageAspect()\" />\r\n      </div>\r\n      <div>\r\n        Height :<input [(ngModel)]=\"cutInHeight\" type=\"number\" min=\"{{minSize}}\" max=\"{{maxSize}}\" style=\"width: 5em;\" [attr.disabled]=\"!isEditable || cutInOriginalSize ? '' : null\">\r\n      </div>\r\n      <div>\r\n        <input [(ngModel)]=\"cutInX_Pos\" type=\"range\" min=\"0\" max=\"100\" name=\"cutInX_PosWidth\" [attr.disabled]=\"!isEditable ? '' : null\"/>\r\n        X位置 :<input [(ngModel)]=\"cutInX_Pos\" type=\"number\" min=\"0\" max=\"100\" style=\"width: 5em;\" [attr.disabled]=\"!isEditable ? '' : null\">\r\n      </div>\r\n      <div>\r\n        <input [(ngModel)]=\"cutInY_Pos\" type=\"range\" min=\"0\" max=\"100\" name=\"cutInX_PosWidth\" [attr.disabled]=\"!isEditable ? '' : null\"/>\r\n        Y位置 :<input [(ngModel)]=\"cutInY_Pos\" type=\"number\" min=\"0\" max=\"100\" style=\"width: 5em;\" [attr.disabled]=\"!isEditable ? '' : null\">\r\n      </div>\r\n      <div>\r\n        循環播放：<input type=\"checkbox\" [(ngModel)]=\"cutInIsLoop\" name=\"cutInIsLoop\" [attr.disabled]=\"!isEditable ? '' : null\"/>\r\n      </div>\r\n      <div>\r\n        播放時間 :<input [(ngModel)]=\"cutInOutTime\" type=\"number\" min=\"0\" style=\"width: 5em;\" [attr.disabled]=\"!isEditable ? '' : null\">\r\n      </div>\r\n      <div>\r\n        標籤名稱 :<input [(ngModel)]=\"cutInTagName\" placeholder=\"\" style=\"width: 5em;\" [attr.disabled]=\"!isEditable ? '' : null\" />\r\n        台詞末尾發動：<input type=\"checkbox\" [(ngModel)]=\"chatActivate\" name=\"chatActivate\" [attr.disabled]=\"!isEditable ? '' : null\"/>\r\n      </div>\r\n      <div>\r\n<p style=\"font-size:0.4em\">※Cut in的行為<br>\r\n具有相同標籤名稱的Cut in將停止最先播放的標籤（包括空白標籤）<br>\r\n如果標籤名稱為空且設置了音樂，則音樂播放器的BGM將停止。<br>\r\n此外，在音樂播放器中播放BGM時，此類Cut in也會停止<br>\r\n請為您想要與BGM同時播放的Cut in設置標籤，例如槍聲的SE。<br>\r\n</p>\r\n      </div>\r\n\r\n<!-- 動画再生は後日検討。youtubeより.mp4に対法した方が実装上は良いのかも知れない\r\n      <div>\r\n        Youtube再生 :<input type=\"checkbox\" [(ngModel)]=\"cutInUseOutUrl\" name=\"cutInUseOutUrl\" [attr.disabled]=\"!isEditable ? '' : null\"/>\r\n      </div>\r\n      <div>\r\n        URL :<input [(ngModel)]=\"cutInOutUrl\" placeholder=\"URL\" [attr.disabled]=\"!isEditable ? '' : null\" />\r\n      </div>\r\n-->\r\n      <hr/>\r\n      <div>\r\n        <ng-container *ngIf=\"!isDeleted\">\r\n          <button (click)=\"save()\">保存</button>\r\n          <button class=\"danger\" (click)=\"delete()\" [attr.disabled]=\"getCutIns().length <= 0 ? '' : null\">刪除</button>\r\n        </ng-container>\r\n      </div>\r\n    </ng-container>\r\n  </div>\r\n</div>\r\n<ng-container *ngIf=\"isEmpty\">\r\n  <div style=\"font-size: 12px;\">※尚未創建Cut in。 您可以從“創建新Cut in”創建新的Cut in。</div>\r\n</ng-container>\r\n","import { AfterViewInit, Component, NgZone, OnDestroy, ViewChild, ViewContainerRef } from '@angular/core';\r\nimport { NgSelectConfig } from '@ng-select/ng-select';\r\n\r\nimport { ChatTabList } from '@udonarium/chat-tab-list';\r\nimport { AudioPlayer } from '@udonarium/core/file-storage/audio-player';\r\nimport { AudioSharingSystem } from '@udonarium/core/file-storage/audio-sharing-system';\r\nimport { AudioStorage } from '@udonarium/core/file-storage/audio-storage';\r\nimport { FileArchiver } from '@udonarium/core/file-storage/file-archiver';\r\nimport { ImageFile } from '@udonarium/core/file-storage/image-file';\r\nimport { ImageSharingSystem } from '@udonarium/core/file-storage/image-sharing-system';\r\nimport { ImageStorage } from '@udonarium/core/file-storage/image-storage';\r\nimport { ObjectFactory } from '@udonarium/core/synchronize-object/object-factory';\r\nimport { ObjectSerializer } from '@udonarium/core/synchronize-object/object-serializer';\r\nimport { ObjectStore } from '@udonarium/core/synchronize-object/object-store';\r\nimport { ObjectSynchronizer } from '@udonarium/core/synchronize-object/object-synchronizer';\r\nimport { EventSystem, Network } from '@udonarium/core/system';\r\nimport { DataSummarySetting } from '@udonarium/data-summary-setting';\r\nimport { DiceBot } from '@udonarium/dice-bot';\r\nimport { Jukebox } from '@udonarium/Jukebox';\r\nimport { PeerCursor } from '@udonarium/peer-cursor';\r\nimport { PresetSound, SoundEffect } from '@udonarium/sound-effect';\r\n\r\nimport { CutIn } from '@udonarium/cut-in';\r\nimport { CutInLauncher } from '@udonarium/cut-in-launcher';\r\n\r\nimport { ChatWindowComponent } from 'component/chat-window/chat-window.component';\r\nimport { ContextMenuComponent } from 'component/context-menu/context-menu.component';\r\nimport { FileStorageComponent } from 'component/file-storage/file-storage.component';\r\nimport { GameCharacterGeneratorComponent } from 'component/game-character-generator/game-character-generator.component';\r\nimport { GameCharacterSheetComponent } from 'component/game-character-sheet/game-character-sheet.component';\r\nimport { GameObjectInventoryComponent } from 'component/game-object-inventory/game-object-inventory.component';\r\nimport { GameTableSettingComponent } from 'component/game-table-setting/game-table-setting.component';\r\nimport { JukeboxComponent } from 'component/jukebox/jukebox.component';\r\nimport { ModalComponent } from 'component/modal/modal.component';\r\nimport { PeerMenuComponent } from 'component/peer-menu/peer-menu.component';\r\nimport { TextViewComponent } from 'component/text-view/text-view.component';\r\nimport { UIPanelComponent } from 'component/ui-panel/ui-panel.component';\r\nimport { AppConfig, AppConfigService } from 'service/app-config.service';\r\nimport { ChatMessageService } from 'service/chat-message.service';\r\nimport { ContextMenuService } from 'service/context-menu.service';\r\nimport { ModalService } from 'service/modal.service';\r\nimport { PanelOption, PanelService } from 'service/panel.service';\r\nimport { PointerDeviceService } from 'service/pointer-device.service';\r\nimport { SaveDataService } from 'service/save-data.service';\r\n\r\n\r\nimport { CutInWindowComponent } from 'component/cut-in-window/cut-in-window.component';\r\nimport { DiceTableSettingComponent } from 'component/dice-table-setting/dice-table-setting.component';\r\n\r\n\r\n@Component({\r\n  selector: 'app-root',\r\n  templateUrl: './app.component.html',\r\n  styleUrls: ['./app.component.css']\r\n})\r\nexport class AppComponent implements AfterViewInit, OnDestroy {\r\n\r\n  @ViewChild('modalLayer', { read: ViewContainerRef, static: true }) modalLayerViewContainerRef: ViewContainerRef;\r\n  private immediateUpdateTimer: NodeJS.Timer = null;\r\n  private lazyUpdateTimer: NodeJS.Timer = null;\r\n  private openPanelCount: number = 0;\r\n  isSaveing: boolean = false;\r\n  progresPercent: number = 0;\r\n  dispcounter : number = 10 ;//表示更新用ダミーカットインを閉じるときに無理やり更新させている。\r\n\r\n\r\n  constructor(\r\n    private modalService: ModalService,\r\n    private panelService: PanelService,\r\n    private pointerDeviceService: PointerDeviceService,\r\n    private chatMessageService: ChatMessageService,\r\n    private appConfigService: AppConfigService,\r\n    private saveDataService: SaveDataService,\r\n    private ngSelectConfig: NgSelectConfig,\r\n    private ngZone: NgZone\r\n  ) {\r\n\r\n    this.ngZone.runOutsideAngular(() => {\r\n      EventSystem;\r\n      Network;\r\n      FileArchiver.instance.initialize();\r\n      ImageSharingSystem.instance.initialize();\r\n      ImageStorage.instance;\r\n      AudioSharingSystem.instance.initialize();\r\n      AudioStorage.instance;\r\n      ObjectFactory.instance;\r\n      ObjectSerializer.instance;\r\n      ObjectStore.instance;\r\n      ObjectSynchronizer.instance.initialize();\r\n    });\r\n    this.appConfigService.initialize();\r\n    this.pointerDeviceService.initialize();\r\n    this.ngSelectConfig.appendTo = 'body';\r\n\r\n    ChatTabList.instance.initialize();\r\n    DataSummarySetting.instance.initialize();\r\n\r\n    let diceBot: DiceBot = new DiceBot('DiceBot');\r\n    diceBot.initialize();\r\n\r\n    let jukebox: Jukebox = new Jukebox('Jukebox');\r\n    jukebox.initialize();\r\n\r\n    let cutInLauncher = new CutInLauncher('CutInLauncher');\r\n    cutInLauncher.initialize();\r\n\r\n    let soundEffect: SoundEffect = new SoundEffect('SoundEffect');\r\n    soundEffect.initialize();\r\n\r\n    ChatTabList.instance.addChatTab('メインタブ', 'MainTab');\r\n    ChatTabList.instance.addChatTab('サブタブ', 'SubTab');\r\n\r\n    let fileContext = ImageFile.createEmpty('none_icon').toContext();\r\n    fileContext.url = './assets/images/ic_account_circle_black_24dp_2x.png';\r\n    let noneIconImage = ImageStorage.instance.add(fileContext);\r\n\r\n    AudioPlayer.resumeAudioContext();\r\n    PresetSound.dicePick = AudioStorage.instance.add('./assets/sounds/soundeffect-lab/shoulder-touch1.mp3').identifier;\r\n    PresetSound.dicePut = AudioStorage.instance.add('./assets/sounds/soundeffect-lab/book-stack1.mp3').identifier;\r\n    PresetSound.diceRoll1 = AudioStorage.instance.add('./assets/sounds/on-jin/spo_ge_saikoro_teburu01.mp3').identifier;\r\n    PresetSound.diceRoll2 = AudioStorage.instance.add('./assets/sounds/on-jin/spo_ge_saikoro_teburu02.mp3').identifier;\r\n    PresetSound.cardDraw = AudioStorage.instance.add('./assets/sounds/soundeffect-lab/card-turn-over1.mp3').identifier;\r\n    PresetSound.cardPick = AudioStorage.instance.add('./assets/sounds/soundeffect-lab/shoulder-touch1.mp3').identifier;\r\n    PresetSound.cardPut = AudioStorage.instance.add('./assets/sounds/soundeffect-lab/book-stack1.mp3').identifier;\r\n    PresetSound.cardShuffle = AudioStorage.instance.add('./assets/sounds/soundeffect-lab/card-open1.mp3').identifier;\r\n    PresetSound.piecePick = AudioStorage.instance.add('./assets/sounds/soundeffect-lab/shoulder-touch1.mp3').identifier;\r\n    PresetSound.piecePut = AudioStorage.instance.add('./assets/sounds/soundeffect-lab/book-stack1.mp3').identifier;\r\n    PresetSound.blockPick = AudioStorage.instance.add('./assets/sounds/tm2/tm2_pon002.wav').identifier;\r\n    PresetSound.blockPut = AudioStorage.instance.add('./assets/sounds/tm2/tm2_pon002.wav').identifier;\r\n    PresetSound.lock = AudioStorage.instance.add('./assets/sounds/tm2/tm2_switch001.wav').identifier;\r\n    PresetSound.unlock = AudioStorage.instance.add('./assets/sounds/tm2/tm2_switch001.wav').identifier;\r\n    PresetSound.sweep = AudioStorage.instance.add('./assets/sounds/tm2/tm2_swing003.wav').identifier;\r\n\r\n    AudioStorage.instance.get(PresetSound.dicePick).isHidden = true;\r\n    AudioStorage.instance.get(PresetSound.dicePut).isHidden = true;\r\n    AudioStorage.instance.get(PresetSound.diceRoll1).isHidden = true;\r\n    AudioStorage.instance.get(PresetSound.diceRoll2).isHidden = true;\r\n    AudioStorage.instance.get(PresetSound.cardDraw).isHidden = true;\r\n    AudioStorage.instance.get(PresetSound.cardPick).isHidden = true;\r\n    AudioStorage.instance.get(PresetSound.cardPut).isHidden = true;\r\n    AudioStorage.instance.get(PresetSound.cardShuffle).isHidden = true;\r\n    AudioStorage.instance.get(PresetSound.piecePick).isHidden = true;\r\n    AudioStorage.instance.get(PresetSound.piecePut).isHidden = true;\r\n    AudioStorage.instance.get(PresetSound.blockPick).isHidden = true;\r\n    AudioStorage.instance.get(PresetSound.blockPut).isHidden = true;\r\n    AudioStorage.instance.get(PresetSound.lock).isHidden = true;\r\n    AudioStorage.instance.get(PresetSound.unlock).isHidden = true;\r\n    AudioStorage.instance.get(PresetSound.sweep).isHidden = true;\r\n\r\n    PeerCursor.createMyCursor();\r\n    PeerCursor.myCursor.name = 'プレイヤー';\r\n    PeerCursor.myCursor.imageIdentifier = noneIconImage.identifier;\r\n\r\n    EventSystem.register(this)\r\n      .on('START_CUT_IN', event => { \r\n        this.startCutIn( event.data.cutIn );\r\n      })  \r\n      .on('STOP_CUT_IN', event => { \r\n        if( ! event.data.cutIn ) return;\r\n        console.log('カットインイベント_ストップ'  + event.data.cutIn.name ); \r\n        \r\n      })  \r\n      .on('UPDATE_GAME_OBJECT', event => { this.lazyNgZoneUpdate(event.isSendFromSelf); })\r\n      .on('DELETE_GAME_OBJECT', event => { this.lazyNgZoneUpdate(event.isSendFromSelf); })\r\n      .on('SYNCHRONIZE_AUDIO_LIST', event => { if (event.isSendFromSelf) this.lazyNgZoneUpdate(false); })\r\n      .on('SYNCHRONIZE_FILE_LIST', event => { if (event.isSendFromSelf) this.lazyNgZoneUpdate(false); })\r\n      .on<AppConfig>('LOAD_CONFIG', event => {\r\n        console.log('LOAD_CONFIG !!!', event.data);\r\n        Network.setApiKey(event.data.webrtc.key);\r\n        Network.open();\r\n      })\r\n      .on<File>('FILE_LOADED', event => {\r\n        this.lazyNgZoneUpdate(false);\r\n      })\r\n      .on('OPEN_NETWORK', event => {\r\n        console.log('OPEN_NETWORK', event.data.peerId);\r\n        PeerCursor.myCursor.peerId = Network.peerContext.peerId;\r\n        PeerCursor.myCursor.userId = Network.peerContext.userId;\r\n      })\r\n      .on('CLOSE_NETWORK', event => {\r\n        console.log('CLOSE_NETWORK', event.data.peerId);\r\n        this.ngZone.run(async () => {\r\n          if (1 < Network.peerIds.length) {\r\n            await this.modalService.open(TextViewComponent, { title: 'ネットワークエラー', text: 'ネットワーク接続に何らかの異常が発生しました。\\nこの表示以後、接続が不安定であれば、ページリロードと再接続を試みてください。' });\r\n          } else {\r\n            await this.modalService.open(TextViewComponent, { title: 'ネットワークエラー', text: '接続情報が破棄されました。\\nこのウィンドウを閉じると再接続を試みます。' });\r\n            Network.open();\r\n          }\r\n        });\r\n      })\r\n      .on('CONNECT_PEER', event => {\r\n        if (event.isSendFromSelf) this.chatMessageService.calibrateTimeOffset();\r\n        this.lazyNgZoneUpdate(event.isSendFromSelf);\r\n      })\r\n      .on('DISCONNECT_PEER', event => {\r\n        this.lazyNgZoneUpdate(event.isSendFromSelf);\r\n      });\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    PanelService.defaultParentViewContainerRef = ModalService.defaultParentViewContainerRef = ContextMenuService.defaultParentViewContainerRef = this.modalLayerViewContainerRef;\r\n    setTimeout(() => {\r\n      this.panelService.open(PeerMenuComponent, { width: 500, height: 450, left: 100 });\r\n      this.panelService.open(ChatWindowComponent, { width: 700, height: 400, left: 100, top: 450 });\r\n    }, 0);\r\n    setInterval(() => {\r\n      this.dispcounter = this.dispcounter +1;\r\n      if( this.dispcounter >100 )this.dispcounter = 0;\r\n    }, 200 );\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    EventSystem.unregister(this);\r\n  }\r\n\r\n  startCutIn( cutIn : CutIn ){\r\n    if( ! cutIn ) return;\r\n    console.log( 'カットインイベント_スタート' + cutIn.name );\r\n    let option: PanelOption = { width: 200, height: 100, left: 300 ,top: 100};\r\n    option.title = 'カットイン : ' + cutIn.name ;\r\n    \r\n    console.log( '画面領域 w:' + window.innerWidth + ' h:'+ window.innerHeight );\r\n    \r\n    let cutin_w = cutIn.width;\r\n    let cutin_h = cutIn.height;\r\n\r\n    console.log( '画像サイズ w:' + cutin_w + ' h:'+ cutin_h );\r\n    \r\n    let margin_w = window.innerWidth - cutin_w ;\r\n    let margin_h = window.innerHeight - cutin_h - 25 ;\r\n    \r\n    if( margin_w < 0 )margin_w = 0 ;\r\n    if( margin_h < 0 )margin_h = 0 ;\r\n    \r\n    let margin_x = margin_w * cutIn.x_pos / 100;\r\n    let margin_y = margin_h * cutIn.y_pos / 100;\r\n    \r\n    option.width = cutin_w ;\r\n    option.height = cutin_h + 25 ;\r\n    option.left = margin_x ;\r\n    option.top = margin_y;\r\n    option.isCutIn = true;\r\n    option.cutInIdentifier = cutIn.identifier;\r\n\r\n    let component = this.panelService.open(CutInWindowComponent, option);\r\n    component.cutIn = cutIn;\r\n    component.startCutIn();\r\n    \r\n  }\r\n\r\n  open(componentName: string) {\r\n    let component: { new(...args: any[]): any } = null;\r\n    let option: PanelOption = { width: 450, height: 600, left: 100 }\r\n    switch (componentName) {\r\n      case 'PeerMenuComponent':\r\n        component = PeerMenuComponent;\r\n        break;\r\n      case 'ChatWindowComponent':\r\n        component = ChatWindowComponent;\r\n        option.width = 700;\r\n        break;\r\n      case 'GameTableSettingComponent':\r\n        component = GameTableSettingComponent;\r\n        option = { width: 630, height: 400, left: 100 };\r\n        break;\r\n      case 'FileStorageComponent':\r\n        component = FileStorageComponent;\r\n        break;\r\n      case 'GameCharacterSheetComponent':\r\n        component = GameCharacterSheetComponent;\r\n        break;\r\n      case 'JukeboxComponent':\r\n        component = JukeboxComponent;\r\n        break;\r\n      case 'GameCharacterGeneratorComponent':\r\n        component = GameCharacterGeneratorComponent;\r\n        option = { width: 500, height: 300, left: 100 };\r\n        break;\r\n      case 'GameObjectInventoryComponent':\r\n        component = GameObjectInventoryComponent;\r\n        break;\r\n    }\r\n    if (component) {\r\n      option.top = (this.openPanelCount % 10 + 1) * 20;\r\n      option.left = 100 + (this.openPanelCount % 20 + 1) * 5;\r\n      this.openPanelCount = this.openPanelCount + 1;\r\n      this.panelService.open(component, option);\r\n    }\r\n  }\r\n\r\n  async save() {\r\n    if (this.isSaveing) return;\r\n    this.isSaveing = true;\r\n    this.progresPercent = 0;\r\n\r\n    let roomName = Network.peerContext && 0 < Network.peerContext.roomName.length\r\n      ? Network.peerContext.roomName\r\n      : 'ルームデータ';\r\n    await this.saveDataService.saveRoomAsync(roomName, percent => {\r\n      this.progresPercent = percent;\r\n    });\r\n\r\n    setTimeout(() => {\r\n      this.isSaveing = false;\r\n      this.progresPercent = 0;\r\n    }, 500);\r\n  }\r\n\r\n  handleFileSelect(event: Event) {\r\n    let input = <HTMLInputElement>event.target;\r\n    let files = input.files;\r\n    if (files.length) FileArchiver.instance.load(files);\r\n    input.value = '';\r\n  }\r\n\r\n  private lazyNgZoneUpdate(isImmediate: boolean) {\r\n    if (isImmediate) {\r\n      if (this.immediateUpdateTimer !== null) return;\r\n      this.immediateUpdateTimer = setTimeout(() => {\r\n        this.immediateUpdateTimer = null;\r\n        if (this.lazyUpdateTimer != null) {\r\n          clearTimeout(this.lazyUpdateTimer);\r\n          this.lazyUpdateTimer = null;\r\n        }\r\n        this.ngZone.run(() => { });\r\n      }, 0);\r\n    } else {\r\n      if (this.lazyUpdateTimer !== null) return;\r\n      this.lazyUpdateTimer = setTimeout(() => {\r\n        this.lazyUpdateTimer = null;\r\n        if (this.immediateUpdateTimer != null) {\r\n          clearTimeout(this.immediateUpdateTimer);\r\n          this.immediateUpdateTimer = null;\r\n        }\r\n        this.ngZone.run(() => { });\r\n      }, 100);\r\n    }\r\n  }\r\n\r\n}\r\nPanelService.UIPanelComponentClass = UIPanelComponent;\r\nContextMenuService.ContextMenuComponentClass = ContextMenuComponent;\r\nModalService.ModalComponentClass = ModalComponent;\r\n","<div id=\"app-table-layer\" style=\"position: absolute; width: 100%; height: 100%; overflow: hidden;\">\r\n  <game-table></game-table>\r\n</div>\r\n<ui-panel [top]=\"0\" [left]=\"0\" [width]=\"105\" [height]=\"475\" [title]=\"'メニュー'\">\r\n  <nav>\r\n    <ul>\r\n      <li (click)=\"open('PeerMenuComponent')\">\r\n        <a routerLink=\"/\" routerLinkActive=\"active\">\r\n          <div><i class=\"material-icons icon-size\">people</i></div>\r\n          <div>連線</div>\r\n        </a>\r\n      </li>\r\n      <li (click)=\"open('ChatWindowComponent')\">\r\n        <a routerLink=\"/\" routerLinkActive=\"active\">\r\n          <div><i class=\"material-icons icon-size\">speaker_notes</i></div>\r\n          <div>聊天視窗</div>\r\n        </a>\r\n      </li>\r\n      <li (click)=\"open('GameTableSettingComponent')\">\r\n        <a routerLink=\"/\" routerLinkActive=\"active\">\r\n          <div><i class=\"material-icons icon-size\">layers</i></div>\r\n          <div>桌面地圖</div>\r\n        </a>\r\n      </li>\r\n      <li (click)=\"open('FileStorageComponent')\">\r\n        <a routerLink=\"/\" routerLinkActive=\"active\">\r\n          <div><i class=\"material-icons icon-size\">photo_library</i></div>\r\n          <div>上傳圖片</div>\r\n        </a>\r\n      </li>\r\n      <li (click)=\"open('JukeboxComponent')\">\r\n        <a routerLink=\"/\" routerLinkActive=\"active\">\r\n          <div><i class=\"material-icons\">queue_music</i></div>\r\n          <div>音樂</div>\r\n        </a>\r\n      </li>\r\n      <li (click)=\"open('GameObjectInventoryComponent')\">\r\n        <a routerLink=\"/\" routerLinkActive=\"active\">\r\n          <div><i class=\"material-icons icon-size\">folder_shared</i></div>\r\n          <div>角色倉庫</div>\r\n        </a>\r\n      </li>\r\n      <li>\r\n        <a routerLink=\"/\" routerLinkActive=\"active\">\r\n          <label>\r\n            <div><i class=\"material-icons\">open_in_browser</i></div>\r\n            <div>讀取房間</div>\r\n            <input type=\"file\" style=\"display: none;\" (change)=\"handleFileSelect($event)\" multiple\r\n              accept=\"application/xml,text/xml,application/zip\" />\r\n          </label>\r\n        </a>\r\n      </li>\r\n      <li *ngIf=\"!isSaveing\" (click)=\"save()\">\r\n        <a routerLink=\"/\" routerLinkActive=\"active\">\r\n          <div><i class=\"material-icons\">sd_storage</i></div>\r\n          <div>保存房間</div>\r\n        </a>\r\n      </li>\r\n      <li *ngIf=\"isSaveing\" style=\"pointer-events: none;\">\r\n        <a>\r\n          <div><i class=\"material-icons vibration-amine\">sd_storage</i></div>\r\n          <div>{{progresPercent}}%</div>\r\n        </a>\r\n      </li>\r\n    </ul>\r\n  </nav>\r\n<!--\r\n  <div class=\"dummydisp\" >{{dispcounter}}</div>\r\n-->\r\n<!--\r\n  <div class=\"dummydisp\" *ngIf=\"dummyImage\" >\r\n    <img  [src]=\"dummyImage.url | safe: 'resourceUrl'\">\r\n  </div>  \r\n-->\r\n</ui-panel>\r\n<div #modalLayer></div>\r\n<network-indicator class=\"networkIndicator\"></network-indicator>\r\n","import { Component, NgZone, OnDestroy, OnInit } from '@angular/core';\r\n\r\nimport { AudioFile } from '@udonarium/core/file-storage/audio-file';\r\nimport { AudioPlayer, VolumeType } from '@udonarium/core/file-storage/audio-player';\r\nimport { AudioStorage } from '@udonarium/core/file-storage/audio-storage';\r\nimport { FileArchiver } from '@udonarium/core/file-storage/file-archiver';\r\nimport { ObjectStore } from '@udonarium/core/synchronize-object/object-store';\r\nimport { EventSystem } from '@udonarium/core/system';\r\nimport { Jukebox } from '@udonarium/Jukebox';\r\n\r\nimport { ModalService } from 'service/modal.service';\r\n\r\nimport { CutInListComponent } from 'component/cut-in-list/cut-in-list.component';\r\nimport { PointerDeviceService } from 'service/pointer-device.service';\r\nimport { PanelOption, PanelService } from 'service/panel.service';\r\n\r\nimport { CutInLauncher } from '@udonarium/cut-in-launcher';\r\n\r\n@Component({\r\n  selector: 'app-jukebox',\r\n  templateUrl: './jukebox.component.html',\r\n  styleUrls: ['./jukebox.component.css']\r\n})\r\nexport class JukeboxComponent implements OnInit, OnDestroy {\r\n\r\n  get volume(): number { return AudioPlayer.volume; }\r\n  set volume(volume: number) { AudioPlayer.volume = volume; }\r\n\r\n  get auditionVolume(): number { return AudioPlayer.auditionVolume; }\r\n  set auditionVolume(auditionVolume: number) { AudioPlayer.auditionVolume = auditionVolume; }\r\n\r\n  get audios(): AudioFile[] { return AudioStorage.instance.audios.filter(audio => !audio.isHidden); }\r\n  get jukebox(): Jukebox { return ObjectStore.instance.get<Jukebox>('Jukebox'); }\r\n\r\n  get cutInLauncher(): CutInLauncher { return ObjectStore.instance.get<CutInLauncher>('CutInLauncher'); }\r\n\r\n  readonly auditionPlayer: AudioPlayer = new AudioPlayer();\r\n  private lazyUpdateTimer: NodeJS.Timer = null;\r\n\r\n  constructor(\r\n    private modalService: ModalService,\r\n    private panelService: PanelService,\r\n    private pointerDeviceService: PointerDeviceService,\r\n    private ngZone: NgZone\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    Promise.resolve().then(() => this.modalService.title = this.panelService.title = 'ジュークボックス');\r\n    this.auditionPlayer.volumeType = VolumeType.AUDITION;\r\n    EventSystem.register(this)\r\n      .on('*', event => {\r\n        if (event.eventName.startsWith('FILE_')) this.lazyNgZoneUpdate();\r\n      });\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    EventSystem.unregister(this);\r\n    this.stop();\r\n  }\r\n\r\n  play(audio: AudioFile) {\r\n    this.auditionPlayer.play(audio);\r\n  }\r\n\r\n  stop() {\r\n    this.auditionPlayer.stop();\r\n  }\r\n\r\n  playBGM(audio: AudioFile) { //memoこっちが全体\r\n    \r\n    //タグなしのBGM付きカットインはジュークボックスと同時に鳴らさないようにする\r\n    //BGM駆動のためのインスタンスを別にしているため現状この処理で止める\r\n    this.cutInLauncher.stopBlankTagCutIn();\r\n    \r\n    this.jukebox.play(audio.identifier, true);\r\n    \r\n  }\r\n\r\n  stopBGM(audio: AudioFile) {\r\n    if (this.jukebox.audio === audio) this.jukebox.stop();\r\n  }\r\n\r\n  handleFileSelect(event: Event) {\r\n    let input = <HTMLInputElement>event.target;\r\n    let files = input.files;\r\n    if (files.length) FileArchiver.instance.load(files);\r\n    input.value = '';\r\n  }\r\n\r\n  private lazyNgZoneUpdate() {\r\n    if (this.lazyUpdateTimer !== null) return;\r\n    this.lazyUpdateTimer = setTimeout(() => {\r\n      this.lazyUpdateTimer = null;\r\n      this.ngZone.run(() => { });\r\n    }, 100);\r\n  }\r\n\r\n  openCutInList() {\r\n    let coordinate = this.pointerDeviceService.pointers[0];\r\n    let option: PanelOption = { left: coordinate.x+25, top: coordinate.y+25, width: 650, height: 700 };\r\n    this.panelService.open<CutInListComponent>(CutInListComponent, option);\r\n  }\r\n\r\n}\r\n","<div>試聴音量：<input [(ngModel)]=\"auditionVolume\" type=\"range\" min=\"0\" max=\"1\" step=\"0.01\" /></div>\r\n<div>BGM音量：<input [(ngModel)]=\"volume\" type=\"range\" min=\"0\" max=\"1\" step=\"0.01\" /></div>\r\n\r\n<button *ngIf=\"1\" (click)=\"openCutInList()\" [disabled]=\"0\" >cut in編輯</button>\r\n\r\n<hr/>\r\n<div>\r\n  <div *ngFor=\"let audio of audios\" class=\"box\">\r\n    <button *ngIf=\"audio !== auditionPlayer?.audio || auditionPlayer?.paused\" (click)=\"play(audio)\" [disabled]=\"!audio.isReady\" >試聴/播放</button>\r\n    <button *ngIf=\"audio === auditionPlayer?.audio && !auditionPlayer?.paused\" (click)=\"stop()\" [disabled]=\"!audio.isReady\" >試聴/停止</button>\r\n    <button *ngIf=\"audio !== jukebox?.audio\" (click)=\"playBGM(audio)\" [disabled]=\"!audio.isReady\" >BGM/播放</button>\r\n    <button *ngIf=\"audio === jukebox?.audio\" (click)=\"stopBGM(audio)\" [disabled]=\"!audio.isReady\" >BGM/停止</button>\r\n    <span *ngIf=\"audio === auditionPlayer?.audio && !auditionPlayer?.paused\">【試聴中】</span>\r\n    <span *ngIf=\"audio === jukebox?.audio\">【BGM】</span>\r\n    <span>{{audio.name}}</span><br>\r\n\r\n  </div>\r\n  <div *ngIf=\"audios.length < 1\" >上傳的音樂檔案將顯示在此處。</div>\r\n</div>\r\n\r\n<label>\r\n  <div class=\"drop-zone\">\r\n    <div>\r\n      <i class=\"material-icons large-font\">playlist_add</i>\r\n    </div>\r\n    <div>將音樂檔案拖曳到這裡上傳</div>\r\n    <div class=\"small-font\">或點解這裡選擇檔案</div>\r\n    <input type=\"file\" style=\"display: none;\" (change)=\"handleFileSelect($event)\" multiple accept=\"audio/*\"/>\r\n    <div class=\"small-font\">\r\n      <br>一個檔案最大10MB</div>\r\n  </div>\r\n</label>\r\n<div style=\"font-size: 12px;\">※「試聽」只會播放給自己一次。</div>\r\n<div style=\"font-size: 12px;\">※「BGM」會把音樂播放給所有房間成員。</div>\r\n<div style=\"font-size: 12px;\">※現行版本不會保存音樂到ZIP裡。（毎次都要重新上傳）</div>","import { Injectable } from '@angular/core';\r\nimport { Transform } from '@udonarium/transform/transform';\r\n\r\nimport { PointerCoordinate, PointerDeviceService } from './pointer-device.service';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class CoordinateService {\r\n  tabletopOriginElement: HTMLElement = document.body;\r\n\r\n  constructor(\r\n    private pointerDeviceService: PointerDeviceService,\r\n  ) { }\r\n\r\n  convertToLocal(pointer: PointerCoordinate, element: HTMLElement = document.body): PointerCoordinate {\r\n    let transformer: Transform = new Transform(element);\r\n    let ray = transformer.globalToLocal(pointer.x, pointer.y, pointer.z ? pointer.z : 0);\r\n    transformer.clear();\r\n    return { x: ray.x, y: ray.y, z: ray.z };\r\n  }\r\n\r\n  convertToGlobal(pointer: PointerCoordinate, element: HTMLElement = document.body): PointerCoordinate {\r\n    let transformer: Transform = new Transform(element);\r\n    let ray = transformer.localToGlobal(pointer.x, pointer.y, pointer.z ? pointer.z : 0);\r\n    transformer.clear();\r\n    return { x: ray.x, y: ray.y, z: ray.z };\r\n  }\r\n\r\n  convertLocalToLocal(pointer: PointerCoordinate, from: HTMLElement, to: HTMLElement): PointerCoordinate {\r\n    let transformer: Transform = new Transform(from);\r\n    let local = transformer.globalToLocal(pointer.x, pointer.y, pointer.z ? pointer.z : 0);\r\n    let ray = transformer.localToLocal(local.x, local.y, 0, to);\r\n    transformer.clear();\r\n    return { x: ray.x, y: ray.y, z: ray.z };\r\n  }\r\n\r\n  calcTabletopLocalCoordinate(\r\n    coordinate: PointerCoordinate = { x: this.pointerDeviceService.pointers[0].x, y: this.pointerDeviceService.pointers[0].y, z: 0 },\r\n    target: HTMLElement = this.pointerDeviceService.targetElement\r\n  ): PointerCoordinate {\r\n    if (target.contains(this.tabletopOriginElement)) {\r\n      coordinate = this.convertToLocal(coordinate, this.tabletopOriginElement);\r\n      coordinate.z = 0;\r\n    } else {\r\n      coordinate = this.convertLocalToLocal(coordinate, target, this.tabletopOriginElement);\r\n    }\r\n    return { x: coordinate.x, y: coordinate.y, z: 0 < coordinate.z ? coordinate.z : 0 };\r\n  }\r\n}\r\n","import { AfterViewInit, Component, ElementRef, HostListener, NgZone, OnDestroy, OnInit, ViewChild } from '@angular/core';\r\n\r\nimport { Card } from '@udonarium/card';\r\nimport { CardStack } from '@udonarium/card-stack';\r\nimport { ImageFile } from '@udonarium/core/file-storage/image-file';\r\nimport { ImageStorage } from '@udonarium/core/file-storage/image-storage';\r\nimport { GameObject } from '@udonarium/core/synchronize-object/game-object';\r\nimport { EventSystem } from '@udonarium/core/system';\r\nimport { DiceSymbol } from '@udonarium/dice-symbol';\r\nimport { GameCharacter } from '@udonarium/game-character';\r\nimport { FilterType, GameTable, GridType } from '@udonarium/game-table';\r\nimport { GameTableMask } from '@udonarium/game-table-mask';\r\nimport { PeerCursor } from '@udonarium/peer-cursor';\r\nimport { TableSelecter } from '@udonarium/table-selecter';\r\nimport { Terrain } from '@udonarium/terrain';\r\nimport { TextNote } from '@udonarium/text-note';\r\n\r\nimport { GameTableSettingComponent } from 'component/game-table-setting/game-table-setting.component';\r\nimport { InputHandler } from 'directive/input-handler';\r\nimport { ContextMenuAction, ContextMenuSeparator, ContextMenuService } from 'service/context-menu.service';\r\nimport { CoordinateService } from 'service/coordinate.service';\r\nimport { ImageService } from 'service/image.service';\r\nimport { ModalService } from 'service/modal.service';\r\nimport { PointerDeviceService } from 'service/pointer-device.service';\r\nimport { TabletopActionService } from 'service/tabletop-action.service';\r\nimport { TabletopService } from 'service/tabletop.service';\r\n\r\nimport { GridLineRender } from './grid-line-render';\r\nimport { TableTouchGesture, TableTouchGestureEvent } from './table-touch-gesture';\r\n\r\nenum Keyboard {\r\n  ArrowLeft = 'ArrowLeft',\r\n  ArrowUp = 'ArrowUp',\r\n  ArrowRight = 'ArrowRight',\r\n  ArrowDown = 'ArrowDown',\r\n}\r\n\r\n@Component({\r\n  selector: 'game-table',\r\n  templateUrl: './game-table.component.html',\r\n  styleUrls: ['./game-table.component.css'],\r\n})\r\nexport class GameTableComponent implements OnInit, OnDestroy, AfterViewInit {\r\n  @ViewChild('root', { static: true }) rootElementRef: ElementRef<HTMLElement>;\r\n  @ViewChild('gameTable', { static: true }) gameTable: ElementRef<HTMLElement>;\r\n  @ViewChild('gameObjects', { static: true }) gameObjects: ElementRef<HTMLElement>;\r\n  @ViewChild('gridCanvas', { static: true }) gridCanvas: ElementRef<HTMLCanvasElement>;\r\n\r\n  get tableSelecter(): TableSelecter { return this.tabletopService.tableSelecter; }\r\n  get currentTable(): GameTable { return this.tabletopService.currentTable; }\r\n\r\n  get tableImage(): ImageFile {\r\n    let file: ImageFile = ImageStorage.instance.get(this.currentTable.imageIdentifier);\r\n    return this.imageService.getSkeletonOr(file);\r\n  }\r\n\r\n  get backgroundImage(): ImageFile {\r\n    let file: ImageFile = ImageStorage.instance.get(this.currentTable.backgroundImageIdentifier);\r\n    return file ? file : ImageFile.Empty;\r\n  }\r\n\r\n  get backgroundFilterType(): FilterType {\r\n    return this.currentTable.backgroundFilterType;\r\n  }\r\n\r\n  private isTransformMode: boolean = false;\r\n\r\n  private currentPositionX: number = 0;\r\n  private currentPositionY: number = 0;\r\n\r\n  get isPointerDragging(): boolean { return this.pointerDeviceService.isDragging; }\r\n\r\n  private viewPotisonX: number = 100;\r\n  private viewPotisonY: number = 0;\r\n  private viewPotisonZ: number = 0;\r\n\r\n  private viewRotateX: number = 50;\r\n  private viewRotateY: number = 0;\r\n  private viewRotateZ: number = 10;\r\n\r\n  private buttonCode: number = 0;\r\n  private input: InputHandler = null;\r\n  private gesture: TableTouchGesture = null;\r\n\r\n  get characters(): GameCharacter[] { return this.tabletopService.characters; }\r\n  get tableMasks(): GameTableMask[] { return this.tabletopService.tableMasks; }\r\n  get cards(): Card[] { return this.tabletopService.cards; }\r\n  get cardStacks(): CardStack[] { return this.tabletopService.cardStacks; }\r\n  get terrains(): Terrain[] { return this.tabletopService.terrains; }\r\n  get textNotes(): TextNote[] { return this.tabletopService.textNotes; }\r\n  get diceSymbols(): DiceSymbol[] { return this.tabletopService.diceSymbols; }\r\n  get peerCursors(): PeerCursor[] { return this.tabletopService.peerCursors; }\r\n\r\n  constructor(\r\n    private ngZone: NgZone,\r\n    private contextMenuService: ContextMenuService,\r\n    private elementRef: ElementRef,\r\n    private pointerDeviceService: PointerDeviceService,\r\n    private coordinateService: CoordinateService,\r\n    private imageService: ImageService,\r\n    private tabletopService: TabletopService,\r\n    private tabletopActionService: TabletopActionService,\r\n    private modalService: ModalService,\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    EventSystem.register(this)\r\n      .on('UPDATE_GAME_OBJECT', -1000, event => {\r\n        if (event.data.identifier !== this.currentTable.identifier && event.data.identifier !== this.tableSelecter.identifier) return;\r\n        console.log('UPDATE_GAME_OBJECT GameTableComponent ' + this.currentTable.identifier);\r\n\r\n        this.setGameTableGrid(this.currentTable.width, this.currentTable.height, this.currentTable.gridSize, this.currentTable.gridType, this.currentTable.gridColor);\r\n      })\r\n      .on('DRAG_LOCKED_OBJECT', event => {\r\n        this.isTransformMode = true;\r\n        this.pointerDeviceService.isDragging = false;\r\n        let opacity: number = this.tableSelecter.gridShow ? 1.0 : 0.0;\r\n        this.gridCanvas.nativeElement.style.opacity = opacity + '';\r\n      })\r\n      .on('FOCUS_TO_TABLETOP_COORDINATE', event => {\r\n        setTimeout(() => {\r\n          console.log(`move table to focus (${event.data.x}, ${event.data.y})`);\r\n          this.gameTable.nativeElement.style.transition = '0.2s ease-out';\r\n          setTimeout(() => {\r\n            this.gameTable.nativeElement.style.transition = null;\r\n          }, 100);\r\n          // 座標変換\r\n          let centerX = this.gridCanvas.nativeElement.clientWidth / 2;\r\n          let centerY = this.gridCanvas.nativeElement.clientHeight / 2;\r\n          let movedX = event.data.x - centerX;\r\n          let movedY = event.data.y - centerY;\r\n          // z軸回転\r\n          let rotateZRad = this.viewRotateZ / 180 * Math.PI;\r\n          let rotatedMovedX = movedX * Math.cos(rotateZRad) - movedY * Math.sin(rotateZRad);\r\n          let zRotatedMovedY = movedX * Math.sin(rotateZRad) + movedY * Math.cos(rotateZRad);\r\n          // x軸回転\r\n          let rotateXRad = this.viewRotateX / 180 * Math.PI;\r\n          let rotatedMovedY = zRotatedMovedY * Math.cos(rotateXRad);\r\n          let rotatedMovedZ = zRotatedMovedY * Math.sin(rotateXRad);\r\n          // 移動\r\n          this.setTransform(\r\n            100 - rotatedMovedX - this.viewPotisonX, -rotatedMovedY - this.viewPotisonY, -rotatedMovedZ - this.viewPotisonZ, 0, 0, 0\r\n          );\r\n        }, 50);\r\n      });\r\n    this.tabletopActionService.makeDefaultTable();\r\n    this.tabletopActionService.makeDefaultTabletopObjects();\r\n    this.tabletopActionService.initAprilDiceImage();\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    this.ngZone.runOutsideAngular(() => {\r\n      this.input = new InputHandler(this.elementRef.nativeElement, { capture: true });\r\n      this.initializeTableTouchGesture();\r\n    });\r\n    this.input.onStart = this.onInputStart.bind(this);\r\n    this.input.onMove = this.onInputMove.bind(this);\r\n    this.input.onEnd = this.onInputEnd.bind(this);\r\n    this.cancelInput();\r\n\r\n    this.setGameTableGrid(this.currentTable.width, this.currentTable.height, this.currentTable.gridSize, this.currentTable.gridType, this.currentTable.gridColor);\r\n    this.setTransform(0, 0, 0, 0, 0, 0);\r\n    this.coordinateService.tabletopOriginElement = this.gameObjects.nativeElement;\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    EventSystem.unregister(this);\r\n    this.input.destroy();\r\n    this.gesture.destroy();\r\n  }\r\n\r\n  initializeTableTouchGesture() {\r\n    this.gesture = new TableTouchGesture(this.rootElementRef.nativeElement, this.ngZone);\r\n    this.gesture.onstart = this.onTableTouchStart.bind(this);\r\n    this.gesture.onend = this.onTableTouchEnd.bind(this);\r\n    this.gesture.ongesture = this.onTableTouchGesture.bind(this);\r\n    this.gesture.ontransform = this.onTableTouchTransform.bind(this);\r\n  }\r\n\r\n  onTableTouchStart() {\r\n    this.input.cancel();\r\n  }\r\n\r\n  onTableTouchEnd() {\r\n    this.cancelInput();\r\n  }\r\n\r\n  onTableTouchGesture() {\r\n    this.cancelInput();\r\n  }\r\n\r\n  onTableTouchTransform(transformX: number, transformY: number, transformZ: number, rotateX: number, rotateY: number, rotateZ: number, event: string, srcEvent: TouchEvent | MouseEvent | PointerEvent) {\r\n    if (event === TableTouchGestureEvent.PAN && (!this.isTransformMode || this.input.isGrabbing)) return;\r\n\r\n    if (!this.pointerDeviceService.isAllowedToOpenContextMenu && this.contextMenuService.isShow) {\r\n      this.ngZone.run(() => this.contextMenuService.close());\r\n    }\r\n\r\n    if (srcEvent.cancelable) srcEvent.preventDefault();\r\n\r\n    //\r\n    let scale = (1000 + Math.abs(this.viewPotisonZ)) / 1000;\r\n    transformX *= scale;\r\n    transformY *= scale;\r\n    if (80 < rotateX + this.viewRotateX) rotateX += 80 - (rotateX + this.viewRotateX);\r\n    if (rotateX + this.viewRotateX < 0) rotateX += 0 - (rotateX + this.viewRotateX);\r\n    if (750 < transformZ + this.viewPotisonZ) transformZ += 750 - (transformZ + this.viewPotisonZ);\r\n\r\n    this.setTransform(transformX, transformY, transformZ, rotateX, rotateY, rotateZ);\r\n  }\r\n\r\n  onInputStart(e: any) {\r\n    this.currentPositionX = this.input.pointer.x;\r\n    this.currentPositionY = this.input.pointer.y;\r\n\r\n    if (e.target.contains(this.gameObjects.nativeElement) || e.button === 1 || e.button === 2) {\r\n      this.isTransformMode = true;\r\n    } else {\r\n      this.isTransformMode = false;\r\n      this.pointerDeviceService.isDragging = true;\r\n      this.gridCanvas.nativeElement.style.opacity = 1.0 + '';\r\n    }\r\n\r\n    this.buttonCode = e.button;\r\n\r\n    if (!document.activeElement.contains(e.target)) {\r\n      this.removeSelectionRanges();\r\n      this.removeFocus();\r\n    }\r\n  }\r\n\r\n  onInputEnd(e: any) {\r\n    this.cancelInput();\r\n  }\r\n\r\n  onInputMove(e: any) {\r\n    if (!this.isTransformMode) return;\r\n\r\n    let x = this.input.pointer.x;\r\n    let y = this.input.pointer.y;\r\n    let deltaX = x - this.currentPositionX;\r\n    let deltaY = y - this.currentPositionY;\r\n\r\n    let transformX = 0;\r\n    let transformY = 0;\r\n    let transformZ = 0;\r\n\r\n    let rotateX = 0;\r\n    let rotateY = 0;\r\n    let rotateZ = 0;\r\n\r\n    if (this.buttonCode === 2) {\r\n      rotateZ = -deltaX / 5;\r\n      rotateX = -deltaY / 5;\r\n    } else {\r\n      let scale = (1000 + Math.abs(this.viewPotisonZ)) / 1000;\r\n      transformX = deltaX * scale;\r\n      transformY = deltaY * scale;\r\n    }\r\n\r\n    if (!this.pointerDeviceService.isAllowedToOpenContextMenu && this.contextMenuService.isShow) {\r\n      this.ngZone.run(() => { this.contextMenuService.close(); });\r\n    }\r\n\r\n    this.currentPositionX = x;\r\n    this.currentPositionY = y;\r\n\r\n    if (e.cancelable) e.preventDefault();\r\n    this.setTransform(transformX, transformY, transformZ, rotateX, rotateY, rotateZ);\r\n  }\r\n\r\n  cancelInput() {\r\n    this.input.cancel();\r\n    this.isTransformMode = true;\r\n    this.pointerDeviceService.isDragging = false;\r\n    let opacity: number = this.tableSelecter.gridShow ? 1.0 : 0.0;\r\n    this.gridCanvas.nativeElement.style.opacity = opacity + '';\r\n  }\r\n\r\n  @HostListener('wheel', ['$event'])\r\n  onWheel(e: WheelEvent) {\r\n    if (!this.isTransformMode) return;\r\n\r\n    let pixelDeltaY = 0;\r\n    switch (e.deltaMode) {\r\n      case WheelEvent.DOM_DELTA_LINE:\r\n        pixelDeltaY = e.deltaY * 16;\r\n        break;\r\n      case WheelEvent.DOM_DELTA_PAGE:\r\n        pixelDeltaY = e.deltaY * window.innerHeight;\r\n        break;\r\n      default:\r\n        pixelDeltaY = e.deltaY;\r\n        break;\r\n    }\r\n\r\n    let transformX = 0;\r\n    let transformY = 0;\r\n    let transformZ = 0;\r\n\r\n    let rotateX = 0;\r\n    let rotateY = 0;\r\n    let rotateZ = 0;\r\n\r\n    transformZ = pixelDeltaY * -1.5;\r\n    if (300 ** 2 < transformZ ** 2) transformZ = Math.min(Math.max(transformZ, -300), 300);\r\n\r\n    this.setTransform(transformX, transformY, transformZ, rotateX, rotateY, rotateZ);\r\n  }\r\n\r\n  @HostListener('document:keydown', ['$event'])\r\n  onKeydown(e: KeyboardEvent) {\r\n    if (!this.isTransformMode || document.body !== document.activeElement) return;\r\n    let transformX = 0;\r\n    let transformY = 0;\r\n    let transformZ = 0;\r\n\r\n    let rotateX = 0;\r\n    let rotateY = 0;\r\n    let rotateZ = 0;\r\n\r\n    let key = this.getKeyName(e);\r\n    switch (key) {\r\n      case Keyboard.ArrowLeft:\r\n        if (e.shiftKey) {\r\n          rotateZ = -2;\r\n        } else {\r\n          transformX = 10;\r\n        }\r\n        break;\r\n      case Keyboard.ArrowUp:\r\n        if (e.shiftKey) {\r\n          rotateX = -2;\r\n        } else if (e.ctrlKey) {\r\n          transformZ = 150;\r\n        } else {\r\n          transformY = 10;\r\n        }\r\n        break;\r\n      case Keyboard.ArrowRight:\r\n        if (e.shiftKey) {\r\n          rotateZ = 2;\r\n        } else {\r\n          transformX = -10;\r\n        }\r\n        break;\r\n      case Keyboard.ArrowDown:\r\n        if (e.shiftKey) {\r\n          rotateX = 2;\r\n        } else if (e.ctrlKey) {\r\n          transformZ = -150;\r\n        } else {\r\n          transformY = -10;\r\n        }\r\n        break;\r\n    }\r\n    let isArrowKey = Keyboard[key] != null;\r\n    if (isArrowKey) e.preventDefault();\r\n    this.setTransform(transformX, transformY, transformZ, rotateX, rotateY, rotateZ);\r\n  }\r\n\r\n  @HostListener('contextmenu', ['$event'])\r\n  onContextMenu(e: any) {\r\n    if (!document.activeElement.contains(this.gameObjects.nativeElement)) return;\r\n    e.preventDefault();\r\n\r\n    if (!this.pointerDeviceService.isAllowedToOpenContextMenu) return;\r\n\r\n    let menuPosition = this.pointerDeviceService.pointers[0];\r\n    let objectPosition = this.coordinateService.calcTabletopLocalCoordinate();\r\n    let menuActions: ContextMenuAction[] = [];\r\n\r\n    Array.prototype.push.apply(menuActions, this.tabletopActionService.makeDefaultContextMenuActions(objectPosition));\r\n    menuActions.push(ContextMenuSeparator);\r\n    menuActions.push({\r\n      name: '盤面設定', action: () => {\r\n        this.modalService.open(GameTableSettingComponent);\r\n      }\r\n    });\r\n    this.contextMenuService.open(menuPosition, menuActions, this.currentTable.name);\r\n  }\r\n\r\n  private getKeyName(keyboard: KeyboardEvent): string {\r\n    if (keyboard.key) return keyboard.key;\r\n    switch (keyboard.keyCode) {\r\n      case 37: return Keyboard.ArrowLeft;\r\n      case 38: return Keyboard.ArrowUp;\r\n      case 39: return Keyboard.ArrowRight;\r\n      case 40: return Keyboard.ArrowDown;\r\n      default: return '';\r\n    }\r\n  }\r\n\r\n  private setTransform(transformX: number, transformY: number, transformZ: number, rotateX: number, rotateY: number, rotateZ: number) {\r\n    this.viewRotateX += rotateX;\r\n    this.viewRotateY += rotateY;\r\n    this.viewRotateZ += rotateZ;\r\n\r\n    this.viewPotisonX += transformX;\r\n    this.viewPotisonY += transformY;\r\n    this.viewPotisonZ += transformZ;\r\n\r\n    this.gameTable.nativeElement.style.transform = 'translateZ(' + this.viewPotisonZ + 'px) translateY(' + this.viewPotisonY + 'px) translateX(' + this.viewPotisonX + 'px) rotateY(' + this.viewRotateY + 'deg) rotateX(' + this.viewRotateX + 'deg) rotateZ(' + this.viewRotateZ + 'deg) ';\r\n  }\r\n\r\n  private setGameTableGrid(width: number, height: number, gridSize: number = 50, gridType: GridType = GridType.SQUARE, gridColor: string = '#000000e6') {\r\n    this.gameTable.nativeElement.style.width = width * gridSize + 'px';\r\n    this.gameTable.nativeElement.style.height = height * gridSize + 'px';\r\n\r\n    let render = new GridLineRender(this.gridCanvas.nativeElement);\r\n    render.render(width, height, gridSize, gridType, gridColor);\r\n\r\n    let opacity: number = this.tableSelecter.gridShow ? 1.0 : 0.0;\r\n    this.gridCanvas.nativeElement.style.opacity = opacity + '';\r\n  }\r\n\r\n  private removeSelectionRanges() {\r\n    let selection = window.getSelection();\r\n    if (!selection.isCollapsed) {\r\n      selection.removeAllRanges();\r\n    }\r\n  }\r\n\r\n  private removeFocus() {\r\n    if (document.activeElement instanceof HTMLElement) {\r\n      document.activeElement.blur();\r\n    }\r\n  }\r\n\r\n  trackByGameObject(index: number, gameObject: GameObject) {\r\n    return gameObject.identifier;\r\n  }\r\n}\r\n","<div class=\"background-image is-pointer-events-none\" [ngClass]=\"[(backgroundFilterType ? 'is-filter' : ''), backgroundFilterType]\" \r\n[style.background-image]=\"'url(' + backgroundImage.url + ')' | safe: 'style'\"></div>\r\n<div class=\"component is-fill is-perspective\" [ngClass]=\"{'is-grabbing': isPointerDragging}\" #root>\r\n  <div class=\"component-content is-fill is-3d\" #gameTable>\r\n    <div id=\"app-game-table\" class=\"game-table table-image is-3d\" [style.background-image]=\"'url(' + tableImage.url + ')' | safe: 'style'\" #gameObjects>\r\n      <canvas class=\"grid-canvas is-fill is-pointer-events-none\" #gridCanvas></canvas>\r\n      <terrain class=\"is-3d\" *ngFor=\"let terrain of terrains; trackBy: trackByGameObject\" [terrain]=\"terrain\"></terrain>\r\n      <game-table-mask class=\"is-3d\" *ngFor=\"let mask of tableMasks; trackBy: trackByGameObject\" [gameTableMask]=\"mask\"></game-table-mask>\r\n      <text-note class=\"is-3d\" *ngFor=\"let textNote of textNotes; trackBy: trackByGameObject\" [textNote]=\"textNote\" [appTooltip]=\"textNote\" [ngStyle]=\"{'z-index' : textNote.zindex}\"></text-note>\r\n      <card-stack class=\"is-3d\" *ngFor=\"let cardStack of cardStacks; trackBy: trackByGameObject\" [cardStack]=\"cardStack\" [appTooltip]=\"cardStack\" [ngStyle]=\"{'z-index' : cardStack.zindex, 'transform': 'translateZ(' + (cardStack.zindex * 0.001) +'px)'}\"></card-stack>\r\n      <card class=\"is-3d\" *ngFor=\"let card of cards; trackBy: trackByGameObject\" [card]=\"card\" [appTooltip]=\"card\" [ngStyle]=\"{'z-index' : card.zindex, 'transform': 'translateZ(' + (card.zindex * 0.001) +'px)'}\"></card>\r\n      <dice-symbol class=\"is-3d\" *ngFor=\"let diceSymbol of diceSymbols; trackBy: trackByGameObject\" [diceSymbol]=\"diceSymbol\" [appTooltip]=\"diceSymbol\"></dice-symbol>\r\n      <game-character class=\"is-3d\" *ngFor=\"let character of characters; trackBy: trackByGameObject\" [gameCharacter]=\"character\" [appTooltip]=\"character\"></game-character>\r\n      <peer-cursor class=\"is-3d\" *ngFor=\"let cursor of peerCursors; trackBy: trackByGameObject\" [cursor]=\"cursor\"></peer-cursor>\r\n    </div>\r\n  </div>\r\n</div>\r\n","import { Injectable, NgZone } from '@angular/core';\r\n\r\nimport { ChatTab } from '@udonarium/chat-tab';\r\nimport { ChatTabList } from '@udonarium/chat-tab-list';\r\nimport { FileArchiver } from '@udonarium/core/file-storage/file-archiver';\r\nimport { ImageFile, ImageState } from '@udonarium/core/file-storage/image-file';\r\nimport { ImageStorage } from '@udonarium/core/file-storage/image-storage';\r\nimport { MimeType } from '@udonarium/core/file-storage/mime-type';\r\nimport { GameObject } from '@udonarium/core/synchronize-object/game-object';\r\nimport { PromiseQueue } from '@udonarium/core/system/util/promise-queue';\r\nimport { XmlUtil } from '@udonarium/core/system/util/xml-util';\r\nimport { DataSummarySetting } from '@udonarium/data-summary-setting';\r\nimport { Room } from '@udonarium/room';\r\n\r\nimport { saveAs } from 'file-saver';\r\n\r\nimport * as Beautify from 'vkbeautify';\r\n//本家PR #92より\r\nimport { ImageTagList } from '@udonarium/image-tag-list';\r\n//\r\ntype UpdateCallback = (percent: number) => void;\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class SaveDataService {\r\n  private static queue: PromiseQueue = new PromiseQueue('SaveDataServiceQueue');\r\n\r\n  constructor(\r\n    private ngZone: NgZone\r\n  ) { }\r\n\r\n  saveRoomAsync(fileName: string = 'ルームデータ', updateCallback?: UpdateCallback): Promise<void> {\r\n    return SaveDataService.queue.add((resolve, reject) => resolve(this._saveRoomAsync(fileName, updateCallback)));\r\n  }\r\n\r\n  private _saveRoomAsync(fileName: string = 'ルームデータ', updateCallback?: UpdateCallback): Promise<void> {\r\n    let files: File[] = [];\r\n    let roomXml = this.convertToXml(new Room());\r\n    let chatXml = this.convertToXml(ChatTabList.instance);\r\n    let summarySetting = this.convertToXml(DataSummarySetting.instance);\r\n    files.push(new File([roomXml], 'data.xml', { type: 'text/plain' }));\r\n    files.push(new File([chatXml], 'chat.xml', { type: 'text/plain' }));\r\n    files.push(new File([summarySetting], 'summary.xml', { type: 'text/plain' }));\r\n//本家PR #92より\r\n//    files = files.concat(this.searchImageFiles(roomXml));\r\n//    files = files.concat(this.searchImageFiles(chatXml));\r\n\r\n    let images: ImageFile[] = [];\r\n    images = images.concat(this.searchImageFiles(roomXml));\r\n    images = images.concat(this.searchImageFiles(chatXml));\r\n    for (const image of images) {\r\n      if (image.state === ImageState.COMPLETE) {\r\n        files.push(new File([image.blob], image.identifier + '.' + MimeType.extension(image.blob.type), { type: image.blob.type }));\r\n      }\r\n    }\r\n\r\n    let imageTagXml = this.convertToXml(ImageTagList.create(images));\r\n    files.push(new File([imageTagXml], 'imagetag.xml', { type: 'text/plain' }));\r\n\r\n    return this.saveAsync(files, this.appendTimestamp(fileName), updateCallback);\r\n  }\r\n\r\n  saveGameObjectAsync(gameObject: GameObject, fileName: string = 'xml_data', updateCallback?: UpdateCallback): Promise<void> {\r\n    return SaveDataService.queue.add((resolve, reject) => resolve(this._saveGameObjectAsync(gameObject, fileName, updateCallback)));\r\n  }\r\n\r\n  private _saveGameObjectAsync(gameObject: GameObject, fileName: string = 'xml_data', updateCallback?: UpdateCallback): Promise<void> {\r\n    let files: File[] = [];\r\n    let xml: string = this.convertToXml(gameObject);\r\n\r\n    files.push(new File([xml], 'data.xml', { type: 'text/plain' }));\r\n//本家PR #92より\r\n//    files = files.concat(this.searchImageFiles(xml));\r\n    let images: ImageFile[] = [];\r\n    images = images.concat(this.searchImageFiles(xml));\r\n    for (const image of images) {\r\n      if (image.state === ImageState.COMPLETE) {\r\n        files.push(new File([image.blob], image.identifier + '.' + MimeType.extension(image.blob.type), { type: image.blob.type }));\r\n      }\r\n    }\r\n\r\n    let imageTagXml = this.convertToXml(ImageTagList.create(images));\r\n    files.push(new File([imageTagXml], 'imagetag.xml', { type: 'text/plain' }));\r\n\r\n    return this.saveAsync(files, this.appendTimestamp(fileName), updateCallback);\r\n  }\r\n\r\n  private saveAsync(files: File[], zipName: string, updateCallback?: UpdateCallback): Promise<void> {\r\n    let progresPercent = -1;\r\n    return FileArchiver.instance.saveAsync(files, zipName, meta => {\r\n      let percent = meta.percent | 0;\r\n      if (percent <= progresPercent) return;\r\n      progresPercent = percent;\r\n      this.ngZone.run(() => updateCallback(progresPercent));\r\n    });\r\n  }\r\n\r\n  private convertToXml(gameObject: GameObject): string {\r\n    let xmlDeclaration = '<?xml version=\"1.0\" encoding=\"UTF-8\"?>';\r\n//    return xmlDeclaration + '\\n' + gameObject.toXml();\r\n    return xmlDeclaration + '\\n' + Beautify.xml(gameObject.toXml(), 2);\r\n  }\r\n\r\n//本家PR #92より\r\n//  private searchImageFiles(xml: string): File[] {\r\n  private searchImageFiles(xml: string): ImageFile[] {\r\n//\r\n    let xmlElement: Element = XmlUtil.xml2element(xml);\r\n\r\n//本家PR #92より\r\n//    let files: File[] = [];\r\n    let files: ImageFile[] = [];\r\n//\r\n    if (!xmlElement) return files;\r\n\r\n    let images: { [identifier: string]: ImageFile } = {};\r\n    let imageElements = xmlElement.ownerDocument.querySelectorAll('*[type=\"image\"]');\r\n\r\n    for (let i = 0; i < imageElements.length; i++) {\r\n      let identifier = imageElements[i].innerHTML;\r\n      images[identifier] = ImageStorage.instance.get(identifier);\r\n    }\r\n\r\n    imageElements = xmlElement.ownerDocument.querySelectorAll('*[imageIdentifier], *[backgroundImageIdentifier]');\r\n\r\n    for (let i = 0; i < imageElements.length; i++) {\r\n      let identifier = imageElements[i].getAttribute('imageIdentifier');\r\n      if (identifier) images[identifier] = ImageStorage.instance.get(identifier);\r\n      let backgroundImageIdentifier = imageElements[i].getAttribute('backgroundImageIdentifier');\r\n      if (backgroundImageIdentifier) images[backgroundImageIdentifier] = ImageStorage.instance.get(backgroundImageIdentifier);\r\n    }\r\n    for (let identifier in images) {\r\n      let image = images[identifier];\r\n//本家PR #92より\r\n//      if (image && image.state === ImageState.COMPLETE) {\r\n//        files.push(new File([image.blob], image.identifier + '.' + MimeType.extension(image.blob.type), { type: image.blob.type }));\r\n//      }\r\n    if (image) {\r\n       files.push(image);\r\n    }\r\n\r\n    }\r\n    return files;\r\n  }\r\n\r\n  saveHtmlChatLog(chatTab: ChatTab, fileName: string ){\r\n//    let files: File[] = [];\r\n    let text: string = chatTab.logHtml();\r\n\r\n    let blob = new Blob( [text], {type: \"text/plain;charset=utf-8\"});\r\n    saveAs(blob, fileName + \".html\");\r\n  }\r\n\r\n  saveHtmlChatLogAll( fileName: string ){\r\n//    let files: File[] = [];\r\n    let text: string = ChatTabList.instance.logHtml();\r\n\r\n    let blob = new Blob( [text], {type: \"text/plain;charset=utf-8\"});\r\n    saveAs(blob, fileName + \".html\");\r\n  }\r\n\r\n\r\n  private appendTimestamp(fileName: string): string {\r\n    let date = new Date();\r\n    let year = date.getFullYear();\r\n    let month = ('00' + (date.getMonth() + 1)).slice(-2);\r\n    let day = ('00' + date.getDate()).slice(-2);\r\n    let hours = ('00' + date.getHours()).slice(-2);\r\n    let minutes = ('00' + date.getMinutes()).slice(-2);\r\n\r\n    return fileName + `_${year}-${month}-${day}_${hours}${minutes}`;\r\n  }\r\n}\r\n","import { Component, Input, OnInit } from '@angular/core';\r\n\r\nimport { ModalService } from 'service/modal.service';\r\nimport { PanelService } from 'service/panel.service';\r\n\r\nimport { TabletopObject } from '@udonarium/tabletop-object';\r\nimport { GameCharacter } from '@udonarium/game-character';\r\n\r\n@Component({\r\n  selector: 'game-character-buff-view',\r\n  templateUrl: './game-character-buff-view.component.html',\r\n  styleUrls: ['./game-character-buff-view.component.css']\r\n})\r\nexport class GameCharacterBuffViewComponent implements OnInit {\r\n\r\n//  @Input() title: string = '';\r\n\r\n  @Input() character: TabletopObject = null;\r\n\r\n  constructor(\r\n    private panelService: PanelService,\r\n    private modalService: ModalService\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n/*\r\n    Promise.resolve().then(() => {\r\n      this.panelService.title = this.title;\r\n      if (this.modalService.option && this.modalService.option.title != null) {\r\n        this.modalService.title = this.modalService.option.title ? this.modalService.option.title : '';\r\n        this.text = this.modalService.option.text ? this.modalService.option.text : '';\r\n      }\r\n    });\r\n*/\r\n  }\r\n\r\n}\r\n","   <ng-container *ngIf=\"character\">\r\n     <div class=\"controller\">\r\n       <ng-container *ngIf=\"character.buffDataElement\">\r\n        <div class=\"table\">\r\n           <div class=\"flex-item\" *ngFor=\"let childElement of character.buffDataElement.children\">\r\n             <div class=\"table-row\" game-data-element-buff [gameDataElement]=\"childElement\" [isEdit]=\"isEdit\" [isPieceMode]=\"false\"></div>\r\n           </div>\r\n         </div>\r\n       </ng-container>\r\n      </div>\r\n   </ng-container >\r\n","import { animate, keyframes, style, transition, trigger } from '@angular/animations';\r\nimport { Component, ElementRef, Input, OnInit, ViewChild, ViewContainerRef } from '@angular/core';\r\nimport { PanelService } from 'service/panel.service';\r\nimport { PointerDeviceService } from 'service/pointer-device.service';\r\n//\r\nimport { EventSystem, Network } from '@udonarium/core/system';\r\nimport { ChatTachieImageComponent } from 'component/chat-tachie-img/chat-tachie-img.component';\r\n//\r\n\r\n@Component({\r\n  selector: 'ui-panel',\r\n  templateUrl: './ui-panel.component.html',\r\n  styleUrls: ['./ui-panel.component.css'],\r\n  providers: [\r\n    PanelService,\r\n  ],\r\n  animations: [\r\n    trigger('flyInOut', [\r\n      transition('void => *', [\r\n        animate('100ms ease-out', keyframes([\r\n          style({ transform: 'scale(0.8, 0.8)', opacity: '0', offset: 0 }),\r\n          style({ transform: 'scale(1.0, 1.0)', opacity: '1', offset: 1.0 })\r\n        ]))\r\n      ]),\r\n      transition('* => void', [\r\n        animate(100, style({ transform: 'scale(0, 0)' }))\r\n      ])\r\n    ])\r\n  ]\r\n})\r\nexport class UIPanelComponent implements OnInit {\r\n  @ViewChild('draggablePanel', { static: true }) draggablePanel: ElementRef<HTMLElement>;\r\n  @ViewChild('scrollablePanel', { static: true }) scrollablePanel: ElementRef<HTMLDivElement>;\r\n  @ViewChild('titleBar', { static: true }) titleBar: ElementRef<HTMLDivElement>;\r\n  @ViewChild('content', { read: ViewContainerRef, static: true }) content: ViewContainerRef;\r\n\r\n  @Input() set title(title: string) { this.panelService.title = title; }\r\n  @Input() set left(left: number) { this.panelService.left = left; }\r\n  @Input() set top(top: number) { this.panelService.top = top; }\r\n  @Input() set width(width: number) { this.panelService.width = width; }\r\n  @Input() set height(height: number) { this.panelService.height = height; }\r\n\r\n  get title(): string { return this.panelService.title; }\r\n  get left() { return this.panelService.left; }\r\n  get top() { return this.panelService.top; }\r\n  get width() { return this.panelService.width; }\r\n  get height() { return this.panelService.height; }\r\n\r\n  private preLeft: number = 0\r\n  private preTop: number = 0;\r\n  private preWidth: number = 100;\r\n  private preHeight: number = 100;\r\n\r\n  isFullScreen: boolean = false;\r\n  isMinimized: boolean = false;\r\n\r\n  get isPointerDragging(): boolean { return this.pointerDeviceService.isDragging; }\r\n\r\n  constructor(\r\n    public panelService: PanelService,\r\n    private pointerDeviceService: PointerDeviceService\r\n  ) { }\r\n  \r\n  \r\n  private tachieDispByMouse: boolean = true;\r\n  \r\n  showTachie(flag:boolean){\r\n    \r\n    this.tachieDispByMouse = flag;\r\n  }\r\n  \r\n  \r\n  \r\n  ngOnInit() {\r\n    this.panelService.scrollablePanel = this.scrollablePanel.nativeElement;\r\n/*\r\n    EventSystem.register(this)\r\n      .on('CUT_IN_PANEL_POS_CHANGE', event => { \r\n//        console.log('EVENT:CUT_IN_PANEL_POS_CHANGE :' + this.title);\r\n        if( this.isCutIn ){\r\n          if( event.data.cutInIdentifier == this.panelService.cutInIdentifier && ( this.panelService.cutInIdentifier.length > 0 ) ){\r\n            \r\n            console.log('EVENT:CUT_IN_PANEL_POS_CHANGE >movePanel()');\r\n            console.log( 'left:' + event.data.left + ' top:' + event.data.top + ' width:'+ event.data.width + ' height:'+ event.data.height);\r\n            this.movePanel( event.data.left , event.data.top , event.data.width , event.data.height );\r\n          }\r\n        }\r\n      });\r\n*/\r\n  }\r\n  \r\n/*\r\n  movePanel( left : number , top : number , width : number , height : number){\r\n      let panel = this.draggablePanel.nativeElement;\r\n\r\n      this.left = left;\r\n      this.top = top;\r\n      this.width = width;\r\n      this.height = height;\r\n\r\n      panel.style.left = this.left + 'px';\r\n      panel.style.top = this.top + 'px';\r\n      panel.style.width = this.width + 'px';\r\n      panel.style.height = this.height + 'px';\r\n\r\n  }\r\n*/  \r\n  toggleMinimize() {\r\n    if (this.isFullScreen) return;\r\n\r\n    let body  = this.scrollablePanel.nativeElement;\r\n    let panel = this.draggablePanel.nativeElement;\r\n    if (this.isMinimized) {\r\n      this.isMinimized = false;\r\n      body.style.display = null;\r\n      this.height = this.preHeight;\r\n    } else {\r\n      this.preHeight = panel.offsetHeight;\r\n\r\n      this.isMinimized = true;\r\n      body.style.display = 'none';\r\n      this.height = this.titleBar.nativeElement.offsetHeight;\r\n    }\r\n  }\r\n\r\n  toggleFullScreen() {\r\n    if (this.isMinimized) return;\r\n\r\n    let panel = this.draggablePanel.nativeElement;\r\n    if (panel.offsetLeft <= 0\r\n      && panel.offsetTop <= 0\r\n      && panel.offsetWidth >= window.innerWidth\r\n      && panel.offsetHeight >= window.innerHeight) {\r\n      this.isFullScreen = false;\r\n    } else {\r\n      this.isFullScreen = true;\r\n    }\r\n\r\n    if (this.isFullScreen) {\r\n      this.preLeft = panel.offsetLeft;\r\n      this.preTop = panel.offsetTop;\r\n      this.preWidth = panel.offsetWidth;\r\n      this.preHeight = panel.offsetHeight;\r\n\r\n      this.left = 0;\r\n      this.top = 0;\r\n      this.width = window.innerWidth;\r\n      this.height = window.innerHeight;\r\n\r\n      panel.style.left = this.left + 'px';\r\n      panel.style.top = this.top + 'px';\r\n      panel.style.width = this.width + 'px';\r\n      panel.style.height = this.height + 'px';\r\n    } else {\r\n      this.left = this.preLeft;\r\n      this.top = this.preTop;\r\n      this.width = this.preWidth;\r\n      this.height = this.preHeight;\r\n    }\r\n  }\r\n  \r\n  get padding_(): string {\r\n    if( this.panelService.isCutIn )return '0px';\r\n    else return '8px';\r\n  }\r\n    \r\n  get isCutIn(): boolean {\r\n    return this.panelService.isCutIn ;\r\n  }\r\n  \r\n  close() {\r\n    if (this.panelService) this.panelService.close();\r\n  }\r\n  \r\n  backGroundSetting( isWhiteLog :boolean ): string{\r\n    \r\n//    if( isWhiteLog )\r\n    if( 0 )\r\n      return \"background: linear-gradient(-30deg, rgba(255,255,255, 1.0), rgba(255, 255, 255, 1.0)); \"\r\n//      return \"background: linear-gradient(-30deg, rgba(240,240,240, 0.9), rgba(240, 240, 240, 0.9));\"\r\n    else\r\n      return \"background: linear-gradient(-30deg, rgba(240,218,189, 0.9), rgba(255, 244, 232, 0.9));\"\r\n  }\r\n  \r\n}\r\n","<div [@flyInOut]=\"'in'\" [ngClass]=\"{'pointer-events-none': isPointerDragging}\" class=\"draggable-panel\"\r\n  [style.left.px]=\"left\" [style.top.px]=\"top\" [style.width.px]=\"width\" [style.height.px]=\"height\"\r\n  [resizable.disable]=\"isMinimized || isFullScreen\"\r\n  [draggable.stack]=\"'.draggable-panel'\" appDraggable appResizable #draggablePanel\r\n  (mouseenter)=\"showTachie(true)\" (mouseleave)=\"showTachie(false)\"\r\n  >\r\n<!--  style = \"{{backGroundSetting(0)}}\"-->\r\n\r\n  <div class=\"title\" #titleBar>\r\n    <div class=\"title-button\">\r\n      <button [disabled]=\"isFullScreen\" (click)=\"toggleMinimize()\"><i class=\"material-icons\" style=\"font-size: 14px;\">minimize</i></button>\r\n      <button [disabled]=\"isMinimized\" (click)=\"toggleFullScreen()\"><i class=\"material-icons\" style=\"font-size: 14px;\">fullscreen</i></button>\r\n      <button (click)=\"close()\"><i class=\"material-icons\" style=\"font-size: 14px;\">close</i></button>\r\n    </div>\r\n    {{panelService.title}}\r\n  </div>\r\n  <ng-container *ngIf=\"panelService.chatTab\" >\r\n    <chat-tachie-img  [chatTabidentifier]=\"panelService.chatTab.identifier\" [isTilteTop]=\"1\"\r\n     [dispByMouse]=\"tachieDispByMouse\" ></chat-tachie-img>\r\n  </ng-container>\r\n    <div class=\"scrollable-panel\" [ngStyle]=\"{ 'padding': padding_ }\" #scrollablePanel  >\r\n      <ng-content></ng-content>\r\n      <div #content></div>\r\n    </div>\r\n</div>\r\n","//本家 PR#92より\r\nimport { SyncObject, SyncVar } from './core/synchronize-object/decorator';\r\nimport { ObjectNode } from './core/synchronize-object/object-node';\r\nimport { ObjectStore } from './core/synchronize-object/object-store';\r\nimport { ImageFile } from './core/file-storage/image-file';\r\nimport { ImageStorage } from './core/file-storage/image-storage';\r\n\r\n@SyncObject('image-tag')\r\nexport class ImageTag extends ObjectNode {\r\n  @SyncVar() imageIdentifier: string = '';\r\n  @SyncVar() tag: string = '';\r\n\r\n  containsWords(words: string[]): boolean {\r\n    return words.every(word => this.tag.indexOf(word) >= 0);\r\n//    return words.every(word => this.tag.indexOf(word) >= 0);\r\n  }\r\n\r\n  static searchImages(searchWords: string[]): ImageFile[] {\r\n    return ObjectStore.instance\r\n      .getObjects<ImageTag>(ImageTag)\r\n      .filter(tag => tag.containsWords(searchWords))\r\n      .map(tag => ImageStorage.instance.get(tag.imageIdentifier))\r\n      .filter(image => image);\r\n  }\r\n\r\n  static get(imageIdentifier: string): ImageTag {\r\n    return ObjectStore.instance.get<ImageTag>(`imagetag_${imageIdentifier}`);\r\n  }\r\n\r\n  static create(imageIdentifier: string) {\r\n    const object: ImageTag = new ImageTag(`imagetag_${imageIdentifier}`);\r\n\r\n    object.imageIdentifier = imageIdentifier;\r\n\r\n    object.initialize();\r\n    return object;\r\n  }\r\n\r\n  parseInnerXml(element: Element) {\r\n    // 既存のオブジェクトを更新する\r\n    let imageTag = ImageTag.get(this.imageIdentifier);\r\n    if (!imageTag) imageTag = ImageTag.create(this.imageIdentifier);\r\n    const context = imageTag.toContext();\r\n    context.syncData = this.toContext().syncData;\r\n    imageTag.apply(context);\r\n    imageTag.update();\r\n    this.destroy();\r\n  }\r\n}//\r\n","import { SyncObject, SyncVar } from './core/synchronize-object/decorator';\r\nimport { DataElement } from './data-element';\r\nimport { TabletopObject } from './tabletop-object';\r\nimport { moveToTopmost } from './tabletop-object-util';\r\n\r\n@SyncObject('text-note')\r\nexport class TextNote extends TabletopObject {\r\n  @SyncVar() rotate: number = 0;\r\n  @SyncVar() zindex: number = 0;\r\n  @SyncVar() password: string = '';\r\n\r\n  @SyncVar() limitHeight: boolean = false;\r\n  @SyncVar() overViewWidth: number = 250;\r\n  @SyncVar() overViewMaxHeight: number = 250;\r\n\r\n  get width(): number { return this.getCommonValue('width', 1); }\r\n  get height(): number { return this.getCommonValue('height', 1); }\r\n  get fontSize(): number { return this.getCommonValue('fontsize', 1); }\r\n  get title(): string { return this.getCommonValue('title', ''); }\r\n  get text(): string { return this.getCommonValue('text', ''); }\r\n  set text(text: string) { this.setCommonValue('text', text); }\r\n\r\n  toTopmost() {\r\n    moveToTopmost(this);\r\n  }\r\n\r\n  static create(title: string, text: string, fontSize: number = 16, width: number = 1, height: number = 1, identifier?: string): TextNote {\r\n    let object: TextNote = identifier ? new TextNote(identifier) : new TextNote();\r\n\r\n    object.createDataElements();\r\n    object.commonDataElement.appendChild(DataElement.create('width', width, {}, 'width_' + object.identifier));\r\n    object.commonDataElement.appendChild(DataElement.create('height', height, {}, 'height_' + object.identifier));\r\n    object.commonDataElement.appendChild(DataElement.create('fontsize', fontSize, {}, 'fontsize_' + object.identifier));\r\n    object.commonDataElement.appendChild(DataElement.create('title', title, {}, 'title_' + object.identifier));\r\n    object.commonDataElement.appendChild(DataElement.create('text', text, { type: 'note', currentValue: text }, 'text_' + object.identifier));\r\n    object.initialize();\r\n\r\n    return object;\r\n  }\r\n}","import {\r\n  AfterViewChecked,\r\n  AfterViewInit,\r\n  ChangeDetectionStrategy,\r\n  ChangeDetectorRef,\r\n  Component,\r\n  ElementRef,\r\n  EventEmitter,\r\n  Input,\r\n  NgZone,\r\n  OnChanges,\r\n  OnDestroy,\r\n  OnInit,\r\n  Output,\r\n  ViewChild,\r\n} from '@angular/core';\r\n\r\nimport { ChatMessage, ChatMessageContext } from '@udonarium/chat-message';\r\nimport { ChatTab } from '@udonarium/chat-tab';\r\nimport { ChatTabList } from '@udonarium/chat-tab-list';\r\nimport { ObjectStore } from '@udonarium/core/synchronize-object/object-store';\r\nimport { EventSystem } from '@udonarium/core/system';\r\nimport { ResettableTimeout } from '@udonarium/core/system/util/resettable-timeout';\r\nimport { setZeroTimeout } from '@udonarium/core/system/util/zero-timeout';\r\n\r\nimport { PanelService } from 'service/panel.service';\r\n\r\ntype ScrollPosition = { top: number, bottom: number, clientHeight: number, scrollHeight: number, };\r\n\r\nconst ua = window.navigator.userAgent.toLowerCase();\r\nconst isiOS = ua.indexOf('iphone') > -1 || ua.indexOf('ipad') > -1 || ua.indexOf('macintosh') > -1 && 'ontouchend' in document;\r\n\r\n@Component({\r\n  selector: 'chat-tab',\r\n  templateUrl: './chat-tab.component.html',\r\n  styleUrls: ['./chat-tab.component.css'],\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n})\r\nexport class ChatTabComponent implements OnInit, AfterViewInit, OnDestroy, OnChanges, AfterViewChecked {\r\n  sampleMessages: ChatMessageContext[] = [\r\n    { from: 'System', timestamp: 0, imageIdentifier: '', tag: '', name: '教學',\r\n\ttext: '關於用於此軟體的 3rdpartylicenses 請參照 '+ location.href.replace('/index.html', '' ).replace(/\\/$/,\"\") + '/3rdpartylicenses.txt' },\r\n    { from: 'System', timestamp: 0, imageIdentifier: '', tag: '', name: '教學', \r\n\ttext: '對於那些為開發做出貢獻的人，請參考這裡。 https://github.com/entyu/udonarium_lily' },\r\n    { from: 'System', timestamp: 0, imageIdentifier: '', tag: '', name: '教學', \r\n\ttext: '這是不使用伺服器的TRPG跑團工具。參與者彼此連接並同步圖像文件等數據。' },\r\n    { from: 'System', timestamp: 0, imageIdentifier: '', tag: '', name: '教學', \r\n\ttext: '所有數據都在每個參與者的瀏覽器中，因此，如果您想將房間狀態轉移到下一次，請確保執行“保存”以生成保存數據（zip）。 您可以通過在瀏覽器屏幕上拖放文件來加載保存的zip。' },\r\n    { from: 'System', to: '???', timestamp: 0, imageIdentifier: '', tag: '', name: '教學 > 玩家', \r\n\ttext: '秘密對話(密語)不記錄在保存數據中。' },\r\n    { from: 'System', to: '???', timestamp: 0, imageIdentifier: '', tag: '', name: '教學 > 玩家', \r\n\ttext: '此外，更新您的ID後，即使在同一房間，過去的秘密對話也將消失。 請小心。' },\r\n    { from: 'System', timestamp: 0, imageIdentifier: '', tag: '', name: '教學',\r\n\ttext: '推薦使用桌面版Chrome。目前不支援以手機進行操作。' },\r\n    { from: 'System', timestamp: 0, imageIdentifier: '', tag: '', name: '教學',\r\n\ttext: 'Lily版追加功能：當您輸入第一個聊天輸入時，即可使用聊天簡易顯示功能。' },\r\n    { from: 'System', timestamp: 0, imageIdentifier: '', tag: '', name: '教學', \r\n\ttext: '這就是本教學的全部內容。 當您輸入第一行對話時，本教學將被隱藏。' },\r\n  ];\r\n\r\n  private topTimestamp = 0;\r\n  private botomTimestamp = 0;\r\n\r\n  private needUpdate = true;\r\n\r\n  @ViewChild('logContainer', { static: true }) logContainerRef: ElementRef<HTMLDivElement>;\r\n  @ViewChild('messageContainer', { static: true }) messageContainerRef: ElementRef<HTMLDivElement>;\r\n\r\n  private topElm: HTMLElement = null;\r\n  private bottomElm: HTMLElement = null;\r\n  private topElmBox: ClientRect = null;\r\n  private bottomElmBox: ClientRect = null;\r\n\r\n  private topIndex = 0;\r\n  private bottomIndex = 0;\r\n\r\n  private _minMessageHeight: number = 26;\r\n  private _minMessageHeightNormal: number = 61;\r\n  \r\n  get minMessageHeight(){\r\n    \r\n    if( this.chatTab ){\r\n      if( this.chatTab.chatSimpleDispFlag ){\r\n        return this._minMessageHeight;\r\n      }\r\n    }\r\n    return this._minMessageHeightNormal;\r\n  }\r\n\r\n  private preScrollTop = 0;\r\n  private scrollSpeed = 0;\r\n\r\n  private _chatMessages: ChatMessage[] = [];\r\n  get chatMessages(): ChatMessage[] {\r\n    if (!this.chatTab) return [];\r\n    if (this.needUpdate) {\r\n      this.needUpdate = false;\r\n      let chatMessages = this.chatTab ? this.chatTab.chatMessages : [];\r\n      this.adjustIndex();\r\n\r\n      this._chatMessages = chatMessages.slice(this.topIndex, this.bottomIndex + 1);\r\n      this.topTimestamp = 0 < this._chatMessages.length ? this._chatMessages[0].timestamp : 0;\r\n      this.botomTimestamp = 0 < this._chatMessages.length ? this._chatMessages[this._chatMessages.length - 1].timestamp : 0;\r\n    }\r\n    return this._chatMessages;\r\n  }\r\n\r\n  get minScrollHeight(): number {\r\n    let length = this.chatTab ? this.chatTab.chatMessages.length : this.sampleMessages.length;\r\n    return (length < 10000 ? length : 10000) * this.minMessageHeight;\r\n  }\r\n\r\n  get topSpace(): number { return this.minScrollHeight - this.bottomSpace; }\r\n  get bottomSpace(): number {\r\n    return 0 < this.chatMessages.length\r\n      ? (this.chatTab.chatMessages.length - this.bottomIndex - 1) * this.minMessageHeight\r\n      : 0;\r\n  }\r\n\r\n  private scrollEventShortTimer: ResettableTimeout = null;\r\n  private scrollEventLongTimer: ResettableTimeout = null;\r\n  private addMessageEventTimer: NodeJS.Timer = null;\r\n\r\n  private callbackOnScroll: any = () => this.onScroll();\r\n  private callbackOnScrollToBottom: any = () => this.resetMessages();\r\n\r\n  @Input() chatTab: ChatTab;\r\n  get chatTabList(): ChatTabList { return ObjectStore.instance.get<ChatTabList>('ChatTabList'); }\r\n\r\n  @Output() onAddMessage: EventEmitter<null> = new EventEmitter();\r\n\r\n  constructor(\r\n    private ngZone: NgZone,\r\n    private changeDetector: ChangeDetectorRef,\r\n    private panelService: PanelService\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    let messages: ChatMessage[] = [];\r\n    for (let context of this.sampleMessages) {\r\n      let message = new ChatMessage();\r\n      for (let key in context) {\r\n        if (key === 'identifier') continue;\r\n        if (key === 'tabIdentifier') continue;\r\n        if (key === 'text') {\r\n          message.value = context[key];\r\n          continue;\r\n        }\r\n        if (context[key] == null || context[key] === '') continue;\r\n        message.setAttribute(key, context[key]);\r\n      }\r\n      messages.push(message);\r\n    }\r\n    this.sampleMessages = messages;\r\n\r\n    EventSystem.register(this)\r\n      .on('MESSAGE_ADDED', event => {\r\n        let message = ObjectStore.instance.get<ChatMessage>(event.data.messageIdentifier);\r\n        if (!message || !this.chatTab.contains(message)) return;\r\n\r\n        if (this.topTimestamp <= message.timestamp) {\r\n          this.changeDetector.markForCheck();\r\n          this.needUpdate = true;\r\n          this.onMessageInit();\r\n        }\r\n      })\r\n      .on('UPDATE_GAME_OBJECT', event => {\r\n        let message = ObjectStore.instance.get(event.data.identifier);\r\n        if (message && message instanceof ChatMessage\r\n          && this.topTimestamp <= message.timestamp && message.timestamp <= this.botomTimestamp\r\n          && this.chatTab.contains(message)) {\r\n          this.changeDetector.markForCheck();\r\n        }\r\n      })\r\n      .on('RE_DRAW_CHAT', event => {\r\n        console.log(\"CHAT_redraw\");\r\n        setTimeout(() => this.redraw() , 0);\r\n        //フラグの更新前にイベントが走るためタイマーを使う。ひとまずやむなし\r\n      });\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    this.ngZone.runOutsideAngular(() => {\r\n      this.scrollEventShortTimer = new ResettableTimeout(() => this.lazyScrollUpdate(), 33);\r\n      this.scrollEventLongTimer = new ResettableTimeout(() => this.lazyScrollUpdate(false), 66);\r\n      this.onScroll();\r\n      this.panelService.scrollablePanel.addEventListener('scroll', this.callbackOnScroll, false);\r\n      this.panelService.scrollablePanel.addEventListener('scrolltobottom', this.callbackOnScrollToBottom, false);\r\n    });\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    EventSystem.unregister(this);\r\n    this.panelService.scrollablePanel.removeEventListener('scroll', this.callbackOnScroll, false);\r\n    this.panelService.scrollablePanel.removeEventListener('scrolltobottom', this.callbackOnScrollToBottom, false);\r\n    this.scrollEventShortTimer.clear();\r\n    this.scrollEventLongTimer.clear();\r\n    if (this.addMessageEventTimer) clearTimeout(this.addMessageEventTimer);\r\n    this.addMessageEventTimer = null;\r\n  }\r\n\r\n  ngOnChanges() {\r\n    Promise.resolve().then(() => this.resetMessages());\r\n  }\r\n\r\n  ngAfterViewChecked() {\r\n    if (!this.topElm || !this.bottomElm) return;\r\n    this.ngZone.runOutsideAngular(() => {\r\n      Promise.resolve().then(() => this.adjustScrollPosition());\r\n    });\r\n  }\r\n\r\n  onMessageInit() {\r\n    if (this.addMessageEventTimer != null) return;\r\n    this.ngZone.runOutsideAngular(() => {\r\n      this.addMessageEventTimer = setTimeout(() => {\r\n        this.addMessageEventTimer = null;\r\n        this.ngZone.run(() => this.onAddMessage.emit());\r\n      }, 0);\r\n    });\r\n  }\r\n\r\n  resetMessages() {\r\n    let lastIndex = this.chatTab.chatMessages.length - 1;\r\n    this.topIndex = lastIndex - Math.floor(this.panelService.scrollablePanel.clientHeight / this.minMessageHeight);\r\n    this.bottomIndex = lastIndex;\r\n    this.needUpdate = true;\r\n    this.preScrollTop = -1;\r\n    this.scrollSpeed = 0;\r\n    this.topElm = this.bottomElm = null;\r\n    this.adjustIndex();\r\n    this.changeDetector.markForCheck();\r\n  }\r\n\r\n  trackByChatMessage(index: number, message: ChatMessage) {\r\n    return message.identifier;\r\n  }\r\n\r\n  private adjustIndex() {\r\n    let chatMessages = this.chatTab ? this.chatTab.chatMessages : [];\r\n    let lastIndex = 0 < chatMessages.length ? chatMessages.length - 1 : 0;\r\n\r\n    if (this.topIndex < 0) {\r\n      this.topIndex = 0;\r\n    }\r\n    if (lastIndex < this.bottomIndex) {\r\n      this.bottomIndex = lastIndex;\r\n    }\r\n\r\n    if (this.topIndex < 0) this.topIndex = 0;\r\n    if (this.bottomIndex < 0) this.bottomIndex = 0;\r\n    if (lastIndex < this.topIndex) this.topIndex = lastIndex;\r\n    if (lastIndex < this.bottomIndex) this.bottomIndex = lastIndex;\r\n  }\r\n\r\n  private getScrollPosition(): ScrollPosition {\r\n    let top = this.panelService.scrollablePanel.scrollTop;\r\n    let clientHeight = this.panelService.scrollablePanel.clientHeight;\r\n    let scrollHeight = this.panelService.scrollablePanel.scrollHeight;\r\n    if (top < 0) top = 0;\r\n    if (scrollHeight - clientHeight < top)\r\n      top = scrollHeight - clientHeight;\r\n    let bottom = top + clientHeight;\r\n    return { top, bottom, clientHeight, scrollHeight };\r\n  }\r\n\r\n  private adjustScrollPosition() {\r\n    if (!this.topElm || !this.bottomElm) return;\r\n\r\n    let hasTopElm = this.logContainerRef.nativeElement.contains(this.topElm);\r\n    let hasBotomElm = this.logContainerRef.nativeElement.contains(this.bottomElm);\r\n\r\n    let { hasTopBlank, hasBotomBlank } = this.checkBlank(hasTopElm, hasBotomElm);\r\n\r\n    this.topElm = this.bottomElm = null;\r\n\r\n    if (hasTopBlank || hasBotomBlank || (!hasTopElm && !hasBotomElm)) {\r\n      setZeroTimeout(() => this.lazyScrollUpdate());\r\n    }\r\n  }\r\n\r\n  private checkBlank(hasTopElm: boolean, hasBotomElm: boolean) {\r\n    let hasTopBlank = !hasTopElm;\r\n    let hasBotomBlank = !hasBotomElm;\r\n\r\n    if (!hasTopElm && !hasBotomElm) return { hasTopBlank, hasBotomBlank };\r\n\r\n    let elm: HTMLElement = null;\r\n    let prevBox: ClientRect = null;\r\n    let currentBox: ClientRect = null;\r\n    let diff: number = 0;\r\n    if (hasBotomElm) {\r\n      elm = this.bottomElm;\r\n      prevBox = this.bottomElmBox;\r\n    } else if (hasTopElm) {\r\n      elm = this.topElm;\r\n      prevBox = this.topElmBox;\r\n    }\r\n    currentBox = elm.getBoundingClientRect();\r\n    diff = prevBox.top - currentBox.top - this.scrollSpeed;\r\n    if ((!hasTopBlank || !hasBotomBlank) && 0.5 ** 2 < diff ** 2) {\r\n      this.panelService.scrollablePanel.scrollTop -= diff;\r\n    }\r\n\r\n    let logBox: ClientRect = this.logContainerRef.nativeElement.getBoundingClientRect();\r\n    let messageBox: ClientRect = this.messageContainerRef.nativeElement.getBoundingClientRect();\r\n\r\n    let messageBoxTop = messageBox.top - logBox.top;\r\n    let messageBoxBottom = messageBoxTop + messageBox.height;\r\n\r\n    let scrollPosition = this.getScrollPosition();\r\n\r\n    hasTopBlank = scrollPosition.top < messageBoxTop;\r\n    hasBotomBlank = messageBoxBottom < scrollPosition.bottom && scrollPosition.bottom < scrollPosition.scrollHeight;\r\n\r\n    return { hasTopBlank, hasBotomBlank };\r\n  }\r\n\r\n  private markForReadIfNeeded() {\r\n    if (!this.chatTab.hasUnread) return;\r\n\r\n    let scrollPosition = this.getScrollPosition();\r\n    if (scrollPosition.scrollHeight <= scrollPosition.bottom + 100) {\r\n      setZeroTimeout(() => {\r\n        this.chatTab.markForRead();\r\n        this.changeDetector.markForCheck();\r\n        this.ngZone.run(() => { });\r\n      });\r\n    }\r\n  }\r\n\r\n  private onScroll() {\r\n    this.scrollEventShortTimer.reset();\r\n    if (!this.scrollEventLongTimer.isActive) {\r\n      this.scrollEventLongTimer.reset();\r\n    }\r\n  }\r\n\r\n  private lazyScrollUpdate(isNormalUpdate: boolean = true) {\r\n    this.scrollEventShortTimer.stop();\r\n    this.scrollEventLongTimer.stop();\r\n\r\n    let chatMessageElements = this.messageContainerRef.nativeElement.querySelectorAll<HTMLElement>('chat-message');\r\n\r\n    let messageBoxTop = this.messageContainerRef.nativeElement.offsetTop;\r\n    let messageBoxBottom = messageBoxTop + this.messageContainerRef.nativeElement.clientHeight;\r\n\r\n    let preTopIndex = this.topIndex;\r\n    let preBottomIndex = this.bottomIndex;\r\n\r\n    let scrollPosition = this.getScrollPosition();\r\n    this.scrollSpeed = scrollPosition.top - this.preScrollTop;\r\n    this.preScrollTop = scrollPosition.top;\r\n\r\n    let hasTopBlank = scrollPosition.top < messageBoxTop;\r\n    let hasBotomBlank = messageBoxBottom < scrollPosition.bottom && scrollPosition.bottom < scrollPosition.scrollHeight;\r\n\r\n    if (!isNormalUpdate) {\r\n      this.scrollEventShortTimer.reset();\r\n    }\r\n\r\n    if (!isNormalUpdate && !hasTopBlank && !hasBotomBlank) {\r\n      return;\r\n    }\r\n\r\n    let scrollWideTop = scrollPosition.top - (!isNormalUpdate && hasTopBlank ? 100 : 1200);\r\n    let scrollWideBottom = scrollPosition.bottom + (!isNormalUpdate && hasBotomBlank ? 100 : 1200);\r\n\r\n    this.markForReadIfNeeded();\r\n    this.calcItemIndexRange(messageBoxTop, messageBoxBottom, scrollWideTop, scrollWideBottom, scrollPosition, chatMessageElements);\r\n\r\n    let isChangedIndex = this.topIndex != preTopIndex || this.bottomIndex != preBottomIndex;\r\n    if (!isChangedIndex) return;\r\n\r\n    this.needUpdate = true;\r\n\r\n    this.topElm = chatMessageElements[0];\r\n    this.bottomElm = chatMessageElements[chatMessageElements.length - 1];\r\n    this.topElmBox = this.topElm.getBoundingClientRect();\r\n    this.bottomElmBox = this.bottomElm.getBoundingClientRect();\r\n\r\n    setZeroTimeout(() => {\r\n      let scrollPosition = this.getScrollPosition();\r\n      this.scrollSpeed = scrollPosition.top - this.preScrollTop;\r\n      this.preScrollTop = scrollPosition.top;\r\n      this.changeDetector.markForCheck();\r\n      this.ngZone.run(() => { });\r\n    });\r\n  }\r\n  \r\n  redraw() {\r\n    // 強制的に再描画させる\r\n    this.changeDetector.detectChanges();\r\n  }  \r\n  \r\n  private calcElementMaxHeight(chatMessageElements: NodeListOf<HTMLElement>): number {\r\n    let maxHeight = this.minMessageHeight;\r\n    for (let i = chatMessageElements.length - 1; 0 <= i; i--) {\r\n      let height = chatMessageElements[i].clientHeight;\r\n      if (maxHeight < height) maxHeight = height;\r\n    }\r\n    return maxHeight;\r\n  }\r\n\r\n  private calcItemIndexRange(messageBoxTop: number, messageBoxBottom: number, scrollWideTop: number, scrollWideBottom: number, scrollPosition: ScrollPosition, chatMessageElements: NodeListOf<HTMLElement>) {\r\n    if (scrollWideTop >= messageBoxBottom || messageBoxTop >= scrollWideBottom) {\r\n      let lastIndex = this.chatTab.chatMessages.length - 1;\r\n      let scrollBottomHeight = scrollPosition.scrollHeight - scrollPosition.top - scrollPosition.clientHeight;\r\n\r\n      this.bottomIndex = lastIndex - Math.floor(scrollBottomHeight / this.minMessageHeight);\r\n      this.topIndex = this.bottomIndex - Math.floor(scrollPosition.clientHeight / this.minMessageHeight);\r\n\r\n      this.bottomIndex += 1;\r\n      this.topIndex -= 1;\r\n    } else {\r\n      let maxHeight = this.calcElementMaxHeight(chatMessageElements);\r\n      if (scrollWideTop < messageBoxTop) {\r\n        this.topIndex -= Math.floor((messageBoxTop - scrollWideTop) / maxHeight) + 1;\r\n      } else if (scrollWideTop > messageBoxTop) {\r\n        if (!isiOS) this.topIndex += Math.floor((scrollWideTop - messageBoxTop) / maxHeight);\r\n      }\r\n\r\n      if (messageBoxBottom > scrollWideBottom) {\r\n        if (!isiOS) this.bottomIndex -= Math.floor((messageBoxBottom - scrollWideBottom) / maxHeight);\r\n      } else if (messageBoxBottom < scrollWideBottom) {\r\n        this.bottomIndex += Math.floor((scrollWideBottom - messageBoxBottom) / maxHeight) + 1;\r\n      }\r\n    }\r\n    this.adjustIndex();\r\n  }\r\n}\r\n","<div class=\"log\" [style.minHeight.px]=\"minScrollHeight\" #logContainer>\r\n  <div class=\"virtual-scroll-container\" [style.marginBottom.px]=\"bottomSpace\" #messageContainer>\r\n    <ng-container *ngIf=\"0 < chatMessages.length\">\r\n      <ng-container *ngFor=\"let chatMessage of chatMessages; trackBy: trackByChatMessage\">\r\n        <chat-message *ngIf=\"chatMessage.isDisplayable\" [chatMessage]=\"chatMessage\" \r\n        [simpleDispFlagTime]=\"chatTabList.simpleDispFlagTime\"\r\n        [simpleDispFlagUserId]=\"chatTabList.simpleDispFlagUserId\"\r\n        [chatSimpleDispFlag]=\"chatTab.chatSimpleDispFlag\"\r\n        >\r\n        </chat-message>\r\n      </ng-container>\r\n    </ng-container>\r\n    <ng-container *ngIf=\"chatMessages.length <= 0\">\r\n<!--      <span>使用している <a href= \"3rdpartylicenses.txt\" target=\"_blank\">3rdpartylicenses</a>についてはこちらを参照してください</span>-->\r\n      <chat-message *ngFor=\"let chatMessage of sampleMessages\" [chatMessage]=\"chatMessage\"\r\n        [simpleDispFlagTime]=\"false\"\r\n        [simpleDispFlagUserId]=\"false\"\r\n        [chatSimpleDispFlag]=\"false\"\r\n      >\r\n      </chat-message>\r\n    </ng-container>\r\n  </div>\r\n</div>","import { EventSystem, Network } from '../system';\r\nimport { AudioFile, AudioFileContext, AudioState } from './audio-file';\r\nimport { AudioStorage, CatalogItem } from './audio-storage';\r\nimport { BufferSharingTask } from './buffer-sharing-task';\r\nimport { FileReaderUtil } from './file-reader-util';\r\n\r\nexport class AudioSharingSystem {\r\n  private static _instance: AudioSharingSystem\r\n  static get instance(): AudioSharingSystem {\r\n    if (!AudioSharingSystem._instance) AudioSharingSystem._instance = new AudioSharingSystem();\r\n    return AudioSharingSystem._instance;\r\n  }\r\n\r\n  private sendTaskMap: Map<string, BufferSharingTask<AudioFileContext>> = new Map();\r\n  private receiveTaskMap: Map<string, BufferSharingTask<AudioFileContext>> = new Map();\r\n  private maxSendTask: number = 2;\r\n  private maxReceiveTask: number = 4;\r\n\r\n  private constructor() { }\r\n\r\n  initialize() {\r\n    console.log('AudioSharingSystem ready...');\r\n    this.destroy();\r\n    EventSystem.register(this)\r\n      .on('CONNECT_PEER', -1, event => {\r\n        if (!event.isSendFromSelf) return;\r\n        console.log('CONNECT_PEER AudioStorageService !!!', event.data.peerId);\r\n        AudioStorage.instance.synchronize();\r\n      })\r\n      .on('SYNCHRONIZE_AUDIO_LIST', event => {\r\n        if (event.isSendFromSelf) return;\r\n        console.log('SYNCHRONIZE_AUDIO_LIST ' + event.sendFrom);\r\n\r\n        let otherCatalog: CatalogItem[] = event.data;\r\n        let request: CatalogItem[] = [];\r\n\r\n        console.log('SYNCHRONIZE_AUDIO_LIST active tasks ', this.sendTaskMap.size + this.receiveTaskMap.size);\r\n        for (let item of otherCatalog) {\r\n          let audio: AudioFile = AudioStorage.instance.get(item.identifier);\r\n          if (audio === null) {\r\n            audio = AudioFile.createEmpty(item.identifier);\r\n            AudioStorage.instance.add(audio);\r\n          }\r\n          if (audio.state < AudioState.COMPLETE && !this.receiveTaskMap.has(item.identifier)) {\r\n            request.push({ identifier: item.identifier, state: audio.state });\r\n          }\r\n        }\r\n\r\n        // Peer切断時などのエッジケースに対応する\r\n        if (request.length < 1 && !this.hasActiveTask() && otherCatalog.length < AudioStorage.instance.getCatalog().length) {\r\n          AudioStorage.instance.synchronize(event.sendFrom);\r\n        }\r\n\r\n        if (request.length < 1 || this.isLimitReceiveTask()) {\r\n          return;\r\n        }\r\n        let index = Math.floor(Math.random() * request.length);\r\n        this.request([request[index]], event.sendFrom);\r\n      })\r\n      .on('REQUEST_AUDIO_RESOURE', event => {\r\n        if (event.isSendFromSelf) return;\r\n\r\n        let request: CatalogItem[] = event.data.identifiers;\r\n        let randomRequest: CatalogItem[] = [];\r\n\r\n        for (let item of request) {\r\n          let audio: AudioFile = AudioStorage.instance.get(item.identifier);\r\n          if (audio && item.state < audio.state) randomRequest.push({ identifier: item.identifier, state: item.state });\r\n        }\r\n\r\n        if (this.isLimitSendTask() === false && 0 < randomRequest.length && !this.existsSendTask(event.data.receiver)) {\r\n          // 送信\r\n          console.log('REQUEST_AUDIO_RESOURE Send!!! ' + event.data.receiver + ' -> ' + randomRequest);\r\n          let index = Math.floor(Math.random() * randomRequest.length);\r\n          let item: { identifier: string, state: number } = randomRequest[index];\r\n          let audio: AudioFile = AudioStorage.instance.get(item.identifier);\r\n          this.startSendTask(audio, event.data.receiver);\r\n        } else {\r\n          // 中継\r\n          let candidatePeers: string[] = event.data.candidatePeers;\r\n          let index = candidatePeers.indexOf(Network.peerId);\r\n          if (-1 < index) candidatePeers.splice(index, 1);\r\n\r\n          for (let peerId of candidatePeers) {\r\n            console.log('REQUEST_AUDIO_RESOURE AudioStorageService Relay!!! ' + peerId + ' -> ' + event.data.identifiers);\r\n            EventSystem.call(event, peerId);\r\n            return;\r\n          }\r\n          console.log('REQUEST_FILE_RESOURE AudioStorageService あぶれた...' + event.data.receiver, randomRequest.length);\r\n        }\r\n      })\r\n      .on('UPDATE_AUDIO_RESOURE', event => {\r\n        let updateAudios: AudioFileContext[] = event.data;\r\n        console.log('UPDATE_AUDIO_RESOURE AudioStorageService ' + event.sendFrom + ' -> ', updateAudios);\r\n        for (let context of updateAudios) {\r\n          if (context.blob) context.blob = new Blob([context.blob], { type: context.type });\r\n          AudioStorage.instance.add(context);\r\n        }\r\n      })\r\n      .on('START_AUDIO_TRANSMISSION', event => {\r\n        console.log('START_AUDIO_TRANSMISSION ' + event.data.fileIdentifier);\r\n        let identifier: string = event.data.fileIdentifier;\r\n        let audio: AudioFile = AudioStorage.instance.get(identifier);\r\n        if (this.receiveTaskMap.has(identifier) || (audio && AudioState.COMPLETE <= audio.state)) {\r\n          console.warn('CANCEL_TASK_ ' + identifier);\r\n          EventSystem.call('CANCEL_TASK_' + identifier, null, event.sendFrom);\r\n        } else {\r\n          this.startReceiveTask(identifier);\r\n        }\r\n      });\r\n  }\r\n\r\n  private destroy() {\r\n    EventSystem.unregister(this);\r\n  }\r\n\r\n  private async startSendTask(audio: AudioFile, sendTo: string) {\r\n    let task = BufferSharingTask.createSendTask<AudioFileContext>(audio.identifier, sendTo);\r\n    this.sendTaskMap.set(audio.identifier, task);\r\n\r\n    EventSystem.call('START_AUDIO_TRANSMISSION', { fileIdentifier: audio.identifier }, sendTo);\r\n\r\n    let context: AudioFileContext = {\r\n      identifier: audio.identifier,\r\n      name: audio.name,\r\n      blob: null,\r\n      type: '',\r\n      url: null\r\n    };\r\n\r\n    if (audio.state === AudioState.URL) {\r\n      context.url = audio.url;\r\n    } else {\r\n      context.blob = <any>await FileReaderUtil.readAsArrayBufferAsync(audio.blob);\r\n      context.type = audio.blob.type;\r\n    }\r\n\r\n    task.onfinish = () => {\r\n      this.stopSendTask(task.identifier);\r\n      AudioStorage.instance.synchronize();\r\n    }\r\n\r\n    task.start(context);\r\n  }\r\n\r\n  private startReceiveTask(identifier: string) {\r\n    let audio: AudioFile = AudioStorage.instance.get(identifier);\r\n    let task = BufferSharingTask.createReceiveTask<AudioFileContext>(identifier);\r\n    this.receiveTaskMap.set(identifier, task);\r\n\r\n    task.onprogress = (task, loded, total) => {\r\n      let context = audio.toContext();\r\n      context.name = (loded * 100 / total).toFixed(1) + '%';\r\n      audio.apply(context);\r\n    }\r\n    task.onfinish = (task, data) => {\r\n      this.stopReceiveTask(task.identifier);\r\n      if (data) EventSystem.trigger('UPDATE_AUDIO_RESOURE', [data]);\r\n      AudioStorage.instance.synchronize();\r\n    }\r\n\r\n    task.start();\r\n    console.log('startReceiveTask => ', this.receiveTaskMap.size);\r\n  }\r\n\r\n  private stopSendTask(identifier: string) {\r\n    let task = this.sendTaskMap.get(identifier);\r\n    if (task) { task.cancel(); }\r\n    this.sendTaskMap.delete(identifier);\r\n\r\n    console.log('stopSendTask => ', this.sendTaskMap.size);\r\n  }\r\n\r\n  private stopReceiveTask(identifier: string) {\r\n    let task = this.receiveTaskMap.get(identifier);\r\n    if (task) { task.cancel(); }\r\n    this.receiveTaskMap.delete(identifier);\r\n\r\n    console.log('stopReceiveTask => ', this.receiveTaskMap.size);\r\n  }\r\n\r\n  private request(request: CatalogItem[], peerId: string) {\r\n    console.log('requestFile() ' + peerId);\r\n    let peerIds = Network.peerIds;\r\n    peerIds.splice(peerIds.indexOf(Network.peerId), 1);\r\n    EventSystem.call('REQUEST_AUDIO_RESOURE', { identifiers: request, receiver: Network.peerId, candidatePeers: peerIds }, peerId);\r\n  }\r\n\r\n  private hasActiveTask(): boolean {\r\n    return 0 < this.sendTaskMap.size || 0 < this.receiveTaskMap.size;\r\n  }\r\n\r\n  private isLimitSendTask(): boolean {\r\n    return this.maxSendTask <= this.sendTaskMap.size;\r\n  }\r\n\r\n  private isLimitReceiveTask(): boolean {\r\n    return this.maxReceiveTask <= this.receiveTaskMap.size;\r\n  }\r\n\r\n  private existsSendTask(peerId: string): boolean {\r\n    for (let task of this.sendTaskMap.values()) {\r\n      if (task && task.sendTo === peerId) return true;\r\n    }\r\n    return false;\r\n  }\r\n}\r\n","import { ChatTab } from './chat-tab';\r\nimport { SyncObject } from './core/synchronize-object/decorator';\r\nimport { ObjectNode } from './core/synchronize-object/object-node';\r\nimport { InnerXml } from './core/synchronize-object/object-serializer';\r\n\r\nimport { PeerCursor } from '@udonarium/peer-cursor';\r\nimport { Network } from '@udonarium/core/system';\r\nimport { PeerContext } from '@udonarium/core/system/network/peer-context';\r\n\r\n@SyncObject('chat-tab-list')\r\nexport class ChatTabList extends ObjectNode implements InnerXml {\r\n\r\n  public tachieHeightValue = 200;\r\n  public minTachieSize = 100;\r\n  public maxTachieSize = 500;\r\n  public isTachieInWindow = false;\r\n  public isKeepTachieOutWindow = false;\r\n\r\n  private static _instance: ChatTabList;\r\n  static get instance(): ChatTabList {\r\n    if (!ChatTabList._instance) {\r\n      ChatTabList._instance = new ChatTabList('ChatTabList');\r\n      ChatTabList._instance.initialize();\r\n    }\r\n    return ChatTabList._instance;\r\n  }\r\n\r\n  get chatTabs(): ChatTab[] { return this.children as ChatTab[]; }\r\n  \r\n  //チャット簡易表示フラグ、拡張余地のため整数型\r\n  private simpleDispFlagTime_ : number = 0;\r\n  set simpleDispFlagTime( flag : number ){\r\n    this.simpleDispFlagTime_ = flag;\r\n  }\r\n  \r\n  get simpleDispFlagTime(): number{\r\n    return this.simpleDispFlagTime_;\r\n  }\r\n  \r\n  private simpleDispFlagUserId_ : number = 0;\r\n  set simpleDispFlagUserId(flag : number){\r\n    this.simpleDispFlagUserId_ = flag;\r\n  }\r\n  get simpleDispFlagUserId(): number{\r\n    return this.simpleDispFlagUserId_;\r\n  }\r\n  \r\n  addChatTab(chatTab: ChatTab): ChatTab\r\n  addChatTab(tabName: string, identifier?: string): ChatTab\r\n  addChatTab(...args: any[]): ChatTab {\r\n    let chatTab: ChatTab = null;\r\n    if (args[0] instanceof ChatTab) {\r\n      chatTab = args[0];\r\n    } else {\r\n      let tabName: string = args[0];\r\n      let identifier: string = args[1];\r\n      chatTab = new ChatTab(identifier);\r\n      chatTab.name = tabName;\r\n      chatTab.initialize();\r\n    }\r\n    return this.appendChild(chatTab);\r\n  }\r\n\r\n  parseInnerXml(element: Element) {\r\n    // XMLからの新規作成を許可せず、既存のオブジェクトを更新する\r\n    for (let child of ChatTabList.instance.children) {\r\n      child.destroy();\r\n    }\r\n\r\n    let context = ChatTabList.instance.toContext();\r\n    context.syncData = this.toContext().syncData;\r\n    ChatTabList.instance.apply(context);\r\n    ChatTabList.instance.update();\r\n\r\n    super.parseInnerXml.apply(ChatTabList.instance, [element]);\r\n    this.destroy();\r\n  }\r\n\r\n  logHtml( ): string {\r\n        \r\n    let head : string =     \r\n    \"<?xml version='1.0' encoding='UTF-8'?>\"+'\\n'+\r\n    \"<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Transitional//EN' 'http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd'>\"+'\\n'+\r\n    \"<html xmlns='http://www.w3.org/1999/xhtml' lang='ja'>\"+'\\n'+\r\n    \"  <head>\"+'\\n'+\r\n    \"    <meta http-equiv='Content-Type' content='text/html; charset=UTF-8' />\"+'\\n'+\r\n    \"    <title>チャットログ：\" + \"全タブ\" + \"</title>\"+'\\n'+\r\n    \"  </head>\"+'\\n'+\r\n    \"  <body>\"+'\\n';\r\n\r\n    let last : string =\r\n    \"\"+'\\n'+\r\n    \"  </body>\"+'\\n'+\r\n    \"</html>\";\r\n\r\n    let main : string = \"\";\r\n    \r\n    //泥臭くやる\r\n    if( this.chatTabs ){\r\n      let tabNum = this.chatTabs.length;\r\n      let indexList : number[] = [] ;\r\n      console.log( 'tabNum :' + tabNum );\r\n      for( let i = 0 ; i < tabNum ;i++){\r\n        indexList.push(0);\r\n      }\r\n      \r\n      let fastTabIndex : number = null;\r\n      let chkTimestamp : number = null;\r\n\r\n      while( 1 ){\r\n        fastTabIndex = -1;\r\n        chkTimestamp = -1;\r\n\r\n        for( let i = 0 ; i < tabNum ; i++){\r\n          if( this.chatTabs[i].chatMessages.length <= indexList[i] ) continue;\r\n\r\n          if( chkTimestamp == -1){\r\n            chkTimestamp = this.chatTabs[i].chatMessages[indexList[i]].timestamp ;\r\n            fastTabIndex = i;\r\n          }\r\n          if( chkTimestamp > this.chatTabs[i].chatMessages[indexList[i]].timestamp ){\r\n            chkTimestamp = this.chatTabs[i].chatMessages[indexList[i]].timestamp;\r\n            fastTabIndex = i;\r\n          }\r\n        }\r\n        if( fastTabIndex == -1)break;\r\n        \r\n        let to = this.chatTabs[ fastTabIndex ].chatMessages[ indexList[fastTabIndex] ].to;\r\n        let from = this.chatTabs[ fastTabIndex ].chatMessages[ indexList[fastTabIndex] ].from;\r\n        let myId = Network.peerContext.userId; //1.13.xとのmargeで修正\r\n        if( to ){\r\n          if( ( to != myId) && ( from != myId) ){\r\n            console.log( \" SKIP \" + from + \" > \" + to + \" : \" + this.chatTabs[ fastTabIndex ].chatMessages[ indexList[fastTabIndex] ].text );\r\n            indexList[ fastTabIndex ] ++;\r\n            continue;\r\n          }\r\n        }\r\n        \r\n        main += this.chatTabs[ fastTabIndex ].messageHtml( this.simpleDispFlagTime ? true : false  , this.chatTabs[ fastTabIndex ].name , this.chatTabs[ fastTabIndex ].chatMessages[ indexList[fastTabIndex] ] );\r\n        indexList[ fastTabIndex ] ++;\r\n      }\r\n    }\r\n\r\n    let str :string = head + main + last;\r\n    \r\n    return str;\r\n  }\r\n\r\n\r\n\r\n}","import { CommonModule } from '@angular/common';\r\nimport { NgModule } from '@angular/core';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { BrowserModule } from '@angular/platform-browser';\r\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\r\nimport { BadgeComponent } from 'component/badge/badge.component';\r\nimport { CardStackListComponent } from 'component/card-stack-list/card-stack-list.component';\r\nimport { CardStackComponent } from 'component/card-stack/card-stack.component';\r\nimport { CardComponent } from 'component/card/card.component';\r\nimport { ChatInputComponent } from 'component/chat-input/chat-input.component';\r\nimport { ChatMessageComponent } from 'component/chat-message/chat-message.component';\r\nimport { ChatPaletteComponent } from 'component/chat-palette/chat-palette.component';\r\nimport { ChatTabSettingComponent } from 'component/chat-tab-setting/chat-tab-setting.component';\r\nimport { ChatTabComponent } from 'component/chat-tab/chat-tab.component';\r\nimport { ChatWindowComponent } from 'component/chat-window/chat-window.component';\r\n\r\nimport { ChatTachieComponent } from 'component/chat-tachie/chat-tachie.component';\r\nimport { ChatTachieImageComponent } from 'component/chat-tachie-img/chat-tachie-img.component';\r\nimport { ChatColorSettingComponent } from 'component/chat-color-setting/chat-color-setting.component';\r\nimport { ChatMessageSettingComponent } from 'component/chat-message-setting/chat-message-setting.component';\r\n\r\nimport { ContextMenuComponent } from 'component/context-menu/context-menu.component';\r\nimport { DiceSymbolComponent } from 'component/dice-symbol/dice-symbol.component';\r\nimport { FileSelecterComponent } from 'component/file-selecter/file-selecter.component';\r\nimport { FileStorageComponent } from 'component/file-storage/file-storage.component';\r\nimport { GameCharacterGeneratorComponent } from 'component/game-character-generator/game-character-generator.component';\r\nimport { GameCharacterSheetComponent } from 'component/game-character-sheet/game-character-sheet.component';\r\nimport { GameCharacterComponent } from 'component/game-character/game-character.component';\r\nimport { GameDataElementComponent } from 'component/game-data-element/game-data-element.component';\r\n\r\nimport { GameDataElementBuffComponent } from 'component/game-data-element-buff/game-data-element-buff.component';\r\n\r\nimport { GameObjectInventoryComponent } from 'component/game-object-inventory/game-object-inventory.component';\r\nimport { GameTableMaskComponent } from 'component/game-table-mask/game-table-mask.component';\r\nimport { GameTableSettingComponent } from 'component/game-table-setting/game-table-setting.component';\r\nimport { GameTableComponent } from 'component/game-table/game-table.component';\r\nimport { JukeboxComponent } from 'component/jukebox/jukebox.component';\r\nimport { LobbyComponent } from 'component/lobby/lobby.component';\r\nimport { LinkyModule } from 'ngx-linky';\r\nimport { ModalComponent } from 'component/modal/modal.component';\r\nimport { NetworkIndicatorComponent } from 'component/network-indicator/network-indicator.component';\r\nimport { NgSelectModule } from '@ng-select/ng-select';\r\nimport { OverviewPanelComponent } from 'component/overview-panel/overview-panel.component';\r\nimport { PasswordCheckComponent } from 'component/password-check/password-check.component';\r\nimport { PeerCursorComponent } from 'component/peer-cursor/peer-cursor.component';\r\nimport { PeerMenuComponent } from 'component/peer-menu/peer-menu.component';\r\nimport { RoomSettingComponent } from 'component/room-setting/room-setting.component';\r\nimport { TerrainComponent } from 'component/terrain/terrain.component';\r\nimport { TextNoteComponent } from 'component/text-note/text-note.component';\r\nimport { TextViewComponent } from 'component/text-view/text-view.component';\r\nimport { UIPanelComponent } from 'component/ui-panel/ui-panel.component';\r\nimport { DraggableDirective } from 'directive/draggable.directive';\r\nimport { MovableDirective } from 'directive/movable.directive';\r\nimport { ResizableDirective } from 'directive/resizable.directive';\r\nimport { RotableDirective } from 'directive/rotable.directive';\r\nimport { TooltipDirective } from 'directive/tooltip.directive';\r\nimport { SafePipe } from 'pipe/safe.pipe';\r\n\r\nimport { RemoteControllerComponent } from 'component/remote-controller/remote-controller.component';\r\nimport { ControllerInputComponent } from 'component/controller-input/controller-input.component';  \r\nimport { GameCharacterBuffViewComponent } from 'component/game-character-buff-view/game-character-buff-view.component'; \r\n\r\nimport { CutInListComponent } from 'component/cut-in-list/cut-in-list.component';\r\nimport { CutInBgmComponent } from 'component/cut-in-bgm/cut-in-bgm.component';\r\nimport { CutInWindowComponent } from 'component/cut-in-window/cut-in-window.component';\r\nimport { DiceTableSettingComponent } from 'component/dice-table-setting/dice-table-setting.component';\r\n\r\nimport { AppConfigService } from 'service/app-config.service';\r\nimport { ChatMessageService } from 'service/chat-message.service';\r\nimport { ContextMenuService } from 'service/context-menu.service';\r\nimport { GameObjectInventoryService } from 'service/game-object-inventory.service';\r\nimport { ModalService } from 'service/modal.service';\r\nimport { PanelService } from 'service/panel.service';\r\nimport { PointerDeviceService } from 'service/pointer-device.service';\r\nimport { TabletopService } from 'service/tabletop.service';\r\n\r\nimport { AppComponent } from './app.component';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    AppComponent,\r\n    BadgeComponent,\r\n    CardComponent,\r\n    CardStackComponent,\r\n    CardStackListComponent,\r\n    ChatMessageComponent,\r\n    ChatPaletteComponent,\r\n    ChatTabComponent,\r\n    ChatTabSettingComponent,\r\n    ChatWindowComponent,\r\n\r\n    ChatTachieComponent,\r\n    ChatTachieImageComponent,\r\n    ChatColorSettingComponent,\r\n    ChatMessageSettingComponent,\r\n\r\n    ContextMenuComponent,\r\n\r\n    RemoteControllerComponent,\r\n    ControllerInputComponent,\r\n    GameCharacterBuffViewComponent,\r\n\r\n    FileSelecterComponent,\r\n    FileStorageComponent,\r\n    GameCharacterGeneratorComponent,\r\n    GameCharacterSheetComponent,\r\n    GameCharacterComponent,\r\n    GameDataElementComponent,\r\n\r\n    GameDataElementBuffComponent,\r\n\r\n    GameObjectInventoryComponent,\r\n    GameTableMaskComponent,\r\n    GameTableSettingComponent,\r\n    GameTableComponent,\r\n    JukeboxComponent,\r\n\r\n    CutInListComponent,\r\n    CutInBgmComponent,\r\n    CutInWindowComponent,\r\n    DiceTableSettingComponent,\r\n    \r\n    LobbyComponent,\r\n    ModalComponent,\r\n    OverviewPanelComponent,\r\n    PasswordCheckComponent,\r\n    PeerMenuComponent,\r\n    RoomSettingComponent,\r\n    UIPanelComponent,\r\n    SafePipe,\r\n    ChatPaletteComponent,\r\n    TextViewComponent,\r\n    TerrainComponent,\r\n    PeerCursorComponent,\r\n    TextNoteComponent,\r\n    MovableDirective,\r\n    RotableDirective,\r\n    NetworkIndicatorComponent,\r\n    DiceSymbolComponent,\r\n    TooltipDirective,\r\n    DraggableDirective,\r\n    ResizableDirective,\r\n    ChatInputComponent,\r\n  ],\r\n  imports: [\r\n    BrowserModule,\r\n    BrowserAnimationsModule,\r\n    CommonModule,\r\n    FormsModule,\r\n    LinkyModule,\r\n    NgSelectModule,\r\n  ],\r\n  providers: [\r\n    AppConfigService,\r\n    ChatMessageService,\r\n    ContextMenuService,\r\n    ModalService,\r\n    GameObjectInventoryService,\r\n    PanelService,\r\n    PointerDeviceService,\r\n    TabletopService,\r\n  ],\r\n  bootstrap: [AppComponent]\r\n})\r\nexport class AppModule { }\r\n","import { Component, ElementRef,   ChangeDetectorRef, EventEmitter, Input, NgZone, OnDestroy, OnInit, Output, ViewChild } from '@angular/core';\r\n\r\nimport { ChatMessage } from '@udonarium/chat-message';\r\nimport { ChatTab } from '@udonarium/chat-tab';\r\nimport { ObjectStore } from '@udonarium/core/synchronize-object/object-store';\r\nimport { EventSystem } from '@udonarium/core/system';\r\nimport { PeerCursor } from '@udonarium/peer-cursor';\r\nimport { ChatMessageSettingComponent } from 'component/chat-message-setting/chat-message-setting.component';\r\nimport { ChatMessageService } from 'service/chat-message.service';\r\nimport { PanelOption, PanelService } from 'service/panel.service';\r\nimport { PointerDeviceService } from 'service/pointer-device.service';\r\n\r\nimport { ImageFile } from '@udonarium/core/file-storage/image-file';\r\nimport { ImageStorage } from '@udonarium/core/file-storage/image-storage';\r\n\r\nimport { ChatTabList } from '@udonarium/chat-tab-list';\r\nimport { ChatTachieImageComponent } from 'component/chat-tachie-img/chat-tachie-img.component';\r\n\r\n@Component({\r\n  selector: 'chat-tachie',\r\n  templateUrl: './chat-tachie.component.html',\r\n  styleUrls: ['./chat-tachie.component.css']\r\n})\r\nexport class ChatTachieComponent implements OnInit, OnDestroy{\r\n\r\n  @Input() chatTabidentifier: string = '';\r\n  @ViewChild('tachieArea', { read: ElementRef }) private tachieArea: ElementRef;  \r\n  private _tachieAreaWidth = 0;\r\n  \r\n\r\n  get chatTab(): ChatTab { return ObjectStore.instance.get<ChatTab>(this.chatTabidentifier); }\r\n\r\n  get chatTabList(): ChatTabList { return ObjectStore.instance.get<ChatTabList>('ChatTabList'); }\r\n  \r\n\r\n  get tachieAreaWidth():number{ \r\n    return this._tachieAreaWidth;\r\n  }\r\n\r\n  chkHeight( newNum ){\r\n    if( newNum <= this.chatTabList.minTachieSize) this.chatTabList.tachieHeightValue = this.chatTabList.minTachieSize;\r\n    if( newNum >= this.chatTabList.maxTachieSize) this.chatTabList.tachieHeightValue = this.chatTabList.maxTachieSize;\r\n  }\r\n\r\n  get tachieAreaHeight() : number {\r\n    if( this.chatTab ){\r\n      if( this.chatTab.tachieDispFlag ){\r\n        if( this.chatTabList.isTachieInWindow ){\r\n          return this.chatTabList.tachieHeightValue;\r\n        }\r\n      }\r\n    }\r\n    return 0;\r\n  }\r\n  \r\n  private timerId;\r\n\r\n  \r\n  ngAfterViewInit() {\r\n  }  \r\n\r\n  ngAfterViewChecked() {\r\n  }  \r\n\r\n  shoeMessageSetting(){\r\n     \r\n    let coordinate = this.pointerDeviceService.pointers[0];\r\n    let title = 'チャット詳細設定';\r\n    let option: PanelOption = { title: title, left: coordinate.x + 50, top: coordinate.y - 200, width: 340, height: 220 };\r\n    let component = this.panelService.open<ChatMessageSettingComponent>(ChatMessageSettingComponent, option);\r\n  }\r\n\r\n\r\n  constructor(\r\n    public chatMessageService: ChatMessageService,\r\n    private changeDetectionRef: ChangeDetectorRef,\r\n    private panelService: PanelService,\r\n    private pointerDeviceService: PointerDeviceService\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    EventSystem.unregister(this);\r\n  }\r\n\r\n  trackByChatTab(index: number, chatTab: ChatTab) {\r\n    return chatTab.identifier;\r\n  }\r\n  \r\n  changeSimpleDisp(){\r\n    EventSystem.trigger('RE_DRAW_CHAT', {  });\r\n  }\r\n  \r\n}\r\n","<div>\r\n  <form>\r\n  <div id=\"tachie-component_\" #tachieArea [ngStyle]=\"{'height': tachieAreaHeight + 'px' }\">\r\n    <chat-tachie-img [chatTabidentifier]=\"chatTabidentifier\"  [isTilteTop]=\"0\"\r\n    [dispByMouse]=\"true\" ></chat-tachie-img>\r\n    \r\n  </div>\r\n    <div>\r\n      顯示立繪:\r\n      <ng-container *ngIf=\"chatTab\">\r\n        <input type=\"checkbox\" value=\"tachieDispFlag\"  [(ngModel)]=\"chatTab.tachieDispFlag\" name=\"tachieDispFlag\">\r\n      </ng-container>\r\n      <ng-container *ngIf=\"!chatTab\">\r\n        <input type=\"checkbox\">\r\n      </ng-container>\r\n　　　/Size:\r\n      <input [(ngModel)]=\"chatTabList.tachieHeightValue\" type=\"number\" min=\"{{chatTabList.minTachieSize}}\" max=\"{{chatTabList.maxTachieSize}}\" name=\"tachieHeight\" (change)=\"chkHeight($event.target.value)\"/>\r\n      聊天簡易表示:\r\n      <ng-container *ngIf=\"chatTab\">\r\n        <input type=\"checkbox\" value=\"chatSimpleDispFlag\"  \r\n        [(ngModel)]=\"chatTab.chatSimpleDispFlag\" name=\"chatSimpleDispFlag\" \r\n        (click)=\"changeSimpleDisp()\">\r\n      </ng-container>\r\n      <button class=\"message-setting small-font\" (click)=\"shoeMessageSetting();\"><i class=\"material-icons small-font\">settings</i>詳細</button>\r\n      \r\n    </div>\r\n  </form>\r\n</div>\r\n","import { Component, OnDestroy, OnInit } from '@angular/core';\r\n\r\nimport { PeerContext } from '@udonarium/core/system/network/peer-context';\r\nimport { EventSystem, Network } from '@udonarium/core/system';\r\nimport { PeerCursor } from '@udonarium/peer-cursor';\r\n\r\nimport { ModalService } from 'service/modal.service';\r\nimport { PanelService } from 'service/panel.service';\r\n\r\n@Component({\r\n  selector: 'room-setting',\r\n  templateUrl: './room-setting.component.html',\r\n  styleUrls: ['./room-setting.component.css']\r\n})\r\nexport class RoomSettingComponent implements OnInit, OnDestroy {\r\n  peers: PeerContext[] = [];\r\n  isReloading: boolean = false;\r\n\r\n  roomName: string = 'ふつうの部屋';\r\n  password: string = '';\r\n  isPrivate: boolean = false;\r\n\r\n  get peerId(): string { return Network.peerId; }\r\n  get isConnected(): boolean { return Network.peerIds.length <= 1 ? false : true; }\r\n  validateLength: boolean = false;\r\n\r\n  constructor(\r\n    private panelService: PanelService,\r\n    private modalService: ModalService\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    Promise.resolve().then(() => this.modalService.title = this.panelService.title = 'ルーム作成');\r\n    EventSystem.register(this);\r\n    this.calcPeerId(this.roomName, this.password);\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    EventSystem.unregister(this);\r\n  }\r\n\r\n  calcPeerId(roomName: string, password: string) {\r\n    let userId = Network.peerContext ? Network.peerContext.userId : PeerContext.generateId();\r\n    let context = PeerContext.create(userId, PeerContext.generateId('***'), roomName, password);\r\n    this.validateLength = context.peerId.length < 64 ? true : false;\r\n  }\r\n\r\n  createRoom() {\r\n    let userId = Network.peerContext ? Network.peerContext.userId : PeerContext.generateId();\r\n    Network.open(userId, PeerContext.generateId('***'), this.roomName, this.password);\r\n    PeerCursor.myCursor.peerId = Network.peerId;\r\n\r\n    this.modalService.resolve();\r\n  }\r\n}","<div *ngIf=\"!isConnected;else other_content\">\r\n  <div>房間名 : <input class=\"input\" (input)=\"calcPeerId($event.target.value, password)\" [(ngModel)]=\"roomName\" required minlength=\"1\" maxlength=\"128\" #roomNameValidation=\"ngModel\"\r\n      placeholder=\"必須有房間名稱\" /></div>\r\n  <div>密碼: <input class=\"input\" (input)=\"calcPeerId(roomName, $event.target.value)\" [(ngModel)]=\"password\" maxlength=\"12\" #passwordValidation=\"ngModel\" placeholder=\"留白為無\"\r\n    /></div>\r\n  <hr/>\r\n  <div *ngIf=\"roomNameValidation.errors && (roomNameValidation.dirty || roomNameValidation.touched)\">\r\n    <div [hidden]=\"!roomNameValidation.errors.required\">\r\n      必須有房間名稱。\r\n    </div>\r\n    <div [hidden]=\"!roomNameValidation.errors.minlength\">\r\n      必須有房間名稱。\r\n    </div>\r\n    <div [hidden]=\"!roomNameValidation.errors.maxlength\">\r\n      房間名前長度要在28以內。\r\n    </div>\r\n  </div>\r\n  <div *ngIf=\"passwordValidation.errors && (passwordValidation.dirty || passwordValidation.touched)\">\r\n    <div [hidden]=\"!passwordValidation.errors.maxlength\">\r\n      密碼長度不得超過12。\r\n    </div>\r\n  </div>\r\n  <div *ngIf=\"!validateLength\">\r\n    名稱和密碼的加起來的長度似乎太長。 嘗試讓它短一些。\r\n  </div>\r\n  <div>\r\n    <button [disabled]=\"!roomNameValidation.valid || !passwordValidation.valid || !validateLength\" (click)=\"createRoom()\">新增房間</button>\r\n  </div>\r\n</div>\r\n<div><span style=\"font-size: 12px;\">※當參與者人數變為0時，創建的房室將被解散。 如果您想在保留狀態留待下一次遊戲，請按“保存房間”。</span></div>\r\n<ng-template #other_content>\r\n  <span style=\"font-size: 12px;\">與其他參與者連接時無法創建新的房間。<br>如果要連接到另一個房間，請斷開與其他與會者的連線。<br>（*可以通過重新加載頁面來斷開連接。）</span>\r\n</ng-template>\r\n","export namespace StringUtil {\r\n  export function toHalfWidth(str: String): string {\r\n    return str.replace(/[！-～]/g, c => String.fromCharCode(c.charCodeAt(0) - 0xFEE0));\r\n  }\r\n}\r\n","export namespace XmlUtil {\r\n  const encodePattern = /&|<|>|\"|'/g;\r\n  const encodeMap = {\r\n    '&': '&amp;',\r\n    '<': '&lt;',\r\n    '>': '&gt;',\r\n    '\\\"': '&quot;',\r\n    '\\'': '&apos;',\r\n  };\r\n\r\n  const decodePattern = /&amp;|&lt;|&gt;|&quot;|&apos;/g;\r\n  const decodeMap = {\r\n    '&amp;': '&',\r\n    '&lt;': '<',\r\n    '&gt;': '>',\r\n    '&quot;': '\\\"',\r\n    '&apos;': '\\'',\r\n  };\r\n\r\n  const sanitizePattern = /((?:[\\0-\\x08\\x0B\\f\\x0E-\\x1F\\uFFFD\\uFFFE\\uFFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF]))/g;\r\n\r\n  export function xml2element(xml: string): HTMLElement {\r\n    let domParser: DOMParser = new DOMParser();\r\n    let xmlDocument: Document = null;\r\n    try {\r\n      xml = sanitizeXml(xml);\r\n      xmlDocument = domParser.parseFromString(xml, 'application/xml');\r\n      let parsererror = xmlDocument.getElementsByTagName('parsererror');\r\n      if (parsererror.length) {\r\n        console.error('XML解析失敗', xmlDocument.documentElement);\r\n        xmlDocument = null;\r\n      }\r\n    } catch (error) {\r\n      console.error(error);\r\n    }\r\n    return xmlDocument ? xmlDocument.documentElement : null;\r\n  }\r\n\r\n  export function encodeEntityReference(string: string): string {\r\n    return string.replace(encodePattern, encodeReplacer);\r\n  }\r\n\r\n  export function decodeEntityReference(string: string): string {\r\n    return string.replace(decodePattern, decodeReplacer);\r\n  }\r\n\r\n  function sanitizeXml(xml: string): string {\r\n    return xml.replace(sanitizePattern, '').trim();\r\n  }\r\n\r\n  function encodeReplacer(char: string): string {\r\n    return encodeMap[char];\r\n  }\r\n\r\n  function decodeReplacer(entity: string): string {\r\n    return decodeMap[entity];\r\n  }\r\n}","import { PromiseQueue } from '../core/system/util/promise-queue';\r\n\r\ninterface PeerHistory {\r\n  peerId: string,\r\n  timestamp: number,\r\n  history: string[]\r\n}\r\n\r\n// 試験実装中\r\nexport class Database {\r\n  private static DB_NAME: string = 'UdonariumDataBase';\r\n  private static VERSION: number = 1;\r\n\r\n  private queue: PromiseQueue = new PromiseQueue('DatabaseQueue');\r\n  private db: IDBDatabase;\r\n\r\n  constructor() {\r\n    this.openDB(Database.DB_NAME, Database.VERSION);\r\n  }\r\n\r\n  private openDB(dbName: string, version: number): Promise<IDBDatabase> {\r\n    return this.queue.add((resolve, reject) => {\r\n      console.log('openDB');\r\n      let request = indexedDB.open(dbName, version);\r\n      request.onerror = (event) => {\r\n        console.error(request.error, event);\r\n        if (request.error.name === 'VersionError') {\r\n          indexedDB.deleteDatabase(dbName);\r\n          this.openDB(dbName, version);\r\n        }\r\n        // request.errorCode に対して行うこと!\r\n        resolve();\r\n      };\r\n      request.onblocked = (event) => {\r\n        console.warn('openDB onblocked');\r\n        // 他のタブがデータベースを読み込んでいる場合は、処理を進める前に\r\n        // それらを閉じなければなりません。\r\n        alert('このサイトを開いている他のタブをすべて閉じてください!');\r\n      };\r\n      request.onupgradeneeded = (event) => {\r\n        console.log('openDB onupgradeneeded');\r\n        this.initializeDB(request.result);\r\n        this.createStores();\r\n      };\r\n      request.onsuccess = (event) => {\r\n        console.log('openDB onsuccess');\r\n        this.initializeDB(request.result);\r\n        resolve();\r\n      };\r\n    });\r\n  }\r\n\r\n  private createStores() {\r\n    console.log('createStores');\r\n    if (this.db.objectStoreNames.contains('PeerHistory')) {\r\n      this.db.deleteObjectStore('PeerHistory');\r\n    }\r\n    let objectStore = this.db.createObjectStore('PeerHistory', { keyPath: 'peerId' });\r\n    objectStore.createIndex('timestamp', 'timestamp', { unique: false });\r\n    // データを追加する前に objectStore の作成を完了させるため、 \r\n    // transaction oncomplete を使用します。\r\n    objectStore.transaction.oncomplete = (event) => {\r\n      console.log('createStores oncomplete');\r\n      // 新たに作成した objectStore に値を保存します。\r\n      /*\r\n      var customerObjectStore = db.transaction(\"customers\", \"readwrite\").objectStore(\"customers\");\r\n      for (var i in customerData) {\r\n        customerObjectStore.add(customerData[i]);\r\n      }\r\n      */\r\n    };\r\n  }\r\n\r\n  private initializeDB(db: IDBDatabase) {\r\n    console.log('initializeDB');\r\n    // 別のページがバージョン変更を求めた場合に、通知されるようにするためのハンドラを追加するようにしてください。\r\n    // データベースを閉じなければなりません。データベースを閉じると、別のページがデータベースをアップグレードできます。\r\n    // これを行わなければ、ユーザがタブを閉じるまでデータベースはアップグレードされません。\r\n    db.onversionchange = (event) => {\r\n      console.warn('db.onversionchange.');\r\n      db.close();\r\n      alert('新しいバージョンのページが使用可能になりました。再読み込みしてください!');\r\n    };\r\n    db.onabort = (event) => {\r\n      console.error(event);\r\n    };\r\n    db.onerror = (event) => {\r\n      console.error(event);\r\n    };\r\n    this.db = db;\r\n    // データベースを使用する処理\r\n  }\r\n\r\n  addPeerHistory(myPeerId: string, otherPeerIds: string[]) {\r\n    this.queue.add((resolve, reject) => {\r\n      console.log('addPeerHistory');\r\n      let transaction = this.db.transaction(['PeerHistory'], 'readwrite');\r\n      let store = transaction.objectStore('PeerHistory');\r\n\r\n      transaction.oncomplete = (event) => {\r\n        console.log('addPeerHistory done.', 'readwrite');\r\n        resolve();\r\n      };\r\n\r\n      transaction.onerror = (event) => {\r\n        console.error(event);\r\n        resolve();\r\n      };\r\n\r\n      let history: PeerHistory = {\r\n        peerId: myPeerId,\r\n        timestamp: Date.now(),\r\n        history: otherPeerIds\r\n      }\r\n\r\n      store.put(history);\r\n    });\r\n  }\r\n\r\n  deletePeerHistory(peerId: string) {\r\n    this.queue.add((resolve, reject) => {\r\n      let transaction = this.db.transaction(['PeerHistory'], 'readwrite');\r\n      let store = transaction.objectStore('PeerHistory');\r\n      transaction.oncomplete = (event) => {\r\n        console.log('addPeerHistory done.', 'readwrite');\r\n        resolve();\r\n      };\r\n\r\n      transaction.onerror = (event) => {\r\n        console.error(event);\r\n        resolve();\r\n      };\r\n\r\n      store.delete(peerId);\r\n    });\r\n  }\r\n\r\n  getPeerHistory(): Promise<PeerHistory[]> {\r\n    return this.queue.add((resolve, reject) => {\r\n      console.log('getPeerHistory');\r\n      let transaction = this.db.transaction(['PeerHistory'], 'readonly');\r\n      let store = transaction.objectStore('PeerHistory');\r\n      let request = store.openCursor();\r\n      let history: PeerHistory[] = [];\r\n\r\n      transaction.oncomplete = (event) => {\r\n        console.log('getPeerHistory done.');\r\n        resolve(history);\r\n      };\r\n\r\n      transaction.onerror = (event) => {\r\n        console.error(event);\r\n        resolve(history);\r\n      };\r\n\r\n      request.onerror = (event) => {\r\n        console.error(event);\r\n        resolve(history);\r\n      };\r\n\r\n      request.onsuccess = (event) => {\r\n        let cursor: IDBCursorWithValue = request.result;\r\n        if (cursor) {\r\n          console.log('id:' + cursor.key + ' value:', cursor.value);\r\n          history.push(cursor.value);\r\n          cursor.continue();\r\n        } else {\r\n          console.log('Entries all displayed.');\r\n        }\r\n      };\r\n    });\r\n  }\r\n}","import { EventSystem, Network } from '../system';\r\nimport { GameObject, ObjectContext } from './game-object';\r\nimport { ObjectFactory } from './object-factory';\r\nimport { CatalogItem, ObjectStore } from './object-store';\r\nimport { SynchronizeRequest, SynchronizeTask } from './synchronize-task';\r\n\r\ntype PeerId = string;\r\ntype ObjectIdentifier = string;\r\n\r\nexport class ObjectSynchronizer {\r\n  private static _instance: ObjectSynchronizer\r\n  static get instance(): ObjectSynchronizer {\r\n    if (!ObjectSynchronizer._instance) ObjectSynchronizer._instance = new ObjectSynchronizer();\r\n    return ObjectSynchronizer._instance;\r\n  }\r\n\r\n  private requestMap: Map<ObjectIdentifier, SynchronizeRequest> = new Map();\r\n  private peerMap: Map<PeerId, SynchronizeTask[]> = new Map();\r\n  private tasks: SynchronizeTask[] = [];\r\n\r\n  private constructor() { }\r\n\r\n  initialize() {\r\n    this.destroy();\r\n    console.log('ObjectSynchronizer ready...');\r\n    EventSystem.register(this)\r\n      .on('CONNECT_PEER', 2, event => {\r\n        if (!event.isSendFromSelf) return;\r\n        console.log('CONNECT_PEER GameRoomService !!!', event.data.peerId);\r\n        this.sendCatalog(event.data.peerId);\r\n      })\r\n      .on('DISCONNECT_PEER', event => {\r\n        this.removePeerMap(event.data.peerId);\r\n      })\r\n      .on<CatalogItem[]>('SYNCHRONIZE_GAME_OBJECT', event => {\r\n        if (event.isSendFromSelf) return;\r\n        console.log('SYNCHRONIZE_GAME_OBJECT ' + event.sendFrom);\r\n        let catalog: CatalogItem[] = event.data;\r\n        for (let item of catalog) {\r\n          if (ObjectStore.instance.isDeleted(item.identifier)) {\r\n            EventSystem.call('DELETE_GAME_OBJECT', { identifier: item.identifier }, event.sendFrom);\r\n          } else {\r\n            this.addRequestMap(item, event.sendFrom);\r\n          }\r\n        }\r\n        this.synchronize();\r\n      })\r\n      .on('REQUEST_GAME_OBJECT', event => {\r\n        if (event.isSendFromSelf) return;\r\n        if (ObjectStore.instance.isDeleted(event.data)) {\r\n          EventSystem.call('DELETE_GAME_OBJECT', { identifier: event.data }, event.sendFrom);\r\n        } else {\r\n          let object: GameObject = ObjectStore.instance.get(event.data);\r\n          if (object) EventSystem.call('UPDATE_GAME_OBJECT', object.toContext(), event.sendFrom);\r\n        }\r\n      })\r\n      .on('UPDATE_GAME_OBJECT', event => {\r\n        let context: ObjectContext = event.data;\r\n        let object: GameObject = ObjectStore.instance.get(context.identifier);\r\n        if (object) {\r\n          if (!event.isSendFromSelf) this.updateObject(object, context);\r\n        } else if (ObjectStore.instance.isDeleted(context.identifier)) {\r\n          EventSystem.call('DELETE_GAME_OBJECT', { identifier: context.identifier }, event.sendFrom);\r\n        } else {\r\n          this.createObject(context);\r\n        }\r\n      })\r\n      .on('DELETE_GAME_OBJECT', event => {\r\n        let context: ObjectContext = event.data;\r\n        ObjectStore.instance.delete(context.identifier, false);\r\n      });\r\n  }\r\n\r\n  destroy() {\r\n    EventSystem.unregister(this);\r\n  }\r\n\r\n  private updateObject(object: GameObject, context: ObjectContext) {\r\n    if (context.majorVersion + context.minorVersion > object.version) {\r\n      object.apply(context);\r\n    }\r\n  }\r\n\r\n  private createObject(context: ObjectContext) {\r\n    let newObject: GameObject = ObjectFactory.instance.create(context.aliasName, context.identifier);\r\n    if (!newObject) {\r\n      console.warn(context.aliasName + ' is Unknown...?', context);\r\n      return;\r\n    }\r\n    ObjectStore.instance.add(newObject, false);\r\n    newObject.apply(context);\r\n  }\r\n\r\n  private sendCatalog(sendTo: PeerId) {\r\n    let catalog = ObjectStore.instance.getCatalog();\r\n    let interval = setInterval(() => {\r\n      let count = catalog.length < 2048 ? catalog.length : 2048;\r\n      EventSystem.call('SYNCHRONIZE_GAME_OBJECT', catalog.splice(0, count), sendTo);\r\n      if (catalog.length < 1) clearInterval(interval);\r\n    });\r\n  }\r\n\r\n  private addRequestMap(item: CatalogItem, sendFrom: PeerId) {\r\n    let request = this.requestMap.get(item.identifier);\r\n    if (request && request.version === item.version) {\r\n      request.holderIds.push(sendFrom);\r\n      this.addPeerMap(sendFrom);\r\n    } else if (!request || request.version < item.version) {\r\n      this.requestMap.set(item.identifier, { identifier: item.identifier, version: item.version, holderIds: [sendFrom], ttl: 2 });\r\n      this.addPeerMap(sendFrom);\r\n    }\r\n  }\r\n\r\n  private addPeerMap(targetPeerId: PeerId) {\r\n    if (!this.peerMap.has(targetPeerId)) this.peerMap.set(targetPeerId, []);\r\n  }\r\n\r\n  private removePeerMap(targetPeerId: PeerId) {\r\n    this.peerMap.delete(targetPeerId);\r\n  }\r\n\r\n  private synchronize() {\r\n    while (0 < this.requestMap.size && this.tasks.length < 32) this.runSynchronizeTask();\r\n  }\r\n\r\n  private runSynchronizeTask() {\r\n    let targetPeerId = this.getTargetPeerId();\r\n    let requests: SynchronizeRequest[] = this.makeRequestList(targetPeerId);\r\n\r\n    if (requests.length < 1) {\r\n      this.removePeerMap(targetPeerId);\r\n      return;\r\n    }\r\n    let task = SynchronizeTask.create(targetPeerId, requests);\r\n    this.tasks.push(task);\r\n\r\n    let targetPeerIdTasks = this.peerMap.get(targetPeerId);\r\n    if (targetPeerIdTasks) targetPeerIdTasks.push(task);\r\n\r\n    task.onfinish = task => {\r\n      this.tasks.splice(this.tasks.indexOf(task), 1);\r\n      let targetPeerIdTasks = this.peerMap.get(targetPeerId);\r\n      if (targetPeerIdTasks) targetPeerIdTasks.splice(targetPeerIdTasks.indexOf(task), 1);\r\n      this.synchronize();\r\n    }\r\n\r\n    task.ontimeout = (task, remainedRequests) => {\r\n      console.log('GameObject synchronize タイムアウト');\r\n      remainedRequests.forEach(request => this.requestMap.set(request.identifier, request));\r\n    }\r\n  }\r\n\r\n  private makeRequestList(targetPeerId: PeerId, maxRequest: number = 32): SynchronizeRequest[] {\r\n    let requests: SynchronizeRequest[] = [];\r\n\r\n    for (let [identifier, request] of this.requestMap) {\r\n      if (maxRequest <= requests.length) break;\r\n      if (!request.holderIds.includes(targetPeerId)) continue;\r\n\r\n      let gameObject = ObjectStore.instance.get(request.identifier);\r\n      if (!gameObject || gameObject.version < request.version) requests.push(request);\r\n\r\n      this.requestMap.delete(identifier);\r\n    }\r\n    return requests;\r\n  }\r\n\r\n  private getTargetPeerId(): PeerId {\r\n    let min = 9999;\r\n    let selectPeerId: PeerId = null;\r\n    let peerContexts = Network.peerContexts;\r\n\r\n    for (let i = peerContexts.length - 1; 0 <= i; i--) {\r\n      let rand = Math.floor(Math.random() * (i + 1));\r\n      [peerContexts[i], peerContexts[rand]] = [peerContexts[rand], peerContexts[i]];\r\n    }\r\n\r\n    for (let peerContext of peerContexts) {\r\n      let tasks = this.peerMap.get(peerContext.peerId);\r\n      if (peerContext.isOpen && tasks && tasks.length < min) {\r\n        min = tasks.length;\r\n        selectPeerId = peerContext.peerId;\r\n      }\r\n    }\r\n    return selectPeerId;\r\n  }\r\n}\r\n","import { AfterViewInit, Component, ElementRef, HostListener, Input, OnDestroy, OnInit, ViewChild } from '@angular/core';\r\nimport { ContextMenuAction, ContextMenuService } from 'service/context-menu.service';\r\nimport { PointerDeviceService } from 'service/pointer-device.service';\r\n\r\n@Component({\r\n  selector: 'context-menu',\r\n  templateUrl: './context-menu.component.html',\r\n  styleUrls: ['./context-menu.component.css']\r\n})\r\nexport class ContextMenuComponent implements OnInit, OnDestroy, AfterViewInit {\r\n  @ViewChild('root', { static: true }) rootElementRef: ElementRef<HTMLElement>;\r\n\r\n  @Input() title: string = '';\r\n  @Input() actions: ContextMenuAction[] = [];\r\n\r\n  @Input() isSubmenu: boolean = false;\r\n\r\n  parentMenu: ContextMenuAction;\r\n  subMenu: ContextMenuAction[];\r\n\r\n  showSubMenuTimer: NodeJS.Timer;\r\n  hideSubMenuTimer: NodeJS.Timer;\r\n\r\n  private callbackOnOutsideClick = (e) => this.onOutsideClick(e);\r\n\r\n  get isPointerDragging(): boolean { return this.pointerDeviceService.isDragging; }\r\n\r\n  constructor(\r\n    private elementRef: ElementRef<HTMLElement>,\r\n    public contextMenuService: ContextMenuService,\r\n    private pointerDeviceService: PointerDeviceService\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    if (!this.isSubmenu) {\r\n      this.title = this.contextMenuService.title;\r\n      this.actions = this.contextMenuService.actions;\r\n    }\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    if (!this.isSubmenu) {\r\n      this.adjustPositionRoot();\r\n      document.addEventListener('touchstart', this.callbackOnOutsideClick, true);\r\n      document.addEventListener('mousedown', this.callbackOnOutsideClick, true);\r\n    } else {\r\n      this.adjustPositionSub();\r\n    }\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    document.removeEventListener('touchstart', this.callbackOnOutsideClick, true);\r\n    document.removeEventListener('mousedown', this.callbackOnOutsideClick, true);\r\n  }\r\n\r\n  onOutsideClick(event) {\r\n    if (this.rootElementRef.nativeElement.contains(event.target) === false) {\r\n      this.close();\r\n    }\r\n  }\r\n\r\n  @HostListener('contextmenu', ['$event'])\r\n  onContextMenu(e: Event) {\r\n    e.stopPropagation();\r\n    e.preventDefault();\r\n  }\r\n\r\n  private adjustPositionRoot() {\r\n    let panel: HTMLElement = this.rootElementRef.nativeElement;\r\n\r\n    panel.style.left = this.contextMenuService.position.x + 'px';\r\n    panel.style.top = this.contextMenuService.position.y + 'px';\r\n\r\n    let panelBox = panel.getBoundingClientRect();\r\n\r\n    let diffLeft = 0;\r\n    let diffTop = 0;\r\n\r\n    if (window.innerWidth < panelBox.right + diffLeft) {\r\n      diffLeft += window.innerWidth - (panelBox.right + diffLeft);\r\n    }\r\n    if (panelBox.left + diffLeft < 0) {\r\n      diffLeft += 0 - (panelBox.left + diffLeft);\r\n    }\r\n\r\n    if (window.innerHeight < panelBox.bottom + diffTop) {\r\n      diffTop += window.innerHeight - (panelBox.bottom + diffTop);\r\n    }\r\n    if (panelBox.top + diffTop < 0) {\r\n      diffTop += 0 - (panelBox.top + diffTop);\r\n    }\r\n\r\n    panel.style.left = panel.offsetLeft + diffLeft + 'px';\r\n    panel.style.top = panel.offsetTop + diffTop + 'px';\r\n  }\r\n\r\n  private adjustPositionSub() {\r\n    let parent: HTMLElement = this.elementRef.nativeElement.parentElement;\r\n    let submenu: HTMLElement = this.rootElementRef.nativeElement;\r\n\r\n    let parentBox = parent.getBoundingClientRect();\r\n    let submenuBox = submenu.getBoundingClientRect();\r\n\r\n    let diffLeft = 0;\r\n    let diffTop = 0;\r\n\r\n    if (window.innerWidth < submenuBox.right + diffLeft) {\r\n      diffLeft -= parentBox.width + submenuBox.width;\r\n      diffLeft += 8;\r\n    }\r\n    if (submenuBox.left + diffLeft < 0) {\r\n      diffLeft += 0 - (submenuBox.left + diffLeft);\r\n    }\r\n\r\n    if (window.innerHeight < submenuBox.bottom + diffTop) {\r\n      diffTop += window.innerHeight - (submenuBox.bottom + diffTop);\r\n    }\r\n    if (submenuBox.top + diffTop < 0) {\r\n      diffTop += 0 - (submenuBox.top + diffTop);\r\n    }\r\n\r\n    submenu.style.left = submenu.offsetLeft + diffLeft + 'px';\r\n    submenu.style.top = submenu.offsetTop + diffTop + 'px';\r\n  }\r\n\r\n  doAction(action: ContextMenuAction) {\r\n    this.showSubMenu(action);\r\n    if (action.action != null) {\r\n      action.action();\r\n      this.close();\r\n    }\r\n  }\r\n\r\n  showSubMenu(action: ContextMenuAction) {\r\n    this.hideSubMenu();\r\n    clearTimeout(this.showSubMenuTimer);\r\n    if (action.subActions == null || action.subActions.length < 1) return;\r\n    this.showSubMenuTimer = setTimeout(() => {\r\n      this.parentMenu = action;\r\n      this.subMenu = action.subActions;\r\n      clearTimeout(this.hideSubMenuTimer);\r\n    }, 250);\r\n  }\r\n\r\n  hideSubMenu() {\r\n    clearTimeout(this.hideSubMenuTimer);\r\n    this.hideSubMenuTimer = setTimeout(() => {\r\n      this.subMenu = null;\r\n    }, 1200);\r\n  }\r\n\r\n  close() {\r\n    if (this.contextMenuService) this.contextMenuService.close();\r\n  }\r\n}\r\n","<div class=\"component\" [ngClass]=\"{'submenu-panel': isSubmenu, 'is-max-limit': !isSubmenu, 'pointer-events-none': isPointerDragging}\" (mouseleave)=\"hideSubMenu()\" #root>\r\n  <div *ngIf=\"0 < title.length\" class=\"title\">{{title}}</div>\r\n  <ul>\r\n    <ng-container *ngFor=\"let action of actions\">\r\n      <ng-container *ngTemplateOutlet=\"action?.type === 'separator' ? separator : actionMenu; context: { action: action }\"></ng-container>\r\n    </ng-container>\r\n  </ul>\r\n</div>\r\n<ng-template #actionMenu let-action=\"action\">\r\n  <li class=\"hasHighlight\" (click)=\"doAction(action)\" (mouseenter)=\"showSubMenu(action)\">\r\n    <div class=\"menu-title\">{{action.name}}</div>\r\n    <div *ngIf=\"action.subActions\" class=\"sub-menu-arrow\">\r\n      <i class=\"material-icons\" style=\"font-size: 1em; vertical-align: bottom;\">arrow_forward_ios</i>\r\n    </div>\r\n    <context-menu *ngIf=\"subMenu && parentMenu === action\" [title]=\"action.name\" [actions]=\"subMenu\" [isSubmenu]=\"true\"></context-menu>\r\n  </li>\r\n</ng-template>\r\n<ng-template #separator let-action=\"action\">\r\n  <li>\r\n    <hr class=\"separator\" />\r\n  </li>\r\n</ng-template>","import { ImageFile } from './core/file-storage/image-file';\r\nimport { ImageStorage } from './core/file-storage/image-storage';\r\nimport { SyncObject, SyncVar } from './core/synchronize-object/decorator';\r\nimport { ObjectNode } from './core/synchronize-object/object-node';\r\nimport { ObjectStore } from './core/synchronize-object/object-store';\r\nimport { DataElement } from './data-element';\r\n\r\nexport interface TabletopLocation {\r\n  name: string;\r\n  x: number;\r\n  y: number;\r\n}\r\n\r\n@SyncObject('TabletopObject')\r\nexport class TabletopObject extends ObjectNode {\r\n  @SyncVar() location: TabletopLocation = {\r\n    name: 'table',\r\n    x: 0,\r\n    y: 0\r\n  };\r\n\r\n  @SyncVar() posZ: number = 0;\r\n\r\n  get isVisibleOnTable(): boolean { return this.location.name === 'table'; }\r\n\r\n  private _imageFile: ImageFile = ImageFile.Empty;\r\n  private _dataElements: { [name: string]: string } = {};\r\n\r\n  // GameDataElement getter/setter\r\n  get rootDataElement(): DataElement {\r\n    for (let node of this.children) {\r\n      if (node.getAttribute('name') === this.aliasName) return <DataElement>node;\r\n    }\r\n    return null;\r\n  }\r\n\r\n  get imageDataElement(): DataElement { return this.getElement('image'); }\r\n  get commonDataElement(): DataElement { return this.getElement('common'); }\r\n  get detailDataElement(): DataElement { return this.getElement('detail'); }\r\n\r\n  get buffDataElement(): DataElement { return this.getElement('buff'); }//�����B�ɂăo�t�@�\\�p�̒ǉ�\r\n\r\n\r\n  addBuffDataElement(){ \r\n    if (!this.buffDataElement){\r\n      this.rootDataElement.appendChild(DataElement.create('buff', '', {}, 'buff_' + this.identifier));\r\n    }\r\n  }\r\n\r\n  get imageFile(): ImageFile {\r\n    if (!this.imageDataElement) return this._imageFile;\r\n    let imageIdElement: DataElement = this.imageDataElement.getFirstElementByName('imageIdentifier');\r\n    if (imageIdElement && this._imageFile.identifier !== imageIdElement.value) {\r\n      let file: ImageFile = ImageStorage.instance.get(<string>imageIdElement.value);\r\n      this._imageFile = file ? file : ImageFile.Empty;\r\n    }\r\n    return this._imageFile;\r\n  }\r\n\r\n  protected createDataElements() {\r\n    this.initialize();\r\n    let aliasName: string = this.aliasName;\r\n    if (!this.rootDataElement) {\r\n      let rootElement = DataElement.create(aliasName, '', {}, aliasName + '_' + this.identifier);\r\n      this.appendChild(rootElement);\r\n    }\r\n\r\n    if (!this.imageDataElement) {\r\n      this.rootDataElement.appendChild(DataElement.create('image', '', {}, 'image_' + this.identifier));\r\n      this.imageDataElement.appendChild(DataElement.create('imageIdentifier', '', { type: 'image' }, 'imageIdentifier_' + this.identifier));\r\n    }\r\n    if (!this.commonDataElement) this.rootDataElement.appendChild(DataElement.create('common', '', {}, 'common_' + this.identifier));\r\n    if (!this.detailDataElement) this.rootDataElement.appendChild(DataElement.create('detail', '', {}, 'detail_' + this.identifier));\r\n    if (!this.buffDataElement) this.rootDataElement.appendChild(DataElement.create('buff', '', {}, 'buff_' + this.identifier));//entyu\r\n  }\r\n\r\n  protected getElement(name: string, from: DataElement = this.rootDataElement): DataElement {\r\n    if (!from) return null;\r\n    let element: DataElement = this._dataElements[name] ? ObjectStore.instance.get(this._dataElements[name]) : null;\r\n    if (!element || !from.contains(element)) {\r\n      element = from.getFirstElementByName(name);\r\n      this._dataElements[name] = element ? element.identifier : null;\r\n    }\r\n    return element;\r\n  }\r\n\r\n  protected getCommonValue<T extends string | number>(elementName: string, defaultValue: T): T {\r\n    let element = this.getElement(elementName, this.commonDataElement);\r\n    if (!element) return defaultValue;\r\n\r\n    if (typeof defaultValue === 'number') {\r\n      let number: number = +element.value;\r\n      return <T>(Number.isNaN(number) ? defaultValue : number);\r\n    } else {\r\n      return <T>(element.value + '');\r\n    }\r\n  }\r\n\r\n  protected setCommonValue(elementName: string, value: any) {\r\n    let element = this.getElement(elementName, this.commonDataElement);\r\n    if (!element) { return; }\r\n    element.value = value;\r\n  }\r\n\r\n  protected getImageFile(elementName: string) {\r\n    if (!this.imageDataElement) return null;\r\n    let image = this.getElement(elementName, this.imageDataElement);\r\n    return image ? ImageStorage.instance.get(<string>image.value) : null;\r\n  }\r\n\r\n  protected setImageFile(elementName: string, imageFile: ImageFile) {\r\n    let image = imageFile ? this.getElement(elementName, this.imageDataElement) : null;\r\n    if (!image) return;\r\n    image.value = imageFile.identifier;\r\n  }\r\n\r\n  setLocation(location: string) {\r\n    this.location.name = location;\r\n    this.update();\r\n  }\r\n}\r\n","import { FileReaderUtil } from './file-reader-util';\r\n\r\nexport enum AudioState {\r\n  NULL = 0,\r\n  THUMBNAIL = 1,\r\n  COMPLETE = 2,\r\n  URL = 1000,\r\n}\r\n\r\nexport interface AudioFileContext {\r\n  identifier: string;\r\n  name: string;\r\n  type: string;\r\n  blob: Blob;\r\n  url: string;\r\n}\r\n\r\nexport class AudioFile {\r\n  private context: AudioFileContext = {\r\n    identifier: '',\r\n    name: '',\r\n    blob: null,\r\n    type: '',\r\n    url: ''\r\n  };\r\n\r\n  get identifier(): string { return this.context.identifier };\r\n  get name(): string { return this.context.name };\r\n  get blob(): Blob { return this.context.blob; };\r\n  get url(): string { return this.context.url; };\r\n  get isReady(): boolean { return AudioState.NULL < this.state; }\r\n  get state(): AudioState {\r\n    if (!this.url && !this.blob) return AudioState.NULL;\r\n    if (this.url && !this.blob) return AudioState.URL;\r\n    return AudioState.COMPLETE;\r\n  }\r\n\r\n  isHidden: boolean = false;\r\n\r\n  private constructor() { }\r\n\r\n  static createEmpty(identifier: string): AudioFile {\r\n    let audio = new AudioFile();\r\n    audio.context.identifier = identifier;\r\n\r\n    return audio;\r\n  }\r\n\r\n  static create(url: string): AudioFile\r\n  static create(context: AudioFileContext): AudioFile\r\n  static create(arg: any): AudioFile {\r\n    if (typeof arg === 'string') {\r\n      let audio = new AudioFile();\r\n      audio.context.identifier = arg;\r\n      audio.context.name = arg;\r\n      audio.context.url = arg;\r\n      return audio;\r\n    } else {\r\n      let audio = new AudioFile();\r\n      audio.apply(arg);\r\n      return audio;\r\n    }\r\n  }\r\n\r\n  static async createAsync(file: File): Promise<AudioFile>\r\n  static async createAsync(blob: Blob): Promise<AudioFile>\r\n  static async createAsync(arg: any): Promise<AudioFile> {\r\n    if (arg instanceof File) {\r\n      return await AudioFile._createAsync(arg, arg.name);\r\n    } else if (arg instanceof Blob) {\r\n      return await AudioFile._createAsync(arg);\r\n    }\r\n  }\r\n\r\n  private static async _createAsync(blob: Blob, name?: string): Promise<AudioFile> {\r\n    let arrayBuffer = await FileReaderUtil.readAsArrayBufferAsync(blob);\r\n\r\n    let audio = new AudioFile();\r\n    audio.context.identifier = await FileReaderUtil.calcSHA256Async(arrayBuffer);\r\n    audio.context.name = name;\r\n    audio.context.blob = new Blob([arrayBuffer], { type: blob.type });\r\n    audio.context.type = audio.context.blob.type;\r\n    audio.context.url = window.URL.createObjectURL(audio.context.blob);\r\n\r\n    if (!audio.context.name) audio.context.name = audio.context.identifier;\r\n\r\n    return audio;\r\n  }\r\n\r\n  destroy() {\r\n    this.revokeURLs();\r\n  }\r\n\r\n  apply(context: AudioFileContext) {\r\n    if (!this.context.identifier && context.identifier) this.context.identifier = context.identifier;\r\n    if (context.name) this.context.name = context.name;\r\n    if (!this.context.blob && context.blob) this.context.blob = context.blob;\r\n    if (!this.context.type && context.type) this.context.type = context.type;\r\n    if (!this.context.url && context.url) {\r\n      if (this.state !== AudioState.URL) window.URL.revokeObjectURL(this.context.url);\r\n      this.context.url = context.url;\r\n    }\r\n    this.createURLs();\r\n  }\r\n\r\n  private createURLs() {\r\n    if (this.state === AudioState.URL) return;\r\n    if (this.context.blob && this.context.url === '') this.context.url = window.URL.createObjectURL(this.context.blob);\r\n  }\r\n\r\n  private revokeURLs() {\r\n    if (this.state === AudioState.URL) return;\r\n    window.URL.revokeObjectURL(this.context.url);\r\n  }\r\n\r\n  toContext(): AudioFileContext {\r\n    return {\r\n      identifier: this.context.identifier,\r\n      name: this.context.name,\r\n      blob: this.context.blob,\r\n      type: this.context.type,\r\n      url: this.context.url\r\n    }\r\n  }\r\n}","let i: number = 0;\r\nconst timeouts = new Map<number, Function>();\r\nconst channel = new MessageChannel();\r\n\r\nexport function setZeroTimeout(fn: Function): number {\r\n  if (i === 0x100000000) // max queue size\r\n    i = 0;\r\n  if (++i in timeouts) throw new Error('setZeroTimeout queue overflow.');\r\n  timeouts.set(i, fn);\r\n  channel.port2.postMessage(i);\r\n  return i;\r\n}\r\n\r\nexport function clearZeroTimeout(id: number) {\r\n  timeouts.delete(id);\r\n}\r\n\r\nchannel.port1.onmessage = function (ev) {\r\n  const fn = timeouts.get(ev.data);\r\n  timeouts.delete(ev.data);\r\n  if (fn) fn();\r\n}\r\n\r\nchannel.port1.start();\r\nchannel.port2.start();\r\n","import { Component, ElementRef, EventEmitter, Input, NgZone, OnDestroy, OnInit, Output, ViewChild } from '@angular/core';\r\nimport GameSystemClass from 'bcdice/lib/game_system';\r\nimport { ChatMessage } from '@udonarium/chat-message';\r\nimport { ImageFile } from '@udonarium/core/file-storage/image-file';\r\nimport { ObjectStore } from '@udonarium/core/synchronize-object/object-store';\r\nimport { EventSystem, Network } from '@udonarium/core/system';\r\nimport { PeerContext } from '@udonarium/core/system/network/peer-context';\r\n\r\nimport { ResettableTimeout } from '@udonarium/core/system/util/resettable-timeout';\r\n\r\nimport { DiceBot } from '@udonarium/dice-bot';\r\nimport { GameCharacter } from '@udonarium/game-character';\r\nimport { PeerCursor } from '@udonarium/peer-cursor';\r\nimport { TextViewComponent } from 'component/text-view/text-view.component';\r\n\r\nimport { BatchService } from 'service/batch.service';\r\n\r\nimport { ChatMessageService } from 'service/chat-message.service';\r\nimport { PanelOption, PanelService } from 'service/panel.service';\r\nimport { PointerDeviceService } from 'service/pointer-device.service';\r\n\r\nimport { ChatColorSettingComponent } from 'component/chat-color-setting/chat-color-setting.component';\r\n\r\nimport { ImageStorage } from '@udonarium/core/file-storage/image-storage';\r\n\r\n@Component({\r\n  selector: 'controller-input',\r\n  templateUrl: './controller-input.component.html',\r\n  styleUrls: ['./controller-input.component.css']\r\n})\r\nexport class ControllerInputComponent implements OnInit, OnDestroy {\r\n  get gameType(): string { return this._gameType; }\r\n  set gameType(gameType: string) { this._gameType = gameType; this.gameTypeChange.emit(gameType); }\r\n  get sendFrom(): string { return this._sendFrom; }\r\n  set sendFrom(sendFrom: string) { this._sendFrom = sendFrom; this.sendFromChange.emit(sendFrom); }\r\n  get sendTo(): string { return this._sendTo; }\r\n  set sendTo(sendTo: string) { this._sendTo = sendTo; this.sendToChange.emit(sendTo); }\r\n  get text(): string { return this._text; }\r\n  set text(text: string) { this._text = text; this.textChange.emit(text); }\r\n  get selectNum(): number { return this._selectNum; }\r\n\r\n  get tachieNum(): number {\r\n    const object = ObjectStore.instance.get(this.sendFrom);\r\n    if (object instanceof GameCharacter) {\r\n      return object.selectedTachieNum;\r\n    }\r\n    return 0;\r\n  }\r\n\r\n  set tachieNum(num: number){\r\n    const object = ObjectStore.instance.get(this.sendFrom);\r\n    if (object instanceof GameCharacter) {\r\n      object.selectedTachieNum = num;\r\n    }\r\n  }\r\n\r\n  get isDirect(): boolean { return this.sendTo != null && this.sendTo.length ? true : false; }\r\n\r\n  get colorSelectNo(): number{\r\n    return this.colorSelectNo_;\r\n  }\r\n\r\n  set colorSelectNo( num: number ){\r\n    if ( num < 0){\r\n      this.colorSelectNo_ = 0;\r\n    }else if ( num > 2){\r\n      this.colorSelectNo_ = 2;\r\n    }else{\r\n      this.colorSelectNo_ = num ;\r\n    }\r\n  }\r\n\r\n  get colorSelectorBoxBorder_0(): string{\r\n    if ( 0 === this.colorSelectNo ) { return '3px'; }\r\n    return '1px';\r\n  }\r\n\r\n  get colorSelectorBoxBorder_1(): string{\r\n    if ( 1 === this.colorSelectNo ) { return '3px'; }\r\n    return '1px';\r\n  }\r\n\r\n  get colorSelectorBoxBorder_2(): string{\r\n    if ( 2 === this.colorSelectNo ) { return '3px'; }\r\n    return '1px';\r\n  }\r\n\r\n  get colorSelectorRadius_0(): string{\r\n    if ( 0 === this.colorSelectNo ) { return '9px'; }\r\n    return '0px';\r\n  }\r\n\r\n  get colorSelectorRadius_1(): string{\r\n    if ( 1 === this.colorSelectNo ) { return '9px'; }\r\n    return '0px';\r\n  }\r\n\r\n  get colorSelectorRadius_2(): string{\r\n    if ( 2 === this.colorSelectNo ) { return '9px'; }\r\n    return '0px';\r\n  }\r\n\r\n  get selectChatColor(): string{\r\n    console.log( 'selectChatColor :' + this.charactorChatColor(this.colorSelectNo) );\r\n    return this.charactorChatColor(this.colorSelectNo);\r\n  }\r\n\r\n  get charactorChatColor_0(): string{\r\n    return this.charactorChatColor(0);\r\n  }\r\n\r\n  get charactorChatColor_1(): string{\r\n    return this.charactorChatColor(1);\r\n  }\r\n\r\n  get charactorChatColor_2(): string{\r\n    return this.charactorChatColor(2);\r\n  }\r\n\r\n  get selectCharacterTachie(){\r\n    const object = ObjectStore.instance.get(this.sendFrom);\r\n    if (object instanceof GameCharacter) {\r\n      if ( object.imageDataElement.children.length  > this.tachieNum){\r\n        return  object.imageDataElement.children[this.tachieNum];\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n\r\n  get selectCharacterTachieNum(): number{\r\n    const object = ObjectStore.instance.get(this.sendFrom);\r\n    if (object instanceof GameCharacter) {\r\n      return  object.imageDataElement.children.length;\r\n    } else if (object instanceof PeerCursor) {\r\n      return 0;\r\n    }\r\n    return 0;\r\n  }\r\n\r\n  get imageFile(): ImageFile {\r\n    if ( this.selectCharacterTachie ){\r\n      const imageFile: ImageFile = ImageStorage.instance.get(this.selectCharacterTachie.value as string);\r\n      return imageFile ? imageFile : ImageFile.Empty;\r\n    }\r\n    const object = ObjectStore.instance.get(this.sendFrom);\r\n    let image: ImageFile = null;\r\n    if (object instanceof GameCharacter) {\r\n      image = object.imageFile;\r\n    } else if (object instanceof PeerCursor) {\r\n      image = object.image;\r\n    }\r\n    return image ? image : ImageFile.Empty;\r\n  }\r\n  get gameCharacters(): GameCharacter[] {\r\n    if (this.shouldUpdateCharacterList) {\r\n      this.shouldUpdateCharacterList = false;\r\n      this._gameCharacters = ObjectStore.instance\r\n        .getObjects<GameCharacter>(GameCharacter)\r\n        .filter(character => this.allowsChat(character));\r\n    }\r\n    return this._gameCharacters;\r\n  }\r\n\r\n  get diceBotInfos(){ return DiceBot.diceBotInfos; }\r\n  get myPeer(): PeerCursor { return PeerCursor.myCursor; }\r\n  get otherPeers(): PeerCursor[] { return ObjectStore.instance.getObjects(PeerCursor); }\r\n\r\n  constructor(\r\n    private ngZone: NgZone,\r\n    public chatMessageService: ChatMessageService,\r\n    private batchService: BatchService,\r\n    private panelService: PanelService,\r\n    private pointerDeviceService: PointerDeviceService\r\n  ) { }\r\n  @ViewChild('textArea', { static: true }) textAreaElementRef: ElementRef;\r\n\r\n  @Input() onlyCharacters = false;\r\n  @Input() chatTabidentifier = '';\r\n\r\n  @Input('gameType') _gameType = '';\r\n  @Output() gameTypeChange = new EventEmitter<string>();\r\n\r\n  @Input('sendFrom') _sendFrom: string = this.myPeer ? this.myPeer.identifier : '';\r\n  @Output() sendFromChange = new EventEmitter<string>();\r\n\r\n  @Input('sendTo') _sendTo = '';\r\n  @Output() sendToChange = new EventEmitter<string>();\r\n\r\n  @Input('text') _text = '';\r\n  @Output() textChange = new EventEmitter<string>();\r\n\r\n  @Input('selectNum') _selectNum = 0;\r\n//  set selectNum( num :number){ this._selectNum = num; }\r\n\r\n  @Output() chat = new EventEmitter<{ text: string, gameSystem: GameSystemClass, sendFrom: string, sendTo: string , tachieNum: number , messColor: string}>();\r\n\r\n  @Output() allBox = new EventEmitter<{ check: boolean}>();\r\n  @Output() hideChkEvent = new EventEmitter<boolean>();\r\n  gameHelp = '';\r\n\r\n  colorSelectNo_ :number = 0;\r\n\r\n  private shouldUpdateCharacterList = true;\r\n  private _gameCharacters: GameCharacter[] = [];\r\n\r\n  private writingEventInterval: NodeJS.Timer = null;\r\n  private previousWritingLength = 0;\r\n//  writingPeers: Map<string, NodeJS.Timer> = new Map();\r\n  writingPeers: Map<string, ResettableTimeout> = new Map(); // 1.13.xとのmargeで修正\r\n\r\n  writingPeerNames: string[] = [];\r\n\r\n  buffHideIsChk = false;\r\n\r\n  setColorNum( num: number ){\r\n    this.colorSelectNo = num ;\r\n  }\r\n\r\n  charactorChatColor(num){\r\n    const object = ObjectStore.instance.get(this.sendFrom);\r\n    if (object instanceof GameCharacter) {\r\n      return object.chatColorCode[num];\r\n    }else{\r\n      return '#000000';\r\n    }\r\n  }\r\n\r\n  shoeColorSetting(){\r\n    const object = ObjectStore.instance.get(this.sendFrom);\r\n    if (object instanceof GameCharacter) {\r\n\r\n      const coordinate = this.pointerDeviceService.pointers[0];\r\n      let title = '色設定';\r\n      if (object.name.length) { title += ' - ' + object.name; }\r\n      const option: PanelOption = { title, left: coordinate.x + 50, top: coordinate.y - 150, width: 300, height: 120 };\r\n      const component = this.panelService.open<ChatColorSettingComponent>(ChatColorSettingComponent, option);\r\n      component.tabletopObject = object;\r\n    }\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    EventSystem.register(this)\r\n      .on('MESSAGE_ADDED', event => {\r\n/*\r\n        if (event.data.tabIdentifier !== this.chatTabidentifier) return;\r\n        let message = ObjectStore.instance.get<ChatMessage>(event.data.messageIdentifier);\r\n        let sendFrom = message ? message.from : '?';\r\n        if (this.writingPeers.has(sendFrom)) {\r\n          clearTimeout(this.writingPeers.get(sendFrom));\r\n          this.writingPeers.delete(sendFrom);\r\n          this.updateWritingPeerNames();\r\n        }\r\n*/\r\n        // 1.13.xとのmargeで修正\r\n        if (event.data.tabIdentifier !== this.chatTabidentifier) { return; }\r\n        const message = ObjectStore.instance.get<ChatMessage>(event.data.messageIdentifier);\r\n        const peerCursor = ObjectStore.instance.getObjects<PeerCursor>(PeerCursor).find(obj => obj.userId === message.from);\r\n        const sendFrom = peerCursor ? peerCursor.peerId : '?';\r\n        if (this.writingPeers.has(sendFrom)) {\r\n          this.writingPeers.get(sendFrom).stop();\r\n          this.writingPeers.delete(sendFrom);\r\n          this.updateWritingPeerNames();\r\n        }\r\n\r\n      })\r\n      .on('UPDATE_GAME_OBJECT', -1000, event => {\r\n        if (event.data.aliasName !== GameCharacter.aliasName) { return; }\r\n        this.shouldUpdateCharacterList = true;\r\n        if (event.data.identifier !== this.sendFrom) { return; }\r\n        const gameCharacter = ObjectStore.instance.get<GameCharacter>(event.data.identifier);\r\n        if (gameCharacter && !this.allowsChat(gameCharacter)) {\r\n          if (0 < this.gameCharacters.length && this.onlyCharacters) {\r\n            this.sendFrom = this.gameCharacters[0].identifier;\r\n          } else {\r\n            this.sendFrom = this.myPeer.identifier;\r\n          }\r\n        }\r\n      })\r\n      .on('DISCONNECT_PEER', event => {\r\n        const object = ObjectStore.instance.get(this.sendTo);\r\n//        if (object instanceof PeerCursor && object.peerId === event.data.peer) {\r\n        if (object instanceof PeerCursor && object.peerId === event.data.peerId) {// #marge\r\n\r\n          this.sendTo = '';\r\n        }\r\n      })\r\n      .on<string>('WRITING_A_MESSAGE', event => {\r\n/*\r\n        if (event.isSendFromSelf || event.data !== this.chatTabidentifier) return;\r\n        this.ngZone.run(() => {\r\n          if (this.writingPeers.has(event.sendFrom)) clearTimeout(this.writingPeers.get(event.sendFrom));\r\n          this.writingPeers.set(event.sendFrom, setTimeout(() => {\r\n            this.writingPeers.delete(event.sendFrom);\r\n            this.updateWritingPeerNames();\r\n          }, 2000));\r\n          this.updateWritingPeerNames();\r\n        });\r\n*/\r\n        // 1.13.xとのmargeで修正\r\n        if (event.isSendFromSelf || event.data !== this.chatTabidentifier) { return; }\r\n        if (!this.writingPeers.has(event.sendFrom)) {\r\n          this.writingPeers.set(event.sendFrom, new ResettableTimeout(() => {\r\n            this.writingPeers.delete(event.sendFrom);\r\n            this.updateWritingPeerNames();\r\n            this.ngZone.run(() => { });\r\n          }, 2000));\r\n        }\r\n        this.writingPeers.get(event.sendFrom).reset();\r\n        this.updateWritingPeerNames();\r\n        this.batchService.add(() => this.ngZone.run(() => { }), this);\r\n\r\n      });\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    EventSystem.unregister(this);\r\n    this.batchService.remove(this);\r\n  }\r\n\r\n  private updateWritingPeerNames() {\r\n    this.writingPeerNames = Array.from(this.writingPeers.keys()).map(peerId => {\r\n//      let peer = PeerCursor.find(peerId);\r\n      const peer = PeerCursor.findByPeerId(peerId); // 1.13.xとのmargeで修正\r\n      return peer ? peer.name : '';\r\n    });\r\n  }\r\n\r\n  onInput() {\r\n    if (this.writingEventInterval === null && this.previousWritingLength <= this.text.length) {\r\n      let sendTo: string = null;\r\n      if (this.isDirect) {\r\n        const object = ObjectStore.instance.get(this.sendTo);\r\n        if (object instanceof PeerCursor) {\r\n//          let peer = PeerContext.create(object.peerId);\r\n//          if (peer) sendTo = peer.id;\r\n          const peer = PeerContext.parse(object.peerId);\r\n          if (peer) { sendTo = peer.peerId; } // 1.13.xとのmargeで修正\r\n\r\n        }\r\n      }\r\n      EventSystem.call('WRITING_A_MESSAGE', this.chatTabidentifier, sendTo);\r\n      this.writingEventInterval = setTimeout(() => {\r\n        this.writingEventInterval = null;\r\n      }, 200);\r\n    }\r\n    this.previousWritingLength = this.text.length;\r\n    this.calcFitHeight();\r\n  }\r\n\r\n  sendChat(event: KeyboardEvent) {\r\n    if (event) { event.preventDefault(); }\r\n\r\n    if (!this.text.length) { return; }\r\n    if (event && event.keyCode !== 13) { return; }\r\n\r\n    if (!this.sendFrom.length) { this.sendFrom = this.myPeer.identifier; }\r\n\r\n    const message = {\r\n      text: this.text, sendFrom: this.sendFrom, sendTo: this.sendTo,\r\n      tachieNum : this.tachieNum, messColor : this.selectChatColor,\r\n    };\r\n    DiceBot.loadGameSystemAsync(this.gameType).then((gameSystem) => {\r\n      this.chat.emit({\r\n        text: message.text, gameSystem, sendFrom: message.sendFrom,\r\n        sendTo: message.sendTo, tachieNum : message.tachieNum, messColor : message.messColor,\r\n      });\r\n    });\r\n    this.text = '';\r\n    this.previousWritingLength = this.text.length;\r\n    const textArea: HTMLTextAreaElement = this.textAreaElementRef.nativeElement;\r\n    textArea.value = '';\r\n    this.calcFitHeight();\r\n  }\r\n\r\n  allBoxCheck() {\r\n    if ( this.selectNum > 0 ){\r\n      this.allBox.emit( {check: false});\r\n    }else{\r\n      this.allBox.emit( {check: true} );\r\n    }\r\n  }\r\n\r\n  calcFitHeight() {\r\n    const textArea: HTMLTextAreaElement = this.textAreaElementRef.nativeElement;\r\n    textArea.style.height = '';\r\n    if (textArea.scrollHeight >= textArea.offsetHeight) {\r\n      textArea.style.height = textArea.scrollHeight + 'px';\r\n    }\r\n  }\r\n\r\n  loadDiceBot(gameType: string) {\r\n    console.log('onChangeGameType ready');\r\n    DiceBot.getHelpMessage(gameType).then(help => {\r\n      console.log('onChangeGameType done\\n' + help);\r\n    });\r\n  }\r\n  // 親コンポーネントにもCHKBOX情報を渡す、作りが悪いがチャット入力部流用のためひとまずこのまま\r\n  buffHideChkChange( chk ){\r\n    console.log('buffHideChkChange:' + chk );\r\n    this.hideChkEvent.emit(chk);\r\n    this.buffHideIsChk = chk;\r\n  }\r\n\r\n  private allowsChat(gameCharacter: GameCharacter): boolean {\r\n    switch (gameCharacter.location.name) {\r\n      case 'table':\r\n        return !gameCharacter.hideInventory;\r\n      case this.myPeer.peerId:\r\n        return true;\r\n      case 'graveyard':\r\n        return false;\r\n      default:\r\n        for (const conn of Network.peerContexts) {\r\n//          if (conn.isOpen && gameCharacter.location.name === conn.fullstring) {\r\n          if (conn.isOpen && gameCharacter.location.name === conn.peerId) {\r\n            return false;\r\n          }\r\n        }\r\n        return true;\r\n    }\r\n  }\r\n\r\n}\r\n","<div class=\"table\" [ngClass]=\"{ 'direct-message': isDirect }\" >\r\n  <div class=\"table\">\r\n    <div class=\"table-cell imagebox\">\r\n      <img *ngIf=\"0 < imageFile.url.length\" class=\"image\" [src]=\"imageFile.url | safe: 'resourceUrl'\" />\r\n    </div>   \r\n    <div class=\"table-cell\">\r\n      <div class=\"table\">\r\n        <div class=\"table-cell\" >\r\n          <div>\r\n            <ng-select class=\"ud-select\" style=\"width: 10em;\" [(ngModel)]=\"sendFrom\" [searchable]=\"false\" [clearable]=\"false\">\r\n              <ng-option *ngIf=\"!onlyCharacters\" [value]=\"myPeer?.identifier\">{{myPeer?.name}}（自己）</ng-option>\r\n              <ng-option *ngFor=\"let gameCharacter of gameCharacters\" [value]=\"gameCharacter.identifier\">{{gameCharacter.name}}\r\n              </ng-option>\r\n            </ng-select>\r\n          </div>\r\n          <div>\r\n            <div class=\"color\" (click)=\"setColorNum(0);\"\r\n            [ngStyle]=\"{'background-color': charactorChatColor_0 ,'border':'solid ' + colorSelectorBoxBorder_0 + ' #666666' , 'border-radius': colorSelectorRadius_0 }\"\r\n            ></div>\r\n           <div class=\"color\" (click)=\"setColorNum(1);\"\r\n            [ngStyle]=\"{'background-color': charactorChatColor_1 ,'border':'solid ' + colorSelectorBoxBorder_1 + ' #666666' , 'border-radius': colorSelectorRadius_1 }\"\r\n            ></div>\r\n            <div class=\"color\" (click)=\"setColorNum(2);\"\r\n            [ngStyle]=\"{'background-color': charactorChatColor_2 ,'border':'solid ' + colorSelectorBoxBorder_2 + ' #666666' , 'border-radius': colorSelectorRadius_2 }\"\r\n            ></div>\r\n            <button class=\"color-setting small-font\" (click)=\"shoeColorSetting();\">\r\n            <i class=\"material-icons small-font\">settings</i>色設定</button>\r\n          </div>\r\n        </div>\r\n        <div class=\"table-cell\" >\r\n          <div style=\"font-size:0.8em;text-align:right\">\r\n            選擇數：{{selectNum}}<br>\r\n            <button class=\"color-setting small-font\" (click)=\"allBoxCheck();\" style=\"width:7em;\">\r\n              <ng-container *ngIf=\"0 != selectNum\">\r\n              全解除口→\r\n              </ng-container>\r\n              <ng-container *ngIf=\"0 == selectNum\">\r\n              全選択〆→\r\n              </ng-container>\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n     \r\n<!-- 立ち絵ここから-->\r\n      <div class=\"tachie-tag\">\r\n        <ng-container *ngIf=\"1 >= selectCharacterTachieNum\">\r\n          <input type=\"range\" [style]=\"'font-size: 0.8em; min-width: 1em; width:' + (10) + 'em; --min: 0; --max: ' + 0 + '; --val:' + 10 +';' | safe: 'style'\"\r\n          min=\"0\" max=\"0\" [(ngModel)]=\"tachieNum\" />\r\n           0/0 立絵\r\n\r\n        </ng-container>\r\n        <ng-container *ngIf=\"1 < selectCharacterTachieNum\">\r\n          <input type=\"range\" [style]=\"'font-size: 0.8em; min-width: 1em; width:' + (10) + 'em; --min: 0; --max: ' + 0 + '; --val:' + 10 +';' | safe: 'style'\"\r\n          min=\"0\" max=\"{{selectCharacterTachieNum -1}}\" [(ngModel)]=\"tachieNum\" />\r\n         {{tachieNum}}/{{selectCharacterTachieNum - 1}} 立絵\r\n          <ng-container *ngIf=\"selectCharacterTachie.currentValue.length > 0\"> \r\n            {{selectCharacterTachie.currentValue}}\r\n          </ng-container>\r\n          <ng-container *ngIf=\"selectCharacterTachie.currentValue.length <= 0\"> \r\n          </ng-container>\r\n        </ng-container>\r\n      </div>\r\n<!-- ここまで-->\r\n    </div>\r\n  </div>\r\n\r\n  <hr>\r\n  <div style=\"width:100%;\">バフ/デバッファー\r\n    <div style=\"float:right;text-align:right;\">隱藏\r\n        <input name=\"buff_hide_chk\" type=\"checkbox\" \r\n        (change) =\"buffHideChkChange($event.target.checked)\" >\r\n    </div>\r\n    <form>\r\n      <div  [hidden] = \"buffHideIsChk\">\r\n        <textarea class=\"controller-input\" placeholder=\"Enterで送信\" [(ngModel)]=\"text\"\r\n          [ngModelOptions]=\"{standalone: true}\" (input)=\"onInput()\" (keydown.enter)=\"sendChat($event)\"\r\n            #textArea></textarea>\r\n        <button type=\"submit\" (click)=\"sendChat(null)\">實行</button>\r\n      </div>\r\n    </form>\r\n  </div>\r\n  \r\n</div>\r\n","import { ImageFile } from './core/file-storage/image-file';\r\nimport { ImageStorage } from './core/file-storage/image-storage';\r\nimport { SyncObject, SyncVar } from './core/synchronize-object/decorator';\r\nimport { ObjectNode } from './core/synchronize-object/object-node';\r\nimport { Network } from './core/system';\r\n\r\nimport { ChatTab } from '@udonarium/chat-tab';\r\nimport { ChatTabList } from '@udonarium/chat-tab-list';\r\nimport { ObjectStore } from './core/synchronize-object/object-store';\r\n\r\nexport interface ChatMessageContext {\r\n  identifier?: string;\r\n  tabIdentifier?: string;\r\n  originFrom?: string;\r\n  from?: string;\r\n  to?: string;\r\n  name?: string;\r\n  text?: string;\r\n  timestamp?: number;\r\n  tag?: string;\r\n  dicebot?: string;\r\n  imageIdentifier?: string;\r\n\r\n  imagePos?: number;\r\n  messColor?: string;\r\n  sendFrom?: string; //lily\r\n}\r\n\r\n@SyncObject('chat')\r\nexport class ChatMessage extends ObjectNode implements ChatMessageContext {\r\n  @SyncVar() originFrom: string;\r\n  @SyncVar() from: string;\r\n  @SyncVar() to: string;\r\n  @SyncVar() name: string;\r\n  @SyncVar() tag: string;\r\n  @SyncVar() dicebot: string;\r\n  @SyncVar() imageIdentifier: string;\r\n  @SyncVar() imagePos: number;\r\n  @SyncVar() messColor: string;\r\n  @SyncVar() sendFrom: string;\r\n\r\n  get tabIdentifier(): string { return this.parent.identifier; }\r\n  get text(): string { return <string>this.value }\r\n  get timestamp(): number {\r\n    let timestamp = this.getAttribute('timestamp');\r\n    let num = timestamp ? +timestamp : 0;\r\n    return Number.isNaN(num) ? 1 : num;\r\n  }\r\n  private _to: string;\r\n  private _sendTo: string[] = [];\r\n  get sendTo(): string[] {\r\n    if (this._to !== this.to) {\r\n      this._to = this.to;\r\n      this._sendTo = this.to != null && 0 < this.to.trim().length ? this.to.trim().split(/\\s+/) : [];\r\n    }\r\n    return this._sendTo;\r\n  }\r\n  private _tag: string;\r\n  private _tags: string[] = [];\r\n  get tags(): string[] {\r\n    if (this._tag !== this.tag) {\r\n      this._tag = this.tag;\r\n      this._tags = this.tag != null && 0 < this.tag.trim().length ? this.tag.trim().split(/\\s+/) : [];\r\n    }\r\n    return this._tags;\r\n  }\r\n  get image(): ImageFile { return ImageStorage.instance.get(this.imageIdentifier); }\r\n  get index(): number { return this.minorIndex + this.timestamp; }\r\n  get isDirect(): boolean { return 0 < this.sendTo.length ? true : false; }\r\n  get isSendFromSelf(): boolean { return this.from === Network.peerContext.userId || this.originFrom === Network.peerContext.userId; }\r\n  get isRelatedToMe(): boolean { return (-1 < this.sendTo.indexOf(Network.peerContext.userId)) || this.isSendFromSelf ? true : false; }\r\n  get isDisplayable(): boolean { return this.isDirect ? this.isRelatedToMe : true; }\r\n  get isSystem(): boolean { return -1 < this.tags.indexOf('system') ? true : false; }\r\n  get isDicebot(): boolean { return this.isSystem && this.from === 'System-BCDice' ? true : false; }\r\n  get isSecret(): boolean { return -1 < this.tags.indexOf('secret') ? true : false; }\r\n  get chatTabList(): ChatTabList { return ObjectStore.instance.get<ChatTabList>('ChatTabList'); }\r\n  \r\n}\r\n","var map = {\n\t\"./\": [\n\t\t\"FrAx\",\n\t\t\"default~MeikyuKingdomBasic~index\",\n\t\t\"default~SwordWorld2_5~index\",\n\t\t\"default~SwordWorld2_0~index\",\n\t\t\"default~SwordWorld~index\",\n\t\t\"default~LogHorizon_Korean~index\",\n\t\t\"default~LogHorizon~index\",\n\t\t\"default~Yggdrasill~index\",\n\t\t\"default~MagicaLogia_Korean~index\",\n\t\t\"default~MagicaLogia~index\",\n\t\t\"default~AlchemiaStruggle~index\",\n\t\t\"default~JekyllAndHyde~index\",\n\t\t\"default~DesperateRun~index\",\n\t\t\"default~UnsungDuet~index\",\n\t\t\"default~FilledWith~index\",\n\t\t\"default~GurpsFW~index\",\n\t\t\"default~MeikyuKingdom~index\",\n\t\t\"default~BeginningIdol~index\",\n\t\t\"default~BeginningIdol_Korean~index\",\n\t\t\"default~Elysion~index\",\n\t\t\"default~Satasupe~index\",\n\t\t\"default~NinjaSlayer~index\",\n\t\t\"default~PulpCthulhu~index\",\n\t\t\"default~AngelGear~index\",\n\t\t\"default~InfiniteBabeL~index\",\n\t\t\"default~ShinobiGami~index\",\n\t\t\"default~Cthulhu7th~index\",\n\t\t\"default~ParasiteBlood~index\",\n\t\t\"default~GranCrest~index\",\n\t\t\"default~Garako~index\",\n\t\t\"default~HuntersMoon~index\",\n\t\t\"default~Villaciel~index\",\n\t\t\"default~BloodMoon~index\",\n\t\t\"default~OneWayHeroics~index\",\n\t\t\"default~DeadlineHeroes~index\",\n\t\t\"default~MetalHeadExtream~index\",\n\t\t\"default~SterileLife~index\",\n\t\t\"default~LiveraDoll~index\",\n\t\t\"default~ColossalHunter~index\",\n\t\t\"default~ShoujoTenrankai~index\",\n\t\t\"default~KanColle~index\",\n\t\t\"default~TwilightGunsmoke~index\",\n\t\t\"default~NeverCloud~index\",\n\t\t\"default~DemonParasite~index\",\n\t\t\"default~SteamPunkers~index\",\n\t\t\"default~BattleTech~index\",\n\t\t\"default~DoubleCross_Korean~index\",\n\t\t\"default~RuinBreakers~index\",\n\t\t\"default~MeikyuDays~index\",\n\t\t\"default~DoubleCross~index\",\n\t\t\"default~HatsuneMiku~index\",\n\t\t\"default~KillDeathBusiness_Korean~index\",\n\t\t\"default~ScreamHighSchool~index\",\n\t\t\"default~Paradiso~index\",\n\t\t\"default~ShinkuuGakuen~index\",\n\t\t\"default~KillDeathBusiness~index\",\n\t\t\"default~BloodCrusade~index\",\n\t\t\"default~BlindMythos~index\",\n\t\t\"default~BeastBindTrinity~index\",\n\t\t\"default~EarthDawn4~index\",\n\t\t\"default~MetalHead~index\",\n\t\t\"default~EarthDawn3~index\",\n\t\t\"default~Dracurouge_Korean~index\",\n\t\t\"default~Warhammer4~index\",\n\t\t\"default~TorgEternity~index\",\n\t\t\"default~AceKillerGene~index\",\n\t\t\"default~GURPS~index\",\n\t\t\"default~Peekaboo~index\",\n\t\t\"default~YankeeYogSothoth~index\",\n\t\t\"default~KemonoNoMori~index\",\n\t\t\"default~Cthulhu7th_ChineseTraditional~index\",\n\t\t\"default~Dracurouge~index\",\n\t\t\"default~Cthulhu7th_Korean~index\",\n\t\t\"default~GardenOrder~index\",\n\t\t\"default~Torg1_5~index\",\n\t\t\"default~StellarKnights~index\",\n\t\t\"default~JuinKansen~index\",\n\t\t\"default~AnimaAnimus~index\",\n\t\t\"default~Cthulhu_Korean~index\",\n\t\t\"default~Cthulhu_ChineseTraditional~index\",\n\t\t\"default~SevenFortressMobius~index\",\n\t\t\"default~MonotoneMuseum_Korean~index\",\n\t\t\"default~Warhammer~index\",\n\t\t\"default~NightWizard3rd~index\",\n\t\t\"default~FullMetalPanic~index\",\n\t\t\"default~MetallicGuardian~index\",\n\t\t\"default~EtrianOdysseySRS~index\",\n\t\t\"default~Alshard~index\",\n\t\t\"default~SRS~index\",\n\t\t\"default~Skynauts~index\",\n\t\t\"default~NightWizard~index\",\n\t\t\"default~TunnelsAndTrolls~index\",\n\t\t\"default~Cthulhu~index\",\n\t\t\"default~GundogRevised~index\",\n\t\t\"default~MonotoneMuseum~index\",\n\t\t\"default~OracleEngine~index\",\n\t\t\"default~BadLife~index\",\n\t\t\"default~Nuekagami~index\",\n\t\t\"default~WitchQuest~index\",\n\t\t\"default~SkynautsBouken~index\",\n\t\t\"default~Torg~index\",\n\t\t\"default~CardRanker~index\",\n\t\t\"default~EmbryoMachine~index\",\n\t\t\"default~DetatokoSaga_Korean~index\",\n\t\t\"default~Nechronica_Korean~index\",\n\t\t\"default~AlterRaise~index\",\n\t\t\"default~LostRoyal~index\",\n\t\t\"default~Amadeus_Korean~index\",\n\t\t\"default~GundogZero~index\",\n\t\t\"default~Insane_Korean~index\",\n\t\t\"default~Strave~index\",\n\t\t\"default~BladeOfArcana~index\",\n\t\t\"default~DarkBlaze~index\",\n\t\t\"default~DarkDaysDrive~index\",\n\t\t\"default~TrinitySeven~index\",\n\t\t\"default~FutariSousa_Korean~index\",\n\t\t\"default~HouraiGakuen~index\",\n\t\t\"default~Postman~index\",\n\t\t\"default~DetatokoSaga~index\",\n\t\t\"default~Nechronica~index\",\n\t\t\"default~Kamigakari_Korean~index\",\n\t\t\"default~CthulhuTech~index\",\n\t\t\"default~RyuTuber~index\",\n\t\t\"default~ArsMagica~index\",\n\t\t\"default~Raisondetre~index\",\n\t\t\"default~EarthDawn~index\",\n\t\t\"default~BarnaKronika~index\",\n\t\t\"default~Amadeus~index\",\n\t\t\"default~Oukahoushin3rd~index\",\n\t\t\"default~Insane~index\",\n\t\t\"default~Kamigakari~index\",\n\t\t\"default~FutariSousa~index\",\n\t\t\"default~NSSQ~index\",\n\t\t\"default~Revulture~index\",\n\t\t\"default~Ryutama~index\",\n\t\t\"default~KurayamiCrying~index\",\n\t\t\"default~ChaosFlare~index\",\n\t\t\"default~GoblinSlayer~index\",\n\t\t\"default~NightmareHunterDeep~index\",\n\t\t\"default~Utakaze~index\",\n\t\t\"default~Fiasco_Korean~index\",\n\t\t\"default~GehennaAn~index\",\n\t\t\"common\",\n\t\t\"index\"\n\t],\n\t\"./AFF2e\": [\n\t\t\"mWil\",\n\t\t\"common\"\n\t],\n\t\"./AFF2e.js\": [\n\t\t\"mWil\",\n\t\t\"common\"\n\t],\n\t\"./AceKillerGene\": [\n\t\t\"OX2R\",\n\t\t\"default~AceKillerGene~index\"\n\t],\n\t\"./AceKillerGene.js\": [\n\t\t\"OX2R\",\n\t\t\"default~AceKillerGene~index\"\n\t],\n\t\"./Ainecadette\": [\n\t\t\"Ianp\",\n\t\t\"common\"\n\t],\n\t\"./Ainecadette.js\": [\n\t\t\"Ianp\",\n\t\t\"common\"\n\t],\n\t\"./Airgetlamh\": [\n\t\t\"AMSi\",\n\t\t\"common\"\n\t],\n\t\"./Airgetlamh.js\": [\n\t\t\"AMSi\",\n\t\t\"common\"\n\t],\n\t\"./AlchemiaStruggle\": [\n\t\t\"wzDC\",\n\t\t\"default~AlchemiaStruggle~index\"\n\t],\n\t\"./AlchemiaStruggle.js\": [\n\t\t\"wzDC\",\n\t\t\"default~AlchemiaStruggle~index\"\n\t],\n\t\"./Alsetto\": [\n\t\t\"iSWs\",\n\t\t\"common\"\n\t],\n\t\"./Alsetto.js\": [\n\t\t\"iSWs\",\n\t\t\"common\"\n\t],\n\t\"./Alshard\": [\n\t\t\"E87b\",\n\t\t\"default~Alshard~index\"\n\t],\n\t\"./Alshard.js\": [\n\t\t\"E87b\",\n\t\t\"default~Alshard~index\"\n\t],\n\t\"./AlterRaise\": [\n\t\t\"f5JW\",\n\t\t\"default~AlterRaise~index\"\n\t],\n\t\"./AlterRaise.js\": [\n\t\t\"f5JW\",\n\t\t\"default~AlterRaise~index\"\n\t],\n\t\"./Amadeus\": [\n\t\t\"dTZe\",\n\t\t\"default~Amadeus~index\"\n\t],\n\t\"./Amadeus.js\": [\n\t\t\"dTZe\",\n\t\t\"default~Amadeus~index\"\n\t],\n\t\"./Amadeus_Korean\": [\n\t\t\"z9fX\",\n\t\t\"default~Amadeus_Korean~index\"\n\t],\n\t\"./Amadeus_Korean.js\": [\n\t\t\"z9fX\",\n\t\t\"default~Amadeus_Korean~index\"\n\t],\n\t\"./AngelGear\": [\n\t\t\"IznK\",\n\t\t\"default~AngelGear~index\"\n\t],\n\t\"./AngelGear.js\": [\n\t\t\"IznK\",\n\t\t\"default~AngelGear~index\"\n\t],\n\t\"./AnimaAnimus\": [\n\t\t\"W6z+\",\n\t\t\"default~AnimaAnimus~index\"\n\t],\n\t\"./AnimaAnimus.js\": [\n\t\t\"W6z+\",\n\t\t\"default~AnimaAnimus~index\"\n\t],\n\t\"./Arianrhod\": [\n\t\t\"AMUg\",\n\t\t\"common\"\n\t],\n\t\"./Arianrhod.js\": [\n\t\t\"AMUg\",\n\t\t\"common\"\n\t],\n\t\"./ArsMagica\": [\n\t\t\"8IZY\",\n\t\t\"default~ArsMagica~index\"\n\t],\n\t\"./ArsMagica.js\": [\n\t\t\"8IZY\",\n\t\t\"default~ArsMagica~index\"\n\t],\n\t\"./Avandner\": [\n\t\t\"mBbF\",\n\t\t\"common\"\n\t],\n\t\"./Avandner.js\": [\n\t\t\"mBbF\",\n\t\t\"common\"\n\t],\n\t\"./BBN\": [\n\t\t\"7MLG\",\n\t\t\"common\"\n\t],\n\t\"./BBN.js\": [\n\t\t\"7MLG\",\n\t\t\"common\"\n\t],\n\t\"./BadLife\": [\n\t\t\"DIEu\",\n\t\t\"default~BadLife~index\"\n\t],\n\t\"./BadLife.js\": [\n\t\t\"DIEu\",\n\t\t\"default~BadLife~index\"\n\t],\n\t\"./BarnaKronika\": [\n\t\t\"UnFL\",\n\t\t\"default~BarnaKronika~index\"\n\t],\n\t\"./BarnaKronika.js\": [\n\t\t\"UnFL\",\n\t\t\"default~BarnaKronika~index\"\n\t],\n\t\"./BattleTech\": [\n\t\t\"afol\",\n\t\t\"default~BattleTech~index\"\n\t],\n\t\"./BattleTech.js\": [\n\t\t\"afol\",\n\t\t\"default~BattleTech~index\"\n\t],\n\t\"./BeastBindTrinity\": [\n\t\t\"aFQR\",\n\t\t\"default~BeastBindTrinity~index\"\n\t],\n\t\"./BeastBindTrinity.js\": [\n\t\t\"aFQR\",\n\t\t\"default~BeastBindTrinity~index\"\n\t],\n\t\"./BeginningIdol\": [\n\t\t\"VjH8\",\n\t\t\"default~BeginningIdol~index\"\n\t],\n\t\"./BeginningIdol.js\": [\n\t\t\"VjH8\",\n\t\t\"default~BeginningIdol~index\"\n\t],\n\t\"./BeginningIdol_Korean\": [\n\t\t\"t9hM\",\n\t\t\"default~BeginningIdol_Korean~index\"\n\t],\n\t\"./BeginningIdol_Korean.js\": [\n\t\t\"t9hM\",\n\t\t\"default~BeginningIdol_Korean~index\"\n\t],\n\t\"./BladeOfArcana\": [\n\t\t\"UxwN\",\n\t\t\"default~BladeOfArcana~index\"\n\t],\n\t\"./BladeOfArcana.js\": [\n\t\t\"UxwN\",\n\t\t\"default~BladeOfArcana~index\"\n\t],\n\t\"./BlindMythos\": [\n\t\t\"AYPM\",\n\t\t\"default~BlindMythos~index\"\n\t],\n\t\"./BlindMythos.js\": [\n\t\t\"AYPM\",\n\t\t\"default~BlindMythos~index\"\n\t],\n\t\"./BloodCrusade\": [\n\t\t\"gMcg\",\n\t\t\"default~BloodCrusade~index\"\n\t],\n\t\"./BloodCrusade.js\": [\n\t\t\"gMcg\",\n\t\t\"default~BloodCrusade~index\"\n\t],\n\t\"./BloodMoon\": [\n\t\t\"7gfb\",\n\t\t\"default~BloodMoon~index\"\n\t],\n\t\"./BloodMoon.js\": [\n\t\t\"7gfb\",\n\t\t\"default~BloodMoon~index\"\n\t],\n\t\"./CardRanker\": [\n\t\t\"Ks9r\",\n\t\t\"default~CardRanker~index\"\n\t],\n\t\"./CardRanker.js\": [\n\t\t\"Ks9r\",\n\t\t\"default~CardRanker~index\"\n\t],\n\t\"./ChaosFlare\": [\n\t\t\"C64a\",\n\t\t\"default~ChaosFlare~index\"\n\t],\n\t\"./ChaosFlare.js\": [\n\t\t\"C64a\",\n\t\t\"default~ChaosFlare~index\"\n\t],\n\t\"./Chill\": [\n\t\t\"goL+\",\n\t\t\"common\"\n\t],\n\t\"./Chill.js\": [\n\t\t\"goL+\",\n\t\t\"common\"\n\t],\n\t\"./Chill3\": [\n\t\t\"vyzR\",\n\t\t\"common\"\n\t],\n\t\"./Chill3.js\": [\n\t\t\"vyzR\",\n\t\t\"common\"\n\t],\n\t\"./CodeLayerd\": [\n\t\t\"PAHy\",\n\t\t\"common\"\n\t],\n\t\"./CodeLayerd.js\": [\n\t\t\"PAHy\",\n\t\t\"common\"\n\t],\n\t\"./ColossalHunter\": [\n\t\t\"9vgR\",\n\t\t\"default~ColossalHunter~index\"\n\t],\n\t\"./ColossalHunter.js\": [\n\t\t\"9vgR\",\n\t\t\"default~ColossalHunter~index\"\n\t],\n\t\"./Comes\": [\n\t\t\"frHO\",\n\t\t\"common\"\n\t],\n\t\"./Comes.js\": [\n\t\t\"frHO\",\n\t\t\"common\"\n\t],\n\t\"./CrashWorld\": [\n\t\t\"TteY\",\n\t\t\"common\"\n\t],\n\t\"./CrashWorld.js\": [\n\t\t\"TteY\",\n\t\t\"common\"\n\t],\n\t\"./Cthulhu\": [\n\t\t\"y2hU\",\n\t\t\"default~Cthulhu~index\"\n\t],\n\t\"./Cthulhu.js\": [\n\t\t\"y2hU\",\n\t\t\"default~Cthulhu~index\"\n\t],\n\t\"./Cthulhu7th\": [\n\t\t\"sPck\",\n\t\t\"default~Cthulhu7th~index\"\n\t],\n\t\"./Cthulhu7th.js\": [\n\t\t\"sPck\",\n\t\t\"default~Cthulhu7th~index\"\n\t],\n\t\"./Cthulhu7th_ChineseTraditional\": [\n\t\t\"BBV6\",\n\t\t\"default~Cthulhu7th_ChineseTraditional~index\"\n\t],\n\t\"./Cthulhu7th_ChineseTraditional.js\": [\n\t\t\"BBV6\",\n\t\t\"default~Cthulhu7th_ChineseTraditional~index\"\n\t],\n\t\"./Cthulhu7th_Korean\": [\n\t\t\"zUZ2\",\n\t\t\"default~Cthulhu7th_Korean~index\"\n\t],\n\t\"./Cthulhu7th_Korean.js\": [\n\t\t\"zUZ2\",\n\t\t\"default~Cthulhu7th_Korean~index\"\n\t],\n\t\"./CthulhuTech\": [\n\t\t\"Hu7I\",\n\t\t\"default~CthulhuTech~index\"\n\t],\n\t\"./CthulhuTech.js\": [\n\t\t\"Hu7I\",\n\t\t\"default~CthulhuTech~index\"\n\t],\n\t\"./Cthulhu_ChineseTraditional\": [\n\t\t\"Jgqp\",\n\t\t\"default~Cthulhu_ChineseTraditional~index\"\n\t],\n\t\"./Cthulhu_ChineseTraditional.js\": [\n\t\t\"Jgqp\",\n\t\t\"default~Cthulhu_ChineseTraditional~index\"\n\t],\n\t\"./Cthulhu_Korean\": [\n\t\t\"jYl8\",\n\t\t\"default~Cthulhu_Korean~index\"\n\t],\n\t\"./Cthulhu_Korean.js\": [\n\t\t\"jYl8\",\n\t\t\"default~Cthulhu_Korean~index\"\n\t],\n\t\"./DarkBlaze\": [\n\t\t\"A0Fm\",\n\t\t\"default~DarkBlaze~index\"\n\t],\n\t\"./DarkBlaze.js\": [\n\t\t\"A0Fm\",\n\t\t\"default~DarkBlaze~index\"\n\t],\n\t\"./DarkDaysDrive\": [\n\t\t\"1ciI\",\n\t\t\"default~DarkDaysDrive~index\"\n\t],\n\t\"./DarkDaysDrive.js\": [\n\t\t\"1ciI\",\n\t\t\"default~DarkDaysDrive~index\"\n\t],\n\t\"./DarkSouls\": [\n\t\t\"3h5d\",\n\t\t\"common\"\n\t],\n\t\"./DarkSouls.js\": [\n\t\t\"3h5d\",\n\t\t\"common\"\n\t],\n\t\"./DeadlineHeroes\": [\n\t\t\"3p2c\",\n\t\t\"default~DeadlineHeroes~index\"\n\t],\n\t\"./DeadlineHeroes.js\": [\n\t\t\"3p2c\",\n\t\t\"default~DeadlineHeroes~index\"\n\t],\n\t\"./DemonParasite\": [\n\t\t\"8WLV\",\n\t\t\"default~DemonParasite~index\"\n\t],\n\t\"./DemonParasite.js\": [\n\t\t\"8WLV\",\n\t\t\"default~DemonParasite~index\"\n\t],\n\t\"./DesperateRun\": [\n\t\t\"SSYo\",\n\t\t\"default~DesperateRun~index\"\n\t],\n\t\"./DesperateRun.js\": [\n\t\t\"SSYo\",\n\t\t\"default~DesperateRun~index\"\n\t],\n\t\"./DetatokoSaga\": [\n\t\t\"HPYb\",\n\t\t\"default~DetatokoSaga~index\"\n\t],\n\t\"./DetatokoSaga.js\": [\n\t\t\"HPYb\",\n\t\t\"default~DetatokoSaga~index\"\n\t],\n\t\"./DetatokoSaga_Korean\": [\n\t\t\"6zLE\",\n\t\t\"default~DetatokoSaga_Korean~index\"\n\t],\n\t\"./DetatokoSaga_Korean.js\": [\n\t\t\"6zLE\",\n\t\t\"default~DetatokoSaga_Korean~index\"\n\t],\n\t\"./DiceBot\": [\n\t\t\"5d0B\",\n\t\t\"common\"\n\t],\n\t\"./DiceBot.js\": [\n\t\t\"5d0B\",\n\t\t\"common\"\n\t],\n\t\"./DiceOfTheDead\": [\n\t\t\"pecn\",\n\t\t\"common\"\n\t],\n\t\"./DiceOfTheDead.js\": [\n\t\t\"pecn\",\n\t\t\"common\"\n\t],\n\t\"./DoubleCross\": [\n\t\t\"1ezJ\",\n\t\t\"default~DoubleCross~index\"\n\t],\n\t\"./DoubleCross.js\": [\n\t\t\"1ezJ\",\n\t\t\"default~DoubleCross~index\"\n\t],\n\t\"./DoubleCross_Korean\": [\n\t\t\"m91d\",\n\t\t\"default~DoubleCross_Korean~index\"\n\t],\n\t\"./DoubleCross_Korean.js\": [\n\t\t\"m91d\",\n\t\t\"default~DoubleCross_Korean~index\"\n\t],\n\t\"./Dracurouge\": [\n\t\t\"ZhBU\",\n\t\t\"default~Dracurouge~index\"\n\t],\n\t\"./Dracurouge.js\": [\n\t\t\"ZhBU\",\n\t\t\"default~Dracurouge~index\"\n\t],\n\t\"./Dracurouge_Korean\": [\n\t\t\"0DEk\",\n\t\t\"default~Dracurouge_Korean~index\"\n\t],\n\t\"./Dracurouge_Korean.js\": [\n\t\t\"0DEk\",\n\t\t\"default~Dracurouge_Korean~index\"\n\t],\n\t\"./DungeonsAndDragons\": [\n\t\t\"XRJP\",\n\t\t\"common\"\n\t],\n\t\"./DungeonsAndDragons.js\": [\n\t\t\"XRJP\",\n\t\t\"common\"\n\t],\n\t\"./EarthDawn\": [\n\t\t\"cubW\",\n\t\t\"default~EarthDawn~index\"\n\t],\n\t\"./EarthDawn.js\": [\n\t\t\"cubW\",\n\t\t\"default~EarthDawn~index\"\n\t],\n\t\"./EarthDawn3\": [\n\t\t\"Cj96\",\n\t\t\"default~EarthDawn3~index\"\n\t],\n\t\"./EarthDawn3.js\": [\n\t\t\"Cj96\",\n\t\t\"default~EarthDawn3~index\"\n\t],\n\t\"./EarthDawn4\": [\n\t\t\"fiCk\",\n\t\t\"default~EarthDawn4~index\"\n\t],\n\t\"./EarthDawn4.js\": [\n\t\t\"fiCk\",\n\t\t\"default~EarthDawn4~index\"\n\t],\n\t\"./EclipsePhase\": [\n\t\t\"Lsrw\",\n\t\t\"common\"\n\t],\n\t\"./EclipsePhase.js\": [\n\t\t\"Lsrw\",\n\t\t\"common\"\n\t],\n\t\"./Elric\": [\n\t\t\"dddO\",\n\t\t\"common\"\n\t],\n\t\"./Elric.js\": [\n\t\t\"dddO\",\n\t\t\"common\"\n\t],\n\t\"./Elysion\": [\n\t\t\"TUxJ\",\n\t\t\"default~Elysion~index\"\n\t],\n\t\"./Elysion.js\": [\n\t\t\"TUxJ\",\n\t\t\"default~Elysion~index\"\n\t],\n\t\"./EmbryoMachine\": [\n\t\t\"GgPt\",\n\t\t\"default~EmbryoMachine~index\"\n\t],\n\t\"./EmbryoMachine.js\": [\n\t\t\"GgPt\",\n\t\t\"default~EmbryoMachine~index\"\n\t],\n\t\"./Emoklore\": [\n\t\t\"VJ8/\",\n\t\t\"common\"\n\t],\n\t\"./Emoklore.js\": [\n\t\t\"VJ8/\",\n\t\t\"common\"\n\t],\n\t\"./EndBreaker\": [\n\t\t\"YubF\",\n\t\t\"common\"\n\t],\n\t\"./EndBreaker.js\": [\n\t\t\"YubF\",\n\t\t\"common\"\n\t],\n\t\"./EtrianOdysseySRS\": [\n\t\t\"qriG\",\n\t\t\"default~EtrianOdysseySRS~index\"\n\t],\n\t\"./EtrianOdysseySRS.js\": [\n\t\t\"qriG\",\n\t\t\"default~EtrianOdysseySRS~index\"\n\t],\n\t\"./Fiasco\": [\n\t\t\"jnGY\",\n\t\t\"common\"\n\t],\n\t\"./Fiasco.js\": [\n\t\t\"jnGY\",\n\t\t\"common\"\n\t],\n\t\"./Fiasco_Korean\": [\n\t\t\"VGU6\",\n\t\t\"default~Fiasco_Korean~index\"\n\t],\n\t\"./Fiasco_Korean.js\": [\n\t\t\"VGU6\",\n\t\t\"default~Fiasco_Korean~index\"\n\t],\n\t\"./FilledWith\": [\n\t\t\"HRgP\",\n\t\t\"default~FilledWith~index\"\n\t],\n\t\"./FilledWith.js\": [\n\t\t\"HRgP\",\n\t\t\"default~FilledWith~index\"\n\t],\n\t\"./FullMetalPanic\": [\n\t\t\"3DKS\",\n\t\t\"default~FullMetalPanic~index\"\n\t],\n\t\"./FullMetalPanic.js\": [\n\t\t\"3DKS\",\n\t\t\"default~FullMetalPanic~index\"\n\t],\n\t\"./FutariSousa\": [\n\t\t\"R2J1\",\n\t\t\"default~FutariSousa~index\"\n\t],\n\t\"./FutariSousa.js\": [\n\t\t\"R2J1\",\n\t\t\"default~FutariSousa~index\"\n\t],\n\t\"./FutariSousa_Korean\": [\n\t\t\"Lrfj\",\n\t\t\"default~FutariSousa_Korean~index\"\n\t],\n\t\"./FutariSousa_Korean.js\": [\n\t\t\"Lrfj\",\n\t\t\"default~FutariSousa_Korean~index\"\n\t],\n\t\"./GURPS\": [\n\t\t\"6b1g\",\n\t\t\"default~GURPS~index\"\n\t],\n\t\"./GURPS.js\": [\n\t\t\"6b1g\",\n\t\t\"default~GURPS~index\"\n\t],\n\t\"./Garako\": [\n\t\t\"BI7v\",\n\t\t\"default~Garako~index\"\n\t],\n\t\"./Garako.js\": [\n\t\t\"BI7v\",\n\t\t\"default~Garako~index\"\n\t],\n\t\"./GardenOrder\": [\n\t\t\"0yl0\",\n\t\t\"default~GardenOrder~index\"\n\t],\n\t\"./GardenOrder.js\": [\n\t\t\"0yl0\",\n\t\t\"default~GardenOrder~index\"\n\t],\n\t\"./GehennaAn\": [\n\t\t\"mn6k\",\n\t\t\"default~GehennaAn~index\"\n\t],\n\t\"./GehennaAn.js\": [\n\t\t\"mn6k\",\n\t\t\"default~GehennaAn~index\"\n\t],\n\t\"./GeishaGirlwithKatana\": [\n\t\t\"eqwX\",\n\t\t\"common\"\n\t],\n\t\"./GeishaGirlwithKatana.js\": [\n\t\t\"eqwX\",\n\t\t\"common\"\n\t],\n\t\"./GoblinSlayer\": [\n\t\t\"WOO6\",\n\t\t\"default~GoblinSlayer~index\"\n\t],\n\t\"./GoblinSlayer.js\": [\n\t\t\"WOO6\",\n\t\t\"default~GoblinSlayer~index\"\n\t],\n\t\"./GoldenSkyStories\": [\n\t\t\"piUX\",\n\t\t\"common\"\n\t],\n\t\"./GoldenSkyStories.js\": [\n\t\t\"piUX\",\n\t\t\"common\"\n\t],\n\t\"./Gorilla\": [\n\t\t\"wO+S\",\n\t\t\"common\"\n\t],\n\t\"./Gorilla.js\": [\n\t\t\"wO+S\",\n\t\t\"common\"\n\t],\n\t\"./GranCrest\": [\n\t\t\"dwqY\",\n\t\t\"default~GranCrest~index\"\n\t],\n\t\"./GranCrest.js\": [\n\t\t\"dwqY\",\n\t\t\"default~GranCrest~index\"\n\t],\n\t\"./Gundog\": [\n\t\t\"xoi/\",\n\t\t\"common\"\n\t],\n\t\"./Gundog.js\": [\n\t\t\"xoi/\",\n\t\t\"common\"\n\t],\n\t\"./GundogRevised\": [\n\t\t\"ULLz\",\n\t\t\"default~GundogRevised~index\"\n\t],\n\t\"./GundogRevised.js\": [\n\t\t\"ULLz\",\n\t\t\"default~GundogRevised~index\"\n\t],\n\t\"./GundogZero\": [\n\t\t\"8oOq\",\n\t\t\"default~GundogZero~index\"\n\t],\n\t\"./GundogZero.js\": [\n\t\t\"8oOq\",\n\t\t\"default~GundogZero~index\"\n\t],\n\t\"./GurpsFW\": [\n\t\t\"7R9D\",\n\t\t\"default~GurpsFW~index\"\n\t],\n\t\"./GurpsFW.js\": [\n\t\t\"7R9D\",\n\t\t\"default~GurpsFW~index\"\n\t],\n\t\"./HarnMaster\": [\n\t\t\"22xI\",\n\t\t\"common\"\n\t],\n\t\"./HarnMaster.js\": [\n\t\t\"22xI\",\n\t\t\"common\"\n\t],\n\t\"./HatsuneMiku\": [\n\t\t\"36L8\",\n\t\t\"default~HatsuneMiku~index\"\n\t],\n\t\"./HatsuneMiku.js\": [\n\t\t\"36L8\",\n\t\t\"default~HatsuneMiku~index\"\n\t],\n\t\"./Hieizan\": [\n\t\t\"P3gr\",\n\t\t\"common\"\n\t],\n\t\"./Hieizan.js\": [\n\t\t\"P3gr\",\n\t\t\"common\"\n\t],\n\t\"./HouraiGakuen\": [\n\t\t\"XxgY\",\n\t\t\"default~HouraiGakuen~index\"\n\t],\n\t\"./HouraiGakuen.js\": [\n\t\t\"XxgY\",\n\t\t\"default~HouraiGakuen~index\"\n\t],\n\t\"./HuntersMoon\": [\n\t\t\"pLfI\",\n\t\t\"default~HuntersMoon~index\"\n\t],\n\t\"./HuntersMoon.js\": [\n\t\t\"pLfI\",\n\t\t\"default~HuntersMoon~index\"\n\t],\n\t\"./Illusio\": [\n\t\t\"Oy8S\",\n\t\t\"common\"\n\t],\n\t\"./Illusio.js\": [\n\t\t\"Oy8S\",\n\t\t\"common\"\n\t],\n\t\"./InfiniteBabeL\": [\n\t\t\"k0MW\",\n\t\t\"default~InfiniteBabeL~index\"\n\t],\n\t\"./InfiniteBabeL.js\": [\n\t\t\"k0MW\",\n\t\t\"default~InfiniteBabeL~index\"\n\t],\n\t\"./InfiniteFantasia\": [\n\t\t\"J1nQ\",\n\t\t\"common\"\n\t],\n\t\"./InfiniteFantasia.js\": [\n\t\t\"J1nQ\",\n\t\t\"common\"\n\t],\n\t\"./Insane\": [\n\t\t\"ukuD\",\n\t\t\"default~Insane~index\"\n\t],\n\t\"./Insane.js\": [\n\t\t\"ukuD\",\n\t\t\"default~Insane~index\"\n\t],\n\t\"./Insane_Korean\": [\n\t\t\"6sQL\",\n\t\t\"default~Insane_Korean~index\"\n\t],\n\t\"./Insane_Korean.js\": [\n\t\t\"6sQL\",\n\t\t\"default~Insane_Korean~index\"\n\t],\n\t\"./IthaWenUa\": [\n\t\t\"hkEU\",\n\t\t\"common\"\n\t],\n\t\"./IthaWenUa.js\": [\n\t\t\"hkEU\",\n\t\t\"common\"\n\t],\n\t\"./JamesBond\": [\n\t\t\"In7P\",\n\t\t\"common\"\n\t],\n\t\"./JamesBond.js\": [\n\t\t\"In7P\",\n\t\t\"common\"\n\t],\n\t\"./JekyllAndHyde\": [\n\t\t\"O9Hp\",\n\t\t\"default~JekyllAndHyde~index\"\n\t],\n\t\"./JekyllAndHyde.js\": [\n\t\t\"O9Hp\",\n\t\t\"default~JekyllAndHyde~index\"\n\t],\n\t\"./JuinKansen\": [\n\t\t\"2yxa\",\n\t\t\"default~JuinKansen~index\"\n\t],\n\t\"./JuinKansen.js\": [\n\t\t\"2yxa\",\n\t\t\"default~JuinKansen~index\"\n\t],\n\t\"./Kamigakari\": [\n\t\t\"S+zv\",\n\t\t\"default~Kamigakari~index\"\n\t],\n\t\"./Kamigakari.js\": [\n\t\t\"S+zv\",\n\t\t\"default~Kamigakari~index\"\n\t],\n\t\"./Kamigakari_Korean\": [\n\t\t\"VABX\",\n\t\t\"default~Kamigakari_Korean~index\"\n\t],\n\t\"./Kamigakari_Korean.js\": [\n\t\t\"VABX\",\n\t\t\"default~Kamigakari_Korean~index\"\n\t],\n\t\"./KanColle\": [\n\t\t\"asMm\",\n\t\t\"default~KanColle~index\"\n\t],\n\t\"./KanColle.js\": [\n\t\t\"asMm\",\n\t\t\"default~KanColle~index\"\n\t],\n\t\"./KemonoNoMori\": [\n\t\t\"7yUK\",\n\t\t\"default~KemonoNoMori~index\"\n\t],\n\t\"./KemonoNoMori.js\": [\n\t\t\"7yUK\",\n\t\t\"default~KemonoNoMori~index\"\n\t],\n\t\"./KillDeathBusiness\": [\n\t\t\"RuRM\",\n\t\t\"default~KillDeathBusiness~index\"\n\t],\n\t\"./KillDeathBusiness.js\": [\n\t\t\"RuRM\",\n\t\t\"default~KillDeathBusiness~index\"\n\t],\n\t\"./KillDeathBusiness_Korean\": [\n\t\t\"0zZo\",\n\t\t\"default~KillDeathBusiness_Korean~index\"\n\t],\n\t\"./KillDeathBusiness_Korean.js\": [\n\t\t\"0zZo\",\n\t\t\"default~KillDeathBusiness_Korean~index\"\n\t],\n\t\"./KurayamiCrying\": [\n\t\t\"5oVZ\",\n\t\t\"default~KurayamiCrying~index\"\n\t],\n\t\"./KurayamiCrying.js\": [\n\t\t\"5oVZ\",\n\t\t\"default~KurayamiCrying~index\"\n\t],\n\t\"./LiveraDoll\": [\n\t\t\"zi63\",\n\t\t\"default~LiveraDoll~index\"\n\t],\n\t\"./LiveraDoll.js\": [\n\t\t\"zi63\",\n\t\t\"default~LiveraDoll~index\"\n\t],\n\t\"./LogHorizon\": [\n\t\t\"ybB4\",\n\t\t\"default~LogHorizon~index\"\n\t],\n\t\"./LogHorizon.js\": [\n\t\t\"ybB4\",\n\t\t\"default~LogHorizon~index\"\n\t],\n\t\"./LogHorizon_Korean\": [\n\t\t\"A1US\",\n\t\t\"default~LogHorizon_Korean~index\"\n\t],\n\t\"./LogHorizon_Korean.js\": [\n\t\t\"A1US\",\n\t\t\"default~LogHorizon_Korean~index\"\n\t],\n\t\"./LostRecord\": [\n\t\t\"kjae\",\n\t\t\"common\"\n\t],\n\t\"./LostRecord.js\": [\n\t\t\"kjae\",\n\t\t\"common\"\n\t],\n\t\"./LostRoyal\": [\n\t\t\"fFnV\",\n\t\t\"default~LostRoyal~index\"\n\t],\n\t\"./LostRoyal.js\": [\n\t\t\"fFnV\",\n\t\t\"default~LostRoyal~index\"\n\t],\n\t\"./MagicaLogia\": [\n\t\t\"ETtC\",\n\t\t\"default~MagicaLogia~index\"\n\t],\n\t\"./MagicaLogia.js\": [\n\t\t\"ETtC\",\n\t\t\"default~MagicaLogia~index\"\n\t],\n\t\"./MagicaLogia_Korean\": [\n\t\t\"XRby\",\n\t\t\"default~MagicaLogia_Korean~index\"\n\t],\n\t\"./MagicaLogia_Korean.js\": [\n\t\t\"XRby\",\n\t\t\"default~MagicaLogia_Korean~index\"\n\t],\n\t\"./MeikyuDays\": [\n\t\t\"5Ur+\",\n\t\t\"default~MeikyuDays~index\"\n\t],\n\t\"./MeikyuDays.js\": [\n\t\t\"5Ur+\",\n\t\t\"default~MeikyuDays~index\"\n\t],\n\t\"./MeikyuKingdom\": [\n\t\t\"UC05\",\n\t\t\"default~MeikyuKingdom~index\"\n\t],\n\t\"./MeikyuKingdom.js\": [\n\t\t\"UC05\",\n\t\t\"default~MeikyuKingdom~index\"\n\t],\n\t\"./MeikyuKingdomBasic\": [\n\t\t\"/1nW\",\n\t\t\"default~MeikyuKingdomBasic~index\"\n\t],\n\t\"./MeikyuKingdomBasic.js\": [\n\t\t\"/1nW\",\n\t\t\"default~MeikyuKingdomBasic~index\"\n\t],\n\t\"./MetalHead\": [\n\t\t\"euSr\",\n\t\t\"default~MetalHead~index\"\n\t],\n\t\"./MetalHead.js\": [\n\t\t\"euSr\",\n\t\t\"default~MetalHead~index\"\n\t],\n\t\"./MetalHeadExtream\": [\n\t\t\"isKR\",\n\t\t\"default~MetalHeadExtream~index\"\n\t],\n\t\"./MetalHeadExtream.js\": [\n\t\t\"isKR\",\n\t\t\"default~MetalHeadExtream~index\"\n\t],\n\t\"./MetallicGuardian\": [\n\t\t\"gumb\",\n\t\t\"default~MetallicGuardian~index\"\n\t],\n\t\"./MetallicGuardian.js\": [\n\t\t\"gumb\",\n\t\t\"default~MetallicGuardian~index\"\n\t],\n\t\"./MonotoneMuseum\": [\n\t\t\"9Ub2\",\n\t\t\"default~MonotoneMuseum~index\"\n\t],\n\t\"./MonotoneMuseum.js\": [\n\t\t\"9Ub2\",\n\t\t\"default~MonotoneMuseum~index\"\n\t],\n\t\"./MonotoneMuseum_Korean\": [\n\t\t\"0ddw\",\n\t\t\"default~MonotoneMuseum_Korean~index\"\n\t],\n\t\"./MonotoneMuseum_Korean.js\": [\n\t\t\"0ddw\",\n\t\t\"default~MonotoneMuseum_Korean~index\"\n\t],\n\t\"./NSSQ\": [\n\t\t\"BM3h\",\n\t\t\"default~NSSQ~index\"\n\t],\n\t\"./NSSQ.js\": [\n\t\t\"BM3h\",\n\t\t\"default~NSSQ~index\"\n\t],\n\t\"./Nechronica\": [\n\t\t\"psV8\",\n\t\t\"default~Nechronica~index\"\n\t],\n\t\"./Nechronica.js\": [\n\t\t\"psV8\",\n\t\t\"default~Nechronica~index\"\n\t],\n\t\"./Nechronica_Korean\": [\n\t\t\"Yzi5\",\n\t\t\"default~Nechronica_Korean~index\"\n\t],\n\t\"./Nechronica_Korean.js\": [\n\t\t\"Yzi5\",\n\t\t\"default~Nechronica_Korean~index\"\n\t],\n\t\"./NeverCloud\": [\n\t\t\"oohK\",\n\t\t\"default~NeverCloud~index\"\n\t],\n\t\"./NeverCloud.js\": [\n\t\t\"oohK\",\n\t\t\"default~NeverCloud~index\"\n\t],\n\t\"./NightWizard\": [\n\t\t\"Cpab\",\n\t\t\"default~NightWizard~index\"\n\t],\n\t\"./NightWizard.js\": [\n\t\t\"Cpab\",\n\t\t\"default~NightWizard~index\"\n\t],\n\t\"./NightWizard3rd\": [\n\t\t\"Qq0K\",\n\t\t\"default~NightWizard3rd~index\"\n\t],\n\t\"./NightWizard3rd.js\": [\n\t\t\"Qq0K\",\n\t\t\"default~NightWizard3rd~index\"\n\t],\n\t\"./NightmareHunterDeep\": [\n\t\t\"NFbI\",\n\t\t\"default~NightmareHunterDeep~index\"\n\t],\n\t\"./NightmareHunterDeep.js\": [\n\t\t\"NFbI\",\n\t\t\"default~NightmareHunterDeep~index\"\n\t],\n\t\"./NinjaSlayer\": [\n\t\t\"mLdZ\",\n\t\t\"default~NinjaSlayer~index\"\n\t],\n\t\"./NinjaSlayer.js\": [\n\t\t\"mLdZ\",\n\t\t\"default~NinjaSlayer~index\"\n\t],\n\t\"./NjslyrBattle\": [\n\t\t\"Bc9D\",\n\t\t\"common\"\n\t],\n\t\"./NjslyrBattle.js\": [\n\t\t\"Bc9D\",\n\t\t\"common\"\n\t],\n\t\"./Nuekagami\": [\n\t\t\"lPcP\",\n\t\t\"default~Nuekagami~index\"\n\t],\n\t\"./Nuekagami.js\": [\n\t\t\"lPcP\",\n\t\t\"default~Nuekagami~index\"\n\t],\n\t\"./OneWayHeroics\": [\n\t\t\"+vCw\",\n\t\t\"default~OneWayHeroics~index\"\n\t],\n\t\"./OneWayHeroics.js\": [\n\t\t\"+vCw\",\n\t\t\"default~OneWayHeroics~index\"\n\t],\n\t\"./OracleEngine\": [\n\t\t\"0FY2\",\n\t\t\"default~OracleEngine~index\"\n\t],\n\t\"./OracleEngine.js\": [\n\t\t\"0FY2\",\n\t\t\"default~OracleEngine~index\"\n\t],\n\t\"./OrgaRain\": [\n\t\t\"7xQw\",\n\t\t\"common\"\n\t],\n\t\"./OrgaRain.js\": [\n\t\t\"7xQw\",\n\t\t\"common\"\n\t],\n\t\"./Oukahoushin3rd\": [\n\t\t\"ssto\",\n\t\t\"default~Oukahoushin3rd~index\"\n\t],\n\t\"./Oukahoushin3rd.js\": [\n\t\t\"ssto\",\n\t\t\"default~Oukahoushin3rd~index\"\n\t],\n\t\"./Paradiso\": [\n\t\t\"xjZ9\",\n\t\t\"default~Paradiso~index\"\n\t],\n\t\"./Paradiso.js\": [\n\t\t\"xjZ9\",\n\t\t\"default~Paradiso~index\"\n\t],\n\t\"./Paranoia\": [\n\t\t\"+HbH\",\n\t\t\"common\"\n\t],\n\t\"./Paranoia.js\": [\n\t\t\"+HbH\",\n\t\t\"common\"\n\t],\n\t\"./ParanoiaRebooted\": [\n\t\t\"y6W0\",\n\t\t\"common\"\n\t],\n\t\"./ParanoiaRebooted.js\": [\n\t\t\"y6W0\",\n\t\t\"common\"\n\t],\n\t\"./ParasiteBlood\": [\n\t\t\"xRit\",\n\t\t\"default~ParasiteBlood~index\"\n\t],\n\t\"./ParasiteBlood.js\": [\n\t\t\"xRit\",\n\t\t\"default~ParasiteBlood~index\"\n\t],\n\t\"./Pathfinder\": [\n\t\t\"n/GQ\",\n\t\t\"common\"\n\t],\n\t\"./Pathfinder.js\": [\n\t\t\"n/GQ\",\n\t\t\"common\"\n\t],\n\t\"./Peekaboo\": [\n\t\t\"bgGC\",\n\t\t\"default~Peekaboo~index\"\n\t],\n\t\"./Peekaboo.js\": [\n\t\t\"bgGC\",\n\t\t\"default~Peekaboo~index\"\n\t],\n\t\"./Pendragon\": [\n\t\t\"irSd\",\n\t\t\"common\"\n\t],\n\t\"./Pendragon.js\": [\n\t\t\"irSd\",\n\t\t\"common\"\n\t],\n\t\"./PhantasmAdventure\": [\n\t\t\"cJSp\",\n\t\t\"common\"\n\t],\n\t\"./PhantasmAdventure.js\": [\n\t\t\"cJSp\",\n\t\t\"common\"\n\t],\n\t\"./Postman\": [\n\t\t\"Pw2m\",\n\t\t\"default~Postman~index\"\n\t],\n\t\"./Postman.js\": [\n\t\t\"Pw2m\",\n\t\t\"default~Postman~index\"\n\t],\n\t\"./PulpCthulhu\": [\n\t\t\"cunF\",\n\t\t\"default~PulpCthulhu~index\"\n\t],\n\t\"./PulpCthulhu.js\": [\n\t\t\"cunF\",\n\t\t\"default~PulpCthulhu~index\"\n\t],\n\t\"./Raisondetre\": [\n\t\t\"6/cF\",\n\t\t\"default~Raisondetre~index\"\n\t],\n\t\"./Raisondetre.js\": [\n\t\t\"6/cF\",\n\t\t\"default~Raisondetre~index\"\n\t],\n\t\"./RecordOfLodossWar\": [\n\t\t\"7EFR\",\n\t\t\"common\"\n\t],\n\t\"./RecordOfLodossWar.js\": [\n\t\t\"7EFR\",\n\t\t\"common\"\n\t],\n\t\"./RecordOfSteam\": [\n\t\t\"CAhj\",\n\t\t\"common\"\n\t],\n\t\"./RecordOfSteam.js\": [\n\t\t\"CAhj\",\n\t\t\"common\"\n\t],\n\t\"./Revulture\": [\n\t\t\"+bs6\",\n\t\t\"default~Revulture~index\"\n\t],\n\t\"./Revulture.js\": [\n\t\t\"+bs6\",\n\t\t\"default~Revulture~index\"\n\t],\n\t\"./RokumonSekai2\": [\n\t\t\"bO2Z\",\n\t\t\"common\"\n\t],\n\t\"./RokumonSekai2.js\": [\n\t\t\"bO2Z\",\n\t\t\"common\"\n\t],\n\t\"./RoleMaster\": [\n\t\t\"bYsS\",\n\t\t\"common\"\n\t],\n\t\"./RoleMaster.js\": [\n\t\t\"bYsS\",\n\t\t\"common\"\n\t],\n\t\"./RuinBreakers\": [\n\t\t\"dWjJ\",\n\t\t\"default~RuinBreakers~index\"\n\t],\n\t\"./RuinBreakers.js\": [\n\t\t\"dWjJ\",\n\t\t\"default~RuinBreakers~index\"\n\t],\n\t\"./RuneQuest\": [\n\t\t\"H/pX\",\n\t\t\"common\"\n\t],\n\t\"./RuneQuest.js\": [\n\t\t\"H/pX\",\n\t\t\"common\"\n\t],\n\t\"./RyuTuber\": [\n\t\t\"uAYo\",\n\t\t\"default~RyuTuber~index\"\n\t],\n\t\"./RyuTuber.js\": [\n\t\t\"uAYo\",\n\t\t\"default~RyuTuber~index\"\n\t],\n\t\"./Ryutama\": [\n\t\t\"41Dk\",\n\t\t\"default~Ryutama~index\"\n\t],\n\t\"./Ryutama.js\": [\n\t\t\"41Dk\",\n\t\t\"default~Ryutama~index\"\n\t],\n\t\"./SRS\": [\n\t\t\"XTRa\",\n\t\t\"default~SRS~index\"\n\t],\n\t\"./SRS.js\": [\n\t\t\"XTRa\",\n\t\t\"default~SRS~index\"\n\t],\n\t\"./SamsaraBallad\": [\n\t\t\"OU+m\",\n\t\t\"common\"\n\t],\n\t\"./SamsaraBallad.js\": [\n\t\t\"OU+m\",\n\t\t\"common\"\n\t],\n\t\"./Satasupe\": [\n\t\t\"9L+J\",\n\t\t\"default~Satasupe~index\"\n\t],\n\t\"./Satasupe.js\": [\n\t\t\"9L+J\",\n\t\t\"default~Satasupe~index\"\n\t],\n\t\"./ScreamHighSchool\": [\n\t\t\"nPUL\",\n\t\t\"default~ScreamHighSchool~index\"\n\t],\n\t\"./ScreamHighSchool.js\": [\n\t\t\"nPUL\",\n\t\t\"default~ScreamHighSchool~index\"\n\t],\n\t\"./SevenFortressMobius\": [\n\t\t\"kcya\",\n\t\t\"default~SevenFortressMobius~index\"\n\t],\n\t\"./SevenFortressMobius.js\": [\n\t\t\"kcya\",\n\t\t\"default~SevenFortressMobius~index\"\n\t],\n\t\"./ShadowRun\": [\n\t\t\"zzZI\",\n\t\t\"common\"\n\t],\n\t\"./ShadowRun.js\": [\n\t\t\"zzZI\",\n\t\t\"common\"\n\t],\n\t\"./ShadowRun4\": [\n\t\t\"kSBe\",\n\t\t\"common\"\n\t],\n\t\"./ShadowRun4.js\": [\n\t\t\"kSBe\",\n\t\t\"common\"\n\t],\n\t\"./ShadowRun5\": [\n\t\t\"nhlA\",\n\t\t\"common\"\n\t],\n\t\"./ShadowRun5.js\": [\n\t\t\"nhlA\",\n\t\t\"common\"\n\t],\n\t\"./SharedFantasia\": [\n\t\t\"uQmK\",\n\t\t\"common\"\n\t],\n\t\"./SharedFantasia.js\": [\n\t\t\"uQmK\",\n\t\t\"common\"\n\t],\n\t\"./ShinMegamiTenseiKakuseihen\": [\n\t\t\"aIpv\",\n\t\t\"common\"\n\t],\n\t\"./ShinMegamiTenseiKakuseihen.js\": [\n\t\t\"aIpv\",\n\t\t\"common\"\n\t],\n\t\"./ShinkuuGakuen\": [\n\t\t\"g9/q\",\n\t\t\"default~ShinkuuGakuen~index\"\n\t],\n\t\"./ShinkuuGakuen.js\": [\n\t\t\"g9/q\",\n\t\t\"default~ShinkuuGakuen~index\"\n\t],\n\t\"./ShinobiGami\": [\n\t\t\"7kAL\",\n\t\t\"default~ShinobiGami~index\"\n\t],\n\t\"./ShinobiGami.js\": [\n\t\t\"7kAL\",\n\t\t\"default~ShinobiGami~index\"\n\t],\n\t\"./ShoujoTenrankai\": [\n\t\t\"owW/\",\n\t\t\"default~ShoujoTenrankai~index\"\n\t],\n\t\"./ShoujoTenrankai.js\": [\n\t\t\"owW/\",\n\t\t\"default~ShoujoTenrankai~index\"\n\t],\n\t\"./Skynauts\": [\n\t\t\"KC31\",\n\t\t\"default~Skynauts~index\"\n\t],\n\t\"./Skynauts.js\": [\n\t\t\"KC31\",\n\t\t\"default~Skynauts~index\"\n\t],\n\t\"./SkynautsBouken\": [\n\t\t\"AXzp\",\n\t\t\"default~SkynautsBouken~index\"\n\t],\n\t\"./SkynautsBouken.js\": [\n\t\t\"AXzp\",\n\t\t\"default~SkynautsBouken~index\"\n\t],\n\t\"./SteamPunkers\": [\n\t\t\"WqKD\",\n\t\t\"default~SteamPunkers~index\"\n\t],\n\t\"./SteamPunkers.js\": [\n\t\t\"WqKD\",\n\t\t\"default~SteamPunkers~index\"\n\t],\n\t\"./StellarKnights\": [\n\t\t\"vikn\",\n\t\t\"default~StellarKnights~index\"\n\t],\n\t\"./StellarKnights.js\": [\n\t\t\"vikn\",\n\t\t\"default~StellarKnights~index\"\n\t],\n\t\"./SterileLife\": [\n\t\t\"RWe5\",\n\t\t\"default~SterileLife~index\"\n\t],\n\t\"./SterileLife.js\": [\n\t\t\"RWe5\",\n\t\t\"default~SterileLife~index\"\n\t],\n\t\"./StrangerOfSwordCity\": [\n\t\t\"Lsnz\",\n\t\t\"common\"\n\t],\n\t\"./StrangerOfSwordCity.js\": [\n\t\t\"Lsnz\",\n\t\t\"common\"\n\t],\n\t\"./StratoShout\": [\n\t\t\"hcZb\",\n\t\t\"common\"\n\t],\n\t\"./StratoShout.js\": [\n\t\t\"hcZb\",\n\t\t\"common\"\n\t],\n\t\"./StratoShout_Korean\": [\n\t\t\"qNSf\",\n\t\t\"common\"\n\t],\n\t\"./StratoShout_Korean.js\": [\n\t\t\"qNSf\",\n\t\t\"common\"\n\t],\n\t\"./Strave\": [\n\t\t\"+Qey\",\n\t\t\"default~Strave~index\"\n\t],\n\t\"./Strave.js\": [\n\t\t\"+Qey\",\n\t\t\"default~Strave~index\"\n\t],\n\t\"./SwordWorld\": [\n\t\t\"nWff\",\n\t\t\"default~SwordWorld~index\"\n\t],\n\t\"./SwordWorld.js\": [\n\t\t\"nWff\",\n\t\t\"default~SwordWorld~index\"\n\t],\n\t\"./SwordWorld2_0\": [\n\t\t\"tPkg\",\n\t\t\"default~SwordWorld2_0~index\"\n\t],\n\t\"./SwordWorld2_0.js\": [\n\t\t\"tPkg\",\n\t\t\"default~SwordWorld2_0~index\"\n\t],\n\t\"./SwordWorld2_5\": [\n\t\t\"CAdq\",\n\t\t\"default~SwordWorld2_5~index\"\n\t],\n\t\"./SwordWorld2_5.js\": [\n\t\t\"CAdq\",\n\t\t\"default~SwordWorld2_5~index\"\n\t],\n\t\"./TherapieSein\": [\n\t\t\"vMLC\",\n\t\t\"common\"\n\t],\n\t\"./TherapieSein.js\": [\n\t\t\"vMLC\",\n\t\t\"common\"\n\t],\n\t\"./TokumeiTenkousei\": [\n\t\t\"oXmh\",\n\t\t\"common\"\n\t],\n\t\"./TokumeiTenkousei.js\": [\n\t\t\"oXmh\",\n\t\t\"common\"\n\t],\n\t\"./TokyoGhostResearch\": [\n\t\t\"ib7m\",\n\t\t\"common\"\n\t],\n\t\"./TokyoGhostResearch.js\": [\n\t\t\"ib7m\",\n\t\t\"common\"\n\t],\n\t\"./TokyoNova\": [\n\t\t\"5tMs\",\n\t\t\"common\"\n\t],\n\t\"./TokyoNova.js\": [\n\t\t\"5tMs\",\n\t\t\"common\"\n\t],\n\t\"./Torg\": [\n\t\t\"ENSm\",\n\t\t\"default~Torg~index\"\n\t],\n\t\"./Torg.js\": [\n\t\t\"ENSm\",\n\t\t\"default~Torg~index\"\n\t],\n\t\"./Torg1_5\": [\n\t\t\"70Ww\",\n\t\t\"default~Torg1_5~index\"\n\t],\n\t\"./Torg1_5.js\": [\n\t\t\"70Ww\",\n\t\t\"default~Torg1_5~index\"\n\t],\n\t\"./TorgEternity\": [\n\t\t\"CaYn\",\n\t\t\"default~TorgEternity~index\"\n\t],\n\t\"./TorgEternity.js\": [\n\t\t\"CaYn\",\n\t\t\"default~TorgEternity~index\"\n\t],\n\t\"./TrinitySeven\": [\n\t\t\"Bf0i\",\n\t\t\"default~TrinitySeven~index\"\n\t],\n\t\"./TrinitySeven.js\": [\n\t\t\"Bf0i\",\n\t\t\"default~TrinitySeven~index\"\n\t],\n\t\"./TunnelsAndTrolls\": [\n\t\t\"lQxd\",\n\t\t\"default~TunnelsAndTrolls~index\"\n\t],\n\t\"./TunnelsAndTrolls.js\": [\n\t\t\"lQxd\",\n\t\t\"default~TunnelsAndTrolls~index\"\n\t],\n\t\"./TwilightGunsmoke\": [\n\t\t\"628n\",\n\t\t\"default~TwilightGunsmoke~index\"\n\t],\n\t\"./TwilightGunsmoke.js\": [\n\t\t\"628n\",\n\t\t\"default~TwilightGunsmoke~index\"\n\t],\n\t\"./UnsungDuet\": [\n\t\t\"jIUz\",\n\t\t\"default~UnsungDuet~index\"\n\t],\n\t\"./UnsungDuet.js\": [\n\t\t\"jIUz\",\n\t\t\"default~UnsungDuet~index\"\n\t],\n\t\"./Utakaze\": [\n\t\t\"/Bg6\",\n\t\t\"default~Utakaze~index\"\n\t],\n\t\"./Utakaze.js\": [\n\t\t\"/Bg6\",\n\t\t\"default~Utakaze~index\"\n\t],\n\t\"./VampireTheMasquerade5th\": [\n\t\t\"cI1M\",\n\t\t\"common\"\n\t],\n\t\"./VampireTheMasquerade5th.js\": [\n\t\t\"cI1M\",\n\t\t\"common\"\n\t],\n\t\"./Villaciel\": [\n\t\t\"ozu2\",\n\t\t\"default~Villaciel~index\"\n\t],\n\t\"./Villaciel.js\": [\n\t\t\"ozu2\",\n\t\t\"default~Villaciel~index\"\n\t],\n\t\"./WARPS\": [\n\t\t\"9CAH\",\n\t\t\"common\"\n\t],\n\t\"./WARPS.js\": [\n\t\t\"9CAH\",\n\t\t\"common\"\n\t],\n\t\"./WaresBlade\": [\n\t\t\"HW4s\",\n\t\t\"common\"\n\t],\n\t\"./WaresBlade.js\": [\n\t\t\"HW4s\",\n\t\t\"common\"\n\t],\n\t\"./Warhammer\": [\n\t\t\"Ouf3\",\n\t\t\"default~Warhammer~index\"\n\t],\n\t\"./Warhammer.js\": [\n\t\t\"Ouf3\",\n\t\t\"default~Warhammer~index\"\n\t],\n\t\"./Warhammer4\": [\n\t\t\"9ZF9\",\n\t\t\"default~Warhammer4~index\"\n\t],\n\t\"./Warhammer4.js\": [\n\t\t\"9ZF9\",\n\t\t\"default~Warhammer4~index\"\n\t],\n\t\"./WitchQuest\": [\n\t\t\"1Rc4\",\n\t\t\"default~WitchQuest~index\"\n\t],\n\t\"./WitchQuest.js\": [\n\t\t\"1Rc4\",\n\t\t\"default~WitchQuest~index\"\n\t],\n\t\"./WorldOfDarkness\": [\n\t\t\"TbWO\",\n\t\t\"common\"\n\t],\n\t\"./WorldOfDarkness.js\": [\n\t\t\"TbWO\",\n\t\t\"common\"\n\t],\n\t\"./YankeeYogSothoth\": [\n\t\t\"8zqA\",\n\t\t\"default~YankeeYogSothoth~index\"\n\t],\n\t\"./YankeeYogSothoth.js\": [\n\t\t\"8zqA\",\n\t\t\"default~YankeeYogSothoth~index\"\n\t],\n\t\"./YearZeroEngine\": [\n\t\t\"33cW\",\n\t\t\"common\"\n\t],\n\t\"./YearZeroEngine.js\": [\n\t\t\"33cW\",\n\t\t\"common\"\n\t],\n\t\"./Yggdrasill\": [\n\t\t\"YZSu\",\n\t\t\"default~Yggdrasill~index\"\n\t],\n\t\"./Yggdrasill.js\": [\n\t\t\"YZSu\",\n\t\t\"default~Yggdrasill~index\"\n\t],\n\t\"./ZettaiReido\": [\n\t\t\"B1yZ\",\n\t\t\"common\"\n\t],\n\t\"./ZettaiReido.js\": [\n\t\t\"B1yZ\",\n\t\t\"common\"\n\t],\n\t\"./index\": [\n\t\t\"FrAx\",\n\t\t\"default~MeikyuKingdomBasic~index\",\n\t\t\"default~SwordWorld2_5~index\",\n\t\t\"default~SwordWorld2_0~index\",\n\t\t\"default~SwordWorld~index\",\n\t\t\"default~LogHorizon_Korean~index\",\n\t\t\"default~LogHorizon~index\",\n\t\t\"default~Yggdrasill~index\",\n\t\t\"default~MagicaLogia_Korean~index\",\n\t\t\"default~MagicaLogia~index\",\n\t\t\"default~AlchemiaStruggle~index\",\n\t\t\"default~JekyllAndHyde~index\",\n\t\t\"default~DesperateRun~index\",\n\t\t\"default~UnsungDuet~index\",\n\t\t\"default~FilledWith~index\",\n\t\t\"default~GurpsFW~index\",\n\t\t\"default~MeikyuKingdom~index\",\n\t\t\"default~BeginningIdol~index\",\n\t\t\"default~BeginningIdol_Korean~index\",\n\t\t\"default~Elysion~index\",\n\t\t\"default~Satasupe~index\",\n\t\t\"default~NinjaSlayer~index\",\n\t\t\"default~PulpCthulhu~index\",\n\t\t\"default~AngelGear~index\",\n\t\t\"default~InfiniteBabeL~index\",\n\t\t\"default~ShinobiGami~index\",\n\t\t\"default~Cthulhu7th~index\",\n\t\t\"default~ParasiteBlood~index\",\n\t\t\"default~GranCrest~index\",\n\t\t\"default~Garako~index\",\n\t\t\"default~HuntersMoon~index\",\n\t\t\"default~Villaciel~index\",\n\t\t\"default~BloodMoon~index\",\n\t\t\"default~OneWayHeroics~index\",\n\t\t\"default~DeadlineHeroes~index\",\n\t\t\"default~MetalHeadExtream~index\",\n\t\t\"default~SterileLife~index\",\n\t\t\"default~LiveraDoll~index\",\n\t\t\"default~ColossalHunter~index\",\n\t\t\"default~ShoujoTenrankai~index\",\n\t\t\"default~KanColle~index\",\n\t\t\"default~TwilightGunsmoke~index\",\n\t\t\"default~NeverCloud~index\",\n\t\t\"default~DemonParasite~index\",\n\t\t\"default~SteamPunkers~index\",\n\t\t\"default~BattleTech~index\",\n\t\t\"default~DoubleCross_Korean~index\",\n\t\t\"default~RuinBreakers~index\",\n\t\t\"default~MeikyuDays~index\",\n\t\t\"default~DoubleCross~index\",\n\t\t\"default~HatsuneMiku~index\",\n\t\t\"default~KillDeathBusiness_Korean~index\",\n\t\t\"default~ScreamHighSchool~index\",\n\t\t\"default~Paradiso~index\",\n\t\t\"default~ShinkuuGakuen~index\",\n\t\t\"default~KillDeathBusiness~index\",\n\t\t\"default~BloodCrusade~index\",\n\t\t\"default~BlindMythos~index\",\n\t\t\"default~BeastBindTrinity~index\",\n\t\t\"default~EarthDawn4~index\",\n\t\t\"default~MetalHead~index\",\n\t\t\"default~EarthDawn3~index\",\n\t\t\"default~Dracurouge_Korean~index\",\n\t\t\"default~Warhammer4~index\",\n\t\t\"default~TorgEternity~index\",\n\t\t\"default~AceKillerGene~index\",\n\t\t\"default~GURPS~index\",\n\t\t\"default~Peekaboo~index\",\n\t\t\"default~YankeeYogSothoth~index\",\n\t\t\"default~KemonoNoMori~index\",\n\t\t\"default~Cthulhu7th_ChineseTraditional~index\",\n\t\t\"default~Dracurouge~index\",\n\t\t\"default~Cthulhu7th_Korean~index\",\n\t\t\"default~GardenOrder~index\",\n\t\t\"default~Torg1_5~index\",\n\t\t\"default~StellarKnights~index\",\n\t\t\"default~JuinKansen~index\",\n\t\t\"default~AnimaAnimus~index\",\n\t\t\"default~Cthulhu_Korean~index\",\n\t\t\"default~Cthulhu_ChineseTraditional~index\",\n\t\t\"default~SevenFortressMobius~index\",\n\t\t\"default~MonotoneMuseum_Korean~index\",\n\t\t\"default~Warhammer~index\",\n\t\t\"default~NightWizard3rd~index\",\n\t\t\"default~FullMetalPanic~index\",\n\t\t\"default~MetallicGuardian~index\",\n\t\t\"default~EtrianOdysseySRS~index\",\n\t\t\"default~Alshard~index\",\n\t\t\"default~SRS~index\",\n\t\t\"default~Skynauts~index\",\n\t\t\"default~NightWizard~index\",\n\t\t\"default~TunnelsAndTrolls~index\",\n\t\t\"default~Cthulhu~index\",\n\t\t\"default~GundogRevised~index\",\n\t\t\"default~MonotoneMuseum~index\",\n\t\t\"default~OracleEngine~index\",\n\t\t\"default~BadLife~index\",\n\t\t\"default~Nuekagami~index\",\n\t\t\"default~WitchQuest~index\",\n\t\t\"default~SkynautsBouken~index\",\n\t\t\"default~Torg~index\",\n\t\t\"default~CardRanker~index\",\n\t\t\"default~EmbryoMachine~index\",\n\t\t\"default~DetatokoSaga_Korean~index\",\n\t\t\"default~Nechronica_Korean~index\",\n\t\t\"default~AlterRaise~index\",\n\t\t\"default~LostRoyal~index\",\n\t\t\"default~Amadeus_Korean~index\",\n\t\t\"default~GundogZero~index\",\n\t\t\"default~Insane_Korean~index\",\n\t\t\"default~Strave~index\",\n\t\t\"default~BladeOfArcana~index\",\n\t\t\"default~DarkBlaze~index\",\n\t\t\"default~DarkDaysDrive~index\",\n\t\t\"default~TrinitySeven~index\",\n\t\t\"default~FutariSousa_Korean~index\",\n\t\t\"default~HouraiGakuen~index\",\n\t\t\"default~Postman~index\",\n\t\t\"default~DetatokoSaga~index\",\n\t\t\"default~Nechronica~index\",\n\t\t\"default~Kamigakari_Korean~index\",\n\t\t\"default~CthulhuTech~index\",\n\t\t\"default~RyuTuber~index\",\n\t\t\"default~ArsMagica~index\",\n\t\t\"default~Raisondetre~index\",\n\t\t\"default~EarthDawn~index\",\n\t\t\"default~BarnaKronika~index\",\n\t\t\"default~Amadeus~index\",\n\t\t\"default~Oukahoushin3rd~index\",\n\t\t\"default~Insane~index\",\n\t\t\"default~Kamigakari~index\",\n\t\t\"default~FutariSousa~index\",\n\t\t\"default~NSSQ~index\",\n\t\t\"default~Revulture~index\",\n\t\t\"default~Ryutama~index\",\n\t\t\"default~KurayamiCrying~index\",\n\t\t\"default~ChaosFlare~index\",\n\t\t\"default~GoblinSlayer~index\",\n\t\t\"default~NightmareHunterDeep~index\",\n\t\t\"default~Utakaze~index\",\n\t\t\"default~Fiasco_Korean~index\",\n\t\t\"default~GehennaAn~index\",\n\t\t\"common\",\n\t\t\"index\"\n\t],\n\t\"./index.js\": [\n\t\t\"FrAx\",\n\t\t\"default~MeikyuKingdomBasic~index\",\n\t\t\"default~SwordWorld2_5~index\",\n\t\t\"default~SwordWorld2_0~index\",\n\t\t\"default~SwordWorld~index\",\n\t\t\"default~LogHorizon_Korean~index\",\n\t\t\"default~LogHorizon~index\",\n\t\t\"default~Yggdrasill~index\",\n\t\t\"default~MagicaLogia_Korean~index\",\n\t\t\"default~MagicaLogia~index\",\n\t\t\"default~AlchemiaStruggle~index\",\n\t\t\"default~JekyllAndHyde~index\",\n\t\t\"default~DesperateRun~index\",\n\t\t\"default~UnsungDuet~index\",\n\t\t\"default~FilledWith~index\",\n\t\t\"default~GurpsFW~index\",\n\t\t\"default~MeikyuKingdom~index\",\n\t\t\"default~BeginningIdol~index\",\n\t\t\"default~BeginningIdol_Korean~index\",\n\t\t\"default~Elysion~index\",\n\t\t\"default~Satasupe~index\",\n\t\t\"default~NinjaSlayer~index\",\n\t\t\"default~PulpCthulhu~index\",\n\t\t\"default~AngelGear~index\",\n\t\t\"default~InfiniteBabeL~index\",\n\t\t\"default~ShinobiGami~index\",\n\t\t\"default~Cthulhu7th~index\",\n\t\t\"default~ParasiteBlood~index\",\n\t\t\"default~GranCrest~index\",\n\t\t\"default~Garako~index\",\n\t\t\"default~HuntersMoon~index\",\n\t\t\"default~Villaciel~index\",\n\t\t\"default~BloodMoon~index\",\n\t\t\"default~OneWayHeroics~index\",\n\t\t\"default~DeadlineHeroes~index\",\n\t\t\"default~MetalHeadExtream~index\",\n\t\t\"default~SterileLife~index\",\n\t\t\"default~LiveraDoll~index\",\n\t\t\"default~ColossalHunter~index\",\n\t\t\"default~ShoujoTenrankai~index\",\n\t\t\"default~KanColle~index\",\n\t\t\"default~TwilightGunsmoke~index\",\n\t\t\"default~NeverCloud~index\",\n\t\t\"default~DemonParasite~index\",\n\t\t\"default~SteamPunkers~index\",\n\t\t\"default~BattleTech~index\",\n\t\t\"default~DoubleCross_Korean~index\",\n\t\t\"default~RuinBreakers~index\",\n\t\t\"default~MeikyuDays~index\",\n\t\t\"default~DoubleCross~index\",\n\t\t\"default~HatsuneMiku~index\",\n\t\t\"default~KillDeathBusiness_Korean~index\",\n\t\t\"default~ScreamHighSchool~index\",\n\t\t\"default~Paradiso~index\",\n\t\t\"default~ShinkuuGakuen~index\",\n\t\t\"default~KillDeathBusiness~index\",\n\t\t\"default~BloodCrusade~index\",\n\t\t\"default~BlindMythos~index\",\n\t\t\"default~BeastBindTrinity~index\",\n\t\t\"default~EarthDawn4~index\",\n\t\t\"default~MetalHead~index\",\n\t\t\"default~EarthDawn3~index\",\n\t\t\"default~Dracurouge_Korean~index\",\n\t\t\"default~Warhammer4~index\",\n\t\t\"default~TorgEternity~index\",\n\t\t\"default~AceKillerGene~index\",\n\t\t\"default~GURPS~index\",\n\t\t\"default~Peekaboo~index\",\n\t\t\"default~YankeeYogSothoth~index\",\n\t\t\"default~KemonoNoMori~index\",\n\t\t\"default~Cthulhu7th_ChineseTraditional~index\",\n\t\t\"default~Dracurouge~index\",\n\t\t\"default~Cthulhu7th_Korean~index\",\n\t\t\"default~GardenOrder~index\",\n\t\t\"default~Torg1_5~index\",\n\t\t\"default~StellarKnights~index\",\n\t\t\"default~JuinKansen~index\",\n\t\t\"default~AnimaAnimus~index\",\n\t\t\"default~Cthulhu_Korean~index\",\n\t\t\"default~Cthulhu_ChineseTraditional~index\",\n\t\t\"default~SevenFortressMobius~index\",\n\t\t\"default~MonotoneMuseum_Korean~index\",\n\t\t\"default~Warhammer~index\",\n\t\t\"default~NightWizard3rd~index\",\n\t\t\"default~FullMetalPanic~index\",\n\t\t\"default~MetallicGuardian~index\",\n\t\t\"default~EtrianOdysseySRS~index\",\n\t\t\"default~Alshard~index\",\n\t\t\"default~SRS~index\",\n\t\t\"default~Skynauts~index\",\n\t\t\"default~NightWizard~index\",\n\t\t\"default~TunnelsAndTrolls~index\",\n\t\t\"default~Cthulhu~index\",\n\t\t\"default~GundogRevised~index\",\n\t\t\"default~MonotoneMuseum~index\",\n\t\t\"default~OracleEngine~index\",\n\t\t\"default~BadLife~index\",\n\t\t\"default~Nuekagami~index\",\n\t\t\"default~WitchQuest~index\",\n\t\t\"default~SkynautsBouken~index\",\n\t\t\"default~Torg~index\",\n\t\t\"default~CardRanker~index\",\n\t\t\"default~EmbryoMachine~index\",\n\t\t\"default~DetatokoSaga_Korean~index\",\n\t\t\"default~Nechronica_Korean~index\",\n\t\t\"default~AlterRaise~index\",\n\t\t\"default~LostRoyal~index\",\n\t\t\"default~Amadeus_Korean~index\",\n\t\t\"default~GundogZero~index\",\n\t\t\"default~Insane_Korean~index\",\n\t\t\"default~Strave~index\",\n\t\t\"default~BladeOfArcana~index\",\n\t\t\"default~DarkBlaze~index\",\n\t\t\"default~DarkDaysDrive~index\",\n\t\t\"default~TrinitySeven~index\",\n\t\t\"default~FutariSousa_Korean~index\",\n\t\t\"default~HouraiGakuen~index\",\n\t\t\"default~Postman~index\",\n\t\t\"default~DetatokoSaga~index\",\n\t\t\"default~Nechronica~index\",\n\t\t\"default~Kamigakari_Korean~index\",\n\t\t\"default~CthulhuTech~index\",\n\t\t\"default~RyuTuber~index\",\n\t\t\"default~ArsMagica~index\",\n\t\t\"default~Raisondetre~index\",\n\t\t\"default~EarthDawn~index\",\n\t\t\"default~BarnaKronika~index\",\n\t\t\"default~Amadeus~index\",\n\t\t\"default~Oukahoushin3rd~index\",\n\t\t\"default~Insane~index\",\n\t\t\"default~Kamigakari~index\",\n\t\t\"default~FutariSousa~index\",\n\t\t\"default~NSSQ~index\",\n\t\t\"default~Revulture~index\",\n\t\t\"default~Ryutama~index\",\n\t\t\"default~KurayamiCrying~index\",\n\t\t\"default~ChaosFlare~index\",\n\t\t\"default~GoblinSlayer~index\",\n\t\t\"default~NightmareHunterDeep~index\",\n\t\t\"default~Utakaze~index\",\n\t\t\"default~Fiasco_Korean~index\",\n\t\t\"default~GehennaAn~index\",\n\t\t\"common\",\n\t\t\"index\"\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn Promise.all(ids.slice(1).map(__webpack_require__.e)).then(function() {\n\t\treturn __webpack_require__.t(id, 7);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = \"fesB\";\nmodule.exports = webpackAsyncContext;","import { ObjectStore } from './core/synchronize-object/object-store';\r\nimport { TabletopObject } from './tabletop-object';\r\n\r\ntype AliasName = string;\r\n\r\nexport interface Stackable extends TabletopObject {\r\n  zindex: number;\r\n}\r\n\r\nexport function moveToTopmost(topmost: Stackable, otherRelatives: AliasName[] = []) {\r\n  let objects: Stackable[] = ObjectStore.instance.getObjects(topmost.aliasName);\r\n  otherRelatives.forEach(aliasName => objects = objects.concat(ObjectStore.instance.getObjects(aliasName)));\r\n  objects = objects.filter(obj => obj.isVisibleOnTable);\r\n\r\n  let maxZindex: number = -1;\r\n  let hasConflict: boolean = false;\r\n  for (let i = 0; i < objects.length; i++) {\r\n    if (maxZindex === objects[i].zindex) {\r\n      hasConflict = true;\r\n    } else if (maxZindex < objects[i].zindex) {\r\n      maxZindex = objects[i].zindex;\r\n      hasConflict = false;\r\n    }\r\n  }\r\n\r\n  if (maxZindex === topmost.zindex && !hasConflict) return;\r\n  topmost.zindex = maxZindex + 1;\r\n\r\n  if (topmost.zindex < objects.length + 256) return;\r\n  objects.sort((a, b) => a.zindex - b.zindex);\r\n\r\n  for (let i = 0; i < objects.length; i++) {\r\n    objects[i].zindex = i;\r\n  }\r\n}\r\n","import { ImageFile } from './core/file-storage/image-file';\r\nimport { SyncObject, SyncVar } from './core/synchronize-object/decorator';\r\nimport { DataElement } from './data-element';\r\nimport { TabletopObject } from './tabletop-object';\r\n\r\nexport enum TerrainViewState {\r\n  NULL = 0,\r\n  FLOOR = 1,\r\n  WALL = 2,\r\n  ALL = 3,\r\n}\r\n\r\n@SyncObject('terrain')\r\nexport class Terrain extends TabletopObject {\r\n  @SyncVar() isLocked: boolean = false;\r\n  @SyncVar() mode: TerrainViewState = TerrainViewState.ALL;\r\n  @SyncVar() rotate: number = 0;\r\n\r\n  get width(): number { return this.getCommonValue('width', 1); }\r\n  set width(width: number) { this.setCommonValue('width', width); }\r\n  get height(): number { return this.getCommonValue('height', 1); }\r\n  set height(height: number) { this.setCommonValue('height', height); }\r\n  get depth(): number { return this.getCommonValue('depth', 1); }\r\n  set depth(depth: number) { this.setCommonValue('depth', depth); }\r\n  get name(): string { return this.getCommonValue('name', ''); }\r\n  set name(name: string) { this.setCommonValue('name', name); }\r\n\r\n  get wallImage(): ImageFile { return this.getImageFile('wall'); }\r\n  get floorImage(): ImageFile { return this.getImageFile('floor'); }\r\n\r\n  get hasWall(): boolean { return this.mode & TerrainViewState.WALL ? true : false; }\r\n  get hasFloor(): boolean { return this.mode & TerrainViewState.FLOOR ? true : false; }\r\n\r\n  static create(name: string, width: number, depth: number, height: number, wall: string, floor: string, identifier?: string): Terrain {\r\n    let object: Terrain = null;\r\n\r\n    if (identifier) {\r\n      object = new Terrain(identifier);\r\n    } else {\r\n      object = new Terrain();\r\n    }\r\n    object.createDataElements();\r\n\r\n    object.commonDataElement.appendChild(DataElement.create('name', name, {}, 'name_' + object.identifier));\r\n    object.commonDataElement.appendChild(DataElement.create('width', width, {}, 'width_' + object.identifier));\r\n    object.commonDataElement.appendChild(DataElement.create('height', height, {}, 'height_' + object.identifier));\r\n    object.commonDataElement.appendChild(DataElement.create('depth', depth, {}, 'depth_' + object.identifier));\r\n    object.imageDataElement.appendChild(DataElement.create('wall', wall, { type: 'image' }, 'wall_' + object.identifier));\r\n    object.imageDataElement.appendChild(DataElement.create('floor', floor, { type: 'image' }, 'floor_' + object.identifier));\r\n    object.initialize();\r\n\r\n    return object;\r\n  }\r\n}\r\n","import { AfterViewInit, Component, ElementRef, Input, NgZone, OnDestroy, OnInit, ViewChild } from '@angular/core';\r\n\r\nimport { EventSystem, Network } from '@udonarium/core/system';\r\nimport { ResettableTimeout } from '@udonarium/core/system/util/resettable-timeout';\r\nimport { PeerCursor } from '@udonarium/peer-cursor';\r\n\r\nimport { BatchService } from 'service/batch.service';\r\nimport { CoordinateService } from 'service/coordinate.service';\r\nimport { PointerCoordinate } from 'service/pointer-device.service';\r\n\r\n@Component({\r\n  selector: 'peer-cursor, [peer-cursor]',\r\n  templateUrl: './peer-cursor.component.html',\r\n  styleUrls: ['./peer-cursor.component.css']\r\n})\r\nexport class PeerCursorComponent implements OnInit, AfterViewInit, OnDestroy {\r\n\r\n  @ViewChild('cursor') cursorElementRef: ElementRef;\r\n  @ViewChild('opacity') opacityElementRef: ElementRef;\r\n  @Input() cursor: PeerCursor = PeerCursor.myCursor;\r\n\r\n  get iconUrl(): string { return this.cursor.image.url; }\r\n  get name(): string { return this.cursor.name }\r\n  get isMine(): boolean { return this.cursor.isMine; }\r\n\r\n  private cursorElement: HTMLElement = null;\r\n  private opacityElement: HTMLElement = null;\r\n  private fadeOutTimer: ResettableTimeout = null;\r\n\r\n  private updateInterval: NodeJS.Timer = null;\r\n  private callcack: any = (e) => this.onMouseMove(e);\r\n\r\n  private _x: number = 0;\r\n  private _y: number = 0;\r\n  private _target: HTMLElement;\r\n\r\n  get delayMs(): number {\r\n    let maxDelay = Network.peerIds.length * 16.6;\r\n    return maxDelay < 100 ? 100 : maxDelay;\r\n  }\r\n\r\n  constructor(\r\n    private batchService: BatchService,\r\n    private coordinateService: CoordinateService,\r\n    private ngZone: NgZone\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    if (!this.isMine) {\r\n      EventSystem.register(this)\r\n        .on('CURSOR_MOVE', event => {\r\n          if (event.sendFrom !== this.cursor.peerId) return;\r\n          this.batchService.add(() => {\r\n            this.stopTransition();\r\n            this.setAnimatedTransition();\r\n            this.setPosition(event.data[0], event.data[1], event.data[2]);\r\n            this.resetFadeOut();\r\n          }, this);\r\n        });\r\n    }\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    if (this.isMine) {\r\n      this.ngZone.runOutsideAngular(() => {\r\n        document.body.addEventListener('mousemove', this.callcack);\r\n        document.body.addEventListener('touchmove', this.callcack);\r\n      });\r\n    } else {\r\n      this.cursorElement = this.cursorElementRef.nativeElement;\r\n      this.opacityElement = this.opacityElementRef.nativeElement;\r\n      this.setAnimatedTransition();\r\n      this.setPosition(0, 0, 0);\r\n      this.resetFadeOut();\r\n    }\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    document.body.removeEventListener('mousemove', this.callcack);\r\n    document.body.removeEventListener('touchmove', this.callcack);\r\n    EventSystem.unregister(this);\r\n    this.batchService.remove(this);\r\n    if (this.fadeOutTimer) this.fadeOutTimer.clear();\r\n  }\r\n\r\n  private onMouseMove(e: any) {\r\n    let x = e.touches ? e.changedTouches[0].pageX : e.pageX;\r\n    let y = e.touches ? e.changedTouches[0].pageY : e.pageY;\r\n    if (x === this._x && y === this._y) return;\r\n    this._x = x;\r\n    this._y = y;\r\n    this._target = e.target;\r\n    if (!this.updateInterval) {\r\n      this.updateInterval = setTimeout(() => {\r\n        this.updateInterval = null;\r\n        this.calcLocalCoordinate(this._x, this._y, this._target);\r\n      }, this.delayMs);\r\n    }\r\n  }\r\n\r\n  private calcLocalCoordinate(x: number, y: number, target: HTMLElement) {\r\n    if (!document.getElementById('app-table-layer').contains(target)) return;\r\n\r\n    let coordinate: PointerCoordinate = { x: x, y: y, z: 0 };\r\n    coordinate = this.coordinateService.calcTabletopLocalCoordinate(coordinate, target);\r\n\r\n    EventSystem.call('CURSOR_MOVE', [coordinate.x, coordinate.y, coordinate.z]);\r\n  }\r\n\r\n  private resetFadeOut() {\r\n    this.opacityElement.style.opacity = '1.0';\r\n    if (this.fadeOutTimer == null) {\r\n      this.fadeOutTimer = new ResettableTimeout(() => {\r\n        this.opacityElement.style.opacity = '0.0';\r\n      }, 3000);\r\n    }\r\n    this.fadeOutTimer.reset();\r\n  }\r\n\r\n  private stopTransition() {\r\n    this.cursorElement.style.transform = window.getComputedStyle(this.cursorElement).transform;\r\n  }\r\n\r\n  private setAnimatedTransition() {\r\n    this.cursorElement.style.transition = `transform ${this.delayMs + 33}ms linear, opacity 0.5s ease-out`;\r\n  }\r\n\r\n  private setPosition(x: number, y: number, z: number) {\r\n    this.cursorElement.style.transform = 'translateX(' + x + 'px) translateY(' + y + 'px) translateZ(' + z + 'px)';\r\n  }\r\n}\r\n","<div *ngIf=\"!isMine\" #cursor class=\"component is-3d is-transition is-pointer-events-none\">\r\n  <div #opacity class=\"peer-cursor is-3d is-transition\">\r\n    <div class=\"icon\" [style.background-image]=\"'url(' + iconUrl + ')' | safe: 'style'\">\r\n      <div class=\"name is-center\">\r\n        <span style=\"white-space: nowrap;\">{{name}}</span>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>","import { Attributes } from './core/synchronize-object/attributes';\r\nimport { SyncObject, SyncVar } from './core/synchronize-object/decorator';\r\nimport { ObjectNode } from './core/synchronize-object/object-node';\r\nimport { GameObject, ObjectContext } from './core/synchronize-object/game-object';\r\n\r\n@SyncObject('data')\r\nexport class DataElement extends ObjectNode {\r\n  @SyncVar() name: string;\r\n  @SyncVar() type: string;\r\n  @SyncVar() currentValue: number | string;\r\n\r\n  get isNumberResource(): boolean { return this.type != null && this.type === 'numberResource'; }\r\n  get isNote(): boolean { return this.type != null && this.type === 'note'; }\r\n\r\n  public static create(name: string, value: number | string = '', attributes: Attributes = {}, identifier: string = ''): DataElement {\r\n    let dataElement: DataElement;\r\n    if (identifier && 0 < identifier.length) {\r\n      dataElement = new DataElement(identifier);\r\n    } else {\r\n      dataElement = new DataElement();\r\n    }\r\n    dataElement.attributes = attributes;\r\n    dataElement.name = name;\r\n    dataElement.value = value;\r\n    dataElement.initialize();\r\n\r\n    return dataElement;\r\n  }\r\n\r\n  getElementsByName(name: string): DataElement[] {\r\n    let children: DataElement[] = [];\r\n    for (let child of this.children) {\r\n      if (child instanceof DataElement) {\r\n        if (child.getAttribute('name') === name) children.push(child);\r\n        Array.prototype.push.apply(children, child.getElementsByName(name));\r\n      }\r\n    }\r\n    return children;\r\n  }\r\n\r\n  getElementsByType(type: string): DataElement[] {\r\n    let children: DataElement[] = [];\r\n    for (let child of this.children) {\r\n      if (child instanceof DataElement) {\r\n        if (child.getAttribute('type') === type) children.push(child);\r\n        Array.prototype.push.apply(children, child.getElementsByType(type));\r\n      }\r\n    }\r\n    return children;\r\n  }\r\n\r\n  getFirstElementByName(name: string): DataElement {\r\n    for (let child of this.children) {\r\n      if (child instanceof DataElement) {\r\n        if (child.getAttribute('name') === name) return child;\r\n        let match = child.getFirstElementByName(name);\r\n        if (match) return match;\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n  \r\n  get myIdentifer(){\r\n    let self:GameObject = <GameObject>this;\r\n    return self.identifier;\r\n  }\r\n}\r\n","import { AudioFile } from './core/file-storage/audio-file';\r\nimport { AudioPlayer } from './core/file-storage/audio-player';\r\nimport { AudioStorage } from './core/file-storage/audio-storage';\r\nimport { SyncObject, SyncVar } from './core/synchronize-object/decorator';\r\nimport { GameObject, ObjectContext } from './core/synchronize-object/game-object';\r\nimport { EventSystem } from './core/system';\r\n\r\n@SyncObject('jukebox')\r\nexport class Jukebox extends GameObject {\r\n  @SyncVar() audioIdentifier: string = '';\r\n  @SyncVar() startTime: number = 0;\r\n  @SyncVar() isLoop: boolean = false;\r\n  @SyncVar() isPlaying: boolean = false;\r\n\r\n  get audio(): AudioFile { return AudioStorage.instance.get(this.audioIdentifier); }\r\n  \r\n  private audioPlayer: AudioPlayer = new AudioPlayer();\r\n\r\n  // GameObject Lifecycle\r\n  onStoreAdded() {\r\n    super.onStoreAdded();\r\n    this.unlockAfterUserInteraction();\r\n  }\r\n\r\n  // GameObject Lifecycle\r\n  onStoreRemoved() {\r\n    super.onStoreRemoved();\r\n    this._stop();\r\n  }\r\n\r\n  play(identifier: string, isLoop: boolean = false) {\r\n\r\n    let audio = AudioStorage.instance.get(identifier);\r\n    if (!audio || !audio.isReady) return;\r\n\r\n    this.audioIdentifier = identifier;\r\n    this.isPlaying = true;\r\n    this.isLoop = isLoop;\r\n    this._play();\r\n  }\r\n\r\n  private _play() {\r\n    this._stop();\r\n    if (!this.audio || !this.audio.isReady) {\r\n      this.playAfterFileUpdate();\r\n      return;\r\n    }\r\n    this.audioPlayer.loop = true;\r\n    this.audioPlayer.play(this.audio);\r\n  }\r\n\r\n  stop() {\r\n\r\n    this.audioIdentifier = '';\r\n    this.isPlaying = false;\r\n    this._stop();\r\n  }\r\n\r\n  private _stop() {\r\n\r\n    this.unregisterEvent()\r\n    this.audioPlayer.stop();\r\n  }\r\n\r\n  private playAfterFileUpdate() {\r\n\r\n    EventSystem.register(this)\r\n      .on('UPDATE_AUDIO_RESOURE', -100, event => {\r\n        this._play();\r\n      });\r\n  }\r\n\r\n  private unlockAfterUserInteraction() {\r\n    let callback = () => {\r\n      document.body.removeEventListener('touchstart', callback, true);\r\n      document.body.removeEventListener('mousedown', callback, true);\r\n      this.audioPlayer.stop();\r\n      if (this.isPlaying) this._play();\r\n    }\r\n    document.body.addEventListener('touchstart', callback, true);\r\n    document.body.addEventListener('mousedown', callback, true);\r\n  }\r\n\r\n  private unregisterEvent() {\r\n    EventSystem.unregister(this, 'UPDATE_AUDIO_RESOURE');\r\n  }\r\n\r\n  // override\r\n  apply(context: ObjectContext) {\r\n\r\n    let audioIdentifier = this.audioIdentifier;\r\n    let isPlaying = this.isPlaying;\r\n    super.apply(context);\r\n    if ((audioIdentifier !== this.audioIdentifier || !isPlaying) && this.isPlaying) {\r\n      this._play();\r\n    } else if (isPlaying !== this.isPlaying && !this.isPlaying) {\r\n      this._stop();\r\n    }\r\n  }\r\n}\r\n","import { EventSystem } from '../system';\r\nimport { setZeroTimeout } from '../system/util/zero-timeout';\r\nimport { GameObject, ObjectContext } from './game-object';\r\nimport { Type } from './object-factory';\r\n\r\ntype ObjectAliasName = string;\r\ntype ObjectIdentifier = string;\r\ntype TimeStamp = number;\r\n\r\nexport type CatalogItem = { identifier: string, version: number };\r\n\r\nexport class ObjectStore {\r\n  private static _instance: ObjectStore\r\n  static get instance(): ObjectStore {\r\n    if (!ObjectStore._instance) ObjectStore._instance = new ObjectStore();\r\n    return ObjectStore._instance;\r\n  }\r\n\r\n  private identifierMap: Map<ObjectIdentifier, GameObject> = new Map();\r\n  private aliasNameMap: Map<ObjectAliasName, Map<ObjectIdentifier, GameObject>> = new Map();\r\n  private garbageMap: Map<ObjectIdentifier, TimeStamp> = new Map();\r\n\r\n  private queueMap: Map<ObjectIdentifier, ObjectContext> = new Map();\r\n  private updateInterval: number = null;\r\n  private garbageCollectionInterval: NodeJS.Timer = null;\r\n  private updateCallback = () => { this.updateQueue(); }\r\n\r\n  private constructor() { console.log('ObjectStore ready...'); };\r\n\r\n  add(object: GameObject, shouldBroadcast: boolean = true): GameObject {\r\n    if (this.get(object.identifier) != null || this.isDeleted(object.identifier)) return null;\r\n    this.identifierMap.set(object.identifier, object);\r\n    let objectsMap = this.aliasNameMap.has(object.aliasName) ? this.aliasNameMap.get(object.aliasName) : this.aliasNameMap.set(object.aliasName, new Map()).get(object.aliasName);\r\n    objectsMap.set(object.identifier, object);\r\n    object.onStoreAdded();\r\n    if (shouldBroadcast) this.update(object.toContext());\r\n    return object;\r\n  }\r\n\r\n  remove(object: GameObject): GameObject {\r\n    if (!this.identifierMap.has(object.identifier)) return null;\r\n\r\n    this.identifierMap.delete(object.identifier);\r\n    let objectsMap = this.aliasNameMap.get(object.aliasName);\r\n    if (objectsMap) objectsMap.delete(object.identifier);\r\n    object.onStoreRemoved();\r\n    return object;\r\n  }\r\n\r\n  delete(object: GameObject, shouldBroadcast?: boolean): GameObject\r\n  delete(identifier: string, shouldBroadcast?: boolean): GameObject\r\n  delete(arg: any, shouldBroadcast: boolean = true) {\r\n    let object: GameObject = null;\r\n    let identifier: string = null;\r\n    if (typeof arg === 'string') {\r\n      object = this.get(arg);\r\n      identifier = arg;\r\n    } else {\r\n      object = arg;\r\n      identifier = arg.identifier;\r\n    }\r\n    this.markForDelete(identifier);\r\n    return object == null ? null : this._delete(object, shouldBroadcast);\r\n  }\r\n\r\n  private _delete(object: GameObject, shouldBroadcast: boolean): GameObject {\r\n    if (this.remove(object) === null) return null;\r\n    if (shouldBroadcast) EventSystem.call('DELETE_GAME_OBJECT', { identifier: object.identifier });\r\n\r\n    return object;\r\n  }\r\n\r\n  private markForDelete(identifier: string) {\r\n    this.garbageMap.set(identifier, performance.now());\r\n    this.garbageCollection(10 * 60 * 1000);\r\n  }\r\n\r\n  get<T extends GameObject>(identifier: string): T {\r\n    return this.identifierMap.has(identifier) ? <T>this.identifierMap.get(identifier) : null;\r\n  }\r\n\r\n  getObjects<T extends GameObject>(constructor: Type<T>): T[]\r\n  getObjects<T extends GameObject>(aliasName: string): T[]\r\n  getObjects<T extends GameObject>(): T[]\r\n  getObjects<T extends GameObject>(arg?: any): T[] {\r\n    if (arg == null) {\r\n      return <T[]>Array.from(this.identifierMap.values());\r\n    }\r\n    let aliasName = '';\r\n    if (typeof arg === 'string') {\r\n      aliasName = arg;\r\n    } else {\r\n      aliasName = arg.aliasName;\r\n    }\r\n\r\n    return this.aliasNameMap.has(aliasName) ? <T[]>Array.from(this.aliasNameMap.get(aliasName).values()) : [];\r\n  }\r\n\r\n  update(identifier: string)\r\n  update(context: ObjectContext)\r\n  update(arg: any) {\r\n    let context: ObjectContext = null;\r\n    if (typeof arg === 'string') {\r\n      let object: GameObject = this.get(arg);\r\n      if (object) context = object.toContext();\r\n    } else {\r\n      context = arg;\r\n    }\r\n    if (!context) return;\r\n\r\n    if (this.queueMap.has(context.identifier)) {\r\n      let queue = this.queueMap.get(context.identifier);\r\n      for (let key in context) {\r\n        queue[key] = context[key];\r\n      }\r\n      return;\r\n    }\r\n    EventSystem.call('UPDATE_GAME_OBJECT', context);\r\n    this.queueMap.set(context.identifier, context);\r\n    if (this.updateInterval === null) {\r\n      this.updateInterval = setZeroTimeout(this.updateCallback);\r\n    }\r\n  }\r\n\r\n  private updateQueue() {\r\n    this.queueMap.clear();\r\n    this.updateInterval = null;\r\n  }\r\n\r\n  isDeleted(identifier: string) {\r\n    let timeStamp = this.garbageMap.get(identifier);\r\n    return timeStamp != null;\r\n  }\r\n\r\n  getCatalog(): CatalogItem[] {\r\n    let catalog: CatalogItem[] = [];\r\n    for (let object of this.identifierMap.values()) {\r\n      catalog.push({ identifier: object.identifier, version: object.version });\r\n    }\r\n    return catalog;\r\n  }\r\n\r\n  clearDeleteHistory() {\r\n    this.garbageMap.clear();\r\n  }\r\n\r\n  private garbageCollection(garbage: ObjectContext)\r\n  private garbageCollection(ms: number)\r\n  private garbageCollection(arg: any) {\r\n    if (typeof arg === 'number') {\r\n      if (this.garbageCollectionInterval === null) {\r\n        this.garbageCollectionInterval = setTimeout(() => { this.garbageCollectionInterval = null }, 1000);\r\n        this._garbageCollection(arg);\r\n      }\r\n    } else {\r\n      this.garbageMap.delete(arg.identifier);\r\n    }\r\n  }\r\n\r\n  private _garbageCollection(ms: number) {\r\n    let nowDate = performance.now();\r\n\r\n    let checkLength = this.garbageMap.size - 100000;\r\n    if (checkLength < 1) return;\r\n\r\n    let entries = this.garbageMap.entries();\r\n    while (checkLength < 1) {\r\n      checkLength--;\r\n      let item = entries.next();\r\n      if (item.done) break;\r\n\r\n      let identifier = item.value[0];\r\n      let timeStamp = item.value[1];\r\n\r\n      if (timeStamp + ms < nowDate) continue;\r\n      this.garbageMap.delete(identifier);\r\n    }\r\n  }\r\n}\r\n","import { Component, ElementRef, Input, OnDestroy, OnInit, ViewChild } from '@angular/core';\r\nimport GameSystemClass from 'bcdice/lib/game_system';\r\nimport { ChatPalette } from '@udonarium/chat-palette';\r\nimport { ChatTab } from '@udonarium/chat-tab';\r\nimport { ObjectStore } from '@udonarium/core/synchronize-object/object-store';\r\nimport { EventSystem } from '@udonarium/core/system';\r\nimport { DiceBot } from '@udonarium/dice-bot';\r\nimport { GameCharacter } from '@udonarium/game-character';\r\nimport { PeerCursor } from '@udonarium/peer-cursor';\r\nimport { ChatInputComponent } from 'component/chat-input/chat-input.component';\r\nimport { ChatMessageService } from 'service/chat-message.service';\r\nimport { PanelService } from 'service/panel.service';\r\n\r\n@Component({\r\n  selector: 'chat-palette',\r\n  templateUrl: './chat-palette.component.html',\r\n  styleUrls: ['./chat-palette.component.css']\r\n})\r\nexport class ChatPaletteComponent implements OnInit, OnDestroy {\r\n  @ViewChild('chatInput', { static: true }) chatInputComponent: ChatInputComponent;\r\n  @ViewChild('chatPalette') chatPaletteElementRef: ElementRef<HTMLSelectElement>;\r\n  @Input() character: GameCharacter = null;\r\n\r\n  get palette(): ChatPalette { return this.character.chatPalette; }\r\n\r\n  private _gameType: string = '';\r\n  get gameType(): string { return this._gameType };\r\n  set gameType(gameType: string) {\r\n    this._gameType = gameType;\r\n    if (this.character.chatPalette) this.character.chatPalette.dicebot = gameType;\r\n  };\r\n\r\n  get sendFrom(): string { return this.character.identifier; }\r\n  set sendFrom(sendFrom: string) {\r\n    this.onSelectedCharacter(sendFrom);\r\n  }\r\n\r\n  chatTabidentifier: string = '';\r\n  text: string = '';\r\n  sendTo: string = '';\r\n\r\n  isEdit: boolean = false;\r\n  editPalette: string = '';\r\n\r\n  private doubleClickTimer: NodeJS.Timer = null;\r\n\r\n  get diceBotInfos() { return DiceBot.diceBotInfos }\r\n\r\n  get chatTab(): ChatTab { return ObjectStore.instance.get<ChatTab>(this.chatTabidentifier); }\r\n  get myPeer(): PeerCursor { return PeerCursor.myCursor; }\r\n  get otherPeers(): PeerCursor[] { return ObjectStore.instance.getObjects(PeerCursor); }\r\n\r\n  constructor(\r\n    public chatMessageService: ChatMessageService,\r\n    private panelService: PanelService\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    Promise.resolve().then(() => this.updatePanelTitle());\r\n    this.chatTabidentifier = this.chatMessageService.chatTabs ? this.chatMessageService.chatTabs[0].identifier : '';\r\n    this.gameType = this.character.chatPalette ? this.character.chatPalette.dicebot : '';\r\n    EventSystem.register(this)\r\n      .on('DELETE_GAME_OBJECT', -1000, event => {\r\n        if (this.character && this.character.identifier === event.data.identifier) {\r\n          this.panelService.close();\r\n        }\r\n        if (this.chatTabidentifier === event.data.identifier) {\r\n          this.chatTabidentifier = this.chatMessageService.chatTabs ? this.chatMessageService.chatTabs[0].identifier : '';\r\n        }\r\n      });\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    EventSystem.unregister(this);\r\n    if (this.isEdit) this.toggleEditMode();\r\n  }\r\n\r\n  updatePanelTitle() {\r\n    this.panelService.title = this.character.name + ' のチャットパレット';\r\n  }\r\n\r\n  onSelectedCharacter(identifier: string) {\r\n    if (this.isEdit) this.toggleEditMode();\r\n    let object = ObjectStore.instance.get(identifier);\r\n    if (object instanceof GameCharacter) {\r\n      this.character = object;\r\n      let gameType = this.character.chatPalette ? this.character.chatPalette.dicebot : '';\r\n      if (0 < gameType.length) this.gameType = gameType;\r\n    }\r\n    this.updatePanelTitle();\r\n  }\r\n\r\n  resizeChatInput() {\r\n    this.chatInputComponent.kickCalcFitHeight();\r\n  }\r\n\r\n  chatTabSwitchRelative(direction: number) {\r\n    let chatTabs = this.chatMessageService.chatTabs;\r\n    let index = chatTabs.findIndex((elm) => elm.identifier == this.chatTabidentifier);\r\n    if (index < 0) { return; }\r\n\r\n    let nextIndex: number;\r\n    if (index == chatTabs.length - 1 && direction == 1) {\r\n      nextIndex = 0;\r\n    } else if (index == 0 && direction == -1) {\r\n      nextIndex = chatTabs.length - 1;\r\n    } else {\r\n      nextIndex = index + direction;\r\n    }\r\n    this.chatTabidentifier = chatTabs[nextIndex].identifier;\r\n  }\r\n\r\n  selectPalette(line: string) {\r\n    let multiLine = line.replace(/\\\\n/g, '\\n');\r\n    this.text = multiLine;\r\n  }\r\n\r\n  clickPalette(line: string) {\r\n    let multiLine = line.replace(/\\\\n/g, '\\n');\r\n    if (this.doubleClickTimer && this.text === multiLine) {\r\n      clearTimeout(this.doubleClickTimer);\r\n      this.doubleClickTimer = null;\r\n      this.chatInputComponent.sendChat(null);\r\n    } else {\r\n      this.text = multiLine;\r\n      this.doubleClickTimer = setTimeout(() => { this.doubleClickTimer = null }, 400);\r\n    }\r\n  }\r\n\r\n  sendChat(value: { text: string, gameSystem: GameSystemClass, sendFrom: string, sendTo: string ,tachieNum: number, messColor:string}) {\r\n    if (this.chatTab) {\r\n      let text = this.palette.evaluate(value.text, this.character.rootDataElement);\r\n      this.chatMessageService.sendMessage(this.chatTab, text, value.gameSystem, value.sendFrom, value.sendTo, value.tachieNum, value.messColor);\r\n      // this.chatMessageService.sendMessage(this.chatTab, text, value.gameType, value.sendFrom, value.sendTo);\r\n    }\r\n  }\r\n\r\n  resetPaletteSelect() {\r\n    if (!this.chatPaletteElementRef.nativeElement) return;\r\n    this.chatPaletteElementRef.nativeElement.selectedIndex = -1;\r\n  }\r\n\r\n  toggleEditMode() {\r\n    this.isEdit = this.isEdit ? false : true;\r\n    if (this.isEdit) {\r\n      this.editPalette = this.palette.value + '';\r\n    } else {\r\n      this.palette.setPalette(this.editPalette);\r\n    }\r\n  }\r\n}\r\n","<div class=\"flex-container\">\r\n  <div style=\"flex-grow: 0;\">\r\n    <form>\r\n      <div class=\"chat-tab\">\r\n        <label *ngFor=\"let chatTab of chatMessageService.chatTabs\">\r\n          <input name=\"chat-tab\" type=\"radio\" value=\"{{chatTab.identifier}}\" ng-control=\"options\" [(ngModel)]=\"chatTabidentifier\">\r\n          <div>{{chatTab.name}}<badge *ngIf=\"chatTab.hasUnread\" class=\"badge\" [count]=\"chatTab.unreadLength\"></badge></div>\r\n        </label>\r\n      </div>\r\n    </form>\r\n    <chat-input [onlyCharacters]=\"true\" [chatTabidentifier]=\"chatTabidentifier\"\r\n    [(gameType)]=\"gameType\" [(sendFrom)]=\"sendFrom\" [(text)]=\"text\"\r\n    (chat)=\"sendChat($event)\" (tabSwitch)=\"chatTabSwitchRelative($event)\" #chatInput></chat-input>\r\n    <div *ngIf=\"isEdit\" class=\"edit-info\"><i class=\"material-icons\" style=\"vertical-align: bottom; size:0.8rem;\">info_outline</i> 對話組合版編輯中</div>\r\n  </div>\r\n  <div *ngIf=\"!isEdit\" style=\"flex-grow: 1; height: 0; min-height: 100px;\">\r\n    <select class=\"palette\" style=\"overflow-y: auto;\" size=\"5\" (input)=\"selectPalette($event.target.value)\" (click)=\"clickPalette($event.target.value)\" (focusout)=\"resizeChatInput()\" #chatPalette>\r\n      <ng-container *ngIf=\"palette\">\r\n        <option *ngFor=\"let palette of palette.getPalette()\" value=\"{{palette}}\">{{palette}}</option>\r\n      </ng-container>\r\n    </select>\r\n  </div>\r\n  <div *ngIf=\"isEdit\" style=\"flex-grow: 1; height: 0; min-height: 100px;\">\r\n    <textarea class=\"palette\" style=\"resize: none;\" [(ngModel)]=\"editPalette\" placeholder=\"チャットパレット\"></textarea>\r\n  </div>\r\n  <div style=\"flex-grow: 0;\">\r\n    <button type=\"submit\" (click)=\"toggleEditMode()\">\r\n      <span *ngIf=\"!isEdit\">編輯對話組合版</span>\r\n      <span *ngIf=\"isEdit\">確定對話組合版</span>\r\n    </button>\r\n  </div>\r\n</div>\r\n","import * as MessagePack from 'msgpack-lite';\r\n\r\nimport { compressAsync, decompressAsync } from '../util/compress';\r\nimport { setZeroTimeout } from '../util/zero-timeout';\r\nimport { Connection, ConnectionCallback } from './connection';\r\nimport { PeerContext } from './peer-context';\r\nimport { SkyWayDataConnection } from './skyway-data-connection';\r\n\r\n// @types/skywayを使用すると@types/webrtcが定義エラーになるので代替定義\r\ndeclare var Peer;\r\ndeclare module PeerJs {\r\n  export type Peer = any;\r\n  export type DataConnection = any;\r\n}\r\n\r\ninterface DataContainer {\r\n  data: Uint8Array;\r\n  peers?: string[];\r\n  ttl: number;\r\n  isCompressed?: boolean;\r\n}\r\n\r\nexport class SkyWayConnection implements Connection {\r\n  get peerId(): string { return this.peerContext ? this.peerContext.peerId : '???'; }\r\n\r\n  private _peerIds: string[] = [];\r\n  get peerIds(): string[] { return this._peerIds }\r\n\r\n  peerContext: PeerContext;\r\n  readonly peerContexts: PeerContext[] = [];\r\n  readonly callback: ConnectionCallback = new ConnectionCallback();\r\n  bandwidthUsage: number = 0;\r\n\r\n  private key: string = '';\r\n  private peer: PeerJs.Peer;\r\n  private connections: SkyWayDataConnection[] = [];\r\n\r\n  private listAllPeersCache: string[] = [];\r\n  private httpRequestInterval: number = performance.now() + 500;\r\n\r\n  private queue: Promise<any> = Promise.resolve();\r\n\r\n  private relayingPeerIds: Map<string, string[]> = new Map();\r\n  private maybeUnavailablePeerIds: Set<string> = new Set();\r\n\r\n  open(peerId: string)\r\n  open(userId: string, roomId: string, roomName: string, password: string)\r\n  open(...args: any[]) {\r\n    console.log('open', args);\r\n    if (args.length === 0) {\r\n      this.peerContext = PeerContext.create(PeerContext.generateId());\r\n    } else if (args.length === 1) {\r\n      this.peerContext = PeerContext.create(args[0]);\r\n    } else {\r\n      this.peerContext = PeerContext.create(args[0], args[1], args[2], args[3]);\r\n    }\r\n    this.openPeer();\r\n  }\r\n\r\n  close() {\r\n    if (this.peer) this.peer.destroy();\r\n    this.disconnectAll();\r\n    this.peer = null;\r\n    this.peerContext = null;\r\n  }\r\n\r\n  connect(peerId: string): boolean {\r\n    if (!this.shouldConnect(peerId)) return false;\r\n\r\n    let conn: SkyWayDataConnection = new SkyWayDataConnection(this.peer.connect(peerId, {\r\n      serialization: 'none',\r\n      metadata: { sendFrom: this.peerId }\r\n    }));\r\n\r\n    this.openDataConnection(conn);\r\n    return true;\r\n  }\r\n\r\n  private shouldConnect(peerId: string): boolean {\r\n    if (!this.peerContext || !this.peer || !this.peerId) {\r\n      console.log('connect() is Fail. IDが割り振られるまで待てや');\r\n      return false;\r\n    }\r\n\r\n    if (this.peerId === peerId) {\r\n      console.log('connect() is Fail. ' + peerId + ' is me.');\r\n      return false;\r\n    }\r\n\r\n    if (this.findDataConnection(peerId)) {\r\n      console.log('connect() is Fail. <' + peerId + '> is already connecting.');\r\n      return false;\r\n    }\r\n\r\n    if (peerId && peerId.length && peerId !== this.peerId) return true;\r\n    return false;\r\n  }\r\n\r\n  disconnect(peerId: string): boolean {\r\n    let conn = this.findDataConnection(peerId)\r\n    if (!conn) return false;\r\n    this.closeDataConnection(conn);\r\n    return true;\r\n  }\r\n\r\n  disconnectAll() {\r\n    console.log('<closeAllDataConnection()>');\r\n    for (let conn of this.connections.concat()) {\r\n      this.closeDataConnection(conn);\r\n    }\r\n  }\r\n\r\n  send(data: any, sendTo?: string) {\r\n    if (this.connections.length < 1) return;\r\n    let container: DataContainer = {\r\n      data: MessagePack.encode(data),\r\n      ttl: 1\r\n    }\r\n\r\n    let byteLength = container.data.byteLength;\r\n    this.bandwidthUsage += byteLength;\r\n    this.queue = this.queue.then(() => new Promise((resolve, reject) => {\r\n      setZeroTimeout(async () => {\r\n        if (1 * 1024 < container.data.byteLength) {\r\n          let compressed = await compressAsync(container.data);\r\n          if (compressed.byteLength < container.data.byteLength) {\r\n            container.data = compressed;\r\n            container.isCompressed = true;\r\n          }\r\n        }\r\n        if (sendTo) {\r\n          this.sendUnicast(container, sendTo);\r\n        } else {\r\n          this.sendBroadcast(container);\r\n        }\r\n        this.bandwidthUsage -= byteLength;\r\n        return resolve();\r\n      });\r\n    }));\r\n  }\r\n\r\n  private sendUnicast(container: DataContainer, sendTo: string) {\r\n    container.ttl = 0;\r\n    let conn = this.findDataConnection(sendTo);\r\n    if (conn && conn.open) conn.send(container);\r\n  }\r\n\r\n  private sendBroadcast(container: DataContainer) {\r\n    for (let conn of this.connections) {\r\n      if (conn.open) conn.send(container);\r\n    }\r\n  }\r\n\r\n  setApiKey(key: string) {\r\n    if (this.key !== key) console.log('Key Change');\r\n    this.key = key;\r\n  }\r\n\r\n  listAllPeers(): Promise<string[]> {\r\n    return new Promise((resolve, reject) => {\r\n      if (!this.peer) return resolve([]);\r\n      let now = performance.now();\r\n      if (now < this.httpRequestInterval) {\r\n        console.warn('httpRequestInterval... ' + (this.httpRequestInterval - now));\r\n        resolve(this.listAllPeersCache.concat());\r\n        return;\r\n      }\r\n      this.httpRequestInterval = now + 6000;\r\n      this.peer.listAllPeers((list) => {\r\n        this.listAllPeersCache = list.concat();\r\n        resolve(list);\r\n      });\r\n    });\r\n  }\r\n\r\n  private openPeer() {\r\n    if (this.peer) {\r\n      console.warn('It is already opened.');\r\n      this.close();\r\n    }\r\n    let peer = new Peer(this.peerContext.peerId, { key: this.key });// SkyWay\r\n    peer.on('open', id => {\r\n      console.log('My peer ID is: ' + id);\r\n      if (!this.peerContext || this.peerContext.peerId !== id) {\r\n        this.peerContext = PeerContext.parse(id);\r\n      }\r\n      this.peerContext.isOpen = true;\r\n      console.log('My peer Context', this.peerContext);\r\n      if (this.callback.onOpen) this.callback.onOpen(this.peerId);\r\n    });\r\n\r\n    peer.on('connection', conn => {\r\n      this.openDataConnection(new SkyWayDataConnection(conn));\r\n    });\r\n\r\n    peer.on('error', err => {\r\n      console.error('<' + this.peerId + '> ' + err.type + ' => ' + err.message);\r\n      let errorMessage = this.getSkyWayErrorMessage(err.type);\r\n      errorMessage += ': ' + err.message;\r\n      switch (err.type) {\r\n        case 'peer-unavailable':\r\n        case 'invalid-id':\r\n        case 'invalid-key':\r\n        case 'list-error':\r\n        case 'server-error':\r\n          break;\r\n        case 'disconnected':\r\n        case 'socket-error':\r\n        default:\r\n          if (this.peerContext && this.peerContext.isOpen) {\r\n            if (this.callback.onClose) this.callback.onClose(this.peerId);\r\n          }\r\n          break;\r\n      }\r\n      if (this.callback.onError) this.callback.onError(this.peerId, errorMessage);\r\n    });\r\n    this.peer = peer;\r\n  }\r\n\r\n  private openDataConnection(conn: SkyWayDataConnection) {\r\n    if (this.addDataConnection(conn) === false) return;\r\n\r\n    let index = this.connections.indexOf(conn);\r\n    let context: PeerContext = null;\r\n    if (0 <= index) context = this.peerContexts[index];\r\n\r\n    conn.on('data', data => {\r\n      this.onData(conn, data);\r\n    });\r\n    conn.on('open', () => {\r\n      this.maybeUnavailablePeerIds.delete(conn.remoteId);\r\n      if (context) context.isOpen = true;\r\n      this.updatePeerList();\r\n      if (this.callback.onConnect) this.callback.onConnect(conn.remoteId);\r\n    });\r\n    conn.on('close', () => {\r\n      this.maybeUnavailablePeerIds.add(conn.remoteId);\r\n      this.closeDataConnection(conn);\r\n      if (this.callback.onDisconnect) this.callback.onDisconnect(conn.remoteId);\r\n    });\r\n    conn.on('error', err => {\r\n      this.maybeUnavailablePeerIds.add(conn.remoteId);\r\n      this.closeDataConnection(conn);\r\n      if (this.callback.onError) this.callback.onError(conn.remoteId, err);\r\n    });\r\n  }\r\n\r\n  private closeDataConnection(conn: SkyWayDataConnection) {\r\n    conn.close();\r\n    let index = this.connections.indexOf(conn);\r\n    if (0 <= index) {\r\n      console.log(conn.remoteId + ' is えんいー' + 'index:' + index + ' length:' + this.connections.length);\r\n      this.connections.splice(index, 1);\r\n      this.peerContexts.splice(index, 1);\r\n    }\r\n    this.relayingPeerIds.delete(conn.remoteId);\r\n    this.relayingPeerIds.forEach(peerIds => {\r\n      let index = peerIds.indexOf(conn.remoteId);\r\n      if (0 <= index) peerIds.splice(index, 1);\r\n    });\r\n    console.log('<close()> Peer:' + conn.remoteId + ' length:' + this.connections.length + ':' + this.peerContexts.length);\r\n    this.updatePeerList();\r\n  }\r\n\r\n  private addDataConnection(conn: SkyWayDataConnection): boolean {\r\n    let existConn = this.findDataConnection(conn.remoteId);\r\n    if (existConn !== null) {\r\n      console.log('add() is Fail. ' + conn.remoteId + ' is already connecting.');\r\n      if (existConn !== conn) {\r\n        if (existConn.metadata.sendFrom < conn.metadata.sendFrom) {\r\n          this.closeDataConnection(conn);\r\n        } else {\r\n          this.closeDataConnection(existConn);\r\n          this.addDataConnection(conn);\r\n          return true;\r\n        }\r\n      }\r\n      return false;\r\n    }\r\n    this.connections.push(conn);\r\n    this.peerContexts.push(PeerContext.parse(conn.remoteId));\r\n    console.log('<add()> Peer:' + conn.remoteId + ' length:' + this.connections.length);\r\n    return true;\r\n  }\r\n\r\n  private findDataConnection(peerId: string): SkyWayDataConnection {\r\n    for (let conn of this.connections) {\r\n      if (conn.remoteId === peerId) {\r\n        return conn;\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n\r\n  private onData(conn: SkyWayDataConnection, container: DataContainer) {\r\n    if (container.peers && 0 < container.peers.length) this.onUpdatePeerList(conn, container);\r\n    if (0 < container.ttl) this.onRelay(conn, container);\r\n    if (this.callback.onData) {\r\n      let byteLength = container.data.byteLength;\r\n      this.bandwidthUsage += byteLength;\r\n      this.queue = this.queue.then(() => new Promise((resolve, reject) => {\r\n        setZeroTimeout(async () => {\r\n          let data = container.isCompressed ? await decompressAsync(container.data) : container.data;\r\n          this.callback.onData(conn.remoteId, MessagePack.decode(data));\r\n          this.bandwidthUsage -= byteLength;\r\n          return resolve();\r\n        });\r\n      }));\r\n    }\r\n  }\r\n\r\n  private onRelay(conn: SkyWayDataConnection, container: DataContainer) {\r\n    container.ttl--;\r\n\r\n    let relayingPeerIds: string[] = this.relayingPeerIds.get(conn.remoteId);\r\n    if (relayingPeerIds == null) return;\r\n\r\n    for (let peerId of relayingPeerIds) {\r\n      let conn = this.findDataConnection(peerId);\r\n      if (conn && conn.open) {\r\n        console.log('<' + peerId + '> 転送しなきゃ・・・');\r\n        conn.send(container);\r\n      }\r\n    }\r\n  }\r\n\r\n  private onUpdatePeerList(conn: SkyWayDataConnection, container: DataContainer) {\r\n    let relayingPeerIds: string[] = [];\r\n    let unknownPeerIds: string[] = [];\r\n\r\n    let diff = diffArray(this._peerIds, container.peers);\r\n    relayingPeerIds = diff.diff1;\r\n    unknownPeerIds = diff.diff2;\r\n    this.relayingPeerIds.set(conn.remoteId, relayingPeerIds);\r\n    container.peers = container.peers.concat(relayingPeerIds);\r\n\r\n    if (unknownPeerIds.length) {\r\n      for (let peerId of unknownPeerIds) {\r\n        if (!this.maybeUnavailablePeerIds.has(peerId) && this.connect(peerId)) {\r\n          console.log('auto connect to unknown Peer <' + peerId + '>');\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  private updatePeerList(): string[] {\r\n    let peerIds: string[] = [];\r\n    for (let conn of this.connections) {\r\n      if (conn.open) peerIds.push(conn.remoteId);\r\n    }\r\n    peerIds.push(this.peerId);\r\n    peerIds.sort(function (a, b) {\r\n      if (a > b) return 1;\r\n      if (a < b) return -1;\r\n      return 0;\r\n    });\r\n\r\n    this._peerIds = peerIds;\r\n\r\n    console.log('<update()>', peerIds);\r\n    this.notifyPeerList();\r\n    return peerIds;\r\n  }\r\n\r\n  private notifyPeerList() {\r\n    if (this.connections.length < 1) return;\r\n    let container: DataContainer = {\r\n      data: MessagePack.encode([]),\r\n      peers: this._peerIds,\r\n      ttl: 1\r\n    }\r\n    this.sendBroadcast(container);\r\n  }\r\n\r\n  private getSkyWayErrorMessage(errType: string): string {\r\n    switch (errType) {\r\n      case 'peer-unavailable':\r\n        return 'そのPeer IDは利用できません。'\r\n      case 'invalid-id':\r\n        return 'Peer IDが不正です。'\r\n      case 'invalid-key':\r\n        return 'SkyWay APIキーが無効です。';\r\n      case 'list-error':\r\n        return 'SkyWay APIキーのREST APIが許可されてません。';\r\n      case 'server-error':\r\n        return 'SkyWayのシグナリングサーバからPeer一覧を取得できませんでした。';\r\n      case 'disconnected':\r\n        return 'SkyWayのシグナリングサーバに接続されていません。';\r\n      case 'socket-error':\r\n        return 'SkyWayのシグナリングサーバとの接続が失われました。';\r\n      default:\r\n        return 'SkyWayに関する不明なエラーが発生しました(' + errType + ')';\r\n    }\r\n  }\r\n}\r\n\r\nfunction diffArray<T>(array1: T[], array2: T[]): { diff1: T[], diff2: T[] } {\r\n  let diff1: T[] = [];\r\n  let diff2: T[] = [];\r\n\r\n  let includesInArray1: boolean = false;\r\n  let includesInArray2: boolean = false;\r\n\r\n  for (let item of array1.concat(array2)) {\r\n    includesInArray1 = array1.includes(item);\r\n    includesInArray2 = array2.includes(item);\r\n    if (includesInArray1 && !includesInArray2) {\r\n      diff1.push(item);\r\n    } else if (!includesInArray1 && includesInArray2) {\r\n      diff2.push(item);\r\n    }\r\n  }\r\n  return { diff1: diff1, diff2: diff2 };\r\n}\r\n","import { EventSystem } from '../system';\r\nimport { ResettableTimeout } from '../system/util/resettable-timeout';\r\n\r\ntype PeerId = string;\r\ntype ObjectIdentifier = string;\r\n\r\nexport interface SynchronizeRequest {\r\n  identifier: string;\r\n  version: number;\r\n  holderIds: string[];\r\n  ttl: number;\r\n}\r\n\r\nexport class SynchronizeTask {\r\n  private static key: any = {};\r\n  private static tasksMap: Map<ObjectIdentifier, SynchronizeTask[]> = new Map();\r\n\r\n  onsynchronize: (task: SynchronizeTask, identifier: string) => void;\r\n  onfinish: (task: SynchronizeTask) => void;\r\n  ontimeout: (task: SynchronizeTask, remainedRequests: SynchronizeRequest[]) => void;\r\n\r\n  private requestMap: Map<ObjectIdentifier, SynchronizeRequest> = new Map();\r\n  private timeoutTimer: ResettableTimeout;\r\n\r\n  private constructor(readonly peerId: PeerId) { }\r\n\r\n  static create(peerId: PeerId, requests: SynchronizeRequest[]): SynchronizeTask {\r\n    if (SynchronizeTask.tasksMap.size < 1) {\r\n      EventSystem.register(SynchronizeTask.key)\r\n        .on('DISCONNECT_PEER', event => {\r\n          SynchronizeTask.onDisconnect(event.data.peerId);\r\n        })\r\n        .on('UPDATE_GAME_OBJECT', event => {\r\n          if (event.isSendFromSelf) return;\r\n          SynchronizeTask.onUpdate(event.data.identifier);\r\n        })\r\n        .on('DELETE_GAME_OBJECT', event => {\r\n          if (event.isSendFromSelf) return;\r\n          SynchronizeTask.onUpdate(event.data.identifier);\r\n        });\r\n    }\r\n    let task = new SynchronizeTask(peerId);\r\n    task.initialize(requests);\r\n    return task;\r\n  }\r\n\r\n  private cancel() {\r\n    if (this.timeoutTimer) this.timeoutTimer.clear();\r\n    this.timeoutTimer = null;\r\n    this.onsynchronize = this.onfinish = this.ontimeout = null;\r\n\r\n    for (let request of this.requestMap.values()) {\r\n      this.deleteTasksMap(request.identifier);\r\n    };\r\n\r\n    this.requestMap.clear();\r\n  }\r\n\r\n  private initialize(requests: SynchronizeRequest[]) {\r\n    for (let request of requests) {\r\n      request.ttl--;\r\n      this.requestMap.set(request.identifier, request);\r\n      let tasks: SynchronizeTask[] = SynchronizeTask.tasksMap.get(request.identifier);\r\n      if (tasks == null) tasks = [];\r\n      tasks.push(this);\r\n      SynchronizeTask.tasksMap.set(request.identifier, tasks);\r\n      let sendTo = this.peerId != null && request.holderIds.includes(this.peerId) ? this.peerId : null;\r\n      EventSystem.call('REQUEST_GAME_OBJECT', request.identifier, sendTo);\r\n    }\r\n\r\n    if (this.requestMap.size < 1) {\r\n      setTimeout(() => this.finish());\r\n      return;\r\n    }\r\n\r\n    this.resetTimeout();\r\n  }\r\n\r\n  private finish() {\r\n    if (this.onfinish) this.onfinish(this);\r\n    this.cancel();\r\n  }\r\n\r\n  private timeout() {\r\n    if (this.ontimeout) this.ontimeout(this, Array.from(this.requestMap.values()).filter(request => 0 <= request.ttl));\r\n    this.finish();\r\n  }\r\n\r\n  private static onDisconnect(peerId: PeerId) {\r\n    for (let tasks of SynchronizeTask.tasksMap.values()) {\r\n      for (let task of tasks.concat()) {\r\n        if (task.peerId === peerId) task.timeout();\r\n      }\r\n    }\r\n    if (SynchronizeTask.tasksMap.size < 1) EventSystem.unregister(SynchronizeTask.key);\r\n  }\r\n\r\n  private static onUpdate(identifier: ObjectIdentifier) {\r\n    if (!SynchronizeTask.tasksMap.has(identifier)) return;\r\n    let tasks = SynchronizeTask.tasksMap.get(identifier);\r\n    for (let task of tasks.concat()) {\r\n      task.onUpdate(identifier);\r\n    }\r\n    if (SynchronizeTask.tasksMap.size < 1) EventSystem.unregister(SynchronizeTask.key);\r\n  }\r\n\r\n  private onUpdate(identifier: ObjectIdentifier) {\r\n    this.requestMap.delete(identifier);\r\n    if (this.onsynchronize) this.onsynchronize(this, identifier);\r\n    if (this.requestMap.size < 1) {\r\n      this.finish();\r\n    } else {\r\n      this.resetTimeout();\r\n    }\r\n  }\r\n\r\n  private deleteTasksMap(identifier: ObjectIdentifier) {\r\n    let tasks = SynchronizeTask.tasksMap.get(identifier);\r\n    let index = tasks.indexOf(this);\r\n    if (-1 < index) tasks.splice(index, 1);\r\n    if (tasks.length < 1) SynchronizeTask.tasksMap.delete(identifier);\r\n  }\r\n\r\n  private resetTimeout() {\r\n    if (this.timeoutTimer == null) this.timeoutTimer = new ResettableTimeout(() => this.timeout(), 30 * 1000);\r\n    this.timeoutTimer.reset();\r\n  }\r\n}\r\n","import { ImageFile } from './core/file-storage/image-file';\r\nimport { SyncObject, SyncVar } from './core/synchronize-object/decorator';\r\nimport { Network } from './core/system';\r\nimport { DataElement } from './data-element';\r\nimport { PeerCursor } from './peer-cursor';\r\nimport { TabletopObject } from './tabletop-object';\r\nimport { moveToTopmost } from './tabletop-object-util';\r\n\r\nexport enum CardState {\r\n  FRONT,\r\n  BACK,\r\n}\r\n\r\n@SyncObject('card')\r\nexport class Card extends TabletopObject {\r\n  @SyncVar() state: CardState = CardState.FRONT;\r\n  @SyncVar() rotate: number = 0;\r\n  @SyncVar() owner: string = '';\r\n  @SyncVar() zindex: number = 0;\r\n\r\n  get isVisibleOnTable(): boolean { return this.location.name === 'table' && (!this.parentIsAssigned || this.parentIsDestroyed); }\r\n\r\n  get name(): string { return this.getCommonValue('name', ''); }\r\n  get size(): number { return this.getCommonValue('size', 2); }\r\n  set size(size: number) { this.setCommonValue('size', size); }\r\n  get frontImage(): ImageFile { return this.getImageFile('front'); }\r\n  get backImage(): ImageFile { return this.getImageFile('back'); }\r\n\r\n  get imageFile(): ImageFile { return this.isVisible ? this.frontImage : this.backImage; }\r\n\r\n  get ownerName(): string {\r\n    let object = PeerCursor.findByUserId(this.owner);\r\n    return object ? object.name : '';\r\n  }\r\n\r\n  get hasOwner(): boolean { return 0 < this.owner.length; }\r\n  get isHand(): boolean { return Network.peerContext.userId === this.owner; }\r\n  get isFront(): boolean { return this.state === CardState.FRONT; }\r\n  get isVisible(): boolean { return this.isHand || this.isFront; }\r\n\r\n  faceUp() {\r\n    this.state = CardState.FRONT;\r\n    this.owner = '';\r\n  }\r\n\r\n  faceDown() {\r\n    this.state = CardState.BACK;\r\n    this.owner = '';\r\n  }\r\n\r\n  toTopmost() {\r\n    moveToTopmost(this, ['card-stack']);\r\n  }\r\n\r\n  static create(name: string, fornt: string, back: string, size: number = 2, identifier?: string): Card {\r\n    let object: Card = null;\r\n\r\n    if (identifier) {\r\n      object = new Card(identifier);\r\n    } else {\r\n      object = new Card();\r\n    }\r\n    object.createDataElements();\r\n\r\n    object.commonDataElement.appendChild(DataElement.create('name', name, {}, 'name_' + object.identifier));\r\n    object.commonDataElement.appendChild(DataElement.create('size', size, {}, 'size_' + object.identifier));\r\n    object.imageDataElement.appendChild(DataElement.create('front', fornt, { type: 'image' }, 'front_' + object.identifier));\r\n    object.imageDataElement.appendChild(DataElement.create('back', back, { type: 'image' }, 'back_' + object.identifier));\r\n    object.initialize();\r\n\r\n    return object;\r\n  }\r\n}","import { ChangeDetectionStrategy, ChangeDetectorRef, Component, Input, OnDestroy, OnInit } from '@angular/core';\r\n\r\nimport { Card } from '@udonarium/card';\r\nimport { CardStack } from '@udonarium/card-stack';\r\nimport { ObjectNode } from '@udonarium/core/synchronize-object/object-node';\r\nimport { ObjectStore } from '@udonarium/core/synchronize-object/object-store';\r\nimport { EventSystem, Network } from '@udonarium/core/system';\r\nimport { PresetSound, SoundEffect } from '@udonarium/sound-effect';\r\n\r\nimport { GameCharacterSheetComponent } from 'component/game-character-sheet/game-character-sheet.component';\r\n\r\nimport { PanelOption, PanelService } from 'service/panel.service';\r\n\r\n@Component({\r\n  selector: 'card-stack-list',\r\n  templateUrl: './card-stack-list.component.html',\r\n  styleUrls: ['./card-stack-list.component.css'],\r\n  changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class CardStackListComponent implements OnInit, OnDestroy {\r\n  @Input() cardStack: CardStack = null;\r\n\r\n  owner: string = Network.peerContext.userId;\r\n\r\n  constructor(\r\n    private panelService: PanelService,\r\n    private changeDetector: ChangeDetectorRef,\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    Promise.resolve().then(() => this.panelService.title = this.cardStack.name + ' のカード一覧');\r\n    EventSystem.register(this)\r\n      .on('UPDATE_GAME_OBJECT', -1000, event => {\r\n        let object = ObjectStore.instance.get(event.data.identifier);\r\n        if (!this.cardStack || !object) return;\r\n        if ((this.cardStack === object)\r\n          || (object instanceof ObjectNode && this.cardStack.contains(object))) {\r\n          this.changeDetector.markForCheck();\r\n        }\r\n        if (event.data.identifier === this.cardStack.identifier && this.cardStack.owner !== this.owner) {\r\n          this.panelService.close();\r\n        }\r\n      })\r\n      .on('DELETE_GAME_OBJECT', -1000, event => {\r\n        if (this.cardStack && this.cardStack.identifier === event.data.identifier) {\r\n          this.panelService.close();\r\n        }\r\n      });\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    EventSystem.unregister(this);\r\n    if (this.cardStack.owner === this.owner) {\r\n      this.cardStack.owner = '';\r\n    }\r\n  }\r\n\r\n  drawCard(card: Card) {\r\n    card.parent.removeChild(card);\r\n    card.location.x = this.cardStack.location.x + 100 + (Math.random() * 50);\r\n    card.location.y = this.cardStack.location.y + 25 + (Math.random() * 50);\r\n    card.location.name = this.cardStack.location.name;\r\n    card.rotate += this.cardStack.rotate;\r\n    if (360 < card.rotate) card.rotate -= 360;\r\n    card.toTopmost();\r\n    SoundEffect.play(PresetSound.cardDraw);\r\n  }\r\n\r\n  up(card: Card) {\r\n    let parent = card.parent;\r\n    let index: number = parent.children.indexOf(card);\r\n    if (0 < index) {\r\n      let prev = parent.children[index - 1];\r\n      parent.insertBefore(card, prev);\r\n    }\r\n  }\r\n\r\n  down(card: Card) {\r\n    let parent = card.parent;\r\n    let index: number = parent.children.indexOf(card);\r\n    if (index < parent.children.length - 1) {\r\n      let next = parent.children[index + 1];\r\n      parent.insertBefore(next, card);\r\n    }\r\n  }\r\n\r\n  close(needShuffle: boolean = false) {\r\n    if (needShuffle) {\r\n      this.cardStack.shuffle();\r\n      EventSystem.call('SHUFFLE_CARD_STACK', { identifier: this.cardStack.identifier });\r\n      SoundEffect.play(PresetSound.cardShuffle);\r\n    }\r\n    this.panelService.close();\r\n  }\r\n\r\n  showDetail(gameObject: Card) {\r\n    let coordinate = {\r\n      x: this.panelService.left,\r\n      y: this.panelService.top\r\n    };\r\n    let title = 'カード設定';\r\n    if (gameObject.name.length) title += ' - ' + gameObject.name;\r\n    let option: PanelOption = { title: title, left: coordinate.x + 10, top: coordinate.y + 20, width: 600, height: 600 };\r\n    let component = this.panelService.open<GameCharacterSheetComponent>(GameCharacterSheetComponent, option);\r\n    component.tabletopObject = gameObject;\r\n  }\r\n\r\n  trackByCard(index: number, card: Card) {\r\n    return card.identifier;\r\n  }\r\n}\r\n","<div>\r\n  <button (click)=\"close(true)\">シャッフルしてウィンドウを閉じる</button>\r\n  <hr/>\r\n  <div *ngFor=\"let card of cardStack.cards; trackBy: trackByCard\" class=\"box\">\r\n    <div class=\"image-box\" [appTooltip]=\"card\">\r\n      <div class=\"image contain\" [style.background-image]=\"'url(' + card?.frontImage?.url + ')' | safe: 'style' \"></div>\r\n      <div class=\"image contain\" [style.background-image]=\"'url(' + card?.backImage?.url + ')' | safe: 'style' \"></div>\r\n    </div>\r\n    <div style=\"display: inline-block;\">\r\n      <button type=\"submit\" (click)=\"drawCard(card)\">山札から出す</button>\r\n      <button (click)=\"showDetail(card)\"><i class=\"material-icons\" style=\"font-size: 1.1em; vertical-align: text-bottom;\">settings</i>編集</button>\r\n      <br>\r\n      <button (click)=\"up(card)\">↑</button>\r\n      <button (click)=\"down(card)\">↓</button>\r\n      <br>\r\n    </div>\r\n  </div>\r\n</div>\r\n","import { AfterViewInit, Component, ElementRef, OnDestroy } from '@angular/core';\r\n\r\nimport { EventSystem, Network } from '@udonarium/core/system';\r\n\r\n@Component({\r\n  selector: 'network-indicator',\r\n  templateUrl: './network-indicator.component.html',\r\n  styleUrls: ['./network-indicator.component.css']\r\n})\r\nexport class NetworkIndicatorComponent implements AfterViewInit, OnDestroy {\r\n  private timer: NodeJS.Timer = null;\r\n  private needRepeat = false;\r\n\r\n  constructor(private elementRef: ElementRef, ) { }\r\n\r\n  ngAfterViewInit() {\r\n    let repeatFunc = () => {\r\n      if (this.needRepeat) {\r\n        this.timer = setTimeout(repeatFunc, 650);\r\n        this.needRepeat = false;\r\n      } else {\r\n        this.timer = null;\r\n        this.elementRef.nativeElement.style.display = 'none';\r\n      }\r\n    };\r\n\r\n    EventSystem.register(this)\r\n      .on('*', event => {\r\n        if (this.needRepeat || Network.bandwidthUsage < 3 * 1024) return;\r\n        if (this.timer === null) {\r\n          this.elementRef.nativeElement.style.display = 'block';\r\n          this.timer = setTimeout(repeatFunc, 650);\r\n        } else {\r\n          this.needRepeat = true;\r\n        }\r\n      });\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    EventSystem.unregister(this);\r\n  }\r\n}\r\n","<div class=\"sk-cube-grid\">\r\n  <div class=\"sk-cube sk-cube1\"></div>\r\n  <div class=\"sk-cube sk-cube2\"></div>\r\n  <div class=\"sk-cube sk-cube3\"></div>\r\n  <div class=\"sk-cube sk-cube4\"></div>\r\n  <div class=\"sk-cube sk-cube5\"></div>\r\n  <div class=\"sk-cube sk-cube6\"></div>\r\n  <div class=\"sk-cube sk-cube7\"></div>\r\n  <div class=\"sk-cube sk-cube8\"></div>\r\n  <div class=\"sk-cube sk-cube9\"></div>\r\n  <div class=\"sk-title\">sync</div>\r\n</div>","import { ImageFile } from './core/file-storage/image-file';\r\nimport { SyncObject, SyncVar } from './core/synchronize-object/decorator';\r\nimport { Network } from './core/system';\r\nimport { DataElement } from './data-element';\r\nimport { PeerCursor } from './peer-cursor';\r\nimport { TabletopObject } from './tabletop-object';\r\n\r\nexport enum DiceType {\r\n  D2,\r\n  D4,\r\n  D6,\r\n  D8,\r\n  D10,\r\n  D10_10TIMES,\r\n  D12,\r\n  D20\r\n}\r\n\r\n@SyncObject('dice-symbol')\r\nexport class DiceSymbol extends TabletopObject {\r\n  @SyncVar() face: string = '0';\r\n  @SyncVar() owner: string = '';\r\n  @SyncVar() rotate: number = 0;\r\n\r\n  get name(): string { return this.getCommonValue('name', ''); }\r\n  set name(name: string) { this.setCommonValue('name', name); }\r\n  get size(): number { return this.getCommonValue('size', 1); }\r\n  set size(size: number) { this.setCommonValue('size', size); }\r\n\r\n  get faces(): string[] { return this.imageDataElement.children.map(element => (element as DataElement).name); }\r\n  get imageFile(): ImageFile {\r\n    return this.isVisible ?\r\n      this.getImageFile(this.face)\r\n      : this.faces.length\r\n        ? this.getImageFile(this.faces[0])\r\n        : null;\r\n  }\r\n\r\n  get ownerName(): string {\r\n    let object = PeerCursor.findByUserId(this.owner);\r\n    return object ? object.name : '';\r\n  }\r\n  get hasOwner(): boolean { return 0 < this.owner.length; }\r\n  get isMine(): boolean { return Network.peerContext.userId === this.owner; }\r\n  get isVisible(): boolean { return !this.hasOwner || this.isMine; }\r\n\r\n  diceRoll(): string {\r\n    let faces = this.faces;\r\n    this.face = 0 < faces.length ? faces[Math.floor(Math.random() * faces.length)] : '';\r\n    return this.face;\r\n  }\r\n\r\n  setDicetype(type: DiceType) {\r\n    this.makeDiceFace(type);\r\n  }\r\n\r\n  private makeDiceFace(type: DiceType, identifierSuffix?: string): DataElement[] {\r\n    let sided: number = 1;\r\n    let faces: DataElement[] = [];\r\n    let faceGeneratorFunc: (index: number) => string = index => (index + 1) + '';\r\n\r\n    switch (type) {\r\n      case DiceType.D2:\r\n        sided = 2;\r\n        break;\r\n      case DiceType.D4:\r\n        sided = 4;\r\n        break;\r\n      case DiceType.D6:\r\n        sided = 6;\r\n        break;\r\n      case DiceType.D8:\r\n        sided = 8;\r\n        break;\r\n      case DiceType.D10_10TIMES:\r\n        faceGeneratorFunc = index => (index + 1) + '0';\r\n      case DiceType.D10:\r\n        sided = 10;\r\n        break;\r\n      case DiceType.D12:\r\n        sided = 12;\r\n        break;\r\n      case DiceType.D20:\r\n        sided = 20;\r\n        break;\r\n      default:\r\n        sided = 2;\r\n        break;\r\n    }\r\n\r\n    for (let i = 0; i < sided; i++) {\r\n      let faceName = faceGeneratorFunc(i);\r\n      let identifier = identifierSuffix != null ? faceName + '_' + identifierSuffix : null;\r\n      faces.push(DataElement.create(faceName, '', { type: 'image' }, identifier));\r\n    }\r\n\r\n    this.imageDataElement.children.forEach(element => element.destroy());\r\n    faces.forEach(element => this.imageDataElement.appendChild(element));\r\n    this.face = faces[0].name;\r\n\r\n    return faces;\r\n  }\r\n\r\n  static create(name: string, type: DiceType, size: number, identifier?: string): DiceSymbol {\r\n    let object: DiceSymbol = identifier ? new DiceSymbol(identifier) : new DiceSymbol();\r\n\r\n    object.createDataElements();\r\n    object.commonDataElement.appendChild(DataElement.create('name', name, {}, 'name_' + object.identifier));\r\n    object.commonDataElement.appendChild(DataElement.create('size', size, {}, 'size_' + object.identifier));\r\n\r\n    object.makeDiceFace(type, object.identifier);\r\n    object.initialize();\r\n    return object;\r\n  }\r\n}\r\n","import { CSSNumber } from './css-number';\r\nimport { IPoint2D, IPoint3D } from './transform';\r\n\r\nexport interface IMatrix3D {\r\n  m11: number;\r\n  m12: number;\r\n  m13: number;\r\n  m14: number;\r\n  m21: number;\r\n  m22: number;\r\n  m23: number;\r\n  m24: number;\r\n  m31: number;\r\n  m32: number;\r\n  m33: number;\r\n  m34: number;\r\n  m41: number;\r\n  m42: number;\r\n  m43: number;\r\n  m44: number;\r\n}\r\n\r\nexport class Matrix3D {\r\n  m11: number = 1;\r\n  m12: number = 0;\r\n  m13: number = 0;\r\n  m14: number = 0;\r\n  m21: number = 0;\r\n  m22: number = 1;\r\n  m23: number = 0;\r\n  m24: number = 0;\r\n  m31: number = 0;\r\n  m32: number = 0;\r\n  m33: number = 1;\r\n  m34: number = 0;\r\n  m41: number = 0;\r\n  m42: number = 0;\r\n  m43: number = 0;\r\n  m44: number = 1;\r\n\r\n  constructor() {\r\n  }\r\n\r\n  static create(element: HTMLElement, style: CSSStyleDeclaration = null, ret = new Matrix3D()): Matrix3D {\r\n    if (element && element.ownerDocument)\r\n      return ret.setCSS((style || window.getComputedStyle(element)).transform);\r\n    return ret.identity();\r\n  }\r\n\r\n  setData(data: number[]): Matrix3D {\r\n    if (data == null)\r\n      return;\r\n\r\n    let l = data.length;\r\n    if (l == 16) {\r\n      this.m11 = data[0];\r\n      this.m12 = data[1];\r\n      this.m13 = data[2];\r\n      this.m14 = data[3];\r\n      this.m21 = data[4];\r\n      this.m22 = data[5];\r\n      this.m23 = data[6];\r\n      this.m24 = data[7];\r\n      this.m31 = data[8];\r\n      this.m32 = data[9];\r\n      this.m33 = data[10];\r\n      this.m34 = data[11];\r\n      this.m41 = data[12];\r\n      this.m42 = data[13];\r\n      this.m43 = data[14];\r\n      this.m44 = data[15];\r\n    } else if (l == 6) {\r\n      this.m11 = data[0];\r\n      this.m12 = data[1];\r\n      this.m13 = 0;\r\n      this.m14 = 0;\r\n      this.m21 = data[2];\r\n      this.m22 = data[3];\r\n      this.m23 = 0;\r\n      this.m24 = 0;\r\n      this.m31 = 0;\r\n      this.m32 = 0;\r\n      this.m33 = 1;\r\n      this.m34 = 0;\r\n      this.m41 = data[4];\r\n      this.m42 = data[5];\r\n      this.m43 = 0;\r\n      this.m44 = 1;\r\n    } else if (l == 9) {\r\n      this.m11 = data[0];\r\n      this.m12 = data[1];\r\n      this.m13 = 0;\r\n      this.m14 = data[2];\r\n      this.m21 = data[3];\r\n      this.m22 = data[4];\r\n      this.m23 = 0;\r\n      this.m24 = data[5];\r\n      this.m31 = 0;\r\n      this.m32 = 0;\r\n      this.m33 = 1;\r\n      this.m34 = 0;\r\n      this.m41 = data[6];\r\n      this.m42 = data[7];\r\n      this.m43 = 0;\r\n      this.m44 = data[8];\r\n    }\r\n\r\n    return this;\r\n  }\r\n\r\n  identity(): Matrix3D {\r\n    this.m11 = 1;\r\n    this.m12 = 0;\r\n    this.m13 = 0;\r\n    this.m14 = 0;\r\n    this.m21 = 0;\r\n    this.m22 = 1;\r\n    this.m23 = 0;\r\n    this.m24 = 0;\r\n    this.m31 = 0;\r\n    this.m32 = 0;\r\n    this.m33 = 1;\r\n    this.m34 = 0;\r\n    this.m41 = 0;\r\n    this.m42 = 0;\r\n    this.m43 = 0;\r\n    this.m44 = 1;\r\n    return this;\r\n  }\r\n\r\n  scalar(scalar: number): Matrix3D {\r\n    this.m11 *= scalar;\r\n    this.m12 *= scalar;\r\n    this.m13 *= scalar;\r\n    this.m14 *= scalar;\r\n    this.m21 *= scalar;\r\n    this.m22 *= scalar;\r\n    this.m23 *= scalar;\r\n    this.m24 *= scalar;\r\n    this.m31 *= scalar;\r\n    this.m32 *= scalar;\r\n    this.m33 *= scalar;\r\n    this.m34 *= scalar;\r\n    this.m41 *= scalar;\r\n    this.m42 *= scalar;\r\n    this.m43 *= scalar;\r\n    this.m44 *= scalar;\r\n\r\n    return this;\r\n  }\r\n\r\n  //based on http://code.metager.de/source/xref/mozilla/B2G/gecko/gfx/thebes/gfx3DMatrix.cpp#651\r\n  unproject(point: IPoint2D, ret: IPoint3D = { x: 0, y: 0, z: 0, w: 1 }): IPoint3D {\r\n    let x = point.x * this.m11 + point.y * this.m21 + this.m41;\r\n    let y = point.x * this.m12 + point.y * this.m22 + this.m42;\r\n    let z = point.x * this.m13 + point.y * this.m23 + this.m43;\r\n    let w = point.x * this.m14 + point.y * this.m24 + this.m44;\r\n\r\n    let qx = x + this.m31;\r\n    let qy = y + this.m32;\r\n    let qz = z + this.m33;\r\n    let qw = w + this.m34;\r\n\r\n    if (w == 0) w = 0.0001;\r\n    x /= w;\r\n    y /= w;\r\n    z /= w;\r\n\r\n    if (qw == 0) qw = 0.0001;\r\n    qx /= qw;\r\n    qy /= qw;\r\n    qz /= qw;\r\n\r\n    let wz = qz - z;\r\n    if (wz == 0) {\r\n      ret.x = x;\r\n      ret.y = y;\r\n      ret.z = z;\r\n      ret.w = z;\r\n      return ret;\r\n    }\r\n\r\n    let t = -z / wz;\r\n    x += t * (qx - x);\r\n    y += t * (qy - y);\r\n\r\n    ret.x = x;\r\n    ret.y = y;\r\n    ret.z = z;\r\n    ret.w = z;\r\n    return ret;\r\n  }\r\n\r\n  project(point: IPoint3D, ret: IPoint3D = { x: 0, y: 0, z: 0, w: 1 }): IPoint3D {\r\n    let z = point.z;\r\n    let w = point.x * this.m14 + point.y * this.m24 + z * this.m34 + this.m44;\r\n    let x = point.x * this.m11 + point.y * this.m21 + z * this.m31 + this.m41;\r\n    let y = point.x * this.m12 + point.y * this.m22 + z * this.m32 + this.m42;\r\n\r\n    if (w == 0) w = 0.0001;\r\n\r\n    x /= w;\r\n    y /= w;\r\n\r\n    if (w < 0) {\r\n      x -= this.m41;\r\n      y -= this.m42;\r\n      x *= 1 / w;\r\n      y *= 1 / w;\r\n      x += this.m41;\r\n      y += this.m42;\r\n    }\r\n\r\n    ret.x = x;\r\n    ret.y = y;\r\n    ret.z = z;\r\n    ret.w = z;\r\n    return ret;\r\n  }\r\n\r\n  append(b: IMatrix3D): Matrix3D {\r\n    return Matrix3D.multiply(this, b, this);\r\n  }\r\n\r\n  setPosition(position: IPoint3D): Matrix3D {\r\n    this.m41 = position.x;\r\n    this.m42 = position.y;\r\n    this.m43 = position.z;\r\n    return this;\r\n  }\r\n\r\n  getPosition(ret: IPoint3D = { x: 0, y: 0, z: 0, w: 1 }): IPoint3D {\r\n    ret.x = this.m41;\r\n    ret.y = this.m42;\r\n    ret.z = this.m43;\r\n    return ret;\r\n  }\r\n  static makePosition(position: IPoint3D, ret = new Matrix3D()): Matrix3D {\r\n    ret.identity();\r\n    ret.setPosition(position);\r\n    return ret;\r\n  }\r\n\r\n  appendPosition(position: IPoint3D): Matrix3D\r\n  appendPosition(x: number, y: number, z: number): Matrix3D\r\n  appendPosition(...args: any[]): Matrix3D {\r\n    let position;\r\n    if (args.length === 1) {\r\n      position = args[0];\r\n    } else {\r\n      position = { x: args[0], y: args[1], z: args[2], w: 1 };\r\n    }\r\n    return this.append(Matrix3D.makePosition(position, Matrix3D.MATRIX3D));\r\n  }\r\n\r\n  static makePerspective(perspective: number, ret = new Matrix3D()): Matrix3D {\r\n    ret.identity();\r\n    ret.m34 = perspective ? -(1 / perspective) : 0;\r\n    return ret;\r\n  }\r\n\r\n  appendPerspective(perspective: number): Matrix3D {\r\n    if (!perspective)\r\n      return this;\r\n    return this.append(Matrix3D.makePerspective(perspective, Matrix3D.MATRIX3D));\r\n  }\r\n\r\n  /**\r\n  * Inverts the matrix.\r\n  * -> based on http://www.euclideanspace.com/maths/algebra/matrix/functions/inverse/fourD/index.htm\r\n  * -> based on https://github.com/mrdoob/three.js/blob/master/src/math/Matrix4.js\r\n  */\r\n  invert(target?: Matrix3D): Matrix3D {\r\n    target = target || this;\r\n    let data: number[] = [];\r\n\r\n    let n11 = this.m11, n12 = this.m12, n13 = this.m13, n14 = this.m14;\r\n    let n21 = this.m21, n22 = this.m22, n23 = this.m23, n24 = this.m24;\r\n    let n31 = this.m31, n32 = this.m32, n33 = this.m33, n34 = this.m34;\r\n    let n41 = this.m41, n42 = this.m42, n43 = this.m43, n44 = this.m44;\r\n\r\n    data[0] = n23 * n34 * n42 - n24 * n33 * n42 + n24 * n32 * n43 - n22 * n34 * n43 - n23 * n32 * n44 + n22 * n33 * n44;\r\n    data[1] = n14 * n33 * n42 - n13 * n34 * n42 - n14 * n32 * n43 + n12 * n34 * n43 + n13 * n32 * n44 - n12 * n33 * n44;\r\n    data[2] = n13 * n24 * n42 - n14 * n23 * n42 + n14 * n22 * n43 - n12 * n24 * n43 - n13 * n22 * n44 + n12 * n23 * n44;\r\n    data[3] = n14 * n23 * n32 - n13 * n24 * n32 - n14 * n22 * n33 + n12 * n24 * n33 + n13 * n22 * n34 - n12 * n23 * n34;\r\n\r\n    let det = n11 * data[0] + n21 * data[1] + n31 * data[2] + n41 * data[3];\r\n    if (det == 0) {\r\n      console.warn('Can not invert matrix, determinant is 0');\r\n      return this;\r\n    }\r\n\r\n    data[4] = n24 * n33 * n41 - n23 * n34 * n41 - n24 * n31 * n43 + n21 * n34 * n43 + n23 * n31 * n44 - n21 * n33 * n44;\r\n    data[5] = n13 * n34 * n41 - n14 * n33 * n41 + n14 * n31 * n43 - n11 * n34 * n43 - n13 * n31 * n44 + n11 * n33 * n44;\r\n    data[6] = n14 * n23 * n41 - n13 * n24 * n41 - n14 * n21 * n43 + n11 * n24 * n43 + n13 * n21 * n44 - n11 * n23 * n44;\r\n    data[7] = n13 * n24 * n31 - n14 * n23 * n31 + n14 * n21 * n33 - n11 * n24 * n33 - n13 * n21 * n34 + n11 * n23 * n34;\r\n    data[8] = n22 * n34 * n41 - n24 * n32 * n41 + n24 * n31 * n42 - n21 * n34 * n42 - n22 * n31 * n44 + n21 * n32 * n44;\r\n    data[9] = n14 * n32 * n41 - n12 * n34 * n41 - n14 * n31 * n42 + n11 * n34 * n42 + n12 * n31 * n44 - n11 * n32 * n44;\r\n    data[10] = n12 * n24 * n41 - n14 * n22 * n41 + n14 * n21 * n42 - n11 * n24 * n42 - n12 * n21 * n44 + n11 * n22 * n44;\r\n    data[11] = n14 * n22 * n31 - n12 * n24 * n31 - n14 * n21 * n32 + n11 * n24 * n32 + n12 * n21 * n34 - n11 * n22 * n34;\r\n    data[12] = n23 * n32 * n41 - n22 * n33 * n41 - n23 * n31 * n42 + n21 * n33 * n42 + n22 * n31 * n43 - n21 * n32 * n43;\r\n    data[13] = n12 * n33 * n41 - n13 * n32 * n41 + n13 * n31 * n42 - n11 * n33 * n42 - n12 * n31 * n43 + n11 * n32 * n43;\r\n    data[14] = n13 * n22 * n41 - n12 * n23 * n41 - n13 * n21 * n42 + n11 * n23 * n42 + n12 * n21 * n43 - n11 * n22 * n43;\r\n    data[15] = n12 * n23 * n31 - n13 * n22 * n31 + n13 * n21 * n32 - n11 * n23 * n32 - n12 * n21 * n33 + n11 * n22 * n33;\r\n\r\n    target.setData(data);\r\n    target.scalar(1 / det);\r\n    return target;\r\n  }\r\n\r\n  setCSS(cssString: string): Matrix3D {\r\n    if (!cssString || cssString == 'none') return this.identity();\r\n    let trans: any = cssString.replace('matrix3d(', '').replace('matrix(', '').replace(')', '').split(',');\r\n    let l = trans.length;\r\n    for (let i = 0; i < l; ++i) {\r\n      trans[i] = CSSNumber.parse(trans[i]);\r\n    }\r\n    return this.setData(trans);\r\n  }\r\n\r\n  appendCSS(cssString: string, force2D: boolean = false): Matrix3D {\r\n    if (!cssString || cssString == 'none') return this;\r\n    if (force2D && cssString.indexOf('matrix3d') >= 0) {\r\n      return this.append(Matrix3D.MATRIX3D.setCSS(cssString).flatten());\r\n    }\r\n    return this.append(Matrix3D.MATRIX3D.setCSS(cssString));\r\n  }\r\n\r\n  flatten(): Matrix3D {\r\n    this.m31 = 0;\r\n    this.m32 = 0;\r\n    this.m33 = 1;\r\n    this.m34 = 0;\r\n    this.m44 = 1;\r\n    this.m14 = 0;\r\n    this.m24 = 0;\r\n    this.m43 = 0;\r\n    return this;\r\n  }\r\n\r\n  static multiply(a: IMatrix3D, b: IMatrix3D, ret: Matrix3D = new Matrix3D()): Matrix3D {\r\n    let m11 = a.m11 * b.m11 + a.m12 * b.m21 + a.m13 * b.m31 + a.m14 * b.m41;\r\n    let m12 = a.m11 * b.m12 + a.m12 * b.m22 + a.m13 * b.m32 + a.m14 * b.m42;\r\n    let m13 = a.m11 * b.m13 + a.m12 * b.m23 + a.m13 * b.m33 + a.m14 * b.m43;\r\n    let m14 = a.m11 * b.m14 + a.m12 * b.m24 + a.m13 * b.m34 + a.m14 * b.m44;\r\n    let m21 = a.m21 * b.m11 + a.m22 * b.m21 + a.m23 * b.m31 + a.m24 * b.m41;\r\n    let m22 = a.m21 * b.m12 + a.m22 * b.m22 + a.m23 * b.m32 + a.m24 * b.m42;\r\n    let m23 = a.m21 * b.m13 + a.m22 * b.m23 + a.m23 * b.m33 + a.m24 * b.m43;\r\n    let m24 = a.m21 * b.m14 + a.m22 * b.m24 + a.m23 * b.m34 + a.m24 * b.m44;\r\n    let m31 = a.m31 * b.m11 + a.m32 * b.m21 + a.m33 * b.m31 + a.m34 * b.m41;\r\n    let m32 = a.m31 * b.m12 + a.m32 * b.m22 + a.m33 * b.m32 + a.m34 * b.m42;\r\n    let m33 = a.m31 * b.m13 + a.m32 * b.m23 + a.m33 * b.m33 + a.m34 * b.m43;\r\n    let m34 = a.m31 * b.m14 + a.m32 * b.m24 + a.m33 * b.m34 + a.m34 * b.m44;\r\n    let m41 = a.m41 * b.m11 + a.m42 * b.m21 + a.m43 * b.m31 + a.m44 * b.m41;\r\n    let m42 = a.m41 * b.m12 + a.m42 * b.m22 + a.m43 * b.m32 + a.m44 * b.m42;\r\n    let m43 = a.m41 * b.m13 + a.m42 * b.m23 + a.m43 * b.m33 + a.m44 * b.m43;\r\n    let m44 = a.m41 * b.m14 + a.m42 * b.m24 + a.m43 * b.m34 + a.m44 * b.m44;\r\n\r\n    ret.m11 = m11;\r\n    ret.m12 = m12;\r\n    ret.m13 = m13;\r\n    ret.m14 = m14;\r\n    ret.m21 = m21;\r\n    ret.m22 = m22;\r\n    ret.m23 = m23;\r\n    ret.m24 = m24;\r\n    ret.m31 = m31;\r\n    ret.m32 = m32;\r\n    ret.m33 = m33;\r\n    ret.m34 = m34;\r\n    ret.m41 = m41;\r\n    ret.m42 = m42;\r\n    ret.m43 = m43;\r\n    ret.m44 = m44;\r\n\r\n    return ret;\r\n  }\r\n\r\n  public toString(fractionalDigits: number = 3): string {\r\n    return \"m11=\" + this.m11.toFixed(fractionalDigits)\r\n      + \"\\tm21=\" + this.m21.toFixed(fractionalDigits)\r\n      + \"\\tm31=\" + this.m31.toFixed(fractionalDigits)\r\n      + \"\\tm41=\" + this.m41.toFixed(fractionalDigits)\r\n      + \"\\nm12=\" + this.m12.toFixed(fractionalDigits)\r\n      + \"\\tm22=\" + this.m22.toFixed(fractionalDigits)\r\n      + \"\\tm32=\" + this.m32.toFixed(fractionalDigits)\r\n      + \"\\tm42=\" + this.m42.toFixed(fractionalDigits)\r\n      + \"\\nm13=\" + this.m13.toFixed(fractionalDigits)\r\n      + \"\\tm23=\" + this.m23.toFixed(fractionalDigits)\r\n      + \"\\tm33=\" + this.m33.toFixed(fractionalDigits)\r\n      + \"\\tm43=\" + this.m43.toFixed(fractionalDigits)\r\n      + \"\\nm14=\" + this.m14.toFixed(fractionalDigits)\r\n      + \"\\tm24=\" + this.m24.toFixed(fractionalDigits)\r\n      + \"\\tm34=\" + this.m34.toFixed(fractionalDigits)\r\n      + \"\\tm44=\" + this.m44.toFixed(fractionalDigits);\r\n  }\r\n  private static MATRIX3D = new Matrix3D();\r\n}","import {\r\n  AfterViewInit,\r\n  ChangeDetectionStrategy,\r\n  ChangeDetectorRef,\r\n  Component,\r\n  Input,\r\n  OnDestroy,\r\n  OnInit,\r\n} from '@angular/core';\r\nimport { EventSystem, Network } from '@udonarium/core/system';\r\nimport { ModalService } from 'service/modal.service';\r\nimport { PanelService } from 'service/panel.service';\r\nimport { TabletopObject } from '@udonarium/tabletop-object';\r\nimport { GameCharacter } from '@udonarium/game-character';\r\nimport { PeerCursor } from '@udonarium/peer-cursor';\r\n\r\n@Component({\r\n  selector: 'chat-color-setting',\r\n  templateUrl: './chat-color-setting.component.html',\r\n  styleUrls: ['./chat-color-setting.component.css'],\r\n  changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class ChatColorSettingComponent implements OnInit, OnDestroy, AfterViewInit {\r\n\r\n  @Input() isAllowedEmpty: boolean = false;\r\n  @Input() tabletopObject: GameCharacter = null;\r\n\r\n  get myPeer(): PeerCursor { return PeerCursor.myCursor; }\r\n\r\n  changeColor( event , num ){\r\n    \r\n    if( this.tabletopObject ){\r\n      this.tabletopObject.chatColorCode[num] = event;\r\n\r\n      if( this.tabletopObject.syncDummyCounter < 2 ){\r\n        this.tabletopObject.syncDummyCounter = this.tabletopObject.syncDummyCounter + 1;\r\n      }else{\r\n        this.tabletopObject.syncDummyCounter = 0;\r\n      }\r\n      console.log('changeColor:count:'+this.tabletopObject.syncDummyCounter);\r\n    }else{\r\n      this.myPeer.chatColorCode[num] = event;\r\n    }\r\n  }\r\n\r\n  constructor(\r\n    private changeDetector: ChangeDetectorRef,\r\n    private panelService: PanelService,\r\n    private modalService: ModalService\r\n  ) {\r\n    this.isAllowedEmpty = this.modalService.option && this.modalService.option.isAllowedEmpty ? true : false;\r\n  }\r\n\r\n  ngOnInit() {\r\n  }\r\n  \r\n  chatColorCode( num : number){\r\n    if( this.tabletopObject ){\r\n      return this.tabletopObject.chatColorCode[num];\r\n    }else{\r\n      return this.myPeer.chatColorCode[num];\r\n    }\r\n\r\n  }\r\n  \r\n  ngAfterViewInit() {\r\n  }\r\n\r\n  ngOnDestroy() {\r\n//    EventSystem.unregister(this);\r\n  }\r\n\r\n}\r\n","<div id=\"file-list\">\r\n  <div class=\"table\">\r\n    <div class=\"table-cell\">\r\n      <div>第1色</div>\r\n      <input type=\"color\" name=\"color01\" list=\"color-list_01\" (change)=\"changeColor($event.target.value,0)\" value=\"{{this.chatColorCode(0)}}\">\r\n      <datalist id=\"color-list_01\">\r\n        <option value=\"#000000\">\r\n        <option value=\"#FF0000\">\r\n        <option value=\"#999999\">\r\n        <option value=\"#990000\">\r\n        <option value=\"#FF6633\">\r\n\r\n        <option value=\"#669933\">\r\n        <option value=\"#00CC33\">\r\n        <option value=\"#009966\">\r\n        <option value=\"#33CCFF\">\r\n        <option value=\"#0099FF\">\r\n\r\n        <option value=\"#3366FF\">\r\n        <option value=\"#003399\">\r\n        <option value=\"#9933CC\">\r\n        <option value=\"#663366\">\r\n        <option value=\"#FF66FF\">\r\n      </datalist>\r\n    </div>\r\n\r\n    <div class=\"table-cell\">\r\n      <div>第2色</div>\r\n      <input type=\"color\" name=\"color02\" list=\"color-list_02\"  (change)=\"changeColor($event.target.value,1)\" value=\"{{this.chatColorCode(1)}}\">\r\n      <datalist id=\"color-list_02\">\r\n        <option value=\"#000000\">\r\n        <option value=\"#FF0000\">\r\n        <option value=\"#999999\">\r\n        <option value=\"#990000\">\r\n        <option value=\"#FF6633\">\r\n\r\n        <option value=\"#669933\">\r\n        <option value=\"#00CC33\">\r\n        <option value=\"#009966\">\r\n        <option value=\"#33CCFF\">\r\n        <option value=\"#0099FF\">\r\n\r\n        <option value=\"#3366FF\">\r\n        <option value=\"#003399\">\r\n        <option value=\"#9933CC\">\r\n        <option value=\"#663366\">\r\n        <option value=\"#FF66FF\">\r\n      </datalist>\r\n    </div>\r\n\r\n    <div class=\"table-cell\">\r\n      <div>第3色</div>\r\n      <input type=\"color\" name=\"color03\" list=\"color-list_03\" (change)=\"changeColor($event.target.value,2)\" value=\"{{this.chatColorCode(2)}}\">\r\n      <datalist id=\"color-list_03\">\r\n        <option value=\"#000000\">\r\n        <option value=\"#FF0000\">\r\n        <option value=\"#999999\">\r\n        <option value=\"#990000\">\r\n        <option value=\"#FF6633\">\r\n\r\n        <option value=\"#669933\">\r\n        <option value=\"#00CC33\">\r\n        <option value=\"#009966\">\r\n        <option value=\"#33CCFF\">\r\n        <option value=\"#0099FF\">\r\n\r\n        <option value=\"#3366FF\">\r\n        <option value=\"#003399\">\r\n        <option value=\"#9933CC\">\r\n        <option value=\"#663366\">\r\n        <option value=\"#FF66FF\">\r\n      </datalist>\r\n    </div>\r\n\r\n  </div>\r\n</div>","import { AfterViewInit, Directive, ElementRef, EventEmitter, Input, NgZone, OnDestroy, Output } from '@angular/core';\r\nimport { CSSNumber } from '@udonarium/transform/css-number';\r\nimport { PointerCoordinate } from 'service/pointer-device.service';\r\n\r\nimport { HandleType, ResizeHandler } from './resize-handler';\r\n\r\ninterface BoxSize {\r\n  left: number;\r\n  top: number;\r\n  width: number;\r\n  height: number;\r\n}\r\n\r\n@Directive({\r\n  selector: '[appResizable]'\r\n})\r\nexport class ResizableDirective implements AfterViewInit, OnDestroy {\r\n  @Input('resizable.disable') isDisable: boolean = false;\r\n  @Input('resizable.bounds') boundsSelector: string = 'body';\r\n  @Input('resizable.minWidth') minWidth: number = 100;\r\n  @Input('resizable.minHeight') minHeight: number = 100\r\n\r\n  @Output('resizable.start') ostart: EventEmitter<MouseEvent | TouchEvent> = new EventEmitter();\r\n  @Output('resizable.move') onmove: EventEmitter<MouseEvent | TouchEvent> = new EventEmitter();\r\n  @Output('resizable.end') onend: EventEmitter<MouseEvent | TouchEvent> = new EventEmitter();\r\n\r\n  private handleMap = new Map<HandleType, ResizeHandler>();\r\n  private handleTypes: HandleType[] = [\r\n    HandleType.N,\r\n    HandleType.E,\r\n    HandleType.W,\r\n    HandleType.S,\r\n    HandleType.NE,\r\n    HandleType.NW,\r\n    HandleType.SE,\r\n    HandleType.SW\r\n  ];\r\n\r\n  private startPosition: BoxSize = { left: 0, top: 0, width: 0, height: 0 };\r\n\r\n  private startPointer: PointerCoordinate = { x: 0, y: 0, z: 0 };\r\n  private prevTrans: BoxSize = { left: 0, top: 0, width: 0, height: 0 };\r\n\r\n  constructor(\r\n    private ngZone: NgZone,\r\n    private elementRef: ElementRef<HTMLElement>\r\n  ) { }\r\n\r\n  ngAfterViewInit() {\r\n    this.initialize();\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.cancel();\r\n    this.destroy();\r\n  }\r\n\r\n  private initialize() {\r\n    this.ngZone.runOutsideAngular(() => {\r\n      this.handleTypes.forEach(type => {\r\n        let handle = new ResizeHandler(this.elementRef.nativeElement, type);\r\n        this.handleMap.set(type, handle);\r\n        handle.input.onStart = ev => this.onResizeStart(ev, handle);\r\n        handle.input.onMove = ev => this.onResizeMove(ev, handle);\r\n        handle.input.onEnd = ev => this.onResizeEnd(ev, handle);\r\n        handle.input.onContextMenu = ev => this.onContextMenu(ev, handle);\r\n      });\r\n    });\r\n  }\r\n\r\n  cancel() {\r\n    this.handleMap.forEach(handle => handle.input.cancel());\r\n  }\r\n\r\n  destroy() {\r\n    this.handleMap.forEach(handle => handle.input.destroy());\r\n  }\r\n\r\n  private onResizeStart(e: MouseEvent | TouchEvent, handle: ResizeHandler) {\r\n    if (this.isDisable) return this.cancel();\r\n    if ((e as MouseEvent).button === 1 || (e as MouseEvent).button === 2) return this.cancel();\r\n    this.handleMap.forEach(h => {\r\n      if (h !== handle) h.input.cancel();\r\n    });\r\n\r\n    this.startPosition = this.calcElementPosition(this.elementRef.nativeElement);\r\n    this.startPointer = handle.input.pointer;\r\n    this.prevTrans = { left: 0, top: 0, width: 0, height: 0 };\r\n\r\n    e.stopPropagation();\r\n  }\r\n\r\n  private onResizeMove(e: MouseEvent | TouchEvent, handle: ResizeHandler) {\r\n    let trans: BoxSize = {\r\n      left: 0,\r\n      top: 0,\r\n      width: handle.input.pointer.x - this.startPointer.x,\r\n      height: handle.input.pointer.y - this.startPointer.y\r\n    };\r\n\r\n    switch (handle.type) {\r\n      case HandleType.N:\r\n      case HandleType.S:\r\n        trans.width = 0;\r\n        break;\r\n      case HandleType.E:\r\n      case HandleType.W:\r\n        trans.height = 0;\r\n        break;\r\n    }\r\n\r\n    switch (handle.type) {\r\n      case HandleType.SW:\r\n        trans.left = trans.width;\r\n        trans.width *= -1;\r\n        break;\r\n      case HandleType.NE:\r\n        trans.top = trans.height;\r\n        trans.height *= -1;\r\n        break;\r\n      case HandleType.E:\r\n      case HandleType.S:\r\n      case HandleType.SE:\r\n        break;\r\n      case HandleType.N:\r\n      case HandleType.W:\r\n      case HandleType.NW:\r\n        trans.left = trans.width;\r\n        trans.top = trans.height;\r\n        trans.width *= -1;\r\n        trans.height *= -1;\r\n        break;\r\n    }\r\n\r\n    if (trans.width + this.startPosition.width < this.minWidth) {\r\n      trans.width = this.minWidth - this.startPosition.width;\r\n      trans.left = trans.left !== 0 ? -trans.width : trans.left;\r\n    }\r\n\r\n    if (trans.height + this.startPosition.height < this.minHeight) {\r\n      trans.height = this.minHeight - this.startPosition.height;\r\n      trans.top = trans.top !== 0 ? -trans.height : trans.top;\r\n    }\r\n\r\n    let diff: BoxSize = {\r\n      left: trans.left - this.prevTrans.left,\r\n      top: trans.top - this.prevTrans.top,\r\n      width: trans.width - this.prevTrans.width,\r\n      height: trans.height - this.prevTrans.height\r\n    };\r\n\r\n    let correction = this.calcCorrectionPosition(diff);\r\n    trans.left += correction.left;\r\n    trans.top += correction.top;\r\n    trans.width += correction.width;\r\n    trans.height += correction.height;\r\n\r\n    this.elementRef.nativeElement.style.left = trans.left + this.startPosition.left + 'px';\r\n    this.elementRef.nativeElement.style.top = trans.top + this.startPosition.top + 'px';\r\n    this.elementRef.nativeElement.style.width = trans.width + this.startPosition.width + 'px';\r\n    this.elementRef.nativeElement.style.height = trans.height + this.startPosition.height + 'px';\r\n\r\n    this.prevTrans = trans;\r\n    if (e.cancelable) e.preventDefault();\r\n    e.stopPropagation();\r\n  }\r\n\r\n  private onResizeEnd(e: MouseEvent | TouchEvent, handle: ResizeHandler) {\r\n    if (handle.input.isDragging && e.cancelable) e.preventDefault();\r\n    e.stopPropagation();\r\n  }\r\n\r\n  private onContextMenu(e: MouseEvent | TouchEvent, handle: ResizeHandler) {\r\n    e.stopPropagation();\r\n  }\r\n\r\n  private calcCorrectionPosition(diff: BoxSize = { left: 0, top: 0, width: 0, height: 0 }): BoxSize {\r\n    let correction: BoxSize = { left: 0, top: 0, width: 0, height: 0 };\r\n    let box = this.elementRef.nativeElement.getBoundingClientRect();\r\n    let bounds = this.elementRef.nativeElement.ownerDocument.querySelector(this.boundsSelector).getBoundingClientRect();\r\n\r\n    if (bounds.right < box.right + diff.left + diff.width) {\r\n      correction.width += bounds.right - (box.right + diff.left + diff.width);\r\n    }\r\n    if (box.left + diff.left < bounds.left) {\r\n      correction.left += bounds.left - (box.left + diff.left);\r\n      correction.width -= correction.left;\r\n    }\r\n\r\n    if (bounds.bottom < box.bottom + diff.top + diff.height) {\r\n      correction.height += bounds.bottom - (box.bottom + diff.top + diff.height);\r\n    }\r\n    if (box.top + diff.top < bounds.top) {\r\n      correction.top += bounds.top - (box.top + diff.top);\r\n      correction.height -= correction.top;\r\n    }\r\n\r\n    return correction;\r\n  }\r\n\r\n  private calcElementPosition(target: HTMLElement): BoxSize {\r\n    let css: CSSStyleDeclaration = window.getComputedStyle(target);\r\n    return {\r\n      left: CSSNumber.relation(css.left, target.parentElement.offsetWidth, target.parentElement.offsetWidth * 0.5),\r\n      top: CSSNumber.relation(css.top, target.parentElement.offsetHeight, target.parentElement.offsetHeight * 0.5),\r\n      width: CSSNumber.relation(css.width, target.parentElement.offsetWidth, target.parentElement.offsetWidth * 0.5),\r\n      height: CSSNumber.relation(css.height, target.parentElement.offsetHeight, target.parentElement.offsetHeight * 0.5),\r\n    };\r\n  }\r\n}\r\n","// base-x encoding / decoding\r\n// Copyright (c) 2018 base-x contributors\r\n// Copyright (c) 2014-2018 The Bitcoin Core developers (base58.cpp)\r\n// Distributed under the MIT software license, see the accompanying\r\n// file LICENSE or http://www.opensource.org/licenses/mit-license.php.\r\n// https://github.com/cryptocoinjs/base-x\r\n\r\nexport function base(ALPHABET: string): base.BaseConverter {\r\n  if (ALPHABET.length >= 255) throw new TypeError('Alphabet too long')\r\n\r\n  const BASE_MAP = new Uint8Array(256)\r\n  for (let j = 0; j < BASE_MAP.length; j++) {\r\n    BASE_MAP[j] = 255\r\n  }\r\n\r\n  for (let i = 0; i < ALPHABET.length; i++) {\r\n    const x = ALPHABET.charAt(i)\r\n    const xc = x.charCodeAt(0)\r\n\r\n    if (BASE_MAP[xc] !== 255) throw new TypeError(x + ' is ambiguous')\r\n    BASE_MAP[xc] = i\r\n  }\r\n\r\n  const BASE = ALPHABET.length\r\n  const LEADER = ALPHABET.charAt(0)\r\n  const FACTOR = Math.log(BASE) / Math.log(256) // log(BASE) / log(256), rounded up\r\n  const iFACTOR = Math.log(256) / Math.log(BASE) // log(256) / log(BASE), rounded up\r\n\r\n  function encode(source: Uint8Array | number[]): string {\r\n    if (source instanceof Uint8Array) {\r\n    } else if (ArrayBuffer.isView(source)) {\r\n      source = new Uint8Array(source.buffer, source.byteOffset, source.byteLength)\r\n    } else if (Array.isArray(source)) {\r\n      source = Uint8Array.from(source)\r\n    }\r\n    if (!(source instanceof Uint8Array)) throw new TypeError('Expected Uint8Array')\r\n    if (source.length === 0) return ''\r\n\r\n    // Skip & count leading zeroes.\r\n    let zeroes = 0\r\n    let length = 0\r\n    let pbegin = 0\r\n    const pend = source.length\r\n\r\n    while (pbegin !== pend && source[pbegin] === 0) {\r\n      pbegin++\r\n      zeroes++\r\n    }\r\n\r\n    // Allocate enough space in big-endian base58 representation.\r\n    const size = ((pend - pbegin) * iFACTOR + 1) >>> 0\r\n    const b58 = new Uint8Array(size)\r\n\r\n    // Process the bytes.\r\n    while (pbegin !== pend) {\r\n      let carry = source[pbegin]\r\n\r\n      // Apply \"b58 = b58 * 256 + ch\".\r\n      let i = 0\r\n      for (let it1 = size - 1; (carry !== 0 || i < length) && (it1 !== -1); it1--, i++) {\r\n        carry += (256 * b58[it1]) >>> 0\r\n        b58[it1] = (carry % BASE) >>> 0\r\n        carry = (carry / BASE) >>> 0\r\n      }\r\n\r\n      if (carry !== 0) throw new Error('Non-zero carry')\r\n      length = i\r\n      pbegin++\r\n    }\r\n\r\n    // Skip leading zeroes in base58 result.\r\n    let it2 = size - length\r\n    while (it2 !== size && b58[it2] === 0) {\r\n      it2++\r\n    }\r\n\r\n    // Translate the result into a string.\r\n    let str = LEADER.repeat(zeroes)\r\n    for (; it2 < size; ++it2) str += ALPHABET.charAt(b58[it2])\r\n\r\n    return str\r\n  }\r\n\r\n  function decodeUnsafe(source: string): Uint8Array | undefined {\r\n    if (typeof source !== 'string') throw new TypeError('Expected String')\r\n    if (source.length === 0) return new Uint8Array()\r\n\r\n    let psz = 0\r\n\r\n    // Skip leading spaces.\r\n    if (source[psz] === ' ') return\r\n\r\n    // Skip and count leading '1's.\r\n    let zeroes = 0\r\n    let length = 0\r\n    while (source[psz] === LEADER) {\r\n      zeroes++\r\n      psz++\r\n    }\r\n\r\n    // Allocate enough space in big-endian base256 representation.\r\n    const size = (((source.length - psz) * FACTOR) + 1) >>> 0 // log(58) / log(256), rounded up.\r\n    const b256 = new Uint8Array(size)\r\n\r\n    // Process the characters.\r\n    while (source[psz]) {\r\n      // Decode character\r\n      let carry = BASE_MAP[source.charCodeAt(psz)]\r\n\r\n      // Invalid character\r\n      if (carry === 255) return\r\n\r\n      let i = 0\r\n      for (let it3 = size - 1; (carry !== 0 || i < length) && (it3 !== -1); it3--, i++) {\r\n        carry += (BASE * b256[it3]) >>> 0\r\n        b256[it3] = (carry % 256) >>> 0\r\n        carry = (carry / 256) >>> 0\r\n      }\r\n\r\n      if (carry !== 0) throw new Error('Non-zero carry')\r\n      length = i\r\n      psz++\r\n    }\r\n\r\n    // Skip trailing spaces.\r\n    if (source[psz] === ' ') return\r\n\r\n    // Skip leading zeroes in b256.\r\n    let it4 = size - length\r\n    while (it4 !== size && b256[it4] === 0) {\r\n      it4++\r\n    }\r\n\r\n    const vch = new Uint8Array(zeroes + (size - it4))\r\n\r\n    let j = zeroes\r\n    while (it4 !== size) {\r\n      vch[j++] = b256[it4++]\r\n    }\r\n\r\n    return vch\r\n  }\r\n\r\n  function decode(string: string): Uint8Array {\r\n    const buffer = decodeUnsafe(string)\r\n    if (buffer) return buffer\r\n\r\n    throw new Error('Non-base' + BASE + ' character')\r\n  }\r\n\r\n  return {\r\n    encode: encode,\r\n    decodeUnsafe: decodeUnsafe,\r\n    decode: decode\r\n  }\r\n}\r\n\r\ndeclare namespace base {\r\n  interface BaseConverter {\r\n    encode(buffer: Uint8Array | number[]): string;\r\n    decodeUnsafe(string: string): Uint8Array | undefined;\r\n    decode(string: string): Uint8Array;\r\n  }\r\n}","import { Component, OnDestroy, OnInit } from '@angular/core';\r\n\r\nimport { EventSystem, Network } from '@udonarium/core/system';\r\nimport { PeerContext } from '@udonarium/core/system/network/peer-context';\r\n\r\nimport { ModalService } from 'service/modal.service';\r\nimport { PanelService } from 'service/panel.service';\r\n\r\n@Component({\r\n  selector: 'password-check',\r\n  templateUrl: './password-check.component.html',\r\n  styleUrls: ['./password-check.component.css']\r\n})\r\nexport class PasswordCheckComponent implements OnInit, OnDestroy {\r\n  password: string = '';\r\n  help: string = '';\r\n\r\n  private targetPeerContext: PeerContext = null;\r\n  title: string = '';\r\n\r\n  get peerId(): string { return Network.peerId; }\r\n  get isConnected(): boolean {\r\n    return Network.peerIds.length <= 1 ? false : true;\r\n  }\r\n\r\n  constructor(\r\n    private panelService: PanelService,\r\n    private modalService: ModalService\r\n  ) {\r\n    this.targetPeerContext = modalService.option.peerId ? PeerContext.parse(modalService.option.peerId) : PeerContext.parse('???');\r\n    this.title = modalService.option.title ? modalService.option.title : '';\r\n  }\r\n\r\n  ngOnInit() {\r\n    Promise.resolve().then(() => this.modalService.title = this.panelService.title = `パスワード ＜${this.title}＞`);\r\n    EventSystem.register(this);\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    EventSystem.unregister(this);\r\n  }\r\n\r\n  onInputChange(value: string) {\r\n    this.help = '';\r\n  }\r\n\r\n  submit() {\r\n    if (this.targetPeerContext.verifyPassword(this.password)) this.modalService.resolve(this.password);\r\n    this.help = 'パスワードが違います';\r\n  }\r\n}","<form #passwordForm=\"ngForm\">\r\n  <div>密碼: <input [(ngModel)]=\"password\" (input)=\"onInputChange($event.target.value)\" [ngModelOptions]=\"{standalone: true}\" placeholder=\"パスワード\" /></div>\r\n  <button type=\"submit\" (click)=\"submit()\">入室</button>\r\n</form>\r\n<div>\r\n  <span style=\"font-size: 12px;\">{{help}}</span>\r\n</div>","import { Component, NgZone, OnDestroy, OnInit } from '@angular/core';\r\n\r\nimport { AudioFile } from './core/file-storage/audio-file';\r\nimport { AudioPlayer } from './core/file-storage/audio-player';\r\nimport { AudioStorage } from './core/file-storage/audio-storage';\r\n\r\nimport { SyncObject, SyncVar } from './core/synchronize-object/decorator';\r\nimport { GameObject, ObjectContext } from './core/synchronize-object/game-object';\r\nimport { EventSystem } from './core/system';\r\n\r\nimport { ImageFile } from '@udonarium/core/file-storage/image-file';\r\nimport { ImageStorage } from '@udonarium/core/file-storage/image-storage';\r\n\r\nimport { CutInWindowComponent } from 'component/cut-in-window/cut-in-window.component';\r\nimport { ModalService } from 'service/modal.service';\r\n\r\n\r\n@SyncObject('cut-in')\r\nexport class CutIn extends GameObject {\r\n  @SyncVar() name: string = 'カットイン';\r\n  @SyncVar() width: number = 480;\r\n  @SyncVar() height: number = 320;\r\n  @SyncVar() originalSize: boolean = true;\r\n  @SyncVar() x_pos: number = 50;\r\n  @SyncVar() y_pos: number = 50;\r\n  \r\n  // 主にジュークボックス機能を参考に作成\r\n  @SyncVar() imageIdentifier: string = 'imageIdentifier';\r\n  @SyncVar() audioIdentifier: string = '';\r\n  @SyncVar() audioName: string = '';\r\n  @SyncVar() startTime: number = 0;\r\n  @SyncVar() tagName: string = '';\r\n  @SyncVar() selected: boolean = false;\r\n  @SyncVar() isLoop: boolean = false;\r\n  @SyncVar() chatActivate: boolean = false;\r\n\r\n  @SyncVar() outTime: number = 0;\r\n\r\n  @SyncVar() useOutUrl: boolean = false;\r\n  @SyncVar() outUrl: string = '';\r\n  @SyncVar() isPlaying: boolean = false;\r\n\r\n  get audio(): AudioFile { return AudioStorage.instance.get(this.audioIdentifier); }\r\n  private audioPlayer: AudioPlayer = new AudioPlayer();\r\n\r\n  get cutInImage(): ImageFile {\r\n    if (!this.imageIdentifier) { return ImageFile.Empty; }\r\n    const file = ImageStorage.instance.get(this.imageIdentifier);\r\n    return file ? file : ImageFile.Empty;\r\n  }\r\n\r\n  // GameObject Lifecycle\r\n  onStoreAdded() {\r\n    super.onStoreAdded();\r\n  }\r\n\r\n  // GameObject Lifecycle\r\n  onStoreRemoved() {\r\n    super.onStoreRemoved();\r\n  }\r\n\r\n}\r\n","import { setZeroTimeout } from '../util/zero-timeout';\r\nimport { Connection, ConnectionCallback } from './connection';\r\nimport { IPeerContext, PeerContext } from './peer-context';\r\nimport { SkyWayConnection } from './skyway-connection';\r\n\r\ntype QueueItem = { data: any, sendTo: string };\r\n\r\nconst unknownContext = PeerContext.parse('???');\r\n\r\nexport class Network {\r\n  private static _instance: Network\r\n  static get instance(): Network {\r\n    if (!Network._instance) Network._instance = new Network();\r\n    return Network._instance;\r\n  }\r\n\r\n  get peerId(): string { return this.connection ? this.connection.peerId : unknownContext.peerId; }\r\n  get peerIds(): string[] { return this.connection ? this.connection.peerIds.concat() : []; }\r\n\r\n  get peerContexts(): IPeerContext[] { return this.connection ? this.connection.peerContexts.concat() : []; }\r\n  get peerContext(): IPeerContext { return this.connection ? this.connection.peerContext : unknownContext; }\r\n\r\n  get isOpen(): boolean { return this.connection && this.connection.peerContext ? this.connection.peerContext.isOpen : false; }\r\n\r\n  readonly callback: ConnectionCallback = new ConnectionCallback();\r\n  get bandwidthUsage(): number { return this.connection ? this.connection.bandwidthUsage : 0; }\r\n\r\n  private key: string = '';\r\n  private connection: Connection;\r\n\r\n  private queue: Set<QueueItem> = new Set();\r\n  private sendInterval: number = null;\r\n  private sendCallback = () => { this.sendQueue(); }\r\n  private callbackUnload: any = (e) => { this.close(); };\r\n\r\n  private constructor() {\r\n    console.log('Network ready...');\r\n  }\r\n\r\n  open(peerId?: string)\r\n  open(userId: string, roomId: string, roomName: string, password: string)\r\n  open(...args: any[]) {\r\n    if (this.connection && this.connection.peerContext) {\r\n      console.warn('It is already opened.');\r\n      this.close();\r\n    }\r\n\r\n    console.log('Network open...', args);\r\n    this.connection = this.initializeConnection();\r\n    this.connection.open.apply(this.connection, args);\r\n\r\n    window.addEventListener('unload', this.callbackUnload, false);\r\n  }\r\n\r\n  private close() {\r\n    if (this.connection) this.connection.close();\r\n    this.connection = null;\r\n    window.removeEventListener('unload', this.callbackUnload, false);\r\n    console.log('Network close...');\r\n  }\r\n\r\n  connect(peerId: string): boolean {\r\n    if (this.connection) return this.connection.connect(peerId);\r\n    return false;\r\n  }\r\n\r\n  disconnect(peerId: string) {\r\n    if (!this.connection) return;\r\n    if (this.connection.disconnect(peerId)) {\r\n      console.log('<disconnectPeer()> Peer:' + peerId);\r\n      this.disconnect(peerId);\r\n    }\r\n  }\r\n\r\n  send(data: any, sendTo?: string) {\r\n    this.queue.add({ data: data, sendTo: sendTo });\r\n    if (this.sendInterval === null) {\r\n      this.sendInterval = setZeroTimeout(this.sendCallback);\r\n    }\r\n  }\r\n\r\n  private sendQueue() {\r\n    let broadcast: any[] = [];\r\n    let unicast: { [sendTo: string]: any[] } = {};\r\n    let echocast: any[] = [];\r\n\r\n    let loopCount = this.queue.size < 128 ? this.queue.size : 128;\r\n    for (let item of this.queue) {\r\n      if (loopCount <= 0) break;\r\n      loopCount--;\r\n      this.queue.delete(item);\r\n      if (item.sendTo == null) {\r\n        broadcast.push(item.data);\r\n      } else if (item.sendTo === this.peerId) {\r\n        echocast.push(item.data);\r\n      } else {\r\n        if (!(item.sendTo in unicast)) unicast[item.sendTo] = [];\r\n        unicast[item.sendTo].push(item.data);\r\n      }\r\n    }\r\n\r\n    // できるだけ一纏めにして送る\r\n    if (this.connection) {\r\n      if (broadcast.length) this.connection.send(broadcast);\r\n      for (let sendTo in unicast) this.connection.send(unicast[sendTo], sendTo);\r\n    }\r\n\r\n    // 自分自身への送信\r\n    if (this.callback.onData) {\r\n      this.callback.onData(null, broadcast);\r\n      this.callback.onData(this.peerId, echocast);\r\n    }\r\n\r\n    if (0 < this.queue.size) {\r\n      this.sendInterval = setZeroTimeout(this.sendCallback);\r\n    } else {\r\n      this.sendInterval = null;\r\n    }\r\n  }\r\n\r\n  setApiKey(key: string) {\r\n    if (this.key !== key) console.log('Key Change');\r\n    this.key = key;\r\n  }\r\n\r\n  listAllPeers(): Promise<string[]> {\r\n    return this.connection ? this.connection.listAllPeers() : Promise.resolve([]);\r\n  }\r\n\r\n  private initializeConnection(): Connection {\r\n    let store = new SkyWayConnection();\r\n    store.setApiKey(this.key);\r\n\r\n    store.callback.onOpen = (peerId) => { if (this.callback.onOpen) this.callback.onOpen(peerId); }\r\n    store.callback.onClose = (peerId) => { if (this.callback.onClose) this.callback.onClose(peerId); }\r\n    store.callback.onConnect = (peerId) => { if (this.callback.onConnect) this.callback.onConnect(peerId); }\r\n    store.callback.onDisconnect = (peerId) => { if (this.callback.onDisconnect) this.callback.onDisconnect(peerId); }\r\n    store.callback.onData = (peerId, data: any[]) => { if (this.callback.onData) this.callback.onData(peerId, data); }\r\n    store.callback.onError = (peerId, err) => { if (this.callback.onError) this.callback.onError(peerId, err); }\r\n\r\n    if (0 < this.queue.size && this.sendInterval === null) this.sendInterval = setZeroTimeout(this.sendCallback);\r\n\r\n    return store;\r\n  }\r\n}\r\n","import { GameObject } from './game-object';\r\nimport { ObjectFactory, Type } from './object-factory';\r\nimport { ObjectNode } from './object-node';\r\n\r\nexport function defineSyncObject(alias: string) {\r\n  return <T extends GameObject>(constructor: Type<T>) => {\r\n    ObjectFactory.instance.register(constructor, alias);\r\n  }\r\n}\r\n\r\nexport function defineSyncVariable() {\r\n  return <T extends GameObject>(target: T, key: string | symbol) => {\r\n    function getter() {\r\n      return this.context.syncData[key];\r\n    }\r\n\r\n    function setter(value: any) {\r\n      this.context.syncData[key] = value;\r\n      this.update();\r\n    }\r\n\r\n    Object.defineProperty(target, key, {\r\n      get: getter,\r\n      set: setter,\r\n      enumerable: true,\r\n      configurable: true\r\n    });\r\n  }\r\n}\r\n\r\nexport function defineSyncAttribute() {\r\n  return <T extends ObjectNode>(target: T, key: string | symbol) => {\r\n    function getter() {\r\n      return this.getAttribute(key);\r\n    }\r\n\r\n    function setter(value: any) {\r\n      this.setAttribute(key, value);\r\n    }\r\n\r\n    Object.defineProperty(target, key, {\r\n      get: getter,\r\n      set: setter,\r\n      enumerable: true,\r\n      configurable: true\r\n    });\r\n  }\r\n}\r\n","import { animate, keyframes, state, style, transition, trigger } from '@angular/animations';\r\nimport {\r\n  AfterViewInit,\r\n  ChangeDetectionStrategy,\r\n  ChangeDetectorRef,\r\n  Component,\r\n  ElementRef,\r\n  HostListener,\r\n  Input,\r\n  NgZone,\r\n  OnDestroy,\r\n  OnInit,\r\n} from '@angular/core';\r\nimport { Card } from '@udonarium/card';\r\nimport { CardStack } from '@udonarium/card-stack';\r\nimport { ImageFile } from '@udonarium/core/file-storage/image-file';\r\nimport { ObjectNode } from '@udonarium/core/synchronize-object/object-node';\r\nimport { ObjectStore } from '@udonarium/core/synchronize-object/object-store';\r\nimport { EventSystem, Network } from '@udonarium/core/system';\r\nimport { PeerCursor } from '@udonarium/peer-cursor';\r\nimport { PresetSound, SoundEffect } from '@udonarium/sound-effect';\r\nimport { CardStackListComponent } from 'component/card-stack-list/card-stack-list.component';\r\nimport { GameCharacterSheetComponent } from 'component/game-character-sheet/game-character-sheet.component';\r\nimport { InputHandler } from 'directive/input-handler';\r\nimport { MovableOption } from 'directive/movable.directive';\r\nimport { RotableOption } from 'directive/rotable.directive';\r\nimport { ContextMenuSeparator, ContextMenuService } from 'service/context-menu.service';\r\nimport { ImageService } from 'service/image.service';\r\nimport { PanelOption, PanelService } from 'service/panel.service';\r\nimport { PointerDeviceService } from 'service/pointer-device.service';\r\n\r\n@Component({\r\n  selector: 'card-stack',\r\n  templateUrl: './card-stack.component.html',\r\n  styleUrls: ['./card-stack.component.css'],\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n  animations: [\r\n    trigger('shuffle', [\r\n      state('active', style({ transform: '' })),\r\n      transition('* => active', [\r\n        animate('800ms ease', keyframes([\r\n          style({ transform: 'scale3d(0, 0, 0) rotateZ(0deg)', offset: 0 }),\r\n          style({ transform: 'scale3d(1.2, 1.2, 1.2) rotateZ(360deg)', offset: 0.5 }),\r\n          style({ transform: 'scale3d(0.75, 0.75, 0.75) rotateZ(520deg)', offset: 0.75 }),\r\n          style({ transform: 'scale3d(1.125, 1.125, 1.125) rotateZ(630deg)', offset: 0.875 }),\r\n          style({ transform: 'scale3d(1.0, 1.0, 1.0) rotateZ(720deg)', offset: 1.0 })\r\n        ]))\r\n      ])\r\n    ])\r\n  ]\r\n})\r\nexport class CardStackComponent implements OnInit, AfterViewInit, OnDestroy {\r\n  @Input() cardStack: CardStack = null;\r\n  @Input() is3D: boolean = false;\r\n\r\n  get name(): string { return this.cardStack.name; }\r\n  get rotate(): number { return this.cardStack.rotate; }\r\n  set rotate(rotate: number) { this.cardStack.rotate = rotate; }\r\n  get zindex(): number { return this.cardStack.zindex; }\r\n  get isShowTotal(): boolean { return this.cardStack.isShowTotal; }\r\n  get cards(): Card[] { return this.cardStack.cards; }\r\n  get isEmpty(): boolean { return this.cardStack.isEmpty; }\r\n  get size(): number {\r\n    let card = this.cardStack.topCard;\r\n    return (card ? card.size : 2);\r\n  }\r\n\r\n  get hasOwner(): boolean { return this.cardStack.hasOwner; }\r\n  get ownerName(): string { return this.cardStack.ownerName; }\r\n\r\n  get topCard(): Card { return this.cardStack.topCard; }\r\n  get imageFile(): ImageFile { return this.imageService.getSkeletonOr(this.cardStack.imageFile); }\r\n\r\n  animeState: string = 'inactive';\r\n\r\n  private iconHiddenTimer: NodeJS.Timer = null;\r\n  get isIconHidden(): boolean { return this.iconHiddenTimer != null };\r\n\r\n  gridSize: number = 50;\r\n\r\n  movableOption: MovableOption = {};\r\n  rotableOption: RotableOption = {};\r\n\r\n  private doubleClickTimer: NodeJS.Timer = null;\r\n  private doubleClickPoint = { x: 0, y: 0 };\r\n\r\n  private input: InputHandler = null;\r\n\r\n  constructor(\r\n    private ngZone: NgZone,\r\n    private contextMenuService: ContextMenuService,\r\n    private panelService: PanelService,\r\n    private elementRef: ElementRef<HTMLElement>,\r\n    private changeDetector: ChangeDetectorRef,\r\n    private imageService: ImageService,\r\n    private pointerDeviceService: PointerDeviceService\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    EventSystem.register(this)\r\n      .on('SHUFFLE_CARD_STACK', -1000, event => {\r\n        if (event.data.identifier === this.cardStack.identifier) {\r\n          this.animeState = 'active';\r\n          this.changeDetector.markForCheck();\r\n        }\r\n      })\r\n      .on('UPDATE_GAME_OBJECT', -1000, event => {\r\n        let object = ObjectStore.instance.get(event.data.identifier);\r\n        if (!this.cardStack || !object) return;\r\n        if ((this.cardStack === object)\r\n          || (object instanceof ObjectNode && this.cardStack.contains(object))\r\n          || (object instanceof PeerCursor && object.userId === this.cardStack.owner)) {\r\n          this.changeDetector.markForCheck();\r\n        }\r\n      })\r\n      .on('CARD_STACK_DECREASED', event => {\r\n        if (event.data.cardStackIdentifier === this.cardStack.identifier && this.cardStack) this.changeDetector.markForCheck();\r\n      })\r\n      .on('SYNCHRONIZE_FILE_LIST', event => {\r\n        this.changeDetector.markForCheck();\r\n      })\r\n      .on('UPDATE_FILE_RESOURE', -1000, event => {\r\n        this.changeDetector.markForCheck();\r\n      })\r\n      .on('DISCONNECT_PEER', event => {\r\n        let cursor = PeerCursor.findByPeerId(event.data.peerId);\r\n        if (!cursor || this.cardStack.owner === cursor.userId) this.changeDetector.markForCheck();\r\n      });\r\n    this.movableOption = {\r\n      tabletopObject: this.cardStack,\r\n      transformCssOffset: 'translateZ(0.15px)',\r\n      colideLayers: ['terrain']\r\n    };\r\n    this.rotableOption = {\r\n      tabletopObject: this.cardStack\r\n    };\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    this.ngZone.runOutsideAngular(() => {\r\n      this.input = new InputHandler(this.elementRef.nativeElement);\r\n    });\r\n    this.input.onStart = e => this.ngZone.run(() => this.onInputStart(e));\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.input.destroy();\r\n    EventSystem.unregister(this);\r\n  }\r\n\r\n  animationShuffleStarted(event: any) {\r\n\r\n  }\r\n\r\n  animationShuffleDone(event: any) {\r\n    this.animeState = 'inactive';\r\n    this.changeDetector.markForCheck();\r\n  }\r\n\r\n  @HostListener('carddrop', ['$event'])\r\n  onCardDrop(e) {\r\n    if (this.cardStack === e.detail || (e.detail instanceof Card === false && e.detail instanceof CardStack === false)) {\r\n      return;\r\n    }\r\n    e.stopPropagation();\r\n    e.preventDefault();\r\n\r\n    if (e.detail instanceof Card) {\r\n      let card: Card = e.detail;\r\n      let distance: number = (card.location.x - this.cardStack.location.x) ** 2 + (card.location.y - this.cardStack.location.y) ** 2 + (card.posZ - this.cardStack.posZ) ** 2;\r\n      if (distance < 50 ** 2) this.cardStack.putOnTop(card);\r\n    } else if (e.detail instanceof CardStack) {\r\n      let cardStack: CardStack = e.detail;\r\n      let distance: number = (cardStack.location.x - this.cardStack.location.x) ** 2 + (cardStack.location.y - this.cardStack.location.y) ** 2 + (cardStack.posZ - this.cardStack.posZ) ** 2;\r\n      if (distance < 25 ** 2) this.concatStack(cardStack);\r\n    }\r\n  }\r\n\r\n  startDoubleClickTimer(e) {\r\n    if (!this.doubleClickTimer) {\r\n      this.stopDoubleClickTimer();\r\n      this.doubleClickTimer = setTimeout(() => this.stopDoubleClickTimer(), e.touches ? 500 : 300);\r\n      this.doubleClickPoint = this.input.pointer;\r\n      return;\r\n    }\r\n\r\n    if (e.touches) {\r\n      this.input.onEnd = this.onDoubleClick.bind(this);\r\n    } else {\r\n      this.onDoubleClick();\r\n    }\r\n  }\r\n\r\n  stopDoubleClickTimer() {\r\n    clearTimeout(this.doubleClickTimer);\r\n    this.doubleClickTimer = null;\r\n    this.input.onEnd = null;\r\n  }\r\n\r\n  onDoubleClick() {\r\n    this.stopDoubleClickTimer();\r\n    let distance = (this.doubleClickPoint.x - this.input.pointer.x) ** 2 + (this.doubleClickPoint.y - this.input.pointer.y) ** 2;\r\n    if (distance < 10 ** 2) {\r\n      console.log('onDoubleClick !!!!');\r\n      if (this.drawCard() != null) {\r\n        SoundEffect.play(PresetSound.cardDraw);\r\n      }\r\n    }\r\n  }\r\n\r\n  @HostListener('dragstart', ['$event'])\r\n  onDragstart(e) {\r\n    e.stopPropagation();\r\n    e.preventDefault();\r\n  }\r\n\r\n  onInputStart(e: MouseEvent | TouchEvent) {\r\n    this.startDoubleClickTimer(e);\r\n    this.cardStack.toTopmost();\r\n    this.startIconHiddenTimer();\r\n\r\n    EventSystem.trigger('SELECT_TABLETOP_OBJECT', { identifier: this.cardStack.identifier, className: 'GameCharacter' });\r\n  }\r\n\r\n  @HostListener('contextmenu', ['$event'])\r\n  onContextMenu(e: Event) {\r\n    e.stopPropagation();\r\n    e.preventDefault();\r\n\r\n    if (!this.pointerDeviceService.isAllowedToOpenContextMenu) return;\r\n    let position = this.pointerDeviceService.pointers[0];\r\n    this.contextMenuService.open(position, [\r\n      {\r\n        name: '１枚引く', action: () => {\r\n          if (this.drawCard() != null) {\r\n            SoundEffect.play(PresetSound.cardDraw);\r\n          }\r\n        }\r\n      },\r\n      ContextMenuSeparator,\r\n      {\r\n        name: '一番上を表にする', action: () => {\r\n          this.cardStack.faceUp();\r\n          SoundEffect.play(PresetSound.cardDraw);\r\n        }\r\n      },\r\n      {\r\n        name: '一番上を裏にする', action: () => {\r\n          this.cardStack.faceDown();\r\n          SoundEffect.play(PresetSound.cardDraw);\r\n        }\r\n      },\r\n      ContextMenuSeparator,\r\n      {\r\n        name: 'すべて表にする', action: () => {\r\n          this.cardStack.faceUpAll();\r\n          SoundEffect.play(PresetSound.cardDraw);\r\n        }\r\n      },\r\n      {\r\n        name: 'すべて裏にする', action: () => {\r\n          this.cardStack.faceDownAll();\r\n          SoundEffect.play(PresetSound.cardDraw);\r\n        }\r\n      },\r\n      {\r\n        name: 'すべて正位置にする', action: () => {\r\n          this.cardStack.uprightAll();\r\n          SoundEffect.play(PresetSound.cardDraw);\r\n        }\r\n      },\r\n      ContextMenuSeparator,\r\n      {\r\n        name: 'シャッフル', action: () => {\r\n          this.cardStack.shuffle();\r\n          SoundEffect.play(PresetSound.cardShuffle);\r\n          EventSystem.call('SHUFFLE_CARD_STACK', { identifier: this.cardStack.identifier });\r\n        }\r\n      },\r\n      { name: 'カード一覧', action: () => { this.showStackList(this.cardStack); } },\r\n      ContextMenuSeparator,\r\n      (this.isShowTotal\r\n        ? { name: '枚数を非表示にする', action: () => { this.cardStack.isShowTotal = false; } }\r\n        : { name: '枚数を表示する', action: () => { this.cardStack.isShowTotal = true; } }\r\n      ),\r\n      { name: 'カードサイズを揃える', action: () => { if (this.cardStack.topCard) this.cardStack.unifyCardsSize(this.cardStack.topCard.size); } },\r\n      ContextMenuSeparator,\r\n      {\r\n        name: '山札を人数分に分割する', action: () => {\r\n          this.splitStack(Network.peerIds.length);\r\n          SoundEffect.play(PresetSound.cardDraw);\r\n        }\r\n      },\r\n      {\r\n        name: '山札を崩す', action: () => {\r\n          this.breakStack();\r\n          SoundEffect.play(PresetSound.cardShuffle);\r\n        }\r\n      },\r\n      ContextMenuSeparator,\r\n      { name: '詳細を表示', action: () => { this.showDetail(this.cardStack); } },\r\n      {\r\n        name: 'コピーを作る', action: () => {\r\n          let cloneObject = this.cardStack.clone();\r\n          cloneObject.location.x += this.gridSize;\r\n          cloneObject.location.y += this.gridSize;\r\n          cloneObject.owner = '';\r\n          cloneObject.toTopmost();\r\n          SoundEffect.play(PresetSound.cardPut);\r\n        }\r\n      },\r\n      {\r\n        name: '山札を削除する', action: () => {\r\n          this.cardStack.setLocation('graveyard');\r\n          this.cardStack.destroy();\r\n          SoundEffect.play(PresetSound.sweep);\r\n        }\r\n      },\r\n    ], this.name);\r\n  }\r\n\r\n  onMove() {\r\n    SoundEffect.play(PresetSound.cardPick);\r\n  }\r\n\r\n  onMoved() {\r\n    SoundEffect.play(PresetSound.cardPut);\r\n    this.ngZone.run(() => this.dispatchCardDropEvent());\r\n  }\r\n\r\n  private drawCard(): Card {\r\n    let card = this.cardStack.drawCard();\r\n    if (card) {\r\n      this.cardStack.update(); // todo\r\n      card.location.x += 100 + (Math.random() * 50);\r\n      card.location.y += 25 + (Math.random() * 50);\r\n      card.setLocation(this.cardStack.location.name);\r\n    }\r\n    return card;\r\n  }\r\n\r\n  private breakStack() {\r\n    let cards = this.cardStack.drawCardAll().reverse();\r\n    for (let card of cards) {\r\n      card.location.x += 25 - (Math.random() * 50);\r\n      card.location.y += 25 - (Math.random() * 50);\r\n      card.toTopmost();\r\n      card.setLocation(this.cardStack.location.name);\r\n    }\r\n    this.cardStack.setLocation('graveyard');\r\n    this.cardStack.destroy();\r\n  }\r\n\r\n  private splitStack(split: number) {\r\n    if (split < 2) return;\r\n    let cardStacks: CardStack[] = [];\r\n    for (let i = 0; i < split; i++) {\r\n      let cardStack = CardStack.create(this.cardStack.name);\r\n      cardStack.location.x = this.cardStack.location.x + 50 - (Math.random() * 100);\r\n      cardStack.location.y = this.cardStack.location.y + 50 - (Math.random() * 100);\r\n      cardStack.posZ = this.cardStack.posZ;\r\n      cardStack.location.name = this.cardStack.location.name;\r\n      cardStack.rotate = this.rotate;\r\n      cardStack.toTopmost();\r\n      cardStacks.push(cardStack);\r\n    }\r\n\r\n    let cards = this.cardStack.drawCardAll();\r\n    this.cardStack.setLocation('graveyard');\r\n    this.cardStack.destroy();\r\n\r\n    let num = 0;\r\n    let splitIndex = (cards.length / split) * (num + 1);\r\n    for (let i = 0; i < cards.length; i++) {\r\n      cardStacks[num].putOnBottom(cards[i]);\r\n      if (splitIndex <= i + 1) {\r\n        num++;\r\n        splitIndex = (cards.length / split) * (num + 1);\r\n      }\r\n    }\r\n  }\r\n\r\n  private concatStack(topStack: CardStack, bottomStack: CardStack = this.cardStack) {\r\n    let newCardStack = CardStack.create(topStack.name);\r\n    newCardStack.location.name = bottomStack.location.name;\r\n    newCardStack.location.x = bottomStack.location.x;\r\n    newCardStack.location.y = bottomStack.location.y;\r\n    newCardStack.posZ = bottomStack.posZ;\r\n    newCardStack.zindex = topStack.zindex;\r\n    newCardStack.rotate = bottomStack.rotate;\r\n\r\n    let bottomCards: Card[] = bottomStack.drawCardAll();\r\n    let topCards: Card[] = topStack.drawCardAll();\r\n    for (let card of topCards.concat(bottomCards)) newCardStack.putOnBottom(card);\r\n\r\n    bottomStack.setLocation('');\r\n    bottomStack.destroy();\r\n\r\n    topStack.setLocation('');\r\n    topStack.destroy();\r\n  }\r\n\r\n  private dispatchCardDropEvent() {\r\n    let element: HTMLElement = this.elementRef.nativeElement;\r\n    let parent = element.parentElement;\r\n    let children = parent.children;\r\n    let event = new CustomEvent('carddrop', { detail: this.cardStack, bubbles: true });\r\n    for (let i = 0; i < children.length; i++) {\r\n      children[i].dispatchEvent(event);\r\n    }\r\n  }\r\n\r\n  private showDetail(gameObject: CardStack) {\r\n    EventSystem.trigger('SELECT_TABLETOP_OBJECT', { identifier: gameObject.identifier, className: gameObject.aliasName });\r\n    let coordinate = this.pointerDeviceService.pointers[0];\r\n    let title = '山札設定';\r\n    if (gameObject.name.length) title += ' - ' + gameObject.name;\r\n    let option: PanelOption = { title: title, left: coordinate.x - 300, top: coordinate.y - 300, width: 600, height: 600 };\r\n    let component = this.panelService.open<GameCharacterSheetComponent>(GameCharacterSheetComponent, option);\r\n    component.tabletopObject = gameObject;\r\n  }\r\n\r\n  private showStackList(gameObject: CardStack) {\r\n    EventSystem.trigger('SELECT_TABLETOP_OBJECT', { identifier: gameObject.identifier, className: gameObject.aliasName });\r\n\r\n    let coordinate = this.pointerDeviceService.pointers[0];\r\n    let option: PanelOption = { left: coordinate.x - 200, top: coordinate.y - 300, width: 400, height: 600 };\r\n\r\n    this.cardStack.owner = Network.peerContext.userId;\r\n    let component = this.panelService.open<CardStackListComponent>(CardStackListComponent, option);\r\n    component.cardStack = gameObject;\r\n  }\r\n\r\n  private startIconHiddenTimer() {\r\n    clearTimeout(this.iconHiddenTimer);\r\n    this.iconHiddenTimer = setTimeout(() => {\r\n      this.iconHiddenTimer = null;\r\n      this.changeDetector.markForCheck();\r\n    }, 300);\r\n    this.changeDetector.markForCheck();\r\n  }\r\n}\r\n","<div class=\"component is-3d is-pointer-events-none\" [ngClass]=\"{'is-empty': isEmpty}\"\r\n  [style.width.px]=\"size * gridSize\"\r\n  appMovable [movable.option]=\"movableOption\" (movable.ondragstart)=\"onMove()\" (movable.ondragend)=\"onMoved()\">\r\n  <div class=\"component-content is-pointer-events-auto is-grab\"\r\n    appRotable [rotable.option]=\"rotableOption\" (rotable.ondragstart)=\"onMove()\" (rotable.ondragend)=\"onMoved()\">\r\n    <div *ngIf=\"topCard && imageFile\" (@shuffle.start)=\"animationShuffleStarted($event)\" (@shuffle.done)=\"animationShuffleDone($event)\"\r\n      [@shuffle]=\"animeState\">\r\n      <img class=\"card-image\" [ngStyle]=\"{'transform': 'rotateZ(' + topCard.rotate +'deg)'}\" [src]=\"imageFile.url | safe: 'resourceUrl'\">\r\n    </div>\r\n    <ng-container *ngIf=\"!isIconHidden\">\r\n      <div class=\"rotate-grab of-left-top\">\r\n        <i class=\"material-icons\">autorenew</i>\r\n      </div>\r\n      <div class=\"rotate-grab of-left-bottom\">\r\n        <i class=\"material-icons\">autorenew</i>\r\n      </div>\r\n      <div class=\"rotate-grab of-right-bottom\">\r\n        <i class=\"material-icons\">autorenew</i>\r\n      </div>\r\n      <div class=\"rotate-grab of-right-top\">\r\n        <i class=\"material-icons\">autorenew</i>\r\n      </div>\r\n    </ng-container>\r\n    <div *ngIf=\"isShowTotal\" class=\"name-tag is-nowrap is-black-background\" [ngStyle]=\"{'transform': 'translateY(-50%) translateX(-50%) translateX(' + size * gridSize / 2 +'px)'}\">\r\n      <span>{{cards.length}}枚</span>\r\n    </div>\r\n    <div *ngIf=\"hasOwner\" class=\"name-tag has-length-limit is-nowrap is-black-background\" [ngStyle]=\"{'transform': 'translateY(50%) translateX(-50%) translateX(' + size * gridSize / 2 +'px)'}\">\r\n      <span>{{ownerName}} が確認中</span>\r\n    </div>\r\n  </div>\r\n</div>","import { CSSNumber } from './css-number';\r\nimport { Matrix3D } from './matrix-3d';\r\n\r\nexport interface IPoint2D {\r\n  x: number;\r\n  y: number;\r\n}\r\nexport interface IPoint3D extends IPoint2D {\r\n  z: number;\r\n  w: number;\r\n}\r\nexport class Transform {\r\n  private element: HTMLElement;\r\n  private matrix: Matrix3D = new Matrix3D();\r\n  private sceneTransform: Matrix3D = new Matrix3D();\r\n  private inverseSceneTransform: Matrix3D = new Matrix3D();\r\n\r\n  private paddingLeft: number;\r\n  private paddingTop: number;\r\n  private marginLeft: number;\r\n  private marginTop: number;\r\n  private borderLeft: number;\r\n  private borderTop: number;\r\n\r\n  constructor(element: HTMLElement) {\r\n    this.initialize(element);\r\n  }\r\n\r\n  clear(): Transform {\r\n    this.element = null;\r\n    this.matrix.identity();\r\n\r\n    return this;\r\n  }\r\n\r\n  private initialize(element: HTMLElement) {\r\n    if (!element) return;\r\n\r\n    this.element = element;\r\n\r\n    let style = window.getComputedStyle(element);\r\n\r\n    let parentWidth = 0;\r\n    let parentHeight = 0;\r\n    if (this.element.parentElement) {\r\n      parentWidth = this.element.parentElement.clientWidth;\r\n      parentHeight = this.element.parentElement.clientHeight;\r\n    } else {\r\n      parentWidth = window.innerWidth;\r\n      parentHeight = window.innerHeight;\r\n    }\r\n    this.paddingLeft = CSSNumber.relation(style.paddingTop, parentWidth);\r\n    this.paddingTop = CSSNumber.relation(style.paddingTop, parentHeight);\r\n    this.marginLeft = CSSNumber.relation(style.marginLeft, parentWidth);\r\n    this.marginTop = CSSNumber.relation(style.marginTop, parentHeight);\r\n    this.borderLeft = CSSNumber.relation(style.borderLeft, parentWidth);\r\n    this.borderTop = CSSNumber.relation(style.borderTop, parentHeight);\r\n\r\n    this.matrix.setCSS(style.transform);\r\n    this.sceneTransform.identity();\r\n    this.extract(this, this.sceneTransform);\r\n    this.sceneTransform.invert(this.inverseSceneTransform);\r\n\r\n    return this;\r\n  }\r\n\r\n  globalToLocal(x: number, y: number, z: number = 0): IPoint3D {\r\n    let ret: IPoint3D = { x: x, y: y, z: z, w: 1 };\r\n    this.inverseSceneTransform.unproject(ret, ret);\r\n    this.fromBorderBox(ret);\r\n    return ret;\r\n  }\r\n\r\n  localToGlobal(x: number, y: number, z: number = 0): IPoint3D {\r\n    let ret: IPoint3D = { x: x, y: y, z: z, w: 1 };\r\n    this.sceneTransform.project(ret, ret);\r\n    this.fromBorderBox(ret);\r\n    return ret;\r\n  }\r\n\r\n  localToLocal(x: number, y: number, z: number, to: HTMLElement): IPoint3D {\r\n    let local: IPoint3D = { x: x, y: y, z: z, w: 1 };\r\n    let transformer: Transform = new Transform(to);\r\n    let matrix = Matrix3D.multiply(this.sceneTransform, transformer.inverseSceneTransform);\r\n    let ret: IPoint3D = { x: 0, y: 0, z: 0, w: 1 };\r\n\r\n    ret.x = local.x * matrix.m11 + local.y * matrix.m21 + local.z * matrix.m31 + local.w * matrix.m41;\r\n    ret.y = local.x * matrix.m12 + local.y * matrix.m22 + local.z * matrix.m32 + local.w * matrix.m42;\r\n    ret.z = local.x * matrix.m13 + local.y * matrix.m23 + local.z * matrix.m33 + local.w * matrix.m43;\r\n    ret.w = local.x * matrix.m14 + local.y * matrix.m24 + local.z * matrix.m34 + local.w * matrix.m44;\r\n\r\n    transformer.clear();\r\n    this.toBorderBox(ret);\r\n    return ret;\r\n  }\r\n\r\n  private extract(transform: Transform, matrix: Matrix3D): void {\r\n    let element = transform.element;\r\n    let node = element;\r\n\r\n    while (node) {\r\n      this.extractMatrix(node, matrix);\r\n      if (node && node.style.position === 'fixed') {\r\n        console.warn('fixed領域は計算が不正確');\r\n        matrix.appendPosition(window.pageXOffset, window.pageYOffset, 0);\r\n      }\r\n      node = node.parentElement;\r\n    }\r\n  }\r\n\r\n  private extractMatrix(node: HTMLElement, matrix: Matrix3D = null): Matrix3D {\r\n    if (!matrix)\r\n      matrix = new Matrix3D();\r\n    if (!node)\r\n      return matrix;\r\n\r\n    let element: HTMLElement = node;\r\n    let style: CSSStyleDeclaration = window.getComputedStyle(node);\r\n\r\n    if (style.transform != 'none') {\r\n      let origin = style.transformOrigin ? style.transformOrigin.split(' ') : [];\r\n      let originX = CSSNumber.relation(origin[0], element.offsetWidth, element.offsetWidth * 0.5);\r\n      let originY = CSSNumber.relation(origin[1], element.offsetHeight, element.offsetHeight * 0.5);\r\n      let originZ = CSSNumber.relation(origin[2], 0, 0);\r\n\r\n      matrix.appendPosition(-originX, -originY, -originZ);\r\n      matrix.appendCSS(style.transform);\r\n      matrix.appendPosition(originX, originY, originZ);\r\n    }\r\n\r\n    let position = this.getPosition(node);\r\n    matrix.appendPosition(position.x, position.y, 0);\r\n\r\n    let perspective = 0;\r\n    if (node.parentElement) {\r\n      let parentStyle: CSSStyleDeclaration = window.getComputedStyle(node.parentElement);\r\n      perspective = CSSNumber.parse(parentStyle.perspective);\r\n    }\r\n\r\n    if (node.parentElement && perspective) {\r\n      let parentStyle: CSSStyleDeclaration = window.getComputedStyle(node.parentElement);\r\n      let perspectiveOrigin = parentStyle.perspectiveOrigin.split(' ');\r\n      let perspectiveOriginX = CSSNumber.relation(perspectiveOrigin[0], element.parentElement.offsetWidth);\r\n      let perspectiveOriginY = CSSNumber.relation(perspectiveOrigin[1], element.parentElement.offsetHeight);\r\n\r\n      matrix.appendPosition(-perspectiveOriginX, -perspectiveOriginY, 0);\r\n      matrix.appendPerspective(perspective);\r\n      matrix.appendPosition(perspectiveOriginX, perspectiveOriginY, 0);\r\n    }\r\n\r\n    return matrix;\r\n  }\r\n\r\n  private getPosition(node: HTMLElement): IPoint2D {\r\n    let ret: IPoint2D = { x: 0, y: 0 };\r\n    ret.x = !node.offsetParent ? node.offsetLeft : node.parentElement === node.offsetParent ? node.offsetLeft : node.parentElement.offsetParent === node.offsetParent ? node.offsetLeft - node.parentElement.offsetLeft : 0;\r\n    ret.y = !node.offsetParent ? node.offsetTop : node.parentElement === node.offsetParent ? node.offsetTop : node.parentElement.offsetParent === node.offsetParent ? node.offsetTop - node.parentElement.offsetTop : 0;\r\n\r\n    ret.x += node.offsetParent ? node.offsetParent.clientLeft : 0;\r\n    ret.y += node.offsetParent ? node.offsetParent.clientTop : 0;\r\n    return ret;\r\n  }\r\n\r\n  private fromBorderBox(point: IPoint3D): void {\r\n    point.x += this.paddingLeft;\r\n    point.y += this.paddingTop;\r\n    point.x += this.marginLeft;\r\n    point.y += this.marginTop;\r\n    point.x -= this.borderLeft;\r\n    point.y -= this.borderTop;\r\n  }\r\n\r\n  private toBorderBox(point: IPoint3D): void {\r\n    point.x -= this.paddingLeft;\r\n    point.y -= this.paddingTop;\r\n    point.x -= this.marginLeft;\r\n    point.y -= this.marginTop;\r\n    point.x += this.borderLeft;\r\n    point.y += this.borderTop;\r\n  }\r\n}","import { Component, OnDestroy, OnInit } from '@angular/core';\r\n\r\nimport { ObjectStore } from '@udonarium/core/synchronize-object/object-store';\r\nimport { PeerContext } from '@udonarium/core/system/network/peer-context';\r\nimport { EventSystem, Network } from '@udonarium/core/system';\r\nimport { PeerCursor } from '@udonarium/peer-cursor';\r\n\r\nimport { PasswordCheckComponent } from 'component/password-check/password-check.component';\r\nimport { RoomSettingComponent } from 'component/room-setting/room-setting.component';\r\nimport { ModalService } from 'service/modal.service';\r\nimport { PanelService } from 'service/panel.service';\r\n\r\n@Component({\r\n  selector: 'lobby',\r\n  templateUrl: './lobby.component.html',\r\n  styleUrls: ['./lobby.component.css'],\r\n})\r\nexport class LobbyComponent implements OnInit, OnDestroy {\r\n  rooms: { alias: string, roomName: string, peerContexts: PeerContext[] }[] = [];\r\n\r\n  isReloading: boolean = false;\r\n\r\n  help: string = '點擊“更新列表”按鈕以顯示可連接房間列表。';\r\n\r\n  get currentRoom(): string { return Network.peerContext.roomId };\r\n  get peerId(): string { return Network.peerId; }\r\n  get isConnected(): boolean {\r\n    return Network.peerIds.length <= 1 ? false : true;\r\n  }\r\n  constructor(\r\n    private panelService: PanelService,\r\n    private modalService: ModalService\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    Promise.resolve().then(() => this.changeTitle());\r\n    EventSystem.register(this)\r\n      .on('OPEN_NETWORK', event => {\r\n        this.changeTitle();\r\n      })\r\n      .on('CONNECT_PEER', event => {\r\n        this.changeTitle();\r\n      });\r\n    this.reload();\r\n  }\r\n\r\n  private changeTitle() {\r\n    this.modalService.title = this.panelService.title = '大廳';\r\n    if (Network.peerContext.roomName.length) {\r\n      this.modalService.title = this.panelService.title = '＜' + Network.peerContext.roomName + '/' + Network.peerContext.roomId + '＞'\r\n    }\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    EventSystem.unregister(this);\r\n  }\r\n\r\n  async reload() {\r\n    this.isReloading = true;\r\n    this.help = '搜尋中...';\r\n    this.rooms = [];\r\n    let peersOfroom: { [room: string]: PeerContext[] } = {};\r\n    let peerIds = await Network.listAllPeers();\r\n    for (let peerId of peerIds) {\r\n      let context = PeerContext.parse(peerId);\r\n      if (context.isRoom) {\r\n        let alias = context.roomId + context.roomName;\r\n        if (!(alias in peersOfroom)) {\r\n          peersOfroom[alias] = [];\r\n        }\r\n        peersOfroom[alias].push(context);\r\n      }\r\n    }\r\n    for (let alias in peersOfroom) {\r\n      this.rooms.push({ alias: alias, roomName: peersOfroom[alias][0].roomName, peerContexts: peersOfroom[alias] });\r\n    }\r\n    this.rooms.sort((a, b) => {\r\n      if (a.alias < b.alias) return -1;\r\n      if (a.alias > b.alias) return 1;\r\n      return 0;\r\n    });\r\n    this.help = '找不到可連接的房間。 您可以使用“創建新房間”來創建新房間。';\r\n    this.isReloading = false;\r\n  }\r\n\r\n  async connect(peerContexts: PeerContext[]) {\r\n    let context = peerContexts[0];\r\n    let password = '';\r\n\r\n    if (context.hasPassword) {\r\n      password = await this.modalService.open<string>(PasswordCheckComponent, { peerId: context.peerId, title: `${context.roomName}/${context.roomId}` });\r\n      if (password == null) password = '';\r\n    }\r\n\r\n    if (!context.verifyPassword(password)) return;\r\n\r\n    let userId = Network.peerContext ? Network.peerContext.userId : PeerContext.generateId();\r\n    Network.open(userId, context.roomId, context.roomName, password);\r\n    PeerCursor.myCursor.peerId = Network.peerId;\r\n\r\n    let triedPeer: string[] = [];\r\n    EventSystem.register(triedPeer)\r\n      .on('OPEN_NETWORK', event => {\r\n        console.log('LobbyComponent OPEN_PEER', event.data.peerId);\r\n        EventSystem.unregister(triedPeer);\r\n        ObjectStore.instance.clearDeleteHistory();\r\n        for (let context of peerContexts) {\r\n          Network.connect(context.peerId);\r\n        }\r\n        EventSystem.register(triedPeer)\r\n          .on('CONNECT_PEER', event => {\r\n            console.log('連線成功！', event.data.peerId);\r\n            triedPeer.push(event.data.peerId);\r\n            console.log('連線成功 ' + triedPeer.length + '/' + peerContexts.length);\r\n            if (peerContexts.length <= triedPeer.length) {\r\n              this.resetNetwork();\r\n              EventSystem.unregister(triedPeer);\r\n            }\r\n          })\r\n          .on('DISCONNECT_PEER', event => {\r\n            console.warn('連線失敗', event.data.peerId);\r\n            triedPeer.push(event.data.peerId);\r\n            console.warn('連線失敗 ' + triedPeer.length + '/' + peerContexts.length);\r\n            if (peerContexts.length <= triedPeer.length) {\r\n              this.resetNetwork();\r\n              EventSystem.unregister(triedPeer);\r\n            }\r\n          });\r\n      });\r\n  }\r\n\r\n  private resetNetwork() {\r\n    if (Network.peerContexts.length < 1) {\r\n      Network.open();\r\n      PeerCursor.myCursor.peerId = Network.peerId;\r\n    }\r\n  }\r\n\r\n  async showRoomSetting() {\r\n    await this.modalService.open(RoomSettingComponent, { width: 700, height: 400, left: 0, top: 400 });\r\n    this.reload();\r\n    this.help = '點擊“更新列表”按鈕以顯示可連接房間列表。';\r\n  }\r\n}","<div *ngIf=\"!isConnected;else other_content\">\r\n  <button (click)=\"reload()\" [disabled]=\"isReloading\">列表更新</button>\r\n  <button (click)=\"showRoomSetting()\">新增房間</button>\r\n  <hr/>\r\n  <ng-container *ngIf=\"rooms.length\">\r\n    <table class=\"room-list\">\r\n      <tr>\r\n        <th>房間ID</th>\r\n        <th class=\"room-name\">房間名</th>\r\n        <th>密碼</th>\r\n        <th>参加者</th>\r\n        <th></th>\r\n      </tr>\r\n      <ng-container *ngFor=\"let room of rooms\">\r\n        <tr>\r\n          <td class=\"is-small-font\">{{room.peerContexts[0]?.roomId}}</td>\r\n          <td class=\"room-name\">{{room.roomName}}</td>\r\n          <td *ngIf=\"room.peerContexts[0].hasPassword\">\r\n            <i class=\"material-icons\" style=\"vertical-align: middle; font-size:0.9rem;\">lock</i>\r\n          </td>\r\n          <td *ngIf=\"!room.peerContexts[0].hasPassword\">-</td>\r\n          <td>{{room.peerContexts.length}}人</td>\r\n          <td>\r\n            <button [disabled]=\"room.peerContexts[0]?.roomId === currentRoom\" *ngIf=\"0 < room.alias.length\" type=\"submit\" (click)=\"connect(room.peerContexts)\">連線</button>\r\n          </td>\r\n        </tr>\r\n      </ng-container>\r\n    </table>\r\n  </ng-container>\r\n  <span *ngIf=\"rooms.length < 1\" style=\"font-size: 12px;\">{{help}}</span>\r\n</div>\r\n<ng-template #other_content><span style=\"font-size: 12px;\">如果要連接到另一個房間，請斷開與其他與會者的連線。<br>（※可以通過重新加載頁面來斷開連接。）</span></ng-template>\r\n","import { Injectable } from '@angular/core';\r\n\r\ntype BatchTask = () => void;\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class BatchService {\r\n  private batchTask: Map<any, BatchTask> = new Map();\r\n  private batchTaskTimer: NodeJS.Timer = null;\r\n\r\n  constructor() { }\r\n\r\n  add(task: BatchTask, key: any = {}) {\r\n    this.batchTask.set(key, task);\r\n    if (this.batchTaskTimer != null) return;\r\n    this.execBatch();\r\n    this.batchTaskTimer = setInterval(() => {\r\n      if (0 < this.batchTask.size) {\r\n        this.execBatch();\r\n      } else {\r\n        clearInterval(this.batchTaskTimer);\r\n        this.batchTaskTimer = null;\r\n      }\r\n    }, 66);\r\n  }\r\n\r\n  remove(key: any = {}) {\r\n    this.batchTask.delete(key);\r\n  }\r\n\r\n  private execBatch() {\r\n    this.batchTask.forEach(task => task());\r\n    this.batchTask.clear();\r\n  }\r\n}\r\n","import {\r\n  AfterViewInit,\r\n  ComponentFactoryResolver,\r\n  ComponentRef,\r\n  Directive,\r\n  Input,\r\n  NgZone,\r\n  OnDestroy,\r\n  OnInit,\r\n  ViewContainerRef,\r\n} from '@angular/core';\r\nimport { EventSystem } from '@udonarium/core/system';\r\nimport { TabletopObject } from '@udonarium/tabletop-object';\r\nimport { OverviewPanelComponent } from 'component/overview-panel/overview-panel.component';\r\nimport { ContextMenuService } from 'service/context-menu.service';\r\nimport { PointerDeviceService } from 'service/pointer-device.service';\r\n\r\n@Directive({\r\n  selector: '[appTooltip]'\r\n})\r\nexport class TooltipDirective implements OnInit, AfterViewInit, OnDestroy {\r\n  private static activeTooltips: ComponentRef<OverviewPanelComponent>[] = [];\r\n\r\n  @Input('appTooltip') tabletopObject: TabletopObject;\r\n\r\n  private callbackOnMouseEnter = (e) => this.onMouseEnter(e);\r\n  private callbackOnMouseLeave = (e) => this.onMouseLeave(e);\r\n  private callbackOnMouseDown = (e) => this.onMouseDown(e);\r\n\r\n  private openTooltipTimer: NodeJS.Timer;\r\n  private closeTooltipTimer: NodeJS.Timer;\r\n\r\n  private tooltipComponentRef: ComponentRef<OverviewPanelComponent>\r\n\r\n  constructor(\r\n    private ngZone: NgZone,\r\n    private viewContainerRef: ViewContainerRef,\r\n    private componentFactoryResolver: ComponentFactoryResolver,\r\n    private pointerDeviceService: PointerDeviceService\r\n  ) { }\r\n\r\n  ngOnInit() { }\r\n\r\n  ngAfterViewInit() {\r\n    this.addEventListeners(this.viewContainerRef.element.nativeElement);\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.removeEventListeners(this.viewContainerRef.element.nativeElement);\r\n    this.clearTimer();\r\n    this.close();\r\n  }\r\n\r\n  private onMouseEnter(e: any) {\r\n    this.clearTimer();\r\n    if (!this.tooltipComponentRef) this.startOpenTimer();\r\n  }\r\n\r\n  private onMouseLeave(e: any) {\r\n    this.clearTimer();\r\n    if (this.tooltipComponentRef) this.startCloseTimer();\r\n  }\r\n\r\n  private onMouseDown(e: any) {\r\n    if (!this.tooltipComponentRef) return;\r\n    if (!this.tooltipComponentRef.location.nativeElement.contains(e.target)\r\n      && !this.viewContainerRef.element.nativeElement.contains(e.target)) {\r\n      this.ngZone.run(() => this.closeAll());\r\n    }\r\n  }\r\n\r\n  private startOpenTimer() {\r\n    let pointerX = this.pointerDeviceService.pointerX;\r\n    let pointerY = this.pointerDeviceService.pointerY;\r\n\r\n    this.openTooltipTimer = setTimeout(() => {\r\n      this.openTooltipTimer = null;\r\n      let magnitude = (pointerX - this.pointerDeviceService.pointerX) ** 2 + (pointerY - this.pointerDeviceService.pointerY) ** 2;\r\n      if (4 < magnitude) {\r\n        this.startOpenTimer();\r\n      } else {\r\n        this.ngZone.run(() => this.open());\r\n      }\r\n    }, 100);\r\n  }\r\n\r\n  private startCloseTimer() {\r\n    this.closeTooltipTimer = setTimeout(() => {\r\n      this.closeTooltipTimer = null;\r\n      if (this.tooltipComponentRef && this.tooltipComponentRef.location.nativeElement.contains(document.activeElement)) {\r\n        this.startCloseTimer();\r\n      } else {\r\n        this.ngZone.run(() => this.closeAll());\r\n      }\r\n    }, 400);\r\n  }\r\n\r\n  private clearTimer() {\r\n    if (this.closeTooltipTimer) clearTimeout(this.closeTooltipTimer);\r\n    if (this.openTooltipTimer) clearTimeout(this.openTooltipTimer);\r\n    this.closeTooltipTimer = this.openTooltipTimer = null;\r\n  }\r\n\r\n  private open() {\r\n    this.closeAll();\r\n    if (this.pointerDeviceService.isDragging) return;\r\n\r\n    let parentViewContainerRef = ContextMenuService.defaultParentViewContainerRef;\r\n\r\n    const injector = parentViewContainerRef.injector;\r\n    const panelComponentFactory = this.componentFactoryResolver.resolveComponentFactory(OverviewPanelComponent);\r\n\r\n    this.tooltipComponentRef = parentViewContainerRef.createComponent(panelComponentFactory, parentViewContainerRef.length, injector);\r\n\r\n    this.tooltipComponentRef.instance.tabletopObject = this.tabletopObject;\r\n    this.tooltipComponentRef.instance.left = this.pointerDeviceService.pointerX;\r\n    this.tooltipComponentRef.instance.top = this.pointerDeviceService.pointerY;\r\n\r\n    this.addEventListeners(this.tooltipComponentRef.location.nativeElement);\r\n    this.ngZone.runOutsideAngular(() => {\r\n      document.body.addEventListener('touchstart', this.callbackOnMouseDown, true);\r\n      document.body.addEventListener('mousedown', this.callbackOnMouseDown, true);\r\n    });\r\n\r\n    EventSystem.register(this)\r\n      .on('DELETE_GAME_OBJECT', -1000, event => {\r\n        if (this.tabletopObject && this.tabletopObject.identifier === event.data.identifier) this.closeAll();\r\n      });\r\n\r\n    this.tooltipComponentRef.onDestroy(() => {\r\n      this.removeEventListeners(this.tooltipComponentRef.location.nativeElement);\r\n      document.body.removeEventListener('touchstart', this.callbackOnMouseDown, true);\r\n      document.body.removeEventListener('mousedown', this.callbackOnMouseDown, true);\r\n      this.clearTimer();\r\n      this.tooltipComponentRef = null;\r\n      EventSystem.unregister(this);\r\n    });\r\n    TooltipDirective.activeTooltips.push(this.tooltipComponentRef);\r\n  }\r\n\r\n  private close() {\r\n    if (!this.tooltipComponentRef) return;\r\n    let index = TooltipDirective.activeTooltips.indexOf(this.tooltipComponentRef);\r\n    if (0 <= index) TooltipDirective.activeTooltips.splice(index, 1);\r\n\r\n    this.tooltipComponentRef.destroy();\r\n    this.tooltipComponentRef = null;\r\n  }\r\n\r\n  private closeAll() {\r\n    TooltipDirective.activeTooltips.forEach(componentRef => componentRef.destroy());\r\n    TooltipDirective.activeTooltips = [];\r\n    this.close();\r\n  }\r\n\r\n  private addEventListeners(element: Element) {\r\n    this.ngZone.runOutsideAngular(() => {\r\n      element.addEventListener('mouseenter', this.callbackOnMouseEnter, false);\r\n      element.addEventListener('mouseleave', this.callbackOnMouseLeave, false);\r\n    });\r\n  }\r\n\r\n  private removeEventListeners(element: Element) {\r\n    element.removeEventListener('mouseenter', this.callbackOnMouseEnter, false);\r\n    element.removeEventListener('mouseleave', this.callbackOnMouseLeave, false);\r\n  }\r\n}\r\n","import { SyncObject, SyncVar } from './core/synchronize-object/decorator';\r\nimport { ObjectContext } from './core/synchronize-object/game-object';\r\nimport { ObjectNode } from './core/synchronize-object/object-node';\r\nimport { StringUtil } from './core/system/util/string-util';\r\nimport { DataElement } from './data-element';\r\n\r\nexport interface PaletteLine {\r\n  palette: string;\r\n}\r\n\r\nexport interface PaletteVariable {\r\n  name: string;\r\n  value: string;\r\n}\r\n\r\n@SyncObject('chat-palette')\r\nexport class ChatPalette extends ObjectNode {\r\n  @SyncVar() dicebot: string = 'DiceBot';\r\n  //TODO: キャラシ項目のコピー\r\n\r\n  get paletteLines(): PaletteLine[] {\r\n    if (!this.isAnalized) this.parse(<string>this.value);\r\n    return this._paletteLines;\r\n  }\r\n\r\n  get paletteVariables(): PaletteVariable[] {\r\n    if (!this.isAnalized) this.parse(<string>this.value);\r\n    return this._paletteVariables;\r\n  }\r\n\r\n  private _palettes: string[] = [];\r\n  private _paletteLines: PaletteLine[] = [];\r\n  private _paletteVariables: PaletteVariable[] = [];\r\n  private isAnalized: boolean = false;\r\n\r\n  getPalette(): string[] {\r\n    if (!this.isAnalized) this.parse(<string>this.value);\r\n    return this._palettes;\r\n  }\r\n\r\n  setPalette(paletteSource: string) {\r\n    this.value = paletteSource;\r\n    this.isAnalized = false;\r\n  }\r\n\r\n  evaluate(line: PaletteLine, extendVariables?: DataElement): string\r\n  evaluate(line: string, extendVariables?: DataElement): string\r\n  evaluate(line: any, extendVariables?: DataElement): string {\r\n    let evaluate: string = '';\r\n    if (typeof line === 'string') {\r\n      evaluate = line;\r\n    } else {\r\n      evaluate = line.palette;\r\n    }\r\n\r\n    console.log(evaluate);\r\n    let limit = 128;\r\n    let loop = 0;\r\n    let isContinue = true;\r\n    while (isContinue) {\r\n      loop++;\r\n      isContinue = false;\r\n      evaluate = evaluate.replace(/[{｛]\\s*([^{}｛｝]+)\\s*[}｝]/g, (match, name) => {\r\n        name = StringUtil.toHalfWidth(name);\r\n        console.log(name);\r\n        isContinue = true;\r\n        for (let variable of this.paletteVariables) {\r\n          if (variable.name == name) return variable.value;\r\n        }\r\n        if (extendVariables) {\r\n          let element = extendVariables.getFirstElementByName(name);\r\n          if (element) return element.isNumberResource ? element.currentValue + '' : element.value + '';\r\n        }\r\n        return '';\r\n      });\r\n      if (limit < loop) isContinue = false;\r\n    }\r\n    return evaluate;\r\n  }\r\n\r\n  private parse(paletteSource: string) {\r\n    this._palettes = paletteSource.split('\\n');\r\n\r\n    this._paletteLines = [];\r\n    this._paletteVariables = [];\r\n\r\n    for (let palette of this._palettes) {\r\n      let variable = this.parseVariable(palette);\r\n      if (variable) {\r\n        this._paletteVariables.push(variable);\r\n        continue;\r\n      }\r\n      let line: PaletteLine = { palette: palette };\r\n      this._paletteLines.push(line);\r\n    }\r\n    this.isAnalized = true;\r\n  }\r\n\r\n  private parseVariable(palette: string): PaletteVariable {\r\n    let array = /^\\s*[/／]{2}([^=＝{}｛｝\\s]+)\\s*[=＝]\\s*(.+)\\s*/gi.exec(palette);\r\n    if (!array) return null;\r\n    let variable: PaletteVariable = {\r\n      name: StringUtil.toHalfWidth(array[1]),\r\n      value: array[2]\r\n    }\r\n    return variable;\r\n  }\r\n\r\n  // override\r\n  apply(context: ObjectContext) {\r\n    super.apply(context);\r\n    this.isAnalized = false;\r\n  }\r\n}\r\n\r\n@SyncObject('buff-palette')\r\nexport class BuffPalette extends ChatPalette {\r\n}\r\n\r\n\r\n@SyncObject('dice-table-palette')\r\nexport class DiceTablePalette extends ChatPalette {\r\n}\r\n","import { ChatMessage, ChatMessageContext } from './chat-message';\r\nimport { AudioFile } from './core/file-storage/audio-file';\r\nimport { AudioPlayer } from './core/file-storage/audio-player';\r\nimport { AudioStorage } from './core/file-storage/audio-storage';\r\nimport { SyncObject } from './core/synchronize-object/decorator';\r\nimport { GameObject } from './core/synchronize-object/game-object';\r\nimport { ObjectStore } from './core/synchronize-object/object-store';\r\nimport { EventSystem } from './core/system';\r\n\r\nexport class PresetSound {\r\n  static dicePick: string = '';\r\n  static dicePut: string = '';\r\n  static diceRoll1: string = '';\r\n  static diceRoll2: string = '';\r\n  static cardDraw: string = '';\r\n  static cardPick: string = '';\r\n  static cardPut: string = '';\r\n  static cardShuffle: string = '';\r\n  static piecePick: string = '';\r\n  static piecePut: string = '';\r\n  static blockPick: string = '';\r\n  static blockPut: string = '';\r\n  static lock: string = '';\r\n  static unlock: string = '';\r\n  static sweep: string = '';\r\n}\r\n\r\n@SyncObject('sound-effect')\r\nexport class SoundEffect extends GameObject {\r\n  // GameObject Lifecycle\r\n  onStoreAdded() {\r\n    super.onStoreAdded();\r\n    EventSystem.register(this)\r\n      .on<string>('SOUND_EFFECT', event => {\r\n        AudioPlayer.play(AudioStorage.instance.get(event.data), 0.5);\r\n      })\r\n      .on('SEND_MESSAGE', event => {\r\n        let chatMessage = ObjectStore.instance.get<ChatMessage>(event.data.messageIdentifier);\r\n        if (!chatMessage || !chatMessage.isSendFromSelf || !chatMessage.isDicebot) return;\r\n        if (Math.random() < 0.5) {\r\n          SoundEffect.play(PresetSound.diceRoll1);\r\n        } else {\r\n          SoundEffect.play(PresetSound.diceRoll2);\r\n        }\r\n      });\r\n  }\r\n\r\n  // GameObject Lifecycle\r\n  onStoreRemoved() {\r\n    super.onStoreRemoved();\r\n    EventSystem.unregister(this);\r\n  }\r\n\r\n  play(identifier: string)\r\n  play(audio: AudioFile)\r\n  play(arg: any) {\r\n    SoundEffect.play(arg);\r\n  }\r\n\r\n  static play(identifier: string)\r\n  static play(audio: AudioFile)\r\n  static play(arg: any) {\r\n    let identifier = '';\r\n    if (typeof arg === 'string') {\r\n      identifier = arg;\r\n    } else {\r\n      identifier = arg.identifier;\r\n    }\r\n    SoundEffect._play(identifier);\r\n  }\r\n\r\n  private static _play(identifier: string) {\r\n    EventSystem.call('SOUND_EFFECT', identifier);\r\n  }\r\n}","export class PromiseQueue {\r\n  private queue: Promise<any> = Promise.resolve();\r\n\r\n  private _length: number = 0;\r\n  get length(): number { return this._length; }\r\n\r\n  constructor(readonly name: string = 'Queue') { }\r\n\r\n  add<T>(task: () => T): Promise<T>\r\n  add<T>(promise: PromiseLike<T>): Promise<T>\r\n  add<T>(executor: (resolve: (value?: T | PromiseLike<T>) => void, reject: (reason?: any) => void) => void): Promise<T>\r\n  add<T>(arg: any): Promise<T> {\r\n    this._length++\r\n    console.log(`${this.name} add: ${this._length}`);\r\n    if (typeof arg.then == 'function') {\r\n      this.queue = this.queue.then(() => arg); // promise\r\n    } else if (0 < arg.length) {\r\n      this.queue = this.queue.then(() => new Promise<T>(arg)); // executor\r\n    } else {\r\n      this.queue = this.queue.then(arg); // task\r\n    }\r\n\r\n    let ret = this.queue;\r\n    this.queue = this.queue.catch((reason) => {\r\n      console.error(reason);\r\n    });\r\n    this.queue = this.queue.then(() => {\r\n      this._length--;\r\n      console.log(`${this.name} done: ${this._length}`);\r\n    });\r\n    return ret;\r\n  }\r\n}\r\n","import { saveAs } from 'file-saver';\r\nimport * as JSZip from 'jszip/dist/jszip.min.js';\r\n\r\nimport { EventSystem } from '../system';\r\nimport { XmlUtil } from '../system/util/xml-util';\r\nimport { AudioStorage } from './audio-storage';\r\nimport { FileReaderUtil } from './file-reader-util';\r\nimport { ImageStorage } from './image-storage';\r\nimport { MimeType } from './mime-type';\r\n\r\ntype MetaData = { percent: number, currentFile: string };\r\ntype UpdateCallback = (metadata: MetaData) => void;\r\n\r\nconst MEGA_BYTE = 1024 * 1024;\r\n\r\nexport class FileArchiver {\r\n  private static _instance: FileArchiver\r\n  static get instance(): FileArchiver {\r\n    if (!FileArchiver._instance) FileArchiver._instance = new FileArchiver();\r\n    return FileArchiver._instance;\r\n  }\r\n\r\n  private maxImageSize = 2 * MEGA_BYTE;\r\n  private maxAudioeSize = 10 * MEGA_BYTE;\r\n\r\n  private callbackOnDragEnter;\r\n  private callbackOnDragOver;\r\n  private callbackOnDrop;\r\n\r\n  private constructor() {\r\n    console.log('FileArchiver ready...');\r\n  }\r\n\r\n  initialize() {\r\n    this.destroy();\r\n    this.addEventListeners();\r\n  }\r\n\r\n  private destroy() {\r\n    this.removeEventListeners();\r\n  }\r\n\r\n  private addEventListeners() {\r\n    this.removeEventListeners();\r\n    this.callbackOnDragEnter = (e) => this.onDragEnter(e);\r\n    this.callbackOnDragOver = (e) => this.onDragOver(e);\r\n    this.callbackOnDrop = (e) => this.onDrop(e);\r\n    document.body.addEventListener('dragenter', this.callbackOnDragEnter, false);\r\n    document.body.addEventListener('dragover', this.callbackOnDragOver, false);\r\n    document.body.addEventListener('drop', this.callbackOnDrop, false);\r\n  }\r\n\r\n  private removeEventListeners() {\r\n    document.body.removeEventListener('dragenter', this.callbackOnDragEnter, false);\r\n    document.body.removeEventListener('dragover', this.callbackOnDragOver, false);\r\n    document.body.removeEventListener('drop', this.callbackOnDrop, false);\r\n    this.callbackOnDragEnter = null;\r\n    this.callbackOnDragOver = null;\r\n    this.callbackOnDrop = null;\r\n  }\r\n\r\n  private onDragEnter(event: DragEvent) {\r\n    event.preventDefault();\r\n  };\r\n\r\n  private onDragOver(event: DragEvent) {\r\n    event.preventDefault();\r\n  };\r\n\r\n  private onDrop(event: DragEvent) {\r\n    event.preventDefault();\r\n\r\n    console.log('onDrop', event.dataTransfer);\r\n    let files = event.dataTransfer.files\r\n    this.load(files);\r\n  };\r\n\r\n  async load(files: File[]): Promise<void>\r\n  async load(files: FileList): Promise<void>\r\n  async load(files: any): Promise<void> {\r\n    if (!files) return;\r\n    let loadFiles: File[] = files instanceof FileList ? toArrayOfFileList(files) : files;\r\n\r\n    for (let file of loadFiles) {\r\n      await this.handleImage(file);\r\n      await this.handleAudio(file);\r\n      await this.handleText(file);\r\n      await this.handleZip(file);\r\n      EventSystem.trigger('FILE_LOADED', { file: file });\r\n    }\r\n  }\r\n\r\n  private async handleImage(file: File) {\r\n    if (file.type.indexOf('image/') < 0) return;\r\n    if (this.maxImageSize < file.size) {\r\n      console.warn(`File size limit exceeded. -> ${file.name} (${(file.size / 1024 / 1024).toFixed(2)}MB)`);\r\n      return;\r\n    }\r\n    console.log(file.name + ' type:' + file.type);\r\n    await ImageStorage.instance.addAsync(file);\r\n  }\r\n\r\n  private async handleAudio(file: File) {\r\n    if (file.type.indexOf('audio/') < 0) return;\r\n    if (this.maxAudioeSize < file.size) {\r\n      console.warn(`File size limit exceeded. -> ${file.name} (${(file.size / 1024 / 1024).toFixed(2)}MB)`);\r\n      return;\r\n    }\r\n    console.log(file.name + ' type:' + file.type);\r\n    await AudioStorage.instance.addAsync(file);\r\n  }\r\n\r\n  private async handleText(file: File): Promise<void> {\r\n    if (file.type.indexOf('text/') < 0) return;\r\n    console.log(file.name + ' type:' + file.type);\r\n    try {\r\n      let xmlElement: Element = XmlUtil.xml2element(await FileReaderUtil.readAsTextAsync(file));\r\n      if (xmlElement) EventSystem.trigger('XML_LOADED', { xmlElement: xmlElement });\r\n    } catch (reason) {\r\n      console.warn(reason);\r\n    }\r\n  }\r\n\r\n  private async handleZip(file: File) {\r\n    if (!(0 <= file.type.indexOf('application/') || file.type.length < 1)) return;\r\n    let zip = new JSZip();\r\n    try {\r\n      zip = await zip.loadAsync(file);\r\n    } catch (reason) {\r\n      console.warn(reason);\r\n      return;\r\n    }\r\n    let zipEntries = [];\r\n    zip.forEach((relativePath, zipEntry) => zipEntries.push(zipEntry));\r\n    for (let zipEntry of zipEntries) {\r\n      try {\r\n        let arraybuffer = await zipEntry.async('arraybuffer');\r\n        console.log(zipEntry.name + ' 解凍...');\r\n        await this.load([new File([arraybuffer], zipEntry.name, { type: MimeType.type(zipEntry.name) })]);\r\n      } catch (reason) {\r\n        console.warn(reason);\r\n      }\r\n    }\r\n  }\r\n\r\n  async saveAsync(files: File[], zipName: string, updateCallback?: UpdateCallback): Promise<void>\r\n  async saveAsync(files: FileList, zipName: string, updateCallback?: UpdateCallback): Promise<void>\r\n  async saveAsync(files: any, zipName: string, updateCallback?: UpdateCallback): Promise<void> {\r\n    if (!files) return;\r\n    let saveFiles: File[] = files instanceof FileList ? toArrayOfFileList(files) : files;\r\n\r\n    let zip = new JSZip();\r\n    for (let file of saveFiles) {\r\n      zip.file(file.name, file);\r\n    }\r\n\r\n    let blob = await zip.generateAsync({\r\n      type: 'blob',\r\n      compression: 'DEFLATE',\r\n      compressionOptions: {\r\n        level: 6\r\n      }\r\n    }, updateCallback);\r\n    saveAs(blob, zipName + '.zip');\r\n  }\r\n}\r\n\r\nfunction toArrayOfFileList(fileList: FileList): File[] {\r\n  let files: File[] = [];\r\n  let length = fileList.length;\r\n  for (let i = 0; i < length; i++) { files.push(fileList[i]); }\r\n  return files;\r\n}\r\n","import { AfterViewInit, Component, OnDestroy, OnInit } from '@angular/core';\r\nimport GameSystemClass from 'bcdice/lib/game_system';\r\nimport { ChatMessage } from '@udonarium/chat-message';\r\nimport { ChatTab } from '@udonarium/chat-tab';\r\nimport { DiceBot } from '@udonarium/dice-bot';\r\nimport { ObjectStore } from '@udonarium/core/synchronize-object/object-store';\r\nimport { EventSystem } from '@udonarium/core/system';\r\nimport { PeerCursor } from '@udonarium/peer-cursor';\r\nimport { ChatTabSettingComponent } from 'component/chat-tab-setting/chat-tab-setting.component';\r\nimport { ChatMessageService } from 'service/chat-message.service';\r\nimport { PanelOption, PanelService } from 'service/panel.service';\r\nimport { PointerDeviceService } from 'service/pointer-device.service';\r\n\r\nimport { DiceTableSettingComponent } from 'component/dice-table-setting/dice-table-setting.component';\r\nimport { ImageFile } from '@udonarium/core/file-storage/image-file';\r\nimport { ImageStorage } from '@udonarium/core/file-storage/image-storage';\r\n\r\n@Component({\r\n  selector: 'chat-window',\r\n  templateUrl: './chat-window.component.html',\r\n  styleUrls: ['./chat-window.component.css']\r\n})\r\nexport class ChatWindowComponent implements OnInit, OnDestroy, AfterViewInit {\r\n  sendFrom: string = 'Guest';\r\n\r\n  get gameType(): string { return this.chatMessageService.gameType; }\r\n  set gameType(gameType: string) { this.chatMessageService.gameType = gameType; }\r\n\r\n  private _chatTabidentifier: string = '';\r\n  get chatTabidentifier(): string { return this._chatTabidentifier; }\r\n  set chatTabidentifier(chatTabidentifier: string) {\r\n    let hasChanged: boolean = this._chatTabidentifier !== chatTabidentifier;\r\n    this._chatTabidentifier = chatTabidentifier;\r\n    this.updatePanelTitle();\r\n    if (hasChanged) {\r\n      this.scrollToBottom(true);\r\n    }\r\n  }\r\n\r\n  chatTabSwitchRelative(direction: number) {\r\n    let chatTabs = this.chatMessageService.chatTabs;\r\n    let index = chatTabs.findIndex((elm) => elm.identifier == this.chatTabidentifier);\r\n    if (index < 0) { return; }\r\n\r\n    let nextIndex: number;\r\n    if (index == chatTabs.length - 1 && direction == 1) {\r\n      nextIndex = 0;\r\n    } else if (index == 0 && direction == -1) {\r\n      nextIndex = chatTabs.length - 1;\r\n    } else {\r\n      nextIndex = index + direction;\r\n    }\r\n    this.chatTabidentifier = chatTabs[nextIndex].identifier;\r\n  }\r\n\r\n  private testcount:number = 0;\r\n\r\n  get chatTab(): ChatTab { return ObjectStore.instance.get<ChatTab>(this.chatTabidentifier); }\r\n  isAutoScroll: boolean = true;\r\n  scrollToBottomTimer: NodeJS.Timer = null;\r\n\r\n  testadd(){\r\n    this.chatTab.count ++;\r\n  }\r\n  get testmess(): string[] { \r\n   return this.chatTab.imageIdentifier;\r\n  } \r\n\r\n  constructor(\r\n    public chatMessageService: ChatMessageService,\r\n    private panelService: PanelService,\r\n    private pointerDeviceService: PointerDeviceService\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    this.sendFrom = PeerCursor.myCursor.identifier;\r\n    this._chatTabidentifier = 0 < this.chatMessageService.chatTabs.length ? this.chatMessageService.chatTabs[0].identifier : '';\r\n\r\n    EventSystem.register(this)\r\n      .on('MESSAGE_ADDED', event => {\r\n        if (event.data.tabIdentifier !== this.chatTabidentifier) return;\r\n        let message = ObjectStore.instance.get<ChatMessage>(event.data.messageIdentifier);\r\n        if (message && message.isSendFromSelf) {\r\n          this.isAutoScroll = true;\r\n        } else {\r\n          this.checkAutoScroll();\r\n        }\r\n        if (this.isAutoScroll && this.chatTab) this.chatTab.markForRead();\r\n      });\r\n    Promise.resolve().then(() => this.updatePanelTitle());\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    this.scrollToBottom(true);\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    EventSystem.unregister(this);\r\n  }\r\n\r\n  // @TODO やり方はもう少し考えた方がいいい\r\n  scrollToBottom(isForce: boolean = false) {\r\n    if (isForce) this.isAutoScroll = true;\r\n    if (this.scrollToBottomTimer != null || !this.isAutoScroll) return;\r\n    this.scrollToBottomTimer = setTimeout(() => {\r\n      if (this.chatTab) this.chatTab.markForRead();\r\n      this.scrollToBottomTimer = null;\r\n      this.isAutoScroll = false;\r\n      if (this.panelService.scrollablePanel) {\r\n        this.panelService.scrollablePanel.scrollTop = this.panelService.scrollablePanel.scrollHeight;\r\n        let event = new CustomEvent('scrolltobottom', {});\r\n        this.panelService.scrollablePanel.dispatchEvent(event);\r\n      }\r\n    }, 0);\r\n  }\r\n\r\n  // @TODO\r\n  checkAutoScroll() {\r\n    if (!this.panelService.scrollablePanel) return;\r\n    let top = this.panelService.scrollablePanel.scrollHeight - this.panelService.scrollablePanel.clientHeight;\r\n    if (top - 150 <= this.panelService.scrollablePanel.scrollTop) {\r\n      this.isAutoScroll = true;\r\n    } else {\r\n      this.isAutoScroll = false;\r\n    }\r\n  }\r\n\r\n  updatePanelTitle() {\r\n    if (this.chatTab) {\r\n      this.panelService.title = 'チャットウィンドウ - ' + this.chatTab.name;\r\n      this.panelService.chatTab = this.chatTab;\r\n    } else {\r\n      this.panelService.title = 'チャットウィンドウ';\r\n      this.panelService.chatTab = null ;\r\n    }\r\n  }\r\n\r\n  onSelectedTab(identifier: string) {\r\n    this.updatePanelTitle();\r\n  }\r\n\r\n  showTabSetting() {\r\n    let coordinate = this.pointerDeviceService.pointers[0];\r\n    let option: PanelOption = { left: coordinate.x - 250, top: coordinate.y - 175, width: 500, height: 350 };\r\n    let component = this.panelService.open<ChatTabSettingComponent>(ChatTabSettingComponent, option);\r\n    component.selectedTab = this.chatTab;\r\n  }\r\n\r\n  showDiceTableSetting() {\r\n    let coordinate = this.pointerDeviceService.pointers[0];\r\n    let option: PanelOption = { left: coordinate.x + 50, top: coordinate.y - 450, width: 650, height: 400 };\r\n    let component = this.panelService.open<DiceTableSettingComponent>(DiceTableSettingComponent, option);\r\n  }\r\n\r\n  sendChat(value: { text: string, gameSystem: GameSystemClass, sendFrom: string, sendTo: string ,tachieNum: number , messColor:string }) {\r\n    if (this.chatTab) {\r\n      this.chatMessageService.sendMessage(this.chatTab, value.text, value.gameSystem, value.sendFrom, value.sendTo, value.tachieNum, value.messColor);\r\n    }\r\n  }\r\n\r\n  trackByChatTab(index: number, chatTab: ChatTab) {\r\n    return chatTab.identifier;\r\n  }\r\n}\r\n","<!--<h2>チャットシステム</h2>-->\r\n<div class=\"component\">\r\n<div class=\"log\">\r\n  <chat-tab *ngIf=\"chatTab\" [chatTab]=\"chatTab\" (onAddMessage)=\"scrollToBottom()\"></chat-tab>\r\n  <div *ngIf=\"!chatTab\">※聊天分頁的內容已更新。 請重新選擇聊天分頁或重新打開聊天視窗。</div>\r\n</div>\r\n<div class=\"sticky-bottom\">\r\n  <form>\r\n\r\n<!--  -->\r\n\r\n    <chat-tachie [chatTabidentifier]=\"chatTabidentifier\"></chat-tachie>\r\n<!-- entyu end -->\r\n    <div class=\"chat-tab\">\r\n      <label *ngFor=\"let chatTab of chatMessageService.chatTabs; trackBy: trackByChatTab\">\r\n        <input name=\"chat-tab\" type=\"radio\" value=\"{{chatTab.identifier}}\" ng-control=\"options\" [(ngModel)]=\"chatTabidentifier\">\r\n        <div>{{chatTab.name}}<badge *ngIf=\"chatTab.hasUnread\" class=\"badge\" [count]=\"chatTab.unreadLength\"></badge></div>\r\n      </label>\r\n      <button class=\"tab-setting small-font\" (click)=\"showTabSetting()\"><i class=\"material-icons small-font\">settings</i>分頁設定</button>\r\n      <button class=\"tab-setting small-font\" (click)=\"showDiceTableSetting()\"><i class=\"material-icons small-font\">settings</i>骰子表設定</button>\r\n    </div>\r\n  </form>\r\n  <chat-input [chatTabidentifier]=\"chatTabidentifier\" [(gameType)]=\"gameType\" [(sendFrom)]=\"sendFrom\"  (chat)=\"sendChat($event)\" (tabSwitch)=\"chatTabSwitchRelative($event)\"></chat-input>\r\n</div>\r\n\r\n      \r\n      \r\n      \r\n\r\n\r\n<!--<div style=\"white-space:pre-wrap; font-size: 8px;\"><span>{{gameHelp}}</span></div>-->\r\n","import {\r\n  AfterViewInit,\r\n  ChangeDetectionStrategy,\r\n  ChangeDetectorRef,\r\n  Component,\r\n  Input,\r\n  OnDestroy,\r\n  OnInit,\r\n} from '@angular/core';\r\nimport { EventSystem, Network } from '@udonarium/core/system';\r\nimport { ModalService } from 'service/modal.service';\r\nimport { PanelService } from 'service/panel.service';\r\nimport { TabletopObject } from '@udonarium/tabletop-object';\r\nimport { GameCharacter } from '@udonarium/game-character';\r\nimport { PeerCursor } from '@udonarium/peer-cursor';\r\nimport { ChatTabList } from '@udonarium/chat-tab-list';\r\nimport { ObjectStore } from '@udonarium/core/synchronize-object/object-store';\r\n\r\n@Component({\r\n  selector: 'chat-message-setting',\r\n  templateUrl: './chat-message-setting.component.html',\r\n  styleUrls: ['./chat-message-setting.component.css'],\r\n  changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class ChatMessageSettingComponent implements OnInit, OnDestroy, AfterViewInit {\r\n\r\n  @Input() isAllowedEmpty: boolean = false;\r\n  @Input() tabletopObject: GameCharacter = null;\r\n\r\n  get myPeer(): PeerCursor { return PeerCursor.myCursor; }\r\n\r\n  get chatTabList(): ChatTabList { return ObjectStore.instance.get<ChatTabList>('ChatTabList'); }\r\n\r\n\r\n  constructor(\r\n    private changeDetector: ChangeDetectorRef,\r\n    private panelService: PanelService,\r\n    private modalService: ModalService\r\n//    private chatTabList: ChatTabList\r\n  ) {\r\n    \r\n  }\r\n\r\n  changeDispFlagTime(){\r\n    EventSystem.trigger('RE_DRAW_CHAT', {  });\r\n    //���g�Ȃ�\r\n  }\r\n\r\n  changeDispFlagUserId(){\r\n    EventSystem.trigger('RE_DRAW_CHAT', {  });\r\n    //���g�Ȃ�\r\n  }\r\n\r\n  changeTachieInWindow(){\r\n    //���g�Ȃ�\r\n  }\r\n\r\n  changeKeepTachieOutWindow(){\r\n    //���g�Ȃ�\r\n  }\r\n  \r\n  ngOnInit() {\r\n  }\r\n  \r\n  \r\n  ngAfterViewInit() {\r\n  }\r\n\r\n  ngOnDestroy() {\r\n  }\r\n\r\n}\r\n","<div id=\"file-list\">\r\n  <div class=\"table\">\r\n    <div class=\"table-cell\" style = \"width:16em\">\r\n        在視窗中顯示立繪:\r\n    </div>\r\n    <div class=\"table-cell\" >\r\n      <input type=\"checkbox\" value=\"isTachieInWindow\"  [(ngModel)]=\"chatTabList.isTachieInWindow\"\r\n       name=\"tachieInWindow\" (click)=\"changeTachieInWindow()\">\r\n    </div>\r\n\r\n  </div>\r\n  <div class=\"table\">\r\n    <div class=\"table-cell\" style = \"width:16em\">\r\n        鼠標離開視窗時<br>\r\n        保持視窗外的立繪:\r\n    </div>\r\n    <div class=\"table-cell\" >\r\n      <input type=\"checkbox\" value=\"isKeepTachieOutWindow\"  [(ngModel)]=\"chatTabList.isKeepTachieOutWindow\"\r\n       name=\"isKeepTachieOutWindow\" (click)=\"changeKeepTachieOutWindow()\"\r\n       [attr.disabled]=\"chatTabList.isTachieInWindow ? '' : null\">\r\n    </div>\r\n\r\n  </div>\r\n  <div class=\"table\">\r\n    <div class=\"table-cell\" style = \"width:16em\">\r\n        簡易顯示時間:\r\n    </div>\r\n    <div class=\"table-cell\" >\r\n      <input type=\"checkbox\" value=\"simpleDispFlagTime\"  [(ngModel)]=\"chatTabList.simpleDispFlagTime\"\r\n       name=\"hideInventory\" (click)=\"changeDispFlagTime()\">\r\n    </div>\r\n  </div>\r\n  <div class=\"table\">\r\n    <div class=\"table-cell\" style = \"width:16em\">\r\n        簡易顯示ID:\r\n    </div>\r\n    <div class=\"table-cell\" >\r\n      <input type=\"checkbox\" value=\"simpleDispFlagUserId\"  [(ngModel)]=\"chatTabList.simpleDispFlagUserId\"\r\n       name=\"hideInventory\" (click)=\"changeDispFlagUserId()\">\r\n    </div>\r\n  </div>\r\n\r\n</div>","import { animate, keyframes, state, style, transition, trigger } from '@angular/animations';\r\nimport { Component, Input, OnChanges } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'badge',\r\n  templateUrl: './badge.component.html',\r\n  styleUrls: ['./badge.component.css'],\r\n  animations: [\r\n    trigger('bounce', [\r\n      state('active', style({ transform: '' })),\r\n      transition('* => active', [\r\n        animate('600ms ease', keyframes([\r\n          style({ transform: 'scale3d(0.5, 0.5, 0.5)', offset: 0 }),\r\n          style({ transform: 'scale3d(2, 2, 2)', offset: 0.5 }),\r\n          style({ transform: 'scale3d(0.75, 0.75, 0.75)', offset: 0.75 }),\r\n          style({ transform: 'scale3d(1.125, 1.125, 1.125)', offset: 0.875 }),\r\n          style({ transform: 'scale3d(1.0, 1.0, 1.0)', offset: 1.0 })\r\n        ]))\r\n      ])\r\n    ])\r\n  ]\r\n})\r\nexport class BadgeComponent implements OnChanges {\r\n  @Input() count: number = 0;\r\n  animeState: string = 'active';\r\n\r\n  ngOnChanges() {\r\n    this.animeState = 'inactive';\r\n    setTimeout(() => { this.animeState = 'active'; });\r\n  }\r\n\r\n  animationShuffleDone(event: any) {\r\n    this.animeState = 'inactive';\r\n  }\r\n\r\n}\r\n","<div class=\"badge\" [@bounce]=\"animeState\">{{count}}</div>\r\n","import { EventSystem, Network } from '../system';\r\nimport { UUID } from '../system/util/uuid';\r\nimport { BufferSharingTask } from './buffer-sharing-task';\r\nimport { FileReaderUtil } from './file-reader-util';\r\nimport { ImageContext, ImageFile, ImageState } from './image-file';\r\nimport { CatalogItem, ImageStorage } from './image-storage';\r\nimport { MimeType } from './mime-type';\r\n\r\nexport class ImageSharingSystem {\r\n  private static _instance: ImageSharingSystem\r\n  static get instance(): ImageSharingSystem {\r\n    if (!ImageSharingSystem._instance) ImageSharingSystem._instance = new ImageSharingSystem();\r\n    return ImageSharingSystem._instance;\r\n  }\r\n\r\n  private sendTaskMap: Map<string, BufferSharingTask<ImageContext[]>> = new Map();\r\n  private receiveTaskMap: Map<string, BufferSharingTask<ImageContext[]>> = new Map();\r\n  private maxSendTask: number = 2;\r\n  private maxReceiveTask: number = 4;\r\n\r\n  private constructor() {\r\n    console.log('FileSharingSystem ready...');\r\n  }\r\n\r\n  initialize() {\r\n    EventSystem.register(this)\r\n      .on('CONNECT_PEER', 1, event => {\r\n        if (!event.isSendFromSelf) return;\r\n        console.log('CONNECT_PEER ImageStorageService !!!', event.data.peerId);\r\n        ImageStorage.instance.synchronize();\r\n      })\r\n      .on('XML_LOADED', event => {\r\n        convertUrlImage(event.data.xmlElement);\r\n      })\r\n      .on('SYNCHRONIZE_FILE_LIST', event => {\r\n        if (event.isSendFromSelf) return;\r\n        console.log('SYNCHRONIZE_FILE_LIST ImageStorageService ' + event.sendFrom);\r\n\r\n        let otherCatalog: CatalogItem[] = event.data;\r\n        let request: CatalogItem[] = [];\r\n\r\n        for (let item of otherCatalog) {\r\n          let image: ImageFile = ImageStorage.instance.get(item.identifier);\r\n          if (image === null) {\r\n            image = ImageFile.createEmpty(item.identifier);\r\n            ImageStorage.instance.add(image);\r\n          }\r\n          if (image.state < ImageState.COMPLETE && !this.receiveTaskMap.has(item.identifier)) {\r\n            request.push({ identifier: item.identifier, state: image.state });\r\n          }\r\n        }\r\n\r\n        // Peer切断時などのエッジケースに対応する\r\n        if (request.length < 1 && !this.hasActiveTask() && otherCatalog.length < ImageStorage.instance.getCatalog().length) {\r\n          ImageStorage.instance.synchronize(event.sendFrom);\r\n        }\r\n\r\n        if (request.length < 1 || this.isLimitReceiveTask()) {\r\n          return;\r\n        }\r\n        this.request(request, event.sendFrom);\r\n      })\r\n      .on('REQUEST_FILE_RESOURE', async event => {\r\n        if (event.isSendFromSelf) return;\r\n\r\n        let request: CatalogItem[] = event.data.identifiers;\r\n        let randomRequest: CatalogItem[] = [];\r\n\r\n        for (let item of request) {\r\n          let image: ImageFile = ImageStorage.instance.get(item.identifier);\r\n          if (image && item.state < image.state)\r\n            randomRequest.push({ identifier: item.identifier, state: item.state });\r\n        }\r\n\r\n        if (this.isLimitSendTask() === false && 0 < randomRequest.length && !this.existsSendTask(event.data.receiver)) {\r\n          // 送信\r\n          let updateImages: ImageContext[] = this.makeSendUpdateImages(randomRequest);\r\n          console.log('REQUEST_FILE_RESOURE ImageStorageService Send!!! ' + event.data.receiver + ' -> ' + updateImages.length);\r\n          this.startSendTask(updateImages, event.data.receiver);\r\n        } else {\r\n          // 中継\r\n          let candidatePeers: string[] = event.data.candidatePeers;\r\n          let index = candidatePeers.indexOf(Network.peerId);\r\n          if (-1 < index) candidatePeers.splice(index, 1);\r\n\r\n          for (let peerId of candidatePeers) {\r\n            console.log('REQUEST_FILE_RESOURE ImageStorageService Relay!!! ' + peerId + ' -> ' + event.data.identifiers);\r\n            EventSystem.call(event, peerId);\r\n            return;\r\n          }\r\n          console.log('REQUEST_FILE_RESOURE ImageStorageService あぶれた...' + event.data.receiver, randomRequest.length);\r\n        }\r\n      })\r\n      .on('UPDATE_FILE_RESOURE', event => {\r\n        let updateImages: ImageContext[] = event.data.updateImages;\r\n        console.log('UPDATE_FILE_RESOURE ImageStorageService ' + event.sendFrom + ' -> ', updateImages);\r\n        for (let context of updateImages) {\r\n          if (context.blob) context.blob = new Blob([context.blob], { type: context.type });\r\n          if (context.thumbnail.blob) context.thumbnail.blob = new Blob([context.thumbnail.blob], { type: context.thumbnail.type });\r\n          ImageStorage.instance.add(context);\r\n        }\r\n      })\r\n      .on('START_FILE_TRANSMISSION', event => {\r\n        console.log('START_FILE_TRANSMISSION ' + event.data.taskIdentifier);\r\n        let identifier = event.data.taskIdentifier;\r\n        let image: ImageFile = ImageStorage.instance.get(identifier);\r\n        if (this.receiveTaskMap.has(identifier) || (image && ImageState.COMPLETE <= image.state)) {\r\n          console.warn('CANCEL_TASK_ ' + identifier);\r\n          EventSystem.call('CANCEL_TASK_' + identifier, null, event.sendFrom);\r\n        } else {\r\n          this.startReceiveTask(identifier);\r\n        }\r\n      });\r\n  }\r\n\r\n  private destroy() {\r\n    EventSystem.unregister(this);\r\n  }\r\n\r\n  private async startSendTask(updateImages: ImageContext[], sendTo: string) {\r\n    let identifier = updateImages.length === 1 ? updateImages[0].identifier : UUID.generateUuid();\r\n    let task = BufferSharingTask.createSendTask<ImageContext[]>(identifier, sendTo);\r\n    this.sendTaskMap.set(task.identifier, task);\r\n    EventSystem.call('START_FILE_TRANSMISSION', { taskIdentifier: identifier }, sendTo);\r\n\r\n    /* hotfix issue #1 */\r\n    for (let context of updateImages) {\r\n      if (context.thumbnail.blob) {\r\n        context.thumbnail.blob = <any>await FileReaderUtil.readAsArrayBufferAsync(context.thumbnail.blob);\r\n      } else if (context.blob) {\r\n        context.blob = <any>await FileReaderUtil.readAsArrayBufferAsync(context.blob);\r\n      }\r\n    }\r\n    /* */\r\n\r\n    task.onfinish = (task, data) => {\r\n      this.stopSendTask(task.identifier);\r\n      ImageStorage.instance.synchronize();\r\n    }\r\n\r\n    task.start(updateImages);\r\n  }\r\n\r\n  private startReceiveTask(identifier: string) {\r\n    let task = BufferSharingTask.createReceiveTask<ImageContext[]>(identifier);\r\n    this.receiveTaskMap.set(identifier, task);\r\n    task.onfinish = (task, data) => {\r\n      this.stopReceiveTask(task.identifier);\r\n      if (data) EventSystem.trigger('UPDATE_FILE_RESOURE', { identifier: task.identifier, updateImages: data });\r\n      ImageStorage.instance.synchronize();\r\n    }\r\n\r\n    task.start();\r\n    console.log('startReceiveTask => ', this.receiveTaskMap.size);\r\n  }\r\n\r\n  private stopSendTask(identifier: string) {\r\n    let task = this.sendTaskMap.get(identifier);\r\n    if (task) { task.cancel(); }\r\n    this.sendTaskMap.delete(identifier);\r\n\r\n    console.log('stopSendTask => ', this.sendTaskMap.size);\r\n  }\r\n\r\n  private stopReceiveTask(identifier: string) {\r\n    let task = this.receiveTaskMap.get(identifier);\r\n    if (task) { task.cancel(); }\r\n    this.receiveTaskMap.delete(identifier);\r\n\r\n    console.log('stopReceiveTask => ', this.receiveTaskMap.size);\r\n  }\r\n\r\n  private request(request: CatalogItem[], peerId: string) {\r\n    console.log('requestFile() ' + peerId);\r\n    let peerIds = Network.peerIds;\r\n    peerIds.splice(peerIds.indexOf(Network.peerId), 1);\r\n    EventSystem.call('REQUEST_FILE_RESOURE', { identifiers: request, receiver: Network.peerId, candidatePeers: peerIds }, peerId);\r\n  }\r\n\r\n  private makeSendUpdateImages(catalog: CatalogItem[], maxSize: number = 1024 * 1024 * 0.5): ImageContext[] {\r\n    let updateImages: ImageContext[] = [];\r\n    let byteSize: number = 0;\r\n\r\n    // Fisher-Yates\r\n    for (let i = catalog.length - 1; 0 <= i; i--) {\r\n      let rand = Math.floor(Math.random() * (i + 1));\r\n      [catalog[i], catalog[rand]] = [catalog[rand], catalog[i]];\r\n    }\r\n\r\n    catalog.sort((a, b) => {\r\n      if (a.state < b.state) return -1;\r\n      if (a.state > b.state) return 1;\r\n      return 0;\r\n    });\r\n\r\n    for (let i = 0; i < catalog.length; i++) {\r\n      let item: { identifier: string, state: number } = catalog[i];\r\n      let image: ImageFile = ImageStorage.instance.get(item.identifier);\r\n\r\n      let context: ImageContext = {\r\n        identifier: image.identifier,\r\n        name: image.name,\r\n        type: '',\r\n        blob: null,\r\n        url: null, \r\n        thumbnail: { type: '', blob: null, url: null, }\r\n      };\r\n\r\n      if (image.state === ImageState.URL) {\r\n        context.url = image.url;\r\n      } else if (item.state === ImageState.NULL) {\r\n        context.thumbnail.blob = image.thumbnail.blob;//\r\n        context.thumbnail.type = image.thumbnail.type;\r\n      } else {\r\n        context.blob = image.blob;//\r\n        context.type = image.blob.type;\r\n      }\r\n\r\n      let size = context.blob\r\n        ? context.blob.size\r\n        : context.thumbnail.blob\r\n          ? context.thumbnail.blob.size\r\n          : 100;\r\n\r\n      updateImages.push(context);\r\n      byteSize += size;\r\n      if (maxSize < byteSize) break;\r\n    }\r\n    return updateImages;\r\n  }\r\n\r\n  private hasActiveTask(): boolean {\r\n    return 0 < this.sendTaskMap.size || 0 < this.receiveTaskMap.size;\r\n  }\r\n\r\n  private isLimitSendTask(): boolean {\r\n    return this.maxSendTask <= this.sendTaskMap.size;\r\n  }\r\n\r\n  private isLimitReceiveTask(): boolean {\r\n    return this.maxReceiveTask <= this.receiveTaskMap.size;\r\n  }\r\n\r\n  private existsSendTask(peerId: string): boolean {\r\n    for (let task of this.sendTaskMap.values()) {\r\n      if (task && task.sendTo === peerId) return true;\r\n    }\r\n    return false;\r\n  }\r\n}\r\n\r\nfunction convertUrlImage(xmlElement: Element) {\r\n  let urls: string[] = [];\r\n\r\n  let imageElements = xmlElement.querySelectorAll('*[type=\"image\"]');\r\n  for (let i = 0; i < imageElements.length; i++) {\r\n    let url = imageElements[i].innerHTML;\r\n    if (!ImageStorage.instance.get(url) && 0 < MimeType.type(url).length) {\r\n      urls.push(url);\r\n    }\r\n  }\r\n\r\n  imageElements = xmlElement.querySelectorAll('*[imageIdentifier]');\r\n  for (let i = 0; i < imageElements.length; i++) {\r\n    let url = imageElements[i].getAttribute('imageIdentifier');\r\n    if (!ImageStorage.instance.get(url) && 0 < MimeType.type(url).length) {\r\n      urls.push(url);\r\n    }\r\n  }\r\n  for (let url of urls) {\r\n    ImageStorage.instance.add(url)\r\n  }\r\n}\r\n","import { UUID } from '../system/util/uuid';\r\nimport { ObjectFactory } from './object-factory';\r\nimport { ObjectSerializer } from './object-serializer';\r\nimport { ObjectStore } from './object-store';\r\n\r\nexport interface ObjectContext {\r\n  aliasName: string;\r\n  identifier: string;\r\n  majorVersion: number;\r\n  minorVersion: number;\r\n  syncData: Object;\r\n}\r\n\r\nexport class GameObject {\r\n  private context: ObjectContext = {\r\n    aliasName: (<typeof GameObject>this.constructor).aliasName,\r\n    identifier: '',\r\n    majorVersion: 0,\r\n    minorVersion: 0,\r\n    syncData: {}\r\n  }\r\n\r\n  static get aliasName() { return ObjectFactory.instance.getAlias(this); }\r\n  get aliasName() { return this.context.aliasName; }\r\n  get identifier() { return this.context.identifier; }\r\n  get version() { return this.context.majorVersion + this.context.minorVersion; }\r\n\r\n  constructor(identifier: string = UUID.generateUuid()) {\r\n    this.context.identifier = identifier;\r\n  }\r\n\r\n  initialize() {\r\n    ObjectStore.instance.add(this);\r\n  }\r\n\r\n  destroy() {\r\n    ObjectStore.instance.delete(this);\r\n  }\r\n\r\n  // GameObject Lifecycle\r\n  onStoreAdded() { }\r\n\r\n  // GameObject Lifecycle\r\n  onStoreRemoved() { }\r\n\r\n  update() {\r\n    this.versionUp();\r\n    ObjectStore.instance.update(this.identifier);\r\n  }\r\n\r\n  private versionUp() {\r\n    this.context.majorVersion += 1;\r\n    this.context.minorVersion = Math.random();\r\n  }\r\n\r\n  apply(context: ObjectContext) {\r\n    if (context !== null && this.identifier === context.identifier) {\r\n      this.context.majorVersion = context.majorVersion;\r\n      this.context.minorVersion = context.minorVersion;\r\n      this.context.syncData = context.syncData;\r\n    }\r\n  }\r\n\r\n  clone(): this {\r\n    let xmlString = this.toXml();\r\n    return <this>ObjectSerializer.instance.parseXml(xmlString);\r\n  }\r\n\r\n  toContext(): ObjectContext {\r\n    return {\r\n      aliasName: this.context.aliasName,\r\n      identifier: this.context.identifier,\r\n      majorVersion: this.context.majorVersion,\r\n      minorVersion: this.context.minorVersion,\r\n      syncData: deepCopy(this.context.syncData)\r\n    }\r\n  }\r\n\r\n  toXml(): string {\r\n    return ObjectSerializer.instance.toXml(this);\r\n  }\r\n}\r\n\r\nfunction deepCopy(obj: Object): Object {\r\n  if (obj == null) return obj;\r\n  let clone = Array.isArray(obj) ? [] : {};\r\n  let keys = Object.getOwnPropertyNames(obj);\r\n  for (let key of keys) {\r\n    let type = typeof obj[key];\r\n    if (obj[key] != null && type === 'object') {\r\n      clone[key] = deepCopy(obj[key]);\r\n    } else if (type !== 'function') {\r\n      clone[key] = obj[key];\r\n    }\r\n  }\r\n  return clone;\r\n}\r\n","import { AfterViewInit, ChangeDetectorRef, Component, Input, NgZone, OnDestroy, OnInit } from '@angular/core';\r\nimport { AudioFile } from '@udonarium/core/file-storage/audio-file';\r\nimport { AudioPlayer, VolumeType } from '@udonarium/core/file-storage/audio-player';\r\nimport { AudioStorage } from '@udonarium/core/file-storage/audio-storage';\r\nimport { FileArchiver } from '@udonarium/core/file-storage/file-archiver';\r\n\r\nimport { ModalService } from 'service/modal.service';\r\nimport { PanelOption, PanelService } from 'service/panel.service';\r\n\r\nimport { ImageFile } from '@udonarium/core/file-storage/image-file';\r\nimport { ImageStorage } from '@udonarium/core/file-storage/image-storage';\r\nimport { ObjectSerializer } from '@udonarium/core/synchronize-object/object-serializer';\r\nimport { ObjectStore } from '@udonarium/core/synchronize-object/object-store';\r\nimport { EventSystem, Network } from '@udonarium/core/system';\r\nimport { CutIn } from '@udonarium/cut-in';\r\nimport { CutInLauncher } from '@udonarium/cut-in-launcher';\r\n\r\nimport { animate, keyframes, style, transition, trigger } from '@angular/animations';\r\n\r\nimport { PeerMenuComponent } from 'component/peer-menu/peer-menu.component';\r\n\r\n\r\n@Component({\r\n  selector: 'app-cut-in-window',\r\n  templateUrl: './cut-in-window.component.html',\r\n  styleUrls: ['./cut-in-window.component.css']\r\n/*\r\n  providers: [\r\n    PanelService,\r\n  ],\r\n  animations: [\r\n    trigger('flyInOut', [\r\n      transition('void => *', [\r\n        animate('100ms ease-out', keyframes([\r\n          style({ transform: 'scale(0.8, 0.8)', opacity: '0', offset: 0 }),\r\n          style({ transform: 'scale(1.0, 1.0)', opacity: '1', offset: 1.0 })\r\n        ]))\r\n      ]),\r\n      transition('* => void', [\r\n        animate(100, style({ transform: 'scale(0, 0)' }))\r\n      ])\r\n    ])\r\n  ]\r\n*/\r\n})\r\nexport class CutInWindowComponent implements AfterViewInit,OnInit, OnDestroy {\r\n\r\n  left : number = 0;\r\n  top : number = 0;\r\n  width : number = 200;\r\n  height : number = 150;\r\n  \r\n  minSize: number = 10;\r\n  maxSize: number = 1200;\r\n\r\n  private lazyUpdateTimer: NodeJS.Timer = null;\r\n  readonly audioPlayer: AudioPlayer = new AudioPlayer();\r\n  private cutInTimeOut = null ;\r\n  \r\n  cutIn: CutIn = null;\r\n\r\n  get audios(): AudioFile[] { return AudioStorage.instance.audios.filter(audio => !audio.isHidden); }\r\n  get cutInLauncher(): CutInLauncher { return ObjectStore.instance.get<CutInLauncher>('CutInLauncher'); }\r\n\r\n  getCutIns(): CutIn[] {\r\n    return ObjectStore.instance.getObjects(CutIn);\r\n  }\r\n  \r\n  startCutIn(){\r\n    if( !this.cutIn )return;\r\n    console.log('CutInWin ' + this.cutIn.name );\r\n    \r\n    let audio = this.cutIn.audio ;\r\n    if( audio ){\r\n      this.audioPlayer.loop = this.cutIn.isLoop;\r\n      this.audioPlayer.play( audio );\r\n    }\r\n    \r\n    if( this.cutIn.outTime > 0){\r\n      this.cutInTimeOut = setTimeout(() => {\r\n        this.cutInTimeOut = null;\r\n        this.panelService.close();\r\n      }, this.cutIn.outTime * 1000);\r\n    }\r\n  }\r\n\r\n  stopCutIn(){\r\n     this.audioPlayer.stop();\r\n  }\r\n  \r\n\r\n  constructor(\r\n    private modalService: ModalService,\r\n    private panelService: PanelService,\r\n    private changeDetectionRef: ChangeDetectorRef,\r\n    private ngZone: NgZone\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    EventSystem.register(this)\r\n      .on('START_CUT_IN', event => { \r\n        console.log('カットインウィンドウ>Event:START_CUT_IN ' + this.cutIn.name );\r\n        if( this.cutIn ){\r\n          if( this.cutIn.identifier == event.data.cutIn.identifier || this.cutIn.tagName == event.data.cutIn.tagName){\r\n            this.panelService.close();\r\n          }\r\n        }\r\n      })\r\n      .on('STOP_CUT_IN_BY_BGM', event => { \r\n        if( this.cutIn ){\r\n          console.log( \" 'STOP_CUT_IN_BY_BGM :\" + this.cutIn);\r\n          let audio = AudioStorage.instance.get( this.cutIn.audioIdentifier );\r\n\r\n          if( this.cutIn.tagName == '' && audio ){\r\n            this.panelService.close();\r\n          }\r\n        }\r\n      })\r\n      .on('STOP_CUT_IN', event => { \r\n        console.log('カットインウィンドウ>Event: ' + this.cutIn.name );\r\n        if( this.cutIn ){\r\n          if( this.cutIn.identifier == event.data.cutIn.identifier ){\r\n            this.panelService.close();\r\n          }\r\n        }\r\n      });\r\n  }\r\n    \r\n  ngAfterViewInit() {\r\n\r\n    if( this.cutIn ){\r\n      setTimeout(() => {\r\n        this.moveCutInPos();\r\n      },0);\r\n    }\r\n  }\r\n\r\n  moveCutInPos(){\r\n    \r\n    if( this.cutIn ){\r\n      \r\n      let cutin_w = this.cutIn.width;\r\n      let cutin_h = this.cutIn.height;\r\n\r\n      let margin_w = window.innerWidth - cutin_w ;\r\n      let margin_h = window.innerHeight - cutin_h - 25 ;\r\n    \r\n      if( margin_w < 0 )margin_w = 0 ;\r\n      if( margin_h < 0 )margin_h = 0 ;\r\n    \r\n      let margin_x = margin_w * this.cutIn.x_pos / 100;\r\n      let margin_y = margin_h * this.cutIn.y_pos / 100;\r\n\r\n      this.width = cutin_w ;\r\n      this.height = cutin_h + 25 ;\r\n      this.left = margin_x ;\r\n      this.top = margin_y;\r\n    }else{\r\n      \r\n      console.log(\"カットインが未定義で再生された\");\r\n    }\r\n  \r\n\r\n    this.panelService.width = this.width ;\r\n    this.panelService.height = this.height ;\r\n    this.panelService.left = this.left ;\r\n    this.panelService.top = this.top ;\r\n\r\n  }\r\n\r\n  ngOnDestroy() {\r\n      if( this.cutInTimeOut ){\r\n        clearTimeout(this.cutInTimeOut);\r\n        this.cutInTimeOut = null;\r\n      }\r\n      \r\n      this.stopCutIn();\r\n      EventSystem.unregister(this);\r\n      \r\n  }\r\n\r\n  private lazyNgZoneUpdate() {\r\n    if (this.lazyUpdateTimer !== null) return;\r\n    this.lazyUpdateTimer = setTimeout(() => {\r\n      this.lazyUpdateTimer = null;\r\n      this.ngZone.run(() => { });\r\n    }, 100);\r\n  }\r\n\r\n \r\n}\r\n","<div class=\"cut-in\" *ngIf=\"cutIn\" >\r\n  <img  [src]=\"cutIn.cutInImage.url | safe: 'resourceUrl'\">\r\n</div>\r\n","//entyu_2 #92\r\nimport { ImageTag } from './image-tag';\r\nimport { SyncObject } from './core/synchronize-object/decorator';\r\nimport { ObjectNode } from './core/synchronize-object/object-node';\r\nimport { InnerXml } from './core/synchronize-object/object-serializer';\r\nimport { ObjectStore } from './core/synchronize-object/object-store';\r\nimport { ImageFile } from './core/file-storage/image-file';\r\n\r\n@SyncObject('image-tag-list')\r\nexport class ImageTagList extends ObjectNode implements InnerXml {\r\n  private identifiers: string[] = [];\r\n\r\n  // GameObject Lifecycle\r\n  onStoreAdded() {\r\n    super.onStoreAdded();\r\n    ObjectStore.instance.remove(this); // ObjectStore�ɂ͓o�^���Ȃ�\r\n  }\r\n\r\n  innerXml(): string {\r\n    return Array.from(new Set(this.identifiers))\r\n      .map(identifier => ImageTag.get(identifier))\r\n      .filter(imageTag => imageTag)\r\n      .map(imageTag => imageTag.toXml())\r\n      .join('');\r\n  }\r\n\r\n  static create(images: ImageFile[]): ImageTagList {\r\n    const imageTagList = new ImageTagList();\r\n\r\n    imageTagList.identifiers = images.map(image => image.identifier);\r\n\r\n    return imageTagList;\r\n  }\r\n}\r\n//\r\n","import { EventSystem as _EventSystem } from './event/event-system';\r\nimport { Network as _Network } from './network/network';\r\n\r\nexport { Event } from './event/event';\r\nexport { Listener } from './event/listener';\r\n\r\nexport const EventSystem = _EventSystem.instance;\r\nexport const Network = _Network.instance;\r\n","import * as Pako from 'pako';\r\n\r\nimport { setZeroTimeout } from './zero-timeout';\r\n\r\nexport async function compressAsync(data: Uint8Array, chunkSize?: number): Promise<Uint8Array> {\r\n  const deflate = new Pako.Deflate({ level: 2, gzip: true });\r\n\r\n  try {\r\n    await processAsync(deflate, data, chunkSize);\r\n    return deflate.result as Uint8Array;\r\n  } catch (e) {\r\n    console.error(e);\r\n  }\r\n  return null;\r\n}\r\n\r\nexport async function decompressAsync(data: Uint8Array, chunkSize?: number): Promise<Uint8Array> {\r\n  const inflate = new Pako.Inflate();\r\n\r\n  try {\r\n    await processAsync(inflate, data, chunkSize);\r\n    return inflate.result as Uint8Array;\r\n  } catch (e) {\r\n    console.error(e);\r\n  }\r\n  return null;\r\n}\r\n\r\nasync function processAsync<T extends Pako.Deflate | Pako.Inflate>(pakoObj: T, data: Uint8Array, chunkSize: number = 16 * 1024): Promise<T> {\r\n  let total = Math.ceil(data.byteLength / chunkSize);\r\n  let sliceData: Uint8Array = null;\r\n\r\n  for (let sliceIndex = 0; sliceIndex < total; sliceIndex++) {\r\n    await waitTickAsync();\r\n    sliceData = data.slice(sliceIndex * chunkSize, (sliceIndex + 1) * chunkSize);\r\n    pakoObj.push(sliceData, total <= sliceIndex + 1);\r\n  }\r\n\r\n  if (pakoObj.err) throw new Error(`error: ${pakoObj.err}`);\r\n  return pakoObj;\r\n}\r\n\r\nfunction waitTickAsync(): Promise<void> {\r\n  return new Promise(resolve => setZeroTimeout(resolve));\r\n}\r\n","import { Component, OnDestroy, OnInit } from '@angular/core';\r\n\r\nimport { ChatTab } from '@udonarium/chat-tab';\r\nimport { ChatTabList } from '@udonarium/chat-tab-list';\r\nimport { ObjectSerializer } from '@udonarium/core/synchronize-object/object-serializer';\r\nimport { ObjectStore } from '@udonarium/core/synchronize-object/object-store';\r\nimport { EventSystem, Network } from '@udonarium/core/system';\r\n\r\nimport { ChatMessageService } from 'service/chat-message.service';\r\nimport { ModalService } from 'service/modal.service';\r\nimport { PanelService } from 'service/panel.service';\r\nimport { SaveDataService } from 'service/save-data.service';\r\nimport { PeerCursor } from '@udonarium/peer-cursor';\r\n\r\n\r\n@Component({\r\n  selector: 'app-chat-tab-setting',\r\n  templateUrl: './chat-tab-setting.component.html',\r\n  styleUrls: ['./chat-tab-setting.component.css']\r\n})\r\nexport class ChatTabSettingComponent implements OnInit, OnDestroy {\r\n  selectedTab: ChatTab = null;\r\n  selectedTabXml: string = '';\r\n\r\n  get tabName(): string { return this.selectedTab.name; }\r\n  set tabName(tabName: string) { if (this.isEditable) this.selectedTab.name = tabName; }\r\n\r\n  get chatTabs(): ChatTab[] { return this.chatMessageService.chatTabs; }\r\n  get isEmpty(): boolean { return this.chatMessageService.chatTabs.length < 1 }\r\n  get isDeleted(): boolean { return this.selectedTab ? ObjectStore.instance.get(this.selectedTab.identifier) == null : false; }\r\n  get isEditable(): boolean { return !this.isEmpty && !this.isDeleted; }\r\n\r\n  isSaveing: boolean = false;\r\n  progresPercent: number = 0;\r\n\r\n  allowDeleteLog = false;\r\n\r\n  constructor(\r\n    private modalService: ModalService,\r\n    private panelService: PanelService,\r\n    private chatMessageService: ChatMessageService,\r\n    private saveDataService: SaveDataService\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    Promise.resolve().then(() => this.modalService.title = this.panelService.title = 'チャットタブ設定');\r\n    EventSystem.register(this)\r\n      .on('DELETE_GAME_OBJECT', 1000, event => {\r\n        if (!this.selectedTab || event.data.identifier !== this.selectedTab.identifier) return;\r\n        let object = ObjectStore.instance.get(event.data.identifier);\r\n        if (object !== null) {\r\n          this.selectedTabXml = object.toXml();\r\n        }\r\n      });\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    EventSystem.unregister(this);\r\n  }\r\n\r\n  onChangeSelectTab(identifier: string) {\r\n    this.selectedTab = ObjectStore.instance.get<ChatTab>(identifier);\r\n    this.selectedTabXml = '';\r\n  }\r\n\r\n  create() {\r\n    ChatTabList.instance.addChatTab('タブ');\r\n  }\r\n\r\n  async save() {\r\n    if (!this.selectedTab || this.isSaveing) return;\r\n    this.isSaveing = true;\r\n    this.progresPercent = 0;\r\n\r\n    let fileName: string = 'chat_' + this.selectedTab.name;\r\n\r\n    await this.saveDataService.saveGameObjectAsync(this.selectedTab, fileName, percent => {\r\n      this.progresPercent = percent;\r\n    });\r\n\r\n    setTimeout(() => {\r\n      this.isSaveing = false;\r\n      this.progresPercent = 0;\r\n    }, 500);\r\n  }\r\n\r\n  get roomName():string {\r\n    let roomName = Network.peerContext && 0 < Network.peerContext.roomName.length\r\n      ? Network.peerContext.roomName\r\n      : 'ルームデータ';\r\n    return roomName;\r\n  }\r\n\r\n  private appendTimestamp(fileName: string): string {\r\n    let date = new Date();\r\n    let year = date.getFullYear();\r\n    let month = ('00' + (date.getMonth() + 1)).slice(-2);\r\n    let day = ('00' + date.getDate()).slice(-2);\r\n    let hours = ('00' + date.getHours()).slice(-2);\r\n    let minutes = ('00' + date.getMinutes()).slice(-2);\r\n\r\n    return fileName + `_${year}-${month}-${day}_${hours}${minutes}`;\r\n  }\r\n  \r\n  saveLog(){\r\n    if (!this.selectedTab) return;\r\n    let fileName: string = this.roomName + '_log_' + this.selectedTab.name;\r\n    let fileName_: string = this.appendTimestamp( fileName ) ;\r\n\r\n    this.saveDataService.saveHtmlChatLog(this.selectedTab, fileName_);\r\n  }\r\n\r\n  saveAllLog(){\r\n\r\n    let fileName: string = this.roomName + '_log_' + '全タブ';\r\n    let fileName_: string = this.appendTimestamp( fileName ) ;\r\n  \r\n    this.saveDataService.saveHtmlChatLogAll( fileName_);\r\n    \r\n  }\r\n\r\n\r\n\r\n  delete() {\r\n    if (!this.isEmpty && this.selectedTab) {\r\n      this.selectedTabXml = this.selectedTab.toXml();\r\n      this.selectedTab.destroy();\r\n    }\r\n  }\r\n\r\n  get myPeer(): PeerCursor { return PeerCursor.myCursor; }\r\n\r\n  deleteLog(){\r\n    if( !this.allowDeleteLog ) return;\r\n\r\n    if (!this.isEmpty && this.selectedTab) {\r\n      while( this.selectedTab.children.length > 0)\r\n        this.selectedTab.children[0].destroy();\r\n        this.selectedTab.tachieReset();\r\n    }\r\n    let mess = 'ログをクリアしました'\r\n    let gameSystem = null;\r\n    let sendTo ='';\r\n    this.chatMessageService.sendMessage(this.selectedTab, mess, gameSystem, this.myPeer.identifier, sendTo , 0 , '#000000' );\r\n  }\r\n\r\n  deleteLogALL(){\r\n    if( !this.allowDeleteLog ) return;\r\n    \r\n    let mess = 'ログをクリアしました'\r\n    let gameSystem = null;\r\n    let sendTo ='';\r\n    \r\n    for (let child of ChatTabList.instance.chatTabs) {\r\n      while( child.children.length > 0){\r\n        child.children[0].destroy();\r\n        child.tachieReset();\r\n      }\r\n      this.chatMessageService.sendMessage(child, mess, gameSystem, this.myPeer.identifier, sendTo , 0 , '#000000' );\r\n    }\r\n  }\r\n\r\n\r\n  restore() {\r\n    if (this.selectedTab && this.selectedTabXml) {\r\n      let restoreTable = <ChatTab>ObjectSerializer.instance.parseXml(this.selectedTabXml);\r\n      ChatTabList.instance.addChatTab(restoreTable);\r\n      this.selectedTabXml = '';\r\n    }\r\n  }\r\n\r\n  upTabIndex() {\r\n    if (!this.selectedTab) return;\r\n    let parentElement = this.selectedTab.parent;\r\n    let index: number = parentElement.children.indexOf(this.selectedTab);\r\n    if (0 < index) {\r\n      let prevElement = parentElement.children[index - 1];\r\n      parentElement.insertBefore(this.selectedTab, prevElement);\r\n    }\r\n  }\r\n\r\n  downTabIndex() {\r\n    if (!this.selectedTab) return;\r\n    let parentElement = this.selectedTab.parent;\r\n    let index: number = parentElement.children.indexOf(this.selectedTab);\r\n    if (index < parentElement.children.length - 1) {\r\n      let nextElement = parentElement.children[index + 1];\r\n      parentElement.insertBefore(nextElement, this.selectedTab);\r\n    }\r\n  }\r\n}\r\n","<div class=\"flex-container\">\r\n  <div class=\"flex-item no-grow\">\r\n    <div>\r\n      <button (click)=\"create()\">新增聊天分頁</button>\r\n    </div>\r\n    <select style=\"width: 10em;\" size=\"10\" (change)=\"onChangeSelectTab($event.target.value)\" [ngModel]=\"selectedTab?.identifier\">\r\n      <option *ngFor=\"let chatTab of chatTabs\" value=\"{{chatTab.identifier}}\">{{chatTab.name}}</option>\r\n    </select>\r\n  </div>\r\n  <div class=\"flex-item\">\r\n    <ng-container *ngIf=\"!isEmpty && selectedTab\">\r\n      <div>分頁名 :\r\n        <input [(ngModel)]=\"tabName\" placeholder=\"Name\" [attr.disabled]=\"!isEditable ? '' : null\" />\r\n      </div>\r\n      <hr/>\r\n      <div>\r\n        <ng-container *ngIf=\"!isDeleted\">\r\n          <button (click)=\"upTabIndex()\">↑</button>\r\n          <button (click)=\"downTabIndex()\">↓</button>\r\n          <button [disabled]=\"isSaveing\" (click)=\"save()\">\r\n            <div style=\"position: relative;\">\r\n              <div [ngClass]=\"{'is-hidden': isSaveing}\">保存</div>\r\n              <div *ngIf=\"isSaveing\" class=\"progress\">{{progresPercent}}%</div>\r\n            </div>\r\n          </button>\r\n          <span style=\"display:inline-block; width:2em;\"></span>\r\n          <button class=\"danger\" (click)=\"delete()\" [attr.disabled]=\"chatTabs.length <= 1 ? '' : null\">刪除選擇分頁</button>\r\n        </ng-container>\r\n        <ng-container *ngIf=\"isDeleted\">\r\n          <button (click)=\"restore()\">還原</button>\r\n        </ng-container>\r\n        <ng-container *ngIf=\"!isDeleted\">\r\n        <hr>\r\n          <button (click)=\"saveLog()\" style = \"width:9em\">保存聊天紀錄</button><span style= \"font-size:12px\">保存從列表中選擇的紀錄</span><br>\r\n          <button (click)=\"saveAllLog()\" style = \"width:9em\">保存全分頁聊天紀錄</button><span style= \"font-size:12px\">按時間順序將所有內容一起保存</span>\r\n        </ng-container>\r\n        <hr>\r\n        <br><br>\r\n        <ng-container *ngIf=\"!isDeleted\">\r\n          啟用紀錄清除功能<input type=\"checkbox\" value=\"allowDeleteLog\"  [(ngModel)]=\"allowDeleteLog\"><br>\r\n          <button class=\"danger\" (click)=\"deleteLog()\" [attr.disabled]=\"chatTabs.length <= 1 ? '' : null\" style = \"width:9em\"\r\n          [attr.disabled]=\"!allowDeleteLog ? '' : null\"\r\n          >清除選擇聊天紀錄</button>\r\n          <button class=\"danger\" (click)=\"deleteLogALL()\" [attr.disabled]=\"chatTabs.length <= 1 ? '' : null\" style = \"width:9em\"\r\n          [attr.disabled]=\"!allowDeleteLog ? '' : null\"\r\n          >清除所有聊天紀錄</button>\r\n        </ng-container>\r\n\r\n      </div>\r\n    </ng-container>\r\n  </div>\r\n</div>\r\n<ng-container *ngIf=\"isEmpty\">\r\n  <div style=\"font-size: 12px;\">※尚未創建聊天分頁。 您可以從“新增聊天分頁”創建聊天分頁。</div>\r\n</ng-container>","import { AfterViewInit, Directive, ElementRef, EventEmitter, Input, NgZone, OnDestroy, Output } from '@angular/core';\r\nimport { CSSNumber } from '@udonarium/transform/css-number';\r\nimport { PointerCoordinate } from 'service/pointer-device.service';\r\n\r\nimport { InputHandler } from './input-handler';\r\n\r\n@Directive({\r\n  selector: '[appDraggable]'\r\n})\r\nexport class DraggableDirective implements AfterViewInit, OnDestroy {\r\n  @Input('draggable.disable') isDisable: boolean = false;\r\n  @Input('draggable.bounds') boundsSelector: string = 'body';\r\n  @Input('draggable.handle') handleSelector: string = '';\r\n  @Input('draggable.unhandle') unhandleSelector: string = 'input,textarea,button,select,option,span';\r\n  @Input('draggable.stack') stackSelector: string = '';\r\n  @Input('draggable.opacity') opacity: number = 0.7;\r\n\r\n  @Output('draggable.start') onstart: EventEmitter<MouseEvent | TouchEvent> = new EventEmitter();\r\n  @Output('draggable.move') onmove: EventEmitter<MouseEvent | TouchEvent> = new EventEmitter();\r\n  @Output('draggable.end') onend: EventEmitter<MouseEvent | TouchEvent> = new EventEmitter();\r\n\r\n  private callbackOnResize = this.adjustPosition.bind(this);\r\n\r\n  private input: InputHandler = null;\r\n  private startPosition: PointerCoordinate = { x: 0, y: 0, z: 0 };\r\n  private startPointer: PointerCoordinate = { x: 0, y: 0, z: 0 };\r\n  private prevTrans: PointerCoordinate = { x: 0, y: 0, z: 0 };\r\n\r\n  constructor(\r\n    private ngZone: NgZone,\r\n    private elementRef: ElementRef<HTMLElement>\r\n  ) { }\r\n\r\n  ngAfterViewInit() {\r\n    this.initialize();\r\n    this.adjustPosition();\r\n    this.setForeground();\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.cancel();\r\n    this.destroy();\r\n  }\r\n\r\n  private initialize() {\r\n    this.ngZone.runOutsideAngular(() => {\r\n      this.input = new InputHandler(this.elementRef.nativeElement);\r\n      window.addEventListener('resize', this.callbackOnResize, false);\r\n    });\r\n    this.input.onStart = this.onInputStart.bind(this);\r\n    this.input.onMove = this.onInputMove.bind(this);\r\n    this.input.onEnd = this.onInputEnd.bind(this);\r\n    this.input.onContextMenu = this.onContextMenu.bind(this);\r\n  }\r\n\r\n  cancel() {\r\n    this.input.cancel();\r\n  }\r\n\r\n  destroy() {\r\n    window.removeEventListener('resize', this.callbackOnResize, false);\r\n    this.input.destroy();\r\n  }\r\n\r\n  private onInputStart(e: MouseEvent | TouchEvent) {\r\n    if ((e as MouseEvent).button === 1 || (e as MouseEvent).button === 2) return this.cancel();\r\n    this.setForeground();\r\n    this.startPosition = this.calcElementPosition(this.elementRef.nativeElement);\r\n\r\n    this.startPointer = this.input.pointer;\r\n    this.prevTrans = { x: 0, y: 0, z: 0 };\r\n\r\n    let isHandle = this.isHandleElement(e.target as HTMLElement);\r\n    let isUnhandle = this.isUnhandleElement(e.target as HTMLElement);\r\n    let isScrollable = (e as TouchEvent).touches != null ? this.isScrollableElement(e.target as HTMLElement) : false;\r\n\r\n    if (!isHandle || isUnhandle || isScrollable) {\r\n      this.cancel();\r\n      return;\r\n    }\r\n    e.stopPropagation();\r\n  }\r\n\r\n  private onInputMove(e: MouseEvent | TouchEvent) {\r\n    let trans = {\r\n      x: this.input.pointer.x - this.startPointer.x,\r\n      y: this.input.pointer.y - this.startPointer.y,\r\n      z: this.input.pointer.z - this.startPointer.z\r\n    };\r\n\r\n    let diff = {\r\n      x: trans.x - this.prevTrans.x,\r\n      y: trans.y - this.prevTrans.y,\r\n      z: trans.z - this.prevTrans.z\r\n    };\r\n\r\n    let correction = this.calcCorrectionPosition(diff);\r\n    trans.x += correction.x;\r\n    trans.y += correction.y;\r\n    trans.z += correction.z;\r\n\r\n    if (0 < trans.x ** 2 + trans.y ** 2 + trans.z ** 2) {\r\n      this.elementRef.nativeElement.style.opacity = this.opacity + '';\r\n    }\r\n\r\n    this.elementRef.nativeElement.style.left = trans.x + this.startPosition.x + 'px';\r\n    this.elementRef.nativeElement.style.top = trans.y + this.startPosition.y + 'px';\r\n\r\n    this.prevTrans = trans;\r\n    if (e.cancelable) e.preventDefault();\r\n    e.stopPropagation();\r\n  }\r\n\r\n  private onInputEnd(e: MouseEvent | TouchEvent) {\r\n    this.elementRef.nativeElement.style.opacity = null;\r\n    if (this.input.isDragging && e.cancelable) {\r\n      this.preventClickIfNeeded(e);\r\n      e.preventDefault();\r\n    }\r\n    e.stopPropagation();\r\n  }\r\n\r\n  private onContextMenu(e: MouseEvent | TouchEvent) {\r\n    e.stopPropagation();\r\n  }\r\n\r\n  private preventClickIfNeeded(e: MouseEvent | TouchEvent) {\r\n    if ((e as TouchEvent).touches != null) return;\r\n\r\n    let diffX = this.input.pointer.x - this.startPointer.x;\r\n    let diffY = this.input.pointer.y - this.startPointer.y;\r\n    let diffZ = this.input.pointer.z - this.startPointer.z;\r\n    let distance = diffX ** 2 + diffY ** 2 + diffZ ** 2;\r\n\r\n    if (15 ** 2 > distance) return;\r\n\r\n    let callback = (e: Event) => {\r\n      if (e.cancelable) e.preventDefault();\r\n      e.stopPropagation();\r\n    };\r\n\r\n    this.elementRef.nativeElement.addEventListener('click', callback, true);\r\n    setTimeout(() => this.elementRef.nativeElement.removeEventListener('click', callback, true));\r\n  }\r\n\r\n  private adjustPosition() {\r\n    let current = this.calcElementPosition(this.elementRef.nativeElement);\r\n    let correction = this.calcCorrectionPosition();\r\n    this.elementRef.nativeElement.style.left = correction.x + current.x + 'px';\r\n    this.elementRef.nativeElement.style.top = correction.y + current.y + 'px';\r\n  }\r\n\r\n  private isHandleElement(target: HTMLElement): boolean {\r\n    if (this.handleSelector.length < 1) return true;\r\n    return this.isContainsElement(target, this.handleSelector);\r\n  }\r\n\r\n  private isUnhandleElement(target: HTMLElement): boolean {\r\n    if (this.unhandleSelector.length < 1) return false;\r\n    return this.isContainsElement(target, this.unhandleSelector);\r\n  }\r\n\r\n  private isContainsElement(target: HTMLElement, selectors: string): boolean {\r\n    let elms = this.elementRef.nativeElement.querySelectorAll<HTMLElement>(selectors);\r\n    for (let i = 0; i < elms.length; i++) {\r\n      if (elms[i].contains(target)) return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  private isScrollableElement(target: HTMLElement) {\r\n    let boundsElm = this.elementRef.nativeElement.ownerDocument.querySelector(this.boundsSelector);\r\n    let node = target;\r\n    let overflowType = ['scroll', 'auto'];\r\n    let positionType = ['fixed', 'sticky', '-webkit-sticky'];\r\n    while (node && boundsElm !== node && this.elementRef.nativeElement !== node) {\r\n      let css: CSSStyleDeclaration = window.getComputedStyle(node);\r\n      if (0 <= overflowType.indexOf(css.overflowY) && node.offsetHeight < node.scrollHeight) return true;\r\n      if (0 <= positionType.indexOf(css.position)) return false;\r\n      node = node.parentElement;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  private calcCorrectionPosition(diff: PointerCoordinate = { x: 0, y: 0, z: 0 }): PointerCoordinate {\r\n    let correction: PointerCoordinate = { x: 0, y: 0, z: 0 };\r\n    let box = this.elementRef.nativeElement.getBoundingClientRect();\r\n    let bounds = this.elementRef.nativeElement.ownerDocument.querySelector(this.boundsSelector).getBoundingClientRect();\r\n\r\n    if (bounds.right < box.right + diff.x) {\r\n      correction.x += bounds.right - (box.right + diff.x);\r\n    }\r\n    if (box.left + diff.x < bounds.left) {\r\n      correction.x += bounds.left - (box.left + diff.x);\r\n    }\r\n\r\n    if (bounds.bottom < box.bottom + diff.y) {\r\n      correction.y += bounds.bottom - (box.bottom + diff.y);\r\n    }\r\n    if (box.top + diff.y < bounds.top) {\r\n      correction.y += bounds.top - (box.top + diff.y);\r\n    }\r\n    return correction;\r\n  }\r\n\r\n  private calcElementPosition(target: HTMLElement): PointerCoordinate {\r\n    let css: CSSStyleDeclaration = window.getComputedStyle(target);\r\n    return {\r\n      x: CSSNumber.relation(css.left, target.parentElement.offsetWidth, target.parentElement.offsetWidth * 0.5),\r\n      y: CSSNumber.relation(css.top, target.parentElement.offsetHeight, target.parentElement.offsetHeight * 0.5),\r\n      z: 0\r\n    };\r\n  }\r\n\r\n  private setForeground() {\r\n    if (this.stackSelector.length < 1) return;\r\n    let stacks = this.elementRef.nativeElement.ownerDocument.querySelectorAll<HTMLElement>(this.stackSelector);\r\n    let topZindex: number = 0;\r\n    let bottomZindex: number = 99999;\r\n    stacks.forEach(elm => {\r\n      let zIndex = parseInt(elm.style.zIndex);\r\n      if (topZindex < zIndex) topZindex = zIndex;\r\n      if (zIndex < bottomZindex) bottomZindex = zIndex;\r\n    });\r\n\r\n    if (topZindex <= parseInt(this.elementRef.nativeElement.style.zIndex)) return;\r\n\r\n    stacks.forEach(elm => {\r\n      elm.style.zIndex = (parseInt(elm.style.zIndex) - bottomZindex) + '';\r\n    });\r\n    this.elementRef.nativeElement.style.zIndex = (topZindex + 1) + '';\r\n  }\r\n}\r\n","export namespace CSSNumber {\r\n  export function relation(value: any, relativeSize: number, defaultValue: number = 0): number {\r\n    if (typeof value === 'number') {\r\n      return value;\r\n    }\r\n    else if (typeof value === 'string') {\r\n      value = (<string>value).trim().toLowerCase();\r\n      if (value.indexOf('%') > 0) return (parse(value.replace('%', ''), defaultValue) / 100) * relativeSize;\r\n      else if (value.indexOf('px') > 0 || value.indexOf('pt') > 0) return parse(value.replace('px', ''), defaultValue);\r\n      else if (value.indexOf('vw') > 0) return (parse(value.replace('vw', ''), defaultValue) / 100) * window.innerWidth;\r\n      else if (value.indexOf('vh') > 0) return (parse(value.replace('vh', ''), defaultValue) / 100) * window.innerHeight;\r\n      else if (value.indexOf('vm') > 0) return (parse(value.replace('vm', ''), defaultValue) / 100) * Math.min(window.innerWidth, window.innerHeight);\r\n      else if (value.indexOf('em') > 0) return parse(value.replace('em', ''), defaultValue);\r\n      else if (value === 'top' || value === 'left') return 0;\r\n      else if (value === 'center' || value === 'middle') return relativeSize * 0.5;\r\n      else if (value === 'bottom' || value === 'right') return relativeSize;\r\n      return defaultValue;\r\n    }\r\n    return defaultValue;\r\n  }\r\n\r\n  export function parse(value: any, defaultValue: number = 0): number {\r\n    value = parseFloat(value);\r\n    if (isNaN(value)) return defaultValue;\r\n    return value;\r\n  }\r\n}","import { SyncObject, SyncVar } from './core/synchronize-object/decorator';\r\nimport { GameObject } from './core/synchronize-object/game-object';\r\nimport { InnerXml } from './core/synchronize-object/object-serializer';\r\n\r\nexport enum SortOrder {\r\n  ASC = 'ASC',\r\n  DESC = 'DESC'\r\n}\r\n\r\n@SyncObject('summary-setting')\r\nexport class DataSummarySetting extends GameObject implements InnerXml {\r\n  // todo:シングルトン化するのは妥当？\r\n  private static _instance: DataSummarySetting;\r\n  static get instance(): DataSummarySetting {\r\n    if (!DataSummarySetting._instance) {\r\n      DataSummarySetting._instance = new DataSummarySetting('DataSummarySetting');\r\n      DataSummarySetting._instance.initialize();\r\n    }\r\n    return DataSummarySetting._instance;\r\n  }\r\n\r\n  @SyncVar() sortTag: string = 'name';\r\n  @SyncVar() sortOrder: SortOrder = SortOrder.ASC;\r\n  @SyncVar() dataTag: string = 'HP MP 敏捷度 生命力 精神力 情報';\r\n\r\n  private _dataTag: string;\r\n  private _dataTags: string[];\r\n  get dataTags(): string[] {\r\n    if (this._dataTag !== this.dataTag) {\r\n      this._dataTag = this.dataTag;\r\n      this._dataTags = this.dataTag != null && 0 < this.dataTag.trim().length ? this.dataTag.trim().split(/\\s+/) : [];\r\n    }\r\n    return this._dataTags;\r\n  }\r\n\r\n  innerXml(): string { return ''; }\r\n  parseInnerXml(element: Element) {\r\n    // XMLからの新規作成を許可せず、既存のオブジェクトを更新する\r\n    let context = DataSummarySetting.instance.toContext();\r\n    context.syncData = this.toContext().syncData;\r\n    DataSummarySetting.instance.apply(context);\r\n    DataSummarySetting.instance.update();\r\n\r\n    this.destroy();\r\n  }\r\n}\r\n","import 'hammerjs';\r\n\r\nimport { enableProdMode } from '@angular/core';\r\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\r\n\r\nimport { AppModule } from './app/app.module';\r\nimport { environment } from './environments/environment';\r\n\r\nif (environment.production) {\r\n  enableProdMode();\r\n}\r\n\r\nplatformBrowserDynamic().bootstrapModule(AppModule)\r\n  .catch(err => console.error(err));\r\n","import { AfterViewInit, Component, Input, OnDestroy, OnInit } from '@angular/core';\r\n\r\nimport { EventSystem, Network } from '@udonarium/core/system';\r\nimport { DataElement } from '@udonarium/data-element';\r\nimport { PresetSound, SoundEffect } from '@udonarium/sound-effect';\r\nimport { TabletopObject } from '@udonarium/tabletop-object';\r\n\r\nimport { FileSelecterComponent } from 'component/file-selecter/file-selecter.component';\r\nimport { ModalService } from 'service/modal.service';\r\nimport { PanelService } from 'service/panel.service';\r\nimport { SaveDataService } from 'service/save-data.service';\r\n\r\nimport { GameCharacter } from '@udonarium/game-character'; //\r\n\r\n@Component({\r\n  selector: 'game-character-sheet',\r\n  templateUrl: './game-character-sheet.component.html',\r\n  styleUrls: ['./game-character-sheet.component.css']\r\n})\r\nexport class GameCharacterSheetComponent implements OnInit, OnDestroy, AfterViewInit {\r\n\r\n  @Input() tabletopObject: TabletopObject = null;\r\n  isEdit: boolean = false;\r\n\r\n  networkService = Network;\r\n\r\n  isSaveing: boolean = false;\r\n  progresPercent: number = 0;\r\n\r\n  constructor(\r\n    private saveDataService: SaveDataService,\r\n    private panelService: PanelService,\r\n    private modalService: ModalService\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    EventSystem.register(this)\r\n      .on('DELETE_GAME_OBJECT', -1000, event => {\r\n        if (this.tabletopObject && this.tabletopObject.identifier === event.data.identifier) {\r\n          this.panelService.close();\r\n        }\r\n      });\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    EventSystem.unregister(this);\r\n  }\r\n\r\n  toggleEditMode() {\r\n    this.isEdit = this.isEdit ? false : true;\r\n  }\r\n\r\n  addDataElement() {\r\n    if (this.tabletopObject.detailDataElement) {\r\n      let title = DataElement.create('標題', '', {});\r\n      let tag = DataElement.create('標籤', '', {});\r\n      title.appendChild(tag);\r\n      this.tabletopObject.detailDataElement.appendChild(title);\r\n    }\r\n  }\r\n\r\n  clone() {\r\n    let cloneObject = this.tabletopObject.clone();\r\n    cloneObject.location.x += 50;\r\n    cloneObject.location.y += 50;\r\n    if (this.tabletopObject.parent) this.tabletopObject.parent.appendChild(cloneObject);\r\n    cloneObject.update();\r\n    switch (this.tabletopObject.aliasName) {\r\n      case 'terrain':\r\n        SoundEffect.play(PresetSound.blockPut);\r\n        (cloneObject as any).isLocked = false;\r\n        break;\r\n      case 'card':\r\n      case 'card-stack':\r\n        (cloneObject as any).owner = '';\r\n        (cloneObject as any).toTopmost();\r\n      case 'table-mask':\r\n        (cloneObject as any).isLock = false;\r\n        SoundEffect.play(PresetSound.cardPut);\r\n        break;\r\n      case 'text-note':\r\n        (cloneObject as any).toTopmost();\r\n        SoundEffect.play(PresetSound.cardPut);\r\n        break;\r\n      case 'dice-symbol':\r\n        SoundEffect.play(PresetSound.dicePut);\r\n      default:\r\n        SoundEffect.play(PresetSound.piecePut);\r\n        break;\r\n    }\r\n  }\r\n  \r\n  clickHide(){\r\n    //処理なし\r\n  }\r\n\r\n  clickNoTalk(){\r\n    //処理なし    \r\n  }\r\n\r\n  clickLimitHeight(){\r\n    //高さが更新されない場合があるので雑だがこの方法で処理する\r\n    setTimeout(() => { \r\n      EventSystem.trigger('RESIZE_NOTE_OBJECT', {identifier :this.tabletopObject.identifier })\r\n    }, 100);\r\n  }\r\n\r\n  chkPopWidth( width ){\r\n    let character = <GameCharacter>this.tabletopObject;\r\n    if( width < 270 )\r\n      width = 270 ;\r\n    if( width > 800 )\r\n      width = 800 ;\r\n    character.overViewWidth = width;\r\n  }\r\n\r\n  chkPopMaxHeight( maxHeight ){\r\n    let character = <GameCharacter>this.tabletopObject;\r\n    if( maxHeight < 250 )\r\n      maxHeight = 250 ;\r\n    if( maxHeight > 1000 )\r\n      maxHeight = 1000 ;\r\n    character.overViewMaxHeight = maxHeight;\r\n  }  async saveToXML() {\r\n    if (!this.tabletopObject || this.isSaveing) return;\r\n    this.isSaveing = true;\r\n    this.progresPercent = 0;\r\n    let element = this.tabletopObject.commonDataElement.getFirstElementByName('name');\r\n    let objectName: string = element ? <string>element.value : '';\r\n\r\n    await this.saveDataService.saveGameObjectAsync(this.tabletopObject, 'xml_' + objectName, percent => {\r\n      this.progresPercent = percent;\r\n    });\r\n\r\n    setTimeout(() => {\r\n      this.isSaveing = false;\r\n      this.progresPercent = 0;\r\n    }, 500);\r\n  }\r\n\r\n  setLocation(locationName: string) {\r\n    this.tabletopObject.setLocation(locationName);\r\n  }\r\n\r\n  openModal(name: string = '', isAllowedEmpty: boolean = false) {\r\n    this.modalService.open<string>(FileSelecterComponent, { isAllowedEmpty: isAllowedEmpty }).then(value => {\r\n      if (!this.tabletopObject || !this.tabletopObject.imageDataElement || !value) return;\r\n      let element = this.tabletopObject.imageDataElement.getFirstElementByName(name);\r\n      if (!element) return;\r\n      element.value = value;\r\n    });\r\n  }\r\n}\r\n","<div class=\"top-header\">\r\n  <button (click)=\"toggleEditMode()\">編輯介面</button>\r\n  <ng-container [ngSwitch]=\"tabletopObject.aliasName\">\r\n    <ng-container *ngSwitchCase=\"'numberResource'\">\r\n    </ng-container>\r\n    <ng-container *ngSwitchCase=\"'card'\">\r\n      <button (click)=\"openModal('front')\">變更表面圖片</button>\r\n      <button (click)=\"openModal('back')\">變更裏面圖片</button>\r\n    </ng-container>\r\n    <ng-container *ngSwitchCase=\"'card-stack'\">\r\n    </ng-container>\r\n    <ng-container *ngSwitchCase=\"'terrain'\">\r\n      <button (click)=\"openModal('floor')\">變更底部圖片</button>\r\n      <button (click)=\"openModal('wall')\">變更牆面圖片</button>\r\n    </ng-container>\r\n    <ng-container *ngSwitchCase=\"'dice-symbol'\">\r\n      <button (click)=\"openModal(tabletopObject['face'])\" [disabled]=\"!tabletopObject['isVisible']\">變更骰子圖片</button>\r\n    </ng-container>\r\n    <ng-container *ngSwitchDefault>\r\n      <button (click)=\"openModal('imageIdentifier', true)\">變更圖片</button>\r\n    </ng-container>\r\n  </ng-container>\r\n  <button (click)=\"clone()\">複製</button>\r\n  <button (click)=\"saveToXML()\">保存</button>\r\n  <ng-container *ngIf=\"tabletopObject.aliasName === 'character'\">\r\n      <select *ngIf=\"tabletopObject\" (change)=\"setLocation($event.target.value)\" [ngModel]=\"tabletopObject.location.name\">\r\n      <option value=\"table\">桌面</option>\r\n      <option value=\"common\">共有倉庫</option>\r\n      <option value=\"{{networkService.peerId}}\">個人倉庫</option>\r\n      <option value=\"graveyard\">墓地</option>\r\n      </select>\r\n    <div class=\"extra-setting\" style=\"width:400px;\">\r\n      <div >\r\n        不顯示桌面清單\r\n        <input type=\"checkbox\" value=\"hideInventory\"  [(ngModel)]=\"tabletopObject.hideInventory\" name=\"hideInventory\" (click)=\"clickHide()\">\r\n      </div>\r\n      <div >\r\n        不進行發言\r\n        <input type=\"checkbox\" value=\"hideInventory\"  [(ngModel)]=\"tabletopObject.nonTalkFlag\" name=\"nonTalkFlag\" (click)=\"clickNoTalk()\">\r\n      </div>\r\n      \r\n      <div >\r\n        彈出視窗寬度\r\n          <input type=\"range\" [style]=\"'font-size: 0.8em; min-width: 1em; width:' + (10) + 'em; --min: 0; --max: ' + 0 + '; --val:' + 10 +';' | safe: 'style'\"\r\n          min=\"270\" max=\"1000\" [(ngModel)]=\"tabletopObject.overViewWidth\" />\r\n          <input [(ngModel)]=\"tabletopObject.overViewWidth\" type=\"number\" style=\"width:12em;\"\r\n          min=\"270\" max=\"1000\" name=\"popWidth\" (change)=\"chkPopWidth($event.target.value)\"\r\n          style=\"color: #555;\"/>\r\n      </div >\r\n      <div >\r\n        彈出視窗寬度最大\r\n       \r\n         <input type=\"range\" [style]=\"'font-size: 0.8em; min-width: 1em; width:' + (10) + 'em; --min: 0; --max: ' + 0 + '; --val:' + 10 +';' | safe: 'style'\"\r\n          min=\"250\" max=\"1000\" [(ngModel)]=\"tabletopObject.overViewMaxHeight\" />\r\n          <input [(ngModel)]=\"tabletopObject.overViewMaxHeight\" type=\"number\" style=\"width:12em;\"\r\n          min=\"250\" max=\"1000\" name=\"popHeight\" (change)=\"chkPopMaxHeight($event.target.value)\"\r\n          style=\"color: #555;\"/>\r\n      </div>\r\n    </div>\r\n  </ng-container>\r\n  <ng-container *ngIf=\"tabletopObject.aliasName === 'text-note'\">\r\n\r\n  <div class=\"extra-setting\" style=\"width:400px;\">\r\n      <div >\r\n        將高度限制為height設定値\r\n        <input type=\"checkbox\" value=\"limitHeight\"  [(ngModel)]=\"tabletopObject.limitHeight\" name=\"limitHeight\" (click)=\"clickLimitHeight()\">\r\n      </div>\r\n      <div>\r\n        彈出視窗寬度\r\n        <input type=\"range\" [style]=\"'font-size: 0.8em; min-width: 1em; width:' + (10) + 'em; --min: 0; --max: ' + 0 + '; --val:' + 10 +';' | safe: 'style'\"\r\n        min=\"250\" max=\"1000\" [(ngModel)]=\"tabletopObject.overViewWidth\" />\r\n        <input [(ngModel)]=\"tabletopObject.overViewWidth\" type=\"number\" \r\n        min=\"250\" max=\"1000\" name=\"popWidth\" (change)=\"chkPopWidth($event.target.value)\"\r\n        style=\"color: #555;\"/>\r\n      </div>\r\n      <div>\r\n      彈出視窗寬度最大\r\n      <input type=\"range\" [style]=\"'font-size: 0.8em; min-width: 1em; width:' + (10) + 'em; --min: 0; --max: ' + 0 + '; --val:' + 10 +';' | safe: 'style'\"\r\n        min=\"250\" max=\"1000\" [(ngModel)]=\"tabletopObject.overViewMaxHeight\" />\r\n       <input [(ngModel)]=\"tabletopObject.overViewMaxHeight\" type=\"number\" \r\n        min=\"250\" max=\"1000\" name=\"popWidth\" (change)=\"chkPopMaxHeight($event.target.value)\"\r\n        style=\"color: #555;\"/>\r\n      </div>\r\n    </div>\r\n  </ng-container>\r\n</div>\r\n\r\n\r\n  <div *ngIf=\"tabletopObject\" class=\"flex-container\">\r\n    <div *ngIf=\"0 < tabletopObject.imageFile?.url.length\" class=\"box main-image-box\">\r\n      <img class=\"main-image\" [src]=\"tabletopObject.imageFile.url | safe: 'resourceUrl'\" [alt]=\"tabletopObject.imageFile.name\"/>\r\n    </div>\r\n    <ng-container *ngIf=\"tabletopObject.commonDataElement\">\r\n      <div class=\"flex-item\">\r\n        <div class=\"table\">\r\n          <div class=\"table-row\" game-data-element [gameDataElement]=\"tabletopObject.commonDataElement\" [isTagLocked]=\"true\"></div>\r\n        </div>\r\n      </div>\r\n    </ng-container>\r\n\r\n    <ng-container *ngIf=\"tabletopObject.detailDataElement\">\r\n      <div class=\"flex-item\" *ngFor=\"let childElement of tabletopObject.detailDataElement.children\">\r\n        <div class=\"table\">\r\n          <div class=\"table-row\" game-data-element [gameDataElement]=\"childElement\" [isEdit]=\"isEdit\"></div>\r\n        </div>\r\n      </div>\r\n    </ng-container>\r\n\r\n    <ng-container [ngSwitch]=\"tabletopObject.aliasName\">\r\n      <ng-container *ngSwitchCase=\"'numberResource'\">\r\n      </ng-container>\r\n      <ng-container *ngSwitchCase=\"'card'\">\r\n      </ng-container>\r\n      <ng-container *ngSwitchCase=\"'card-stack'\">\r\n      </ng-container>\r\n      <ng-container *ngSwitchCase=\"'terrain'\">\r\n      </ng-container>\r\n      <ng-container *ngSwitchCase=\"'dice-symbol'\">\r\n      </ng-container>\r\n      <ng-container *ngSwitchDefault>\r\n\r\n        <ng-container *ngIf=\"tabletopObject.imageDataElement\">\r\n\r\n\r\n          <div class=\"flex-item\">\r\n            <div class=\"table\">\r\n              <div class=\"table-row\" game-data-element [gameDataElement]=\"tabletopObject.imageDataElement\" [isTagLocked]=\"true\" [isEdit]=\"isEdit\" [isImage]=\"true\"></div>\r\n            </div>\r\n          </div>\r\n        </ng-container>\r\n\r\n      </ng-container>\r\n    </ng-container>\r\n\r\n\r\n    <ng-container *ngIf=\"isEdit\">\r\n      <div class=\"flex-item\">\r\n        <button style=\"width:100%; color: #555;\" (click)=\"addDataElement()\">追加新項目</button>\r\n      </div>\r\n    </ng-container>\r\n  </div>","import { AudioFile, AudioState } from './audio-file';\r\nimport { FileReaderUtil } from './file-reader-util';\r\n\r\nexport enum VolumeType {\r\n  MASTER,\r\n  AUDITION,\r\n}\r\n\r\ndeclare global {\r\n  interface Window {\r\n    AudioContext: typeof AudioContext;\r\n    webkitAudioContext: typeof AudioContext;\r\n  }\r\n}\r\n\r\ntype AudioCache = { url: string, blob: Blob };\r\n\r\nexport class AudioPlayer {\r\n  private static _audioContext: AudioContext\r\n  static get audioContext(): AudioContext {\r\n    if (!AudioPlayer._audioContext) AudioPlayer._audioContext = new (window.AudioContext || window.webkitAudioContext)();\r\n    return AudioPlayer._audioContext;\r\n  }\r\n\r\n  private static _volume: number = 0.5;\r\n  static get volume(): number { return AudioPlayer._volume; }\r\n  static set volume(volume: number) {\r\n    AudioPlayer._volume = volume;\r\n    AudioPlayer.masterGainNode.gain.setTargetAtTime(AudioPlayer._volume, AudioPlayer.audioContext.currentTime, 0.01);\r\n  }\r\n\r\n  private static _auditionVolume: number = 0.5;\r\n  static get auditionVolume(): number { return AudioPlayer._auditionVolume; }\r\n  static set auditionVolume(auditionVolume: number) {\r\n    AudioPlayer._auditionVolume = auditionVolume;\r\n    AudioPlayer.auditionGainNode.gain.setTargetAtTime(AudioPlayer._auditionVolume, AudioPlayer.audioContext.currentTime, 0.01);\r\n  }\r\n\r\n  private static _masterGainNode: GainNode\r\n  private static get masterGainNode(): GainNode {\r\n    if (!AudioPlayer._masterGainNode) {\r\n      let masterGain = AudioPlayer.audioContext.createGain();\r\n      masterGain.gain.setValueAtTime(AudioPlayer._volume, AudioPlayer.audioContext.currentTime);\r\n      masterGain.connect(AudioPlayer.audioContext.destination);\r\n      AudioPlayer._masterGainNode = masterGain;\r\n    }\r\n    return AudioPlayer._masterGainNode;\r\n  }\r\n\r\n  private static _auditionGainNode: GainNode\r\n  private static get auditionGainNode(): GainNode {\r\n    if (!AudioPlayer._auditionGainNode) {\r\n      let auditionGain = AudioPlayer.audioContext.createGain();\r\n      auditionGain.gain.setValueAtTime(AudioPlayer._auditionVolume, AudioPlayer.audioContext.currentTime);\r\n      auditionGain.connect(AudioPlayer.audioContext.destination);\r\n      AudioPlayer._auditionGainNode = auditionGain;\r\n    }\r\n    return AudioPlayer._auditionGainNode;\r\n  }\r\n\r\n  static get rootNode(): AudioNode { return AudioPlayer.masterGainNode; }\r\n  static get auditionNode(): AudioNode { return AudioPlayer.auditionGainNode; }\r\n\r\n  private _audioElm: HTMLAudioElement;\r\n  private get audioElm(): HTMLAudioElement {\r\n    if (!this._audioElm) {\r\n      this._audioElm = new Audio();\r\n      this._audioElm.onplay = () => { }\r\n      this._audioElm.onpause = () => { this.mediaElementSource.disconnect(); }\r\n      this._audioElm.onended = () => { this.mediaElementSource.disconnect(); }\r\n    }\r\n    return this._audioElm;\r\n  }\r\n\r\n  private _mediaElementSource: MediaElementAudioSourceNode;\r\n  private get mediaElementSource(): MediaElementAudioSourceNode {\r\n    if (!this._mediaElementSource) this._mediaElementSource = AudioPlayer.audioContext.createMediaElementSource(this.audioElm);\r\n    return this._mediaElementSource;\r\n  }\r\n\r\n  audio: AudioFile;\r\n  volumeType: VolumeType = VolumeType.MASTER;\r\n\r\n  get volume(): number { return this.audioElm.volume; }\r\n  set volume(volume) { this.audioElm.volume = volume; }\r\n  get loop(): boolean { return this.audioElm.loop; }\r\n  set loop(loop) { this.audioElm.loop = loop; }\r\n  get paused(): boolean { return this.audioElm.paused; }\r\n\r\n  private static cacheMap: Map<string, AudioCache> = new Map();\r\n\r\n  constructor(audio?: AudioFile) {\r\n    this.audio = audio;\r\n  }\r\n\r\n  static play(audio: AudioFile, volume: number = 1.0) {\r\n    this.playBufferAsync(audio, volume);\r\n  }\r\n\r\n  play(audio: AudioFile = this.audio) {\r\n    this.stop();\r\n    this.audio = audio;\r\n    if (!this.audio) return;\r\n\r\n    let url = this.audio.url;\r\n\r\n    if (audio.state === AudioState.URL) {\r\n      if (AudioPlayer.cacheMap.has(audio.identifier)) {\r\n        url = AudioPlayer.cacheMap.get(audio.identifier).url;\r\n      } else {\r\n        AudioPlayer.createCacheAsync(audio);\r\n      }\r\n    }\r\n\r\n    this.mediaElementSource.connect(this.getConnectingAudioNode());\r\n    this.audioElm.src = url;\r\n    this.audioElm.load();\r\n    this.audioElm.play().catch(reason => { console.warn(reason); });\r\n  }\r\n\r\n  pause() {\r\n    this.audioElm.pause();\r\n  }\r\n\r\n  stop() {\r\n    if (!this.audioElm) return;\r\n    this.pause();\r\n    this.audioElm.currentTime = 0;\r\n    this.audioElm.src = '';\r\n    this.audioElm.load();\r\n    this.mediaElementSource.disconnect();\r\n  }\r\n\r\n  private getConnectingAudioNode() {\r\n    switch (this.volumeType) {\r\n      case VolumeType.AUDITION:\r\n        return AudioPlayer.auditionNode;\r\n      default:\r\n        return AudioPlayer.rootNode;\r\n    }\r\n  }\r\n\r\n  private static async playBufferAsync(audio: AudioFile, volume: number = 1.0) {\r\n    let source = await AudioPlayer.createBufferSourceAsync(audio);\r\n    if (!source) return;\r\n\r\n    let gain = AudioPlayer.audioContext.createGain();\r\n    gain.gain.setValueAtTime(volume, AudioPlayer.audioContext.currentTime);\r\n\r\n    gain.connect(AudioPlayer.rootNode);\r\n    source.connect(gain);\r\n\r\n    source.onended = () => {\r\n      source.stop();\r\n      source.disconnect();\r\n      gain.disconnect();\r\n      source.buffer = null;\r\n    };\r\n\r\n    source.start();\r\n  }\r\n\r\n  private static async createBufferSourceAsync(audio: AudioFile): Promise<AudioBufferSourceNode> {\r\n    if (!audio) return null;\r\n    try {\r\n      let blob = audio.blob;\r\n      if (audio.state === AudioState.URL) {\r\n        if (AudioPlayer.cacheMap.has(audio.identifier)) {\r\n          blob = AudioPlayer.cacheMap.get(audio.identifier).blob;\r\n        } else {\r\n          let cache = await AudioPlayer.createCacheAsync(audio);\r\n          blob = cache && cache.blob ? cache.blob : null;\r\n        }\r\n      }\r\n      if (!blob) return null;\r\n      let decodedData = await this.decodeAudioDataAsync(blob);\r\n      let source = AudioPlayer.audioContext.createBufferSource();\r\n      source.buffer = decodedData;\r\n      return source;\r\n    } catch (reason) {\r\n      console.warn(reason);\r\n      return null;\r\n    }\r\n  }\r\n\r\n  private static decodeAudioDataAsync(blob: Blob): Promise<AudioBuffer> {\r\n    return new Promise(async (resolve, reject) => {\r\n      AudioPlayer.audioContext.decodeAudioData(\r\n        await FileReaderUtil.readAsArrayBufferAsync(blob),\r\n        decodedData => resolve(decodedData),\r\n        error => reject(error));\r\n    });\r\n  }\r\n\r\n  private static async getBlobAsync(audio: AudioFile): Promise<Blob> {\r\n    if (audio.blob) return audio.blob;\r\n    if (audio.url.length < 1) throw new Error('えっ なにそれ怖い');\r\n\r\n    try {\r\n      let response = await fetch(audio.url);\r\n      if (!response.ok) throw new Error('Network response was not ok.');\r\n      let blob = await response.blob();\r\n      return blob;\r\n    } catch (error) {\r\n      console.warn('There has been a problem with your fetch operation: ', error.message);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  private static async createCacheAsync(audio: AudioFile): Promise<AudioCache> {\r\n    let cache = { url: audio.url, blob: null };\r\n    try {\r\n      cache.blob = await AudioPlayer.getBlobAsync(audio);\r\n    } catch (e) {\r\n      console.error(e);\r\n      return cache;\r\n    }\r\n\r\n    if (AudioPlayer.cacheMap.has(audio.identifier)) {\r\n      return AudioPlayer.cacheMap.get(audio.identifier);\r\n    }\r\n\r\n    cache.url = URL.createObjectURL(cache.blob);\r\n    AudioPlayer.cacheMap.set(audio.identifier, cache);\r\n    return cache;\r\n  }\r\n\r\n  static resumeAudioContext() {\r\n    AudioPlayer.audioContext.resume();\r\n    let callback = () => {\r\n      AudioPlayer.audioContext.resume();\r\n      document.removeEventListener('touchstart', callback, true);\r\n      document.removeEventListener('mousedown', callback, true);\r\n      console.log('resumeAudioContext');\r\n    }\r\n    document.addEventListener('touchstart', callback, true);\r\n    document.addEventListener('mousedown', callback, true);\r\n  }\r\n}\r\n","import { AfterViewInit, Component, OnDestroy, OnInit } from '@angular/core';\r\n\r\nimport { ImageFile } from '@udonarium/core/file-storage/image-file';\r\nimport { ImageStorage } from '@udonarium/core/file-storage/image-storage';\r\nimport { ObjectSerializer } from '@udonarium/core/synchronize-object/object-serializer';\r\nimport { ObjectStore } from '@udonarium/core/synchronize-object/object-store';\r\nimport { EventSystem, Network } from '@udonarium/core/system';\r\nimport { FilterType, GameTable, GridType } from '@udonarium/game-table';\r\nimport { TableSelecter } from '@udonarium/table-selecter';\r\n\r\nimport { FileSelecterComponent } from 'component/file-selecter/file-selecter.component';\r\nimport { ModalService } from 'service/modal.service';\r\nimport { PanelService } from 'service/panel.service';\r\nimport { SaveDataService } from 'service/save-data.service';\r\n\r\n@Component({\r\n  selector: 'game-table-setting',\r\n  templateUrl: './game-table-setting.component.html',\r\n  styleUrls: ['./game-table-setting.component.css']\r\n})\r\nexport class GameTableSettingComponent implements OnInit, OnDestroy, AfterViewInit {\r\n  minSize: number = 1;\r\n  maxSize: number = 100;\r\n  get tableBackgroundImage(): ImageFile {\r\n    if (!this.selectedTable) return ImageFile.Empty;\r\n    let file = ImageStorage.instance.get(this.selectedTable.imageIdentifier);\r\n    return file ? file : ImageFile.Empty;\r\n  }\r\n\r\n  get tableDistanceviewImage(): ImageFile {\r\n    if (!this.selectedTable) return ImageFile.Empty;\r\n    let file = ImageStorage.instance.get(this.selectedTable.backgroundImageIdentifier);\r\n    return file ? file : ImageFile.Empty;\r\n  }\r\n\r\n  get tableName(): string { return this.selectedTable.name; }\r\n  set tableName(tableName: string) { if (this.isEditable) this.selectedTable.name = tableName; }\r\n\r\n  get tableWidth(): number { return this.selectedTable.width; }\r\n  set tableWidth(tableWidth: number) { if (this.isEditable) this.selectedTable.width = tableWidth; }\r\n\r\n  get tableHeight(): number { return this.selectedTable.height; }\r\n  set tableHeight(tableHeight: number) { if (this.isEditable) this.selectedTable.height = tableHeight; }\r\n\r\n  get tableGridColor(): string { return this.selectedTable.gridColor.substring(0, 7); }\r\n  set tableGridColor(tableGridColor: string) { if (this.isEditable) this.selectedTable.gridColor = tableGridColor + \"e6\"; }\r\n\r\n  get tableGridShow(): boolean { return this.tableSelecter.gridShow; }\r\n  set tableGridShow(tableGridShow: boolean) {\r\n    this.tableSelecter.gridShow = tableGridShow;\r\n    EventSystem.trigger('UPDATE_GAME_OBJECT', this.tableSelecter.toContext()); // 自分にだけイベントを発行してグリッド更新を誘発\r\n  }\r\n\r\n  get tableGridSnap(): boolean { return this.tableSelecter.gridSnap; }\r\n  set tableGridSnap(tableGridSnap: boolean) {\r\n    this.tableSelecter.gridSnap = tableGridSnap;\r\n  }\r\n\r\n  get tableGridType(): GridType { return this.selectedTable.gridType; }\r\n  set tableGridType(gridType: GridType) { if (this.isEditable) this.selectedTable.gridType = Number(gridType); }\r\n\r\n  get tableDistanceviewFilter(): FilterType { return this.selectedTable.backgroundFilterType; }\r\n  set tableDistanceviewFilter(filterType: FilterType) { if (this.isEditable) this.selectedTable.backgroundFilterType = filterType; }\r\n\r\n  get tableSelecter(): TableSelecter { return ObjectStore.instance.get<TableSelecter>('tableSelecter'); }\r\n\r\n  selectedTable: GameTable = null;\r\n  selectedTableXml: string = '';\r\n\r\n  get isEmpty(): boolean { return this.tableSelecter ? (this.tableSelecter.viewTable ? false : true) : true; }\r\n  get isDeleted(): boolean {\r\n    if (!this.selectedTable) return true;\r\n    return ObjectStore.instance.get<GameTable>(this.selectedTable.identifier) == null;\r\n  }\r\n  get isEditable(): boolean {\r\n    return !this.isEmpty && !this.isDeleted;\r\n  }\r\n\r\n  isSaveing: boolean = false;\r\n  progresPercent: number = 0;\r\n\r\n  constructor(\r\n    private modalService: ModalService,\r\n    private saveDataService: SaveDataService,\r\n    private panelService: PanelService\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    Promise.resolve().then(() => this.modalService.title = this.panelService.title = '盤面設定');\r\n    this.selectedTable = this.tableSelecter.viewTable;\r\n    EventSystem.register(this)\r\n      .on('DELETE_GAME_OBJECT', 1000, event => {\r\n        if (!this.selectedTable || event.data.identifier !== this.selectedTable.identifier) return;\r\n        let object = ObjectStore.instance.get(event.data.identifier);\r\n        if (object !== null) {\r\n          this.selectedTableXml = object.toXml();\r\n        }\r\n      });\r\n  }\r\n\r\n  ngAfterViewInit() { }\r\n\r\n  ngOnDestroy() {\r\n    EventSystem.unregister(this);\r\n  }\r\n\r\n  selectGameTable(identifier: string) {\r\n    EventSystem.call('SELECT_GAME_TABLE', { identifier: identifier }, Network.peerId);\r\n    this.selectedTable = ObjectStore.instance.get<GameTable>(identifier);\r\n    this.selectedTableXml = '';\r\n  }\r\n\r\n  getGameTables(): GameTable[] {\r\n    return ObjectStore.instance.getObjects(GameTable);\r\n  }\r\n\r\n  createGameTable() {\r\n    let gameTable = new GameTable();\r\n    gameTable.name = '空白盤面';\r\n    gameTable.imageIdentifier = 'testTableBackgroundImage_image';\r\n    gameTable.initialize();\r\n    this.selectGameTable(gameTable.identifier);\r\n  }\r\n\r\n  async save() {\r\n    if (!this.selectedTable || this.isSaveing) return;\r\n    this.isSaveing = true;\r\n    this.progresPercent = 0;\r\n\r\n    this.selectedTable.selected = true;\r\n    await this.saveDataService.saveGameObjectAsync(this.selectedTable, 'map_' + this.selectedTable.name, percent => {\r\n      this.progresPercent = percent;\r\n    });\r\n\r\n    setTimeout(() => {\r\n      this.isSaveing = false;\r\n      this.progresPercent = 0;\r\n    }, 500);\r\n  }\r\n\r\n  delete() {\r\n    if (!this.isEmpty && this.selectedTable) {\r\n      this.selectedTableXml = this.selectedTable.toXml();\r\n      this.selectedTable.destroy();\r\n    }\r\n  }\r\n\r\n  restore() {\r\n    if (this.selectedTable && this.selectedTableXml) {\r\n      let restoreTable = ObjectSerializer.instance.parseXml(this.selectedTableXml);\r\n      this.selectGameTable(restoreTable.identifier);\r\n      this.selectedTableXml = '';\r\n    }\r\n  }\r\n\r\n  openBgImageModal() {\r\n    if (this.isDeleted) return;\r\n    this.modalService.open<string>(FileSelecterComponent).then(value => {\r\n      if (!this.selectedTable || !value) return;\r\n      this.selectedTable.imageIdentifier = value;\r\n    });\r\n  }\r\n\r\n  openDistanceViewImageModal() {\r\n    if (this.isDeleted) return;\r\n    this.modalService.open<string>(FileSelecterComponent, { isAllowedEmpty: true }).then(value => {\r\n      if (!this.selectedTable || !value) return;\r\n      this.selectedTable.backgroundImageIdentifier = value;\r\n    });\r\n  }\r\n}\r\n","<div class=\"flex-container\">\r\n  <div class=\"flex-item no-grow\">\r\n    <div>\r\n      <button (click)=\"createGameTable()\">新增盤面</button>\r\n    </div>\r\n    <select style=\"width: 10em;\" size=\"10\" (change)=\"selectGameTable($event.target.value)\" [ngModel]=\"selectedTable?.identifier\">\r\n      <option *ngFor=\"let gameTable of getGameTables()\" value=\"{{gameTable.identifier}}\">{{gameTable.name}}</option>\r\n    </select>\r\n  </div>\r\n  <div class=\"flex-item\">\r\n    <ng-container *ngIf=\"!isEmpty || selectedTable\">\r\n      <div class=\"images-select\">\r\n        <div>\r\n          地圖\r\n          <div (click)=\"openBgImageModal()\">\r\n            <img height=\"120\" [src]=\"tableBackgroundImage.url | safe: 'resourceUrl'\">\r\n          </div>\r\n        </div>\r\n        <div>\r\n          背景\r\n          <div *ngIf=\"!tableDistanceviewImage.url\">\r\n            <button (click)=\"openDistanceViewImageModal()\" style=\"height: 120px;\">追加背景圖像</button>\r\n          </div>\r\n          <div *ngIf=\"tableDistanceviewImage.url\" (click)=\"openDistanceViewImageModal()\">\r\n            <img height=\"120\" [src]=\"tableDistanceviewImage.url | safe: 'resourceUrl'\">\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div>Name :\r\n        <input [(ngModel)]=\"tableName\" placeholder=\"Name\" [attr.disabled]=\"!isEditable ? '' : null\" />\r\n      </div>\r\n      <div>\r\n        <input [(ngModel)]=\"tableWidth\" type=\"range\" min=\"{{minSize}}\" max=\"{{maxSize}}\" name=\"tableWidth\" [attr.disabled]=\"!isEditable ? '' : null\"\r\n        /> Width :\r\n        <input [(ngModel)]=\"tableWidth\" type=\"number\" min=\"{{minSize}}\" max=\"{{maxSize}}\" style=\"width: 5em;\" [attr.disabled]=\"!isEditable ? '' : null\">\r\n      </div>\r\n      <div>\r\n        <input [(ngModel)]=\"tableHeight\" type=\"range\" min=\"{{minSize}}\" max=\"{{maxSize}}\" name=\"tableHeight\" [attr.disabled]=\"!isEditable ? '' : null\"\r\n        /> Height :\r\n        <input [(ngModel)]=\"tableHeight\" type=\"number\" min=\"{{minSize}}\" max=\"{{maxSize}}\" style=\"width: 5em;\" [attr.disabled]=\"!isEditable ? '' : null\">\r\n      </div>\r\n      <div>\r\n        格線:\r\n        <select [(ngModel)]=\"tableGridType\" name=\"tableGridType\" [attr.disabled]=\"!isEditable ? '' : null\">\r\n          <option value=\"-1\">無</option>\r\n          <option value=\"0\">方格</option>\r\n          <option value=\"1\">六角格（縦向對齊）</option>\r\n          <option value=\"2\">六角格（横向對齊）</option>\r\n        </select>\r\n        格線顏色:\r\n        <input type=\"color\" [(ngModel)]=\"tableGridColor\" name=\"tableGridColor\"\r\n               list=\"table-grid-color-list\" [attr.disabled]=\"!isEditable ? '' : null\">\r\n        <datalist id=\"table-grid-color-list\">\r\n          <option value=\"#000000\">\r\n          <option value=\"#dddddd\">\r\n        </datalist>\r\n      </div>\r\n      <div>\r\n        背景濾鏡\r\n        <select [(ngModel)]=\"tableDistanceviewFilter\" name=\"tableDistanceviewFilter\" [attr.disabled]=\"!isEditable ? '' : null\">\r\n          <option value=\"\">無</option>\r\n          <option value=\"white\">白色</option>\r\n          <option value=\"black\">黑色</option>\r\n        </select>\r\n      </div>\r\n      <hr/>\r\n      <div>\r\n        <label>始終顯示格線:\r\n          <input type=\"checkbox\" [(ngModel)]=\"tableGridShow\" name=\"tableGridShow\" />\r\n        </label>\r\n        <label>對齊格線:\r\n          <input type=\"checkbox\" [(ngModel)]=\"tableGridSnap\" name=\"tableGridSnap\" />\r\n        </label>\r\n        <ng-container *ngIf=\"!isDeleted\">\r\n          <button [disabled]=\"isSaveing\" (click)=\"save()\">\r\n            <div style=\"position: relative;\">\r\n              <div [ngClass]=\"{'is-hidden': isSaveing}\">保存</div>\r\n              <div *ngIf=\"isSaveing\" class=\"progress\">{{progresPercent}}%</div>\r\n            </div>\r\n          </button>\r\n          <button class=\"danger\" (click)=\"delete()\" [attr.disabled]=\"getGameTables().length <= 1 ? '' : null\">刪除</button>\r\n        </ng-container>\r\n        <ng-container *ngIf=\"isDeleted\">\r\n          <button (click)=\"restore()\">撤回</button>\r\n        </ng-container>\r\n      </div>\r\n    </ng-container>\r\n  </div>\r\n</div>\r\n<ng-container *ngIf=\"isEmpty\">\r\n  <div style=\"font-size: 12px;\">※尚未創建盤面。 您可以從“新增盤面”中創建新盤面。</div>\r\n</ng-container>\r\n","function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"zn8P\";","import * as lzbase62 from 'lzbase62/lzbase62.min.js';\r\nimport * as CryptoJS from 'crypto-js/core.js';\r\nimport * as SHA256 from 'crypto-js/sha256.js';\r\n\r\nimport { base } from '../util/base-x';\r\n\r\nconst Base62 = base('0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ');\r\nconst roomIdPattern = /^(\\w{6})(\\w{3})(\\w*)-(\\w*)/i;\r\n\r\nexport interface IPeerContext {\r\n  readonly peerId: string;\r\n  readonly userId: string;\r\n  readonly roomId: string;\r\n  readonly roomName: string;\r\n  readonly password: string;\r\n  readonly digestUserId: string;\r\n  readonly digestPassword: string;\r\n  readonly isOpen: boolean;\r\n  readonly isRoom: boolean;\r\n  readonly hasPassword: boolean;\r\n}\r\n\r\nexport class PeerContext implements IPeerContext {\r\n  peerId: string = '';\r\n  userId: string = '';\r\n  roomId: string = '';\r\n  roomName: string = '';\r\n  password: string = '';\r\n  digestUserId: string = '';\r\n  digestPassword: string = '';\r\n  isOpen: boolean = false;\r\n\r\n  get isRoom(): boolean { return 0 < this.roomId.length; }\r\n  get hasPassword(): boolean { return 0 < this.password.length + this.digestPassword.length; }\r\n\r\n  private constructor(peerId: string) {\r\n    this.parse(peerId);\r\n  }\r\n\r\n  private parse(peerId: string) {\r\n    try {\r\n      this.peerId = peerId;\r\n      let regArray = roomIdPattern.exec(peerId);\r\n      let isRoom = regArray != null;\r\n      if (isRoom) {\r\n        this.digestUserId = regArray[1];\r\n        this.roomId = regArray[2];\r\n        this.roomName = lzbase62.decompress(regArray[3]);\r\n        this.digestPassword = regArray[4];\r\n        return;\r\n      }\r\n    } catch (e) {\r\n      console.warn(e);\r\n    }\r\n    this.digestUserId = peerId;\r\n    return;\r\n  }\r\n\r\n  verifyPassword(password: string): boolean {\r\n    let digest = calcDigestPassword(this.roomId, password);\r\n    let isCorrect = digest === this.digestPassword;\r\n    return isCorrect;\r\n  }\r\n\r\n  static parse(peerId: string): PeerContext {\r\n    return new PeerContext(peerId);\r\n  }\r\n\r\n  static create(userId: string): PeerContext\r\n  static create(userId: string, roomId: string, roomName: string, password: string): PeerContext\r\n  static create(...args: any[]): PeerContext {\r\n    if (args.length <= 1) {\r\n      return PeerContext._create.apply(this, args);\r\n    } else {\r\n      return PeerContext._createRoom.apply(this, args);\r\n    }\r\n  }\r\n\r\n  private static _create(userId: string = ''): PeerContext {\r\n    let digestUserId = calcDigestUserId(userId);\r\n    let peerContext = new PeerContext(digestUserId);\r\n\r\n    peerContext.userId = userId;\r\n    return peerContext;\r\n  }\r\n\r\n  private static _createRoom(userId: string = '', roomId: string = '', roomName: string = '', password: string = ''): PeerContext {\r\n    let digestUserId = this.generateId('******');\r\n    let digestPassword = calcDigestPassword(roomId, password);\r\n    let peerId = `${digestUserId}${roomId}${lzbase62.compress(roomName)}-${digestPassword}`;\r\n\r\n    let peerContext = new PeerContext(peerId);\r\n    peerContext.userId = userId;\r\n    peerContext.password = password;\r\n    return peerContext;\r\n  }\r\n\r\n  static generateId(format: string = '********'): string {\r\n    const h: string = '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ';\r\n\r\n    let k: string = format;\r\n    k = format.replace(/\\*/g, c => h[Math.floor(Math.random() * (h.length))]);\r\n\r\n    return k;\r\n  }\r\n}\r\n\r\nfunction calcDigestUserId(userId: string): string {\r\n  if (userId == null) return '';\r\n  return calcDigest(userId);\r\n}\r\n\r\nfunction calcDigestPassword(roomId: string, password: string): string {\r\n  if (roomId == null || password == null) return '';\r\n  return 0 < password.length ? calcDigest(roomId + password, 7) : '';\r\n}\r\n\r\nfunction calcDigest(str: string, truncateLength: number = -1): string {\r\n  if (str == null) return '';\r\n  let hash = SHA256(str);\r\n  let array = new Uint8Array(Uint32Array.from(hash.words).buffer);\r\n  let base62 = Base62.encode(array);\r\n\r\n  if (truncateLength < 0) truncateLength = base62.length;\r\n  if (base62.length < truncateLength) truncateLength = base62.length;\r\n\r\n  base62 = base62.slice(0, truncateLength);\r\n  return base62;\r\n}\r\n"],"sourceRoot":"webpack:///"}